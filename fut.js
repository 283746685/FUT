// ==UserScript==
// @name        BallFut免费版
// @version     1.0.2
// @author      JayQ
// @description BallFut免费版
// @match       https://www.ea.com/*/fifa/ultimate-team/web-app/*
// @match       https://www.ea.com/fifa/ultimate-team/web-app/*
// @namespace   JayQ
// @require     https://code.jquery.com/jquery-3.6.1.min.js
// @require     https://raw.githubusercontent.com/283746685/FUT/main/discord.js
// @require     https://greasyfork.org/scripts/47911-font-awesome-all-js/code/Font-awesome%20AllJs.js?version=275337
// @grant       GM_xmlhttpRequest
// @grant       GM_download
// @connect     ea.com
// @connect     ea2.com
// @connect     futwiz.com
// @connect     futbin.com
// @connect     amazonaws.com
// @connect     futbin.org
// @connect     futhelpers.com
// @connect     on.aws
// @connect     discordapp.com
// @connect     exp.host
// @updateURL    https://raw.githubusercontent.com/283746685/FUT/main/fut.js
// @downloadURL  https://raw.githubusercontent.com/283746685/FUT/main/fut.js
// ==/UserScript==

(()=>{function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}var __webpack_modules__={791:(e,t,n)=>{"use strict";n.d(t,{DP:()=>s,Dq:()=>x,FT:()=>W,GC:()=>a,J:()=>g,Jl:()=>c,L1:()=>b,Lo:()=>z,MF:()=>E,Mg:()=>i,Mx:()=>K,Nl:()=>B,Pn:()=>G,Pq:()=>R,Qt:()=>D,R4:()=>N,SS:()=>u,VY:()=>F,WF:()=>y,WV:()=>j,XE:()=>A,Y:()=>O,YG:()=>P,YX:()=>p,ZH:()=>d,_:()=>l,am:()=>L,b8:()=>T,bo:()=>h,dj:()=>S,e7:()=>U,er:()=>o,i8:()=>w,iT:()=>C,jf:()=>f,kN:()=>m,lr:()=>M,oL:()=>v,oy:()=>k,pg:()=>q,tK:()=>_,x7:()=>$,y5:()=>V,zD:()=>I});var r=n(448);const i=90,o=20,s="elem_"+(0,r.Ox)(15),a="elem_"+(0,r.Ox)(15),u="elem_"+(0,r.Ox)(15),c="elem_"+(0,r.Ox)(15),l=((0,r.Ox)(15),(0,r.Ox)(15),(0,r.Ox)(15),"elem_"+(0,r.Ox)(15)),d="elem_"+(0,r.Ox)(15),f=((0,r.Ox)(15),"elem_"+(0,r.Ox)(15)),p="elem_"+(0,r.Ox)(15),h=((0,r.Ox)(15),(0,r.Ox)(15),(0,r.Ox)(15),(0,r.Ox)(15),"elem_"+(0,r.Ox)(15)),v="elem_"+(0,r.Ox)(15),g="elem_"+(0,r.Ox)(15),y="elem_"+(0,r.Ox)(15),m="elem_"+(0,r.Ox)(15),b="elem_"+(0,r.Ox)(15),w="elem_"+(0,r.Ox)(15),_="elem_"+(0,r.Ox)(15),S="elem_"+(0,r.Ox)(15),E="elem_"+(0,r.Ox)(15),C="elem_"+(0,r.Ox)(15),A="elem_"+(0,r.Ox)(15),O="elem_"+(0,r.Ox)(15),I="elem_"+(0,r.Ox)(15),x=((0,r.Ox)(15),"elem_"+(0,r.Ox)(15)),T="elem_"+(0,r.Ox)(15),P="elem_"+(0,r.Ox)(15),k="elem_"+(0,r.Ox)(15),D="elem_"+(0,r.Ox)(15),N=(0,r.Ox)(15),M=(0,r.Ox)(15),L="elem_"+(0,r.Ox)(15),j="elem_"+(0,r.Ox)(15),R="elem_"+(0,r.Ox)(15),U="elem_"+(0,r.Ox)(15),F="elem_"+(0,r.Ox)(15),B="elem_"+(0,r.Ox)(15),z=!!window.ReactNativeWebView,q="elem_"+(0,r.Ox)(15),K="elem_"+(0,r.Ox)(15),$="elem_"+(0,r.Ox)(15),V="elem_"+(0,r.Ox)(15),G="elem_"+(0,r.Ox)(15),W="elem_"+(0,r.Ox)(15)},793:function(e){e.exports=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(t){return e[t]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=123)}([function(e,t,n){"use strict";function r(e,t){function n(){this.constructor=e}if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");l(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function i(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function o(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})}function s(e,t){function n(n){return function(u){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,n[0]&&(a=0)),a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,u])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s}function a(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function u(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function c(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}n.d(t,"c",function(){return r}),n.d(t,"a",function(){return d}),n.d(t,"f",function(){return i}),n.d(t,"b",function(){return o}),n.d(t,"d",function(){return s}),n.d(t,"h",function(){return a}),n.d(t,"e",function(){return u}),n.d(t,"g",function(){return c});var l=function(e,t){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},d=function(){return(d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.create,Object.create},function(e,t,n){"use strict";function r(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16)})}function i(e){var t=e.getUTCFullYear(),n=e.getUTCMonth(),r=e.getUTCDay(),i=e.getUTCDate(),o=e.getUTCHours(),s=e.getUTCMinutes(),a=e.getUTCSeconds();return v[r]+", "+(i<10?"0"+i:""+i)+" "+g[n]+" "+t+" "+(o<10?"0"+o:""+o)+":"+(s<10?"0"+s:""+s)+":"+(a<10?"0"+a:""+a)+" GMT"}n.d(t,"a",function(){return c}),n.d(t,"b",function(){return l}),n.d(t,"f",function(){return r}),n.d(t,"g",function(){return d}),n.d(t,"h",function(){return f}),n.d(t,"c",function(){return h}),n.d(t,"e",function(){return i}),n.d(t,"d",function(){return y});var o=n(2),s=function(){var e=[],t=[],n=new Set,r=function(n){return e.forEach(function(e){n.add(e.middleware,Object(o.__assign)({},e))}),t.forEach(function(e){n.addRelativeTo(e.middleware,Object(o.__assign)({},e))}),n},i=function(e){var t=[];return e.before.forEach(function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,Object(o.__spread)(i(e)))}),t.push(e),e.after.reverse().forEach(function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,Object(o.__spread)(i(e)))}),t},c=function(){var n,r=[],s=[],c={};return e.forEach(function(e){var t=Object(o.__assign)(Object(o.__assign)({},e),{before:[],after:[]});t.name&&(c[t.name]=t),r.push(t)}),t.forEach(function(e){var t=Object(o.__assign)(Object(o.__assign)({},e),{before:[],after:[]});t.name&&(c[t.name]=t),s.push(t)}),s.forEach(function(e){if(e.toMiddleware){var t=c[e.toMiddleware];if(void 0===t)throw new Error(e.toMiddleware+" is not found when adding "+(e.name||"anonymous")+" middleware "+e.relation+" "+e.toMiddleware);"after"===e.relation&&t.after.push(e),"before"===e.relation&&t.before.push(e)}}),(n=r,n.sort(function(e,t){return a[t.step]-a[e.step]||u[t.priority||"normal"]-u[e.priority||"normal"]})).map(i).reduce(function(e,t){return e.push.apply(e,Object(o.__spread)(t)),e},[]).map(function(e){return e.middleware})},l={add:function(t,r){void 0===r&&(r={});var i=r.name,s=r.override,a=Object(o.__assign)({step:"initialize",priority:"normal",middleware:t},r);if(i){if(n.has(i)){if(!s)throw new Error("Duplicate middleware name '"+i+"'");var u=e.findIndex(function(e){return e.name===i}),c=e[u];if(c.step!==a.step||c.priority!==a.priority)throw new Error('"'+i+'" middleware with '+c.priority+" priority in "+c.step+" step cannot be overridden by same-name middleware with "+a.priority+" priority in "+a.step+" step.");e.splice(u,1)}n.add(i)}e.push(a)},addRelativeTo:function(e,r){var i=r.name,s=r.override,a=Object(o.__assign)({middleware:e},r);if(i){if(n.has(i)){if(!s)throw new Error("Duplicate middleware name '"+i+"'");var u=t.findIndex(function(e){return e.name===i}),c=t[u];if(c.toMiddleware!==a.toMiddleware||c.relation!==a.relation)throw new Error('"'+i+'" middleware '+c.relation+' "'+c.toMiddleware+'" middleware cannot be overridden by same-name middleware '+a.relation+' "'+a.toMiddleware+'" middleware.');t.splice(u,1)}n.add(i)}t.push(a)},clone:function(){return r(s())},use:function(e){e.applyToStack(l)},remove:function(r){return"string"==typeof r?function(r){var i=!1,o=function(e){return!e.name||e.name!==r||(i=!0,n.delete(r),!1)};return e=e.filter(o),t=t.filter(o),i}(r):function(r){var i=!1,o=function(e){return e.middleware!==r||(i=!0,e.name&&n.delete(e.name),!1)};return e=e.filter(o),t=t.filter(o),i}(r)},removeByTag:function(r){var i=!1,o=function(e){var t=e.tags,o=e.name;return!t||!t.includes(r)||(o&&n.delete(o),i=!0,!1)};return e=e.filter(o),t=t.filter(o),i},concat:function(e){var t=r(s());return t.use(e),t},applyToStack:r,resolve:function(e,t){var n,r;try{for(var i=Object(o.__values)(c().reverse()),s=i.next();!s.done;s=i.next())e=(0,s.value)(e,t)}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return e}};return l},a={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},u={high:3,normal:2,low:1},c=function(){function e(e){this.middlewareStack=s(),this.config=e}return e.prototype.send=function(e,t,n){var r="function"!=typeof t?t:void 0,i="function"==typeof t?t:n,o=e.resolveMiddleware(this.middlewareStack,this.config,r);if(!i)return o(e).then(function(e){return e.output});o(e).then(function(e){return i(null,e.output)},function(e){return i(e)}).catch(function(){})},e.prototype.destroy=function(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()},e}(),l=function(){this.middlewareStack=s()},d=function(e){return Array.isArray(e)?e:[e]},f=function(e){for(var t in e)e.hasOwnProperty(t)&&void 0!==e[t]["#text"]?e[t]=e[t]["#text"]:"object"==typeof e[t]&&null!==e[t]&&(e[t]=f(e[t]));return e},p=function(){var e=Object.getPrototypeOf(this).constructor,t=new(Function.bind.apply(String,Object(o.__spread)([null],arguments)));return Object.setPrototypeOf(t,e.prototype),t};p.prototype=Object.create(String.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(p,String);var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.__extends)(t,e),t.prototype.deserializeJSON=function(){return JSON.parse(e.prototype.toString.call(this))},t.prototype.toJSON=function(){return e.prototype.toString.call(this)},t.fromObject=function(e){return e instanceof t?e:new t(e instanceof String||"string"==typeof e?e:JSON.stringify(e))},t}(p),v=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],g=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],y="***SensitiveInformation***"},function(e,t,n){"use strict";function r(e,t){function n(){this.constructor=e}A(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function i(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function o(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function s(e,t){return function(n,r){t(n,r,e)}}function a(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})}function c(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s}function l(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}function d(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function f(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function p(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function h(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}function v(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function g(e){return this instanceof g?(this.v=e,this):new g(e)}function y(e,t,n){function r(e){c[e]&&(u[e]=function(t){return new Promise(function(n,r){l.push([e,t,n,r])>1||i(e,t)})})}function i(e,t){try{(n=c[e](t)).value instanceof g?Promise.resolve(n.value.v).then(o,s):a(l[0][2],n)}catch(e){a(l[0][3],e)}var n}function o(e){i("next",e)}function s(e){i("throw",e)}function a(e,t){e(t),l.shift(),l.length&&i(l[0][0],l[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var u,c=n.apply(e,t||[]),l=[];return u={},r("next"),r("throw"),r("return"),u[Symbol.asyncIterator]=function(){return this},u}function m(e){function t(t,i){n[t]=e[t]?function(n){return(r=!r)?{value:g(e[t](n)),done:"return"===t}:i?i(n):n}:i}var n,r;return n={},t("next"),t("throw",function(e){throw e}),t("return"),n[Symbol.iterator]=function(){return this},n}function b(e){function t(t){n[t]=e[t]&&function(n){return new Promise(function(r,i){!function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}(r,i,(n=e[t](n)).done,n.value)})}}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,r=e[Symbol.asyncIterator];return r?r.call(e):(e=f(e),n={},t("next"),t("throw"),t("return"),n[Symbol.asyncIterator]=function(){return this},n)}function w(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function S(e){return e&&e.__esModule?e:{default:e}}function E(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function C(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}n.r(t),n.d(t,"__extends",function(){return r}),n.d(t,"__assign",function(){return O}),n.d(t,"__rest",function(){return i}),n.d(t,"__decorate",function(){return o}),n.d(t,"__param",function(){return s}),n.d(t,"__metadata",function(){return a}),n.d(t,"__awaiter",function(){return u}),n.d(t,"__generator",function(){return c}),n.d(t,"__createBinding",function(){return l}),n.d(t,"__exportStar",function(){return d}),n.d(t,"__values",function(){return f}),n.d(t,"__read",function(){return p}),n.d(t,"__spread",function(){return h}),n.d(t,"__spreadArrays",function(){return v}),n.d(t,"__await",function(){return g}),n.d(t,"__asyncGenerator",function(){return y}),n.d(t,"__asyncDelegator",function(){return m}),n.d(t,"__asyncValues",function(){return b}),n.d(t,"__makeTemplateObject",function(){return w}),n.d(t,"__importStar",function(){return _}),n.d(t,"__importDefault",function(){return S}),n.d(t,"__classPrivateFieldGet",function(){return E}),n.d(t,"__classPrivateFieldSet",function(){return C});var A=function(e,t){return(A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},O=function(){return(O=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)}},function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return o});var r=function(){function e(e){this.statusCode=e.statusCode,this.headers=e.headers||{},this.body=e.body}return e.isInstance=function(e){if(!e)return!1;var t=e;return"number"==typeof t.statusCode&&"object"==typeof t.headers},e}(),i=n(2),o=function(){function e(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?":"!==e.protocol.substr(-1)?e.protocol+":":e.protocol:"https:",this.path=e.path?"/"!==e.path.charAt(0)?"/"+e.path:e.path:"/"}return e.isInstance=function(e){if(!e)return!1;var t=e;return"method"in t&&"protocol"in t&&"hostname"in t&&"path"in t&&"object"==typeof t.query&&"object"==typeof t.headers},e.prototype.clone=function(){var t,n=new e(Object(i.__assign)(Object(i.__assign)({},this),{headers:Object(i.__assign)({},this.headers)}));return n.query&&(n.query=(t=n.query,Object.keys(t).reduce(function(e,n){var r,o=t[n];return Object(i.__assign)(Object(i.__assign)({},e),((r={})[n]=Array.isArray(o)?Object(i.__spread)(o):o,r))},{}))),n},e}()},function(e,t,n){"use strict";function r(e){var t=new Error(e);return t.source="ulid",t}function i(e,t,n){return t>e.length-1?e:e.substr(0,t)+n+e.substr(t+1)}function o(e){var t=Math.floor(e()*b);return t===b&&(t=b-1),m.charAt(t)}function s(e,t){if(isNaN(e))throw new Error(e+" must be a number");if(e>w)throw r("cannot encode time greater than "+w);if(e<0)throw r("time must be positive");if(!1===Number.isInteger(e))throw r("time must be an integer");for(var n=void 0,i="";t>0;t--)i=m.charAt(n=e%b)+i,e=(e-n)/b;return i}function a(e,t){for(var n="";e>0;e--)n=o(t)+n;return n}function u(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments[1];t||(t="undefined"!=typeof window?window:null);var i=t&&(t.crypto||t.msCrypto);if(i)return function(){var e=new Uint8Array(1);return i.getRandomValues(e),e[0]/255};try{var o=n(350);return function(){return o.randomBytes(1).readUInt8()/255}}catch(e){}if(e){try{console.error("secure crypto unusable, falling back to insecure Math.random()!")}catch(e){}return function(){return Math.random()}}throw r("secure crypto unusable, insecure Math.random not allowed")}function c(e){e||(e=u());var t=0,n=void 0;return function(o){if(isNaN(o)&&(o=Date.now()),o<=t){var u=n=function(e){for(var t=void 0,n=e.length,o=void 0,s=void 0,a=b-1;!t&&n-- >=0;){if(o=e[n],-1===(s=m.indexOf(o)))throw r("incorrectly encoded string");s!==a?t=i(e,n,m[s+1]):e=i(e,n,m[0])}if("string"==typeof t)return t;throw r("cannot increment this string")}(n);return s(t,10)+u}t=o;var c=n=a(16,e);return s(o,10)+c}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e){H.add(e)}function f(e){var t=c(Q);return function(){return t(e)}}function p(){return"undefined"!=typeof performance&&performance&&"function"==typeof performance.now?0|performance.now():Date.now()}function h(e){return function(t,n){var r,i;try{for(var o=P(e),s=o.next();!s.done;s=o.next()){var a=s.value,u=a.field,c=a.sortDirection===A.k.ASCENDING?1:-1;if(t[u]<n[u])return-1*c;if(t[u]>n[u])return 1*c}}catch(e){r={error:e}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return 0}}function v(e,t,n){var r,i;void 0===n&&(n=!1);var o,s,a=e,u=t;if(a instanceof Object&&!(u instanceof Object)||!(a instanceof Object)&&u instanceof Object)return!1;if(!(a instanceof Object))return!(!n||(o=a,s=u,null!=o||null!=s))||a===u;if(Array.isArray(a)&&!Array.isArray(u)||Array.isArray(u)&&!Array.isArray(a))return!1;a instanceof Set&&u instanceof Set&&(a=k(a),u=k(u)),a instanceof Map&&u instanceof Map&&(a=Object.fromEntries(a),u=Object.fromEntries(u));var c=Object.keys(a),l=Object.keys(u);if(c.length!==l.length&&(!n||Array.isArray(a)))return!1;var d=c.length>=l.length?c:l;try{for(var f=P(d),p=f.next();!p.done;p=f.next()){var h=p.value;if(!v(a[h],u[h],n))return!1}}catch(e){r={error:e}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}return!0}function g(e,t,n){var r,i=t.concat(n);return Object(C.d)(e,function(e){Object(C.a)(e,i)},function(e){r=e}),r}n.d(t,"d",function(){return D}),n.d(t,"b",function(){return N}),n.d(t,"e",function(){return M}),n.d(t,"j",function(){return L}),n.d(t,"h",function(){return F}),n.d(t,"g",function(){return B}),n.d(t,"f",function(){return z}),n.d(t,"a",function(){return U}),n.d(t,"i",function(){return q}),n.d(t,"l",function(){return K}),n.d(t,"I",function(){return $}),n.d(t,"R",function(){return V}),n.d(t,"H",function(){return W}),n.d(t,"O",function(){return d}),n.d(t,"Q",function(){return Y}),n.d(t,"J",function(){return Z}),n.d(t,"K",function(){return X}),n.d(t,"N",function(){return f}),n.d(t,"t",function(){return p}),n.d(t,"P",function(){return h}),n.d(t,"S",function(){return v}),n.d(t,"w",function(){return ee}),n.d(t,"C",function(){return te}),n.d(t,"x",function(){return ne}),n.d(t,"D",function(){return re}),n.d(t,"y",function(){return ie}),n.d(t,"A",function(){return oe}),n.d(t,"E",function(){return se}),n.d(t,"B",function(){return ae}),n.d(t,"z",function(){return ue}),n.d(t,"c",function(){return le}),n.d(t,"M",function(){return g}),n.d(t,"u",function(){return de}),n.d(t,"m",function(){return pe}),n.d(t,"n",function(){return he}),n.d(t,"o",function(){return ve}),n.d(t,"F",function(){return ge}),n.d(t,"G",function(){return ye}),n.d(t,"k",function(){return me}),n.d(t,"q",function(){return be}),n.d(t,"r",function(){return we}),n.d(t,"p",function(){return _e}),n.d(t,"v",function(){return Se}),n.d(t,"L",function(){return Ee}),n.d(t,"s",function(){return Ce});var y=n(12),m="0123456789ABCDEFGHJKMNPQRSTVWXYZ",b=m.length,w=Math.pow(2,48)-1;_||(_=u());var _,S,E=n(69),C=n(53),A=n(6),O=n(25),I=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},x=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},T=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},P=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},k=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(T(arguments[t]));return e},D="id",N="#",M="-",L={idEmptyString:"An index field cannot contain an empty string value",queryByPkWithCompositeKeyPresent:"Models with composite primary keys cannot be queried by a single key value. Use object literal syntax for composite keys instead: https://docs.amplify.aws/lib/datastore/advanced-workflows/q/platform/js/#querying-records-with-custom-primary-keys",deleteByPkWithCompositeKeyPresent:"Models with composite primary keys cannot be deleted by a single key value, unless using a predicate. Use object literal syntax for composite keys instead: https://docs.amplify.aws/lib/datastore/advanced-workflows/q/platform/js/#querying-records-with-custom-primary-keys",observeWithObjectLiteral:"Object literal syntax cannot be used with observe. Use a predicate instead: https://docs.amplify.aws/lib/datastore/data-access/q/platform/js/#predicates"};!function(e){e.DATASTORE="datastore",e.USER="user",e.SYNC="sync",e.STORAGE="storage"}(S||(S={}));var j,R,U=S.DATASTORE,F=S.USER,B=S.SYNC,z=S.STORAGE,q="/DataStore",K=function(e,t){if(void 0===t&&(t=!0),t)throw new Error("Invalid "+e)},$=function(e){return void 0===e||null==e},V=function e(t,n,r){var i,o=!1;if(0===r.length)return!0;switch(n){case"not":i="every",o=!0;break;case"and":i="every";break;case"or":i="some";break;default:K(n)}var s=r[i](function(n){if(Object(A.u)(n)){var r=n.field,i=n.operator,o=n.operand,s=t[r];return G(s,i,o)}if(Object(A.t)(n)){var a=n.type,u=n.predicates;return e(t,a,u)}throw new Error("Not a predicate or group")});return o?!s:s},G=function(e,t,n){switch(t){case"ne":return e!==n;case"eq":return e===n;case"le":return e<=n;case"lt":return e<n;case"ge":return e>=n;case"gt":return e>n;case"between":var r=T(n,2),i=r[0],o=r[1];return e>=i&&e<=o;case"beginsWith":return!$(e)&&e.startsWith(n);case"contains":return!$(e)&&e.indexOf(n)>-1;case"notContains":return $(e)||-1===e.indexOf(n);default:return K(t,!1),!1}},W=function(e){return e&&"function"==typeof e.copyOf},H=new WeakSet,J=new WeakMap,Y=function(e,t,n,r,i){var o=n.relationships,s=i(n.name,e),a=o[e],u=[],c=s.copyOf(t,function(e){a.relationTypes.forEach(function(o){var s=i(n.name,o.modelName);switch(o.relationType){case"HAS_ONE":if(t[o.fieldName]){var a=void 0;try{a=r(s,t[o.fieldName])}catch(e){console.log(e)}u.push({modelName:o.modelName,item:t[o.fieldName],instance:a}),(c=_e(o))?(c.forEach(function(t,r){var i=e[o.fieldName],a=n.keys[s.name].primaryKey,u=i[a&&a[r]];e[t]=u}),delete e[o.fieldName]):e[o.fieldName]=e[o.fieldName].id}break;case"BELONGS_TO":if(t[o.fieldName]){a=void 0;try{a=r(s,t[o.fieldName])}catch(e){}e[o.fieldName]._deleted||u.push({modelName:o.modelName,item:t[o.fieldName],instance:a})}var c;e[o.fieldName]&&(c=_e(o))&&(c.forEach(function(t,r){var i=e[o.fieldName],a=n.keys[s.name].primaryKey,u=i[a&&a[r]];e[t]=u}),delete e[o.fieldName]);break;case"HAS_MANY":break;default:K(o.relationType)}})});u.unshift({modelName:e,item:c,instance:c}),J.has(n)||J.set(n,Array.from(n.modelTopologicalOrdering.keys()));var l=J.get(n);return u.sort(function(e,t){return l.indexOf(e.modelName)-l.indexOf(t.modelName)}),u},Z=function(){return new Promise(function(e){var t,n=Object(E.v4)(),r=function(){j=!1,e(!0)},i=function(){return I(void 0,void 0,void 0,function(){return x(this,function(r){switch(r.label){case 0:return t&&t.result&&"function"==typeof t.result.close?[4,t.result.close()]:[3,2];case 1:r.sent(),r.label=2;case 2:return[4,indexedDB.deleteDatabase(n)];case 3:return r.sent(),j=!0,[2,e(!1)]}})})};return!0===j?i():!1===j||null===indexedDB?r():((t=indexedDB.open(n)).onerror=r,void(t.onsuccess=i))})},X=function(){return I(void 0,void 0,void 0,function(){var e,t,n,r,i,o;return x(this,function(s){switch(s.label){case 0:return s.trys.push([0,6,,7]),e=Object(E.v4)(),t="indexedDBFeatureProbeStore",n="idx",null===indexedDB?[2,!1]:void 0!==R?[2,R]:[4,new Promise(function(r){var i=indexedDB.open(e);i.onerror=function(){return r(!1)},i.onsuccess=function(){var e=i.result;r(e)},i.onupgradeneeded=function(e){var i,o=null===(i=null==e?void 0:e.target)||void 0===i?void 0:i.result;o.onerror=function(){return r(!1)},o.createObjectStore(t,{autoIncrement:!0}).createIndex(n,["id"])}})];case 1:if(!(r=s.sent()))throw new Error("Could not open probe DB");return(i=r.transaction(t,"readwrite")).objectStore(t).add({id:1}),i.commit(),[4,new Promise(function(e){var i=r.transaction(t,"readonly").objectStore(t).index(n).get([1]);i.onerror=function(){return e(!1)},i.onsuccess=function(t){var n;e(null===(n=null==t?void 0:t.target)||void 0===n?void 0:n.result)}})];case 2:return o=s.sent(),r&&"function"==typeof r.close?[4,r.close()]:[3,4];case 3:s.sent(),s.label=4;case 4:return[4,indexedDB.deleteDatabase(e)];case 5:return s.sent(),R=void 0===o,[3,7];case 6:return s.sent(),R=!1,[3,7];case 7:return[2,R]}})})},Q=function(){return(e=1,y.Buffer.from((new O.j).random(e).toString(),"hex")).readUInt8(0)/255;var e},ee=function(e){return!!/^\d{4}-\d{2}-\d{2}(Z|[+-]\d{2}:\d{2}($|:\d{2}))?$/.exec(e)},te=function(e){return!!/^\d{2}:\d{2}(:\d{2}(.\d+)?)?(Z|[+-]\d{2}:\d{2}($|:\d{2}))?$/.exec(e)},ne=function(e){return!!/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}(:\d{2}(.\d+)?)?(Z|[+-]\d{2}:\d{2}($|:\d{2}))?$/.exec(e)},re=function(e){return!!/^\d+$/.exec(String(e))},ie=function(e){return!!/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.exec(e)},oe=function(e){try{return JSON.parse(e),!0}catch(e){return!1}},se=function(e){try{return!!new URL(e)}catch(e){return!1}},ae=function(e){return!!/^\+?\d[\d\s-]+$/.exec(e)},ue=function(e){
return!!/((^((([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]))$)|(^((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?$))$/.exec(e)},ce=function(){var e=this;this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})},le=function(){function e(e){this.limitPromise=new ce,this.raceInFlight=!1,this.callback=function(){},this.defaultErrorHandler=function(e){throw void 0===e&&(e="DeferredCallbackResolver error"),new Error(e)},this.callback=e.callback,this.errorHandler=e.errorHandler||this.defaultErrorHandler,this.maxInterval=e.maxInterval||2e3}return e.prototype.startTimer=function(){var e=this;this.timerPromise=new Promise(function(t,n){e.timer=setTimeout(function(){t(A.d.TIMER)},e.maxInterval)})},e.prototype.racePromises=function(){return I(this,void 0,void 0,function(){var e,t;return x(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,3,4]),this.raceInFlight=!0,this.startTimer(),[4,Promise.race([this.timerPromise,this.limitPromise.promise])];case 1:return e=n.sent(),this.callback(),[3,4];case 2:return t=n.sent(),this.errorHandler(t),[3,4];case 3:return this.clear(),this.raceInFlight=!1,this.limitPromise=new ce,[2,e];case 4:return[2]}})})},e.prototype.start=function(){this.raceInFlight||this.racePromises()},e.prototype.clear=function(){clearTimeout(this.timer)},e.prototype.resolve=function(){this.limitPromise.resolve(A.d.LIMIT)},e}(),de=function(e,t){return e+"_"+t},fe=function(e){var t;return null===(t=null==e?void 0:e.attributes)||void 0===t?void 0:t.find(A.p)},pe=function(e){var t=fe(e);return t&&Object(A.q)(t)?t.properties.fields:[D]},he=function(e,t){return t.map(function(t){return e[t]})},ve=function(e,t){var n={};return t.forEach(function(t){return n[t]=e[t]}),n},ge=function(e){var t=fe(e);return!t||!Object(A.q)(t)},ye=function(e){var t=fe(e);return!(!t||!Object(A.q)(t))&&t.properties.fields[0]===D},me=function(e){var t={},n={};return Object.keys(e.models).forEach(function(r){var i,o;t[r]={indexes:[],relationTypes:[]},n[r]={};var s,a,u=e.models[r];if(Object.keys(u.fields).forEach(function(e){var n=u.fields[e];if("object"===l(n.type)&&"model"in n.type){var i=n.association.connectionType;if(t[r].relationTypes.push({fieldName:n.name,modelName:n.type.model,relationType:i,targetName:n.association.targetName,targetNames:n.association.targetNames,associatedWith:n.association.associatedWith}),"BELONGS_TO"===i){var o=_e(n.association);if(o){var s=Se(o);t[r].indexes.push([s,o])}}}}),u.attributes){n[r].compositeKeys=(a=(s=function(e){return e.reduce(function(e,t){var n=new Set(t);if(0===e.length)return e.push(n),e;var r=e.findIndex(function(e){return k(e).some(function(e){return n.has(e)})});if(r>-1){var i=new Set(k(e[r],n));e[r]=i}else e.push(n);return e},[])})(u.attributes.filter(A.o).map(function(e){return T(e.properties.fields).slice(1)})),s(a));var c=function(e){if(!Object(A.p)(e))return"continue";var i=e.properties.fields;if(Object(A.q)(e))return n[r].primaryKey=i,"continue";var o=Se(i);t[r].indexes.find(function(e){return T(e,1)[0]===o})||t[r].indexes.push([o,i])};try{for(var d=P(u.attributes),f=d.next();!f.done;f=d.next())c(f.value)}catch(e){i={error:e}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}}n[r].primaryKey||(n[r].primaryKey=[D]),t[r].indexes.push(["byPk",n[r].primaryKey,{unique:!0}])}),[t,n]},be=function(e,t){var n;return e.some(function(e){if(e.modelName===t){var r=_e(e);return n=r&&Se(r),!0}}),n},we=function(e,t){var n;n=Array.isArray(t)?Se(t):t;var r=e.find(function(e){return T(e,1)[0]===n});return r&&r[0]},_e=function(e){var t=null==e?void 0:e.targetName,n=null==e?void 0:e.targetNames;return Array.isArray(n)?n:"string"==typeof t?[t]:void 0},Se=function(e){return e.reduce(function(e,t,n){return 0===n?t:""+e+M+t},"")},Ee=function(e,t){return e.length===t.length&&e.every(function(e,n){return e===t[n]})},Ce=function(e,t){var n;return(null===(n=null==e?void 0:e.keys[t])||void 0===n?void 0:n.primaryKey)||[D]}},function(e,t,n){"use strict";function r(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function i(e,t,n){var r,i,s,a;if(void 0===t&&void 0===n)s={},a=e;else{if(s=e,"function"==typeof t)return k(s,t,a=n);a=t}try{for(var u=Object(o.h)(Object.keys(a)),c=u.next();!c.done;c=u.next()){var l=c.value;if(Array.isArray(a[l])){var d=Object(o.e)(a[l],2),f=d[0],p=d[1];if("function"==typeof p){var h=void 0,v=void 0===f&&null!=(h=p()),g="function"==typeof f&&!!f(void 0)||"function"!=typeof f&&!!f;v?s[l]=h:g&&(s[l]=p())}else v=void 0===f&&null!=p,g="function"==typeof f&&!!f(p)||"function"!=typeof f&&!!f,(v||g)&&(s[l]=p)}else s[l]=a[l]}}catch(e){r={error:e}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return s}n.d(t,"a",function(){return c}),n.d(t,"b",function(){return l}),n.d(t,"d",function(){return d}),n.d(t,"o",function(){return O}),n.d(t,"l",function(){return x}),n.d(t,"e",function(){return C}),n.d(t,"f",function(){return A}),n.d(t,"c",function(){return P}),n.d(t,"m",function(){return i}),n.d(t,"g",function(){return h}),n.d(t,"h",function(){return y}),n.d(t,"i",function(){return m}),n.d(t,"j",function(){return b}),n.d(t,"k",function(){return w}),n.d(t,"n",function(){return D});var o=n(0),s=function(){var e=[],t=[],n=new Set,r=function(n){return e.forEach(function(e){n.add(e.middleware,Object(o.a)({},e))}),t.forEach(function(e){n.addRelativeTo(e.middleware,Object(o.a)({},e))}),n},i=function(e){var t=[];return e.before.forEach(function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,Object(o.g)([],Object(o.e)(i(e)),!1))}),t.push(e),e.after.reverse().forEach(function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,Object(o.g)([],Object(o.e)(i(e)),!1))}),t},c=function(n){void 0===n&&(n=!1);var r,s=[],c=[],l={};return e.forEach(function(e){var t=Object(o.a)(Object(o.a)({},e),{before:[],after:[]});t.name&&(l[t.name]=t),s.push(t)}),t.forEach(function(e){var t=Object(o.a)(Object(o.a)({},e),{before:[],after:[]});t.name&&(l[t.name]=t),c.push(t)}),c.forEach(function(e){if(e.toMiddleware){var t=l[e.toMiddleware];if(void 0===t){if(n)return;throw new Error("".concat(e.toMiddleware," is not found when adding ").concat(e.name||"anonymous"," middleware ").concat(e.relation," ").concat(e.toMiddleware))}"after"===e.relation&&t.after.push(e),"before"===e.relation&&t.before.push(e)}}),(r=s,r.sort(function(e,t){return a[t.step]-a[e.step]||u[t.priority||"normal"]-u[e.priority||"normal"]})).map(i).reduce(function(e,t){return e.push.apply(e,Object(o.g)([],Object(o.e)(t),!1)),e},[])},l={add:function(t,r){void 0===r&&(r={});var i=r.name,s=r.override,a=Object(o.a)({step:"initialize",priority:"normal",middleware:t},r);if(i){if(n.has(i)){if(!s)throw new Error("Duplicate middleware name '".concat(i,"'"));var u=e.findIndex(function(e){return e.name===i}),c=e[u];if(c.step!==a.step||c.priority!==a.priority)throw new Error('"'.concat(i,'" middleware with ').concat(c.priority," priority in ").concat(c.step," step cannot be ")+"overridden by same-name middleware with ".concat(a.priority," priority in ").concat(a.step," step."));e.splice(u,1)}n.add(i)}e.push(a)},addRelativeTo:function(e,r){var i=r.name,s=r.override,a=Object(o.a)({middleware:e},r);if(i){if(n.has(i)){if(!s)throw new Error("Duplicate middleware name '".concat(i,"'"));var u=t.findIndex(function(e){return e.name===i}),c=t[u];if(c.toMiddleware!==a.toMiddleware||c.relation!==a.relation)throw new Error('"'.concat(i,'" middleware ').concat(c.relation,' "').concat(c.toMiddleware,'" middleware cannot be overridden ')+"by same-name middleware ".concat(a.relation,' "').concat(a.toMiddleware,'" middleware.'));t.splice(u,1)}n.add(i)}t.push(a)},clone:function(){return r(s())},use:function(e){e.applyToStack(l)},remove:function(r){return"string"==typeof r?function(r){var i=!1,o=function(e){return!e.name||e.name!==r||(i=!0,n.delete(r),!1)};return e=e.filter(o),t=t.filter(o),i}(r):function(r){var i=!1,o=function(e){return e.middleware!==r||(i=!0,e.name&&n.delete(e.name),!1)};return e=e.filter(o),t=t.filter(o),i}(r)},removeByTag:function(r){var i=!1,o=function(e){var t=e.tags,o=e.name;return!t||!t.includes(r)||(o&&n.delete(o),i=!0,!1)};return e=e.filter(o),t=t.filter(o),i},concat:function(e){var t=r(s());return t.use(e),t},applyToStack:r,identify:function(){return c(!0).map(function(e){return e.name+": "+(e.tags||[]).join(",")})},resolve:function(e,t){var n,r;try{for(var i=Object(o.h)(c().map(function(e){return e.middleware}).reverse()),s=i.next();!s.done;s=i.next())e=(0,s.value)(e,t)}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return e}};return l},a={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},u={high:3,normal:2,low:1},c=function(){function e(e){this.middlewareStack=s(),this.config=e}return e.prototype.send=function(e,t,n){var r="function"!=typeof t?t:void 0,i="function"==typeof t?t:n,o=e.resolveMiddleware(this.middlewareStack,this.config,r);if(!i)return o(e).then(function(e){return e.output});o(e).then(function(e){return i(null,e.output)},function(e){return i(e)}).catch(function(){})},e.prototype.destroy=function(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()},e}(),l=function(){this.middlewareStack=s()},d="***SensitiveInformation***",f=function(e){if(null!=e){if("string"==typeof e){var t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&E.warn(S("Expected number but observed string: ".concat(e))),t}if("number"==typeof e)return e;throw new TypeError("Expected number, got ".concat(typeof e,": ").concat(e))}},p=(Math.ceil(Math.pow(2,127)*(2-Math.pow(2,-23))),function(e){if(null!=e){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError("Expected integer, got ".concat(typeof e,": ").concat(e))}}),h=function(e){return v(e,32)},v=function(e,t){var n=p(e);if(void 0!==n&&g(n,t)!==n)throw new TypeError("Expected ".concat(t,"-bit integer, got ").concat(e));return n},g=function(e,t){switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},y=function(e,t){if(null==e){if(t)throw new TypeError("Expected a non-null value for ".concat(t));throw new TypeError("Expected a non-null value")}return e},m=function(e){if(null!=e){if("object"==typeof e&&!Array.isArray(e))return e;var t=Array.isArray(e)?"array":typeof e;throw new TypeError("Expected object, got ".concat(t,": ").concat(e))}},b=function(e){if(null!=e){if("string"==typeof e)return e;if(["boolean","number","bigint"].includes(typeof e))return E.warn(S("Expected string, got ".concat(typeof e,": ").concat(e))),String(e);throw new TypeError("Expected string, got ".concat(typeof e,": ").concat(e))}},w=function(e){return"string"==typeof e?_(e):f(e)},_=function(e){switch(e){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error("Unable to parse float value: ".concat(e))}},S=function(e){return String(new TypeError(e).stack||e).split("\n").slice(0,5).filter(function(e){return!e.includes("stackTraceWarning")}).join("\n")},E={warn:console.warn};new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/);var C=function(e){function t(n){var r=e.call(this,n.message)||this;return Object.setPrototypeOf(r,t.prototype),r.name=n.name,r.$fault=n.$fault,r.$metadata=n.$metadata,r}return Object(o.c)(t,e),t}(Error),A=function(e,t){void 0===t&&(t={}),Object.entries(t).filter(function(e){return void 0!==Object(o.e)(e,2)[1]}).forEach(function(t){var n=Object(o.e)(t,2),r=n[0],i=n[1];null!=e[r]&&""!==e[r]||(e[r]=i)});var n=e.message||e.Message||"UnknownError";return e.message=n,delete e.Message,e},O=function(e){var t=e.output,n=e.parsedBody,r=e.exceptionCtor,i=e.errorCode,o=I(t),s=o.httpStatusCode?o.httpStatusCode+"":void 0,a=new r({name:n.code||n.Code||i||s||"UnknowError",$fault:"client",$metadata:o});throw A(a,n)},I=function(e){var t;return{httpStatusCode:e.statusCode,requestId:null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},x=function(e){switch(e){case"standard":case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}};n(159);var T=function(){var e=Object.getPrototypeOf(this).constructor,t=new(Function.bind.apply(String,Object(o.g)([null],Object(o.e)(arguments),!1)));return Object.setPrototypeOf(t,e.prototype),t};T.prototype=Object.create(String.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(T,String);var P=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.c)(t,e),t.prototype.deserializeJSON=function(){return JSON.parse(e.prototype.toString.call(this))},t.prototype.toJSON=function(){return e.prototype.toString.call(this)},t.fromObject=function(e){return e instanceof t?e:new t(e instanceof String||"string"==typeof e?e:JSON.stringify(e))},t}(T),k=function(e,t,n){return i(e,Object.entries(n).reduce(function(e,n){var r=Object(o.e)(n,2),i=r[0],s=r[1];return Array.isArray(s)?e[i]=s:e[i]="function"==typeof s?[t,s()]:[t,s],e},{}))},D=function(e,t,n,i,o,s){if(null==t||void 0===t[n])throw new Error("No value provided for input HTTP label: "+n+".");var a=i();if(a.length<=0)throw new Error("Empty value provided for input HTTP label: "+n+".");return e.replace(o,s?a.split("/").map(function(e){return r(e)}).join("/"):r(a))}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return e&&void 0!==e.pluralName}function o(e){return i(e)&&void 0!==e.attributes}function s(e){return(null==e?void 0:e.targetName)||(null==e?void 0:e.targetNames)}function a(e){return"key"===e.type&&e.properties&&e.properties.fields&&e.properties.fields.length>0}function u(e){return a(e)&&void 0===e.properties.name}function c(e){return a(e)&&void 0!==e.properties.name&&e.properties.fields.length>2}function l(e){return e&&void 0!==w[e]}function d(e){return!(!e||!e.model)}function f(e){return!(!e||!e.nonModel)}function p(e){return!(!e||!e.enum)}function h(e,t){var n=Object(I.m)(t);return"object"===r(e)&&e&&n.every(function(t){return void 0!==e[t]})}function v(e){return e&&void 0!==e.field}function g(e){return e&&void 0!==e.type}function y(e,t){return x(this,void 0,void 0,function(){return T(this,function(n){return[2,{modelConstructor:e,conditionProducer:t}]})})}n.d(t,"v",function(){return i}),n.d(t,"w",function(){return o}),n.d(t,"x",function(){return s}),n.d(t,"p",function(){return a}),n.d(t,"q",function(){return u}),n.d(t,"o",function(){return c}),n.d(t,"e",function(){return m}),n.d(t,"f",function(){return b}),n.d(t,"c",function(){return w}),n.d(t,"m",function(){return l}),n.d(t,"r",function(){return d}),n.d(t,"s",function(){return f}),n.d(t,"l",function(){return p}),n.d(t,"n",function(){return h}),n.d(t,"h",function(){return _}),n.d(t,"u",function(){return v}),n.d(t,"t",function(){return g}),n.d(t,"j",function(){return S}),n.d(t,"k",function(){return E}),n.d(t,"a",function(){return C}),n.d(t,"g",function(){return A}),n.d(t,"y",function(){return y}),n.d(t,"i",function(){return O}),n.d(t,"b",function(){return k}),n.d(t,"d",function(){return P});var m,b,w,_,S,E,C,A,O,I=n(4),x=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},T=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};!function(e){e.CUSTOM="custom",e.OWNER="owner",e.GROUPS="groups",e.PRIVATE="private",e.PUBLIC="public"}(m||(m={})),function(e){e.FUNCTION="function",e.USER_POOLS="userPools",e.OIDC="oidc",e.IAM="iam",e.API_KEY="apiKey"}(b||(b={})),function(e){e[e.ID=0]="ID",e[e.String=1]="String",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Boolean=4]="Boolean",e[e.AWSDate=5]="AWSDate",e[e.AWSTime=6]="AWSTime",e[e.AWSDateTime=7]="AWSDateTime",e[e.AWSTimestamp=8]="AWSTimestamp",e[e.AWSEmail=9]="AWSEmail",e[e.AWSJSON=10]="AWSJSON",e[e.AWSURL=11]="AWSURL",e[e.AWSPhone=12]="AWSPhone",e[e.AWSIPAddress=13]="AWSIPAddress"}(w||(w={})),function(e){e.getJSType=function(e){switch(e){case"Boolean":return"boolean";case"ID":case"String":case"AWSDate":case"AWSTime":case"AWSDateTime":case"AWSEmail":case"AWSURL":case"AWSPhone":case"AWSIPAddress":return"string";case"Int":case"Float":case"AWSTimestamp":return"number";case"AWSJSON":return"object";default:Object(I.l)(e)}},e.getValidationFunction=function(e){switch(e){case"AWSDate":return I.w;case"AWSTime":return I.C;case"AWSDateTime":return I.x;case"AWSTimestamp":return I.D;case"AWSEmail":return I.y;case"AWSJSON":return I.A;case"AWSURL":return I.E;case"AWSPhone":return I.B;case"AWSIPAddress":return I.z;default:return}}}(w||(w={})),function(e){e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(_||(_={})),function(e){e[e.FIRST=0]="FIRST",e[e.LAST=1]="LAST"}(S||(S={})),function(e){e.ASCENDING="ASCENDING",e.DESCENDING="DESCENDING"}(E||(E={})),function(e){e.DEFAULT="DEFAULT",e.MULTI_AUTH="MULTI_AUTH"}(C||(C={})),function(e){e.CREATE="CREATE",e.READ="READ",e.UPDATE="UPDATE",e.DELETE="DELETE"}(A||(A={})),function(e){e.sync="sync",e.mutate="mutate",e.subscribe="subscribe"}(O||(O={}));var P,k=Symbol("DISCARD");!function(e){e.LIMIT="LIMIT",e.TIMER="TIMER"}(P||(P={}))},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(20),i=n(49),o=(n(114),n(80),{userAgent:i.a.userAgent});r.a},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){var n=o(t),r=function(e,t){var n=[];return Object.values(t.fields).forEach(function(t){var r=t.name,s=t.type;if(Object(E.s)(s)){var a=e.nonModels[s.nonModel],u=Object.values(o(a)).map(function(e){return e.name}),c=[];Object.values(a.fields).forEach(function(t){var n=t.type,r=t.name;if(Object(E.s)(n)){var o=e.nonModels[n.nonModel];c.push(r+" { "+i(e,o)+" }")}}),n.push(r+" { "+u.join(" ")+" "+c.join(" ")+" }")}}),n}(e,t),s=function(e,t){var n=function(e){var t=[];return Object(E.w)(e)&&e.attributes.forEach(function(e){if(e.properties&&e.properties.rules){var n=e.properties.rules.find(function(e){return"owner"===e.allow});n&&n.ownerField&&t.push(n.ownerField)}}),t}(e);return!t.owner&&n.includes("owner")?["owner"]:[]}(t,n),a=Object.values(n).map(function(e){return e.name}).concat(s).concat(r);return Object(E.v)(t)&&(a=a.concat(k).concat(function(e,t){var n=[];return Object.values(e.fields).filter(function(e){var t=e.association;return t&&Object.keys(t).length}).forEach(function(r){var i=r.name,o=r.association,s=o.connectionType;switch(s){case"HAS_ONE":case"HAS_MANY":break;case"BELONGS_TO":if(Object(E.x)(o))if(o.targetNames&&o.targetNames.length>0){var a=x(Object(C.k)(t),1)[0][e.fields[i].type.model].indexes.find(function(e){return"byPk"===x(e,1)[0]}),u=a&&a[1],c=null==u?void 0:u.join(" ");n.push(i+" { "+c+" _deleted }")}else n.push(i+" { id _deleted }");break;default:Object(C.l)(s)}}),n}(t,e))),a.join("\n")}function o(e){var t=e.fields;return Object.values(t).filter(function(e){return!(!Object(E.m)(e.type)&&!Object(E.l)(e.type))}).reduce(function(e,t){return e[t.name]=t,e},{})}function s(e){var t=([].concat(e.attributes).find(function(e){return e&&"auth"===e.type})||{}).properties,n=(void 0===t?{}:t).rules,r=[];return(void 0===n?[]:n).forEach(function(t){var n=t.identityClaim,i=void 0===n?"cognito:username":n,o=t.ownerField,s=void 0===o?"owner":o,a=t.operations,u=void 0===a?["create","update","delete","read"]:a,c=t.provider,l=void 0===c?"userPools":c,d=t.groupClaim,f=void 0===d?"cognito:groups":d,p=t.allow,h=void 0===p?"iam":p,v=t.groups,g=void 0===v?[]:v,y="owner"===h;if(u.includes("read")||y){var m={identityClaim:i,ownerField:s,provider:l,groupClaim:f,authStrategy:h,groups:g,areSubscriptionsPublic:!1};if(y){var b=([].concat(e.attributes).find(function(e){return e&&"model"===e.type})||{}).properties,w=(void 0===b?{}:b).subscriptions,_=(void 0===w?{}:w).level,S=void 0===_?"on":_;m.areSubscriptionsPublic=!u.includes("read")||"public"===S}y?r.push(m):r.unshift(m)}}),r}function a(e,t,n,r,o){var s=i(e,t),a=t.name,u=(t.pluralName,"on"+n+a),c="",l="";return r&&(c="($"+o+": String!)",l="("+o+": $"+o+")"),[n,u,"subscription operation"+c+"{\n\t\t\t"+u+l+"{\n\t\t\t\t"+s+"\n\t\t\t}\n\t\t}"]}function u(e,t,n){var r,o,s=i(e,t),a=t.name,u=t.pluralName,c=" ",l=" ";switch(n){case"LIST":r="sync"+u,c="($limit: Int, $nextToken: String, $lastSync: AWSTimestamp, $filter: Model"+a+"FilterInput)",l="(limit: $limit, nextToken: $nextToken, lastSync: $lastSync, filter: $filter)",s="items {\n\t\t\t\t\t\t\t"+s+"\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnextToken\n\t\t\t\t\t\tstartedAt";break;case"CREATE":r="create"+a,c="($input: Create"+a+"Input!)",l="(input: $input)",o=b.CREATE;break;case"UPDATE":r="update"+a,c="($input: Update"+a+"Input!, $condition: Model"+a+"ConditionInput)",l="(input: $input, condition: $condition)",o=b.UPDATE;break;case"DELETE":r="delete"+a,c="($input: Delete"+a+"Input!, $condition: Model"+a+"ConditionInput)",l="(input: $input, condition: $condition)",o=b.DELETE;break;case"GET":r="get"+a,c="($id: ID!)",l="(id: $id)",o=b.GET;break;default:Object(C.l)(n)}return[[o,r,m[n]+" operation"+c+"{\n\t\t"+r+l+"{\n\t\t\t"+s+"\n\t\t}\n\t}"]]}function c(e,t,n,i,o,s,a,u,c){var l;switch(n){case E.h.INSERT:l=b.CREATE;break;case E.h.UPDATE:l=b.UPDATE;break;case E.h.DELETE:l=b.DELETE;break;default:Object(C.l)(n)}var d=y(t,o),f=E.h.INSERT&&c?{id:c}:{};return u(a,A(A({},f),{data:JSON.stringify(o,function(e,n){return e&&null!==n&&"object"===r(n)&&t.fields[e]&&"AWSJSON"===t.fields[e].type?JSON.stringify(n):n}),modelId:d,model:i.name,operation:l,condition:JSON.stringify(s)}))}function l(e,t){var n={};if(!e||!Array.isArray(e.predicates))return n;var r=Object(C.m)(t);return e.predicates.forEach(function(e){var i;if(Object(E.u)(e)){var o=e.field,s=e.operator,a=e.operand;if(r.includes(o))return;n[o]=((i={})[s]=a,i)}else n[e.type]=l(e,t)}),n}function d(e){var t={};if(!e||!Array.isArray(e.predicates))return t;var n=e.type,r=e.predicates,i="and"===n||"or"===n;t[n]=i?[]:{};var o=function(e){return i?t[n].push(e):t[n]=e};return r.forEach(function(e){var t,n;if(Object(E.u)(e)){var r=e.field,i=e.operator,s=e.operand,a=((t={})[r]=((n={})[i]=s,n),t);o(a)}else o(d(e))}),t}function f(e,t){var n=e[t.groupClaim]||[];if("string"==typeof n){var r=void 0;try{r=JSON.parse(n)}catch(e){r=n}n=[].concat(r)}return n}function p(e){var t=e.authModeStrategy,n=e.defaultAuthMode,r=e.modelName,i=e.schema;return O(this,void 0,void 0,function(){var e,o,s,a=this;return I(this,function(u){switch(u.label){case 0:e=Object.values(E.g),o={CREATE:[],READ:[],UPDATE:[],DELETE:[]},u.label=1;case 1:return u.trys.push([1,3,,4]),[4,Promise.all(e.map(function(e){return O(a,void 0,void 0,function(){var s;return I(this,function(a){switch(a.label){case 0:return[4,t({schema:i,modelName:r,operation:e})];case 1:return"string"==typeof(s=a.sent())?o[e]=[s]:Array.isArray(s)&&s.length?o[e]=s:o[e]=[n],[2]}})})}))];case 2:return u.sent(),[3,4];case 3:return s=u.sent(),T.debug("Error getting auth modes for model: "+r,s),[3,4];case 4:return[2,o]}})})}function h(e){var t,n=["Request failed with status code 401","Request failed with status code 403"];return e&&e.errors?t=e.errors.find(function(e){return n.includes(e.message)}):e&&e.message&&(t=e),t?t.message:null}function v(e){var t=Object.values(_.a);return e&&e.message&&t.find(function(t){return e.message.includes(t)})||null}function g(e,t){return void 0===t&&(t={}),O(this,void 0,void 0,function(){var n,r,i;return I(this,function(o){switch(o.label){case 0:if(e!==w.c.AWS_LAMBDA)return[3,6];if(n=t.authProviders,!(r=(void 0===n?{functionAuthProvider:null}:n).functionAuthProvider)||"function"!=typeof r)return[3,5];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,r()];case 2:return[2,o.sent().token];case 3:throw i=o.sent(),new Error("Error retrieving token from `functionAuthProvider`: "+i);case 4:return[3,6];case 5:throw new Error("You must provide a `functionAuthProvider` function to `DataStore.configure` when using "+w.c.AWS_LAMBDA);case 6:return[2]}})})}function y(e,t){return Object(C.m)(e).map(function(e){return t[e]}).join(C.e)}n.d(t,"a",function(){return b}),n.d(t,"e",function(){return s}),n.d(t,"c",function(){return a}),n.d(t,"b",function(){return u}),n.d(t,"d",function(){return c}),n.d(t,"l",function(){return l}),n.d(t,"m",function(){return d}),n.d(t,"k",function(){return f}),n.d(t,"i",function(){return p}),n.d(t,"g",function(){return h}),n.d(t,"f",function(){return v}),n.d(t,"j",function(){return g}),n.d(t,"h",function(){return y});var m,b,w=n(9),_=n(57),S=n(48),E=n(6),C=n(4),A=function(){return(A=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},O=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},I=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},x=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},T=new S.a("DataStore");!function(e){e.LIST="query",e.CREATE="mutation",e.UPDATE="mutation",e.DELETE="mutation",e.GET="query"}(m||(m={})),function(e){e.CREATE="Create",e.UPDATE="Update",e.DELETE="Delete",e.GET="Get"}(b||(b={}));var P={_version:void 0,_lastChangedAt:void 0,_deleted:void 0},k=Object.keys(P)},function(e,t,n){"use strict";function r(e){return e&&!!["provider"].find(function(t){return e.hasOwnProperty(t)})}function i(e){return e&&!!["customProvider"].find(function(t){return e.hasOwnProperty(t)})}function o(e){return e&&!!["customState"].find(function(t){return e.hasOwnProperty(t)})}function s(e){return void 0!==e.redirectSignIn}function a(e){return!!e.username}var u,c,l;n.d(t,"b",function(){return u}),n.d(t,"f",function(){return r}),n.d(t,"g",function(){return i}),n.d(t,"d",function(){return o}),n.d(t,"e",function(){return s}),n.d(t,"a",function(){return c}),n.d(t,"h",function(){return a}),n.d(t,"c",function(){return l}),function(e){e.Cognito="COGNITO",e.Google="Google",e.Facebook="Facebook",e.Amazon="LoginWithAmazon",e.Apple="SignInWithApple"}(u||(u={})),function(e){e.NoConfig="noConfig",e.MissingAuthConfig="missingAuthConfig",e.EmptyUsername="emptyUsername",e.InvalidUsername="invalidUsername",e.EmptyPassword="emptyPassword",e.EmptyCode="emptyCode",e.SignUpError="signUpError",e.NoMFA="noMFA",e.InvalidMFA="invalidMFA",e.EmptyChallengeResponse="emptyChallengeResponse",e.NoUserSession="noUserSession",e.Default="default",e.DeviceConfig="deviceConfig",e.NetworkError="networkError",e.AutoSignInError="autoSignInError"}(c||(c={})),function(e){e.API_KEY="API_KEY",e.AWS_IAM="AWS_IAM",e.OPENID_CONNECT="OPENID_CONNECT",e.AMAZON_COGNITO_USER_POOLS="AMAZON_COGNITO_USER_POOLS",e.AWS_LAMBDA="AWS_LAMBDA"}(l||(l={}))},function(e,t,n){"use strict";function r(e,t,n){return{applyToStack:function(r){r.add(function(e,t){return function(n,r){return function(r){return Object(i.__awaiter)(void 0,void 0,void 0,function(){var o,s;return Object(i.__generator)(this,function(i){switch(i.label){case 0:return[4,n(r)];case 1:return o=i.sent().response,[4,t(o,e)];case 2:return s=i.sent(),[2,{response:o,output:s}]}})})}}}(e,n),o),r.add(function(e,t){return function(n,r){return function(r){return Object(i.__awaiter)(void 0,void 0,void 0,function(){var o;return Object(i.__generator)(this,function(s){switch(s.label){case 0:return[4,t(r.input,e)];case 1:return o=s.sent(),
[2,n(Object(i.__assign)(Object(i.__assign)({},r),{request:o}))]}})})}}}(e,t),s)}}}n.d(t,"a",function(){return r});var i=n(2),o={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},s={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0}},function(e,t,n){"use strict";function r(e){return o.has(e)}n.d(t,"c",function(){return r}),n.d(t,"b",function(){return s}),n.d(t,"a",function(){return a});var i=n(4),o=new WeakSet;Symbol("A predicate that matches all records");var s=function(){function e(){}return Object.defineProperty(e,"ALL",{get:function(){var e=function(e){return e};return o.add(e),e},enumerable:!0,configurable:!0}),e}(),a=function(){function e(){}return e.createPredicateBuilder=function(t){var n,r=t.name,o=new Set(Object.keys(t.fields)),s=new Proxy({},n={get:function(t,s,a){var u=s;switch(u){case"and":case"or":case"not":return function(t){var r={type:u,predicates:[]},i=new Proxy({},n);return e.predicateGroupsMap.set(i,r),t(i),e.predicateGroupsMap.get(a).predicates.push(r),a};default:Object(i.l)(u,!1)}var c=s;if(!o.has(c))throw new Error("Invalid field for model. field: "+c+", model: "+r);return function(t,n){return e.predicateGroupsMap.get(a).predicates.push({field:c,operator:t,operand:n}),a}}});return e.predicateGroupsMap.set(s,{type:"and",predicates:[]}),s},e.isValidPredicate=function(t){return e.predicateGroupsMap.has(t)},e.getPredicates=function(t,n){if(void 0===n&&(n=!0),n&&!e.isValidPredicate(t))throw new Error("The predicate is not valid");return e.predicateGroupsMap.get(t)},e.createFromExisting=function(t,n){if(n&&t)return n(e.createPredicateBuilder(t))},e.createForSingleField=function(t,n,r){return e.createPredicateBuilder(t)[n]("eq",r)},e.createForPk=function(t,n){var r=Object(i.m)(t),o=Object(i.n)(n,r),s=e.createPredicateBuilder(t);return r.forEach(function(e,t){var n=o[t];s=s[e]("eq",n)}),s},e.predicateGroupsMap=new WeakMap,e}()},function(e,t,n){"use strict";(function(e){function r(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(e,t){if(r()<t)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=o.prototype:(null===e&&(e=new o(t)),e.length=t),e}function o(e,t,n){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return u(this,e)}return s(this,e,t,n)}function s(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),o.TYPED_ARRAY_SUPPORT?(e=t).__proto__=o.prototype:e=c(e,t),e}(e,t,n,r):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!o.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(t,n),s=(e=i(e,r)).write(t,n);return s!==r&&(e=e.slice(0,s)),e}(e,t,n):function(e,t){if(o.isBuffer(t)){var n=0|l(t.length);return 0===(e=i(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?i(e,0):c(e,t);if("Buffer"===t.type&&z(t.data))return c(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function a(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t){if(a(t),e=i(e,t<0?0:0|l(t)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function c(e,t){var n=t.length<0?0:0|l(t.length);e=i(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function l(e){if(e>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|e}function d(e,t){if(o.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return j(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return R(e).length;default:if(r)return j(e).length;t=(""+t).toLowerCase(),r=!0}}function f(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return O(this,t,n);case"utf8":case"utf-8":return E(this,t,n);case"ascii":return C(this,t,n);case"latin1":case"binary":return A(this,t,n);case"base64":return S(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function p(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function h(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=o.from(t,r)),o.isBuffer(t))return 0===t.length?-1:v(e,t,n,r,i);if("number"==typeof t)return t&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):v(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function v(e,t,n,r,i){function o(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var s,a=1,u=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,u/=2,c/=2,n/=2}if(i){var l=-1;for(s=n;s<u;s++)if(o(e,s)===o(t,-1===l?0:s-l)){if(-1===l&&(l=s),s-l+1===c)return l*a}else-1!==l&&(s-=s-l),l=-1}else for(n+c>u&&(n=u-c),s=n;s>=0;s--){for(var d=!0,f=0;f<c;f++)if(o(e,s+f)!==o(t,f)){d=!1;break}if(d)return s}return-1}function g(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function y(e,t,n,r){return U(j(t,e.length-n),e,n,r)}function m(e,t,n,r){return U(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function b(e,t,n,r){return m(e,t,n,r)}function w(e,t,n,r){return U(R(t),e,n,r)}function _(e,t,n,r){return U(function(e,t){for(var n,r,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)r=(n=e.charCodeAt(s))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function S(e,t,n){return 0===t&&n===e.length?F.fromByteArray(e):F.fromByteArray(e.slice(t,n))}function E(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,s,a,u,c=e[i],l=null,d=c>239?4:c>223?3:c>191?2:1;if(i+d<=n)switch(d){case 1:c<128&&(l=c);break;case 2:128==(192&(o=e[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&(u=(15&c)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(l=u)}null===l?(l=65533,d=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=d}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return n}(r)}function C(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function A(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function O(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=L(e[o]);return i}function I(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function x(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function T(e,t,n,r,i,s){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function P(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function k(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function D(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function N(e,t,n,r,i){return i||D(e,0,n,4),B.write(e,t,n,r,23,4),n+4}function M(e,t,n,r,i){return i||D(e,0,n,8),B.write(e,t,n,r,52,8),n+8}function L(e){return e<16?"0"+e.toString(16):e.toString(16)}function j(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function R(e){return F.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(q,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function U(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}var F=n(208),B=n(209),z=n(210);t.Buffer=o,t.SlowBuffer=function(e){return+e!=e&&(e=0),o.alloc(+e)},t.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=r(),o.poolSize=8192,o._augment=function(e){return e.__proto__=o.prototype,e},o.from=function(e,t,n){return s(null,e,t,n)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(e,t,n){return function(e,t,n,r){return a(t),t<=0?i(e,t):void 0!==n?"string"==typeof r?i(e,t).fill(n,r):i(e,t).fill(n):i(e,t)}(null,e,t,n)},o.allocUnsafe=function(e){return u(null,e)},o.allocUnsafeSlow=function(e){return u(null,e)},o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,s=Math.min(n,r);i<s;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!z(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=o.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var s=e[n];if(!o.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},o.byteLength=d,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)p(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)p(this,t,t+3),p(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)p(this,t,t+7),p(this,t+1,t+6),p(this,t+2,t+5),p(this,t+3,t+4);return this},o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?E(this,0,e):f.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e,t,n,r,i){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var s=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),u=Math.min(s,a),c=this.slice(r,i),l=e.slice(t,n),d=0;d<u;++d)if(c[d]!==l[d]){s=c[d],a=l[d];break}return s<a?-1:a<s?1:0},o.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},o.prototype.indexOf=function(e,t,n){return h(this,e,t,n,!0)},o.prototype.lastIndexOf=function(e,t,n){return h(this,e,t,n,!1)},o.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return g(this,e,t,n);case"utf8":case"utf-8":return y(this,e,t,n);case"ascii":return m(this,e,t,n);case"latin1":case"binary":return b(this,e,t,n);case"base64":return w(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},o.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),o.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=o.prototype;else{var i=t-e;n=new o(i,void 0);for(var s=0;s<i;++s)n[s]=this[s+e]}return n},o.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||x(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},o.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||x(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},o.prototype.readUInt8=function(e,t){return t||x(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||x(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||x(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||x(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||x(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||x(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},o.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||x(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return t||x(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||x(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){t||x(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return t||x(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||x(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||x(e,4,this.length),B.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||x(e,4,this.length),B.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||x(e,8,this.length),B.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||x(e,8,this.length),B.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||T(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},o.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||T(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},o.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):k(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):k(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);T(this,e,t,n,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},o.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);T(this,e,t,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):k(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):k(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,n){return N(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return N(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return M(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return M(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,s=r-n;if(this===e&&n<t&&t<r)for(i=s-1;i>=0;--i)e[i+t]=this[i+n];else if(s<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+s),t);return s},o.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var s;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(s=t;s<n;++s)this[s]=e;else{var a=o.isBuffer(e)?e:j(new o(e,r).toString()),u=a.length;for(s=0;s<n-t;++s)this[s+t]=a[s%u]}return this};var q=/[^+\/0-9A-Za-z-_]/g}).call(this,n(60))},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e){if("function"==typeof e)return e;var t=Promise.resolve(e);return function(){return t}}},function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return v}),n.d(t,"c",function(){return y});var r=n(2),i={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},o=function(e){return{applyToStack:function(t){t.add(function(e){return function(t,n){return function(i){return Object(r.__awaiter)(void 0,void 0,void 0,function(){var o;return Object(r.__generator)(this,function(s){return(null===(o=null==e?void 0:e.retryStrategy)||void 0===o?void 0:o.mode)&&(n.userAgent=Object(r.__spread)(n.userAgent||[],[["cfg/retry-mode",e.retryStrategy.mode]])),[2,e.retryStrategy.retry(t,i)]})})}}}(e),i)}}},s=n(3),a=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],u=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],c=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],l=[500,502,503,504],d=function(e){var t,n;return 429===(null===(t=e.$metadata)||void 0===t?void 0:t.httpStatusCode)||u.includes(e.name)||1==(null===(n=e.$retryable)||void 0===n?void 0:n.throttling)},f=n(30),p=function(e,t){return Math.floor(Math.min(2e4,Math.random()*Math.pow(2,t)*e))},h=function(e){return!!e&&(function(e){return void 0!==e.$retryable}(e)||function(e){return a.includes(e.name)}(e)||d(e)||function(e){var t;return c.includes(e.name)||l.includes((null===(t=e.$metadata)||void 0===t?void 0:t.httpStatusCode)||0)}(e))},v=3,g=function(){function e(e,t){var n,r,i,o,s,a,u,c;this.maxAttemptsProvider=e,this.mode="standard",this.retryDecider=null!==(n=null==t?void 0:t.retryDecider)&&void 0!==n?n:h,this.delayDecider=null!==(r=null==t?void 0:t.delayDecider)&&void 0!==r?r:p,this.retryQuota=null!==(i=null==t?void 0:t.retryQuota)&&void 0!==i?i:(s=o=500,a=o,u=function(e){return"TimeoutError"===e.name?10:5},c=function(e){return u(e)<=a},Object.freeze({hasRetryTokens:c,retrieveRetryTokens:function(e){if(!c(e))throw new Error("No retry token available");var t=u(e);return a-=t,t},releaseRetryTokens:function(e){a+=null!=e?e:1,a=Math.min(a,s)}}))}return e.prototype.shouldRetry=function(e,t,n){return t<n&&this.retryDecider(e)&&this.retryQuota.hasRetryTokens(e)},e.prototype.getMaxAttempts=function(){return Object(r.__awaiter)(this,void 0,void 0,function(){var e;return Object(r.__generator)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.maxAttemptsProvider()];case 1:return e=t.sent(),[3,3];case 2:return t.sent(),e=v,[3,3];case 3:return[2,e]}})})},e.prototype.retry=function(e,t){return Object(r.__awaiter)(this,void 0,void 0,function(){var n,i,o,a,u,c,l,p;return Object(r.__generator)(this,function(h){switch(h.label){case 0:return i=0,o=0,[4,this.getMaxAttempts()];case 1:a=h.sent(),u=t.request,s.a.isInstance(u)&&(u.headers["amz-sdk-invocation-id"]=Object(f.v4)()),c=function(){var c,f,p,h,v;return Object(r.__generator)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,5]),s.a.isInstance(u)&&(u.headers["amz-sdk-request"]="attempt="+(i+1)+"; max="+a),[4,e(t)];case 1:return c=r.sent(),f=c.response,p=c.output,l.retryQuota.releaseRetryTokens(n),p.$metadata.attempts=i+1,p.$metadata.totalRetryDelay=o,[2,{value:{response:f,output:p}}];case 2:return h=r.sent(),i++,l.shouldRetry(h,i,a)?(n=l.retryQuota.retrieveRetryTokens(h),v=l.delayDecider(d(h)?500:100,i),o+=v,[4,new Promise(function(e){return setTimeout(e,v)})]):[3,4];case 3:return r.sent(),[2,"continue"];case 4:throw h.$metadata||(h.$metadata={}),h.$metadata.attempts=i,h.$metadata.totalRetryDelay=o,h;case 5:return[2]}})},l=this,h.label=2;case 2:return[5,c()];case 3:return"object"==typeof(p=h.sent())?[2,p.value]:[3,2];case 4:return[2]}})})},e}(),y=function(e){var t=m(e.maxAttempts);return Object(r.__assign)(Object(r.__assign)({},e),{maxAttempts:t,retryStrategy:e.retryStrategy||new g(t)})},m=function(e){if(void 0===e&&(e=v),"number"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e}},function(e,t,n){"use strict";var r=n(187),i=n.n(r).a;t.a=i},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i});var r=function(e){return"function"==typeof TextEncoder?function(e){return(new TextEncoder).encode(e)}(e):function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e.charCodeAt(n);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192,63&i|128);else if(n+1<e.length&&55296==(64512&i)&&56320==(64512&e.charCodeAt(n+1))){var o=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n));t.push(o>>18|240,o>>12&63|128,o>>6&63|128,63&o|128)}else t.push(i>>12|224,i>>6&63|128,63&i|128)}return Uint8Array.from(t)}(e)},i=function(e){return"function"==typeof TextDecoder?function(e){return new TextDecoder("utf-8").decode(e)}(e):function(e){for(var t="",n=0,r=e.length;n<r;n++){var i=e[n];if(i<128)t+=String.fromCharCode(i);else if(192<=i&&i<224){var o=e[++n];t+=String.fromCharCode((31&i)<<6|63&o)}else if(240<=i&&i<365){var s="%"+[i,e[++n],e[++n],e[++n]].map(function(e){return e.toString(16)}).join("%");t+=decodeURIComponent(s)}else t+=String.fromCharCode((15&i)<<12|(63&e[++n])<<6|63&e[++n])}return t}(e)}},function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o});var r=n(0),i=function(){function e(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?":"!==e.protocol.slice(-1)?"".concat(e.protocol,":"):e.protocol:"https:",this.path=e.path?"/"!==e.path.charAt(0)?"/".concat(e.path):e.path:"/"}return e.isInstance=function(e){if(!e)return!1;var t=e;return"method"in t&&"protocol"in t&&"hostname"in t&&"path"in t&&"object"==typeof t.query&&"object"==typeof t.headers},e.prototype.clone=function(){var t,n=new e(Object(r.a)(Object(r.a)({},this),{headers:Object(r.a)({},this.headers)}));return n.query&&(n.query=(t=n.query,Object.keys(t).reduce(function(e,n){var i,o=t[n];return Object(r.a)(Object(r.a)({},e),((i={})[n]=Array.isArray(o)?Object(r.g)([],Object(r.e)(o),!1):o,i))},{}))),n},e}(),o=function(){function e(e){this.statusCode=e.statusCode,this.headers=e.headers||{},this.body=e.body}return e.isInstance=function(e){if(!e)return!1;var t=e;return"number"==typeof t.statusCode&&"object"==typeof t.headers},e}()},function(e,t,n){"use strict";function r(e){var t=e.length/4*3;"=="===e.substr(-2)?t-=2:"="===e.substr(-1)&&t--;for(var n=new ArrayBuffer(t),r=new DataView(n),i=0;i<e.length;i+=4){for(var s=0,a=0,u=i,c=i+3;u<=c;u++)"="!==e[u]?(s|=o[e[u]]<<6*(c-u),a+=6):s>>=6;var l=i/4*3;s>>=a%8;for(var d=Math.floor(a/8),f=0;f<d;f++){var p=8*(d-f-1);r.setUint8(l+f,(s&255<<p)>>p)}}return new Uint8Array(n)}function i(e){for(var t="",n=0;n<e.length;n+=3){for(var r=0,i=0,o=n,a=Math.min(n+3,e.length);o<a;o++)r|=e[o]<<8*(a-o-1),i+=8;var u=Math.ceil(i/6);r<<=6*u-i;for(var c=1;c<=u;c++){var l=6*(u-c);t+=s[(r&63<<l)>>l]}t+="==".slice(0,4-u)}return t}n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i});for(var o={},s=new Array(64),a=0,u="A".charCodeAt(0),c="Z".charCodeAt(0);a+u<=c;a++){var l=String.fromCharCode(a+u);o[l]=a,s[a]=l}for(a=0,u="a".charCodeAt(0),c="z".charCodeAt(0);a+u<=c;a++){l=String.fromCharCode(a+u);var d=a+26;o[l]=d,s[d]=l}for(a=0;a<10;a++)o[a.toString(10)]=a+52,l=a.toString(10),d=a+52,o[l]=d,s[d]=l;o["+"]=62,s[62]="+",o["/"]=63,s[63]="/"},function(e,t,n){"use strict";function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(e,t,n){if(e&&s.isObject(e)&&e instanceof r)return e;var i=new r;return i.parse(e,t,n),i}var o=n(215),s=n(216);t.parse=i,t.resolve=function(e,t){return i(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?i(e,!1,!0).resolveObject(t):t},t.format=function(e){return s.isString(e)&&(e=i(e)),e instanceof r?e.format():r.prototype.format.call(e)},t.Url=r;var a=/^([a-z0-9.+-]+:)/i,u=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),d=["'"].concat(l),f=["%","/","?",";","#"].concat(d),p=["/","?","#"],h=/^[+a-z0-9A-Z_-]{0,63}$/,v=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},m={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=n(217);r.prototype.parse=function(e,t,n){if(!s.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e.indexOf("?"),i=-1!==r&&r<e.indexOf("#")?"?":"#",u=e.split(i);u[0]=u[0].replace(/\\/g,"/");var l=e=u.join(i);if(l=l.trim(),!n&&1===e.split("#").length){var w=c.exec(l);if(w)return this.path=l,this.href=l,this.pathname=w[1],w[2]?(this.search=w[2],this.query=t?b.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var _=a.exec(l);if(_){var S=(_=_[0]).toLowerCase();this.protocol=S,l=l.substr(_.length)}if(n||_||l.match(/^\/\/[^@\/]+@[^@\/]+/)){var E="//"===l.substr(0,2);!E||_&&y[_]||(l=l.substr(2),this.slashes=!0)}if(!y[_]&&(E||_&&!m[_])){for(var C,A,O=-1,I=0;I<p.length;I++)-1!==(x=l.indexOf(p[I]))&&(-1===O||x<O)&&(O=x);for(-1!==(A=-1===O?l.lastIndexOf("@"):l.lastIndexOf("@",O))&&(C=l.slice(0,A),l=l.slice(A+1),this.auth=decodeURIComponent(C)),O=-1,I=0;I<f.length;I++){var x;-1!==(x=l.indexOf(f[I]))&&(-1===O||x<O)&&(O=x)}-1===O&&(O=l.length),this.host=l.slice(0,O),l=l.slice(O),this.parseHost(),this.hostname=this.hostname||"";var T="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!T)for(var P=this.hostname.split(/\./),k=(I=0,P.length);I<k;I++){var D=P[I];if(D&&!D.match(h)){for(var N="",M=0,L=D.length;M<L;M++)D.charCodeAt(M)>127?N+="x":N+=D[M];if(!N.match(h)){var j=P.slice(0,I),R=P.slice(I+1),U=D.match(v);U&&(j.push(U[1]),R.unshift(U[2])),R.length&&(l="/"+R.join(".")+l),this.hostname=j.join(".");break}}}
this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),T||(this.hostname=o.toASCII(this.hostname));var F=this.port?":"+this.port:"",B=this.hostname||"";this.host=B+F,this.href+=this.host,T&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==l[0]&&(l="/"+l))}if(!g[S])for(I=0,k=d.length;I<k;I++){var z=d[I];if(-1!==l.indexOf(z)){var q=encodeURIComponent(z);q===z&&(q=escape(z)),l=l.split(z).join(q)}}var K=l.indexOf("#");-1!==K&&(this.hash=l.substr(K),l=l.slice(0,K));var $=l.indexOf("?");if(-1!==$?(this.search=l.substr($),this.query=l.substr($+1),t&&(this.query=b.parse(this.query)),l=l.slice(0,$)):t&&(this.search="",this.query={}),l&&(this.pathname=l),m[S]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){F=this.pathname||"";var V=this.search||"";this.path=F+V}return this.href=this.format(),this},r.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&s.isObject(this.query)&&Object.keys(this.query).length&&(o=b.stringify(this.query));var a=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||m[t])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),t+i+(n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(a=a.replace("#","%23"))+r},r.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},r.prototype.resolveObject=function(e){if(s.isString(e)){var t=new r;t.parse(e,!1,!0),e=t}for(var n=new r,i=Object.keys(this),o=0;o<i.length;o++){var a=i[o];n[a]=this[a]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var u=Object.keys(e),c=0;c<u.length;c++){var l=u[c];"protocol"!==l&&(n[l]=e[l])}return m[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!m[e.protocol]){for(var d=Object.keys(e),f=0;f<d.length;f++){var p=d[f];n[p]=e[p]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||y[e.protocol])n.pathname=e.pathname;else{for(var h=(e.pathname||"").split("/");h.length&&!(e.host=h.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),n.pathname=h.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var v=n.pathname||"",g=n.search||"";n.path=v+g}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var b=n.pathname&&"/"===n.pathname.charAt(0),w=e.host||e.pathname&&"/"===e.pathname.charAt(0),_=w||b||n.host&&e.pathname,S=_,E=n.pathname&&n.pathname.split("/")||[],C=(h=e.pathname&&e.pathname.split("/")||[],n.protocol&&!m[n.protocol]);if(C&&(n.hostname="",n.port=null,n.host&&(""===E[0]?E[0]=n.host:E.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===h[0]?h[0]=e.host:h.unshift(e.host)),e.host=null),_=_&&(""===h[0]||""===E[0])),w)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,E=h;else if(h.length)E||(E=[]),E.pop(),E=E.concat(h),n.search=e.search,n.query=e.query;else if(!s.isNullOrUndefined(e.search))return C&&(n.hostname=n.host=E.shift(),(T=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=T.shift(),n.host=n.hostname=T.shift())),n.search=e.search,n.query=e.query,s.isNull(n.pathname)&&s.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!E.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var A=E.slice(-1)[0],O=(n.host||e.host||E.length>1)&&("."===A||".."===A)||""===A,I=0,x=E.length;x>=0;x--)"."===(A=E[x])?E.splice(x,1):".."===A?(E.splice(x,1),I++):I&&(E.splice(x,1),I--);if(!_&&!S)for(;I--;I)E.unshift("..");!_||""===E[0]||E[0]&&"/"===E[0].charAt(0)||E.unshift(""),O&&"/"!==E.join("/").substr(-1)&&E.push("");var T,P=""===E[0]||E[0]&&"/"===E[0].charAt(0);return C&&(n.hostname=n.host=P?"":E.length?E.shift():"",(T=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=T.shift(),n.host=n.hostname=T.shift())),(_=_||n.host&&E.length)&&!P&&E.unshift(""),E.length?n.pathname=E.join("/"):(n.pathname=null,n.path=null),s.isNull(n.pathname)&&s.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var e=this.host,t=u.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return a});var r=n(48),i=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},o=new r.a("Amplify"),s=function(){function e(){this._components=[],this._config={},this._modules={},this.Auth=null,this.Analytics=null,this.API=null,this.Credentials=null,this.Storage=null,this.I18n=null,this.Cache=null,this.PubSub=null,this.Interactions=null,this.Pushnotification=null,this.UI=null,this.XR=null,this.Predictions=null,this.DataStore=null,this.Geo=null,this.Logger=r.a,this.ServiceWorker=null}return e.prototype.register=function(e){o.debug("component registered in amplify",e),this._components.push(e),"function"==typeof e.getModuleName?(this._modules[e.getModuleName()]=e,this[e.getModuleName()]=e):o.debug("no getModuleName method for component",e),e.configure(this._config)},e.prototype.configure=function(e){var t=this;return e?(this._config=Object.assign(this._config,e),o.debug("amplify config",this._config),Object.entries(this._modules).forEach(function(e){var n=i(e,2),r=(n[0],n[1]);Object.keys(r).forEach(function(e){t._modules[e]&&(r[e]=t._modules[e])})}),this._components.map(function(e){e.configure(t._config)}),this._config):this._config},e.prototype.addPluggable=function(e){e&&e.getCategory&&"function"==typeof e.getCategory&&this._components.map(function(t){t.addPluggable&&"function"==typeof t.addPluggable&&t.addPluggable(e)})},e}(),a=new s},function(e,t,n){"use strict";function r(e){return e}n.d(t,"b",function(){return r}),n.d(t,"a",function(){return a});var i=n(2),o=n(3),s={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},a=function(e){return{applyToStack:function(t){t.add(function(e){return function(t){return function(n){return Object(i.__awaiter)(void 0,void 0,void 0,function(){var r,s;return Object(i.__generator)(this,function(i){return o.a.isInstance(n.request)?(r=n.request,(void 0===(s=(e.requestHandler.metadata||{}).handlerProtocol)?"":s).indexOf("h2")>=0&&!r.headers[":authority"]?(delete r.headers.host,r.headers[":authority"]=""):r.headers.host||(r.headers.host=r.hostname),[2,t(n)]):[2,t(n)]})})}}}(e),s)}}}},function(e,t,n){"use strict";function r(e){return new Promise(function(t,n){var r=new FileReader;r.onloadend=function(){var e;if(2!==r.readyState)return n(new Error("Reader aborted too early"));var i=null!==(e=r.result)&&void 0!==e?e:"",o=i.indexOf(","),s=o>-1?o+1:i.length;t(i.substring(s))},r.onabort=function(){return n(new Error("Read aborted"))},r.onerror=function(){return n(r.error)},r.readAsDataURL(e)})}n.d(t,"a",function(){return u}),n.d(t,"b",function(){return l});var i=n(2),o=n(3),s=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,a)},a=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()},u=function(){function e(e){var t=(void 0===e?{}:e).requestTimeout;this.requestTimeout=t}return e.prototype.destroy=function(){},e.prototype.handle=function(e,t){var n=(void 0===t?{}:t).abortSignal,r=this.requestTimeout;if(null==n?void 0:n.aborted){var a=new Error("Request aborted");return a.name="AbortError",Promise.reject(a)}var u=e.path;if(e.query){var c=function(e){var t,n,r=[];try{for(var o=Object(i.__values)(Object.keys(e).sort()),a=o.next();!a.done;a=o.next()){var u=a.value,c=e[u];if(u=s(u),Array.isArray(c))for(var l=0,d=c.length;l<d;l++)r.push(u+"="+s(c[l]));else{var f=u;(c||"string"==typeof c)&&(f+="="+s(c)),r.push(f)}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r.join("&")}(e.query);c&&(u+="?"+c)}var l=e.port,d=e.method,f=e.protocol+"//"+e.hostname+(l?":"+l:"")+u,p={body:"GET"===d||"HEAD"===d?void 0:e.body,headers:new Headers(e.headers),method:d};"undefined"!=typeof AbortController&&(p.signal=n);var h,v=new Request(f,p),g=[fetch(v).then(function(e){var t,n,r=e.headers,s={};try{for(var a=Object(i.__values)(r.entries()),u=a.next();!u.done;u=a.next()){var c=u.value;s[c[0]]=c[1]}}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return void 0!==e.body?{response:new o.b({headers:s,statusCode:e.status,body:e.body})}:e.blob().then(function(t){return{response:new o.b({headers:s,statusCode:e.status,body:t})}})}),(h=r,void 0===h&&(h=0),new Promise(function(e,t){h&&setTimeout(function(){var e=new Error("Request did not complete within "+h+" ms");e.name="TimeoutError",t(e)},h)}))];return n&&g.push(new Promise(function(e,t){n.onabort=function(){var e=new Error("Request aborted");e.name="AbortError",t(e)}})),Promise.race(g)},e}(),c=n(18),l=function(e){return"function"==typeof Blob&&e instanceof Blob?function(e){return Object(i.__awaiter)(this,void 0,void 0,function(){var t,n;return Object(i.__generator)(this,function(i){switch(i.label){case 0:return[4,r(e)];case 1:return t=i.sent(),n=Object(c.a)(t),[2,new Uint8Array(n)]}})})}(e):function(e){return Object(i.__awaiter)(this,void 0,void 0,function(){var t,n,r,o,s,a,u;return Object(i.__generator)(this,function(i){switch(i.label){case 0:t=new Uint8Array(0),n=e.getReader(),r=!1,i.label=1;case 1:return r?[3,3]:[4,n.read()];case 2:return o=i.sent(),s=o.done,(a=o.value)&&(u=t,(t=new Uint8Array(u.length+a.length)).set(u),t.set(a,u.length)),r=s,[3,1];case 3:return[2,t]}})})}(e)}},function(e,t,n){"use strict";function r(e){return Object(i.__assign)(Object(i.__assign)({},e),{customUserAgent:"string"==typeof e.customUserAgent?[[e.customUserAgent]]:e.customUserAgent})}n.d(t,"b",function(){return r}),n.d(t,"a",function(){return c});var i=n(2),o=n(3),s=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,a=function(e){var t=Object(i.__read)(e,2),n=t[0],r=t[1],o=n.indexOf("/"),a=n.substring(0,o),u=n.substring(o+1);return"api"===a&&(u=u.toLowerCase()),[a,u,r].filter(function(e){return e&&e.length>0}).map(function(e){return null==e?void 0:e.replace(s,"_")}).join("/")},u={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},c=function(e){return{applyToStack:function(t){var n;t.add((n=e,function(e,t){return function(r){return Object(i.__awaiter)(void 0,void 0,void 0,function(){var s,u,c,l,d,f,p,h;return Object(i.__generator)(this,function(v){switch(v.label){case 0:return s=r.request,o.a.isInstance(s)?(u=s.headers,c=(null===(p=null==t?void 0:t.userAgent)||void 0===p?void 0:p.map(a))||[],[4,n.defaultUserAgentProvider()]):[2,e(r)];case 1:return l=v.sent().map(a),d=(null===(h=null==n?void 0:n.customUserAgent)||void 0===h?void 0:h.map(a))||[],u["x-amz-user-agent"]=Object(i.__spread)(l,c,d).join(" "),f=Object(i.__spread)(l.filter(function(e){return e.startsWith("aws-sdk-")}),d).join(" "),"browser"!==n.runtime&&f&&(u["user-agent"]=u["user-agent"]?u["user-agent"]+" "+f:f),[2,e(Object(i.__assign)(Object(i.__assign)({},r),{request:s}))]}})})}}),u)}}}},function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a});var r=n(2),i=function(e){var t;return Object(r.__assign)(Object(r.__assign)({},e),{tls:null===(t=e.tls)||void 0===t||t,endpoint:e.endpoint?o(e):function(){return s(e)},isCustomEndpoint:!!e.endpoint})},o=function(e){var t=e.endpoint,n=e.urlParser;if("string"==typeof t){var r=Promise.resolve(n(t));return function(){return r}}if("object"==typeof t){var i=Promise.resolve(t);return function(){return i}}return t},s=function(e){return Object(r.__awaiter)(void 0,void 0,void 0,function(){var t,n,i,o,s;return Object(r.__generator)(this,function(r){switch(r.label){case 0:return t=e.tls,n=void 0===t||t,[4,e.region()];case 1:if(i=r.sent(),!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(i))throw new Error("Invalid region in client config");return[4,e.regionInfoProvider(i)];case 2:if(!(o=(null!==(s=r.sent())&&void 0!==s?s:{}).hostname))throw new Error("Cannot resolve hostname from client config");return[2,e.urlParser((n?"https:":"http:")+"//"+o)]}})})},a=function(e){if(!e.region)throw new Error("Region is missing");return Object(r.__assign)(Object(r.__assign)({},e),{region:u(e.region)})},u=function(e){if("string"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e}},function(e,t,n){"use strict";function r(e,t){null!=e&&this.fromString(e,t)}function i(){return new r(null)}function o(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function s(e,t){var n=L[e.charCodeAt(t)];return null==n?-1:n}function a(e){var t=i();return t.fromInt(e),t}function u(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function c(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function l(e){return S.Buffer.from((new P).random(e).toString(),"hex")}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function p(){}function h(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,m(e,t)}function v(e){var t="function"==typeof Map?new Map:void 0;return(v=function(e){function n(){return g(e,arguments,b(this).constructor)}if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),m(n,e)})(e)}function g(e,t,n){return(g=y()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&m(i,n.prototype),i}).apply(null,arguments)}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",function(){return _}),n.d(t,"b",function(){return F}),n.d(t,"c",function(){return B}),n.d(t,"d",function(){return z}),n.d(t,"e",function(){return Q}),n.d(t,"f",function(){return H}),n.d(t,"g",function(){return oe}),n.d(t,"h",function(){return $}),n.d(t,"i",function(){return ae}),n.d(t,"j",function(){return P});var w,_=function(){function e(e){var t=e||{},n=t.ValidationData,r=t.Username,i=t.Password,o=t.AuthParameters,s=t.ClientMetadata;this.validationData=n||{},this.authParameters=o||{},this.clientMetadata=s||{},this.username=r,this.password=i}var t=e.prototype;return t.getUsername=function(){return this.username},t.getPassword=function(){return this.password},t.getValidationData=function(){return this.validationData},t.getAuthParameters=function(){return this.authParameters},t.getClientMetadata=function(){return this.clientMetadata},e}(),S=n(12),E=n(38),C=n.n(E),A=(n(125),n(115)),O=n.n(A),I=n(67),x=n.n(I),T=n(175),P=function(){function e(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length}var t=e.prototype;return t.random=function(t){for(var n=[],r=0;r<t;r+=4)n.push(Object(T.a)());return new e(n,t)},t.toString=function(){return function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")}(this)},e}(),k=r,D="undefined"!=typeof navigator;D&&"Microsoft Internet Explorer"==navigator.appName?(r.prototype.am=function(e,t,n,r,i,o){for(var s=32767&t,a=t>>15;--o>=0;){var u=32767&this[e],c=this[e++]>>15,l=a*u+c*s;i=((u=s*u+((32767&l)<<15)+n[r]+(1073741823&i))>>>30)+(l>>>15)+a*c+(i>>>30),n[r++]=1073741823&u}return i},w=30):D&&"Netscape"!=navigator.appName?(r.prototype.am=function(e,t,n,r,i,o){for(;--o>=0;){var s=t*this[e++]+n[r]+i;i=Math.floor(s/67108864),n[r++]=67108863&s}return i},w=26):(r.prototype.am=function(e,t,n,r,i,o){for(var s=16383&t,a=t>>14;--o>=0;){var u=16383&this[e],c=this[e++]>>14,l=a*u+c*s;i=((u=s*u+((16383&l)<<14)+n[r]+i)>>28)+(l>>14)+a*c,n[r++]=268435455&u}return i},w=28),r.prototype.DB=w,r.prototype.DM=(1<<w)-1,r.prototype.DV=1<<w,r.prototype.FV=Math.pow(2,52),r.prototype.F1=52-w,r.prototype.F2=2*w-52;var N,M,L=new Array;for(N="0".charCodeAt(0),M=0;M<=9;++M)L[N++]=M;for(N="a".charCodeAt(0),M=10;M<36;++M)L[N++]=M;for(N="A".charCodeAt(0),M=10;M<36;++M)L[N++]=M;c.prototype.convert=function(e){var t=i();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(r.ZERO)>0&&this.m.subTo(t,t),t},c.prototype.revert=function(e){var t=i();return e.copyTo(t),this.reduce(t),t},c.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],r=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[n=t+this.m.t]+=this.m.am(0,r,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},c.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},c.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},r.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},r.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},r.prototype.fromString=function(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");n=2}this.t=0,this.s=0;for(var i=e.length,o=!1,a=0;--i>=0;){var u=s(e,i);u<0?"-"==e.charAt(i)&&(o=!0):(o=!1,0==a?this[this.t++]=u:a+n>this.DB?(this[this.t-1]|=(u&(1<<this.DB-a)-1)<<a,this[this.t++]=u>>this.DB-a):this[this.t-1]|=u<<a,(a+=n)>=this.DB&&(a-=this.DB))}this.clamp(),o&&r.ZERO.subTo(this,this)},r.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},r.prototype.dlShiftTo=function(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s},r.prototype.drShiftTo=function(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},r.prototype.lShiftTo=function(e,t){var n,r=e%this.DB,i=this.DB-r,o=(1<<i)-1,s=Math.floor(e/this.DB),a=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)t[n+s+1]=this[n]>>i|a,a=(this[n]&o)<<r;for(n=s-1;n>=0;--n)t[n]=0;t[s]=a,t.t=this.t+s+1,t.s=this.s,t.clamp()},r.prototype.rShiftTo=function(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var r=e%this.DB,i=this.DB-r,o=(1<<r)-1;t[0]=this[n]>>r;for(var s=n+1;s<this.t;++s)t[s-n-1]|=(this[s]&o)<<i,t[s-n]=this[s]>>r;r>0&&(t[this.t-n-1]|=(this.s&o)<<i),t.t=this.t-n,t.clamp()}},r.prototype.subTo=function(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]-e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r-=e[n],t[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t[n++]=this.DV+r:r>0&&(t[n++]=r),t.t=n,t.clamp()},r.prototype.multiplyTo=function(e,t){var n=this.abs(),i=e.abs(),o=n.t;for(t.t=o+i.t;--o>=0;)t[o]=0;for(o=0;o<i.t;++o)t[o+n.t]=n.am(0,i[o],t,o,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&r.ZERO.subTo(t,t)},r.prototype.squareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},r.prototype.divRemTo=function(e,t,n){var o=e.abs();if(!(o.t<=0)){var s=this.abs();if(s.t<o.t)return null!=t&&t.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=i());var a=i(),c=this.s,l=e.s,d=this.DB-u(o[o.t-1]);d>0?(o.lShiftTo(d,a),s.lShiftTo(d,n)):(o.copyTo(a),s.copyTo(n));var f=a.t,p=a[f-1];if(0!=p){var h=p*(1<<this.F1)+(f>1?a[f-2]>>this.F2:0),v=this.FV/h,g=(1<<this.F1)/h,y=1<<this.F2,m=n.t,b=m-f,w=null==t?i():t;for(a.dlShiftTo(b,w),n.compareTo(w)>=0&&(n[n.t++]=1,n.subTo(w,n)),r.ONE.dlShiftTo(f,w),w.subTo(a,a);a.t<f;)a[a.t++]=0;for(;--b>=0;){var _=n[--m]==p?this.DM:Math.floor(n[m]*v+(n[m-1]+y)*g);if((n[m]+=a.am(0,_,n,b,0,f))<_)for(a.dlShiftTo(b,w),n.subTo(w,n);n[m]<--_;)n.subTo(w,n)}null!=t&&(n.drShiftTo(f,t),c!=l&&r.ZERO.subTo(t,t)),n.t=f,n.clamp(),d>0&&n.rShiftTo(d,n),c<0&&r.ZERO.subTo(n,n)}}},r.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},r.prototype.addTo=function(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]+e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r+=e[n],t[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,r>0?t[n++]=r:r<-1&&(t[n++]=this.DV+r),t.t=n,t.clamp()},r.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");t=2}var n,r=(1<<t)-1,i=!1,s="",a=this.t,u=this.DB-a*this.DB%t;if(a-- >0)for(u<this.DB&&(n=this[a]>>u)>0&&(i=!0,s=o(n));a>=0;)u<t?(n=(this[a]&(1<<u)-1)<<t-u,n|=this[--a]>>(u+=this.DB-t)):(n=this[a]>>(u-=t)&r,u<=0&&(u+=this.DB,--a)),n>0&&(i=!0),i&&(s+=o(n));return i?s:"0"},r.prototype.negate=function(){var e=i();return r.ZERO.subTo(this,e),e},r.prototype.abs=function(){return this.s<0?this.negate():this},r.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0},r.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+u(this[this.t-1]^this.s&this.DM)},r.prototype.mod=function(e){var t=i();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(r.ZERO)>0&&e.subTo(t,t),t},r.prototype.equals=function(e){return 0==this.compareTo(e)},r.prototype.add=function(e){var t=i();return this.addTo(e,t),t},r.prototype.subtract=function(e){var t=i();return this.subTo(e,t),t},r.prototype.multiply=function(e){var t=i();return this.multiplyTo(e,t),t},r.prototype.divide=function(e){var t=i();return this.divRemTo(e,t,null),t},r.prototype.modPow=function(e,t,n){var r,o=e.bitLength(),s=a(1),l=new c(t);if(o<=0)return s;r=o<18?1:o<48?3:o<144?4:o<768?5:6;var d=new Array,f=3,p=r-1,h=(1<<r)-1;if(d[1]=l.convert(this),r>1){var v=i();for(l.sqrTo(d[1],v);f<=h;)d[f]=i(),l.mulTo(v,d[f-2],d[f]),f+=2}var g,y,m=e.t-1,b=!0,w=i();for(o=u(e[m])-1;m>=0;){for(o>=p?g=e[m]>>o-p&h:(g=(e[m]&(1<<o+1)-1)<<p-o,m>0&&(g|=e[m-1]>>this.DB+o-p)),f=r;0==(1&g);)g>>=1,--f;if((o-=f)<0&&(o+=this.DB,--m),b)d[g].copyTo(s),b=!1;else{for(;f>1;)l.sqrTo(s,w),l.sqrTo(w,s),f-=2;f>0?l.sqrTo(s,w):(y=s,s=w,w=y),l.mulTo(w,d[g],s)}for(;m>=0&&0==(e[m]&1<<o);)l.sqrTo(s,w),y=s,s=w,w=y,--o<0&&(o=this.DB-1,--m)}var _=l.revert(s);return n(null,_),_},r.ZERO=a(0),r.ONE=a(1);var j=/^[89a-f]/i,R=function(){function e(e){this.N=new k("FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",16),this.g=new k("2",16),this.k=new k(this.hexHash(""+this.padHex(this.N)+this.padHex(this.g)),16),this.smallAValue=this.generateRandomSmallA(),this.getLargeAValue(function(){}),this.infoBits=S.Buffer.from("Caldera Derived Key","utf8"),this.poolName=e}var t=e.prototype;return t.getSmallAValue=function(){return this.smallAValue},t.getLargeAValue=function(e){var t=this;this.largeAValue?e(null,this.largeAValue):this.calculateA(this.smallAValue,function(n,r){n&&e(n,null),t.largeAValue=r,e(null,t.largeAValue)})},t.generateRandomSmallA=function(){var e=l(128).toString("hex");return new k(e,16)},t.generateRandomString=function(){return l(40).toString("base64")},t.getRandomPassword=function(){return this.randomPassword},t.getSaltDevices=function(){return this.SaltToHashDevices},t.getVerifierDevices=function(){return this.verifierDevices},t.generateHashDevice=function(e,t,n){var r=this;this.randomPassword=this.generateRandomString();var i=""+e+t+":"+this.randomPassword,o=this.hash(i),s=l(16).toString("hex");this.SaltToHashDevices=this.padHex(new k(s,16)),this.g.modPow(new k(this.hexHash(this.SaltToHashDevices+o),16),this.N,function(e,t){e&&n(e,null),r.verifierDevices=r.padHex(t),n(null,null)})},t.calculateA=function(e,t){var n=this;this.g.modPow(e,this.N,function(e,r){e&&t(e,null),r.mod(n.N).equals(k.ZERO)&&t(new Error("Illegal paramater. A mod N cannot be 0."),null),t(null,r)})},t.calculateU=function(e,t){return this.UHexHash=this.hexHash(this.padHex(e)+this.padHex(t)),new k(this.UHexHash,16)},t.hash=function(e){var t=e instanceof S.Buffer?C.a.lib.WordArray.create(e):e,n=O()(t).toString();return new Array(64-n.length).join("0")+n},t.hexHash=function(e){return this.hash(S.Buffer.from(e,"hex"))},t.computehkdf=function(e,t){var n=C.a.lib.WordArray.create(S.Buffer.concat([this.infoBits,S.Buffer.from(String.fromCharCode(1),"utf8")])),r=e instanceof S.Buffer?C.a.lib.WordArray.create(e):e,i=t instanceof S.Buffer?C.a.lib.WordArray.create(t):t,o=x()(r,i),s=x()(n,o);return S.Buffer.from(s.toString(),"hex").slice(0,16)},t.getPasswordAuthenticationKey=function(e,t,n,r,i){var o=this;if(n.mod(this.N).equals(k.ZERO))throw new Error("B cannot be zero.");if(this.UValue=this.calculateU(this.largeAValue,n),this.UValue.equals(k.ZERO))throw new Error("U cannot be zero.");var s=""+this.poolName+e+":"+t,a=this.hash(s),u=new k(this.hexHash(this.padHex(r)+a),16);this.calculateS(u,n,function(e,t){e&&i(e,null);var n=o.computehkdf(S.Buffer.from(o.padHex(t),"hex"),S.Buffer.from(o.padHex(o.UValue),"hex"));i(null,n)})},t.calculateS=function(e,t,n){var r=this;this.g.modPow(e,this.N,function(i,o){i&&n(i,null),t.subtract(r.k.multiply(o)).modPow(r.smallAValue.add(r.UValue.multiply(e)),r.N,function(e,t){e&&n(e,null),n(null,t.mod(r.N))})})},t.getNewPasswordRequiredChallengeUserAttributePrefix=function(){return"userAttributes."},t.padHex=function(e){if(!(e instanceof k))throw new Error("Not a BigInteger");var t=e.compareTo(k.ZERO)<0,n=e.abs().toString(16);if(n=n.length%2!=0?"0"+n:n,n=j.test(n)?"00"+n:n,t){var r=n.split("").map(function(e){var t=15&~parseInt(e,16);return"0123456789ABCDEF".charAt(t)}).join("");(n=new k(r,16).add(k.ONE).toString(16)).toUpperCase().startsWith("FF8")&&(n=n.substring(2))}return n},e}(),U=function(){function e(e){this.jwtToken=e||"",this.payload=this.decodePayload()}var t=e.prototype;return t.getJwtToken=function(){return this.jwtToken},t.getExpiration=function(){return this.payload.exp},t.getIssuedAt=function(){return this.payload.iat},t.decodePayload=function(){var e=this.jwtToken.split(".")[1];try{return JSON.parse(S.Buffer.from(e,"base64").toString("utf8"))}catch(e){return{}}},e}(),F=function(e){function t(t){var n=(void 0===t?{}:t).AccessToken;return e.call(this,n||"")||this}var n,r;return r=e,(n=t).prototype=Object.create(r.prototype),n.prototype.constructor=n,d(n,r),t}(U),B=function(e){function t(t){var n=(void 0===t?{}:t).IdToken;return e.call(this,n||"")||this}var n,r;return r=e,(n=t).prototype=Object.create(r.prototype),n.prototype.constructor=n,f(n,r),t}(U),z=function(){function e(e){var t=(void 0===e?{}:e).RefreshToken;this.token=t||""}return e.prototype.getToken=function(){return this.token},e}(),q=n(120),K=n.n(q),$=function(){function e(e){var t=void 0===e?{}:e,n=t.IdToken,r=t.RefreshToken,i=t.AccessToken,o=t.ClockDrift;if(null==i||null==n)throw new Error("Id token and Access Token must be present.");this.idToken=n,this.refreshToken=r,this.accessToken=i,this.clockDrift=void 0===o?this.calculateClockDrift():o}var t=e.prototype;return t.getIdToken=function(){return this.idToken},t.getRefreshToken=function(){return this.refreshToken},t.getAccessToken=function(){return this.accessToken},t.getClockDrift=function(){return this.clockDrift},t.calculateClockDrift=function(){return Math.floor(new Date/1e3)-Math.min(this.accessToken.getIssuedAt(),this.idToken.getIssuedAt())},t.isValid=function(){var e=Math.floor(new Date/1e3)-this.clockDrift;return e<this.accessToken.getExpiration()&&e<this.idToken.getExpiration()},e}(),V=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],G=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],W=function(){function e(){}return e.prototype.getNowString=function(){var e=new Date,t=G[e.getUTCDay()],n=V[e.getUTCMonth()],r=e.getUTCDate(),i=e.getUTCHours();i<10&&(i="0"+i);var o=e.getUTCMinutes();o<10&&(o="0"+o);var s=e.getUTCSeconds();return s<10&&(s="0"+s),t+" "+n+" "+r+" "+i+":"+o+":"+s+" UTC "+e.getUTCFullYear()},e}(),H=function(){function e(e){var t=void 0===e?{}:e,n=t.Name,r=t.Value;this.Name=n||"",this.Value=r||""}var t=e.prototype;return t.getValue=function(){return this.Value},t.setValue=function(e){return this.Value=e,this},t.getName=function(){return this.Name},t.setName=function(e){return this.Name=e,this},t.toString=function(){return JSON.stringify(this)},t.toJSON=function(){return{Name:this.Name,Value:this.Value}},e}(),J={},Y=function(){function e(){}return e.setItem=function(e,t){return J[e]=t,J[e]},e.getItem=function(e){return Object.prototype.hasOwnProperty.call(J,e)?J[e]:void 0},e.removeItem=function(e){return delete J[e]},e.clear=function(){return J={}},e}(),Z=function(){function e(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.cognito.test-ls",1),this.storageWindow.removeItem("aws.cognito.test-ls")}catch(e){this.storageWindow=Y}}return e.prototype.getStorage=function(){return this.storageWindow},e}(),X="undefined"!=typeof navigator?navigator.userAgent:"nodejs",Q=function(){function e(e){if(null==e||null==e.Username||null==e.Pool)throw new Error("Username and Pool information are required.");this.username=e.Username||"",this.pool=e.Pool,this.Session=null,this.client=e.Pool.client,this.signInUserSession=null,this.authenticationFlowType="USER_SRP_AUTH",this.storage=e.Storage||(new Z).getStorage(),this.keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId(),
this.userDataKey=this.keyPrefix+"."+this.username+".userData"}var t=e.prototype;return t.setSignInUserSession=function(e){this.clearCachedUserData(),this.signInUserSession=e,this.cacheTokens()},t.getSignInUserSession=function(){return this.signInUserSession},t.getUsername=function(){return this.username},t.getAuthenticationFlowType=function(){return this.authenticationFlowType},t.setAuthenticationFlowType=function(e){this.authenticationFlowType=e},t.initiateAuth=function(e,t){var n=this,r=e.getAuthParameters();r.USERNAME=this.username;var i=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),o={AuthFlow:"CUSTOM_AUTH",ClientId:this.pool.getClientId(),AuthParameters:r,ClientMetadata:i};this.getUserContextData()&&(o.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",o,function(e,r){if(e)return t.onFailure(e);var i=r.ChallengeName,o=r.ChallengeParameters;return"CUSTOM_CHALLENGE"===i?(n.Session=r.Session,t.customChallenge(o)):(n.signInUserSession=n.getCognitoUserSession(r.AuthenticationResult),n.cacheTokens(),t.onSuccess(n.signInUserSession))})},t.authenticateUser=function(e,t){return"USER_PASSWORD_AUTH"===this.authenticationFlowType?this.authenticateUserPlainUsernamePassword(e,t):"USER_SRP_AUTH"===this.authenticationFlowType||"CUSTOM_AUTH"===this.authenticationFlowType?this.authenticateUserDefaultAuth(e,t):t.onFailure(new Error("Authentication flow type is invalid."))},t.authenticateUserDefaultAuth=function(e,t){var n,r,i=this,o=new R(this.pool.getUserPoolName()),s=new W,a={};null!=this.deviceKey&&(a.DEVICE_KEY=this.deviceKey),a.USERNAME=this.username,o.getLargeAValue(function(u,c){u&&t.onFailure(u),a.SRP_A=c.toString(16),"CUSTOM_AUTH"===i.authenticationFlowType&&(a.CHALLENGE_NAME="SRP_A");var l=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),d={AuthFlow:i.authenticationFlowType,ClientId:i.pool.getClientId(),AuthParameters:a,ClientMetadata:l};i.getUserContextData(i.username)&&(d.UserContextData=i.getUserContextData(i.username)),i.client.request("InitiateAuth",d,function(a,u){if(a)return t.onFailure(a);var c=u.ChallengeParameters;i.username=c.USER_ID_FOR_SRP,i.userDataKey=i.keyPrefix+"."+i.username+".userData",n=new k(c.SRP_B,16),r=new k(c.SALT,16),i.getCachedDeviceKeyAndPassword(),o.getPasswordAuthenticationKey(i.username,e.getPassword(),n,r,function(e,n){e&&t.onFailure(e);var r=s.getNowString(),a=C.a.lib.WordArray.create(S.Buffer.concat([S.Buffer.from(i.pool.getUserPoolName(),"utf8"),S.Buffer.from(i.username,"utf8"),S.Buffer.from(c.SECRET_BLOCK,"base64"),S.Buffer.from(r,"utf8")])),d=C.a.lib.WordArray.create(n),f=K.a.stringify(x()(a,d)),p={};p.USERNAME=i.username,p.PASSWORD_CLAIM_SECRET_BLOCK=c.SECRET_BLOCK,p.TIMESTAMP=r,p.PASSWORD_CLAIM_SIGNATURE=f,null!=i.deviceKey&&(p.DEVICE_KEY=i.deviceKey);var h={ChallengeName:"PASSWORD_VERIFIER",ClientId:i.pool.getClientId(),ChallengeResponses:p,Session:u.Session,ClientMetadata:l};i.getUserContextData()&&(h.UserContextData=i.getUserContextData()),function e(t,n){return i.client.request("RespondToAuthChallenge",t,function(r,o){return r&&"ResourceNotFoundException"===r.code&&-1!==r.message.toLowerCase().indexOf("device")?(p.DEVICE_KEY=null,i.deviceKey=null,i.randomPassword=null,i.deviceGroupKey=null,i.clearCachedDeviceKeyAndPassword(),e(t,n)):n(r,o)})}(h,function(e,n){return e?t.onFailure(e):i.authenticateUserInternal(n,o,t)})})})})},t.authenticateUserPlainUsernamePassword=function(e,t){var n=this,r={};if(r.USERNAME=this.username,r.PASSWORD=e.getPassword(),r.PASSWORD){var i=new R(this.pool.getUserPoolName());this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(r.DEVICE_KEY=this.deviceKey);var o=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),s={AuthFlow:"USER_PASSWORD_AUTH",ClientId:this.pool.getClientId(),AuthParameters:r,ClientMetadata:o};this.getUserContextData(this.username)&&(s.UserContextData=this.getUserContextData(this.username)),this.client.request("InitiateAuth",s,function(e,r){return e?t.onFailure(e):n.authenticateUserInternal(r,i,t)})}else t.onFailure(new Error("PASSWORD parameter is required"))},t.authenticateUserInternal=function(e,t,n){var r=this,i=e.ChallengeName,o=e.ChallengeParameters;if("SMS_MFA"===i)return this.Session=e.Session,n.mfaRequired(i,o);if("SELECT_MFA_TYPE"===i)return this.Session=e.Session,n.selectMFAType(i,o);if("MFA_SETUP"===i)return this.Session=e.Session,n.mfaSetup(i,o);if("SOFTWARE_TOKEN_MFA"===i)return this.Session=e.Session,n.totpRequired(i,o);if("CUSTOM_CHALLENGE"===i)return this.Session=e.Session,n.customChallenge(o);if("NEW_PASSWORD_REQUIRED"===i){this.Session=e.Session;var s=null,a=null,u=[],c=t.getNewPasswordRequiredChallengeUserAttributePrefix();if(o&&(s=JSON.parse(e.ChallengeParameters.userAttributes),a=JSON.parse(e.ChallengeParameters.requiredAttributes)),a)for(var l=0;l<a.length;l++)u[l]=a[l].substr(c.length);return n.newPasswordRequired(s,u)}if("DEVICE_SRP_AUTH"===i)return this.Session=e.Session,void this.getDeviceResponse(n);this.signInUserSession=this.getCognitoUserSession(e.AuthenticationResult),this.challengeName=i,this.cacheTokens();var d=e.AuthenticationResult.NewDeviceMetadata;if(null==d)return n.onSuccess(this.signInUserSession);t.generateHashDevice(e.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,e.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(i){if(i)return n.onFailure(i);var o={Salt:S.Buffer.from(t.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:S.Buffer.from(t.getVerifierDevices(),"hex").toString("base64")};r.verifierDevices=o.PasswordVerifier,r.deviceGroupKey=d.DeviceGroupKey,r.randomPassword=t.getRandomPassword(),r.client.request("ConfirmDevice",{DeviceKey:d.DeviceKey,AccessToken:r.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:o,DeviceName:X},function(t,i){return t?n.onFailure(t):(r.deviceKey=e.AuthenticationResult.NewDeviceMetadata.DeviceKey,r.cacheDeviceKeyAndPassword(),!0===i.UserConfirmationNecessary?n.onSuccess(r.signInUserSession,i.UserConfirmationNecessary):n.onSuccess(r.signInUserSession))})})},t.completeNewPasswordChallenge=function(e,t,n,r){var i=this;if(!e)return n.onFailure(new Error("New password is required."));var o=new R(this.pool.getUserPoolName()),s=o.getNewPasswordRequiredChallengeUserAttributePrefix(),a={};t&&Object.keys(t).forEach(function(e){a[s+e]=t[e]}),a.NEW_PASSWORD=e,a.USERNAME=this.username;var u={ChallengeName:"NEW_PASSWORD_REQUIRED",ClientId:this.pool.getClientId(),ChallengeResponses:a,Session:this.Session,ClientMetadata:r};this.getUserContextData()&&(u.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",u,function(e,t){return e?n.onFailure(e):i.authenticateUserInternal(t,o,n)})},t.getDeviceResponse=function(e,t){var n=this,r=new R(this.deviceGroupKey),i=new W,o={};o.USERNAME=this.username,o.DEVICE_KEY=this.deviceKey,r.getLargeAValue(function(s,a){s&&e.onFailure(s),o.SRP_A=a.toString(16);var u={ChallengeName:"DEVICE_SRP_AUTH",ClientId:n.pool.getClientId(),ChallengeResponses:o,ClientMetadata:t,Session:n.Session};n.getUserContextData()&&(u.UserContextData=n.getUserContextData()),n.client.request("RespondToAuthChallenge",u,function(t,o){if(t)return e.onFailure(t);var s=o.ChallengeParameters,a=new k(s.SRP_B,16),u=new k(s.SALT,16);r.getPasswordAuthenticationKey(n.deviceKey,n.randomPassword,a,u,function(t,r){if(t)return e.onFailure(t);var a=i.getNowString(),u=C.a.lib.WordArray.create(S.Buffer.concat([S.Buffer.from(n.deviceGroupKey,"utf8"),S.Buffer.from(n.deviceKey,"utf8"),S.Buffer.from(s.SECRET_BLOCK,"base64"),S.Buffer.from(a,"utf8")])),c=C.a.lib.WordArray.create(r),l=K.a.stringify(x()(u,c)),d={};d.USERNAME=n.username,d.PASSWORD_CLAIM_SECRET_BLOCK=s.SECRET_BLOCK,d.TIMESTAMP=a,d.PASSWORD_CLAIM_SIGNATURE=l,d.DEVICE_KEY=n.deviceKey;var f={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:n.pool.getClientId(),ChallengeResponses:d,Session:o.Session};n.getUserContextData()&&(f.UserContextData=n.getUserContextData()),n.client.request("RespondToAuthChallenge",f,function(t,r){return t?e.onFailure(t):(n.signInUserSession=n.getCognitoUserSession(r.AuthenticationResult),n.cacheTokens(),e.onSuccess(n.signInUserSession))})})})})},t.confirmRegistration=function(e,t,n,r){var i={ClientId:this.pool.getClientId(),ConfirmationCode:e,Username:this.username,ForceAliasCreation:t,ClientMetadata:r};this.getUserContextData()&&(i.UserContextData=this.getUserContextData()),this.client.request("ConfirmSignUp",i,function(e){return e?n(e,null):n(null,"SUCCESS")})},t.sendCustomChallengeAnswer=function(e,t,n){var r=this,i={};i.USERNAME=this.username,i.ANSWER=e;var o=new R(this.pool.getUserPoolName());this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(i.DEVICE_KEY=this.deviceKey);var s={ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:i,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:n};this.getUserContextData()&&(s.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",s,function(e,n){return e?t.onFailure(e):r.authenticateUserInternal(n,o,t)})},t.sendMFACode=function(e,t,n,r){var i=this,o={};o.USERNAME=this.username,o.SMS_MFA_CODE=e;var s=n||"SMS_MFA";"SOFTWARE_TOKEN_MFA"===s&&(o.SOFTWARE_TOKEN_MFA_CODE=e),null!=this.deviceKey&&(o.DEVICE_KEY=this.deviceKey);var a={ChallengeName:s,ChallengeResponses:o,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:r};this.getUserContextData()&&(a.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",a,function(e,n){if(e)return t.onFailure(e);if("DEVICE_SRP_AUTH"!==n.ChallengeName){if(i.signInUserSession=i.getCognitoUserSession(n.AuthenticationResult),i.cacheTokens(),null==n.AuthenticationResult.NewDeviceMetadata)return t.onSuccess(i.signInUserSession);var r=new R(i.pool.getUserPoolName());r.generateHashDevice(n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,n.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(e){if(e)return t.onFailure(e);var o={Salt:S.Buffer.from(r.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:S.Buffer.from(r.getVerifierDevices(),"hex").toString("base64")};i.verifierDevices=o.PasswordVerifier,i.deviceGroupKey=n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,i.randomPassword=r.getRandomPassword(),i.client.request("ConfirmDevice",{DeviceKey:n.AuthenticationResult.NewDeviceMetadata.DeviceKey,AccessToken:i.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:o,DeviceName:X},function(e,r){return e?t.onFailure(e):(i.deviceKey=n.AuthenticationResult.NewDeviceMetadata.DeviceKey,i.cacheDeviceKeyAndPassword(),!0===r.UserConfirmationNecessary?t.onSuccess(i.signInUserSession,r.UserConfirmationNecessary):t.onSuccess(i.signInUserSession))})})}else i.getDeviceResponse(t)})},t.changePassword=function(e,t,n,r){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("ChangePassword",{PreviousPassword:e,ProposedPassword:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:r},function(e){return e?n(e,null):n(null,"SUCCESS")})},t.enableMFA=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);var t=[];t.push({DeliveryMedium:"SMS",AttributeName:"phone_number"}),this.client.request("SetUserSettings",{MFAOptions:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(t){return t?e(t,null):e(null,"SUCCESS")})},t.setUserMfaPreference=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("SetUserMFAPreference",{SMSMfaSettings:e,SoftwareTokenMfaSettings:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?n(e,null):n(null,"SUCCESS")})},t.disableMFA=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("SetUserSettings",{MFAOptions:[],AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(t){return t?e(t,null):e(null,"SUCCESS")})},t.deleteUser=function(e,t){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("DeleteUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:t},function(t){return t?e(t,null):(n.clearCachedUser(),e(null,"SUCCESS"))})},t.updateAttributes=function(e,t,n){var r=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("UpdateUserAttributes",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserAttributes:e,ClientMetadata:n},function(e){return e?t(e,null):r.getUserData(function(){return t(null,"SUCCESS")},{bypassCache:!0})})},t.getUserAttributes=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(t,n){if(t)return e(t,null);for(var r=[],i=0;i<n.UserAttributes.length;i++){var o={Name:n.UserAttributes[i].Name,Value:n.UserAttributes[i].Value},s=new H(o);r.push(s)}return e(null,r)})},t.getMFAOptions=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(t,n){return t?e(t,null):e(null,n.MFAOptions)})},t.createGetUserRequest=function(){return this.client.promisifyRequest("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()})},t.refreshSessionIfPossible=function(e){var t=this;return void 0===e&&(e={}),new Promise(function(n){var r=t.signInUserSession.getRefreshToken();r&&r.getToken()?t.refreshSession(r,n,e.clientMetadata):n()})},t.getUserData=function(e,t){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return this.clearCachedUserData(),e(new Error("User is not authenticated"),null);var r=this.getUserDataFromCache();if(r)if(this.isFetchUserDataAndTokenRequired(t))this.fetchUserData().then(function(e){return n.refreshSessionIfPossible(t).then(function(){return e})}).then(function(t){return e(null,t)}).catch(e);else try{return void e(null,JSON.parse(r))}catch(t){return this.clearCachedUserData(),void e(t,null)}else this.fetchUserData().then(function(t){e(null,t)}).catch(e)},t.getUserDataFromCache=function(){return this.storage.getItem(this.userDataKey)},t.isFetchUserDataAndTokenRequired=function(e){var t=(e||{}).bypassCache;return void 0!==t&&t},t.fetchUserData=function(){var e=this;return this.createGetUserRequest().then(function(t){return e.cacheUserData(t),t})},t.deleteAttributes=function(e,t){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("DeleteUserAttributes",{UserAttributeNames:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?t(e,null):n.getUserData(function(){return t(null,"SUCCESS")},{bypassCache:!0})})},t.resendConfirmationCode=function(e,t){var n={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:t};this.client.request("ResendConfirmationCode",n,function(t,n){return t?e(t,null):e(null,n)})},t.getSession=function(e,t){if(void 0===t&&(t={}),null==this.username)return e(new Error("Username is null. Cannot retrieve a new session"),null);if(null!=this.signInUserSession&&this.signInUserSession.isValid())return e(null,this.signInUserSession);var n="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,r=n+".idToken",i=n+".accessToken",o=n+".refreshToken",s=n+".clockDrift";if(this.storage.getItem(r)){var a=new B({IdToken:this.storage.getItem(r)}),u=new F({AccessToken:this.storage.getItem(i)}),c=new z({RefreshToken:this.storage.getItem(o)}),l=parseInt(this.storage.getItem(s),0)||0,d=new $({IdToken:a,AccessToken:u,RefreshToken:c,ClockDrift:l});if(d.isValid())return this.signInUserSession=d,e(null,this.signInUserSession);if(!c.getToken())return e(new Error("Cannot retrieve a new session. Please authenticate."),null);this.refreshSession(c,e,t.clientMetadata)}else e(new Error("Local storage is missing an ID Token, Please authenticate"),null)},t.refreshSession=function(e,t,n){var r=this,i=this.pool.wrapRefreshSessionCallback?this.pool.wrapRefreshSessionCallback(t):t,o={};o.REFRESH_TOKEN=e.getToken();var s="CognitoIdentityServiceProvider."+this.pool.getClientId(),a=s+".LastAuthUser";if(this.storage.getItem(a)){this.username=this.storage.getItem(a);var u=s+"."+this.username+".deviceKey";this.deviceKey=this.storage.getItem(u),o.DEVICE_KEY=this.deviceKey}var c={ClientId:this.pool.getClientId(),AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:o,ClientMetadata:n};this.getUserContextData()&&(c.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",c,function(t,n){if(t)return"NotAuthorizedException"===t.code&&r.clearCachedUser(),i(t,null);if(n){var o=n.AuthenticationResult;return Object.prototype.hasOwnProperty.call(o,"RefreshToken")||(o.RefreshToken=e.getToken()),r.signInUserSession=r.getCognitoUserSession(o),r.cacheTokens(),i(null,r.signInUserSession)}})},t.cacheTokens=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId(),t=e+"."+this.username+".idToken",n=e+"."+this.username+".accessToken",r=e+"."+this.username+".refreshToken",i=e+"."+this.username+".clockDrift",o=e+".LastAuthUser";this.storage.setItem(t,this.signInUserSession.getIdToken().getJwtToken()),this.storage.setItem(n,this.signInUserSession.getAccessToken().getJwtToken()),this.storage.setItem(r,this.signInUserSession.getRefreshToken().getToken()),this.storage.setItem(i,""+this.signInUserSession.getClockDrift()),this.storage.setItem(o,this.username)},t.cacheUserData=function(e){this.storage.setItem(this.userDataKey,JSON.stringify(e))},t.clearCachedUserData=function(){this.storage.removeItem(this.userDataKey)},t.clearCachedUser=function(){this.clearCachedTokens(),this.clearCachedUserData()},t.cacheDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".deviceKey",n=e+".randomPasswordKey",r=e+".deviceGroupKey";this.storage.setItem(t,this.deviceKey),this.storage.setItem(n,this.randomPassword),this.storage.setItem(r,this.deviceGroupKey)},t.getCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".deviceKey",n=e+".randomPasswordKey",r=e+".deviceGroupKey";this.storage.getItem(t)&&(this.deviceKey=this.storage.getItem(t),this.randomPassword=this.storage.getItem(n),this.deviceGroupKey=this.storage.getItem(r))},t.clearCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".deviceKey",n=e+".randomPasswordKey",r=e+".deviceGroupKey";this.storage.removeItem(t),this.storage.removeItem(n),this.storage.removeItem(r)},t.clearCachedTokens=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId(),t=e+"."+this.username+".idToken",n=e+"."+this.username+".accessToken",r=e+"."+this.username+".refreshToken",i=e+".LastAuthUser",o=e+"."+this.username+".clockDrift";this.storage.removeItem(t),this.storage.removeItem(n),this.storage.removeItem(r),this.storage.removeItem(i),this.storage.removeItem(o)},t.getCognitoUserSession=function(e){var t=new B(e),n=new F(e),r=new z(e);return new $({IdToken:t,AccessToken:n,RefreshToken:r})},t.forgotPassword=function(e,t){var n={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:t};this.getUserContextData()&&(n.UserContextData=this.getUserContextData()),this.client.request("ForgotPassword",n,function(t,n){return t?e.onFailure(t):"function"==typeof e.inputVerificationCode?e.inputVerificationCode(n):e.onSuccess(n)})},t.confirmPassword=function(e,t,n,r){var i={ClientId:this.pool.getClientId(),Username:this.username,ConfirmationCode:e,Password:t,ClientMetadata:r};this.getUserContextData()&&(i.UserContextData=this.getUserContextData()),this.client.request("ConfirmForgotPassword",i,function(e){return e?n.onFailure(e):n.onSuccess("SUCCESS")})},t.getAttributeVerificationCode=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("GetUserAttributeVerificationCode",{AttributeName:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:n},function(e,n){return e?t.onFailure(e):"function"==typeof t.inputVerificationCode?t.inputVerificationCode(n):t.onSuccess("SUCCESS")})},t.verifyAttribute=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("VerifyUserAttribute",{AttributeName:e,Code:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?n.onFailure(e):n.onSuccess("SUCCESS")})},t.getDevice=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("GetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey},function(t,n){return t?e.onFailure(t):e.onSuccess(n)})},t.forgetSpecificDevice=function(e,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("ForgetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:e},function(e){return e?t.onFailure(e):t.onSuccess("SUCCESS")})},t.forgetDevice=function(e){var t=this;this.forgetSpecificDevice(this.deviceKey,{onFailure:e.onFailure,onSuccess:function(n){return t.deviceKey=null,t.deviceGroupKey=null,t.randomPassword=null,t.clearCachedDeviceKeyAndPassword(),e.onSuccess(n)}})},t.setDeviceStatusRemembered=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"remembered"},function(t){return t?e.onFailure(t):e.onSuccess("SUCCESS")})},t.setDeviceStatusNotRemembered=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"not_remembered"},function(t){return t?e.onFailure(t):e.onSuccess("SUCCESS")})},t.listDevices=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));var r={AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),Limit:e};t&&(r.PaginationToken=t),this.client.request("ListDevices",r,function(e,t){return e?n.onFailure(e):n.onSuccess(t)})},t.globalSignOut=function(e){var t=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("GlobalSignOut",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(n){return n?e.onFailure(n):(t.clearCachedUser(),e.onSuccess("SUCCESS"))})},t.signOut=function(e){var t=this;e&&"function"==typeof e?this.getSession(function(n,r){if(n)return e(n);t.revokeTokens(function(n){t.cleanClientData(),e(n)})}):this.cleanClientData()},t.revokeTokens=function(e){if(void 0===e&&(e=function(){}),"function"!=typeof e)throw new Error("Invalid revokeTokenCallback. It should be a function.");if(!this.signInUserSession)return e(new Error("User is not authenticated"));if(!this.signInUserSession.getAccessToken())return e(new Error("No Access token available"));var t=this.signInUserSession.getRefreshToken().getToken(),n=this.signInUserSession.getAccessToken();if(this.isSessionRevocable(n)&&t)return this.revokeToken({token:t,callback:e});e()},t.isSessionRevocable=function(e){if(e&&"function"==typeof e.decodePayload)try{return!!e.decodePayload().origin_jti}catch(e){}return!1},t.cleanClientData=function(){this.signInUserSession=null,this.clearCachedUser()},t.revokeToken=function(e){var t=e.token,n=e.callback;this.client.requestWithRetry("RevokeToken",{Token:t,ClientId:this.pool.getClientId()},function(e){if(e)return n(e);n()})},t.sendMFASelectionAnswer=function(e,t){var n=this,r={};r.USERNAME=this.username,r.ANSWER=e;var i={ChallengeName:"SELECT_MFA_TYPE",ChallengeResponses:r,ClientId:this.pool.getClientId(),Session:this.Session};this.getUserContextData()&&(i.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",i,function(r,i){return r?t.onFailure(r):(n.Session=i.Session,"SMS_MFA"===e?t.mfaRequired(i.ChallengeName,i.ChallengeParameters):"SOFTWARE_TOKEN_MFA"===e?t.totpRequired(i.ChallengeName,i.ChallengeParameters):void 0)})},t.getUserContextData=function(){return this.pool.getUserContextData(this.username)},t.associateSoftwareToken=function(e){var t=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("AssociateSoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(t,n){return t?e.onFailure(t):e.associateSecretCode(n.SecretCode)}):this.client.request("AssociateSoftwareToken",{Session:this.Session},function(n,r){return n?e.onFailure(n):(t.Session=r.Session,e.associateSecretCode(r.SecretCode))})},t.verifySoftwareToken=function(e,t,n){var r=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("VerifySoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserCode:e,FriendlyDeviceName:t},function(e,t){return e?n.onFailure(e):n.onSuccess(t)}):this.client.request("VerifySoftwareToken",{Session:this.Session,UserCode:e,FriendlyDeviceName:t},function(e,t){if(e)return n.onFailure(e);r.Session=t.Session;var i={};i.USERNAME=r.username;var o={ChallengeName:"MFA_SETUP",ClientId:r.pool.getClientId(),ChallengeResponses:i,Session:r.Session};r.getUserContextData()&&(o.UserContextData=r.getUserContextData()),r.client.request("RespondToAuthChallenge",o,function(e,t){return e?n.onFailure(e):(r.signInUserSession=r.getCognitoUserSession(t.AuthenticationResult),r.cacheTokens(),n.onSuccess(r.signInUserSession))})})},e}(),ee=(n(214),{userAgent:"aws-amplify/5.0.4 js",product:"",navigator:null,isReactNative:!1});"undefined"!=typeof navigator&&navigator.product&&("ReactNative"===(ee.product=navigator.product||"",ee.navigator=navigator||null,navigator.product)?(ee.userAgent="aws-amplify/5.0.4 react-native",ee.isReactNative=!0):(ee.userAgent="aws-amplify/5.0.4 js",ee.isReactNative=!1)),p.prototype.userAgent=ee.userAgent;var te=p,ne=function(e){function t(t,n,r,i){var o;return(o=e.call(this,t)||this).code=n,o.name=r,o.statusCode=i,o}return h(t,e),t}(v(Error)),re=function(){function e(e,t,n){this.endpoint=t||"https://cognito-idp."+e+".amazonaws.com/";var r=(n||{}).credentials;this.fetchOptions=r?{credentials:r}:{}}var t=e.prototype;return t.promisifyRequest=function(e,t){var n=this;return new Promise(function(r,i){n.request(e,t,function(e,t){e?i(new ne(e.message,e.code,e.name,e.statusCode)):r(t)})})},t.requestWithRetry=function(e,t,n){var r=this;(function(e,t,n){return void 0===n&&(n=3e5),function e(t,n,r,i){if(void 0===i&&(i=1),"function"!=typeof t)throw Error("functionToRetry must be a function");return ie(t.name+" attempt #"+i+" with args: "+JSON.stringify(n)),t.apply(void 0,n).catch(function(o){if(ie("error on "+t.name,o),(s=o)&&s.nonRetryable)throw ie(t.name+" non retryable error",o),o;var s,a=r(i,n,o);if(ie(t.name+" retrying in "+a+" ms"),!1!==a)return new Promise(function(e){return setTimeout(e,a)}).then(function(){return e(t,n,r,i+1)});throw o})}(e,t,function(e){return function(t){var n=100*Math.pow(2,t)+100*Math.random();return!(n>e)&&n}}(n))})(function(t){return new Promise(function(n,i){r.request(e,t,function(e,t){e?i(e):n(t)})})},[t],5e3).then(function(e){return n(null,e)}).catch(function(e){return n(e)})},t.request=function(e,t,n){var r,i={"Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"AWSCognitoIdentityProviderService."+e,"X-Amz-User-Agent":te.prototype.userAgent},o=Object.assign({},this.fetchOptions,{headers:i,method:"POST",mode:"cors",cache:"no-cache",body:JSON.stringify(t)});fetch(this.endpoint,o).then(function(e){return r=e,e},function(e){if(e instanceof TypeError)throw new Error("Network error");throw e}).then(function(e){return e.json().catch(function(){return{}})}).then(function(e){if(r.ok)return n(null,e);var t=(e.__type||e.code).split("#").pop(),i=new Error(e.message||e.Message||null);return i.name=t,i.code=t,n(i)}).catch(function(e){if(r&&r.headers&&r.headers.get("x-amzn-errortype"))try{var t=r.headers.get("x-amzn-errortype").split(":")[0],i=new Error(r.status?r.status.toString():null);return i.code=t,i.name=t,i.statusCode=r.status,n(i)}catch(t){return n(e)}else e instanceof Error&&"Network error"===e.message&&(e.code="NetworkError");return n(e)})},e}(),ie=function(){};Error;var oe=function(){function e(e,t){var n=e||{},r=n.UserPoolId,i=n.ClientId,o=n.endpoint,s=n.fetchOptions,a=n.AdvancedSecurityDataCollectionFlag;if(!r||!i)throw new Error("Both UserPoolId and ClientId are required.");if(r.length>55||!/^[\w-]+_[0-9a-zA-Z]+$/.test(r))throw new Error("Invalid UserPoolId format.");var u=r.split("_")[0];this.userPoolId=r,this.clientId=i,this.client=new re(u,o,s),this.advancedSecurityDataCollectionFlag=!1!==a,this.storage=e.Storage||(new Z).getStorage(),t&&(this.wrapRefreshSessionCallback=t)}var t=e.prototype;return t.getUserPoolId=function(){return this.userPoolId},t.getUserPoolName=function(){return this.getUserPoolId().split("_")[1]},t.getClientId=function(){return this.clientId},t.signUp=function(e,t,n,r,i,o){var s=this,a={ClientId:this.clientId,Username:e,Password:t,UserAttributes:n,ValidationData:r,ClientMetadata:o};this.getUserContextData(e)&&(a.UserContextData=this.getUserContextData(e)),this.client.request("SignUp",a,function(t,n){if(t)return i(t,null);var r={Username:e,Pool:s,Storage:s.storage},o={user:new Q(r),userConfirmed:n.UserConfirmed,userSub:n.UserSub,codeDeliveryDetails:n.CodeDeliveryDetails};return i(null,o)})},t.getCurrentUser=function(){var e="CognitoIdentityServiceProvider."+this.clientId+".LastAuthUser",t=this.storage.getItem(e);if(t){var n={Username:t,Pool:this,Storage:this.storage};return new Q(n)}return null},t.getUserContextData=function(e){if("undefined"!=typeof AmazonCognitoAdvancedSecurityData){var t=AmazonCognitoAdvancedSecurityData;if(this.advancedSecurityDataCollectionFlag){var n=t.getData(e,this.userPoolId,this.clientId);if(n)return{EncodedData:n}}return{}}},e}(),se=n(71),ae=function(){function e(e){if(!e.domain)throw new Error("The domain of cookieStorage can not be undefined.");if(this.domain=e.domain,e.path?this.path=e.path:this.path="/",Object.prototype.hasOwnProperty.call(e,"expires")?this.expires=e.expires:this.expires=365,Object.prototype.hasOwnProperty.call(e,"secure")?this.secure=e.secure:this.secure=!0,Object.prototype.hasOwnProperty.call(e,"sameSite")){if(!["strict","lax","none"].includes(e.sameSite))throw new Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if("none"===e.sameSite&&!this.secure)throw new Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=e.sameSite}else this.sameSite=null}var t=e.prototype;return t.setItem=function(e,t){var n={path:this.path,
expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(n.sameSite=this.sameSite),se.set(e,t,n),se.get(e)},t.getItem=function(e){return se.get(e)},t.removeItem=function(e){var t={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(t.sameSite=this.sameSite),se.remove(e,t)},t.clear=function(){for(var e=se.get(),t=Object.keys(e).length,n=0;n<t;++n)this.removeItem(Object.keys(e)[n]);return{}},e}()},function(e,t,n){"use strict";function r(e){var t=0;t=e.length;for(var n=e.length;n>=0;n-=1){var r=e.charCodeAt(n);r>127&&r<=2047?t+=1:r>2047&&r<=65535&&(t+=2),r>=56320&&r<=57343&&(n-=1)}return t}function i(){return(new Date).getTime()}function o(e){return Number.isInteger?Number.isInteger(e):function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}(e)}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",function(){return g});var a,u=n(20),c={keyPrefix:"aws-amplify-cache",capacityInBytes:1048576,itemMaxSize:21e4,defaultTTL:2592e5,defaultPriority:5,warningThreshold:.8,storage:(new(n(77).a)).getStorage()},l={},d=(function(){function e(){}e.clear=function(){l={}},e.getItem=function(e){return l[e]||null},e.setItem=function(e,t){l[e]=t},e.removeItem=function(e){delete l[e]}}(),n(48)),f=new d.a("StorageCache"),p=function(){function e(e){this.config=Object.assign({},e),this.cacheCurSizeKey=this.config.keyPrefix+"CurSize",this.checkConfig()}return e.prototype.getModuleName=function(){return"Cache"},e.prototype.checkConfig=function(){o(this.config.capacityInBytes)||(f.error("Invalid parameter: capacityInBytes. It should be an Integer. Setting back to default."),this.config.capacityInBytes=c.capacityInBytes),o(this.config.itemMaxSize)||(f.error("Invalid parameter: itemMaxSize. It should be an Integer. Setting back to default."),this.config.itemMaxSize=c.itemMaxSize),o(this.config.defaultTTL)||(f.error("Invalid parameter: defaultTTL. It should be an Integer. Setting back to default."),this.config.defaultTTL=c.defaultTTL),o(this.config.defaultPriority)||(f.error("Invalid parameter: defaultPriority. It should be an Integer. Setting back to default."),this.config.defaultPriority=c.defaultPriority),this.config.itemMaxSize>this.config.capacityInBytes&&(f.error("Invalid parameter: itemMaxSize. It should be smaller than capacityInBytes. Setting back to default."),this.config.itemMaxSize=c.itemMaxSize),(this.config.defaultPriority>5||this.config.defaultPriority<1)&&(f.error("Invalid parameter: defaultPriority. It should be between 1 and 5. Setting back to default."),this.config.defaultPriority=c.defaultPriority),(Number(this.config.warningThreshold)>1||Number(this.config.warningThreshold)<0)&&(f.error("Invalid parameter: warningThreshold. It should be between 0 and 1. Setting back to default."),this.config.warningThreshold=c.warningThreshold),this.config.capacityInBytes>5242880&&(f.error("Cache Capacity should be less than 5MB. Setting back to default. Setting back to default."),this.config.capacityInBytes=c.capacityInBytes)},e.prototype.fillCacheItem=function(e,t,n){var o={key:e,data:t,timestamp:i(),visitedTime:i(),priority:n.priority,expires:n.expires,type:s(t),byteSize:0};return o.byteSize=r(JSON.stringify(o)),o.byteSize=r(JSON.stringify(o)),o},e.prototype.configure=function(e){return e?(e.keyPrefix&&f.warn("Don't try to configure keyPrefix!"),this.config=Object.assign({},this.config,e,e.Cache),this.checkConfig(),this.config):this.config},e}(),h=(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),v=new d.a("Cache"),g=new(function(e){function t(t){var n=this,r=t?Object.assign({},c,t):c;return(n=e.call(this,r)||this).config.storage=r.storage,n.getItem=n.getItem.bind(n),n.setItem=n.setItem.bind(n),n.removeItem=n.removeItem.bind(n),n}return h(t,e),t.prototype._decreaseCurSizeInBytes=function(e){var t=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(t-e).toString())},t.prototype._increaseCurSizeInBytes=function(e){var t=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(t+e).toString())},t.prototype._refreshItem=function(e,t){return e.visitedTime=i(),this.config.storage.setItem(t,JSON.stringify(e)),e},t.prototype._isExpired=function(e){var t=this.config.storage.getItem(e),n=JSON.parse(t);return i()>=n.expires},t.prototype._removeItem=function(e,t){var n=t||JSON.parse(this.config.storage.getItem(e)).byteSize;this._decreaseCurSizeInBytes(n),this.config.storage.removeItem(e)},t.prototype._setItem=function(e,t){this._increaseCurSizeInBytes(t.byteSize);try{this.config.storage.setItem(e,JSON.stringify(t))}catch(e){this._decreaseCurSizeInBytes(t.byteSize),v.error("Failed to set item "+e)}},t.prototype._sizeToPop=function(e){var t=this.getCacheCurSize()+e-this.config.capacityInBytes,n=(1-this.config.warningThreshold)*this.config.capacityInBytes;return t>n?t:n},t.prototype._isCacheFull=function(e){return e+this.getCacheCurSize()>this.config.capacityInBytes},t.prototype._findValidKeys=function(){for(var e=[],t=[],n=0;n<this.config.storage.length;n+=1)t.push(this.config.storage.key(n));for(n=0;n<t.length;n+=1){var r=t[n];0===r.indexOf(this.config.keyPrefix)&&r!==this.cacheCurSizeKey&&(this._isExpired(r)?this._removeItem(r):e.push(r))}return e},t.prototype._popOutItems=function(e,t){for(var n=[],r=t,i=0;i<e.length;i+=1){var o=this.config.storage.getItem(e[i]);if(null!=o){var s=JSON.parse(o);n.push(s)}}for(n.sort(function(e,t){return e.priority>t.priority?-1:e.priority<t.priority?1:e.visitedTime<t.visitedTime?-1:1}),i=0;i<n.length;i+=1)if(this._removeItem(n[i].key,n[i].byteSize),(r-=n[i].byteSize)<=0)return},t.prototype.setItem=function(e,t,n){v.log("Set item: key is "+e+", value is "+t+" with options: "+n);var r=this.config.keyPrefix+e;if(r!==this.config.keyPrefix&&r!==this.cacheCurSizeKey)if(void 0!==t){var o={priority:n&&void 0!==n.priority?n.priority:this.config.defaultPriority,expires:n&&void 0!==n.expires?n.expires:this.config.defaultTTL+i()};if(o.priority<1||o.priority>5)v.warn("Invalid parameter: priority due to out or range. It should be within 1 and 5.");else{var s=this.fillCacheItem(r,t,o);if(s.byteSize>this.config.itemMaxSize)v.warn("Item with key: "+e+" you are trying to put into is too big!");else try{var a=this.config.storage.getItem(r);if(a&&this._removeItem(r,JSON.parse(a).byteSize),this._isCacheFull(s.byteSize)){var u=this._findValidKeys();if(this._isCacheFull(s.byteSize)){var c=this._sizeToPop(s.byteSize);this._popOutItems(u,c)}}this._setItem(r,s)}catch(e){v.warn("setItem failed! "+e)}}}else v.warn("The value of item should not be undefined!");else v.warn("Invalid key: should not be empty or 'CurSize'")},t.prototype.getItem=function(e,t){v.log("Get item: key is "+e+" with options "+t);var n=null,r=this.config.keyPrefix+e;if(r===this.config.keyPrefix||r===this.cacheCurSizeKey)return v.warn("Invalid key: should not be empty or 'CurSize'"),null;try{if(null!=(n=this.config.storage.getItem(r))){if(!this._isExpired(r)){var i=JSON.parse(n);return(i=this._refreshItem(i,r)).data}this._removeItem(r,JSON.parse(n).byteSize),n=null}if(t&&void 0!==t.callback){var o=t.callback();return null!==o&&this.setItem(e,o,t),o}return null}catch(e){return v.warn("getItem failed! "+e),null}},t.prototype.removeItem=function(e){v.log("Remove item: key is "+e);var t=this.config.keyPrefix+e;if(t!==this.config.keyPrefix&&t!==this.cacheCurSizeKey)try{var n=this.config.storage.getItem(t);n&&this._removeItem(t,JSON.parse(n).byteSize)}catch(e){v.warn("removeItem failed! "+e)}},t.prototype.clear=function(){v.log("Clear Cache");for(var e=[],t=0;t<this.config.storage.length;t+=1){var n=this.config.storage.key(t);0===n.indexOf(this.config.keyPrefix)&&e.push(n)}try{for(t=0;t<e.length;t+=1)this.config.storage.removeItem(e[t])}catch(e){v.warn("clear failed! "+e)}},t.prototype.getAllKeys=function(){for(var e=[],t=0;t<this.config.storage.length;t+=1){var n=this.config.storage.key(t);0===n.indexOf(this.config.keyPrefix)&&n!==this.cacheCurSizeKey&&e.push(n.substring(this.config.keyPrefix.length))}return e},t.prototype.getCacheCurSize=function(){var e=this.config.storage.getItem(this.cacheCurSizeKey);return e||(this.config.storage.setItem(this.cacheCurSizeKey,"0"),e="0"),Number(e)},t.prototype.createInstance=function(e){return e.keyPrefix&&e.keyPrefix!==c.keyPrefix||(v.error("invalid keyPrefix, setting keyPrefix with timeStamp"),e.keyPrefix=i.toString()),new t(e)},t}(p));t.b=g,u.a.register(g)},function(e,t,n){"use strict";function r(e){for(var t="",n=0;n<e.byteLength;n++)t+=g[e[n]];return t}function i(e,t,n){return e+"/"+t+"/"+n+"/aws4_request"}function o(e,t,n){var r=new e(t);return r.update(n),r.digest()}function s(e,t,n){var r,i,o=e.headers,s={};try{for(var a=Object(v.__values)(Object.keys(o).sort()),u=a.next();!u.done;u=a.next()){var c=u.value,l=c.toLowerCase();(l in C||(null==t?void 0:t.has(l))||A.test(l)||O.test(l))&&(!n||n&&!n.has(l))||(s[l]=o[c].trim().replace(/\s+/g," "))}}catch(e){r={error:e}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return s}function a(e,t){var n=e.headers,i=e.body;return Object(v.__awaiter)(this,void 0,void 0,function(){var e,o,s,a,u,c,l;return Object(v.__generator)(this,function(d){switch(d.label){case 0:try{for(e=Object(v.__values)(Object.keys(n)),o=e.next();!o.done;o=e.next())if("x-amz-content-sha256"===(s=o.value).toLowerCase())return[2,n[s]]}catch(e){c={error:e}}finally{try{o&&!o.done&&(l=e.return)&&l.call(e)}finally{if(c)throw c.error}}return null!=i?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof i||ArrayBuffer.isView(i)||(f=i,"function"==typeof ArrayBuffer&&f instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(f))?((a=new t).update(i),u=r,[4,a.digest()]):[3,3];case 2:return[2,u.apply(void 0,[d.sent()])];case 3:return[2,"UNSIGNED-PAYLOAD"]}var f})})}function u(e){var t=e.headers,n=e.query,r=Object(v.__rest)(e,["headers","query"]);return Object(v.__assign)(Object(v.__assign)({},r),{headers:Object(v.__assign)({},t),query:n?c(n):void 0})}function c(e){return Object.keys(e).reduce(function(t,n){var r,i=e[n];return Object(v.__assign)(Object(v.__assign)({},t),((r={})[n]=Array.isArray(i)?Object(v.__spread)(i):i,r))},{})}function l(e){var t,n;e="function"==typeof e.clone?e.clone():u(e);try{for(var r=Object(v.__values)(Object.keys(e.headers)),i=r.next();!i.done;i=r.next()){var o=i.value;_.indexOf(o.toLowerCase())>-1&&delete e.headers[o]}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return e}function d(e){return function(e){return"number"==typeof e?new Date(1e3*e):"string"==typeof e?Number(e)?new Date(1e3*Number(e)):new Date(e):e}(e).toISOString().replace(/\.\d{3}Z$/,"Z")}function f(e){var t,n=this,r=p(e.credentials||e.credentialDefaultProvider(e)),i=e.signingEscapePath,o=void 0===i||i,s=e.systemClockOffset,a=void 0===s?e.systemClockOffset||0:s,u=e.sha256;return t=e.signer?p(e.signer):function(){return p(e.region)().then(function(t){return Object(v.__awaiter)(n,void 0,void 0,function(){return Object(v.__generator)(this,function(n){switch(n.label){case 0:return[4,e.regionInfoProvider(t)];case 1:return[2,[n.sent()||{},t]]}})})}).then(function(t){var n=Object(v.__read)(t,2),i=n[0],s=n[1],a=i.signingRegion,c=i.signingService;return e.signingRegion=e.signingRegion||a||s,e.signingName=e.signingName||c||e.serviceId,new D({credentials:r,region:e.signingRegion,service:e.signingName,sha256:u,uriEscapePath:o})})},Object(v.__assign)(Object(v.__assign)({},e),{systemClockOffset:a,signingEscapePath:o,credentials:r,signer:t})}function p(e){if("object"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e}function h(e){return function(t,n){return function(r){return Object(v.__awaiter)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,d,f;return Object(v.__generator)(this,function(p){switch(p.label){case 0:return R.a.isInstance(r.request)?"function"!=typeof e.signer?[3,2]:[4,e.signer()]:[2,t(r)];case 1:return o=p.sent(),[3,3];case 2:o=e.signer,p.label=3;case 3:return i=o,a=t,u=[Object(v.__assign)({},r)],f={},[4,i.sign(r.request,{signingDate:new Date(Date.now()+e.systemClockOffset),signingRegion:n.signing_region,signingService:n.signing_service})];case 4:return[4,a.apply(void 0,[v.__assign.apply(void 0,u.concat([(f.request=p.sent(),f)]))])];case 5:return s=p.sent(),c=s.response.headers,(l=c&&(c.date||c.Date))&&(h=d=Date.parse(l),g=e.systemClockOffset,Math.abs(U(g).getTime()-h)>=3e5&&(e.systemClockOffset=d-Date.now())),[2,s]}var h,g})})}}}n.d(t,"b",function(){return f}),n.d(t,"a",function(){return B});for(var v=n(2),g={},y={},m=0;m<256;m++){var b=m.toString(16).toLowerCase();1===b.length&&(b="0"+b),g[m]=b,y[b]=m}var w="X-Amz-Date".toLowerCase(),_=["authorization",w,"date"],S="X-Amz-Signature".toLowerCase(),E="X-Amz-Security-Token".toLowerCase(),C={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},A=/^proxy-/,O=/^sec-/,I="AWS4-HMAC-SHA256-PAYLOAD",x={},T=[],P=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,k)},k=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()},D=function(){function e(e){var t=e.applyChecksum,n=e.credentials,r=e.region,i=e.service,o=e.sha256,s=e.uriEscapePath,a=void 0===s||s;this.service=i,this.sha256=o,this.uriEscapePath=a,this.applyChecksum="boolean"!=typeof t||t,this.regionProvider=L(r),this.credentialProvider=j(n)}return e.prototype.presign=function(e,t){return void 0===t&&(t={}),Object(v.__awaiter)(this,void 0,void 0,function(){var n,r,o,c,d,f,p,h,g,y,m,b,w,_,S,E,C,A,O,I,x,T,P,k;return Object(v.__generator)(this,function(D){switch(D.label){case 0:return n=t.signingDate,r=void 0===n?new Date:n,o=t.expiresIn,c=void 0===o?3600:o,d=t.unsignableHeaders,f=t.unhoistableHeaders,p=t.signableHeaders,h=t.signingRegion,g=t.signingService,[4,this.credentialProvider()];case 1:return y=D.sent(),null==h?[3,2]:(b=h,[3,4]);case 2:return[4,this.regionProvider()];case 3:b=D.sent(),D.label=4;case 4:return m=b,w=N(r),_=w.longDate,S=w.shortDate,c>604800?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(E=i(S,m,null!=g?g:this.service),C=function(e,t){var n,r,i;void 0===t&&(t={});var o="function"==typeof e.clone?e.clone():u(e),s=o.headers,a=o.query,c=void 0===a?{}:a;try{for(var l=Object(v.__values)(Object.keys(s)),d=l.next();!d.done;d=l.next()){var f=d.value,p=f.toLowerCase();"x-amz-"!==p.substr(0,6)||(null===(i=t.unhoistableHeaders)||void 0===i?void 0:i.has(p))||(c[f]=s[f],delete s[f])}}catch(e){n={error:e}}finally{try{d&&!d.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}return Object(v.__assign)(Object(v.__assign)({},e),{headers:s,query:c})}(l(e),{unhoistableHeaders:f}),y.sessionToken&&(C.query["X-Amz-Security-Token"]=y.sessionToken),C.query["X-Amz-Algorithm"]="AWS4-HMAC-SHA256",C.query["X-Amz-Credential"]=y.accessKeyId+"/"+E,C.query["X-Amz-Date"]=_,C.query["X-Amz-Expires"]=c.toString(10),A=s(C,d,p),C.query["X-Amz-SignedHeaders"]=M(A),O=C.query,I="X-Amz-Signature",x=this.getSignature,T=[_,E,this.getSigningKey(y,m,S,g)],P=this.createCanonicalRequest,k=[C,A],[4,a(e,this.sha256)]);case 5:return[4,x.apply(this,T.concat([P.apply(this,k.concat([D.sent()]))]))];case 6:return O[I]=D.sent(),[2,C]}})})},e.prototype.sign=function(e,t){return Object(v.__awaiter)(this,void 0,void 0,function(){return Object(v.__generator)(this,function(n){return"string"==typeof e?[2,this.signString(e,t)]:e.headers&&e.payload?[2,this.signEvent(e,t)]:[2,this.signRequest(e,t)]})})},e.prototype.signEvent=function(e,t){var n=e.headers,o=e.payload,s=t.signingDate,u=void 0===s?new Date:s,c=t.priorSignature,l=t.signingRegion,d=t.signingService;return Object(v.__awaiter)(this,void 0,void 0,function(){var e,t,s,f,p,h,g,y,m,b,w;return Object(v.__generator)(this,function(v){switch(v.label){case 0:return null==l?[3,1]:(t=l,[3,3]);case 1:return[4,this.regionProvider()];case 2:t=v.sent(),v.label=3;case 3:return e=t,s=N(u),f=s.shortDate,p=s.longDate,h=i(f,e,null!=d?d:this.service),[4,a({headers:{},body:o},this.sha256)];case 4:return g=v.sent(),(y=new this.sha256).update(n),b=r,[4,y.digest()];case 5:return m=b.apply(void 0,[v.sent()]),w=[I,p,h,c,m,g].join("\n"),[2,this.signString(w,{signingDate:u,signingRegion:e,signingService:d})]}})})},e.prototype.signString=function(e,t){var n=void 0===t?{}:t,i=n.signingDate,o=void 0===i?new Date:i,s=n.signingRegion,a=n.signingService;return Object(v.__awaiter)(this,void 0,void 0,function(){var t,n,i,u,c,l,d,f;return Object(v.__generator)(this,function(p){switch(p.label){case 0:return[4,this.credentialProvider()];case 1:return t=p.sent(),null==s?[3,2]:(i=s,[3,4]);case 2:return[4,this.regionProvider()];case 3:i=p.sent(),p.label=4;case 4:return n=i,u=N(o).shortDate,d=(l=this.sha256).bind,[4,this.getSigningKey(t,n,u,a)];case 5:return(c=new(d.apply(l,[void 0,p.sent()]))).update(e),f=r,[4,c.digest()];case 6:return[2,f.apply(void 0,[p.sent()])]}})})},e.prototype.signRequest=function(e,t){var n=void 0===t?{}:t,r=n.signingDate,o=void 0===r?new Date:r,u=n.signableHeaders,c=n.unsignableHeaders,d=n.signingRegion,f=n.signingService;return Object(v.__awaiter)(this,void 0,void 0,function(){var t,n,r,p,h,g,y,m,b,_,S;return Object(v.__generator)(this,function(C){switch(C.label){case 0:return[4,this.credentialProvider()];case 1:return t=C.sent(),null==d?[3,2]:(r=d,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=C.sent(),C.label=4;case 4:return n=r,p=l(e),h=N(o),g=h.longDate,y=h.shortDate,m=i(y,n,null!=f?f:this.service),p.headers[w]=g,t.sessionToken&&(p.headers[E]=t.sessionToken),[4,a(p,this.sha256)];case 5:return b=C.sent(),!function(e,t){var n,r;e=e.toLowerCase();try{for(var i=Object(v.__values)(Object.keys(t)),o=i.next();!o.done;o=i.next())if(e===o.value.toLowerCase())return!0}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return!1}("x-amz-content-sha256",p.headers)&&this.applyChecksum&&(p.headers["x-amz-content-sha256"]=b),_=s(p,c,u),[4,this.getSignature(g,m,this.getSigningKey(t,n,y,f),this.createCanonicalRequest(p,_,b))];case 6:return S=C.sent(),p.headers.authorization="AWS4-HMAC-SHA256 Credential="+t.accessKeyId+"/"+m+", SignedHeaders="+M(_)+", Signature="+S,[2,p]}})})},e.prototype.createCanonicalRequest=function(e,t,n){var r=Object.keys(t).sort();return e.method+"\n"+this.getCanonicalPath(e)+"\n"+function(e){var t,n,r=e.query,i=void 0===r?{}:r,o=[],s={},a=function(e){if(e.toLowerCase()===S)return"continue";o.push(e);var t=i[e];"string"==typeof t?s[e]=P(e)+"="+P(t):Array.isArray(t)&&(s[e]=t.slice(0).sort().reduce(function(t,n){return t.concat([P(e)+"="+P(n)])},[]).join("&"))};try{for(var u=Object(v.__values)(Object.keys(i).sort()),c=u.next();!c.done;c=u.next())a(c.value)}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return o.map(function(e){return s[e]}).filter(function(e){return e}).join("&")}(e)+"\n"+r.map(function(e){return e+":"+t[e]}).join("\n")+"\n\n"+r.join(";")+"\n"+n},e.prototype.createStringToSign=function(e,t,n){return Object(v.__awaiter)(this,void 0,void 0,function(){var i,o;return Object(v.__generator)(this,function(s){switch(s.label){case 0:return(i=new this.sha256).update(n),[4,i.digest()];case 1:return o=s.sent(),[2,"AWS4-HMAC-SHA256\n"+e+"\n"+t+"\n"+r(o)]}})})},e.prototype.getCanonicalPath=function(e){var t=e.path;return this.uriEscapePath?"/"+encodeURIComponent(t.replace(/^\//,"")).replace(/%2F/g,"/"):t},e.prototype.getSignature=function(e,t,n,i){return Object(v.__awaiter)(this,void 0,void 0,function(){var o,s,a,u,c;return Object(v.__generator)(this,function(l){switch(l.label){case 0:return[4,this.createStringToSign(e,t,i)];case 1:return o=l.sent(),u=(a=this.sha256).bind,[4,n];case 2:return(s=new(u.apply(a,[void 0,l.sent()]))).update(o),c=r,[4,s.digest()];case 3:return[2,c.apply(void 0,[l.sent()])]}})})},e.prototype.getSigningKey=function(e,t,n,i){return function(e,t,n,i,s){return Object(v.__awaiter)(void 0,void 0,void 0,function(){var a,u,c,l,d,f,p,h,g;return Object(v.__generator)(this,function(y){switch(y.label){case 0:return[4,o(e,t.secretAccessKey,t.accessKeyId)];case 1:if(a=y.sent(),(u=n+":"+i+":"+s+":"+r(a)+":"+t.sessionToken)in x)return[2,x[u]];for(T.push(u);T.length>50;)delete x[T.shift()];c="AWS4"+t.secretAccessKey,y.label=2;case 2:y.trys.push([2,7,8,9]),l=Object(v.__values)([n,i,s,"aws4_request"]),d=l.next(),y.label=3;case 3:return d.done?[3,6]:(f=d.value,[4,o(e,c,f)]);case 4:c=y.sent(),y.label=5;case 5:return d=l.next(),[3,3];case 6:return[3,9];case 7:return p=y.sent(),h={error:p},[3,9];case 8:try{d&&!d.done&&(g=l.return)&&g.call(l)}finally{if(h)throw h.error}return[7];case 9:return[2,x[u]=c]}})})}(this.sha256,e,n,t,i||this.service)},e}(),N=function(e){var t=d(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.substr(0,8)}},M=function(e){return Object.keys(e).sort().join(";")},L=function(e){if("string"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e},j=function(e){if("object"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e},R=n(3),U=function(e){return new Date(Date.now()+e)},F={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},B=function(e){return{applyToStack:function(t){t.addRelativeTo(h(e),F)}}}},function(e,t,n){"use strict";var r;n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i}),function(e){e.ENV="env",e.CONFIG="shared config entry"}(r||(r={}));var i=function(e,t,n){if(t in e){if("true"===e[t])return!0;if("false"===e[t])return!1;throw new Error("Cannot load ".concat(n,' "').concat(t,'". Expected "true" or "false", got ').concat(e[t],"."))}}},function(e,t,n){"use strict";var r,i;n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i}),function(e){e.CONNECTION_CLOSED="Connection closed",e.CONNECTION_FAILED="Connection failed",e.REALTIME_SUBSCRIPTION_INIT_ERROR="AppSync Realtime subscription init error",e.SUBSCRIPTION_ACK="Subscription ack",e.TIMEOUT_DISCONNECT="Timeout disconnect"}(r||(r={})),function(e){e.Connected="Connected",e.ConnectedPendingNetwork="ConnectedPendingNetwork",e.ConnectionDisrupted="ConnectionDisrupted",e.ConnectionDisruptedPendingNetwork="ConnectionDisruptedPendingNetwork",e.Connecting="Connecting",e.ConnectedPendingDisconnect="ConnectedPendingDisconnect",e.Disconnected="Disconnected",e.ConnectedPendingKeepAlive="ConnectedPendingKeepAlive"}(i||(i={}))},function(e,t,n){var r=n(220),i=n(221),o=i;o.v1=r,o.v4=i,e.exports=o},function(e,t,n){"use strict";var r;n.d(t,"a",function(){return r}),function(e){e.DEFAULT_MSG="Authentication Error",e.EMPTY_EMAIL="Email cannot be empty",e.EMPTY_PHONE="Phone number cannot be empty",e.EMPTY_USERNAME="Username cannot be empty",e.INVALID_USERNAME="The username should either be a string or one of the sign in types",e.EMPTY_PASSWORD="Password cannot be empty",e.EMPTY_CODE="Confirmation code cannot be empty",e.SIGN_UP_ERROR="Error creating account",e.NO_MFA="No valid MFA method provided",e.INVALID_MFA="Invalid MFA type",e.EMPTY_CHALLENGE="Challenge response cannot be empty",e.NO_USER_SESSION="Failed to get the session because the user is empty",e.NETWORK_ERROR="Network Error",e.DEVICE_CONFIG="Device tracking has not been configured in this User Pool",e.AUTOSIGNIN_ERROR="Please use your credentials to sign in"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"b",function(){return l}),n.d(t,"c",function(){return d}),n.d(t,"e",function(){return f}),n.d(t,"f",function(){return p}),n.d(t,"i",function(){return h}),n.d(t,"a",function(){return g}),n.d(t,"d",function(){return y}),n.d(t,"g",function(){return m}),n.d(t,"h",function(){return b}),n.d(t,"n",function(){return _}),n.d(t,"o",function(){return S}),n.d(t,"j",function(){return E}),n.d(t,"k",function(){return C}),n.d(t,"l",function(){return A}),n.d(t,"m",function(){return O});var r,i,o,s,a=n(0),u=n(5),c=n(33),l=function(e){function t(n){var r=e.call(this,Object(a.a)({name:"BadRequestException",$fault:"client"},n))||this;return r.name="BadRequestException",r.$fault="client",Object.setPrototypeOf(r,t.prototype),r}return Object(a.c)(t,e),t}(c.a),d=function(e){function t(n){var r=e.call(this,Object(a.a)({name:"ConflictException",$fault:"client"},n))||this;return r.name="ConflictException",r.$fault="client",Object.setPrototypeOf(r,t.prototype),r}return Object(a.c)(t,e),t}(c.a),f=function(e){function t(n){var r=e.call(this,Object(a.a)({name:"InternalFailureException",$fault:"server"},n))||this;return r.name="InternalFailureException",r.$fault="server",Object.setPrototypeOf(r,t.prototype),r}return Object(a.c)(t,e),t}(c.a),p=function(e){function t(n){var r=e.call(this,Object(a.a)({name:"LimitExceededException",$fault:"client"},n))||this;return r.name="LimitExceededException",r.$fault="client",Object.setPrototypeOf(r,t.prototype),r.retryAfterSeconds=n.retryAfterSeconds,r}return Object(a.c)(t,e),t}(c.a),h=function(e){function t(n){var r=e.call(this,Object(a.a)({name:"NotFoundException",$fault:"client"},n))||this;return r.name="NotFoundException",r.$fault="client",Object.setPrototypeOf(r,t.prototype),r}return Object(a.c)(t,e),t}(c.a);!function(e){e.FAILED="Failed",e.FULFILLED="Fulfilled",e.READY_FOR_FULFILLMENT="ReadyForFulfillment"}(r||(r={})),function(e){e.COMPOSITE="Composite",e.CUSTOM_PAYLOAD="CustomPayload",e.PLAIN_TEXT="PlainText",e.SSML="SSML"}(i||(i={})),function(e){e.CLOSE="Close",e.CONFIRM_INTENT="ConfirmIntent",e.DELEGATE="Delegate",e.ELICIT_INTENT="ElicitIntent",e.ELICIT_SLOT="ElicitSlot"}(o||(o={})),function(e){e.CONFIRMED="Confirmed",e.DENIED="Denied",e.NONE="None"}(s||(s={}));var v,g=function(e){function t(n){var r=e.call(this,Object(a.a)({name:"BadGatewayException",$fault:"server"},n))||this;return r.name="BadGatewayException",r.$fault="server",Object.setPrototypeOf(r,t.prototype),r.Message=n.Message,r}return Object(a.c)(t,e),t}(c.a),y=function(e){function t(n){var r=e.call(this,Object(a.a)({name:"DependencyFailedException",$fault:"client"},n))||this;return r.name="DependencyFailedException",r.$fault="client",Object.setPrototypeOf(r,t.prototype),r.Message=n.Message,r}return Object(a.c)(t,e),t}(c.a),m=function(e){function t(n){var r=e.call(this,Object(a.a)({name:"LoopDetectedException",$fault:"server"},n))||this;return r.name="LoopDetectedException",r.$fault="server",Object.setPrototypeOf(r,t.prototype),r.Message=n.Message,r}return Object(a.c)(t,e),t}(c.a),b=function(e){function t(n){var r=e.call(this,Object(a.a)({name:"NotAcceptableException",$fault:"client"},n))||this;return r.name="NotAcceptableException",r.$fault="client",Object.setPrototypeOf(r,t.prototype),r}return Object(a.c)(t,e),t}(c.a);!function(e){e.CONFIRM_INTENT="ConfirmIntent",e.ELICIT_INTENT="ElicitIntent",e.ELICIT_SLOT="ElicitSlot",e.FAILED="Failed",e.FULFILLED="Fulfilled",e.READY_FOR_FULFILLMENT="ReadyForFulfillment"}(v||(v={}));var w,_=function(e){function t(n){var r=e.call(this,Object(a.a)({name:"RequestTimeoutException",$fault:"client"},n))||this;return r.name="RequestTimeoutException",r.$fault="client",Object.setPrototypeOf(r,t.prototype),r}return Object(a.c)(t,e),t}(c.a),S=function(e){function t(n){var r=e.call(this,Object(a.a)({name:"UnsupportedMediaTypeException",$fault:"client"},n))||this;return r.name="UnsupportedMediaTypeException",r.$fault="client",Object.setPrototypeOf(r,t.prototype),r}return Object(a.c)(t,e),t}(c.a);!function(e){e.GENERIC="application/vnd.amazonaws.card.generic"}(w||(w={}));var E=function(e){return Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)({},e),e.sessionAttributes&&{sessionAttributes:u.d}),e.requestAttributes&&{requestAttributes:u.d}),e.activeContexts&&{activeContexts:u.d})},C=function(e){return Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)({},e),e.message&&{message:u.d}),e.encodedMessage&&{encodedMessage:u.d}),e.encodedInputTranscript&&{encodedInputTranscript:u.d}),e.activeContexts&&{activeContexts:u.d})},A=function(e){return Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)({},e),e.sessionAttributes&&{sessionAttributes:u.d}),e.requestAttributes&&{requestAttributes:u.d}),e.inputText&&{inputText:u.d}),e.activeContexts&&{activeContexts:u.d})},O=function(e){return Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)({},e),e.alternativeIntents&&{alternativeIntents:e.alternativeIntents.map(function(e){return function(e){return Object(a.a)(Object(a.a)({},e),e.slots&&{slots:u.d})}(e)})}),e.slots&&{slots:u.d}),e.sessionAttributes&&{sessionAttributes:u.d}),e.message&&{message:u.d}),e.activeContexts&&{activeContexts:u.d})}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(0),i=function(e){function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r}return Object(r.c)(t,e),t}(n(5).e)},function(e,t,n){"use strict";(function(e){n.d(t,"d",function(){return l}),n.d(t,"c",function(){return d}),n.d(t,"b",function(){return f}),n.d(t,"a",function(){return g});var r=[{type:"text/plain",ext:"txt"},{type:"text/html",ext:"html"},{type:"text/javascript",ext:"js"},{type:"text/css",ext:"css"},{type:"text/csv",ext:"csv"},{type:"text/yaml",ext:"yml"},{type:"text/yaml",ext:"yaml"},{type:"text/calendar",ext:"ics"},{type:"text/calendar",ext:"ical"},{type:"image/apng",ext:"apng"},{type:"image/bmp",ext:"bmp"},{type:"image/gif",ext:"gif"},{type:"image/x-icon",ext:"ico"},{type:"image/x-icon",ext:"cur"},{type:"image/jpeg",ext:"jpg"},{type:"image/jpeg",ext:"jpeg"},{type:"image/jpeg",ext:"jfif"},{type:"image/jpeg",ext:"pjp"},{type:"image/jpeg",ext:"pjpeg"},{type:"image/png",ext:"png"},{type:"image/svg+xml",ext:"svg"},{type:"image/tiff",ext:"tif"},{type:"image/tiff",ext:"tiff"},{type:"image/webp",ext:"webp"},{type:"application/json",ext:"json"},{type:"application/xml",ext:"xml"},{type:"application/x-sh",ext:"sh"},{type:"application/zip",ext:"zip"},{type:"application/x-rar-compressed",ext:"rar"},{type:"application/x-tar",ext:"tar"},{type:"application/x-bzip",ext:"bz"},{type:"application/x-bzip2",ext:"bz2"},{type:"application/pdf",ext:"pdf"},{type:"application/java-archive",ext:"jar"},{type:"application/msword",ext:"doc"},{type:"application/vnd.ms-excel",ext:"xls"},{type:"application/vnd.ms-excel",ext:"xlsx"},{type:"message/rfc822",ext:"eml"}],i=function(e){return void 0===e&&(e={}),0===Object.keys(e).length},o=function(e,t,n){if(!e||!e.sort)return!1;var r=n&&"desc"===n?-1:1;return e.sort(function(e,n){var i=e[t],o=n[t];return void 0===o?void 0===i?0:1*r:void 0===i||i<o?-1*r:i>o?1*r:0}),!0},s=function(e,t){var n=Object.assign({},e);return t&&("string"==typeof t?delete n[t]:t.forEach(function(e){delete n[e]})),n},a=function(e,t){void 0===t&&(t="application/octet-stream");var n=e.toLowerCase(),i=r.filter(function(e){return n.endsWith("."+e.ext)});return i.length>0?i[0].type:t},u=function(e){var t=e.toLowerCase();return!!t.startsWith("text/")||"application/json"===t||"application/xml"===t||"application/sh"===t},c=function(){for(var e="",t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=32;n>0;n-=1)e+=t[Math.floor(Math.random()*t.length)];return e},l=function(e){if(e.isResolved)return e;var t=!0,n=!1,r=!1,i=e.then(function(e){return r=!0,t=!1,e},function(e){throw n=!0,t=!1,e});return i.isFullfilled=function(){return r},i.isPending=function(){return t},i.isRejected=function(){return n},i},d=function(){if("undefined"==typeof self)return!1;var e=self;return void 0!==e.WorkerGlobalScope&&self instanceof e.WorkerGlobalScope
},f=function(){return{isBrowser:"undefined"!=typeof window&&void 0!==window.document,isNode:void 0!==e&&null!=e.versions&&null!=e.versions.node}},p=function e(t,n,r){if(void 0===n&&(n=[]),void 0===r&&(r=[]),!v(t))return t;var i={};for(var o in t)t.hasOwnProperty(o)&&(i[n.includes(o)?o:o[0].toLowerCase()+o.slice(1)]=r.includes(o)?t[o]:e(t[o],n,r));return i},h=function e(t,n,r){if(void 0===n&&(n=[]),void 0===r&&(r=[]),!v(t))return t;var i={};for(var o in t)t.hasOwnProperty(o)&&(i[n.includes(o)?o:o[0].toUpperCase()+o.slice(1)]=r.includes(o)?t[o]:e(t[o],n,r));return i},v=function(e){return!(!(e instanceof Object)||e instanceof Array||e instanceof Function||e instanceof Number||e instanceof String||e instanceof Boolean)},g=function(){function e(){}return e.isEmpty=i,e.sortByField=o,e.objectLessAttributes=s,e.filenameToContentType=a,e.isTextFile=u,e.generateRandomString=c,e.makeQuerablePromise=l,e.isWebWorker=d,e.browserOrNode=f,e.transferKeyToLowerCase=p,e.transferKeyToUpperCase=h,e.isStrictObject=v,e}()}).call(this,n(74))},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return s}),n.d(t,"c",function(){return i}),n.d(t,"d",function(){return o}),n.d(t,"e",function(){return a}),n.d(t,"f",function(){return u}),n.d(t,"g",function(){return c});var r=26,i=1048576,o=256e3,s="Logging",a="AWSCloudWatch",u="No credentials",c=["ResourceNotFoundException","InvalidSequenceTokenException"]},function(e,t,n){e.exports=n(325)},function(e,t,n){"use strict";var r=n(59);n(25),t.a=r.a},function(e,t,n){(function(t){var r;e.exports=(r=r||function(e,r){var i;if("undefined"!=typeof window&&window.crypto&&(i=window.crypto),"undefined"!=typeof self&&self.crypto&&(i=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(i=globalThis.crypto),!i&&"undefined"!=typeof window&&window.msCrypto&&(i=window.msCrypto),!i&&void 0!==t&&t.crypto&&(i=t.crypto),!i)try{i=n(211)}catch(e){}var o=function(){if(i){if("function"==typeof i.getRandomValues)try{return i.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof i.randomBytes)try{return i.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},s=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),a={},u=a.lib={},c=u.Base={extend:function(e){var t=s(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},l=u.WordArray=c.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||f).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var s=n[o>>>2]>>>24-o%4*8&255;t[r+o>>>2]|=s<<24-(r+o)%4*8}else for(var a=0;a<i;a+=4)t[r+a>>>2]=n[a>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=c.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(o());return new l.init(t,e)}}),d=a.enc={},f=d.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new l.init(n,t/2)}},p=d.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new l.init(n,t)}},h=d.Utf8={stringify:function(e){try{return decodeURIComponent(escape(p.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return p.parse(unescape(encodeURIComponent(e)))}},v=u.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=h.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,r=this._data,i=r.words,o=r.sigBytes,s=this.blockSize,a=o/(4*s),u=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*s,c=e.min(4*u,o);if(u){for(var d=0;d<u;d+=s)this._doProcessBlock(i,d);n=i.splice(0,u),r.sigBytes-=c}return new l.init(n,c)},clone:function(){var e=c.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),g=(u.Hasher=v.extend({cfg:c.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){v.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new g.HMAC.init(e,n).finalize(t)}}}),a.algo={});return a}(Math),r)}).call(this,n(60))},function(e,t,n){var r=n(141),i=n(143),o=n(144),s=n(61),a=n(145),u=n(108),c=n(142),l=n(109),d=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(a(e)&&(s(e)||"string"==typeof e||"function"==typeof e.splice||u(e)||l(e)||o(e)))return!e.length;var t=i(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(c(e))return!r(e).length;for(var n in e)if(d.call(e,n))return!1;return!0}},function(e,t,n){"use strict";function r(e){return Array.isArray(e)}function i(e){return void 0===e}function o(e){return"[object ArrayBuffer]"===d.call(e)}function s(e){return null!==e&&"object"==typeof e}function a(e){if("[object Object]"!==d.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function u(e){return"[object Function]"===d.call(e)}function c(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),r(e))for(var n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}var l=n(148),d=Object.prototype.toString;e.exports={isArray:r,isArrayBuffer:o,isBuffer:function(e){return null!==e&&!i(e)&&null!==e.constructor&&!i(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"[object FormData]"===d.call(e)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&o(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isPlainObject:a,isUndefined:i,isDate:function(e){return"[object Date]"===d.call(e)},isFile:function(e){return"[object File]"===d.call(e)},isBlob:function(e){return"[object Blob]"===d.call(e)},isFunction:u,isStream:function(e){return s(e)&&u(e.pipe)},isURLSearchParams:function(e){return"[object URLSearchParams]"===d.call(e)},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:c,merge:function e(){function t(t,i){a(n[i])&&a(t)?n[i]=e(n[i],t):a(t)?n[i]=e({},t):r(t)?n[i]=t.slice():n[i]=t}for(var n={},i=0,o=arguments.length;i<o;i++)c(arguments[i],t);return n},extend:function(e,t,n){return c(t,function(t,r){e[r]=n&&"function"==typeof t?l(t,n):t}),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(2),i=n(3),o={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},s=function(e){return{applyToStack:function(t){t.add(function(e){var t=this;return function(n){return function(o){return Object(r.__awaiter)(t,void 0,void 0,function(){var t,s,a,u,c;return Object(r.__generator)(this,function(l){return t=o.request,i.a.isInstance(t)&&(s=t.body,a=t.headers,s&&-1===Object.keys(a).map(function(e){return e.toLowerCase()}).indexOf("content-length")&&void 0!==(u=e(s))&&(t.headers=Object(r.__assign)(Object(r.__assign)({},t.headers),((c={})["content-length"]=String(u),c)))),[2,n(Object(r.__assign)(Object(r.__assign)({},o),{request:t}))]})})}}}(e.bodyLengthChecker),o)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebCryptoSha256=t.Ie11Sha256=void 0,(0,n(2).__exportStar)(n(222),t);var r=n(129);Object.defineProperty(t,"Ie11Sha256",{enumerable:!0,get:function(){return r.Sha256}});var i=n(131);Object.defineProperty(t,"WebCryptoSha256",{enumerable:!0,get:function(){return i.Sha256}})},function(e,t,n){"use strict";function r(e){if("string"==typeof e){for(var t=e.length,n=t-1;n>=0;n--){var r=e.charCodeAt(n);r>127&&r<=2047?t++:r>2047&&r<=65535&&(t+=2)}return t}return"number"==typeof e.byteLength?e.byteLength:"number"==typeof e.size?e.size:void 0}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(2),i=n(58),o=n.n(i),s=function(e){var t=e.serviceId,n=e.clientVersion;return function(){return Object(r.__awaiter)(void 0,void 0,void 0,function(){var e,i,s,a,u,c,l,d,f;return Object(r.__generator)(this,function(r){return e=(null===(s=null===window||void 0===window?void 0:window.navigator)||void 0===s?void 0:s.userAgent)?o.a.parse(window.navigator.userAgent):void 0,i=[["aws-sdk-js",n],["os/"+((null===(a=null==e?void 0:e.os)||void 0===a?void 0:a.name)||"other"),null===(u=null==e?void 0:e.os)||void 0===u?void 0:u.version],["lang/js"],["md/browser",(null!==(l=null===(c=null==e?void 0:e.browser)||void 0===c?void 0:c.name)&&void 0!==l?l:"unknown")+"_"+(null!==(f=null===(d=null==e?void 0:e.browser)||void 0===d?void 0:d.version)&&void 0!==f?f:"unknown")]],t&&i.push(["api/"+t,n]),[2,i]})})}}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e){return function(){return Promise.reject(e)}}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(2),i={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},o=function(e){return{applyToStack:function(e){e.add(function(e,t){return function(n){return Object(r.__awaiter)(void 0,void 0,void 0,function(){var i,o,s,a,u,c,l,d,f;return Object(r.__generator)(this,function(p){switch(p.label){case 0:return i=t.clientName,o=t.commandName,s=t.inputFilterSensitiveLog,a=t.logger,u=t.outputFilterSensitiveLog,[4,e(n)];case 1:return c=p.sent(),a?("function"==typeof a.info&&(l=c.output,d=l.$metadata,f=Object(r.__rest)(l,["$metadata"]),a.info({clientName:i,commandName:o,input:s(n.input),output:u(f),metadata:d})),[2,c]):[2,c]}})})}},i)}}}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(2),i=function(e){var t,n=new URL(e),i=n.hostname,o=n.pathname,s=n.port,a=n.protocol,u=n.search;return u&&(t=function(e){var t,n,i={};if(e=e.replace(/^\?/,""))try{for(var o=Object(r.__values)(e.split("&")),s=o.next();!s.done;s=o.next()){var a=s.value,u=Object(r.__read)(a.split("="),2),c=u[0],l=u[1],d=void 0===l?null:l;c=decodeURIComponent(c),d&&(d=decodeURIComponent(d)),c in i?Array.isArray(i[c])?i[c].push(d):i[c]=[i[c],d]:i[c]=d}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i}(u)),{hostname:i,port:s?parseInt(s):void 0,protocol:a,path:o,query:t}}},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r,i=n(35),o=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},s=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},a=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(s(arguments[t]));return e},u={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5};!function(e){e.DEBUG="DEBUG",e.ERROR="ERROR",e.INFO="INFO",e.WARN="WARN",e.VERBOSE="VERBOSE"}(r||(r={}));var c=function(){function e(e,t){void 0===t&&(t=r.WARN),this.name=e,this.level=t,this._pluggables=[]}return e.prototype._padding=function(e){return e<10?"0"+e:""+e},e.prototype._ts=function(){var e=new Date;return[this._padding(e.getMinutes()),this._padding(e.getSeconds())].join(":")+"."+e.getMilliseconds()},e.prototype.configure=function(e){return e?(this._config=e,this._config):this._config},e.prototype._log=function(t){for(var n,i,s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];var c=this.level;e.LOG_LEVEL&&(c=e.LOG_LEVEL),"undefined"!=typeof window&&window.LOG_LEVEL&&(c=window.LOG_LEVEL);var l=u[c];if(u[t]>=l){var d=console.log.bind(console);t===r.ERROR&&console.error&&(d=console.error.bind(console)),t===r.WARN&&console.warn&&(d=console.warn.bind(console));var f="["+t+"] "+this._ts()+" "+this.name,p="";if(1===s.length&&"string"==typeof s[0])d(p=f+" - "+s[0]);else if(1===s.length)p=f+" "+s[0],d(f,s[0]);else if("string"==typeof s[0]){var h=s.slice(1);1===h.length&&(h=h[0]),p=f+" - "+s[0]+" "+h,d(f+" - "+s[0],h)}else p=f+" "+s,d(f,s);try{for(var v=o(this._pluggables),g=v.next();!g.done;g=v.next()){var y=g.value,m={message:p,timestamp:Date.now()};y.pushLogs([m])}}catch(e){n={error:e}}finally{try{g&&!g.done&&(i=v.return)&&i.call(v)}finally{if(n)throw n.error}}}},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,a([r.INFO],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,a([r.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,a([r.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,a([r.ERROR],e))},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,a([r.DEBUG],e))},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,a([r.VERBOSE],e))},e.prototype.addPluggable=function(e){e&&e.getCategoryName()===i.b&&(this._pluggables.push(e),e.configure(this._config))},e.prototype.listPluggables=function(){return this._pluggables},e.LOG_LEVEL=null,e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i});var r={userAgent:"aws-amplify/4.7.11 js",product:"",navigator:null,isReactNative:!1};"undefined"!=typeof navigator&&navigator.product&&("ReactNative"===(r.product=navigator.product||"",r.navigator=navigator||null,navigator.product)?(r.userAgent="aws-amplify/4.7.11 react-native",r.isReactNative=!0):(r.userAgent="aws-amplify/4.7.11 js",r.isReactNative=!1));var i=function(e){return""+r.userAgent+(e||"")}},function(e,t,n){"use strict";function r(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})}function i(e,t){function n(n){return function(u){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,n[0]&&(a=0)),a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,u])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s}function o(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function s(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r}),n.d(t,"c",function(){return i}),n.d(t,"d",function(){return o}),n.d(t,"e",function(){return s});var a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.create,Object.create},,function(e,t,n){"use strict";var r=n(62);t.a=r.a},function(e,t,n){"use strict";function r(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(e){return"'"+e+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function i(e){return!!e&&!!e[W]}function o(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===H}(e)||Array.isArray(e)||!!e[G]||!!e.constructor[G]||f(e)||p(e))}function s(e,t,n){void 0===n&&(n=!1),0===a(e)?(n?Object.keys:J)(e).forEach(function(r){n&&"symbol"==typeof r||t(r,e[r],e)}):e.forEach(function(n,r){return t(r,n,e)})}function a(e){var t=e[W];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:f(e)?2:p(e)?3:0}function u(e,t){return 2===a(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function c(e,t){return 2===a(e)?e.get(t):e[t]}function l(e,t,n){var r=a(e);2===r?e.set(t,n):3===r?(e.delete(t),e.add(n)):e[t]=n}function d(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function f(e){return q&&e instanceof Map}function p(e){return K&&e instanceof Set}function h(e){return e.o||e.t}function v(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Y(e);delete t[W];for(var n=J(t),r=0;r<n.length;r++){var i=n[r],o=t[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function g(e,t){return void 0===t&&(t=!1),m(e)||i(e)||!o(e)||(a(e)>1&&(e.set=e.add=e.clear=e.delete=y),Object.freeze(e),t&&s(e,function(e,t){return g(t,!0)},!0)),e}function y(){r(2)}function m(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function b(e){var t=Z[e];return t||r(18,e),t}function w(e,t){Z[e]||(Z[e]=t)}function _(){return B}function S(e,t){t&&(b("Patches"),e.u=[],e.s=[],e.v=t)}function E(e){C(e),e.p.forEach(O),e.p=null}function C(e){e===B&&(B=e.l)}function A(e){return B={p:[],l:B,h:e,m:!0,_:0}}function O(e){var t=e[W];0===t.i||1===t.i?t.j():t.O=!0}function I(e,t){t._=t.p.length;var n=t.p[0],i=void 0!==e&&e!==n;return t.h.g||b("ES5").S(t,e,i),i?(n[W].P&&(E(t),r(4)),o(e)&&(e=x(t,e),t.l||P(t,e)),t.u&&b("Patches").M(n[W],e,t.u,t.s)):e=x(t,n,[]),E(t),t.u&&t.v(t.u,t.s),e!==V?e:void 0}function x(e,t,n){if(m(t))return t;var r=t[W];if(!r)return s(t,function(i,o){return T(e,r,t,i,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return P(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=v(r.k):r.o;s(3===r.i?new Set(i):i,function(t,o){return T(e,r,i,t,o,n)}),P(e,i,!1),n&&e.u&&b("Patches").R(r,n,e.u,e.s)}return r.o}function T(e,t,n,r,s,a){if(i(s)){var c=x(e,s,a&&t&&3!==t.i&&!u(t.D,r)?a.concat(r):void 0);if(l(n,r,c),!i(c))return;e.m=!1}if(o(s)&&!m(s)){if(!e.h.F&&e._<1)return;x(e,s),t&&t.A.l||P(e,s)}}function P(e,t,n){void 0===n&&(n=!1),e.h.F&&e.m&&g(t,n)}function k(e,t){var n=e[W];return(n?h(n):e)[t]}function D(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function N(e){e.P||(e.P=!0,e.l&&N(e.l))}function M(e){e.o||(e.o=v(e.t))}function L(e,t,n){var r=f(t)?b("MapSet").N(t,n):p(t)?b("MapSet").T(t,n):e.g?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:_(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,o=X;n&&(i=[r],o=Q);var s=Proxy.revocable(i,o),a=s.revoke,u=s.proxy;return r.k=u,r.j=a,u}(t,n):b("ES5").J(t,n);return(n?n.A:_()).p.push(r),r}function j(e){return i(e)||r(22,e),function e(t){if(!o(t))return t;var n,r=t[W],i=a(t);if(r){if(!r.P&&(r.i<4||!b("ES5").K(r)))return r.t;r.I=!0,n=R(t,i),r.I=!1}else n=R(t,i);return s(n,function(t,i){r&&c(r.t,t)===i||l(n,t,e(i))}),3===i?new Set(n):n}(e)}function R(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return v(e)}function U(){function e(t){if(!o(t))return t;if(Array.isArray(t))return t.map(e);if(f(t))return new Map(Array.from(t.entries()).map(function(t){return[t[0],e(t[1])]}));if(p(t))return new Set(Array.from(t).map(e));var n=Object.create(Object.getPrototypeOf(t));for(var r in t)n[r]=e(t[r]);return u(t,G)&&(n[G]=t[G]),n}function t(t){return i(t)?e(t):t}var n="add";w("Patches",{$:function(t,i){return i.forEach(function(i){for(var o=i.path,s=i.op,u=t,l=0;l<o.length-1;l++){var d=a(u),f=""+o[l];0!==d&&1!==d||"__proto__"!==f&&"constructor"!==f||r(24),"function"==typeof u&&"prototype"===f&&r(24),"object"!=typeof(u=c(u,f))&&r(15,o.join("/"))}var p=a(u),h=e(i.value),v=o[o.length-1];switch(s){case"replace":switch(p){case 2:return u.set(v,h);case 3:r(16);default:return u[v]=h}case n:switch(p){case 1:return u.splice(v,0,h);case 2:return u.set(v,h);case 3:return u.add(h);default:return u[v]=h}case"remove":switch(p){case 1:return u.splice(v,1);case 2:return u.delete(v);case 3:return u.delete(i.value);default:return delete u[v]}default:r(17,s)}}),t},R:function(e,r,i,o){switch(e.i){case 0:case 4:case 2:return function(e,r,i,o){var a=e.t,l=e.o;s(e.D,function(e,s){var d=c(a,e),f=c(l,e),p=s?u(a,e)?"replace":n:"remove";if(d!==f||"replace"!==p){var h=r.concat(e);i.push("remove"===p?{op:p,path:h}:{op:p,path:h,value:f}),o.push(p===n?{op:"remove",path:h}:"remove"===p?{op:n,path:h,value:t(d)}:{op:"replace",path:h,value:t(d)})}})}(e,r,i,o);case 5:case 1:return function(e,r,i,o){var s=e.t,a=e.D,u=e.o;if(u.length<s.length){var c=[u,s];s=c[0],u=c[1];var l=[o,i];i=l[0],o=l[1]}for(var d=0;d<s.length;d++)if(a[d]&&u[d]!==s[d]){var f=r.concat([d]);i.push({op:"replace",path:f,value:t(u[d])}),o.push({op:"replace",path:f,value:t(s[d])})}for(var p=s.length;p<u.length;p++){var h=r.concat([p]);i.push({op:n,path:h,value:t(u[p])})}s.length<u.length&&o.push({op:"replace",path:r.concat(["length"]),value:s.length})}(e,r,i,o);case 3:return function(e,t,r,i){var o=e.t,s=e.o,a=0;o.forEach(function(e){if(!s.has(e)){var o=t.concat([a]);r.push({op:"remove",path:o,value:e}),i.unshift({op:n,path:o,value:e})}a++}),a=0,s.forEach(function(e){if(!o.has(e)){var s=t.concat([a]);r.push({op:n,path:s,value:e}),i.unshift({op:"remove",path:s,value:e})}a++})}(e,r,i,o)}},M:function(e,t,n,r){n.push({op:"replace",path:[],value:t===V?void 0:t}),r.push({op:"replace",path:[],value:e.t})}})}n.d(t,"a",function(){return re}),n.d(t,"b",function(){return U}),n.d(t,"c",function(){return G}),n.d(t,"d",function(){return te}),n.d(t,"e",function(){return ne});var F,B,z="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),q="undefined"!=typeof Map,K="undefined"!=typeof Set,$="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,V=z?Symbol.for("immer-nothing"):((F={})["immer-nothing"]=!0,F),G=z?Symbol.for("immer-draftable"):"__$immer_draftable",W=z?Symbol.for("immer-state"):"__$immer_state",H=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),J="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Y=Object.getOwnPropertyDescriptors||function(e){var t={};return J(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},Z={},X={get:function(e,t){if(t===W)return e;var n=h(e);if(!u(n,t))return function(e,t,n){var r,i=D(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!o(r)?r:r===k(e.t,t)?(M(e),e.o[t]=L(e.A.h,r,e)):r},has:function(e,t){return t in h(e)},ownKeys:function(e){return Reflect.ownKeys(h(e))},set:function(e,t,n){var r=D(h(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=k(h(e),t),o=null==i?void 0:i[W];if(o&&o.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(d(n,i)&&(void 0!==n||u(e.t,t)))return!0;M(e),N(e)}return e.o[t]===n&&"number"!=typeof n&&(void 0!==n||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==k(e.t,t)||t in e.t?(e.D[t]=!1,M(e),N(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=h(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){r(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){r(12)}},Q={};s(X,function(e,t){Q[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Q.deleteProperty=function(e,t){return X.deleteProperty.call(this,e[0],t)},Q.set=function(e,t,n){return X.set.call(this,e[0],t,n,e[0])};var ee=new(function(){function e(e){var t=this;this.g=$,this.F=!0,this.produce=function(e,n,i){if("function"==typeof e&&"function"!=typeof n){var s=n;n=e;var a=t;return function(e){var t=this;void 0===e&&(e=s);for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return a.produce(e,function(e){var r;return(r=n).call.apply(r,[t,e].concat(i))})}}var u;if("function"!=typeof n&&r(6),void 0!==i&&"function"!=typeof i&&r(7),o(e)){var c=A(t),l=L(t,e,void 0),d=!0;try{u=n(l),d=!1}finally{d?E(c):C(c)}return"undefined"!=typeof Promise&&u instanceof Promise?u.then(function(e){return S(c,i),I(e,c)},function(e){throw E(c),e}):(S(c,i),I(u,c))}if(!e||"object"!=typeof e){if((u=n(e))===V)return;return void 0===u&&(u=e),t.F&&g(u,!0),u}r(21,e)},this.produceWithPatches=function(e,n){return"function"==typeof e?function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return t.produceWithPatches(n,function(t){return e.apply(void 0,[t].concat(i))})}:[t.produce(e,n,function(e,t){r=e,i=t}),r,i];var r,i},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){o(e)||r(8),i(e)&&(e=j(e));var t=A(this),n=L(this,e,void 0);return n[W].C=!0,C(t),n},t.finishDraft=function(e,t){var n=(e&&e[W]).A;return S(n,t),I(void 0,n)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!$&&r(20),this.g=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}var o=b("Patches").$;return i(e)?o(e,t):this.produce(e,function(e){return o(e,t.slice(n+1))})},e}()),te=ee.produce,ne=(ee.produceWithPatches.bind(ee),ee.setAutoFreeze.bind(ee)),re=(ee.setUseProxies.bind(ee),ee.applyPatches.bind(ee));ee.createDraft.bind(ee),ee.finishDraft.bind(ee)},function(e,t,n){"use strict";function r(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:i}n.r(t),n.d(t,"locateWindow",function(){return r});const i={}},function(e,t,n){var r=n(136),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},function(e,t,n){"use strict";const r="[:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",i=new RegExp("^"+r+"$");t.isExist=function(e){return void 0!==e},t.isEmptyObject=function(e){return 0===Object.keys(e).length},t.merge=function(e,t,n){if(t){const r=Object.keys(t),i=r.length;for(let o=0;o<i;o++)e[r[o]]="strict"===n?[t[r[o]]]:t[r[o]]}},t.getValue=function(e){return t.isExist(e)?e:""},t.buildOptions=function(e,t,n){let r={};if(!e)return t;for(let i=0;i<n.length;i++)void 0!==e[n[i]]?r[n[i]]=e[n[i]]:r[n[i]]=t[n[i]];return r},t.isTagNameInArrayMode=function(e,t,n){return!1!==t&&(t instanceof RegExp?t.test(e):"function"==typeof t?!!t(e,n):"strict"===t)},t.isName=function(e){return!(null==i.exec(e))},t.getAllMatches=function(e,t){const n=[];let r=t.exec(e);for(;r;){const i=[];i.startIndex=t.lastIndex-r[0].length;const o=r.length;for(let e=0;e<o;e++)i.push(r[e]);n.push(i),r=t.exec(e)}return n},t.nameRegexp=r},function(e,t,n){"use strict";var r;n.d(t,"a",function(){return r}),function(e){e.NO_API_KEY="No api-key configured",e.NO_CURRENT_USER="No current user",e.NO_CREDENTIALS="No credentials",e.NO_FEDERATED_JWT="No federated jwt",e.NO_AUTH_TOKEN="No auth token specified"}(r||(r={}))},function(e,t,n){e.exports=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(t){return e[t]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=90)}({17:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(18),i=function(){function e(){}return e.getFirstMatch=function(e,t){var n=t.match(e);return n&&n.length>0&&n[1]||""},e.getSecondMatch=function(e,t){var n=t.match(e);return n&&n.length>1&&n[2]||""},e.matchAndReturnConst=function(e,t,n){if(e.test(t))return n},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map(function(e){return parseInt(e,10)||0});if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:
return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map(function(e){return parseInt(e,10)||0});if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,n,r){void 0===r&&(r=!1);var i=e.getVersionPrecision(t),o=e.getVersionPrecision(n),s=Math.max(i,o),a=0,u=e.map([t,n],function(t){var n=s-e.getVersionPrecision(t),r=t+new Array(n+1).join(".0");return e.map(r.split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});for(r&&(a=s-Math.min(i,o)),s-=1;s>=a;){if(u[0][s]>u[1][s])return 1;if(u[0][s]===u[1][s]){if(s===a)return 0;s-=1}else if(u[0][s]<u[1][s])return-1}},e.map=function(e,t){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n+=1)r.push(t(e[n]));return r},e.find=function(e,t){var n,r;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(n=0,r=e.length;n<r;n+=1){var i=e[n];if(t(i,n))return i}},e.assign=function(e){for(var t,n,r=e,i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];if(Object.assign)return Object.assign.apply(Object,[e].concat(o));var a=function(){var e=o[t];"object"==typeof e&&null!==e&&Object.keys(e).forEach(function(t){r[t]=e[t]})};for(t=0,n=o.length;t<n;t+=1)a();return e},e.getBrowserAlias=function(e){return r.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return r.BROWSER_MAP[e]||""},e}();t.default=i,e.exports=t.default},18:function(e,t,n){"use strict";t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}t.__esModule=!0,t.default=void 0;var i,o=(i=n(91))&&i.__esModule?i:{default:i},s=n(18),a=function(){function e(){}var t;return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw new Error("UserAgent should be a string");return new o.default(e,t)},e.parse=function(e){return new o.default(e).getResult()},(t=[{key:"BROWSER_MAP",get:function(){return s.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return s.ENGINE_MAP}},{key:"OS_MAP",get:function(){return s.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return s.PLATFORMS_MAP}}])&&r(e,t),e}();t.default=a,e.exports=t.default},91:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.default=void 0;var i=r(n(92)),o=r(n(93)),s=r(n(94)),a=r(n(95)),u=r(n(17)),c=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=u.default.find(i.default,function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=u.default.find(o.default,function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=u.default.find(s.default,function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=u.default.find(a.default,function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return u.default.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,n={},r=0,i={},o=0;if(Object.keys(e).forEach(function(t){var s=e[t];"string"==typeof s?(i[t]=s,o+=1):"object"==typeof s&&(n[t]=s,r+=1)}),r>0){var s=Object.keys(n),a=u.default.find(s,function(e){return t.isOS(e)});if(a){var c=this.satisfies(n[a]);if(void 0!==c)return c}var l=u.default.find(s,function(e){return t.isPlatform(e)});if(l){var d=this.satisfies(n[l]);if(void 0!==d)return d}}if(o>0){var f=Object.keys(i),p=u.default.find(f,function(e){return t.isBrowser(e,!0)});if(void 0!==p)return this.compareVersion(i[p])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var n=this.getBrowserName().toLowerCase(),r=e.toLowerCase(),i=u.default.getBrowserTypeByAlias(r);return t&&i&&(r=i.toLowerCase()),r===n},t.compareVersion=function(e){var t=[0],n=e,r=!1,i=this.getBrowserVersion();if("string"==typeof i)return">"===e[0]||"<"===e[0]?(n=e.substr(1),"="===e[1]?(r=!0,n=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?n=e.substr(1):"~"===e[0]&&(r=!0,n=e.substr(1)),t.indexOf(u.default.compareVersions(i,n,r))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e,t){return void 0===t&&(t=!1),this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some(function(e){return t.is(e)})},e}();t.default=c,e.exports=t.default},92:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=/version\/(\d+(\.?_?\d+)+)/i,s=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},n=i.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},n=i.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},n=i.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},n=i.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},n=i.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var t={name:"Opera Touch"},n=i.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},n=i.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},n=i.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},n=i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},n=i.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},n=i.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},n=i.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},n=i.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},n=i.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},n=i.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return n&&(t.version=n),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},n=i.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},n=i.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},n=i.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},n=i.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},n=i.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},n=i.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},n=i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},n=i.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MiuiBrowser/i],describe:function(e){var t={name:"Miui"},n=i.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},n=i.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},n=i.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},n=i.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t={name:"Android Browser"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:i.default.getFirstMatch(t,e),version:i.default.getSecondMatch(t,e)}}}];t.default=s,e.exports=t.default},93:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),s=[{test:[/Roku\/DVP/],describe:function(e){var t=i.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:o.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=i.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=i.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),n=i.default.getWindowsVersionName(t);return{name:o.OS_MAP.Windows,version:t,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var t={name:o.OS_MAP.iOS},n=i.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return n&&(t.version=n),t}},{test:[/macintosh/i],describe:function(e){var t=i.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),n=i.default.getMacOSVersionName(t),r={name:o.OS_MAP.MacOS,version:t};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=i.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:o.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t=i.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),n=i.default.getAndroidVersionName(t),r={name:o.OS_MAP.Android,version:t};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=i.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),n={name:o.OS_MAP.WebOS};return t&&t.length&&(n.version=t),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=i.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||i.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||i.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:o.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=i.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=i.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:o.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:o.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=i.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.PlayStation4,version:t}}}];t.default=s,e.exports=t.default},94:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),s=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=i.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",n={type:o.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(n.model=t),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),n=e.test(/like (ipod|iphone)/i);return t&&!n},describe:function(e){var t=i.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:o.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}}];t.default=s,e.exports=t.default},95:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),s=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:o.ENGINE_MAP.Blink};var t=i.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:o.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:o.ENGINE_MAP.Trident},n=i.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:o.ENGINE_MAP.Presto},n=i.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=e.test(/gecko/i),n=e.test(/like gecko/i);return t&&!n},describe:function(e){var t={name:o.ENGINE_MAP.Gecko},n=i.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:o.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:o.ENGINE_MAP.WebKit},n=i.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}}];t.default=s,e.exports=t.default}})},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",function(){return q});var i,o=n(9),s=n(48),a=n(78),u=n(80),c=n(92),l=n(119),d=n(77),f=n(34),p=n(20),h=n(25),v=n(19),g=function(e){var t=window.open(e,"_self");return t?Promise.resolve(t):Promise.reject()},y=n(177),m=n.n(y),b=n(178),w=n.n(b),_=function(){return(_=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},S=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},E=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},C=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},A="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",O=function(e,t,n){a.a.dispatch("auth",{event:e,data:t,message:n},"Auth",A)},I=new s.a("OAuth"),x=function(){function e(e){var t=e.config,n=e.cognitoClientId,r=e.scopes,i=void 0===r?[]:r;if(this._urlOpener=t.urlOpener||g,this._config=t,this._cognitoClientId=n,!this.isValidScopes(i))throw Error("scopes must be a String Array");this._scopes=i}return e.prototype.isValidScopes=function(e){return Array.isArray(e)&&e.every(function(e){return"string"==typeof e})},e.prototype.oauthSignIn=function(e,t,n,r,i,s){void 0===e&&(e="code"),void 0===i&&(i=o.b.Cognito);var a=this._generateState(32),u=s?a+"-"+s.split("").map(function(e){return e.charCodeAt(0).toString(16).padStart(2,"0")}).join(""):a;!function(e){window.sessionStorage.setItem("oauth_state",e)}(u);var c,l=this._generateRandom(128);c=l,window.sessionStorage.setItem("ouath_pkce_key",c);var d=this._generateChallenge(l),f=this._scopes.join(" "),p="https://"+t+"/oauth2/authorize?"+Object.entries(_(_({redirect_uri:n,response_type:e,client_id:r,identity_provider:i,scope:f,state:u},"code"===e?{code_challenge:d}:{}),"code"===e?{code_challenge_method:"S256"}:{})).map(function(e){var t=C(e,2),n=t[0],r=t[1];return encodeURIComponent(n)+"="+encodeURIComponent(r)}).join("&");I.debug("Redirecting to "+p),this._urlOpener(p,n)},e.prototype._handleCodeFlow=function(e){return S(this,void 0,void 0,function(){var t,n,r,i,s,a,u,c,l,d,f,p,h,g;return E(this,function(y){switch(y.label){case 0:return t=(Object(v.parse)(e).query||"").split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var n,r=C(t,2),i=r[0],o=r[1];return _(_({},e),((n={})[i]=o,n))},{code:void 0}).code,n=Object(v.parse)(e).pathname||"/",r=Object(v.parse)(this._config.redirectSignIn).pathname||"/",t&&n===r?(i="https://"+this._config.domain+"/oauth2/token",O("codeFlow",{},"Retrieving tokens from "+i),s=Object(o.e)(this._config)?this._cognitoClientId:this._config.clientID,a=Object(o.e)(this._config)?this._config.redirectSignIn:this._config.redirectUri,m=window.sessionStorage.getItem("ouath_pkce_key"),window.sessionStorage.removeItem("ouath_pkce_key"),c=_({grant_type:"authorization_code",code:t,client_id:s,redirect_uri:a},(u=m)?{code_verifier:u}:{}),I.debug("Calling token endpoint: "+i+" with",c),l=Object.entries(c).map(function(e){var t=C(e,2),n=t[0],r=t[1];return encodeURIComponent(n)+"="+encodeURIComponent(r)}).join("&"),[4,fetch(i,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:l})]):[2];case 1:return[4,y.sent().json()];case 2:if(d=y.sent(),f=d.access_token,p=d.refresh_token,h=d.id_token,g=d.error)throw new Error(g);return[2,{accessToken:f,refreshToken:p,idToken:h}]}var m})})},e.prototype._handleImplicitFlow=function(e){return S(this,void 0,void 0,function(){var t,n,r;return E(this,function(i){return t=(Object(v.parse)(e).hash||"#").substr(1).split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var n,r=C(t,2),i=r[0],o=r[1];return _(_({},e),((n={})[i]=o,n))},{id_token:void 0,access_token:void 0}),n=t.id_token,r=t.access_token,O("implicitFlow",{},"Got tokens from "+e),I.debug("Retrieving implicit tokens from "+e+" with"),[2,{accessToken:r,idToken:n,refreshToken:null}]})})},e.prototype.handleAuthResponse=function(e){return S(this,void 0,void 0,function(){var t,n,r,i,o,s,a;return E(this,function(u){switch(u.label){case 0:if(u.trys.push([0,5,,6]),t=e?_(_({},(Object(v.parse)(e).hash||"#").substr(1).split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var n=C(t,2),r=n[0],i=n[1];return e[r]=i,e},{})),(Object(v.parse)(e).query||"").split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var n=C(t,2),r=n[0],i=n[1];return e[r]=i,e},{})):{},n=t.error,r=t.error_description,n)throw new Error(r);return i=this._validateState(t),I.debug("Starting "+this._config.responseType+" flow with "+e),"code"!==this._config.responseType?[3,2]:(o=[{}],[4,this._handleCodeFlow(e)]);case 1:return[2,_.apply(void 0,[_.apply(void 0,o.concat([u.sent()])),{state:i}])];case 2:return s=[{}],[4,this._handleImplicitFlow(e)];case 3:return[2,_.apply(void 0,[_.apply(void 0,s.concat([u.sent()])),{state:i}])];case 4:return[3,6];case 5:throw a=u.sent(),I.error("Error handling auth response.",a),a;case 6:return[2]}})})},e.prototype._validateState=function(e){if(e){var t,n=(t=window.sessionStorage.getItem("oauth_state"),window.sessionStorage.removeItem("oauth_state"),t),r=e.state;if(n&&n!==r)throw new Error("Invalid state in OAuth flow");return r}},e.prototype.signOut=function(){return S(this,void 0,void 0,function(){var e,t,n;return E(this,function(r){return e="https://"+this._config.domain+"/logout?",t=Object(o.e)(this._config)?this._cognitoClientId:this._config.oauth.clientID,n=Object(o.e)(this._config)?this._config.redirectSignOut:this._config.returnTo,e+=Object.entries({client_id:t,logout_uri:encodeURIComponent(n)}).map(function(e){var t=C(e,2);return t[0]+"="+t[1]}).join("&"),O("oAuthSignOut",{oAuth:"signOut"},"Signing out from "+e),I.debug("Signing out from "+e),[2,this._urlOpener(e,n)]})})},e.prototype._generateState=function(e){for(var t="",n=e,r="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";n>0;--n)t+=r[Math.round(Math.random()*(r.length-1))];return t},e.prototype._generateChallenge=function(e){return this._base64URL(m()(e))},e.prototype._base64URL=function(e){return e.toString(w.a).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},e.prototype._generateRandom=function(e){var t=new Uint8Array(e);if("undefined"!=typeof window&&window.crypto)window.crypto.getRandomValues(t);else for(var n=0;n<e;n+=1)t[n]=Math.random()*"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~".length|0;return this._bufferToString(t)},e.prototype._bufferToString=function(e){
for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=[],r=0;r<e.byteLength;r+=1){var i=e[r]%t.length;n.push(t[i])}return n.join("")},e}(),T=n(31),P=(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),k=new s.a("AuthError"),D=function(e){function t(n){var r=this,i=M[n],o=i.message,s=i.log;return(r=e.call(this,o)||this).constructor=t,Object.setPrototypeOf(r,t.prototype),r.name="AuthError",r.log=s||o,k.error(r.log),r}return P(t,e),t}(Error),N=function(e){function t(n){var r=e.call(this,n)||this;return r.constructor=t,Object.setPrototypeOf(r,t.prototype),r.name="NoUserPoolError",r}return P(t,e),t}(D),M={noConfig:{message:T.a.DEFAULT_MSG,log:"\n            Error: Amplify has not been configured correctly.\n            This error is typically caused by one of the following scenarios:\n\n            1. Make sure you're passing the awsconfig object to Amplify.configure() in your app's entry point\n                See https://aws-amplify.github.io/docs/js/authentication#configure-your-app for more information\n            \n            2. There might be multiple conflicting versions of amplify packages in your node_modules.\n\t\t\t\tRefer to our docs site for help upgrading Amplify packages (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js)\n        "},missingAuthConfig:{message:T.a.DEFAULT_MSG,log:"\n            Error: Amplify has not been configured correctly. \n            The configuration object is missing required auth properties.\n            This error is typically caused by one of the following scenarios:\n\n            1. Did you run `amplify push` after adding auth via `amplify add auth`?\n                See https://aws-amplify.github.io/docs/js/authentication#amplify-project-setup for more information\n\n            2. This could also be caused by multiple conflicting versions of amplify packages, see (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js) for help upgrading Amplify packages.\n        "},emptyUsername:{message:T.a.EMPTY_USERNAME},invalidUsername:{message:T.a.INVALID_USERNAME},emptyPassword:{message:T.a.EMPTY_PASSWORD},emptyCode:{message:T.a.EMPTY_CODE},signUpError:{message:T.a.SIGN_UP_ERROR,log:"The first parameter should either be non-null string or object"},noMFA:{message:T.a.NO_MFA},invalidMFA:{message:T.a.INVALID_MFA},emptyChallengeResponse:{message:T.a.EMPTY_CHALLENGE},noUserSession:{message:T.a.NO_USER_SESSION},deviceConfig:{message:T.a.DEVICE_CONFIG},networkError:{message:T.a.NETWORK_ERROR},autoSignInError:{message:T.a.AUTOSIGNIN_ERROR},default:{message:T.a.DEFAULT_MSG}},L=function(){return(L=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},j=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},R=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},U=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},F=new s.a("AuthClass"),B="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",z=function(e,t,n){a.a.dispatch("auth",{event:e,data:t,message:n},"Auth",B)},q=new(function(){function e(e){var t=this;this.userPool=null,this.user=null,this.oAuthFlowInProgress=!1,this.autoSignInInitiated=!1,this.Credentials=u.a,this.wrapRefreshSessionCallback=function(e){return function(t,n){return n?z("tokenRefresh",void 0,"New token retrieved"):z("tokenRefresh_failure",t,"Failed to retrieve new token"),e(t,n)}},this.configure(e),this.currentCredentials=this.currentCredentials.bind(this),this.currentUserCredentials=this.currentUserCredentials.bind(this),a.a.listen("auth",function(e){switch(e.payload.event){case"signIn":t._storage.setItem("amplify-signin-with-hostedUI","false");break;case"signOut":t._storage.removeItem("amplify-signin-with-hostedUI");break;case"cognitoHostedUI":t._storage.setItem("amplify-signin-with-hostedUI","true")}})}return e.prototype.getModuleName=function(){return"Auth"},e.prototype.configure=function(e){var t=this;if(!e)return this._config||{};F.debug("configure Auth");var n=Object.assign({},this._config,c.a.parseMobilehubConfig(e).Auth,e);this._config=n;var r=this._config,i=r.userPoolId,s=r.userPoolWebClientId,a=r.cookieStorage,u=r.oauth,p=r.region,v=r.identityPoolId,g=r.mandatorySignIn,y=r.refreshHandlers,m=r.identityPoolRegion,b=r.clientMetadata,w=r.endpoint;if(this._config.storage){if(!this._isValidAuthStorage(this._config.storage))throw F.error("The storage in the Auth config is not valid!"),new Error("Empty storage object");this._storage=this._config.storage}else this._storage=a?new h.i(a):e.ssr?new l.a:(new d.a).getStorage();if(this._storageSync=Promise.resolve(),"function"==typeof this._storage.sync&&(this._storageSync=this._storage.sync()),i){var _={UserPoolId:i,ClientId:s,endpoint:w};_.Storage=this._storage,this.userPool=new h.g(_,this.wrapRefreshSessionCallback)}this.Credentials.configure({mandatorySignIn:g,region:m||p,userPoolId:i,identityPoolId:v,refreshHandlers:y,storage:this._storage});var S=u?Object(o.e)(this._config.oauth)?u:u.awsCognito:void 0;if(S){var E=Object.assign({cognitoClientId:s,UserPoolId:i,domain:S.domain,scopes:S.scope,redirectSignIn:S.redirectSignIn,redirectSignOut:S.redirectSignOut,responseType:S.responseType,Storage:this._storage,urlOpener:S.urlOpener,clientMetadata:b},S.options);this._oAuthHandler=new x({scopes:E.scopes,config:E,cognitoClientId:E.cognitoClientId});var C={};!function(e){if(Object(f.b)().isBrowser&&window.location)e({url:window.location.href});else if(!Object(f.b)().isNode)throw new Error("Not supported")}(function(e){var n=e.url;C[n]||(C[n]=!0,t._handleAuthResponse(n))})}return z("configured",null,"The Auth category has been configured successfully"),this.autoSignInInitiated||"function"!=typeof this._storage.getItem||(this.isTrueStorageValue("amplify-polling-started")&&(z("autoSignIn_failure",null,o.a.AutoSignInError),this._storage.removeItem("amplify-auto-sign-in")),this._storage.removeItem("amplify-polling-started")),this._config},e.prototype.signUp=function(e){for(var t,n,i,s=this,a=[],u=1;u<arguments.length;u++)a[u-1]=arguments[u];if(!this.userPool)return this.rejectNoUserPool();var c,l=null,d=null,f=[],p=null,v={enabled:!1},g={},y={};if(e&&"string"==typeof e){l=e,d=a?a[0]:null;var m=a?a[1]:null,b=a?a[2]:null;m&&f.push(new h.f({Name:"email",Value:m})),b&&f.push(new h.f({Name:"phone_number",Value:b}))}else{if(!e||"object"!==r(e))return this.rejectAuthError(o.a.SignUpError);l=e.username,d=e.password,e&&e.clientMetadata?c=e.clientMetadata:this._config.clientMetadata&&(c=this._config.clientMetadata);var w=e.attributes;w&&Object.keys(w).map(function(e){f.push(new h.f({Name:e,Value:w[e]}))});var _=e.validationData;_&&(p=[],Object.keys(_).map(function(e){p.push(new h.f({Name:e,Value:_[e]}))})),(v=null!==(t=e.autoSignIn)&&void 0!==t?t:{enabled:!1}).enabled&&(this._storage.setItem("amplify-auto-sign-in","true"),g=null!==(n=v.validationData)&&void 0!==n?n:{},y=null!==(i=v.clientMetaData)&&void 0!==i?i:{})}return l?d?(F.debug("signUp attrs:",f),F.debug("signUp validation data:",p),new Promise(function(e,t){s.userPool.signUp(l,d,f,p,function(n,r){n?(z("signUp_failure",n,l+" failed to signup"),t(n)):(z("signUp",r,l+" has signed up successfully"),v.enabled&&s.handleAutoSignIn(l,d,g,y,r),e(r))},c)})):this.rejectAuthError(o.a.EmptyPassword):this.rejectAuthError(o.a.EmptyUsername)},e.prototype.handleAutoSignIn=function(e,t,n,r,i){this.autoSignInInitiated=!0;var o=new h.a({Username:e,Password:t,ValidationData:n,ClientMetadata:r});i.userConfirmed?this.signInAfterUserConfirmed(o):"link"===this._config.signUpVerificationMethod?this.handleLinkAutoSignIn(o):this.handleCodeAutoSignIn(o)},e.prototype.handleCodeAutoSignIn=function(e){var t=this;a.a.listen("auth",function n(r){"confirmSignUp"===r.payload.event&&t.signInAfterUserConfirmed(e,n)})},e.prototype.handleLinkAutoSignIn=function(e){var t=this;this._storage.setItem("amplify-polling-started","true");var n=Date.now(),r=setInterval(function(){Date.now()-n>18e4?(clearInterval(r),z("autoSignIn_failure",null,"Please confirm your account and use your credentials to sign in."),t._storage.removeItem("amplify-auto-sign-in")):t.signInAfterUserConfirmed(e,null,r)},5e3)},e.prototype.signInAfterUserConfirmed=function(e,t,n){return j(this,void 0,void 0,function(){var r,i,o=this;return R(this,function(s){switch(s.label){case 0:r=this.createCognitoUser(e.getUsername()),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,r.authenticateUser(e,this.authCallbacks(r,function(r){z("autoSignIn",r,e.getUsername()+" has signed in successfully"),t&&a.a.remove("auth",t),n&&(clearInterval(n),o._storage.removeItem("amplify-polling-started")),o._storage.removeItem("amplify-auto-sign-in")},function(e){F.error(e),o._storage.removeItem("amplify-auto-sign-in")}))];case 2:return s.sent(),[3,4];case 3:return i=s.sent(),F.error(i),[3,4];case 4:return[2]}})})},e.prototype.confirmSignUp=function(e,t,n){var r=this;if(!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(o.a.EmptyUsername);if(!t)return this.rejectAuthError(o.a.EmptyCode);var i,s=this.createCognitoUser(e),a=!n||"boolean"!=typeof n.forceAliasCreation||n.forceAliasCreation;return n&&n.clientMetadata?i=n.clientMetadata:this._config.clientMetadata&&(i=this._config.clientMetadata),new Promise(function(n,u){s.confirmRegistration(t,a,function(t,i){t?u(t):(z("confirmSignUp",i,e+" has been confirmed successfully"),r.isTrueStorageValue("amplify-auto-sign-in")&&!r.autoSignInInitiated&&(z("autoSignIn_failure",null,o.a.AutoSignInError),r._storage.removeItem("amplify-auto-sign-in")),n(i))},i)})},e.prototype.isTrueStorageValue=function(e){var t=this._storage.getItem(e);return!!t&&"true"===t},e.prototype.resendSignUp=function(e,t){if(void 0===t&&(t=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(o.a.EmptyUsername);var n=this.createCognitoUser(e);return new Promise(function(e,r){n.resendConfirmationCode(function(t,n){t?r(t):e(n)},t)})},e.prototype.signIn=function(e,t,n){if(void 0===n&&(n=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();var r=null,i=null,s={};if("string"==typeof e)r=e,i=t;else{if(!Object(o.h)(e))return this.rejectAuthError(o.a.InvalidUsername);void 0!==t&&F.warn("The password should be defined under the first parameter object!"),r=e.username,i=e.password,s=e.validationData}if(!r)return this.rejectAuthError(o.a.EmptyUsername);var a=new h.a({Username:r,Password:i,ValidationData:s,ClientMetadata:n});return i?this.signInWithPassword(a):this.signInWithoutPassword(a)},e.prototype.authCallbacks=function(e,t,n){var r=this,i=this;return{onSuccess:function(o){return j(r,void 0,void 0,function(){var r,s,a,u;return R(this,function(c){switch(c.label){case 0:F.debug(o),delete e.challengeName,delete e.challengeParam,c.label=1;case 1:return c.trys.push([1,4,5,9]),[4,this.Credentials.clear()];case 2:return c.sent(),[4,this.Credentials.set(o,"session")];case 3:return r=c.sent(),F.debug("succeed to get cognito credentials",r),[3,9];case 4:return s=c.sent(),F.debug("cannot get cognito credentials",s),[3,9];case 5:return c.trys.push([5,7,,8]),[4,this.currentUserPoolUser()];case 6:return a=c.sent(),i.user=a,z("signIn",a,"A user "+e.getUsername()+" has been signed in"),t(a),[3,8];case 7:return u=c.sent(),F.error("Failed to get the signed in user",u),n(u),[3,8];case 8:return[7];case 9:return[2]}})})},onFailure:function(t){F.debug("signIn failure",t),z("signIn_failure",t,e.getUsername()+" failed to signin"),n(t)},customChallenge:function(n){F.debug("signIn custom challenge answer required"),e.challengeName="CUSTOM_CHALLENGE",e.challengeParam=n,t(e)},mfaRequired:function(n,r){F.debug("signIn MFA required"),e.challengeName=n,e.challengeParam=r,t(e)},mfaSetup:function(n,r){F.debug("signIn mfa setup",n),e.challengeName=n,e.challengeParam=r,t(e)},newPasswordRequired:function(n,r){F.debug("signIn new password"),e.challengeName="NEW_PASSWORD_REQUIRED",e.challengeParam={userAttributes:n,requiredAttributes:r},t(e)},totpRequired:function(n,r){F.debug("signIn totpRequired"),e.challengeName=n,e.challengeParam=r,t(e)},selectMFAType:function(n,r){F.debug("signIn selectMFAType",n),e.challengeName=n,e.challengeParam=r,t(e)}}},e.prototype.signInWithPassword=function(e){var t=this;if(this.pendingSignIn)throw new Error("Pending sign-in attempt already in progress");var n=this.createCognitoUser(e.getUsername());return this.pendingSignIn=new Promise(function(r,i){n.authenticateUser(e,t.authCallbacks(n,function(e){t.pendingSignIn=null,r(e)},function(e){t.pendingSignIn=null,i(e)}))}),this.pendingSignIn},e.prototype.signInWithoutPassword=function(e){var t=this,n=this.createCognitoUser(e.getUsername());return n.setAuthenticationFlowType("CUSTOM_AUTH"),new Promise(function(r,i){n.initiateAuth(e,t.authCallbacks(n,r,i))})},e.prototype.getMFAOptions=function(e){return new Promise(function(t,n){e.getMFAOptions(function(e,r){if(e)return F.debug("get MFA Options failed",e),void n(e);F.debug("get MFA options success",r),t(r)})})},e.prototype.getPreferredMFA=function(e,t){var n=this,r=this;return new Promise(function(i,o){var s=n._config.clientMetadata,a=!!t&&t.bypassCache;e.getUserData(function(t,s){return j(n,void 0,void 0,function(){var n,a;return R(this,function(u){switch(u.label){case 0:if(!t)return[3,5];if(F.debug("getting preferred mfa failed",t),!this.isSessionInvalid(t))return[3,4];u.label=1;case 1:return u.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(e)];case 2:return u.sent(),[3,4];case 3:return n=u.sent(),o(new Error("Session is invalid due to: "+t.message+" and failed to clean up invalid session: "+n.message)),[2];case 4:return o(t),[2];case 5:return(a=r._getMfaTypeFromUserData(s))?(i(a),[2]):(o("invalid MFA Type"),[2])}})})},{bypassCache:a,clientMetadata:s})})},e.prototype._getMfaTypeFromUserData=function(e){var t=null,n=e.PreferredMfaSetting;if(n)t=n;else{var r=e.UserMFASettingList;r?0===r.length?t="NOMFA":F.debug("invalid case for getPreferredMFA",e):t=e.MFAOptions?"SMS_MFA":"NOMFA"}return t},e.prototype._getUserData=function(e,t){var n=this;return new Promise(function(r,i){e.getUserData(function(t,o){return j(n,void 0,void 0,function(){var n;return R(this,function(s){switch(s.label){case 0:if(!t)return[3,5];if(F.debug("getting user data failed",t),!this.isSessionInvalid(t))return[3,4];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(e)];case 2:return s.sent(),[3,4];case 3:return n=s.sent(),i(new Error("Session is invalid due to: "+t.message+" and failed to clean up invalid session: "+n.message)),[2];case 4:return i(t),[2];case 5:r(o),s.label=6;case 6:return[2]}})})},t)})},e.prototype.setPreferredMFA=function(e,t){return j(this,void 0,void 0,function(){var n,r,i,s,a,u,c=this;return R(this,function(l){switch(l.label){case 0:return n=this._config.clientMetadata,[4,this._getUserData(e,{bypassCache:!0,clientMetadata:n})];case 1:switch(r=l.sent(),i=null,s=null,t){case"TOTP":case"SOFTWARE_TOKEN_MFA":return[3,2];case"SMS":case"SMS_MFA":return[3,3];case"NOMFA":return[3,4]}return[3,6];case 2:return s={PreferredMfa:!0,Enabled:!0},[3,7];case 3:return i={PreferredMfa:!0,Enabled:!0},[3,7];case 4:return a=r.UserMFASettingList,[4,this._getMfaTypeFromUserData(r)];case 5:if("NOMFA"===(u=l.sent()))return[2,Promise.resolve("No change for mfa type")];if("SMS_MFA"===u)i={PreferredMfa:!1,Enabled:!1};else{if("SOFTWARE_TOKEN_MFA"!==u)return[2,this.rejectAuthError(o.a.InvalidMFA)];s={PreferredMfa:!1,Enabled:!1}}return a&&0!==a.length&&a.forEach(function(e){"SMS_MFA"===e?i={PreferredMfa:!1,Enabled:!1}:"SOFTWARE_TOKEN_MFA"===e&&(s={PreferredMfa:!1,Enabled:!1})}),[3,7];case 6:return F.debug("no validmfa method provided"),[2,this.rejectAuthError(o.a.NoMFA)];case 7:return[2,new Promise(function(t,r){e.setUserMfaPreference(i,s,function(i,o){if(i)return F.debug("Set user mfa preference error",i),r(i);F.debug("Set user mfa success",o),F.debug("Caching the latest user data into local"),e.getUserData(function(n,i){return j(c,void 0,void 0,function(){var i;return R(this,function(s){switch(s.label){case 0:if(!n)return[3,5];if(F.debug("getting user data failed",n),!this.isSessionInvalid(n))return[3,4];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(e)];case 2:return s.sent(),[3,4];case 3:return i=s.sent(),r(new Error("Session is invalid due to: "+n.message+" and failed to clean up invalid session: "+i.message)),[2];case 4:return[2,r(n)];case 5:return[2,t(o)]}})})},{bypassCache:!0,clientMetadata:n})})})]}})})},e.prototype.disableSMS=function(e){return new Promise(function(t,n){e.disableMFA(function(e,r){if(e)return F.debug("disable mfa failed",e),void n(e);F.debug("disable mfa succeed",r),t(r)})})},e.prototype.enableSMS=function(e){return new Promise(function(t,n){e.enableMFA(function(e,r){if(e)return F.debug("enable mfa failed",e),void n(e);F.debug("enable mfa succeed",r),t(r)})})},e.prototype.setupTOTP=function(e){return new Promise(function(t,n){e.associateSoftwareToken({onFailure:function(e){F.debug("associateSoftwareToken failed",e),n(e)},associateSecretCode:function(e){F.debug("associateSoftwareToken sucess",e),t(e)}})})},e.prototype.verifyTotpToken=function(e,t){return F.debug("verification totp token",e,t),new Promise(function(n,r){e.verifySoftwareToken(t,"My TOTP device",{onFailure:function(e){F.debug("verifyTotpToken failed",e),r(e)},onSuccess:function(t){z("signIn",e,"A user "+e.getUsername()+" has been signed in"),F.debug("verifyTotpToken success",t),n(t)}})})},e.prototype.confirmSignIn=function(e,t,n,r){var i=this;if(void 0===r&&(r=this._config.clientMetadata),!t)return this.rejectAuthError(o.a.EmptyCode);var s=this;return new Promise(function(o,a){e.sendMFACode(t,{onSuccess:function(t){return j(i,void 0,void 0,function(){var n,r;return R(this,function(i){switch(i.label){case 0:F.debug(t),i.label=1;case 1:return i.trys.push([1,4,5,6]),[4,this.Credentials.clear()];case 2:return i.sent(),[4,this.Credentials.set(t,"session")];case 3:return n=i.sent(),F.debug("succeed to get cognito credentials",n),[3,6];case 4:return r=i.sent(),F.debug("cannot get cognito credentials",r),[3,6];case 5:return s.user=e,z("signIn",e,"A user "+e.getUsername()+" has been signed in"),o(e),[7];case 6:return[2]}})})},onFailure:function(e){F.debug("confirm signIn failure",e),a(e)}},n,r)})},e.prototype.completeNewPassword=function(e,t,n,r){var i=this;if(void 0===n&&(n={}),void 0===r&&(r=this._config.clientMetadata),!t)return this.rejectAuthError(o.a.EmptyPassword);var s=this;return new Promise(function(o,a){e.completeNewPasswordChallenge(t,n,{onSuccess:function(t){return j(i,void 0,void 0,function(){var n,r;return R(this,function(i){switch(i.label){case 0:F.debug(t),i.label=1;case 1:return i.trys.push([1,4,5,6]),[4,this.Credentials.clear()];case 2:return i.sent(),[4,this.Credentials.set(t,"session")];case 3:return n=i.sent(),F.debug("succeed to get cognito credentials",n),[3,6];case 4:return r=i.sent(),F.debug("cannot get cognito credentials",r),[3,6];case 5:return s.user=e,z("signIn",e,"A user "+e.getUsername()+" has been signed in"),o(e),[7];case 6:return[2]}})})},onFailure:function(e){F.debug("completeNewPassword failure",e),z("completeNewPassword_failure",e,i.user+" failed to complete the new password flow"),a(e)},mfaRequired:function(t,n){F.debug("signIn MFA required"),e.challengeName=t,e.challengeParam=n,o(e)},mfaSetup:function(t,n){F.debug("signIn mfa setup",t),e.challengeName=t,e.challengeParam=n,o(e)},totpRequired:function(t,n){F.debug("signIn mfa setup",t),e.challengeName=t,e.challengeParam=n,o(e)}},r)})},e.prototype.sendCustomChallengeAnswer=function(e,t,n){var r=this;return void 0===n&&(n=this._config.clientMetadata),this.userPool?t?new Promise(function(i,o){e.sendCustomChallengeAnswer(t,r.authCallbacks(e,i,o),n)}):this.rejectAuthError(o.a.EmptyChallengeResponse):this.rejectNoUserPool()},e.prototype.deleteUserAttributes=function(e,t){var n=this;return new Promise(function(r,i){n.userSession(e).then(function(n){e.deleteAttributes(t,function(e,t){return e?i(e):r(t)})})})},e.prototype.deleteUser=function(){return j(this,void 0,void 0,function(){var e,t,n=this;return R(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this._storageSync];case 1:return r.sent(),[3,3];case 2:throw e=r.sent(),F.debug("Failed to sync cache info into memory",e),new Error(e);case 3:return t=this._oAuthHandler&&"true"===this._storage.getItem("amplify-signin-with-hostedUI"),[2,new Promise(function(e,r){return j(n,void 0,void 0,function(){var n,i=this;return R(this,function(o){if(this.userPool){if(!(n=this.userPool.getCurrentUser()))return F.debug("Failed to get user from user pool"),[2,r(new Error("No current user."))];n.getSession(function(o,s){return j(i,void 0,void 0,function(){var i,s=this;return R(this,function(a){switch(a.label){case 0:if(!o)return[3,5];if(F.debug("Failed to get the user session",o),!this.isSessionInvalid(o))return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(n)];case 2:return a.sent(),[3,4];case 3:return i=a.sent(),r(new Error("Session is invalid due to: "+o.message+" and failed to clean up invalid session: "+i.message)),[2];case 4:return[2,r(o)];case 5:n.deleteUser(function(i,o){if(i)r(i);else{z("userDeleted",o,"The authenticated user has been deleted."),n.signOut(),s.user=null;try{s.cleanCachedItems()}catch(e){F.debug("failed to clear cached items")}t?s.oAuthSignOutRedirect(e,r):(z("signOut",s.user,"A user has been signed out"),e(o))}}),a.label=6;case 6:return[2]}})})})}else F.debug("no Congito User pool"),r(new Error("Cognito User pool does not exist"));return[2]})})})]}})})},e.prototype.updateUserAttributes=function(e,t,n){void 0===n&&(n=this._config.clientMetadata);var r=[],i=this;return new Promise(function(o,s){i.userSession(e).then(function(i){for(var a in t)if("sub"!==a&&a.indexOf("_verified")<0){var u={Name:a,Value:t[a]};r.push(u)}e.updateAttributes(r,function(e,t){return e?s(e):o(t)},n)})})},e.prototype.userAttributes=function(e){var t=this;return new Promise(function(n,r){t.userSession(e).then(function(t){e.getUserAttributes(function(e,t){e?r(e):n(t)})})})},e.prototype.verifiedContact=function(e){var t=this;return this.userAttributes(e).then(function(e){var n=t.attributesToObject(e),r={},i={};return n.email&&(n.email_verified?i.email=n.email:r.email=n.email),n.phone_number&&(n.phone_number_verified?i.phone_number=n.phone_number:r.phone_number=n.phone_number),{verified:i,unverified:r}})},e.prototype.isErrorWithMessage=function(e){return"object"===r(e)&&Object.prototype.hasOwnProperty.call(e,"message")},e.prototype.isTokenRevokedError=function(e){return this.isErrorWithMessage(e)&&"Access Token has been revoked"===e.message},e.prototype.isRefreshTokenRevokedError=function(e){return this.isErrorWithMessage(e)&&"Refresh Token has been revoked"===e.message},e.prototype.isUserDisabledError=function(e){return this.isErrorWithMessage(e)&&"User is disabled."===e.message},e.prototype.isUserDoesNotExistError=function(e){return this.isErrorWithMessage(e)&&"User does not exist."===e.message},e.prototype.isRefreshTokenExpiredError=function(e){return this.isErrorWithMessage(e)&&"Refresh Token has expired"===e.message},e.prototype.isSignedInHostedUI=function(){return this._oAuthHandler&&"true"===this._storage.getItem("amplify-signin-with-hostedUI")},e.prototype.isSessionInvalid=function(e){return this.isUserDisabledError(e)||this.isUserDoesNotExistError(e)||this.isTokenRevokedError(e)||this.isRefreshTokenRevokedError(e)||this.isRefreshTokenExpiredError(e)},e.prototype.cleanUpInvalidSession=function(e){return j(this,void 0,void 0,function(){var t=this;return R(this,function(n){switch(n.label){case 0:e.signOut(),this.user=null,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.cleanCachedItems()];case 2:return n.sent(),[3,4];case 3:return n.sent(),F.debug("failed to clear cached items"),[3,4];case 4:return this.isSignedInHostedUI()?[2,new Promise(function(e,n){t.oAuthSignOutRedirect(e,n)})]:(z("signOut",this.user,"A user has been signed out"),[2])}})})},e.prototype.currentUserPoolUser=function(e){var t=this;return this.userPool?new Promise(function(n,r){t._storageSync.then(function(){return j(t,void 0,void 0,function(){var t,i,o=this;return R(this,function(s){switch(s.label){case 0:return this.isOAuthInProgress()?(F.debug("OAuth signIn in progress, waiting for resolution..."),[4,new Promise(function(e){function t(r){var i=r.payload.event;"cognitoHostedUI"!==i&&"cognitoHostedUI_failure"!==i||(F.debug("OAuth signIn resolved: "+i),clearTimeout(n),a.a.remove("auth",t),e())}var n=setTimeout(function(){F.debug("OAuth signIn in progress timeout"),a.a.remove("auth",t),e()},1e4);a.a.listen("auth",t)})]):[3,2];case 1:s.sent(),s.label=2;case 2:return(t=this.userPool.getCurrentUser())?(i=this._config.clientMetadata,t.getSession(function(i,s){return j(o,void 0,void 0,function(){var o,a,u,c,l=this;return R(this,function(d){switch(d.label){case 0:if(!i)return[3,5];if(F.debug("Failed to get the user session",i),!this.isSessionInvalid(i))return[3,4];d.label=1;case 1:return d.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(t)];case 2:return d.sent(),[3,4];case 3:return o=d.sent(),r(new Error("Session is invalid due to: "+i.message+" and failed to clean up invalid session: "+o.message)),[2];case 4:return r(i),[2];case 5:return(a=!!e&&e.bypassCache)?[4,this.Credentials.clear()]:[3,7];case 6:d.sent(),d.label=7;case 7:return u=this._config.clientMetadata,(void 0===(c=s.getAccessToken().decodePayload().scope)?"":c).split(" ").includes("aws.cognito.signin.user.admin")?(t.getUserData(function(e,i){return j(l,void 0,void 0,function(){var o,s,a,u,c,l,d;return R(this,function(f){switch(f.label){case 0:if(!e)return[3,7];if(F.debug("getting user data failed",e),!this.isSessionInvalid(e))return[3,5];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(t)];case 2:return f.sent(),[3,4];case 3:return o=f.sent(),r(new Error("Session is invalid due to: "+e.message+" and failed to clean up invalid session: "+o.message)),[2];case 4:return r(e),[3,6];case 5:n(t),f.label=6;case 6:return[2];case 7:for(s=i.PreferredMfaSetting||"NOMFA",a=[],u=0;u<i.UserAttributes.length;u++)c={Name:i.UserAttributes[u].Name,Value:i.UserAttributes[u].Value},l=new h.f(c),a.push(l);return d=this.attributesToObject(a),Object.assign(t,{attributes:d,preferredMFA:s}),[2,n(t)]}})})},{bypassCache:a,clientMetadata:u}),[2]):(F.debug("Unable to get the user data because the aws.cognito.signin.user.admin is not in the scopes of the access token"),[2,n(t)])}})})},{clientMetadata:i}),[2]):(F.debug("Failed to get user from user pool"),r("No current user"),[2])}})})}).catch(function(e){return F.debug("Failed to sync cache info into memory",e),r(e)})}):this.rejectNoUserPool()},e.prototype.isOAuthInProgress=function(){return this.oAuthFlowInProgress},e.prototype.currentAuthenticatedUser=function(e){return j(this,void 0,void 0,function(){var t,n,r,i,o;return R(this,function(s){switch(s.label){case 0:F.debug("getting current authenticated user"),t=null,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this._storageSync];case 2:return s.sent(),[3,4];case 3:throw n=s.sent(),F.debug("Failed to sync cache info into memory",n),n;case 4:try{(r=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")))&&(t=L(L({},r.user),{token:r.token}))}catch(e){F.debug("cannot load federated user from auth storage")}return t?(this.user=t,F.debug("get current authenticated federated user",this.user),[2,this.user]):[3,5];case 5:F.debug("get current authenticated userpool user"),i=null,s.label=6;case 6:return s.trys.push([6,8,,9]),[4,this.currentUserPoolUser(e)];case 7:return i=s.sent(),[3,9];case 8:return"No userPool"===(o=s.sent())&&F.error("Cannot get the current user because the user pool is missing. Please make sure the Auth module is configured with a valid Cognito User Pool ID"),F.debug("The user is not authenticated by the error",o),[2,Promise.reject("The user is not authenticated")];case 9:return this.user=i,[2,this.user]}})})},e.prototype.currentSession=function(){var e=this;return F.debug("Getting current session"),this.userPool?new Promise(function(t,n){e.currentUserPoolUser().then(function(r){e.userSession(r).then(function(e){t(e)}).catch(function(e){F.debug("Failed to get the current session",e),n(e)})}).catch(function(e){F.debug("Failed to get the current user",e),n(e)})}):Promise.reject(new Error("No User Pool in the configuration."))},e.prototype.userSession=function(e){var t=this;if(!e)return F.debug("the user is null"),this.rejectAuthError(o.a.NoUserSession);var n=this._config.clientMetadata;return new Promise(function(r,i){F.debug("Getting the session from this user:",e),e.getSession(function(n,o){return j(t,void 0,void 0,function(){var t;return R(this,function(s){switch(s.label){case 0:if(!n)return[3,5];if(F.debug("Failed to get the session from user",e),!this.isSessionInvalid(n))return[3,4];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(e)];case 2:return s.sent(),[3,4];case 3:return t=s.sent(),i(new Error("Session is invalid due to: "+n.message+" and failed to clean up invalid session: "+t.message)),[2];case 4:return i(n),[2];case 5:return F.debug("Succeed to get the user session",o),r(o),[2]}})})},{clientMetadata:n})})},e.prototype.currentUserCredentials=function(){return j(this,void 0,void 0,function(){var e,t,n=this;return R(this,function(r){switch(r.label){case 0:F.debug("Getting current user credentials"),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this._storageSync];case 2:return r.sent(),[3,4];case 3:throw e=r.sent(),F.debug("Failed to sync cache info into memory",e),e;case 4:t=null;try{t=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo"))}catch(e){F.debug("failed to get or parse item aws-amplify-federatedInfo",e)}return t?[2,this.Credentials.refreshFederatedToken(t)]:[2,this.currentSession().then(function(e){return F.debug("getting session success",e),n.Credentials.set(e,"session")}).catch(function(){return F.debug("getting guest credentials"),n.Credentials.set(null,"guest")})]}})})},e.prototype.currentCredentials=function(){return F.debug("getting current credentials"),
this.Credentials.get()},e.prototype.verifyUserAttribute=function(e,t,n){return void 0===n&&(n=this._config.clientMetadata),new Promise(function(r,i){e.getAttributeVerificationCode(t,{onSuccess:function(e){return r(e)},onFailure:function(e){return i(e)}},n)})},e.prototype.verifyUserAttributeSubmit=function(e,t,n){return n?new Promise(function(r,i){e.verifyAttribute(t,n,{onSuccess:function(e){r(e)},onFailure:function(e){i(e)}})}):this.rejectAuthError(o.a.EmptyCode)},e.prototype.verifyCurrentUserAttribute=function(e){var t=this;return t.currentUserPoolUser().then(function(n){return t.verifyUserAttribute(n,e)})},e.prototype.verifyCurrentUserAttributeSubmit=function(e,t){var n=this;return n.currentUserPoolUser().then(function(r){return n.verifyUserAttributeSubmit(r,e,t)})},e.prototype.cognitoIdentitySignOut=function(e,t){return j(this,void 0,void 0,function(){var n,r,i=this;return R(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this._storageSync];case 1:return o.sent(),[3,3];case 2:throw n=o.sent(),F.debug("Failed to sync cache info into memory",n),n;case 3:return r=this._oAuthHandler&&"true"===this._storage.getItem("amplify-signin-with-hostedUI"),[2,new Promise(function(n,o){if(e&&e.global){F.debug("user global sign out",t);var s=i._config.clientMetadata;t.getSession(function(e,s){return j(i,void 0,void 0,function(){var i,s=this;return R(this,function(a){switch(a.label){case 0:if(!e)return[3,5];if(F.debug("failed to get the user session",e),!this.isSessionInvalid(e))return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(t)];case 2:return a.sent(),[3,4];case 3:return i=a.sent(),o(new Error("Session is invalid due to: "+e.message+" and failed to clean up invalid session: "+i.message)),[2];case 4:return[2,o(e)];case 5:return t.globalSignOut({onSuccess:function(e){if(F.debug("global sign out success"),!r)return n();s.oAuthSignOutRedirect(n,o)},onFailure:function(e){return F.debug("global sign out failed",e),o(e)}}),[2]}})})},{clientMetadata:s})}else F.debug("user sign out",t),t.signOut(function(){if(!r)return n();i.oAuthSignOutRedirect(n,o)})})]}})})},e.prototype.oAuthSignOutRedirect=function(e,t){Object(f.b)().isBrowser?this.oAuthSignOutRedirectOrReject(t):this.oAuthSignOutAndResolve(e)},e.prototype.oAuthSignOutAndResolve=function(e){this._oAuthHandler.signOut(),e()},e.prototype.oAuthSignOutRedirectOrReject=function(e){this._oAuthHandler.signOut(),setTimeout(function(){return e(Error("Signout timeout fail"))},3e3)},e.prototype.signOut=function(e){return j(this,void 0,void 0,function(){var t;return R(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.cleanCachedItems()];case 1:return n.sent(),[3,3];case 2:return n.sent(),F.debug("failed to clear cached items"),[3,3];case 3:return this.userPool?(t=this.userPool.getCurrentUser())?[4,this.cognitoIdentitySignOut(e,t)]:[3,5]:[3,7];case 4:return n.sent(),[3,6];case 5:F.debug("no current Cognito user"),n.label=6;case 6:return[3,8];case 7:F.debug("no Cognito User pool"),n.label=8;case 8:return z("signOut",this.user,"A user has been signed out"),this.user=null,[2]}})})},e.prototype.cleanCachedItems=function(){return j(this,void 0,void 0,function(){return R(this,function(e){switch(e.label){case 0:return[4,this.Credentials.clear()];case 1:return e.sent(),[2]}})})},e.prototype.changePassword=function(e,t,n,r){var i=this;return void 0===r&&(r=this._config.clientMetadata),new Promise(function(o,s){i.userSession(e).then(function(i){e.changePassword(t,n,function(e,t){return e?(F.debug("change password failure",e),s(e)):o(t)},r)})})},e.prototype.forgotPassword=function(e,t){if(void 0===t&&(t=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(o.a.EmptyUsername);var n=this.createCognitoUser(e);return new Promise(function(r,i){n.forgotPassword({onSuccess:function(){r()},onFailure:function(t){F.debug("forgot password failure",t),z("forgotPassword_failure",t,e+" forgotPassword failed"),i(t)},inputVerificationCode:function(t){z("forgotPassword",n,e+" has initiated forgot password flow"),r(t)}},t)})},e.prototype.forgotPasswordSubmit=function(e,t,n,r){if(void 0===r&&(r=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(o.a.EmptyUsername);if(!t)return this.rejectAuthError(o.a.EmptyCode);if(!n)return this.rejectAuthError(o.a.EmptyPassword);var i=this.createCognitoUser(e);return new Promise(function(o,s){i.confirmPassword(t,n,{onSuccess:function(t){z("forgotPasswordSubmit",i,e+" forgotPasswordSubmit successful"),o(t)},onFailure:function(t){z("forgotPasswordSubmit_failure",t,e+" forgotPasswordSubmit failed"),s(t)}},r)})},e.prototype.currentUserInfo=function(){return j(this,void 0,void 0,function(){var e,t,n,r,i,o,s;return R(this,function(a){switch(a.label){case 0:return(e=this.Credentials.getCredSource())&&"aws"!==e&&"userPool"!==e?[3,9]:[4,this.currentUserPoolUser().catch(function(e){return F.error(e)})];case 1:if(!(s=a.sent()))return[2,null];a.label=2;case 2:return a.trys.push([2,8,,9]),[4,this.userAttributes(s)];case 3:t=a.sent(),n=this.attributesToObject(t),r=null,a.label=4;case 4:return a.trys.push([4,6,,7]),[4,this.currentCredentials()];case 5:return r=a.sent(),[3,7];case 6:return i=a.sent(),F.debug("Failed to retrieve credentials while getting current user info",i),[3,7];case 7:return[2,{id:r?r.identityId:void 0,username:s.getUsername(),attributes:n}];case 8:return o=a.sent(),F.error("currentUserInfo error",o),[2,{}];case 9:return"federated"===e?[2,(s=this.user)||{}]:[2]}})})},e.prototype.federatedSignIn=function(e,t,n){return j(this,void 0,void 0,function(){var r,i,s,a,u,c,l,d,f,p,h;return R(this,function(v){switch(v.label){case 0:if(!this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation requires either a User Pool or Identity Pool in config");if(void 0===e&&this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation with Identity Pools requires tokens passed as arguments");return Object(o.f)(e)||Object(o.g)(e)||Object(o.d)(e)||void 0===e?(r=e||{provider:o.b.Cognito},u=Object(o.f)(r)?r.provider:r.customProvider,Object(o.f)(r),i=r.customState,this._config.userPoolId&&(s=Object(o.e)(this._config.oauth)?this._config.userPoolWebClientId:this._config.oauth.clientID,a=Object(o.e)(this._config.oauth)?this._config.oauth.redirectSignIn:this._config.oauth.redirectUri,this._oAuthHandler.oauthSignIn(this._config.oauth.responseType,this._config.oauth.domain,a,s,u,i)),[3,4]):[3,1];case 1:u=e;try{(c=JSON.stringify(JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")).user))&&F.warn("There is already a signed in user: "+c+" in your app.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tYou should not call Auth.federatedSignIn method again as it may cause unexpected behavior.")}catch(e){}return l=t.token,d=t.identity_id,f=t.expires_at,[4,this.Credentials.set({provider:u,token:l,identity_id:d,user:n,expires_at:f},"federation")];case 2:return p=v.sent(),[4,this.currentAuthenticatedUser()];case 3:return h=v.sent(),z("signIn",h,"A user "+h.username+" has been signed in"),F.debug("federated sign in credentials",p),[2,p];case 4:return[2]}})})},e.prototype._handleAuthResponse=function(e){return j(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,d,p,g,y;return R(this,function(m){switch(m.label){case 0:if(this.oAuthFlowInProgress)return F.debug("Skipping URL "+e+" current flow in progress"),[2];m.label=1;case 1:if(m.trys.push([1,,8,9]),this.oAuthFlowInProgress=!0,!this._config.userPoolId)throw new Error("OAuth responses require a User Pool defined in config");if(z("parsingCallbackUrl",{url:e},"The callback url is being parsed"),t=e||(Object(f.b)().isBrowser?window.location.href:""),n=!!(Object(v.parse)(t).query||"").split("&").map(function(e){return e.split("=")}).find(function(e){var t=U(e,1)[0];return"code"===t||"error"===t}),r=!!(Object(v.parse)(t).hash||"#").substr(1).split("&").map(function(e){return e.split("=")}).find(function(e){var t=U(e,1)[0];return"access_token"===t||"error"===t}),!n&&!r)return[3,7];this._storage.setItem("amplify-redirected-from-hosted-ui","true"),m.label=2;case 2:return m.trys.push([2,6,,7]),[4,this._oAuthHandler.handleAuthResponse(t)];case 3:return i=m.sent(),o=i.accessToken,s=i.idToken,a=i.refreshToken,u=i.state,c=new h.h({IdToken:new h.c({IdToken:s}),RefreshToken:new h.d({RefreshToken:a}),AccessToken:new h.b({AccessToken:o})}),l=void 0,this._config.identityPoolId?[4,this.Credentials.set(c,"session")]:[3,5];case 4:l=m.sent(),F.debug("AWS credentials",l),m.label=5;case 5:return d=/-/.test(u),(p=this.createCognitoUser(c.getIdToken().decodePayload()["cognito:username"])).setSignInUserSession(c),window&&void 0!==window.history&&window.history.replaceState({},null,this._config.oauth.redirectSignIn),z("signIn",p,"A user "+p.getUsername()+" has been signed in"),z("cognitoHostedUI",p,"A user "+p.getUsername()+" has been signed in via Cognito Hosted UI"),d&&(g=u.split("-").splice(1).join("-"),z("customOAuthState",g.match(/.{2}/g).map(function(e){return String.fromCharCode(parseInt(e,16))}).join(""),"State for user "+p.getUsername())),[2,l];case 6:return y=m.sent(),F.debug("Error in cognito hosted auth response",y),window&&void 0!==window.history&&window.history.replaceState({},null,this._config.oauth.redirectSignIn),z("signIn_failure",y,"The OAuth response flow failed"),z("cognitoHostedUI_failure",y,"A failure occurred when returning to the Cognito Hosted UI"),z("customState_failure",y,"A failure occurred when returning state"),[3,7];case 7:return[3,9];case 8:return this.oAuthFlowInProgress=!1,[7];case 9:return[2]}})})},e.prototype.essentialCredentials=function(e){return{accessKeyId:e.accessKeyId,sessionToken:e.sessionToken,secretAccessKey:e.secretAccessKey,identityId:e.identityId,authenticated:e.authenticated}},e.prototype.attributesToObject=function(e){var t=this,n={};return e&&e.map(function(e){"email_verified"===e.Name||"phone_number_verified"===e.Name?n[e.Name]=t.isTruthyString(e.Value)||!0===e.Value:n[e.Name]=e.Value}),n},e.prototype.isTruthyString=function(e){return"function"==typeof e.toLowerCase&&"true"===e.toLowerCase()},e.prototype.createCognitoUser=function(e){var t={Username:e,Pool:this.userPool};t.Storage=this._storage;var n=this._config.authenticationFlowType,r=new h.e(t);return n&&r.setAuthenticationFlowType(n),r},e.prototype._isValidAuthStorage=function(e){return!!e&&"function"==typeof e.getItem&&"function"==typeof e.setItem&&"function"==typeof e.removeItem&&"function"==typeof e.clear},e.prototype.noUserPoolErrorHandler=function(e){return!e||e.userPoolId&&e.identityPoolId?o.a.NoConfig:o.a.MissingAuthConfig},e.prototype.rejectAuthError=function(e){return Promise.reject(new D(e))},e.prototype.rejectNoUserPool=function(){var e=this.noUserPoolErrorHandler(this._config);return Promise.reject(new N(e))},e.prototype.rememberDevice=function(){return j(this,void 0,void 0,function(){var e,t;return R(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.currentUserPoolUser()];case 1:return e=n.sent(),[3,3];case 2:return t=n.sent(),F.debug("The user is not authenticated by the error",t),[2,Promise.reject("The user is not authenticated")];case 3:return e.getCachedDeviceKeyAndPassword(),[2,new Promise(function(t,n){e.setDeviceStatusRemembered({onSuccess:function(e){t(e)},onFailure:function(e){"InvalidParameterException"===e.code?n(new D(o.a.DeviceConfig)):"NetworkError"===e.code?n(new D(o.a.NetworkError)):n(e)}})})]}})})},e.prototype.forgetDevice=function(){return j(this,void 0,void 0,function(){var e,t;return R(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.currentUserPoolUser()];case 1:return e=n.sent(),[3,3];case 2:return t=n.sent(),F.debug("The user is not authenticated by the error",t),[2,Promise.reject("The user is not authenticated")];case 3:return e.getCachedDeviceKeyAndPassword(),[2,new Promise(function(t,n){e.forgetDevice({onSuccess:function(e){t(e)},onFailure:function(e){"InvalidParameterException"===e.code?n(new D(o.a.DeviceConfig)):"NetworkError"===e.code?n(new D(o.a.NetworkError)):n(e)}})})]}})})},e.prototype.fetchDevices=function(){return j(this,void 0,void 0,function(){var e,t;return R(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.currentUserPoolUser()];case 1:return e=n.sent(),[3,3];case 2:throw t=n.sent(),F.debug("The user is not authenticated by the error",t),new Error("The user is not authenticated");case 3:return e.getCachedDeviceKeyAndPassword(),[2,new Promise(function(t,n){var r={onSuccess:function(e){var n=e.Devices.map(function(e){var t=e.DeviceAttributes.find(function(e){return"device_name"===e.Name})||{};return{id:e.DeviceKey,name:t.Value}});t(n)},onFailure:function(e){"InvalidParameterException"===e.code?n(new D(o.a.DeviceConfig)):"NetworkError"===e.code?n(new D(o.a.NetworkError)):n(e)}};e.listDevices(60,null,r)})]}})})},e}())(null);p.a.register(q)},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){"use strict";n.d(t,"b",function(){return _}),n.d(t,"a",function(){return S});var r=n(59),i=n(26),o=n(186),s=n(48),a=n(80),u=n(20),c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},l=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},d=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},f=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},p=new s.a("RestAPI"),h=function(){function e(e){this._api=null,this.Credentials=a.a,this._options=e,p.debug("API Options",this._options)}return e.prototype.getModuleName=function(){return"RestAPI"},e.prototype.configure=function(e){var t=e||{},n=t.API,r=void 0===n?{}:n,i=f(t,["API"]),o=c(c({},i),r);if(p.debug("configure Rest API",{opt:o}),o.aws_project_region){if(o.aws_cloud_logic_custom){var s=o.aws_cloud_logic_custom;o.endpoints="string"==typeof s?JSON.parse(s):s}o=Object.assign({},o,{region:o.aws_project_region,header:{}})}return Array.isArray(o.endpoints)?o.endpoints.forEach(function(e){void 0!==e.custom_header&&"function"!=typeof e.custom_header&&(p.warn("Rest API "+e.name+", custom_header should be a function"),e.custom_header=void 0)}):this._options&&Array.isArray(this._options.endpoints)?o.endpoints=this._options.endpoints:o.endpoints=[],this._options=Object.assign({},this._options,o),this.createInstance(),this._options},e.prototype.createInstance=function(){return p.debug("create Rest API instance"),this._api=new o.a(this._options),this._api.Credentials=this.Credentials,!0},e.prototype.get=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.get(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(e){return Promise.reject(e.message)}},e.prototype.post=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.post(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(e){return Promise.reject(e.message)}},e.prototype.put=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.put(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(e){return Promise.reject(e.message)}},e.prototype.patch=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.patch(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(e){return Promise.reject(e.message)}},e.prototype.del=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.del(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(e){return Promise.reject(e.message)}},e.prototype.head=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.head(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(e){return Promise.reject(e.message)}},e.prototype.isCancel=function(e){return this._api.isCancel(e)},e.prototype.cancel=function(e,t){return this._api.cancel(e,t)},e.prototype.hasCancelToken=function(e){return this._api.hasCancelToken(e)},e.prototype.endpoint=function(e){return l(this,void 0,void 0,function(){return d(this,function(t){return[2,this._api.endpoint(e)]})})},e.prototype.getEndpointInfo=function(e,t){var n=this._options.endpoints;if(!Array.isArray(n))throw new Error("API category not configured");var r=n.find(function(t){return t.name===e});if(!r)throw new Error("API "+e+" does not exist");var i={endpoint:r.endpoint+t};return"string"==typeof r.region?i.region=r.region:"string"==typeof this._options.region&&(i.region=this._options.region),"string"==typeof r.service?i.service=r.service||"execute-api":i.service="execute-api","function"==typeof r.custom_header?i.custom_header=r.custom_header:i.custom_header=void 0,i},e}(),v=new h(null);u.a.register(v);var g=n(173),y=function(){return(y=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},m=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},b=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},w=new s.a("API"),_=function(){function e(e){this.Auth=r.a,this.Cache=i.b,this.Credentials=a.a,this._options=e,this._restApi=new h(e),this._graphqlApi=new g.a(e),w.debug("API Options",this._options)}return e.prototype.getModuleName=function(){return"API"},e.prototype.configure=function(e){this._options=Object.assign({},this._options,e),this._restApi.Credentials=this.Credentials,this._graphqlApi.Auth=this.Auth,this._graphqlApi.Cache=this.Cache,this._graphqlApi.Credentials=this.Credentials;var t=this._restApi.configure(this._options),n=this._graphqlApi.configure(this._options);return y(y({},t),n)},e.prototype.get=function(e,t,n){return this._restApi.get(e,t,n)},e.prototype.post=function(e,t,n){return this._restApi.post(e,t,n)},e.prototype.put=function(e,t,n){return this._restApi.put(e,t,n)},e.prototype.patch=function(e,t,n){return this._restApi.patch(e,t,n)},e.prototype.del=function(e,t,n){return this._restApi.del(e,t,n)},e.prototype.head=function(e,t,n){return this._restApi.head(e,t,n)},e.prototype.isCancel=function(e){return this._restApi.isCancel(e)},e.prototype.cancel=function(e,t){return this._restApi.hasCancelToken(e)?this._restApi.cancel(e,t):!!this._graphqlApi.hasCancelToken(e)&&this._graphqlApi.cancel(e,t)},e.prototype.endpoint=function(e){return m(this,void 0,void 0,function(){return b(this,function(t){return[2,this._restApi.endpoint(e)]})})},e.prototype.getGraphqlOperationType=function(e){return this._graphqlApi.getGraphqlOperationType(e)},e.prototype.graphql=function(e,t){return this._graphqlApi.graphql(e,t)},e}(),S=new _(null);u.a.register(S)},function(e,t,n){var r=n(264),i=n(267);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},function(e,t,n){"use strict";n.d(t,"b",function(){return g}),n.d(t,"a",function(){return y});var r=n(48),i=n(34),o=n(429),s=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},a=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},u=new r.a("CognitoCredentials"),c=new Promise(function(e,t){return Object(i.b)().isBrowser?window.gapi&&window.gapi.auth2&&window.gapi.auth2?(u.debug("google api already loaded"),e()):void setTimeout(function(){return e()},2e3):(u.debug("not in the browser, directly resolved"),e())}),l=function(){function e(){this.initialized=!1,this.refreshGoogleToken=this.refreshGoogleToken.bind(this),this._refreshGoogleTokenImpl=this._refreshGoogleTokenImpl.bind(this)}return e.prototype.refreshGoogleToken=function(){return s(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return this.initialized?[3,2]:(u.debug("need to wait for the Google SDK loaded"),[4,c]);case 1:e.sent(),this.initialized=!0,u.debug("finish waiting"),e.label=2;case 2:return[2,this._refreshGoogleTokenImpl()]}})})},e.prototype._refreshGoogleTokenImpl=function(){var e=null;return Object(i.b)().isBrowser&&(e=window.gapi&&window.gapi.auth2?window.gapi.auth2:null),e?new Promise(function(t,n){e.getAuthInstance().then(function(e){e||(u.debug("google Auth undefined"),n(new o.a("google Auth undefined")));var r=e.currentUser.get();r.isSignedIn()?(u.debug("refreshing the google access token"),r.reloadAuthResponse().then(function(e){var n=e.id_token,r=e.expires_at;t({token:n,expires_at:r})}).catch(function(e){e&&"network_error"===e.error?n("Network error reloading google auth response"):n(new o.a("Failed to reload google auth response"))})):n(new o.a("User is not signed in with Google"))}).catch(function(e){u.debug("Failed to refresh google token",e),n(new o.a("Failed to refresh google token"))})}):(u.debug("no gapi auth2 available"),Promise.reject("no gapi auth2 available"))},e}(),d=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},f=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},p=new r.a("CognitoCredentials"),h=new Promise(function(e,t){return Object(i.b)().isBrowser?window.FB?(p.debug("FB SDK already loaded"),e()):void setTimeout(function(){return e()},2e3):(p.debug("not in the browser, directly resolved"),e())}),v=function(){function e(){this.initialized=!1,this.refreshFacebookToken=this.refreshFacebookToken.bind(this),this._refreshFacebookTokenImpl=this._refreshFacebookTokenImpl.bind(this)}return e.prototype.refreshFacebookToken=function(){return d(this,void 0,void 0,function(){return f(this,function(e){switch(e.label){case 0:return this.initialized?[3,2]:(p.debug("need to wait for the Facebook SDK loaded"),[4,h]);case 1:e.sent(),this.initialized=!0,p.debug("finish waiting"),e.label=2;case 2:return[2,this._refreshFacebookTokenImpl()]}})})},e.prototype._refreshFacebookTokenImpl=function(){var e=null;return Object(i.b)().isBrowser&&(e=window.FB),e?new Promise(function(t,n){e.getLoginStatus(function(e){if(e&&e.authResponse){var r=e.authResponse,i=r.accessToken,s=1e3*r.expiresIn+(new Date).getTime();i||(a="the jwtToken is undefined",p.debug(a),n(new o.a(a))),t({token:i,expires_at:s})}else{var a="no response from facebook when refreshing the jwt token";p.debug(a),n(new o.a(a))}},{scope:"public_profile,email"})}):(p.debug("no fb sdk available"),Promise.reject(new o.a("no fb sdk available")))},e}(),g=new l,y=new v},function(e,t,n){"use strict";function r(e){var t=e.error;return u((void 0===t?{errors:[]}:t).errors,1)[0]}function i(e){return a(p,e)}function o(e){return a(h,e)}function s(e){return a(v,e)}function a(e,t){var n,r,i=c(Object.keys(e));try{for(var o=l(i),s=o.next();!s.done;s=o.next()){var a=s.value;if((0,e[a])(t))return a}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return"Unknown"}n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o}),n.d(t,"c",function(){return s});var u=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},c=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(u(arguments[t]));return e},l=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},d=function(e){return/^Connection failed: Connection Timeout/.test(e.message)},f=function(e){return/^Error: Request failed with status code 5\d\d/.test(e.message)},p={BadModel:function(){return!1},BadRecord:function(e){var t=e.message;return/^Cannot return \w+ for [\w-_]+ type/.test(t)||/^Variable '.+' has coerced Null value for NonNull type/.test(t)},ConfigError:function(){return!1},Transient:function(e){return d(e)||f(e)},Unauthorized:function(e){return/^Request failed with status code 401/.test(e.message)}},h={BadModel:function(){return!1},BadRecord:function(){return!1},ConfigError:function(){return!1},Transient:function(e){var t=r(e);return d(t)||f(t)},Unauthorized:function(e){var t=r(e);return/Connection failed.+Unauthorized/.test(t.message)}},v={BadModel:function(){return!1},BadRecord:function(e){return/^Cannot return \w+ for [\w-_]+ type/.test(e.message)},ConfigError:function(){return!1},Transient:function(e){return d(e)||f(e)},Unauthorized:function(){return!1}}},function(e,t,n){"use strict";function r(e,t){function n(){this.constructor=e}if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function i(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})}function o(e,t){function n(n){return function(u){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,n[0]&&(a=0)),a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,u])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s}n.d(t,"a",function(){return u});var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){
for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};Object.create,Object.create;var a=function(e){function t(n,r){void 0===r&&(r=!0);var i=e.call(this,n)||this;return i.tryNextLink=r,i.name="ProviderError",Object.setPrototypeOf(i,t.prototype),i}return r(t,e),t.from=function(e,t){return void 0===t&&(t=!0),Object.assign(new this(e.message,t),e)},t}(Error);(function(e){function t(n,r){void 0===r&&(r=!0);var i=e.call(this,n,r)||this;return i.tryNextLink=r,i.name="CredentialsProviderError",Object.setPrototypeOf(i,t.prototype),i}r(t,e)})(a),function(e){function t(n,r){void 0===r&&(r=!0);var i=e.call(this,n,r)||this;return i.tryNextLink=r,i.name="TokenProviderError",Object.setPrototypeOf(i,t.prototype),i}r(t,e)}(a);var u=function(e,t,n){var r,s,a,u=!1,c=function(){return i(void 0,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:s||(s=e()),t.label=1;case 1:return t.trys.push([1,,3,4]),[4,s];case 2:return r=t.sent(),a=!0,u=!1,[3,4];case 3:return s=void 0,[7];case 4:return[2,r]}})})};return void 0===t?function(e){return i(void 0,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return a&&!(null==e?void 0:e.forceRefresh)?[3,2]:[4,c()];case 1:r=t.sent(),t.label=2;case 2:return[2,r]}})})}:function(e){return i(void 0,void 0,void 0,function(){return o(this,function(i){switch(i.label){case 0:return a&&!(null==e?void 0:e.forceRefresh)?[3,2]:[4,c()];case 1:r=i.sent(),i.label=2;case 2:return u?[2,r]:n&&!n(r)?(u=!0,[2,r]):t(r)?[4,c()]:[3,4];case 3:return i.sent(),[2,r];case 4:return[2,r]}})})}}},function(e,t,n){var r;e.exports=(r=n(38),n(115),n(212),r.HmacSHA256)},function(e,t,n){"use strict";function r(e,t){try{return t(e)}catch(t){return e}}t.parse=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var n={},o=t||{},s=e.split(";"),a=o.decode||i,u=0;u<s.length;u++){var c=s[u],l=c.indexOf("=");if(!(l<0)){var d=c.substring(0,l).trim();if(null==n[d]){var f=c.substring(l+1,c.length).trim();'"'===f[0]&&(f=f.slice(1,-1)),n[d]=r(f,a)}}}return n},t.serialize=function(e,t,n){var r=n||{},i=r.encode||o;if("function"!=typeof i)throw new TypeError("option encode is invalid");if(!s.test(e))throw new TypeError("argument name is invalid");var a=i(t);if(a&&!s.test(a))throw new TypeError("argument val is invalid");var u=e+"="+a;if(null!=r.maxAge){var c=r.maxAge-0;if(isNaN(c)||!isFinite(c))throw new TypeError("option maxAge is invalid");u+="; Max-Age="+Math.floor(c)}if(r.domain){if(!s.test(r.domain))throw new TypeError("option domain is invalid");u+="; Domain="+r.domain}if(r.path){if(!s.test(r.path))throw new TypeError("option path is invalid");u+="; Path="+r.path}if(r.expires){if("function"!=typeof r.expires.toUTCString)throw new TypeError("option expires is invalid");u+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(u+="; HttpOnly"),r.secure&&(u+="; Secure"),r.sameSite)switch("string"==typeof r.sameSite?r.sameSite.toLowerCase():r.sameSite){case!0:u+="; SameSite=Strict";break;case"lax":u+="; SameSite=Lax";break;case"strict":u+="; SameSite=Strict";break;case"none":u+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return u};var i=decodeURIComponent,o=encodeURIComponent,s=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/},function(e,t,n){var r=n(351),i=n(352),o=i;o.v1=r,o.v4=i,e.exports=o},function(e,t,n){"use strict";(function(e){n.d(t,"c",function(){return u}),n.d(t,"d",function(){return c}),n.d(t,"a",function(){return l}),n.d(t,"b",function(){return f});var r=n(0),i=n(17),o=n(5),s=n(33),a=n(32),u=function(t,n){return Object(r.b)(void 0,void 0,void 0,function(){var s,a,u,c,l,d,f,p,v;return Object(r.d)(this,function(r){switch(r.label){case 0:return[4,n.endpoint()];case 1:return s=r.sent(),a=s.hostname,u=s.protocol,c=void 0===u?"https":u,l=s.port,d=s.path,f=h({},K,{"x-amz-content-sha256":"UNSIGNED-PAYLOAD","content-type":t.contentType||"application/octet-stream","x-amz-lex-session-attributes":[function(){return K(t.sessionAttributes)},function(){return n.base64Encoder(e.from(o.c.fromObject(t.sessionAttributes)))}],"x-amz-lex-request-attributes":[function(){return K(t.requestAttributes)},function(){return n.base64Encoder(e.from(o.c.fromObject(t.requestAttributes)))}],accept:t.accept,"x-amz-lex-active-contexts":[function(){return K(t.activeContexts)},function(){return n.base64Encoder(e.from(o.c.fromObject(t.activeContexts)))}]}),p="".concat((null==d?void 0:d.endsWith("/"))?d.slice(0,-1):d||"")+"/bot/{botName}/alias/{botAlias}/user/{userId}/content",p=Object(o.n)(p,t,"botName",function(){return t.botName},"{botName}",!1),p=Object(o.n)(p,t,"botAlias",function(){return t.botAlias},"{botAlias}",!1),p=Object(o.n)(p,t,"userId",function(){return t.userId},"{userId}",!1),void 0!==t.inputStream&&(v=t.inputStream),[2,new i.a({protocol:c,hostname:a,port:l,method:"POST",headers:f,path:p,body:v})]}})})},c=function(e,t){return Object(r.b)(void 0,void 0,void 0,function(){var n,s,a,u,c,l,d,f,p;return Object(r.d)(this,function(h){switch(h.label){case 0:return[4,t.endpoint()];case 1:return n=h.sent(),s=n.hostname,a=n.protocol,u=void 0===a?"https":a,c=n.port,l=n.path,d={"content-type":"application/json"},f="".concat((null==l?void 0:l.endsWith("/"))?l.slice(0,-1):l||"")+"/bot/{botName}/alias/{botAlias}/user/{userId}/text",f=Object(o.n)(f,e,"botName",function(){return e.botName},"{botName}",!1),f=Object(o.n)(f,e,"botAlias",function(){return e.botAlias},"{botAlias}",!1),f=Object(o.n)(f,e,"userId",function(){return e.userId},"{userId}",!1),p=JSON.stringify(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)({},null!=e.activeContexts&&{activeContexts:I(e.activeContexts,t)}),null!=e.inputText&&{inputText:e.inputText}),null!=e.requestAttributes&&{requestAttributes:T(e.requestAttributes,t)}),null!=e.sessionAttributes&&{sessionAttributes:T(e.sessionAttributes,t)})),[2,new i.a({protocol:u,hostname:s,port:c,method:"POST",headers:d,path:f,body:p})]}})})},l=function(t,n){return Object(r.b)(void 0,void 0,void 0,function(){var i,s;return Object(r.d)(this,function(r){return 200!==t.statusCode&&t.statusCode>=300?[2,d(t,n)]:(i=h({$metadata:z(t),contentType:[,t.headers["content-type"]],intentName:[,t.headers["x-amz-lex-intent-name"]],nluIntentConfidence:[function(){return void 0!==t.headers["x-amz-lex-nlu-intent-confidence"]},function(){return new o.c(e.from(n.base64Decoder(t.headers["x-amz-lex-nlu-intent-confidence"])).toString("utf8"))}],alternativeIntents:[function(){return void 0!==t.headers["x-amz-lex-alternative-intents"]},function(){return new o.c(e.from(n.base64Decoder(t.headers["x-amz-lex-alternative-intents"])).toString("utf8"))}],slots:[function(){return void 0!==t.headers["x-amz-lex-slots"]},function(){return new o.c(e.from(n.base64Decoder(t.headers["x-amz-lex-slots"])).toString("utf8"))}],sessionAttributes:[function(){return void 0!==t.headers["x-amz-lex-session-attributes"]},function(){return new o.c(e.from(n.base64Decoder(t.headers["x-amz-lex-session-attributes"])).toString("utf8"))}],sentimentResponse:[,t.headers["x-amz-lex-sentiment"]],message:[,t.headers["x-amz-lex-message"]],encodedMessage:[,t.headers["x-amz-lex-encoded-message"]],messageFormat:[,t.headers["x-amz-lex-message-format"]],dialogState:[,t.headers["x-amz-lex-dialog-state"]],slotToElicit:[,t.headers["x-amz-lex-slot-to-elicit"]],inputTranscript:[,t.headers["x-amz-lex-input-transcript"]],encodedInputTranscript:[,t.headers["x-amz-lex-encoded-input-transcript"]],botVersion:[,t.headers["x-amz-lex-bot-version"]],sessionId:[,t.headers["x-amz-lex-session-id"]],activeContexts:[function(){return void 0!==t.headers["x-amz-lex-active-contexts"]},function(){return new o.c(e.from(n.base64Decoder(t.headers["x-amz-lex-active-contexts"])).toString("utf8"))}]}),s=t.body,i.audioStream=s,[2,i])})})},d=function(e,t){return Object(r.b)(void 0,void 0,void 0,function(){var n,i,a,u,c;return Object(r.d)(this,function(l){switch(l.label){case 0:return i=[Object(r.a)({},e)],c={},[4,V(e.body,t)];case 1:switch(n=r.a.apply(void 0,i.concat([(c.body=l.sent(),c)])),a=G(e,n.body)){case"BadGatewayException":case"com.amazonaws.lexruntimeservice#BadGatewayException":return[3,2];case"BadRequestException":case"com.amazonaws.lexruntimeservice#BadRequestException":return[3,4];case"ConflictException":case"com.amazonaws.lexruntimeservice#ConflictException":return[3,6];case"DependencyFailedException":case"com.amazonaws.lexruntimeservice#DependencyFailedException":return[3,8];case"InternalFailureException":case"com.amazonaws.lexruntimeservice#InternalFailureException":return[3,10];case"LimitExceededException":case"com.amazonaws.lexruntimeservice#LimitExceededException":return[3,12];case"LoopDetectedException":case"com.amazonaws.lexruntimeservice#LoopDetectedException":return[3,14];case"NotAcceptableException":case"com.amazonaws.lexruntimeservice#NotAcceptableException":return[3,16];case"NotFoundException":case"com.amazonaws.lexruntimeservice#NotFoundException":return[3,18];case"RequestTimeoutException":case"com.amazonaws.lexruntimeservice#RequestTimeoutException":return[3,20];case"UnsupportedMediaTypeException":case"com.amazonaws.lexruntimeservice#UnsupportedMediaTypeException":return[3,22]}return[3,24];case 2:return[4,v(n,t)];case 3:throw l.sent();case 4:return[4,g(n,t)];case 5:throw l.sent();case 6:return[4,y(n,t)];case 7:throw l.sent();case 8:return[4,m(n,t)];case 9:throw l.sent();case 10:return[4,b(n,t)];case 11:throw l.sent();case 12:return[4,w(n,t)];case 13:throw l.sent();case 14:return[4,_(n,t)];case 15:throw l.sent();case 16:return[4,S(n,t)];case 17:throw l.sent();case 18:return[4,E(n,t)];case 19:throw l.sent();case 20:return[4,C(n,t)];case 21:throw l.sent();case 22:return[4,A(n,t)];case 23:throw l.sent();case 24:u=n.body,Object(o.o)({output:e,parsedBody:u,exceptionCtor:s.a,errorCode:a}),l.label=25;case 25:return[2]}})})},f=function(e,t){return Object(r.b)(void 0,void 0,void 0,function(){var n,i,s,a;return Object(r.d)(this,function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,p(e,t)]:(n=h({$metadata:z(e)}),s=o.h,a=o.i,[4,$(e.body,t)]);case 1:return null!=(i=s.apply(void 0,[a.apply(void 0,[r.sent()]),"body"])).activeContexts&&(n.activeContexts=k(i.activeContexts,t)),null!=i.alternativeIntents&&(n.alternativeIntents=L(i.alternativeIntents,t)),null!=i.botVersion&&(n.botVersion=Object(o.j)(i.botVersion)),null!=i.dialogState&&(n.dialogState=Object(o.j)(i.dialogState)),null!=i.intentName&&(n.intentName=Object(o.j)(i.intentName)),null!=i.message&&(n.message=Object(o.j)(i.message)),null!=i.messageFormat&&(n.messageFormat=Object(o.j)(i.messageFormat)),null!=i.nluIntentConfidence&&(n.nluIntentConfidence=M(i.nluIntentConfidence,t)),null!=i.responseCard&&(n.responseCard=U(i.responseCard,t)),null!=i.sentimentResponse&&(n.sentimentResponse=F(i.sentimentResponse,t)),null!=i.sessionAttributes&&(n.sessionAttributes=B(i.sessionAttributes,t)),null!=i.sessionId&&(n.sessionId=Object(o.j)(i.sessionId)),null!=i.slotToElicit&&(n.slotToElicit=Object(o.j)(i.slotToElicit)),null!=i.slots&&(n.slots=B(i.slots,t)),[2,n]}})})},p=function(e,t){return Object(r.b)(void 0,void 0,void 0,function(){var n,i,a,u,c;return Object(r.d)(this,function(l){switch(l.label){case 0:return i=[Object(r.a)({},e)],c={},[4,V(e.body,t)];case 1:switch(n=r.a.apply(void 0,i.concat([(c.body=l.sent(),c)])),a=G(e,n.body)){case"BadGatewayException":case"com.amazonaws.lexruntimeservice#BadGatewayException":return[3,2];case"BadRequestException":case"com.amazonaws.lexruntimeservice#BadRequestException":return[3,4];case"ConflictException":case"com.amazonaws.lexruntimeservice#ConflictException":return[3,6];case"DependencyFailedException":case"com.amazonaws.lexruntimeservice#DependencyFailedException":return[3,8];case"InternalFailureException":case"com.amazonaws.lexruntimeservice#InternalFailureException":return[3,10];case"LimitExceededException":case"com.amazonaws.lexruntimeservice#LimitExceededException":return[3,12];case"LoopDetectedException":case"com.amazonaws.lexruntimeservice#LoopDetectedException":return[3,14];case"NotFoundException":case"com.amazonaws.lexruntimeservice#NotFoundException":return[3,16]}return[3,18];case 2:return[4,v(n,t)];case 3:throw l.sent();case 4:return[4,g(n,t)];case 5:throw l.sent();case 6:return[4,y(n,t)];case 7:throw l.sent();case 8:return[4,m(n,t)];case 9:throw l.sent();case 10:return[4,b(n,t)];case 11:throw l.sent();case 12:return[4,w(n,t)];case 13:throw l.sent();case 14:return[4,_(n,t)];case 15:throw l.sent();case 16:return[4,E(n,t)];case 17:throw l.sent();case 18:u=n.body,Object(o.o)({output:e,parsedBody:u,exceptionCtor:s.a,errorCode:a}),l.label=19;case 19:return[2]}})})},h=o.m,v=function(e,t){return Object(r.b)(void 0,void 0,void 0,function(){var t,n,i;return Object(r.d)(this,function(s){return t=h({}),null!=(n=e.body).Message&&(t.Message=Object(o.j)(n.Message)),i=new a.a(Object(r.a)({$metadata:z(e)},t)),[2,Object(o.f)(i,e.body)]})})},g=function(e,t){return Object(r.b)(void 0,void 0,void 0,function(){var t,n,i;return Object(r.d)(this,function(s){return t=h({}),null!=(n=e.body).message&&(t.message=Object(o.j)(n.message)),i=new a.b(Object(r.a)({$metadata:z(e)},t)),[2,Object(o.f)(i,e.body)]})})},y=function(e,t){return Object(r.b)(void 0,void 0,void 0,function(){var t,n,i;return Object(r.d)(this,function(s){return t=h({}),null!=(n=e.body).message&&(t.message=Object(o.j)(n.message)),i=new a.c(Object(r.a)({$metadata:z(e)},t)),[2,Object(o.f)(i,e.body)]})})},m=function(e,t){return Object(r.b)(void 0,void 0,void 0,function(){var t,n,i;return Object(r.d)(this,function(s){return t=h({}),null!=(n=e.body).Message&&(t.Message=Object(o.j)(n.Message)),i=new a.d(Object(r.a)({$metadata:z(e)},t)),[2,Object(o.f)(i,e.body)]})})},b=function(e,t){return Object(r.b)(void 0,void 0,void 0,function(){var t,n,i;return Object(r.d)(this,function(s){return t=h({}),null!=(n=e.body).message&&(t.message=Object(o.j)(n.message)),i=new a.e(Object(r.a)({$metadata:z(e)},t)),[2,Object(o.f)(i,e.body)]})})},w=function(e,t){return Object(r.b)(void 0,void 0,void 0,function(){var t,n,i;return Object(r.d)(this,function(s){return t=h({retryAfterSeconds:[,e.headers["retry-after"]]}),null!=(n=e.body).message&&(t.message=Object(o.j)(n.message)),i=new a.f(Object(r.a)({$metadata:z(e)},t)),[2,Object(o.f)(i,e.body)]})})},_=function(e,t){return Object(r.b)(void 0,void 0,void 0,function(){var t,n,i;return Object(r.d)(this,function(s){return t=h({}),null!=(n=e.body).Message&&(t.Message=Object(o.j)(n.Message)),i=new a.g(Object(r.a)({$metadata:z(e)},t)),[2,Object(o.f)(i,e.body)]})})},S=function(e,t){return Object(r.b)(void 0,void 0,void 0,function(){var t,n,i;return Object(r.d)(this,function(s){return t=h({}),null!=(n=e.body).message&&(t.message=Object(o.j)(n.message)),i=new a.h(Object(r.a)({$metadata:z(e)},t)),[2,Object(o.f)(i,e.body)]})})},E=function(e,t){return Object(r.b)(void 0,void 0,void 0,function(){var t,n,i;return Object(r.d)(this,function(s){return t=h({}),null!=(n=e.body).message&&(t.message=Object(o.j)(n.message)),i=new a.i(Object(r.a)({$metadata:z(e)},t)),[2,Object(o.f)(i,e.body)]})})},C=function(e,t){return Object(r.b)(void 0,void 0,void 0,function(){var t,n,i;return Object(r.d)(this,function(s){return t=h({}),null!=(n=e.body).message&&(t.message=Object(o.j)(n.message)),i=new a.n(Object(r.a)({$metadata:z(e)},t)),[2,Object(o.f)(i,e.body)]})})},A=function(e,t){return Object(r.b)(void 0,void 0,void 0,function(){var t,n,i;return Object(r.d)(this,function(s){return t=h({}),null!=(n=e.body).message&&(t.message=Object(o.j)(n.message)),i=new a.o(Object(r.a)({$metadata:z(e)},t)),[2,Object(o.f)(i,e.body)]})})},O=function(e,t){return Object.entries(e).reduce(function(e,t){var n,i=Object(r.e)(t,2),o=i[0],s=i[1];return null===s?e:Object(r.a)(Object(r.a)({},e),((n={})[o]=s,n))},{})},I=function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return function(e,t){return Object(r.a)(Object(r.a)(Object(r.a)({},null!=e.name&&{name:e.name}),null!=e.parameters&&{parameters:O(e.parameters,t)}),null!=e.timeToLive&&{timeToLive:x(e.timeToLive,t)})}(e,t)})},x=function(e,t){return Object(r.a)(Object(r.a)({},null!=e.timeToLiveInSeconds&&{timeToLiveInSeconds:e.timeToLiveInSeconds}),null!=e.turnsToLive&&{turnsToLive:e.turnsToLive})},T=function(e,t){return Object.entries(e).reduce(function(e,t){var n,i=Object(r.e)(t,2),o=i[0],s=i[1];return null===s?e:Object(r.a)(Object(r.a)({},e),((n={})[o]=s,n))},{})},P=function(e,t){return Object.entries(e).reduce(function(e,t){var n,i=Object(r.e)(t,2),s=i[0],a=i[1];return null===a?e:Object(r.a)(Object(r.a)({},e),((n={})[s]=Object(o.j)(a),n))},{})},k=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:function(e,t){return{name:Object(o.j)(e.name),parameters:null!=e.parameters?P(e.parameters,t):void 0,timeToLive:null!=e.timeToLive?D(e.timeToLive,t):void 0}}(e,t)})},D=function(e,t){return{timeToLiveInSeconds:Object(o.g)(e.timeToLiveInSeconds),turnsToLive:Object(o.g)(e.turnsToLive)}},N=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:function(e,t){return{attachmentLinkUrl:Object(o.j)(e.attachmentLinkUrl),buttons:null!=e.buttons?j(e.buttons,t):void 0,imageUrl:Object(o.j)(e.imageUrl),subTitle:Object(o.j)(e.subTitle),title:Object(o.j)(e.title)}}(e,t)})},M=function(e,t){return{score:Object(o.k)(e.score)}},L=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:R(e,t)})},j=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:function(e,t){return{text:Object(o.j)(e.text),value:Object(o.j)(e.value)}}(e)})},R=function(e,t){return{intentName:Object(o.j)(e.intentName),nluIntentConfidence:null!=e.nluIntentConfidence?M(e.nluIntentConfidence,t):void 0,slots:null!=e.slots?B(e.slots,t):void 0}},U=function(e,t){return{contentType:Object(o.j)(e.contentType),genericAttachments:null!=e.genericAttachments?N(e.genericAttachments,t):void 0,version:Object(o.j)(e.version)}},F=function(e,t){return{sentimentLabel:Object(o.j)(e.sentimentLabel),sentimentScore:Object(o.j)(e.sentimentScore)}},B=function(e,t){return Object.entries(e).reduce(function(e,t){var n,i=Object(r.e)(t,2),s=i[0],a=i[1];return null===a?e:Object(r.a)(Object(r.a)({},e),((n={})[s]=Object(o.j)(a),n))},{})},z=function(e){var t,n;return{httpStatusCode:e.statusCode,requestId:null!==(n=null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"])&&void 0!==n?n:e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},q=function(e,t){return function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)}(e,t).then(function(e){return t.utf8Encoder(e)})},K=function(e){return!(null==e||""===e||Object.getOwnPropertyNames(e).includes("length")&&0==e.length||Object.getOwnPropertyNames(e).includes("size")&&0==e.size)},$=function(e,t){return q(e,t).then(function(e){return e.length?JSON.parse(e):{}})},V=function(e,t){return Object(r.b)(void 0,void 0,void 0,function(){var n,i;return Object(r.d)(this,function(r){switch(r.label){case 0:return[4,$(e,t)];case 1:return(n=r.sent()).message=null!==(i=n.message)&&void 0!==i?i:n.Message,[2,n]}})})},G=function(e,t){var n,r,i=function(e){var t=e;return"number"==typeof t&&(t=t.toString()),t.indexOf(",")>=0&&(t=t.split(",")[0]),t.indexOf(":")>=0&&(t=t.split(":")[0]),t.indexOf("#")>=0&&(t=t.split("#")[1]),t},o=(n=e.headers,r="x-amzn-errortype",Object.keys(n).find(function(e){return e.toLowerCase()===r.toLowerCase()}));return void 0!==o?i(e.headers[o]):void 0!==t.code?i(t.code):void 0!==t.__type?i(t.__type):void 0}}).call(this,n(12).Buffer)},function(e,t,n){var r,i,o;o=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function i(){}function o(t,n,o){if("undefined"!=typeof document){"number"==typeof(o=e({path:"/"},i.defaults,o)).expires&&(o.expires=new Date(1*new Date+864e5*o.expires)),o.expires=o.expires?o.expires.toUTCString():"";try{var s=JSON.stringify(n);/^[\{\[]/.test(s)&&(n=s)}catch(e){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var a="";for(var u in o)o[u]&&(a+="; "+u,!0!==o[u]&&(a+="="+o[u].split(";")[0]));return document.cookie=t+"="+n+a}}function s(e,n){if("undefined"!=typeof document){for(var i={},o=document.cookie?document.cookie.split("; "):[],s=0;s<o.length;s++){var a=o[s].split("="),u=a.slice(1).join("=");n||'"'!==u.charAt(0)||(u=u.slice(1,-1));try{var c=t(a[0]);if(u=(r.read||r)(u,c)||t(u),n)try{u=JSON.parse(u)}catch(e){}if(i[c]=u,e===c)break}catch(e){}}return e?i[e]:i}}return i.set=o,i.get=function(e){return s(e,!1)},i.getJSON=function(e){return s(e,!0)},i.remove=function(t,n){o(t,"",e(n,{expires:-1}))},i.defaults={},i.withConverter=n,i}(function(){})},void 0===(i="function"==typeof(r=o)?r.call(t,n,t,e):r)||(e.exports=i),e.exports=o()},,function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function o(){h&&f&&(h=!1,f.length?p=f.concat(p):v=-1,p.length&&s())}function s(){if(!h){var e=i(o);h=!0;for(var t=p.length;t;){for(f=p,p=[];++v<t;)f&&f[v].run();v=-1,t=p.length}f=null,h=!1,function(e){if(l===clearTimeout)return clearTimeout(e);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(e);try{l(e)}catch(t){try{return l.call(null,e)}catch(t){return l.call(this,e)}}}(e)}}function a(e,t){this.fun=e,this.array=t}function u(){}var c,l,d=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{l="function"==typeof clearTimeout?clearTimeout:r}catch(e){l=r}}();var f,p=[],h=!1,v=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new a(e,t)),1!==p.length||h||i(s)},a.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=u,d.addListener=u,d.once=u,d.off=u,d.removeListener=u,d.removeAllListeners=u,d.emit=u,d.prependListener=u,d.prependOnceListener=u,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,n){var r=n(82),i=n(256),o=n(257),s=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?i(e):o(e)}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r={},i=function(){function e(){}return e.setItem=function(e,t){return r[e]=t,r[e]},e.getItem=function(e){return Object.prototype.hasOwnProperty.call(r,e)?r[e]:void 0},e.removeItem=function(e){return delete r[e]},e.clear=function(){return r={}},e}(),o=function(){function e(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.amplify.test-ls",1),this.storageWindow.removeItem("aws.amplify.test-ls")}catch(e){this.storageWindow=i}}return e.prototype.getStorage=function(){return this.storageWindow},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(48),i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},o=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},s=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e},a=new r.a("Hub"),u="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",c=new(function(){function e(e){this.listeners=[],this.patterns=[],this.protectedChannels=["core","auth","api","analytics","interactions","pubsub","storage","ui","xr"],this.name=e}return e.prototype.remove=function(e,t){if(e instanceof RegExp){var n=this.patterns.find(function(t){return t.pattern.source===e.source});if(!n)return void a.warn("No listeners for "+e);this.patterns=s(this.patterns.filter(function(e){return e!==n}))}else{var r=this.listeners[e];if(!r)return void a.warn("No listeners for "+e);this.listeners[e]=s(r.filter(function(e){return e.callback!==t}))}},e.prototype.dispatch=function(e,t,n,r){void 0===n&&(n=""),this.protectedChannels.indexOf(e)>-1&&(r===u||a.warn("WARNING: "+e+" is protected and dispatching on it can have unintended consequences"));var o={channel:e,payload:i({},t),source:n,patternInfo:[]};try{this._toListeners(o)}catch(e){a.error(e)}},e.prototype.listen=function(e,t,n){var r,i=this;if(void 0===n&&(n="noname"),function(e){return void 0!==e.onHubCapsule}(t))a.warn("WARNING onHubCapsule is Deprecated. Please pass in a callback."),r=t.onHubCapsule.bind(t);else{if("function"!=typeof t)throw new Error("No callback supplied to Hub");r=t}if(e instanceof RegExp)this.patterns.push({pattern:e,callback:r});else{var o=this.listeners[e];o||(o=[],this.listeners[e]=o),o.push({name:n,callback:r})}return function(){i.remove(e,r)}},e.prototype._toListeners=function(e){var t=e.channel,n=e.payload,r=this.listeners[t];if(r&&r.forEach(function(r){a.debug("Dispatching to "+t+" with ",n);try{r.callback(e)}catch(e){a.error(e)}}),this.patterns.length>0){if(!n.message)return void a.warn("Cannot perform pattern matching without a message key");var s=n.message;this.patterns.forEach(function(t){var n=s.match(t.pattern);if(n){var r=o(n).slice(1),u=i(i({},e),{patternInfo:r});try{t.callback(u)}catch(e){a.error(e)}}})}},e}())("__default__")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AwsCrc32=t.Crc32=t.crc32=void 0;var r=n(2),i=n(135);t.crc32=function(e){return(new o).update(e).digest()};var o=function(){function e(){this.checksum=4294967295}return e.prototype.update=function(e){var t,n;try{for(var i=(0,r.__values)(e),o=i.next();!o.done;o=i.next()){var a=o.value;this.checksum=this.checksum>>>8^s[255&(this.checksum^a)]}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return this},e.prototype.digest=function(){return(4294967295^this.checksum)>>>0},e}();t.Crc32=o;var s=(0,i.uint32ArrayFrom)([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]),a=n(252);Object.defineProperty(t,"AwsCrc32",{enumerable:!0,get:function(){return a.AwsCrc32}})},function(e,t,n){"use strict";function r(e,t){function n(){this.constructor=e}if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Ae(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function i(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})}function o(e,t){function n(n){return function(u){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,n[0]&&(a=0)),a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,u])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s}function s(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){
i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function a(e){return Promise.all(Object.keys(e).reduce(function(t,n){var r=e[n];return"string"==typeof r?t.push([n,r]):t.push(r().then(function(e){return[n,e]})),t},[])).then(function(e){return e.reduce(function(e,t){var n=Object(Ce.__read)(t,2),r=n[0],i=n[1];return e[r]=i,e},{})})}function u(e){var t=this;return function(){return Object(Ce.__awaiter)(t,void 0,void 0,function(){var t,n,r,i,o,s,u,c,l,d,f,p,h;return Object(Ce.__generator)(this,function(v){switch(v.label){case 0:return d=(l=e.client).send,f=at.bind,h={CustomRoleArn:e.customRoleArn,IdentityId:e.identityId},e.logins?[4,a(e.logins)]:[3,2];case 1:return p=v.sent(),[3,3];case 2:p=void 0,v.label=3;case 3:return[4,d.apply(l,[new(f.apply(at,[void 0,(h.Logins=p,h)]))])];case 4:return t=v.sent().Credentials,n=void 0===t?function(){throw new ut("Response from Amazon Cognito contained no credentials")}():t,r=n.AccessKeyId,i=void 0===r?function(){throw new ut("Response from Amazon Cognito contained no access key ID")}():r,o=n.Expiration,s=n.SecretKey,u=void 0===s?function(){throw new ut("Response from Amazon Cognito contained no secret key")}():s,c=n.SessionToken,[2,{identityId:e.identityId,accessKeyId:i,secretAccessKey:u,sessionToken:c,expiration:o}]}})})}}function c(e){var t=this,n=e.accountId,r=e.cache,i=void 0===r?"object"==typeof self&&self.indexedDB?new lt:"object"==typeof window&&window.localStorage?window.localStorage:dt:r,o=e.client,s=e.customRoleArn,c=e.identityPoolId,l=e.logins,d=e.userIdentifier,f=void 0===d?l&&0!==Object.keys(l).length?void 0:"ANONYMOUS":d,p=f?"aws:cognito-identity-credentials:"+c+":"+f:void 0,h=function(){return Object(Ce.__awaiter)(t,void 0,void 0,function(){var e,t,r,d,f,v,g,y,m;return Object(Ce.__generator)(this,function(b){switch(b.label){case 0:return(t=p)?[4,i.getItem(p)]:[3,2];case 1:t=b.sent(),b.label=2;case 2:return(e=t)?[3,7]:(v=(f=o).send,g=ct.bind,m={AccountId:n,IdentityPoolId:c},l?[4,a(l)]:[3,4]);case 3:return y=b.sent(),[3,5];case 4:y=void 0,b.label=5;case 5:return[4,v.apply(f,[new(g.apply(ct,[void 0,(m.Logins=y,m)]))])];case 6:r=b.sent().IdentityId,d=void 0===r?function(){throw new ut("Response from Amazon Cognito contained no identity ID")}():r,e=d,p&&Promise.resolve(i.setItem(p,e)).catch(function(){}),b.label=7;case 7:return[2,(h=u({client:o,customRoleArn:s,logins:l,identityId:e}))()]}})})};return function(){return h().catch(function(e){return Object(Ce.__awaiter)(t,void 0,void 0,function(){return Object(Ce.__generator)(this,function(t){throw p&&Promise.resolve(i.removeItem(p)).catch(function(){}),e})})})}}function l(e,t){function n(){this.constructor=e}if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");ft(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function d(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})}function f(e,t){function n(n){return function(u){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,n[0]&&(a=0)),a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,u])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s}function p(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}n.d(t,"a",function(){return Ar});var h,v,g,y,m,b,w,_,S,E,C,A,O,I,x,T,P,k,D,N,M,L,j,R,U,F,B,z,q,K,$,V,G,W,H,J,Y,Z,X,Q,ee,te,ne,re,ie,oe,se,ae,ue,ce,le,de,fe,pe,he,ve,ge,ye=n(48),me=n(77),be=n(34),we=n(64),_e=n(429),Se=n(49),Ee=n(20),Ce=n(2),Ae=function(e,t){return(Ae=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},Oe=function(){return(Oe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.create,Object.create,function(e){e.AUTHENTICATED_ROLE="AuthenticatedRole",e.DENY="Deny"}(h||(h={})),(v||(v={})).filterSensitiveLog=function(e){return Oe({},e)},(g||(g={})).filterSensitiveLog=function(e){return Oe({},e)},(y||(y={})).filterSensitiveLog=function(e){return Oe({},e)},(m||(m={})).filterSensitiveLog=function(e){return Oe({},e)},(b||(b={})).filterSensitiveLog=function(e){return Oe({},e)},(w||(w={})).filterSensitiveLog=function(e){return Oe({},e)},(_||(_={})).filterSensitiveLog=function(e){return Oe({},e)},(S||(S={})).filterSensitiveLog=function(e){return Oe({},e)},(E||(E={})).filterSensitiveLog=function(e){return Oe({},e)},(C||(C={})).filterSensitiveLog=function(e){return Oe({},e)},function(e){e.ACCESS_DENIED="AccessDenied",e.INTERNAL_SERVER_ERROR="InternalServerError"}(A||(A={})),(O||(O={})).filterSensitiveLog=function(e){return Oe({},e)},(I||(I={})).filterSensitiveLog=function(e){return Oe({},e)},(x||(x={})).filterSensitiveLog=function(e){return Oe({},e)},(T||(T={})).filterSensitiveLog=function(e){return Oe({},e)},(P||(P={})).filterSensitiveLog=function(e){return Oe({},e)},(k||(k={})).filterSensitiveLog=function(e){return Oe({},e)},(D||(D={})).filterSensitiveLog=function(e){return Oe({},e)},(N||(N={})).filterSensitiveLog=function(e){return Oe({},e)},(M||(M={})).filterSensitiveLog=function(e){return Oe({},e)},(L||(L={})).filterSensitiveLog=function(e){return Oe({},e)},(j||(j={})).filterSensitiveLog=function(e){return Oe({},e)},(R||(R={})).filterSensitiveLog=function(e){return Oe({},e)},(U||(U={})).filterSensitiveLog=function(e){return Oe({},e)},(F||(F={})).filterSensitiveLog=function(e){return Oe({},e)},(B||(B={})).filterSensitiveLog=function(e){return Oe({},e)},function(e){e.CONTAINS="Contains",e.EQUALS="Equals",e.NOT_EQUAL="NotEqual",e.STARTS_WITH="StartsWith"}(z||(z={})),(q||(q={})).filterSensitiveLog=function(e){return Oe({},e)},(K||(K={})).filterSensitiveLog=function(e){return Oe({},e)},function(e){e.RULES="Rules",e.TOKEN="Token"}($||($={})),(V||(V={})).filterSensitiveLog=function(e){return Oe({},e)},(G||(G={})).filterSensitiveLog=function(e){return Oe({},e)},(W||(W={})).filterSensitiveLog=function(e){return Oe({},e)},(H||(H={})).filterSensitiveLog=function(e){return Oe({},e)},(J||(J={})).filterSensitiveLog=function(e){return Oe({},e)},(Y||(Y={})).filterSensitiveLog=function(e){return Oe({},e)},(Z||(Z={})).filterSensitiveLog=function(e){return Oe({},e)},(X||(X={})).filterSensitiveLog=function(e){return Oe({},e)},(Q||(Q={})).filterSensitiveLog=function(e){return Oe({},e)},(ee||(ee={})).filterSensitiveLog=function(e){return Oe({},e)},(te||(te={})).filterSensitiveLog=function(e){return Oe({},e)},(ne||(ne={})).filterSensitiveLog=function(e){return Oe({},e)},(re||(re={})).filterSensitiveLog=function(e){return Oe({},e)},(ie||(ie={})).filterSensitiveLog=function(e){return Oe({},e)},(oe||(oe={})).filterSensitiveLog=function(e){return Oe({},e)},(se||(se={})).filterSensitiveLog=function(e){return Oe({},e)},(ae||(ae={})).filterSensitiveLog=function(e){return Oe({},e)},(ue||(ue={})).filterSensitiveLog=function(e){return Oe({},e)},(ce||(ce={})).filterSensitiveLog=function(e){return Oe({},e)},(le||(le={})).filterSensitiveLog=function(e){return Oe({},e)},(de||(de={})).filterSensitiveLog=function(e){return Oe({},e)},(fe||(fe={})).filterSensitiveLog=function(e){return Oe({},e)},(pe||(pe={})).filterSensitiveLog=function(e){return Oe({},e)},(he||(he={})).filterSensitiveLog=function(e){return Oe({},e)},(ve||(ve={})).filterSensitiveLog=function(e){return Oe({},e)},(ge||(ge={})).filterSensitiveLog=function(e){return Oe({},e)};var Ie=n(3),xe=function(e,t){return i(void 0,void 0,void 0,function(){var n,r,i,s,a,u,c,l,d,f,p,h,v,g,y;return o(this,function(o){switch(o.label){case 0:return r=[Oe({},e)],y={},[4,rt(e.body,t)];case 1:switch(n=Oe.apply(void 0,r.concat([(y.body=o.sent(),y)])),s="UnknownError",s=it(e,n.body)){case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":return[3,2];case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,4];case"InvalidIdentityPoolConfigurationException":case"com.amazonaws.cognitoidentity#InvalidIdentityPoolConfigurationException":return[3,6];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,8];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,10];case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":return[3,12];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,14];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,16]}return[3,18];case 2:return a=[{}],[4,Pe(n,t)];case 3:return i=Oe.apply(void 0,[Oe.apply(void 0,a.concat([o.sent()])),{name:s,$metadata:et(e)}]),[3,19];case 4:return u=[{}],[4,ke(n,t)];case 5:return i=Oe.apply(void 0,[Oe.apply(void 0,u.concat([o.sent()])),{name:s,$metadata:et(e)}]),[3,19];case 6:return c=[{}],[4,De(n,t)];case 7:return i=Oe.apply(void 0,[Oe.apply(void 0,c.concat([o.sent()])),{name:s,$metadata:et(e)}]),[3,19];case 8:return l=[{}],[4,Ne(n,t)];case 9:return i=Oe.apply(void 0,[Oe.apply(void 0,l.concat([o.sent()])),{name:s,$metadata:et(e)}]),[3,19];case 10:return d=[{}],[4,Le(n,t)];case 11:return i=Oe.apply(void 0,[Oe.apply(void 0,d.concat([o.sent()])),{name:s,$metadata:et(e)}]),[3,19];case 12:return f=[{}],[4,je(n,t)];case 13:return i=Oe.apply(void 0,[Oe.apply(void 0,f.concat([o.sent()])),{name:s,$metadata:et(e)}]),[3,19];case 14:return p=[{}],[4,Re(n,t)];case 15:return i=Oe.apply(void 0,[Oe.apply(void 0,p.concat([o.sent()])),{name:s,$metadata:et(e)}]),[3,19];case 16:return h=[{}],[4,Ue(n,t)];case 17:return i=Oe.apply(void 0,[Oe.apply(void 0,h.concat([o.sent()])),{name:s,$metadata:et(e)}]),[3,19];case 18:v=n.body,s=v.code||v.Code||s,i=Oe(Oe({},v),{name:""+s,message:v.message||v.Message||s,$fault:"client",$metadata:et(e)}),o.label=19;case 19:return g=i.message||i.Message||s,i.message=g,delete i.Message,[2,Promise.reject(Object.assign(new Error(g),i))]}})})},Te=function(e,t){return i(void 0,void 0,void 0,function(){var n,r,i,s,a,u,c,l,d,f,p,h,v,g,y;return o(this,function(o){switch(o.label){case 0:return r=[Oe({},e)],y={},[4,rt(e.body,t)];case 1:switch(n=Oe.apply(void 0,r.concat([(y.body=o.sent(),y)])),s="UnknownError",s=it(e,n.body)){case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":return[3,2];case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,4];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,6];case"LimitExceededException":case"com.amazonaws.cognitoidentity#LimitExceededException":return[3,8];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,10];case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":return[3,12];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,14];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,16]}return[3,18];case 2:return a=[{}],[4,Pe(n,t)];case 3:return i=Oe.apply(void 0,[Oe.apply(void 0,a.concat([o.sent()])),{name:s,$metadata:et(e)}]),[3,19];case 4:return u=[{}],[4,ke(n,t)];case 5:return i=Oe.apply(void 0,[Oe.apply(void 0,u.concat([o.sent()])),{name:s,$metadata:et(e)}]),[3,19];case 6:return c=[{}],[4,Ne(n,t)];case 7:return i=Oe.apply(void 0,[Oe.apply(void 0,c.concat([o.sent()])),{name:s,$metadata:et(e)}]),[3,19];case 8:return l=[{}],[4,Me(n,t)];case 9:return i=Oe.apply(void 0,[Oe.apply(void 0,l.concat([o.sent()])),{name:s,$metadata:et(e)}]),[3,19];case 10:return d=[{}],[4,Le(n,t)];case 11:return i=Oe.apply(void 0,[Oe.apply(void 0,d.concat([o.sent()])),{name:s,$metadata:et(e)}]),[3,19];case 12:return f=[{}],[4,je(n,t)];case 13:return i=Oe.apply(void 0,[Oe.apply(void 0,f.concat([o.sent()])),{name:s,$metadata:et(e)}]),[3,19];case 14:return p=[{}],[4,Re(n,t)];case 15:return i=Oe.apply(void 0,[Oe.apply(void 0,p.concat([o.sent()])),{name:s,$metadata:et(e)}]),[3,19];case 16:return h=[{}],[4,Ue(n,t)];case 17:return i=Oe.apply(void 0,[Oe.apply(void 0,h.concat([o.sent()])),{name:s,$metadata:et(e)}]),[3,19];case 18:v=n.body,s=v.code||v.Code||s,i=Oe(Oe({},v),{name:""+s,message:v.message||v.Message||s,$fault:"client",$metadata:et(e)}),o.label=19;case 19:return g=i.message||i.Message||s,i.message=g,delete i.Message,[2,Promise.reject(Object.assign(new Error(g),i))]}})})},Pe=function(e,t){return i(void 0,void 0,void 0,function(){var n,r;return o(this,function(i){return n=e.body,r=Ke(n,t),[2,Oe({name:"ExternalServiceException",$fault:"client",$metadata:et(e)},r)]})})},ke=function(e,t){return i(void 0,void 0,void 0,function(){var n,r;return o(this,function(i){return n=e.body,r=Ge(n,t),[2,Oe({name:"InternalErrorException",$fault:"server",$metadata:et(e)},r)]})})},De=function(e,t){return i(void 0,void 0,void 0,function(){var n,r;return o(this,function(i){return n=e.body,r=We(n,t),[2,Oe({name:"InvalidIdentityPoolConfigurationException",$fault:"client",$metadata:et(e)},r)]})})},Ne=function(e,t){return i(void 0,void 0,void 0,function(){var n,r;return o(this,function(i){return n=e.body,r=He(n,t),[2,Oe({name:"InvalidParameterException",$fault:"client",$metadata:et(e)},r)]})})},Me=function(e,t){return i(void 0,void 0,void 0,function(){var n,r;return o(this,function(i){return n=e.body,r=Je(n,t),[2,Oe({name:"LimitExceededException",$fault:"client",$metadata:et(e)},r)]})})},Le=function(e,t){return i(void 0,void 0,void 0,function(){var n,r;return o(this,function(i){return n=e.body,r=Ye(n,t),[2,Oe({name:"NotAuthorizedException",$fault:"client",$metadata:et(e)},r)]})})},je=function(e,t){return i(void 0,void 0,void 0,function(){var n,r;return o(this,function(i){return n=e.body,r=Ze(n,t),[2,Oe({name:"ResourceConflictException",$fault:"client",$metadata:et(e)},r)]})})},Re=function(e,t){return i(void 0,void 0,void 0,function(){var n,r;return o(this,function(i){return n=e.body,r=Xe(n,t),[2,Oe({name:"ResourceNotFoundException",$fault:"client",$metadata:et(e)},r)]})})},Ue=function(e,t){return i(void 0,void 0,void 0,function(){var n,r;return o(this,function(i){return n=e.body,r=Qe(n,t),[2,Oe({name:"TooManyRequestsException",$fault:"client",$metadata:et(e)},r)]})})},Fe=function(e,t){return Oe(Oe(Oe({},void 0!==e.CustomRoleArn&&null!==e.CustomRoleArn&&{CustomRoleArn:e.CustomRoleArn}),void 0!==e.IdentityId&&null!==e.IdentityId&&{IdentityId:e.IdentityId}),void 0!==e.Logins&&null!==e.Logins&&{Logins:ze(e.Logins,t)})},Be=function(e,t){return Oe(Oe(Oe({},void 0!==e.AccountId&&null!==e.AccountId&&{AccountId:e.AccountId}),void 0!==e.IdentityPoolId&&null!==e.IdentityPoolId&&{IdentityPoolId:e.IdentityPoolId}),void 0!==e.Logins&&null!==e.Logins&&{Logins:ze(e.Logins,t)})},ze=function(e,t){return Object.entries(e).reduce(function(e,t){var n,r=s(t,2),i=r[0],o=r[1];return null===o?e:Oe(Oe({},e),((n={})[i]=o,n))},{})},qe=function(e,t){return{AccessKeyId:void 0!==e.AccessKeyId&&null!==e.AccessKeyId?e.AccessKeyId:void 0,Expiration:void 0!==e.Expiration&&null!==e.Expiration?new Date(Math.round(1e3*e.Expiration)):void 0,SecretKey:void 0!==e.SecretKey&&null!==e.SecretKey?e.SecretKey:void 0,SessionToken:void 0!==e.SessionToken&&null!==e.SessionToken?e.SessionToken:void 0}},Ke=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},$e=function(e,t){return{Credentials:void 0!==e.Credentials&&null!==e.Credentials?qe(e.Credentials):void 0,IdentityId:void 0!==e.IdentityId&&null!==e.IdentityId?e.IdentityId:void 0}},Ve=function(e,t){return{IdentityId:void 0!==e.IdentityId&&null!==e.IdentityId?e.IdentityId:void 0}},Ge=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},We=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},He=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Je=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Ye=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Ze=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Xe=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Qe=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},et=function(e){var t;return{httpStatusCode:e.statusCode,requestId:null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},tt=function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)},nt=function(e,t,n,r,s){return i(void 0,void 0,void 0,function(){var i,a,u,c,l,d;return o(this,function(o){switch(o.label){case 0:return[4,e.endpoint()];case 1:return i=o.sent(),a=i.hostname,u=i.protocol,c=void 0===u?"https":u,l=i.port,d={protocol:c,hostname:a,port:l,method:"POST",path:n,headers:t},void 0!==r&&(d.hostname=r),void 0!==s&&(d.body=s),[2,new Ie.a(d)]}})})},rt=function(e,t){return function(e,t){return tt(e,t).then(function(e){return t.utf8Encoder(e)})}(e,t).then(function(e){return e.length?JSON.parse(e):{}})},it=function(e,t){var n,r,i=function(e){var t=e;return t.indexOf(":")>=0&&(t=t.split(":")[0]),t.indexOf("#")>=0&&(t=t.split("#")[1]),t},o=(n=e.headers,r="x-amzn-errortype",Object.keys(n).find(function(e){return e.toLowerCase()===r.toLowerCase()}));return void 0!==o?i(e.headers[o]):void 0!==t.code?i(t.code):void 0!==t.__type?i(t.__type):""},ot=n(10),st=n(1),at=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return r(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(ot.a)(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CognitoIdentityClient",commandName:"GetCredentialsForIdentityCommand",inputFilterSensitiveLog:M.filterSensitiveLog,outputFilterSensitiveLog:j.filterSensitiveLog},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},i)},t.prototype.serialize=function(e,t){return function(e,t){return i(void 0,void 0,void 0,function(){var n,r;return o(this,function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.GetCredentialsForIdentity"},r=JSON.stringify(Fe(e,t)),[2,nt(t,n,"/",void 0,r)]})})}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return i(void 0,void 0,void 0,function(){var n,r,i;return o(this,function(o){switch(o.label){case 0:return e.statusCode>=300?[2,xe(e,t)]:[4,rt(e.body,t)];case 1:return n=o.sent(),r=$e(n,t),i=Oe({$metadata:et(e)},r),[2,Promise.resolve(i)]}})})}(e,t)},t}(st.b),ut=function(e){function t(t,n){void 0===n&&(n=!0);var r=e.call(this,t)||this;return r.tryNextLink=n,r}return Object(Ce.__extends)(t,e),t}(Error),ct=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return r(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(ot.a)(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CognitoIdentityClient",commandName:"GetIdCommand",inputFilterSensitiveLog:U.filterSensitiveLog,outputFilterSensitiveLog:F.filterSensitiveLog},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},i)},t.prototype.serialize=function(e,t){return function(e,t){return i(void 0,void 0,void 0,function(){var n,r;return o(this,function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.GetId"},r=JSON.stringify(Be(e,t)),[2,nt(t,n,"/",void 0,r)]})})}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return i(void 0,void 0,void 0,function(){var n,r,i;return o(this,function(o){switch(o.label){case 0:return e.statusCode>=300?[2,Te(e,t)]:[4,rt(e.body,t)];case 1:return n=o.sent(),r=Ve(n,t),i=Oe({$metadata:et(e)},r),[2,Promise.resolve(i)]}})})}(e,t)},t}(st.b),lt=function(){function e(e){void 0===e&&(e="aws:cognito-identity-ids"),this.dbName=e}return e.prototype.getItem=function(e){return this.withObjectStore("readonly",function(t){var n=t.get(e);return new Promise(function(e){n.onerror=function(){return e(null)},n.onsuccess=function(){return e(n.result?n.result.value:null)}})}).catch(function(){return null})},e.prototype.removeItem=function(e){return this.withObjectStore("readwrite",function(t){var n=t.delete(e);return new Promise(function(e,t){n.onerror=function(){return t(n.error)},n.onsuccess=function(){return e()}})})},e.prototype.setItem=function(e,t){return this.withObjectStore("readwrite",function(n){var r=n.put({id:e,value:t});return new Promise(function(e,t){r.onerror=function(){return t(r.error)},r.onsuccess=function(){return e()}})})},e.prototype.getDb=function(){var e=self.indexedDB.open(this.dbName,1);return new Promise(function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)},e.onblocked=function(){n(new Error("Unable to access DB"))},e.onupgradeneeded=function(){var t=e.result;t.onerror=function(){n(new Error("Failed to create object store"))},t.createObjectStore("IdentityIds",{keyPath:"id"})}})},e.prototype.withObjectStore=function(e,t){return this.getDb().then(function(n){var r=n.transaction("IdentityIds",e);return r.oncomplete=function(){return n.close()},new Promise(function(e,n){r.onerror=function(){return n(r.error)},e(t(r.objectStore("IdentityIds")))}).catch(function(e){throw n.close(),e})})},e}(),dt=new(function(){function e(e){void 0===e&&(e={}),this.store=e}return e.prototype.getItem=function(e){return e in this.store?this.store[e]:null},e.prototype.removeItem=function(e){delete this.store[e]},e.prototype.setItem=function(e,t){this.store[e]=t},e}()),ft=function(e,t){return(ft=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},pt=function(){return(pt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.create,Object.create;var ht,vt,gt,yt,mt,bt,wt,_t,St,Et,Ct,At,Ot,It,xt,Tt,Pt,kt,Dt,Nt,Mt,Lt,jt,Rt,Ut,Ft,Bt,zt,qt,Kt,$t,Vt,Gt,Wt,Ht,Jt,Yt,Zt,Xt,Qt,en,tn,nn,rn,on,sn,an,un,cn,ln,dn,fn,pn,hn,vn,gn,yn,mn=n(176),bn=n(42),wn=n(22),_n=n(45),Sn=n(14),En=n(18),Cn=n(43),An=n(44),On=n(16),In="cognito-identity.{region}.amazonaws.com",xn=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),Tn=new Set(["cn-north-1","cn-northwest-1"]),Pn=new Set(["us-iso-east-1"]),kn=new Set(["us-isob-east-1"]),Dn=new Set(["us-gov-east-1","us-gov-west-1"]),Nn={apiVersion:"2014-06-30",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,t){var n=void 0;switch(e){case"ap-northeast-1":n={hostname:"cognito-identity.ap-northeast-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-2":n={hostname:"cognito-identity.ap-northeast-2.amazonaws.com",partition:"aws"};break;case"ap-south-1":n={hostname:"cognito-identity.ap-south-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-1":n={hostname:"cognito-identity.ap-southeast-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-2":n={hostname:"cognito-identity.ap-southeast-2.amazonaws.com",partition:"aws"};break;case"ca-central-1":n={hostname:"cognito-identity.ca-central-1.amazonaws.com",partition:"aws"};break;case"cn-north-1":n={hostname:"cognito-identity.cn-north-1.amazonaws.com.cn",partition:"aws-cn"};break;case"eu-central-1":n={hostname:"cognito-identity.eu-central-1.amazonaws.com",partition:"aws"};break;case"eu-north-1":n={hostname:"cognito-identity.eu-north-1.amazonaws.com",partition:"aws"};break;case"eu-west-1":n={hostname:"cognito-identity.eu-west-1.amazonaws.com",partition:"aws"};break;case"eu-west-2":n={hostname:"cognito-identity.eu-west-2.amazonaws.com",partition:"aws"};break;case"eu-west-3":n={hostname:"cognito-identity.eu-west-3.amazonaws.com",partition:"aws"};break;case"fips-us-east-1":n={hostname:"cognito-identity-fips.us-east-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"fips-us-east-2":n={hostname:"cognito-identity-fips.us-east-2.amazonaws.com",partition:"aws",signingRegion:"us-east-2"};break;case"fips-us-gov-west-1":n={hostname:"cognito-identity-fips.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"fips-us-west-2":n={hostname:"cognito-identity-fips.us-west-2.amazonaws.com",partition:"aws",signingRegion:"us-west-2"};break;case"sa-east-1":n={hostname:"cognito-identity.sa-east-1.amazonaws.com",partition:"aws"};break;case"us-east-1":n={hostname:"cognito-identity.us-east-1.amazonaws.com",partition:"aws"};break;case"us-east-2":n={hostname:"cognito-identity.us-east-2.amazonaws.com",partition:"aws"};break;case"us-gov-west-1":n={hostname:"cognito-identity.us-gov-west-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-west-1":n={hostname:"cognito-identity.us-west-1.amazonaws.com",partition:"aws"};break;case"us-west-2":n={hostname:"cognito-identity.us-west-2.amazonaws.com",partition:"aws"};break;default:xn.has(e)&&(n={hostname:In.replace("{region}",e),partition:"aws"}),Tn.has(e)&&(n={hostname:"cognito-identity.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),Pn.has(e)&&(n={hostname:"cognito-identity.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),kn.has(e)&&(n={hostname:"cognito-identity.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),Dn.has(e)&&(n={hostname:"cognito-identity.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}),void 0===n&&(n={hostname:In.replace("{region}",e),partition:"aws"})}return Promise.resolve(pt({signingService:"cognito-identity"},n))},serviceId:"Cognito Identity",urlParser:n(47).a},Mn=pt(pt({},Nn),{runtime:"browser",base64Decoder:En.a,base64Encoder:En.b,bodyLengthChecker:Cn.a,credentialDefaultProvider:function(e){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:Object(An.a)({serviceId:Nn.serviceId,clientVersion:mn.version}),maxAttempts:Sn.a,region:Object(_n.a)("Region is missing"),requestHandler:new wn.a,sha256:bn.Sha256,streamCollector:wn.b,utf8Decoder:On.a,utf8Encoder:On.b}),Ln=n(24),jn=n(41),Rn=n(21),Un=n(46),Fn=n(27),Bn=n(23),zn=function(e){function t(t){var n=this,r=pt(pt({},Mn),t),i=Object(Ln.b)(r),o=Object(Ln.a)(i),s=Object(Fn.b)(o),a=Object(Sn.c)(s),u=Object(Rn.b)(a),c=Object(Bn.b)(u);return(n=e.call(this,c)||this).config=c,n.middlewareStack.use(Object(Sn.b)(n.config)),n.middlewareStack.use(Object(jn.a)(n.config)),n.middlewareStack.use(Object(Rn.a)(n.config)),n.middlewareStack.use(Object(Un.a)(n.config)),n.middlewareStack.use(Object(Bn.a)(n.config)),n}return l(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(st.a);!function(e){e.AUTHENTICATED_ROLE="AuthenticatedRole",e.DENY="Deny"}(ht||(ht={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(vt||(vt={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(gt||(gt={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(yt||(yt={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(mt||(mt={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(bt||(bt={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(wt||(wt={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(_t||(_t={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(St||(St={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(Et||(Et={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(Ct||(Ct={})),function(e){e.ACCESS_DENIED="AccessDenied",e.INTERNAL_SERVER_ERROR="InternalServerError"}(At||(At={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(Ot||(Ot={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(It||(It={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(xt||(xt={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(Tt||(Tt={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(Pt||(Pt={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(kt||(kt={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(Dt||(Dt={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(Nt||(Nt={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(Mt||(Mt={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(Lt||(Lt={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(jt||(jt={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(Rt||(Rt={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(Ut||(Ut={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(Ft||(Ft={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(Bt||(Bt={})),function(e){e.CONTAINS="Contains",e.EQUALS="Equals",e.NOT_EQUAL="NotEqual",e.STARTS_WITH="StartsWith"}(zt||(zt={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(qt||(qt={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(Kt||(Kt={})),function(e){e.RULES="Rules",e.TOKEN="Token"}($t||($t={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(Vt||(Vt={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(Gt||(Gt={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(Wt||(Wt={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(Ht||(Ht={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(Jt||(Jt={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(Yt||(Yt={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(Zt||(Zt={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(Xt||(Xt={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(Qt||(Qt={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(en||(en={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(tn||(tn={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(nn||(nn={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(rn||(rn={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}
}(on||(on={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(sn||(sn={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(an||(an={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(un||(un={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(cn||(cn={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(ln||(ln={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(dn||(dn={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(fn||(fn={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(pn||(pn={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(hn||(hn={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(vn||(vn={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(gn||(gn={})),function(e){e.filterSensitiveLog=function(e){return pt({},e)}}(yn||(yn={}));var qn=function(e,t){return d(void 0,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,d,p,h,v,g,y;return f(this,function(f){switch(f.label){case 0:return r=[pt({},e)],y={},[4,yr(e.body,t)];case 1:switch(n=pt.apply(void 0,r.concat([(y.body=f.sent(),y)])),o="UnknownError",o=mr(e,n.body)){case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":return[3,2];case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,4];case"InvalidIdentityPoolConfigurationException":case"com.amazonaws.cognitoidentity#InvalidIdentityPoolConfigurationException":return[3,6];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,8];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,10];case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":return[3,12];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,14];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,16]}return[3,18];case 2:return s=[{}],[4,$n(n,t)];case 3:return i=pt.apply(void 0,[pt.apply(void 0,s.concat([f.sent()])),{name:o,$metadata:hr(e)}]),[3,19];case 4:return a=[{}],[4,Vn(n,t)];case 5:return i=pt.apply(void 0,[pt.apply(void 0,a.concat([f.sent()])),{name:o,$metadata:hr(e)}]),[3,19];case 6:return u=[{}],[4,Gn(n,t)];case 7:return i=pt.apply(void 0,[pt.apply(void 0,u.concat([f.sent()])),{name:o,$metadata:hr(e)}]),[3,19];case 8:return c=[{}],[4,Wn(n,t)];case 9:return i=pt.apply(void 0,[pt.apply(void 0,c.concat([f.sent()])),{name:o,$metadata:hr(e)}]),[3,19];case 10:return l=[{}],[4,Jn(n,t)];case 11:return i=pt.apply(void 0,[pt.apply(void 0,l.concat([f.sent()])),{name:o,$metadata:hr(e)}]),[3,19];case 12:return d=[{}],[4,Yn(n,t)];case 13:return i=pt.apply(void 0,[pt.apply(void 0,d.concat([f.sent()])),{name:o,$metadata:hr(e)}]),[3,19];case 14:return p=[{}],[4,Zn(n,t)];case 15:return i=pt.apply(void 0,[pt.apply(void 0,p.concat([f.sent()])),{name:o,$metadata:hr(e)}]),[3,19];case 16:return h=[{}],[4,Xn(n,t)];case 17:return i=pt.apply(void 0,[pt.apply(void 0,h.concat([f.sent()])),{name:o,$metadata:hr(e)}]),[3,19];case 18:v=n.body,o=v.code||v.Code||o,i=pt(pt({},v),{name:""+o,message:v.message||v.Message||o,$fault:"client",$metadata:hr(e)}),f.label=19;case 19:return g=i.message||i.Message||o,i.message=g,delete i.Message,[2,Promise.reject(Object.assign(new Error(g),i))]}})})},Kn=function(e,t){return d(void 0,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,d,p,h,v,g,y;return f(this,function(f){switch(f.label){case 0:return r=[pt({},e)],y={},[4,yr(e.body,t)];case 1:switch(n=pt.apply(void 0,r.concat([(y.body=f.sent(),y)])),o="UnknownError",o=mr(e,n.body)){case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":return[3,2];case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,4];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,6];case"LimitExceededException":case"com.amazonaws.cognitoidentity#LimitExceededException":return[3,8];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,10];case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":return[3,12];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,14];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,16]}return[3,18];case 2:return s=[{}],[4,$n(n,t)];case 3:return i=pt.apply(void 0,[pt.apply(void 0,s.concat([f.sent()])),{name:o,$metadata:hr(e)}]),[3,19];case 4:return a=[{}],[4,Vn(n,t)];case 5:return i=pt.apply(void 0,[pt.apply(void 0,a.concat([f.sent()])),{name:o,$metadata:hr(e)}]),[3,19];case 6:return u=[{}],[4,Wn(n,t)];case 7:return i=pt.apply(void 0,[pt.apply(void 0,u.concat([f.sent()])),{name:o,$metadata:hr(e)}]),[3,19];case 8:return c=[{}],[4,Hn(n,t)];case 9:return i=pt.apply(void 0,[pt.apply(void 0,c.concat([f.sent()])),{name:o,$metadata:hr(e)}]),[3,19];case 10:return l=[{}],[4,Jn(n,t)];case 11:return i=pt.apply(void 0,[pt.apply(void 0,l.concat([f.sent()])),{name:o,$metadata:hr(e)}]),[3,19];case 12:return d=[{}],[4,Yn(n,t)];case 13:return i=pt.apply(void 0,[pt.apply(void 0,d.concat([f.sent()])),{name:o,$metadata:hr(e)}]),[3,19];case 14:return p=[{}],[4,Zn(n,t)];case 15:return i=pt.apply(void 0,[pt.apply(void 0,p.concat([f.sent()])),{name:o,$metadata:hr(e)}]),[3,19];case 16:return h=[{}],[4,Xn(n,t)];case 17:return i=pt.apply(void 0,[pt.apply(void 0,h.concat([f.sent()])),{name:o,$metadata:hr(e)}]),[3,19];case 18:v=n.body,o=v.code||v.Code||o,i=pt(pt({},v),{name:""+o,message:v.message||v.Message||o,$fault:"client",$metadata:hr(e)}),f.label=19;case 19:return g=i.message||i.Message||o,i.message=g,delete i.Message,[2,Promise.reject(Object.assign(new Error(g),i))]}})})},$n=function(e,t){return d(void 0,void 0,void 0,function(){var n,r;return f(this,function(i){return n=e.body,r=rr(n,t),[2,pt({name:"ExternalServiceException",$fault:"client",$metadata:hr(e)},r)]})})},Vn=function(e,t){return d(void 0,void 0,void 0,function(){var n,r;return f(this,function(i){return n=e.body,r=sr(n,t),[2,pt({name:"InternalErrorException",$fault:"server",$metadata:hr(e)},r)]})})},Gn=function(e,t){return d(void 0,void 0,void 0,function(){var n,r;return f(this,function(i){return n=e.body,r=ar(n,t),[2,pt({name:"InvalidIdentityPoolConfigurationException",$fault:"client",$metadata:hr(e)},r)]})})},Wn=function(e,t){return d(void 0,void 0,void 0,function(){var n,r;return f(this,function(i){return n=e.body,r=ur(n,t),[2,pt({name:"InvalidParameterException",$fault:"client",$metadata:hr(e)},r)]})})},Hn=function(e,t){return d(void 0,void 0,void 0,function(){var n,r;return f(this,function(i){return n=e.body,r=cr(n,t),[2,pt({name:"LimitExceededException",$fault:"client",$metadata:hr(e)},r)]})})},Jn=function(e,t){return d(void 0,void 0,void 0,function(){var n,r;return f(this,function(i){return n=e.body,r=lr(n,t),[2,pt({name:"NotAuthorizedException",$fault:"client",$metadata:hr(e)},r)]})})},Yn=function(e,t){return d(void 0,void 0,void 0,function(){var n,r;return f(this,function(i){return n=e.body,r=dr(n,t),[2,pt({name:"ResourceConflictException",$fault:"client",$metadata:hr(e)},r)]})})},Zn=function(e,t){return d(void 0,void 0,void 0,function(){var n,r;return f(this,function(i){return n=e.body,r=fr(n,t),[2,pt({name:"ResourceNotFoundException",$fault:"client",$metadata:hr(e)},r)]})})},Xn=function(e,t){return d(void 0,void 0,void 0,function(){var n,r;return f(this,function(i){return n=e.body,r=pr(n,t),[2,pt({name:"TooManyRequestsException",$fault:"client",$metadata:hr(e)},r)]})})},Qn=function(e,t){return pt(pt(pt({},void 0!==e.CustomRoleArn&&null!==e.CustomRoleArn&&{CustomRoleArn:e.CustomRoleArn}),void 0!==e.IdentityId&&null!==e.IdentityId&&{IdentityId:e.IdentityId}),void 0!==e.Logins&&null!==e.Logins&&{Logins:tr(e.Logins,t)})},er=function(e,t){return pt(pt(pt({},void 0!==e.AccountId&&null!==e.AccountId&&{AccountId:e.AccountId}),void 0!==e.IdentityPoolId&&null!==e.IdentityPoolId&&{IdentityPoolId:e.IdentityPoolId}),void 0!==e.Logins&&null!==e.Logins&&{Logins:tr(e.Logins,t)})},tr=function(e,t){return Object.entries(e).reduce(function(e,t){var n,r=p(t,2),i=r[0],o=r[1];return null===o?e:pt(pt({},e),((n={})[i]=o,n))},{})},nr=function(e,t){return{AccessKeyId:void 0!==e.AccessKeyId&&null!==e.AccessKeyId?e.AccessKeyId:void 0,Expiration:void 0!==e.Expiration&&null!==e.Expiration?new Date(Math.round(1e3*e.Expiration)):void 0,SecretKey:void 0!==e.SecretKey&&null!==e.SecretKey?e.SecretKey:void 0,SessionToken:void 0!==e.SessionToken&&null!==e.SessionToken?e.SessionToken:void 0}},rr=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},ir=function(e,t){return{Credentials:void 0!==e.Credentials&&null!==e.Credentials?nr(e.Credentials):void 0,IdentityId:void 0!==e.IdentityId&&null!==e.IdentityId?e.IdentityId:void 0}},or=function(e,t){return{IdentityId:void 0!==e.IdentityId&&null!==e.IdentityId?e.IdentityId:void 0}},sr=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},ar=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},ur=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},cr=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},lr=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},dr=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},fr=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},pr=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},hr=function(e){var t;return{httpStatusCode:e.statusCode,requestId:null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},vr=function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)},gr=function(e,t,n,r,i){return d(void 0,void 0,void 0,function(){var o,s,a,u,c,l;return f(this,function(d){switch(d.label){case 0:return[4,e.endpoint()];case 1:return o=d.sent(),s=o.hostname,a=o.protocol,u=void 0===a?"https":a,c=o.port,l={protocol:u,hostname:s,port:c,method:"POST",path:n,headers:t},void 0!==r&&(l.hostname=r),void 0!==i&&(l.body=i),[2,new Ie.a(l)]}})})},yr=function(e,t){return function(e,t){return vr(e,t).then(function(e){return t.utf8Encoder(e)})}(e,t).then(function(e){return e.length?JSON.parse(e):{}})},mr=function(e,t){var n,r,i=function(e){var t=e;return t.indexOf(":")>=0&&(t=t.split(":")[0]),t.indexOf("#")>=0&&(t=t.split("#")[1]),t},o=(n=e.headers,r="x-amzn-errortype",Object.keys(n).find(function(e){return e.toLowerCase()===r.toLowerCase()}));return void 0!==o?i(e.headers[o]):void 0!==t.code?i(t.code):void 0!==t.__type?i(t.__type):""},br=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return l(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(ot.a)(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CognitoIdentityClient",commandName:"GetIdCommand",inputFilterSensitiveLog:Ut.filterSensitiveLog,outputFilterSensitiveLog:Ft.filterSensitiveLog},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},i)},t.prototype.serialize=function(e,t){return function(e,t){return d(void 0,void 0,void 0,function(){var n,r;return f(this,function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.GetId"},r=JSON.stringify(er(e,t)),[2,gr(t,n,"/",void 0,r)]})})}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return d(void 0,void 0,void 0,function(){var n,r,i;return f(this,function(o){switch(o.label){case 0:return e.statusCode>=300?[2,Kn(e,t)]:[4,yr(e.body,t)];case 1:return n=o.sent(),r=or(n,t),i=pt({$metadata:hr(e)},r),[2,Promise.resolve(i)]}})})}(e,t)},t}(st.b),wr=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return l(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(ot.a)(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CognitoIdentityClient",commandName:"GetCredentialsForIdentityCommand",inputFilterSensitiveLog:Mt.filterSensitiveLog,outputFilterSensitiveLog:jt.filterSensitiveLog},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},i)},t.prototype.serialize=function(e,t){return function(e,t){return d(void 0,void 0,void 0,function(){var n,r;return f(this,function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.GetCredentialsForIdentity"},r=JSON.stringify(Qn(e,t)),[2,gr(t,n,"/",void 0,r)]})})}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return d(void 0,void 0,void 0,function(){var n,r,i;return f(this,function(o){switch(o.label){case 0:return e.statusCode>=300?[2,qn(e,t)]:[4,yr(e.body,t)];case 1:return n=o.sent(),r=ir(n,t),i=pt({$metadata:hr(e)},r),[2,Promise.resolve(i)]}})})}(e,t)},t}(st.b),_r=function(){return(_r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Sr=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},Er=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},Cr=new ye.a("Credentials"),Ar=new(function(){function e(e){this._gettingCredPromise=null,this._refreshHandlers={},this.Auth=void 0,this.configure(e),this._refreshHandlers.google=we.b.refreshGoogleToken,this._refreshHandlers.facebook=we.a.refreshFacebookToken}return e.prototype.getModuleName=function(){return"Credentials"},e.prototype.getCredSource=function(){return this._credentials_source},e.prototype.configure=function(e){if(!e)return this._config||{};this._config=Object.assign({},this._config,e);var t=this._config.refreshHandlers;return t&&(this._refreshHandlers=_r(_r({},this._refreshHandlers),t)),this._storage=this._config.storage,this._storage||(this._storage=(new me.a).getStorage()),this._storageSync=Promise.resolve(),"function"==typeof this._storage.sync&&(this._storageSync=this._storage.sync()),this._config},e.prototype.get=function(){return Cr.debug("getting credentials"),this._pickupCredentials()},e.prototype._getCognitoIdentityIdStorageKey=function(e){return"CognitoIdentityId-"+e},e.prototype._pickupCredentials=function(){return Cr.debug("picking up credentials"),this._gettingCredPromise&&this._gettingCredPromise.isPending()?Cr.debug("getting old cred promise"):(Cr.debug("getting new cred promise"),this._gettingCredPromise=Object(be.d)(this._keepAlive())),this._gettingCredPromise},e.prototype._keepAlive=function(){return Sr(this,void 0,void 0,function(){var e,t,n,r,i,o,s;return Er(this,function(a){switch(a.label){case 0:if(Cr.debug("checking if credentials exists and not expired"),(e=this._credentials)&&!this._isExpired(e)&&!this._isPastTTL())return Cr.debug("credentials not changed and not expired, directly return"),[2,Promise.resolve(e)];if(Cr.debug("need to get a new credential or refresh the existing one"),t=this.Auth,!(n=void 0===t?Ee.a.Auth:t)||"function"!=typeof n.currentUserCredentials)return[2,Promise.reject("No Auth module registered in Amplify")];if(this._isExpired(e)||!this._isPastTTL())return[3,6];Cr.debug("ttl has passed but token is not yet expired"),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,n.currentUserPoolUser()];case 2:return r=a.sent(),[4,n.currentSession()];case 3:return i=a.sent(),o=i.refreshToken,[4,new Promise(function(e,t){r.refreshSession(o,function(n,r){return n?t(n):e(r)})})];case 4:return a.sent(),[3,6];case 5:return s=a.sent(),Cr.debug("Error attempting to refreshing the session",s),[3,6];case 6:return[2,n.currentUserCredentials()]}})})},e.prototype.refreshFederatedToken=function(e){Cr.debug("Getting federated credentials");var t=e.provider,n=e.user,r=e.token,i=e.identity_id,o=e.expires_at;return o=1970===new Date(o).getFullYear()?1e3*o:o,Cr.debug("checking if federated jwt token expired"),o>(new Date).getTime()?(Cr.debug("token not expired"),this._setCredentialsFromFederation({provider:t,token:r,user:n,identity_id:i,expires_at:o})):this._refreshHandlers[t]&&"function"==typeof this._refreshHandlers[t]?(Cr.debug("getting refreshed jwt token from federation provider"),this._providerRefreshWithRetry({refreshHandler:this._refreshHandlers[t],provider:t,user:n})):(Cr.debug("no refresh handler for provider:",t),this.clear(),Promise.reject("no refresh handler for provider"))},e.prototype._providerRefreshWithRetry=function(e){var t=this,n=e.refreshHandler,r=e.provider,i=e.user;return Object(_e.c)(n,[],1e4).then(function(e){return Cr.debug("refresh federated token sucessfully",e),t._setCredentialsFromFederation({provider:r,token:e.token,user:i,identity_id:e.identity_id,expires_at:e.expires_at})}).catch(function(e){return"string"==typeof e&&0===e.toLowerCase().lastIndexOf("network error",e.length)||t.clear(),Cr.debug("refresh federated token failed",e),Promise.reject("refreshing federation token failed: "+e)})},e.prototype._isExpired=function(e){if(!e)return Cr.debug("no credentials for expiration check"),!0;Cr.debug("are these credentials expired?",e);var t=Date.now();return e.expiration.getTime()<=t},e.prototype._isPastTTL=function(){return this._nextCredentialsRefresh<=Date.now()},e.prototype._setCredentialsForGuest=function(){return Sr(this,void 0,void 0,function(){var e,t,n,r,i,o,s,a=this;return Er(this,function(c){switch(c.label){case 0:return Cr.debug("setting credentials for guest"),e=this._config,t=e.identityPoolId,n=e.region,e.mandatorySignIn?[2,Promise.reject("cannot get guest credentials when mandatory signin enabled")]:t?n?(i=this,[4,this._getGuestIdentityId()]):(Cr.debug("region is not configured for getting the credentials"),[2,Promise.reject("region is not configured for getting the credentials")]):(Cr.debug("No Cognito Identity pool provided for unauthenticated access"),[2,Promise.reject("No Cognito Identity pool provided for unauthenticated access")]);case 1:return r=i._identityId=c.sent(),o=new zn({region:n,customUserAgent:Object(Se.b)()}),s=void 0,s=r?u({identityId:r,client:o})():Sr(a,void 0,void 0,function(){var e;return Er(this,function(n){switch(n.label){case 0:return[4,o.send(new br({IdentityPoolId:t}))];case 1:return e=n.sent().IdentityId,this._identityId=e,[2,u({client:o,identityId:e})()]}})}).catch(function(e){return Sr(a,void 0,void 0,function(){return Er(this,function(t){throw e})})}),[2,this._loadCredentials(s,"guest",!1,null).then(function(e){return e}).catch(function(e){return Sr(a,void 0,void 0,function(){var n=this;return Er(this,function(i){switch(i.label){case 0:return"ResourceNotFoundException"!==e.name||e.message!=="Identity '"+r+"' not found."?[3,2]:(Cr.debug("Failed to load guest credentials"),[4,this._removeGuestIdentityId()]);case 1:return i.sent(),s=Sr(n,void 0,void 0,function(){var e;return Er(this,function(n){switch(n.label){case 0:return[4,o.send(new br({IdentityPoolId:t}))];case 1:return e=n.sent().IdentityId,this._identityId=e,[2,u({client:o,identityId:e})()]}})}).catch(function(e){return Sr(n,void 0,void 0,function(){return Er(this,function(t){throw e})})}),[2,this._loadCredentials(s,"guest",!1,null)];case 2:return[2,e]}})})})]}})})},e.prototype._setCredentialsFromFederation=function(e){var t=e.provider,n=e.token,r=e.identity_id,i={google:"accounts.google.com",facebook:"graph.facebook.com",amazon:"www.amazon.com",developer:"cognito-identity.amazonaws.com"}[t]||t;if(!i)return Promise.reject("You must specify a federated provider");var o={};o[i]=n;var s=this._config,a=s.identityPoolId,l=s.region;if(!a)return Cr.debug("No Cognito Federated Identity pool provided"),Promise.reject("No Cognito Federated Identity pool provided");if(!l)return Cr.debug("region is not configured for getting the credentials"),Promise.reject("region is not configured for getting the credentials");var d=new zn({region:l,customUserAgent:Object(Se.b)()}),f=void 0;return f=r?u({identityId:r,logins:o,client:d})():c({logins:o,identityPoolId:a,client:d})(),this._loadCredentials(f,"federated",!0,e)},e.prototype._setCredentialsFromSession=function(e){var t=this;Cr.debug("set credentials from session");var n=e.getIdToken().getJwtToken(),r=this._config,i=r.region,o=r.userPoolId,s=r.identityPoolId;if(!s)return Cr.debug("No Cognito Federated Identity pool provided"),Promise.reject("No Cognito Federated Identity pool provided");if(!i)return Cr.debug("region is not configured for getting the credentials"),Promise.reject("region is not configured for getting the credentials");var a={};a["cognito-idp."+i+".amazonaws.com/"+o]=n;var u=new zn({region:i,customUserAgent:Object(Se.b)()}),c=Sr(t,void 0,void 0,function(){var e,t,n,r,i,o,c,l,d,f;return Er(this,function(p){switch(p.label){case 0:return[4,this._getGuestIdentityId()];case 1:return(e=p.sent())?[3,3]:[4,u.send(new br({IdentityPoolId:s,Logins:a}))];case 2:n=p.sent().IdentityId,t=n,p.label=3;case 3:return[4,u.send(new wr({IdentityId:e||t,Logins:a}))];case 4:return r=p.sent(),i=r.Credentials,o=i.AccessKeyId,c=i.Expiration,l=i.SecretKey,d=i.SessionToken,f=r.IdentityId,this._identityId=f,e?(Cr.debug("The guest identity "+e+" has been successfully linked to the logins"),e===f&&Cr.debug("The guest identity "+e+" has become the primary identity"),[4,this._removeGuestIdentityId()]):[3,6];case 5:p.sent(),p.label=6;case 6:return[2,{accessKeyId:o,secretAccessKey:l,sessionToken:d,expiration:c,identityId:f}]}})}).catch(function(e){return Sr(t,void 0,void 0,function(){return Er(this,function(t){throw e})})});return this._loadCredentials(c,"userPool",!0,null)},e.prototype._loadCredentials=function(e,t,n,r){var i=this,o=this;return new Promise(function(s,a){e.then(function(e){return Sr(i,void 0,void 0,function(){var i,a,u,c,l;return Er(this,function(d){switch(d.label){case 0:if(Cr.debug("Load credentials successfully",e),this._identityId&&!e.identityId&&(e.identityId=this._identityId),o._credentials=e,o._credentials.authenticated=n,o._credentials_source=t,o._nextCredentialsRefresh=(new Date).getTime()+3e6,"federated"===t){i=Object.assign({id:this._credentials.identityId},r.user),a=r.provider,u=r.token,c=r.expires_at,l=r.identity_id;try{this._storage.setItem("aws-amplify-federatedInfo",JSON.stringify({provider:a,token:u,user:i,expires_at:c,identity_id:l}))}catch(e){Cr.debug("Failed to put federated info into auth storage",e)}}return"guest"!==t?[3,2]:[4,this._setGuestIdentityId(e.identityId)];case 1:d.sent(),d.label=2;case 2:return s(o._credentials),[2]}})})}).catch(function(t){if(t)return Cr.debug("Failed to load credentials",e),Cr.debug("Error loading credentials",t),void a(t)})})},e.prototype.set=function(e,t){return"session"===t?this._setCredentialsFromSession(e):"federation"===t?this._setCredentialsFromFederation(e):"guest"===t?this._setCredentialsForGuest():(Cr.debug("no source specified for setting credentials"),Promise.reject("invalid source"))},e.prototype.clear=function(){return Sr(this,void 0,void 0,function(){return Er(this,function(e){return this._credentials=null,this._credentials_source=null,Cr.debug("removing aws-amplify-federatedInfo from storage"),this._storage.removeItem("aws-amplify-federatedInfo"),[2]})})},e.prototype._getGuestIdentityId=function(){return Sr(this,void 0,void 0,function(){var e,t;return Er(this,function(n){switch(n.label){case 0:e=this._config.identityPoolId,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this._storageSync];case 2:return n.sent(),[2,this._storage.getItem(this._getCognitoIdentityIdStorageKey(e))];case 3:return t=n.sent(),Cr.debug("Failed to get the cached guest identityId",t),[3,4];case 4:return[2]}})})},e.prototype._setGuestIdentityId=function(e){return Sr(this,void 0,void 0,function(){var t,n;return Er(this,function(r){switch(r.label){case 0:t=this._config.identityPoolId,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this._storageSync];case 2:return r.sent(),this._storage.setItem(this._getCognitoIdentityIdStorageKey(t),e),[3,4];case 3:return n=r.sent(),Cr.debug("Failed to cache guest identityId",n),[3,4];case 4:return[2]}})})},e.prototype._removeGuestIdentityId=function(){return Sr(this,void 0,void 0,function(){var e;return Er(this,function(t){return e=this._config.identityPoolId,Cr.debug("removing "+this._getCognitoIdentityIdStorageKey(e)+" from storage"),this._storage.removeItem(this._getCognitoIdentityIdStorageKey(e)),[2]})})},e.prototype.shear=function(e){return{accessKeyId:e.accessKeyId,sessionToken:e.sessionToken,secretAccessKey:e.secretAccessKey,identityId:e.identityId,authenticated:e.authenticated}},e}())(null);Ee.a.register(Ar)},function(e,t,n){"use strict";function r(){r.init.call(this)}function i(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function o(e){return void 0===e._maxListeners?r.defaultMaxListeners:e._maxListeners}function s(e,t,n,r){var s,a,u,c;if(i(n),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),u=a[t]),void 0===u)u=a[t]=n,++e._eventsCount;else if("function"==typeof u?u=a[t]=r?[n,u]:[u,n]:r?u.unshift(n):u.push(n),(s=o(e))>0&&u.length>s&&!u.warned){u.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+u.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=u.length,c=l,console&&console.warn&&console.warn(c)}return e}function a(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=a.bind(r);return i.listener=n,r.wrapFn=i,i}function c(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):d(i,i.length)}function l(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function d(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function f(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,function i(o){r.once&&e.removeEventListener(t,i),n(o)})}}var p,h="object"==typeof Reflect?Reflect:null,v=h&&"function"==typeof h.apply?h.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};p=h&&"function"==typeof h.ownKeys?h.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var g=Number.isNaN||function(e){return e!=e};e.exports=r,e.exports.once=function(e,t){return new Promise(function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}f(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&f(e,"error",t,n)}(e,i,{once:!0})})},r.EventEmitter=r,r.prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;var y=10;Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return y},set:function(e){if("number"!=typeof e||e<0||g(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");y=e}}),r.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||g(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},r.prototype.getMaxListeners=function(){return o(this)},r.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var a=i[e];if(void 0===a)return!1;if("function"==typeof a)v(a,this,t);else{var u=a.length,c=d(a,u);for(n=0;n<u;++n)v(c[n],this,t)}return!0},r.prototype.addListener=function(e,t){return s(this,e,t,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(e,t){return s(this,e,t,!0)},r.prototype.once=function(e,t){return i(t),this.on(e,u(this,e,t)),this},r.prototype.prependOnceListener=function(e,t){return i(t),this.prependListener(e,u(this,e,t)),this},r.prototype.removeListener=function(e,t){var n,r,o,s,a;if(i(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){a=n[s].listener,o=s;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},r.prototype.listeners=function(e){return c(this,e,!0)},
r.prototype.rawListeners=function(e){return c(this,e,!1)},r.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):l.call(e,t)},r.prototype.listenerCount=l,r.prototype.eventNames=function(){return this._eventsCount>0?p(this._events):[]}},function(e,t,n){var r=n(55).Symbol;e.exports=r},function(e,t,n){var r=n(63)(Object,"create");e.exports=r},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var i=n(272),o=n(273),s=n(274),a=n(275),u=n(276);r.prototype.clear=i,r.prototype.delete=o,r.prototype.get=s,r.prototype.has=a,r.prototype.set=u,e.exports=r},function(e,t,n){var r=n(140);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},function(e,t,n){var r=n(278);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},function(e,t,n){"use strict";(function(t){function r(e,t){!o.isUndefined(e)&&o.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var i,o=n(40),s=n(330),a=n(150),u={"Content-Type":"application/x-www-form-urlencoded"},c={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==t&&"[object process]"===Object.prototype.toString.call(t))&&(i=n(151)),i),transformRequest:[function(e,t){return s(t,"Accept"),s(t,"Content-Type"),o.isFormData(e)||o.isArrayBuffer(e)||o.isBuffer(e)||o.isStream(e)||o.isFile(e)||o.isBlob(e)?e:o.isArrayBufferView(e)?e.buffer:o.isURLSearchParams(e)?(r(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):o.isObject(e)||t&&"application/json"===t["Content-Type"]?(r(t,"application/json"),function(e,t,n){if(o.isString(e))try{return(t||JSON.parse)(e),o.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||c.transitional,n=t&&t.silentJSONParsing,r=t&&t.forcedJSONParsing,i=!n&&"json"===this.responseType;if(i||r&&o.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(i){if("SyntaxError"===e.name)throw a(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};o.forEach(["delete","get","head"],function(e){c.headers[e]={}}),o.forEach(["post","put","patch"],function(e){c.headers[e]=o.merge(u)}),e.exports=c}).call(this,n(74))},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,n){"use strict";function r(e,t,n){return t&&(n.trimValues&&(t=t.trim()),t=o(t=n.tagValueProcessor(t,e),n.parseNodeValue,n.numParseOptions)),t}function i(e,t){if(t.ignoreNameSpace){const t=e.split(":"),n="/"===e.charAt(0)?"/":"";if("xmlns"===t[0])return"";2===t.length&&(e=n+t[1])}return e}function o(e,t,n){if(t&&"string"==typeof e){const t=e.trim();return"true"===t||"false"!==t&&f(e,n)}return c.isExist(e)?e:""}function s(e,t){if(!t.ignoreAttributes&&"string"==typeof e){e=e.replace(/\r?\n/g," ");const n=c.getAllMatches(e,v),r=n.length,s={};for(let e=0;e<r;e++){const r=i(n[e][1],t);r.length&&(void 0!==n[e][4]?(t.trimValues&&(n[e][4]=n[e][4].trim()),n[e][4]=t.attrValueProcessor(n[e][4],r),s[t.attributeNamePrefix+r]=o(n[e][4],t.parseAttributeValue,t.numParseOptions)):t.allowBooleanAttributes&&(s[t.attributeNamePrefix+r]=!0))}if(!Object.keys(s).length)return;if(t.attrNodeName){const e={};return e[t.attrNodeName]=s,e}return s}}function a(e,t){let n,r="";for(let i=t;i<e.length;i++){let t=e[i];if(n)t===n&&(n="");else if('"'===t||"'"===t)n=t;else{if(">"===t)return{data:r,index:i};"\t"===t&&(t=" ")}r+=t}}function u(e,t,n,r){const i=e.indexOf(t,n);if(-1===i)throw new Error(r);return i+t.length-1}const c=n(56),l=n(56).buildOptions,d=n(343),f=n(344);"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,c.nameRegexp),!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const p={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!1,arrayMode:!1,trimValues:!0,cdataTagName:!1,cdataPositionChar:"\\c",numParseOptions:{hex:!0,leadingZeros:!0},tagValueProcessor:function(e,t){return e},attrValueProcessor:function(e,t){return e},stopNodes:[],alwaysCreateTextNode:!1};t.defaultOptions=p;const h=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","ignoreNameSpace","allowBooleanAttributes","parseNodeValue","parseAttributeValue","arrayMode","trimValues","cdataTagName","cdataPositionChar","tagValueProcessor","attrValueProcessor","parseTrueNumberOnly","numParseOptions","stopNodes","alwaysCreateTextNode"];t.props=h;const v=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])(.*?)\\3)?","g");t.getTraversalObj=function(e,t){e=e.replace(/\r\n?/g,"\n"),t=l(t,p,h);const n=new d("!xml");let i=n,o="";for(let n=0;n<e.length;n++)if("<"===e[n])if("/"===e[n+1]){const s=u(e,">",n,"Closing Tag is not closed.");let a=e.substring(n+2,s).trim();if(t.ignoreNameSpace){const e=a.indexOf(":");-1!==e&&(a=a.substr(e+1))}i&&(i.val?i.val=c.getValue(i.val)+""+r(a,o,t):i.val=r(a,o,t)),t.stopNodes.length&&t.stopNodes.includes(i.tagname)&&(i.child=[],null==i.attrsMap&&(i.attrsMap={}),i.val=e.substr(i.startIndex+1,n-i.startIndex-1)),i=i.parent,o="",n=s}else if("?"===e[n+1])n=u(e,"?>",n,"Pi Tag is not closed.");else if("!--"===e.substr(n+1,3))n=u(e,"-->",n,"Comment is not closed.");else if("!D"===e.substr(n+1,2)){const t=u(e,">",n,"DOCTYPE is not closed.");n=e.substring(n,t).indexOf("[")>=0?e.indexOf("]>",n)+1:t}else if("!["===e.substr(n+1,2)){const s=u(e,"]]>",n,"CDATA is not closed.")-2,a=e.substring(n+9,s);if(o&&(i.val=c.getValue(i.val)+""+r(i.tagname,o,t),o=""),t.cdataTagName){const e=new d(t.cdataTagName,i,a);i.addChild(e),i.val=c.getValue(i.val)+t.cdataPositionChar,a&&(e.val=a)}else i.val=(i.val||"")+(a||"");n=s+2}else{const u=a(e,n+1);let l=u.data;const f=u.index,p=l.indexOf(" ");let h=l,v=!0;if(-1!==p&&(h=l.substr(0,p).replace(/\s\s*$/,""),l=l.substr(p+1)),t.ignoreNameSpace){const e=h.indexOf(":");-1!==e&&(h=h.substr(e+1),v=h!==u.data.substr(e+1))}if(i&&o&&"!xml"!==i.tagname&&(i.val=c.getValue(i.val)+""+r(i.tagname,o,t)),l.length>0&&l.lastIndexOf("/")===l.length-1){"/"===h[h.length-1]?(h=h.substr(0,h.length-1),l=h):l=l.substr(0,l.length-1);const e=new d(h,i,"");h!==l&&(e.attrsMap=s(l,t)),i.addChild(e)}else{const e=new d(h,i);t.stopNodes.length&&t.stopNodes.includes(e.tagname)&&(e.startIndex=f),h!==l&&v&&(e.attrsMap=s(l,t)),i.addChild(e),i=e}o="",n=f}else o+=e[n];return n}},function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o}),n.d(t,"c",function(){return s});var r="undefined"!=typeof Symbol&&"function"==typeof Symbol.for,i=r?Symbol.for("INTERNAL_AWS_APPSYNC_PUBSUB_PROVIDER"):"@@INTERNAL_AWS_APPSYNC_PUBSUB_PROVIDER",o=r?Symbol.for("INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER"):"@@INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER",s="x-amz-user-agent"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uint32ArrayFrom=t.numToUint8=t.isEmptyData=t.convertToBuffer=void 0;var r=n(357);Object.defineProperty(t,"convertToBuffer",{enumerable:!0,get:function(){return r.convertToBuffer}});var i=n(358);Object.defineProperty(t,"isEmptyData",{enumerable:!0,get:function(){return i.isEmptyData}});var o=n(359);Object.defineProperty(t,"numToUint8",{enumerable:!0,get:function(){return o.numToUint8}});var s=n(360);Object.defineProperty(t,"uint32ArrayFrom",{enumerable:!0,get:function(){return s.uint32ArrayFrom}})},function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return a});var r=n(48),i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},o=new r.a("Parser"),s=function(e){var t,n={};if(e.aws_mobile_analytics_app_id){var r={AWSPinpoint:{appId:e.aws_mobile_analytics_app_id,region:e.aws_mobile_analytics_app_region}};n.Analytics=r}return(e.aws_cognito_identity_pool_id||e.aws_user_pools_id)&&(n.Auth={userPoolId:e.aws_user_pools_id,userPoolWebClientId:e.aws_user_pools_web_client_id,region:e.aws_cognito_region,identityPoolId:e.aws_cognito_identity_pool_id,identityPoolRegion:e.aws_cognito_region,mandatorySignIn:"enable"===e.aws_mandatory_sign_in,signUpVerificationMethod:e.aws_cognito_sign_up_verification_method||"code"}),t=e.aws_user_files_s3_bucket?{AWSS3:{bucket:e.aws_user_files_s3_bucket,region:e.aws_user_files_s3_bucket_region,dangerouslyConnectToHttpEndpointForTesting:e.aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing}}:e?e.Storage||e:{},e.Logging&&(n.Logging=i(i({},e.Logging),{region:e.aws_project_region})),e.geo&&(n.Geo=Object.assign({},e.geo),e.geo.amazon_location_service&&(n.Geo={AmazonLocationService:e.geo.amazon_location_service})),n.Analytics=Object.assign({},n.Analytics,e.Analytics),n.Auth=Object.assign({},n.Auth,e.Auth),n.Storage=Object.assign({},t),n.Logging=Object.assign({},n.Logging,e.Logging),o.debug("parse config",e,"to amplifyconfig",n),n},a=function(){function e(){}return e.parseMobilehubConfig=s,e}()},function(e,t,n){"use strict";function r(e){for(var t="",n=0;n<e.byteLength;n++)t+=a[e[n]];return t}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",function(){return A});for(var o=n(48),s=n(121),a={},u={},c=0;c<256;c++){var l=c.toString(16).toLowerCase();1===l.length&&(l="0"+l),a[c]=l,u[l]=c}var d=n(19),f=n(101),p=function(){return(p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},h=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},v=new o.a("Signer"),g=function(e,t){var n=new s.Sha256(e);return n.update(t),n.digestSync()},y=function(e){var t=e||"",n=new s.Sha256;return n.update(t),r(n.digestSync())},m=function(e){return Object.keys(e).map(function(e){return e.toLowerCase()}).sort().join(";")},b=function(e){var t,n,r=Object(d.parse)(e.url);return[e.method||"/",encodeURIComponent(r.pathname).replace(/%2F/gi,"/"),(n=r.query,n&&0!==n.length?n.split("&").map(function(e){var t=e.split("=");if(1===t.length)return e;var n=t[1].replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()});return t[0]+"="+n}).sort(function(e,t){var n=e.split("=")[0],r=t.split("=")[0];return n===r?e<t?-1:1:n<r?-1:1}).join("&"):""),(t=e.headers,t&&0!==Object.keys(t).length?Object.keys(t).map(function(e){return{key:e.toLowerCase(),value:t[e]?t[e].trim().replace(/\s+/g," "):""}}).sort(function(e,t){return e.key<t.key?-1:1}).map(function(e){return e.key+":"+e.value}).join("\n")+"\n":""),m(e.headers),y(e.data)].join("\n")},w=function(e){var t=(Object(d.parse)(e.url).host.match(/([^\.]+)\.(?:([^\.]*)\.)?amazonaws\.com$/)||[]).slice(1,3);return"es"===t[1]&&(t=t.reverse()),{service:e.service||t[0],region:e.region||t[1]}},_=function(e,t,n){return[e,t,n,"aws4_request"].join("/")},S=function(e,t,n,r){return[e,n,r,y(t)].join("\n")},E=function(e,t,n){v.debug(n);var r=g("AWS4"+e,t),i=g(r,n.region),o=g(i,n.service);return g(o,"aws4_request")},C=function(e,t){return r(g(e,t))},A=function(){function e(){}return e.sign=function(e,t,n){if(void 0===n&&(n=null),e.headers=e.headers||{},e.body&&!e.data)throw new Error('The attribute "body" was found on the request object. Please use the attribute "data" instead.');var r=f.a.getDateWithClockOffset().toISOString().replace(/[:\-]|\.\d{3}/g,""),i=r.substr(0,8),o=Object(d.parse)(e.url);e.headers.host=o.host,e.headers["x-amz-date"]=r,t.session_token&&(e.headers["X-Amz-Security-Token"]=t.session_token);var s=b(e);v.debug(s);var a=n||w(e),u=_(i,a.region,a.service),c=S("AWS4-HMAC-SHA256",s,r,u),l=E(t.secret_key,i,a),p=C(l,c),h=function(e,t,n,r,i){return[e+" Credential="+t+"/"+n,"SignedHeaders="+r,"Signature="+i].join(", ")}("AWS4-HMAC-SHA256",t.access_key,u,m(e.headers),p);return e.headers.Authorization=h,e},e.signUrl=function(e,t,n,r){var o="object"===i(e)?e.url:e,s="object"===i(e)?e.method:"GET",a="object"===i(e)?e.body:void 0,u=f.a.getDateWithClockOffset().toISOString().replace(/[:\-]|\.\d{3}/g,""),c=u.substr(0,8),l=Object(d.parse)(o,!0,!0),v=(l.search,h(l,["search"])),g={host:v.host},y=n||w({url:Object(d.format)(v)}),m=y.region,A=y.service,O=_(c,m,A),I=t.session_token&&"iotdevicegateway"!==A,x=p(p(p({"X-Amz-Algorithm":"AWS4-HMAC-SHA256","X-Amz-Credential":[t.access_key,O].join("/"),"X-Amz-Date":u.substr(0,16)},I?{"X-Amz-Security-Token":""+t.session_token}:{}),r?{"X-Amz-Expires":""+r}:{}),{"X-Amz-SignedHeaders":Object.keys(g).join(",")}),T=b({method:s,url:Object(d.format)(p(p({},v),{query:p(p({},v.query),x)})),headers:g,data:a}),P=S("AWS4-HMAC-SHA256",T,u,O),k=E(t.secret_key,c,{region:m,service:A}),D=C(k,P),N=p({"X-Amz-Signature":D},t.session_token&&{"X-Amz-Security-Token":t.session_token});return Object(d.format)({protocol:v.protocol,slashes:!0,hostname:v.hostname,port:v.port,pathname:v.pathname,query:p(p(p({},v.query),x),N)})},e}()},function(e,t,n){var r=n(297);e.exports=function(e,t){return r(e,t)}},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),"function"==typeof Symbol&&null!=Symbol.iterator&&Symbol.iterator,"function"==typeof Symbol&&null!=Symbol.asyncIterator&&Symbol.asyncIterator;var r="function"==typeof Symbol&&null!=Symbol.toStringTag?Symbol.toStringTag:"@@toStringTag"},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return s});var r=n(50),i=n(196),o={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},s=function(t){return{applyToStack:function(n){n.add(function(t){return function(n){return function(o){return Object(r.b)(void 0,void 0,void 0,function(){var s,a,u,c;return Object(r.c)(this,function(l){return s=o.request,!i.a.isInstance(s)||"node"!==t.runtime||s.headers.hasOwnProperty("X-Amzn-Trace-Id")?[2,n(o)]:(a=e.env.AWS_LAMBDA_FUNCTION_NAME,u=e.env._X_AMZN_TRACE_ID,(c=function(e){return"string"==typeof e&&e.length>0})(a)&&c(u)&&(s.headers["X-Amzn-Trace-Id"]=u),[2,n(Object(r.a)(Object(r.a)({},o),{request:s}))])})})}}}(t),o)}}}}).call(this,n(74))},function(e,t,n){"use strict";function r(e){for(var t="",n=0;n<e.byteLength;n++)t+=a[e[n]];return t}function i(e){for(var t=0;t<8;t++)e[t]^=255;for(t=7;t>-1&&(e[t]++,0===e[t]);t--);}n.d(t,"a",function(){return x});for(var o=n(79),s=n(2),a={},u={},c=0;c<256;c++){var l=c.toString(16).toLowerCase();1===l.length&&(l="0"+l),a[c]=l,u[l]=c}var d,f=function(){function e(e){if(this.bytes=e,8!==e.byteLength)throw new Error("Int64 buffers must be exactly 8 bytes")}return e.fromNumber=function(t){if(t>0x8000000000000000||t<-0x8000000000000000)throw new Error(t+" is too large (or, if negative, too small) to represent as an Int64");for(var n=new Uint8Array(8),r=7,o=Math.abs(Math.round(t));r>-1&&o>0;r--,o/=256)n[r]=o;return t<0&&i(n),new e(n)},e.prototype.valueOf=function(){var e=this.bytes.slice(0),t=128&e[0];return t&&i(e),parseInt(r(e),16)*(t?-1:1)},e.prototype.toString=function(){return String(this.valueOf())},e}(),p=function(){function e(e,t){this.toUtf8=e,this.fromUtf8=t}return e.prototype.format=function(e){var t,n,r,i,o=[];try{for(var a=Object(s.__values)(Object.keys(e)),u=a.next();!u.done;u=a.next()){var c=u.value,l=this.fromUtf8(c);o.push(Uint8Array.from([l.byteLength]),l,this.formatHeaderValue(e[c]))}}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}var d=new Uint8Array(o.reduce(function(e,t){return e+t.byteLength},0)),f=0;try{for(var p=Object(s.__values)(o),h=p.next();!h.done;h=p.next()){var v=h.value;d.set(v,f),f+=v.byteLength}}catch(e){r={error:e}}finally{try{h&&!h.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}return d},e.prototype.formatHeaderValue=function(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":var t=new DataView(new ArrayBuffer(3));return t.setUint8(0,3),t.setInt16(1,e.value,!1),new Uint8Array(t.buffer);case"integer":var n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,e.value,!1),new Uint8Array(n.buffer);case"long":var r=new Uint8Array(9);return r[0]=5,r.set(e.value.bytes,1),r;case"binary":var i=new DataView(new ArrayBuffer(3+e.value.byteLength));i.setUint8(0,6),i.setUint16(1,e.value.byteLength,!1);var o=new Uint8Array(i.buffer);return o.set(e.value,3),o;case"string":var s=this.fromUtf8(e.value),a=new DataView(new ArrayBuffer(3+s.byteLength));a.setUint8(0,7),a.setUint16(1,s.byteLength,!1);var c=new Uint8Array(a.buffer);return c.set(s,3),c;case"timestamp":var l=new Uint8Array(9);return l[0]=8,l.set(f.fromNumber(e.value.valueOf()).bytes,1),l;case"uuid":if(!E.test(e.value))throw new Error("Invalid UUID received: "+e.value);var d=new Uint8Array(17);return d[0]=9,d.set(function(e){if(e.length%2!=0)throw new Error("Hex encoded strings must have an even number length");for(var t=new Uint8Array(e.length/2),n=0;n<e.length;n+=2){var r=e.substr(n,2).toLowerCase();if(!(r in u))throw new Error("Cannot decode unrecognized sequence "+r+" as hexadecimal");t[n/2]=u[r]}return t}(e.value.replace(/\-/g,"")),1),d}},e.prototype.parse=function(e){for(var t={},n=0;n<e.byteLength;){var i=e.getUint8(n++),o=this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,i));switch(n+=i,e.getUint8(n++)){case 0:t[o]={type:h,value:!0};break;case 1:t[o]={type:h,value:!1};break;case 2:t[o]={type:v,value:e.getInt8(n++)};break;case 3:t[o]={type:g,value:e.getInt16(n,!1)},n+=2;break;case 4:t[o]={type:y,value:e.getInt32(n,!1)},n+=4;break;case 5:t[o]={type:m,value:new f(new Uint8Array(e.buffer,e.byteOffset+n,8))},n+=8;break;case 6:var s=e.getUint16(n,!1);n+=2,t[o]={type:b,value:new Uint8Array(e.buffer,e.byteOffset+n,s)},n+=s;break;case 7:var a=e.getUint16(n,!1);n+=2,t[o]={type:w,value:this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,a))},n+=a;break;case 8:t[o]={type:_,value:new Date(new f(new Uint8Array(e.buffer,e.byteOffset+n,8)).valueOf())},n+=8;break;case 9:var u=new Uint8Array(e.buffer,e.byteOffset+n,16);n+=16,t[o]={type:S,value:r(u.subarray(0,4))+"-"+r(u.subarray(4,6))+"-"+r(u.subarray(6,8))+"-"+r(u.subarray(8,10))+"-"+r(u.subarray(10))};break;default:throw new Error("Unrecognized header type tag")}}return t},e}();!function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"}(d||(d={}));var h="boolean",v="byte",g="short",y="integer",m="long",b="binary",w="string",_="timestamp",S="uuid",E=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,C=function(){function e(e,t){this.headerMarshaller=new p(e,t)}return e.prototype.marshall=function(e){var t=e.headers,n=e.body,r=this.headerMarshaller.format(t),i=r.byteLength+n.byteLength+16,s=new Uint8Array(i),a=new DataView(s.buffer,s.byteOffset,s.byteLength),u=new o.Crc32;return a.setUint32(0,i,!1),a.setUint32(4,r.byteLength,!1),a.setUint32(8,u.update(s.subarray(0,8)).digest(),!1),s.set(r,12),s.set(n,r.byteLength+12),a.setUint32(i-4,u.update(s.subarray(8,i-4)).digest(),!1),s},e.prototype.unmarshall=function(e){var t=function(e){var t=e.byteLength,n=e.byteOffset,r=e.buffer;if(t<16)throw new Error("Provided message too short to accommodate event stream message overhead");var i=new DataView(r,n,t),s=i.getUint32(0,!1);if(t!==s)throw new Error("Reported message length does not match received message length");var a=i.getUint32(4,!1),u=i.getUint32(8,!1),c=i.getUint32(t-4,!1),l=(new o.Crc32).update(new Uint8Array(r,n,8));if(u!==l.digest())throw new Error("The prelude checksum specified in the message ("+u+") does not match the calculated CRC32 checksum ("+l.digest()+")");if(l.update(new Uint8Array(r,n+8,t-12)),c!==l.digest())throw new Error("The message checksum ("+l.digest()+") did not match the expected value of "+c);return{headers:new DataView(r,n+8+4,a),body:new Uint8Array(r,n+8+4+a,s-a-16)}}(e),n=t.headers,r=t.body;return{headers:this.headerMarshaller.parse(n),body:r}},e.prototype.formatHeaders=function(e){return this.headerMarshaller.format(e)},e}(),A=function(){function e(e){var t=e.utf8Encoder,n=e.utf8Decoder;this.eventMarshaller=new C(t,n),this.utfEncoder=t}return e.prototype.deserialize=function(e,t){var n,r,i,o,a,u,c;return function(e,t){var n;return(n={})[Symbol.asyncIterator]=function(){return Object(s.__asyncGenerator)(this,arguments,function(){var n,r,i,o,a,u,c,l,d,f,p,h,v,g,y,m,b;return Object(s.__generator)(this,function(w){switch(w.label){case 0:w.trys.push([0,12,13,18]),n=Object(s.__asyncValues)(e),w.label=1;case 1:return[4,Object(s.__await)(n.next())];case 2:if((r=w.sent()).done)return[3,11];if(i=r.value,o=t.eventMarshaller.unmarshall(i),"error"!==(a=o.headers[":message-type"].value))return[3,3];throw(u=new Error(o.headers[":error-message"].value||"UnknownError")).name=o.headers[":error-code"].value,u;case 3:return"exception"!==a?[3,5]:(c=o.headers[":exception-type"].value,(g={})[c]=o,l=g,[4,Object(s.__await)(t.deserializer(l))]);case 4:if((d=w.sent()).$unknown)throw(f=new Error(t.toUtf8(o.body))).name=c,f;throw d[c];case 5:return"event"!==a?[3,9]:((y={})[o.headers[":event-type"].value]=o,p=y,[4,Object(s.__await)(t.deserializer(p))]);case 6:return(h=w.sent()).$unknown?[3,10]:[4,Object(s.__await)(h)];case 7:return[4,w.sent()];case 8:return w.sent(),[3,10];case 9:throw Error("Unrecognizable event type: "+o.headers[":event-type"].value);case 10:return[3,1];case 11:return[3,18];case 12:return v=w.sent(),m={error:v},[3,18];case 13:return w.trys.push([13,,16,17]),r&&!r.done&&(b=n.return)?[4,Object(s.__await)(b.call(n))]:[3,15];case 14:w.sent(),w.label=15;case 15:return[3,17];case 16:if(m)throw m.error;return[7];case 17:return[7];case 18:return[2]}})})},n}((n=e,i=0,o=0,a=null,u=null,c=function(e){if("number"!=typeof e)throw new Error("Attempted to allocate an event message where size was not a number: "+e);i=e,o=4,a=new Uint8Array(e),new DataView(a.buffer).setUint32(0,e,!1)},(r={})[Symbol.asyncIterator]=function(){return Object(s.__asyncGenerator)(this,arguments,function(){var e,t,r,l,d,f,p,h;return Object(s.__generator)(this,function(v){switch(v.label){case 0:e=n[Symbol.asyncIterator](),v.label=1;case 1:return[4,Object(s.__await)(e.next())];case 2:return t=v.sent(),r=t.value,t.done?i?[3,4]:[4,Object(s.__await)(void 0)]:[3,10];case 3:return[2,v.sent()];case 4:return i!==o?[3,7]:[4,Object(s.__await)(a)];case 5:return[4,v.sent()];case 6:return v.sent(),[3,8];case 7:throw new Error("Truncated event message received.");case 8:return[4,Object(s.__await)(void 0)];case 9:return[2,v.sent()];case 10:l=r.length,d=0,v.label=11;case 11:if(!(d<l))return[3,15];if(!a){if(f=l-d,u||(u=new Uint8Array(4)),p=Math.min(4-o,f),u.set(r.slice(d,d+p),o),d+=p,(o+=p)<4)return[3,15];c(new DataView(u.buffer).getUint32(0,!1)),u=null}return h=Math.min(i-o,l-d),a.set(r.slice(d,d+h),o),o+=h,d+=h,i&&i===o?[4,Object(s.__await)(a)]:[3,14];case 12:return[4,v.sent()];case 13:v.sent(),a=null,i=0,o=0,v.label=14;case 14:return[3,11];case 15:return[3,1];case 16:return[2]}})})},r),{eventMarshaller:this.eventMarshaller,deserializer:t,toUtf8:this.utfEncoder})},e.prototype.serialize=function(e,t){var n,r=this;return(n={})[Symbol.asyncIterator]=function(){return Object(s.__asyncGenerator)(this,arguments,function(){var n,i,o,a,u,c,l;return Object(s.__generator)(this,function(d){switch(d.label){case 0:d.trys.push([0,7,8,13]),n=Object(s.__asyncValues)(e),d.label=1;case 1:return[4,Object(s.__await)(n.next())];case 2:return(i=d.sent()).done?[3,6]:(o=i.value,a=r.eventMarshaller.marshall(t(o)),[4,Object(s.__await)(a)]);case 3:return[4,d.sent()];case 4:d.sent(),d.label=5;case 5:return[3,1];case 6:return[3,13];case 7:return u=d.sent(),c={error:u},[3,13];case 8:return d.trys.push([8,,11,12]),i&&!i.done&&(l=n.return)?[4,Object(s.__await)(l.call(n))]:[3,10];case 9:d.sent(),d.label=10;case 10:return[3,12];case 11:if(c)throw c.error;return[7];case 12:return[7];case 13:return[4,Object(s.__await)(new Uint8Array(0))];case 14:return[4,d.sent()];case 15:return d.sent(),[2]}})})},n},e}(),O=function(){function e(e){var t=e.utf8Encoder,n=e.utf8Decoder;this.eventMarshaller=new C(t,n),this.universalMarshaller=new A({utf8Decoder:n,utf8Encoder:t})}return e.prototype.deserialize=function(e,t){var n,r,i=I(e)?(n=e,(r={})[Symbol.asyncIterator]=function(){return Object(s.__asyncGenerator)(this,arguments,function(){var e,t,r,i;return Object(s.__generator)(this,function(o){switch(o.label){case 0:e=n.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,Object(s.__await)(e.read())];case 3:return t=o.sent(),r=t.done,i=t.value,r?[4,Object(s.__await)(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,Object(s.__await)(i)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}})})},r):e;return this.universalMarshaller.deserialize(i,t)},e.prototype.serialize=function(e,t){var n,r=this.universalMarshaller.serialize(e,t);return"function"==typeof ReadableStream?(n=r[Symbol.asyncIterator](),new ReadableStream({pull:function(e){return Object(s.__awaiter)(this,void 0,void 0,function(){var t,r,i;return Object(s.__generator)(this,function(o){switch(o.label){case 0:return[4,n.next()];case 1:return t=o.sent(),r=t.done,i=t.value,r?[2,e.close()]:(e.enqueue(i),[2])}})})}})):r},e}(),I=function(e){return"function"==typeof ReadableStream&&e instanceof ReadableStream},x=function(e){return new O(e)}},function(e,t,n){"use strict";function r(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})}function i(e,t){function n(n){return function(u){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,n[0]&&(a=0)),a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,u])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s}n.d(t,"a",function(){return c}),Object.create,Object.create;var o=n(66),s=n(58),a=n.n(s),u=["in-region","cross-region","mobile","standard","legacy"],c=function(e){var t=(void 0===e?{}:e).defaultsMode;return Object(o.a)(function(){return r(void 0,void 0,void 0,function(){var e,n;return i(this,function(r){switch(r.label){case 0:return"function"!=typeof t?[3,2]:[4,t()];case 1:return n=r.sent(),[3,3];case 2:n=t,r.label=3;case 3:switch(null==(e=n)?void 0:e.toLowerCase()){case"auto":return[2,Promise.resolve(l()?"mobile":"standard")];case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return[2,Promise.resolve(null==e?void 0:e.toLocaleLowerCase())];case void 0:return[2,Promise.resolve("legacy")];default:throw new Error('Invalid parameter for "defaultsMode", expect '.concat(u.join(", "),", got ").concat(e))}return[2]}})})})},l=function(){var e,t,n="undefined"!=typeof window&&(null===(e=null===window||void 0===window?void 0:window.navigator)||void 0===e?void 0:e.userAgent)?a.a.parse(window.navigator.userAgent):void 0,r=null===(t=null==n?void 0:n.platform)||void 0===t?void 0:t.type;return"tablet"===r||"mobile"===r}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(2),i=function(e){return Object(r.__assign)(Object(r.__assign)({},e),{eventStreamMarshaller:e.eventStreamSerdeProvider(e)})}},function(e,t,n){"use strict";const r=n(374),i=n(375),o=new(n(376))({maxSize:1e5}),s=e=>!("object"!=typeof e||null===e||e instanceof RegExp||e instanceof Error||e instanceof Date),a=(e,t)=>{if(!s(e))return e;t={deep:!1,pascalCase:!1,...t};const{exclude:n,pascalCase:a,stopPaths:u,deep:c}=t,l=new Set(u),d=e=>(t,u)=>{if(c&&s(u)){const n=void 0===e?t:`${e}.${t}`;l.has(n)||(u=r(u,d(n)))}if(!n||!((e,t)=>e.some(e=>"string"==typeof e?e===t:(e.lastIndex=0,e.test(t))))(n,t)){const e=a?`${t}_`:t;if(o.has(e))t=o.get(e);else{const n=i(t,{pascalCase:a});t.length<100&&o.set(e,n),t=n}}return[t,u]};return r(e,d(void 0))};e.exports=((e,t)=>Array.isArray(e)?Object.keys(e).map(n=>a(e[n],t)):a(e,t))},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},i={clockOffset:0,getDateWithClockOffset:function(){return i.clockOffset?new Date((new Date).getTime()+i.clockOffset):new Date},getClockOffset:function(){return i.clockOffset},getHeaderStringFromDate:function(e){return void 0===e&&(e=i.getDateWithClockOffset()),e.toISOString().replace(/[:\-]|\.\d{3}/g,"")},getDateFromHeaderString:function(e){var t=r(e.match(/^(\d{4})(\d{2})(\d{2})T(\d{2})(\d{2})(\d{2}).+/),7),n=t[1],i=t[2],o=t[3],s=t[4],a=t[5],u=t[6];return new Date(Date.UTC(Number(n),Number(i)-1,Number(o),Number(s),Number(a),Number(u)))},isClockSkewed:function(e){return Math.abs(e.getTime()-i.getDateWithClockOffset().getTime())>=3e5},isClockSkewError:function(e){if(!e.response||!e.response.headers)return!1;var t=e.response.headers;return Boolean(["BadRequestException","InvalidSignatureException"].includes(t["x-amzn-errortype"])&&(t.date||t.Date))},setClockOffset:function(e){i.clockOffset=e}}},,,,function(e,t,n){var r=n(75),i=n(76);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var i=n(261),o=n(277),s=n(279),a=n(280),u=n(281);r.prototype.clear=i,r.prototype.delete=o,r.prototype.get=s,r.prototype.has=a,r.prototype.set=u,e.exports=r},function(e,t,n){var r=n(63)(n(55),"Map");e.exports=r},function(e,t,n){(function(e){var r=n(55),i=n(293),o=t&&!t.nodeType&&t,s=o&&"object"==typeof e&&e&&!e.nodeType&&e,a=s&&s.exports===o?r.Buffer:void 0,u=(a?a.isBuffer:void 0)||i;e.exports=u}).call(this,n(73)(e))},function(e,t,n){var r=n(294),i=n(295),o=n(296),s=o&&o.isTypedArray,a=s?i(s):r;e.exports=a},function(e,t,n){"use strict";function r(e,t){function n(){this.constructor=e}A(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function i(e,t){var n={}
;for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function o(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function s(e,t){return function(n,r){t(n,r,e)}}function a(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})}function c(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s}function l(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}function d(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function f(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function p(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function h(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}function v(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function g(e){return this instanceof g?(this.v=e,this):new g(e)}function y(e,t,n){function r(e){c[e]&&(u[e]=function(t){return new Promise(function(n,r){l.push([e,t,n,r])>1||i(e,t)})})}function i(e,t){try{(n=c[e](t)).value instanceof g?Promise.resolve(n.value.v).then(o,s):a(l[0][2],n)}catch(e){a(l[0][3],e)}var n}function o(e){i("next",e)}function s(e){i("throw",e)}function a(e,t){e(t),l.shift(),l.length&&i(l[0][0],l[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var u,c=n.apply(e,t||[]),l=[];return u={},r("next"),r("throw"),r("return"),u[Symbol.asyncIterator]=function(){return this},u}function m(e){function t(t,i){n[t]=e[t]?function(n){return(r=!r)?{value:g(e[t](n)),done:"return"===t}:i?i(n):n}:i}var n,r;return n={},t("next"),t("throw",function(e){throw e}),t("return"),n[Symbol.iterator]=function(){return this},n}function b(e){function t(t){n[t]=e[t]&&function(n){return new Promise(function(r,i){!function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}(r,i,(n=e[t](n)).done,n.value)})}}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,r=e[Symbol.asyncIterator];return r?r.call(e):(e=f(e),n={},t("next"),t("throw"),t("return"),n[Symbol.asyncIterator]=function(){return this},n)}function w(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function S(e){return e&&e.__esModule?e:{default:e}}function E(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function C(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}n.r(t),n.d(t,"__extends",function(){return r}),n.d(t,"__assign",function(){return O}),n.d(t,"__rest",function(){return i}),n.d(t,"__decorate",function(){return o}),n.d(t,"__param",function(){return s}),n.d(t,"__metadata",function(){return a}),n.d(t,"__awaiter",function(){return u}),n.d(t,"__generator",function(){return c}),n.d(t,"__createBinding",function(){return l}),n.d(t,"__exportStar",function(){return d}),n.d(t,"__values",function(){return f}),n.d(t,"__read",function(){return p}),n.d(t,"__spread",function(){return h}),n.d(t,"__spreadArrays",function(){return v}),n.d(t,"__await",function(){return g}),n.d(t,"__asyncGenerator",function(){return y}),n.d(t,"__asyncDelegator",function(){return m}),n.d(t,"__asyncValues",function(){return b}),n.d(t,"__makeTemplateObject",function(){return w}),n.d(t,"__importStar",function(){return _}),n.d(t,"__importDefault",function(){return S}),n.d(t,"__classPrivateFieldGet",function(){return E}),n.d(t,"__classPrivateFieldSet",function(){return C});var A=function(e,t){return(A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},O=function(){return(O=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)}},function(e,t,n){"use strict";function r(e,t){function n(){this.constructor=e}A(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function i(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function o(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function s(e,t){return function(n,r){t(n,r,e)}}function a(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})}function c(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s}function l(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}function d(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function f(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function p(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function h(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}function v(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function g(e){return this instanceof g?(this.v=e,this):new g(e)}function y(e,t,n){function r(e){c[e]&&(u[e]=function(t){return new Promise(function(n,r){l.push([e,t,n,r])>1||i(e,t)})})}function i(e,t){try{(n=c[e](t)).value instanceof g?Promise.resolve(n.value.v).then(o,s):a(l[0][2],n)}catch(e){a(l[0][3],e)}var n}function o(e){i("next",e)}function s(e){i("throw",e)}function a(e,t){e(t),l.shift(),l.length&&i(l[0][0],l[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var u,c=n.apply(e,t||[]),l=[];return u={},r("next"),r("throw"),r("return"),u[Symbol.asyncIterator]=function(){return this},u}function m(e){function t(t,i){n[t]=e[t]?function(n){return(r=!r)?{value:g(e[t](n)),done:"return"===t}:i?i(n):n}:i}var n,r;return n={},t("next"),t("throw",function(e){throw e}),t("return"),n[Symbol.iterator]=function(){return this},n}function b(e){function t(t){n[t]=e[t]&&function(n){return new Promise(function(r,i){!function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}(r,i,(n=e[t](n)).done,n.value)})}}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,r=e[Symbol.asyncIterator];return r?r.call(e):(e=f(e),n={},t("next"),t("throw"),t("return"),n[Symbol.asyncIterator]=function(){return this},n)}function w(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function S(e){return e&&e.__esModule?e:{default:e}}function E(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function C(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}n.r(t),n.d(t,"__extends",function(){return r}),n.d(t,"__assign",function(){return O}),n.d(t,"__rest",function(){return i}),n.d(t,"__decorate",function(){return o}),n.d(t,"__param",function(){return s}),n.d(t,"__metadata",function(){return a}),n.d(t,"__awaiter",function(){return u}),n.d(t,"__generator",function(){return c}),n.d(t,"__createBinding",function(){return l}),n.d(t,"__exportStar",function(){return d}),n.d(t,"__values",function(){return f}),n.d(t,"__read",function(){return p}),n.d(t,"__spread",function(){return h}),n.d(t,"__spreadArrays",function(){return v}),n.d(t,"__await",function(){return g}),n.d(t,"__asyncGenerator",function(){return y}),n.d(t,"__asyncDelegator",function(){return m}),n.d(t,"__asyncValues",function(){return b}),n.d(t,"__makeTemplateObject",function(){return w}),n.d(t,"__importStar",function(){return _}),n.d(t,"__importDefault",function(){return S}),n.d(t,"__classPrivateFieldGet",function(){return E}),n.d(t,"__classPrivateFieldSet",function(){return C});var A=function(e,t){return(A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},O=function(){return(O=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)}},function(e,t,n){"use strict";function r(e,t){function n(){this.constructor=e}if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");N(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function i(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})}function o(e,t){function n(n){return function(u){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,n[0]&&(a=0)),a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,u])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s}function s(e){var t,n,r=[];try{for(var i=Object(bi.__values)(Object.keys(e).sort()),o=i.next();!o.done;o=i.next()){var s=o.value,a=e[s];if(s=Po(s),Array.isArray(a))for(var u=0,c=a.length;u<c;u++)r.push(s+"="+Po(a[u]));else{var l=s;(a||"string"==typeof a)&&(l+="="+Po(a)),r.push(l)}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r.join("&")}function a(e){var t=e.port,n=e.query,r=e.protocol,i=e.path,o=e.hostname;r&&":"!==r.substr(-1)&&(r+=":"),t&&(o+=":"+t),i&&"/"!==i.charAt(0)&&(i="/"+i);var a=n?s(n):"";return a&&"?"!==a[0]&&(a="?"+a),r+"//"+o+i+a}function u(e,t){return Object(bi.__awaiter)(this,void 0,void 0,function(){var n,r,i=this;return Object(bi.__generator)(this,function(o){switch(o.label){case 0:return n=function(e){return function(e){return Object(bi.__awaiter)(i,void 0,void 0,function(){return Object(bi.__generator)(this,function(t){return[2,{output:{request:e.request},response:void 0}]})})}},(r=e.middlewareStack.clone()).add(n,{step:"build",priority:"low"}),[4,t.resolveMiddleware(r,e.config,void 0)(t).then(function(e){return e.output.request})];case 1:return[2,o.sent()]}})})}function c(e){for(var t="",n=0;n<e.byteLength;n++)t+=Do[e[n]];return t}function l(e,t,n){return e+"/"+t+"/"+n+"/aws4_request"}function d(e,t,n){var r=new e(t);return r.update(n),r.digest()}function f(e,t,n){var r,i,o=e.headers,s={};try{for(var a=Object(bi.__values)(Object.keys(o).sort()),u=a.next();!u.done;u=a.next()){var c=u.value,l=c.toLowerCase();(l in Ko||(null==t?void 0:t.has(l))||$o.test(l)||Vo.test(l))&&(!n||n&&!n.has(l))||(s[l]=o[c].trim().replace(/\s+/g," "))}}catch(e){r={error:e}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return s}function p(e,t){var n=e.headers,r=e.body;return Object(bi.__awaiter)(this,void 0,void 0,function(){var e,i,o,s,a,u,l;return Object(bi.__generator)(this,function(d){switch(d.label){case 0:try{for(e=Object(bi.__values)(Object.keys(n)),i=e.next();!i.done;i=e.next())if("x-amz-content-sha256"===(o=i.value).toLowerCase())return[2,n[o]]}catch(e){u={error:e}}finally{try{i&&!i.done&&(l=e.return)&&l.call(e)}finally{if(u)throw u.error}}return null!=r?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof r||ArrayBuffer.isView(r)||(f=r,"function"==typeof ArrayBuffer&&f instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(f))?((s=new t).update(r),a=c,[4,s.digest()]):[3,3];case 2:return[2,a.apply(void 0,[d.sent()])];case 3:return[2,"UNSIGNED-PAYLOAD"]}var f})})}function h(e){var t=e.headers,n=e.query,r=Object(bi.__rest)(e,["headers","query"]);return Object(bi.__assign)(Object(bi.__assign)({},r),{headers:Object(bi.__assign)({},t),query:n?v(n):void 0})}function v(e){return Object.keys(e).reduce(function(t,n){var r,i=e[n];return Object(bi.__assign)(Object(bi.__assign)({},t),((r={})[n]=Array.isArray(i)?Object(bi.__spread)(i):i,r))},{})}function g(e){var t,n;e="function"==typeof e.clone?e.clone():h(e);try{for(var r=Object(bi.__values)(Object.keys(e.headers)),i=r.next();!i.done;i=r.next()){var o=i.value;Bo.indexOf(o.toLowerCase())>-1&&delete e.headers[o]}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return e}function y(e){return function(e){return"number"==typeof e?new Date(1e3*e):"string"==typeof e?Number(e)?new Date(1e3*Number(e)):new Date(e):e}(e).toISOString().replace(/\.\d{3}Z$/,"Z")}function m(e){return void 0===e&&(e=0),new Promise(function(t,n){e&&setTimeout(function(){var t=new Error("Request did not complete within "+e+" ms");t.name="TimeoutError",n(t)},e)})}function b(e,t,n){return void 0===n&&(n=1048576),new Promise(function(r,i){function o(){u>=a?r():s.readAsArrayBuffer(e.slice(u,Math.min(a,u+n)))}var s=new FileReader;s.addEventListener("error",i),s.addEventListener("abort",i);var a=e.size,u=0;s.addEventListener("load",function(e){var n=e.target.result;t(new Uint8Array(n)),u+=n.byteLength,o()}),o()})}function w(e,t,n,r,i,o){return((t=(t+e&4294967295)+(r+o&4294967295)&4294967295)<<i|t>>>32-i)+n&4294967295}function _(e,t,n,r,i,o,s){return w(t&n|~t&r,e,t,i,o,s)}function S(e,t,n,r,i,o,s){return w(t&r|n&~r,e,t,i,o,s)}function E(e,t,n,r,i,o,s){return w(t^n^r,e,t,i,o,s)}function C(e,t,n,r,i,o,s){return w(n^(t|~r),e,t,i,o,s)}function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){return e.PartNumber-t.PartNumber}function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",function(){return mu}),n.d(t,"b",function(){return pu});var x=n(48),T=n(92),P=n(77),k=n(78),D=n(80),N=function(e,t){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},M=function(){return(M=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.create,Object.create;var L,j,R,U,F,B,z,q,K,$,V,G,W,H,J,Y,Z,X,Q,ee,te,ne,re,ie,oe,se,ae,ue,ce,le,de,fe,pe,he,ve,ge,ye,me,be,we,_e,Se,Ee,Ce,Ae,Oe,Ie,xe,Te,Pe,ke,De,Ne,Me,Le,je,Re,Ue,Fe,Be,ze,qe,Ke,$e,Ve,Ge,We,He,Je,Ye,Ze,Xe,Qe,et,tt,nt,rt,it,ot,st,at,ut,ct,lt,dt,ft,pt,ht,vt,gt,yt,mt,bt,wt,_t,St,Et,Ct,At,Ot,It,xt,Tt,Pt,kt,Dt,Nt,Mt,Lt,jt,Rt,Ut,Ft,Bt,zt,qt,Kt,$t,Vt,Gt,Wt,Ht,Jt,Yt,Zt,Xt,Qt,en,tn,nn,rn,on,sn,an,un,cn,ln,dn,fn,pn,hn,vn,gn,yn,mn,bn,wn,_n,Sn,En,Cn,An,On,In,xn,Tn,Pn,kn,Dn,Nn,Mn,Ln,jn,Rn,Un,Fn,Bn,zn,qn,Kn,$n,Vn,Gn,Wn,Hn,Jn,Yn,Zn,Xn,Qn,er,tr,nr,rr,ir,or,sr,ar,ur,cr,lr,dr,fr,pr,hr,vr,gr,yr,mr,br,wr,_r,Sr,Er,Cr,Ar,Or,Ir,xr,Tr,Pr,kr,Dr,Nr,Mr,Lr,jr,Rr,Ur,Fr,Br,zr,qr,Kr,$r,Vr,Gr,Wr,Hr,Jr,Yr,Zr,Xr,Qr,ei,ti,ni,ri,ii,oi,si,ai,ui,ci,li,di,fi,pi,hi,vi,gi,yi=n(1);(L||(L={})).filterSensitiveLog=function(e){return M({},e)},(j||(j={})).filterSensitiveLog=function(e){return M({},e)},(R||(R={})).filterSensitiveLog=function(e){return M({},e)},(U||(U={})).filterSensitiveLog=function(e){return M({},e)},(F||(F={})).filterSensitiveLog=function(e){return M({},e)},(B||(B={})).filterSensitiveLog=function(e){return M({},e)},(z||(z={})).filterSensitiveLog=function(e){return M({},e)},(q||(q={})).filterSensitiveLog=function(e){return M({},e)},(K||(K={})).filterSensitiveLog=function(e){return M({},e)},($||($={})).filterSensitiveLog=function(e){return M({},e)},(V||(V={})).filterSensitiveLog=function(e){return M(M({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:yi.d})},(G||(G={})).filterSensitiveLog=function(e){return M({},e)},(W||(W={})).filterSensitiveLog=function(e){return M({},e)},(H||(H={})).filterSensitiveLog=function(e){return M({},e)},(J||(J={})).filterSensitiveLog=function(e){return M({},e)},(Y||(Y={})).filterSensitiveLog=function(e){return M(M(M({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:yi.d}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:yi.d})},(Z||(Z={})).filterSensitiveLog=function(e){return M(M(M(M(M({},e),e.SSECustomerKey&&{SSECustomerKey:yi.d}),e.SSEKMSKeyId&&{SSEKMSKeyId:yi.d}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:yi.d}),e.CopySourceSSECustomerKey&&{CopySourceSSECustomerKey:yi.d})},(X||(X={})).filterSensitiveLog=function(e){return M({},e)},(Q||(Q={})).filterSensitiveLog=function(e){return M({},e)},(ee||(ee={})).filterSensitiveLog=function(e){return M({},e)},(te||(te={})).filterSensitiveLog=function(e){return M({},e)},(ne||(ne={})).filterSensitiveLog=function(e){return M({},e)},(re||(re={})).filterSensitiveLog=function(e){return M({},e)},(ie||(ie={})).filterSensitiveLog=function(e){return M(M(M({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:yi.d}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:yi.d})},(oe||(oe={})).filterSensitiveLog=function(e){return M(M(M(M({},e),e.SSECustomerKey&&{SSECustomerKey:yi.d}),e.SSEKMSKeyId&&{SSEKMSKeyId:yi.d}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:yi.d})},(se||(se={})).filterSensitiveLog=function(e){return M({},e)},(ae||(ae={})).filterSensitiveLog=function(e){return M({},e)},(ue||(ue={})).filterSensitiveLog=function(e){return M({},e)},(ce||(ce={})).filterSensitiveLog=function(e){return M({},e)},(le||(le={})).filterSensitiveLog=function(e){return M({},e)},(de||(de={})).filterSensitiveLog=function(e){return M({},e)},(fe||(fe={})).filterSensitiveLog=function(e){return M({},e)},(pe||(pe={})).filterSensitiveLog=function(e){return M({},e)},(he||(he={})).filterSensitiveLog=function(e){return M({},e)},(ve||(ve={})).filterSensitiveLog=function(e){return M({},e)},(ge||(ge={})).filterSensitiveLog=function(e){return M({},e)},(ye||(ye={})).filterSensitiveLog=function(e){return M({},e)},(me||(me={})).filterSensitiveLog=function(e){return M({},e)},(be||(be={})).filterSensitiveLog=function(e){return M({},e)},(we||(we={})).filterSensitiveLog=function(e){return M({},e)},(_e||(_e={})).filterSensitiveLog=function(e){return M({},e)},(Se||(Se={})).filterSensitiveLog=function(e){return M({},e)},(Ee||(Ee={})).filterSensitiveLog=function(e){return M({},e)},(Ce||(Ce={})).filterSensitiveLog=function(e){return M({},e)},(Ae||(Ae={})).filterSensitiveLog=function(e){return M({},e)},(Oe||(Oe={})).filterSensitiveLog=function(e){return M({},e)},(Ie||(Ie={})).filterSensitiveLog=function(e){return M({},e)},(xe||(xe={})).filterSensitiveLog=function(e){return M({},e)},(Te||(Te={})).filterSensitiveLog=function(e){return M({},e)},(Pe||(Pe={})).filterSensitiveLog=function(e){return M({},e)},(ke||(ke={})).filterSensitiveLog=function(e){return M({},e)},(De||(De={})).filterSensitiveLog=function(e){return M({},e)},(Ne||(Ne={})).filterSensitiveLog=function(e){return M({},e)},(Me||(Me={})).filterSensitiveLog=function(e){return M({},e)},(Le||(Le={})).filterSensitiveLog=function(e){return M({},e)},function(e){e.visit=function(e,t){return void 0!==e.Prefix?t.Prefix(e.Prefix):void 0!==e.Tag?t.Tag(e.Tag):void 0!==e.And?t.And(e.And):t._(e.$unknown[0],e.$unknown[1])},e.filterSensitiveLog=function(e){var t;return void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:Me.filterSensitiveLog(e.Tag)}:void 0!==e.And?{And:Le.filterSensitiveLog(e.And)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0}}(je||(je={})),(Re||(Re={})).filterSensitiveLog=function(e){return M({},e)},(Ue||(Ue={})).filterSensitiveLog=function(e){return M({},e)},(Fe||(Fe={})).filterSensitiveLog=function(e){return M({},e)},(Be||(Be={})).filterSensitiveLog=function(e){return M({},e)},(ze||(ze={})).filterSensitiveLog=function(e){return M(M({},e),e.Filter&&{Filter:je.filterSensitiveLog(e.Filter)})},(qe||(qe={})).filterSensitiveLog=function(e){return M(M({},e),e.AnalyticsConfiguration&&{AnalyticsConfiguration:ze.filterSensitiveLog(e.AnalyticsConfiguration)})},(Ke||(Ke={})).filterSensitiveLog=function(e){return M({},e)},($e||($e={})).filterSensitiveLog=function(e){return M({},e)},(Ve||(Ve={})).filterSensitiveLog=function(e){return M({},e)},(Ge||(Ge={})).filterSensitiveLog=function(e){return M({},e)},(We||(We={})).filterSensitiveLog=function(e){return M(M({},e),e.KMSMasterKeyID&&{KMSMasterKeyID:yi.d})},(He||(He={})).filterSensitiveLog=function(e){return M(M({},e),e.ApplyServerSideEncryptionByDefault&&{ApplyServerSideEncryptionByDefault:We.filterSensitiveLog(e.ApplyServerSideEncryptionByDefault)})},(Je||(Je={})).filterSensitiveLog=function(e){return M(M({},e),e.Rules&&{Rules:e.Rules.map(function(e){return He.filterSensitiveLog(e)})})},(Ye||(Ye={})).filterSensitiveLog=function(e){return M(M({},e),e.ServerSideEncryptionConfiguration&&{ServerSideEncryptionConfiguration:Je.filterSensitiveLog(e.ServerSideEncryptionConfiguration)})},(Ze||(Ze={})).filterSensitiveLog=function(e){return M({},e)},(Xe||(Xe={})).filterSensitiveLog=function(e){return M({},e)},(Qe||(Qe={})).filterSensitiveLog=function(e){return M({},e)},(et||(et={})).filterSensitiveLog=function(e){return M({},e)},(tt||(tt={})).filterSensitiveLog=function(e){return M({},e)},(nt||(nt={})).filterSensitiveLog=function(e){return M({},e)},(rt||(rt={})).filterSensitiveLog=function(e){return M({},e)},(it||(it={})).filterSensitiveLog=function(e){return M(M({},e),e.KeyId&&{KeyId:yi.d})},(ot||(ot={})).filterSensitiveLog=function(e){return M({},e)},(st||(st={})).filterSensitiveLog=function(e){return M(M({},e),e.SSEKMS&&{SSEKMS:it.filterSensitiveLog(e.SSEKMS)})},(at||(at={})).filterSensitiveLog=function(e){return M(M({},e),e.Encryption&&{Encryption:st.filterSensitiveLog(e.Encryption)})},(ut||(ut={})).filterSensitiveLog=function(e){return M(M({},e),e.S3BucketDestination&&{S3BucketDestination:at.filterSensitiveLog(e.S3BucketDestination)})},(ct||(ct={})).filterSensitiveLog=function(e){return M({},e)},(lt||(lt={})).filterSensitiveLog=function(e){return M({},e)},(dt||(dt={})).filterSensitiveLog=function(e){return M(M({},e),e.Destination&&{Destination:ut.filterSensitiveLog(e.Destination)})},(ft||(ft={})).filterSensitiveLog=function(e){return M(M({},e),e.InventoryConfiguration&&{InventoryConfiguration:dt.filterSensitiveLog(e.InventoryConfiguration)})},(pt||(pt={})).filterSensitiveLog=function(e){return M({},e)},(ht||(ht={})).filterSensitiveLog=function(e){return M({},e)},(vt||(vt={})).filterSensitiveLog=function(e){return M({},e)},function(e){e.visit=function(e,t){return void 0!==e.Prefix?t.Prefix(e.Prefix):void 0!==e.Tag?t.Tag(e.Tag):void 0!==e.And?t.And(e.And):t._(e.$unknown[0],e.$unknown[1])},e.filterSensitiveLog=function(e){var t;return void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:Me.filterSensitiveLog(e.Tag)}:void 0!==e.And?{And:vt.filterSensitiveLog(e.And)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0}}(gt||(gt={})),(yt||(yt={})).filterSensitiveLog=function(e){return M({},e)},(mt||(mt={})).filterSensitiveLog=function(e){return M({},e)},(bt||(bt={})).filterSensitiveLog=function(e){return M({},e)},(wt||(wt={})).filterSensitiveLog=function(e){return M(M({},e),e.Filter&&{Filter:gt.filterSensitiveLog(e.Filter)})},(_t||(_t={})).filterSensitiveLog=function(e){return M(M({},e),e.Rules&&{Rules:e.Rules.map(function(e){return wt.filterSensitiveLog(e)})})},(St||(St={})).filterSensitiveLog=function(e){return M({},e)},(Et||(Et={})).filterSensitiveLog=function(e){return M({},e)},(Ct||(Ct={})).filterSensitiveLog=function(e){return M({},e)},(At||(At={})).filterSensitiveLog=function(e){return M({},e)},(Ot||(Ot={})).filterSensitiveLog=function(e){return M({},e)},(It||(It={})).filterSensitiveLog=function(e){return M({},e)},(xt||(xt={})).filterSensitiveLog=function(e){return M({},e)},(Tt||(Tt={})).filterSensitiveLog=function(e){return M({},e)},function(e){e.visit=function(e,t){return void 0!==e.Prefix?t.Prefix(e.Prefix):void 0!==e.Tag?t.Tag(e.Tag):void 0!==e.And?t.And(e.And):t._(e.$unknown[0],e.$unknown[1])},e.filterSensitiveLog=function(e){var t;return void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:Me.filterSensitiveLog(e.Tag)}:void 0!==e.And?{And:Tt.filterSensitiveLog(e.And)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0}}(Pt||(Pt={})),(kt||(kt={})).filterSensitiveLog=function(e){return M(M({},e),e.Filter&&{Filter:Pt.filterSensitiveLog(e.Filter)})},(Dt||(Dt={})).filterSensitiveLog=function(e){return M(M({},e),e.MetricsConfiguration&&{MetricsConfiguration:kt.filterSensitiveLog(e.MetricsConfiguration)})},(Nt||(Nt={})).filterSensitiveLog=function(e){return M({},e)},(Mt||(Mt={})).filterSensitiveLog=function(e){return M({},e)},(Lt||(Lt={})).filterSensitiveLog=function(e){return M({},e)},(jt||(jt={})).filterSensitiveLog=function(e){return M({},e)},(Rt||(Rt={})).filterSensitiveLog=function(e){return M({},e)},(Ut||(Ut={})).filterSensitiveLog=function(e){return M({},e)},(Ft||(Ft={})).filterSensitiveLog=function(e){return M({},e)},(Bt||(Bt={})).filterSensitiveLog=function(e){return M({},e)},(zt||(zt={})).filterSensitiveLog=function(e){return M({},e)},(qt||(qt={})).filterSensitiveLog=function(e){return M({},e)},(Kt||(Kt={})).filterSensitiveLog=function(e){return M({},e)},($t||($t={})).filterSensitiveLog=function(e){return M({},e)},(Vt||(Vt={})).filterSensitiveLog=function(e){return M({},e)},(Gt||(Gt={})).filterSensitiveLog=function(e){return M({},e)},(Wt||(Wt={})).filterSensitiveLog=function(e){return M({},e)},(Ht||(Ht={})).filterSensitiveLog=function(e){return M({},e)},(Jt||(Jt={})).filterSensitiveLog=function(e){return M({},e)},(Yt||(Yt={})).filterSensitiveLog=function(e){return M({},e)},(Zt||(Zt={})).filterSensitiveLog=function(e){return M({},e)},(Xt||(Xt={})).filterSensitiveLog=function(e){return M({},e)},(Qt||(Qt={})).filterSensitiveLog=function(e){return M({},e)},(en||(en={})).filterSensitiveLog=function(e){return M({},e)},(tn||(tn={})).filterSensitiveLog=function(e){return M({},e)},(nn||(nn={})).filterSensitiveLog=function(e){return M({},e)},(rn||(rn={})).filterSensitiveLog=function(e){return M({},e)},(on||(on={})).filterSensitiveLog=function(e){return M({},e)},function(e){e.visit=function(e,t){return void 0!==e.Prefix?t.Prefix(e.Prefix):void 0!==e.Tag?t.Tag(e.Tag):void 0!==e.And?t.And(e.And):t._(e.$unknown[0],e.$unknown[1])},e.filterSensitiveLog=function(e){var t;return void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:Me.filterSensitiveLog(e.Tag)}:void 0!==e.And?{And:on.filterSensitiveLog(e.And)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0}}(sn||(sn={})),
(an||(an={})).filterSensitiveLog=function(e){return M({},e)},(un||(un={})).filterSensitiveLog=function(e){return M({},e)},(cn||(cn={})).filterSensitiveLog=function(e){return M({},e)},(ln||(ln={})).filterSensitiveLog=function(e){return M(M({},e),e.Filter&&{Filter:sn.filterSensitiveLog(e.Filter)})},(dn||(dn={})).filterSensitiveLog=function(e){return M(M({},e),e.Rules&&{Rules:e.Rules.map(function(e){return ln.filterSensitiveLog(e)})})},(fn||(fn={})).filterSensitiveLog=function(e){return M(M({},e),e.ReplicationConfiguration&&{ReplicationConfiguration:dn.filterSensitiveLog(e.ReplicationConfiguration)})},(pn||(pn={})).filterSensitiveLog=function(e){return M({},e)},(hn||(hn={})).filterSensitiveLog=function(e){return M({},e)},(vn||(vn={})).filterSensitiveLog=function(e){return M({},e)},(gn||(gn={})).filterSensitiveLog=function(e){return M({},e)},(yn||(yn={})).filterSensitiveLog=function(e){return M({},e)},(mn||(mn={})).filterSensitiveLog=function(e){return M({},e)},(bn||(bn={})).filterSensitiveLog=function(e){return M({},e)},(wn||(wn={})).filterSensitiveLog=function(e){return M({},e)},(_n||(_n={})).filterSensitiveLog=function(e){return M({},e)},(Sn||(Sn={})).filterSensitiveLog=function(e){return M({},e)},(En||(En={})).filterSensitiveLog=function(e){return M({},e)},(Cn||(Cn={})).filterSensitiveLog=function(e){return M({},e)},(An||(An={})).filterSensitiveLog=function(e){return M({},e)},(On||(On={})).filterSensitiveLog=function(e){return M({},e)},(In||(In={})).filterSensitiveLog=function(e){return M({},e)},(xn||(xn={})).filterSensitiveLog=function(e){return M(M({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:yi.d})},(Tn||(Tn={})).filterSensitiveLog=function(e){return M(M({},e),e.SSECustomerKey&&{SSECustomerKey:yi.d})},(Pn||(Pn={})).filterSensitiveLog=function(e){return M({},e)},(kn||(kn={})).filterSensitiveLog=function(e){return M({},e)},(Dn||(Dn={})).filterSensitiveLog=function(e){return M({},e)},(Nn||(Nn={})).filterSensitiveLog=function(e){return M({},e)},(Mn||(Mn={})).filterSensitiveLog=function(e){return M({},e)},(Ln||(Ln={})).filterSensitiveLog=function(e){return M({},e)},(jn||(jn={})).filterSensitiveLog=function(e){return M({},e)},(Rn||(Rn={})).filterSensitiveLog=function(e){return M({},e)},(Un||(Un={})).filterSensitiveLog=function(e){return M({},e)},(Fn||(Fn={})).filterSensitiveLog=function(e){return M({},e)},(Bn||(Bn={})).filterSensitiveLog=function(e){return M({},e)},(zn||(zn={})).filterSensitiveLog=function(e){return M({},e)},(qn||(qn={})).filterSensitiveLog=function(e){return M({},e)},(Kn||(Kn={})).filterSensitiveLog=function(e){return M({},e)},($n||($n={})).filterSensitiveLog=function(e){return M({},e)},(Vn||(Vn={})).filterSensitiveLog=function(e){return M({},e)},(Gn||(Gn={})).filterSensitiveLog=function(e){return M({},e)},(Wn||(Wn={})).filterSensitiveLog=function(e){return M({},e)},(Hn||(Hn={})).filterSensitiveLog=function(e){return M({},e)},(Jn||(Jn={})).filterSensitiveLog=function(e){return M({},e)},(Yn||(Yn={})).filterSensitiveLog=function(e){return M({},e)},(Zn||(Zn={})).filterSensitiveLog=function(e){return M({},e)},(Xn||(Xn={})).filterSensitiveLog=function(e){return M({},e)},(Qn||(Qn={})).filterSensitiveLog=function(e){return M({},e)},(er||(er={})).filterSensitiveLog=function(e){return M(M({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:yi.d})},(tr||(tr={})).filterSensitiveLog=function(e){return M(M({},e),e.SSECustomerKey&&{SSECustomerKey:yi.d})},(nr||(nr={})).filterSensitiveLog=function(e){return M(M({},e),e.AnalyticsConfigurationList&&{AnalyticsConfigurationList:e.AnalyticsConfigurationList.map(function(e){return ze.filterSensitiveLog(e)})})},(rr||(rr={})).filterSensitiveLog=function(e){return M({},e)},(ir||(ir={})).filterSensitiveLog=function(e){return M({},e)},(or||(or={})).filterSensitiveLog=function(e){return M({},e)},(sr||(sr={})).filterSensitiveLog=function(e){return M(M({},e),e.InventoryConfigurationList&&{InventoryConfigurationList:e.InventoryConfigurationList.map(function(e){return dt.filterSensitiveLog(e)})})},(ar||(ar={})).filterSensitiveLog=function(e){return M({},e)},(ur||(ur={})).filterSensitiveLog=function(e){return M(M({},e),e.MetricsConfigurationList&&{MetricsConfigurationList:e.MetricsConfigurationList.map(function(e){return kt.filterSensitiveLog(e)})})},(cr||(cr={})).filterSensitiveLog=function(e){return M({},e)},(lr||(lr={})).filterSensitiveLog=function(e){return M({},e)},(dr||(dr={})).filterSensitiveLog=function(e){return M({},e)},(fr||(fr={})).filterSensitiveLog=function(e){return M({},e)},(pr||(pr={})).filterSensitiveLog=function(e){return M({},e)},(hr||(hr={})).filterSensitiveLog=function(e){return M({},e)},(vr||(vr={})).filterSensitiveLog=function(e){return M({},e)},(gr||(gr={})).filterSensitiveLog=function(e){return M({},e)},(yr||(yr={})).filterSensitiveLog=function(e){return M({},e)},(mr||(mr={})).filterSensitiveLog=function(e){return M({},e)},(br||(br={})).filterSensitiveLog=function(e){return M({},e)},(wr||(wr={})).filterSensitiveLog=function(e){return M({},e)},(_r||(_r={})).filterSensitiveLog=function(e){return M({},e)},(Sr||(Sr={})).filterSensitiveLog=function(e){return M({},e)},(Er||(Er={})).filterSensitiveLog=function(e){return M({},e)},(Cr||(Cr={})).filterSensitiveLog=function(e){return M({},e)},(Ar||(Ar={})).filterSensitiveLog=function(e){return M({},e)},(Or||(Or={})).filterSensitiveLog=function(e){return M({},e)},(Ir||(Ir={})).filterSensitiveLog=function(e){return M({},e)},(xr||(xr={})).filterSensitiveLog=function(e){return M({},e)},(Tr||(Tr={})).filterSensitiveLog=function(e){return M({},e)},(Pr||(Pr={})).filterSensitiveLog=function(e){return M({},e)},(kr||(kr={})).filterSensitiveLog=function(e){return M(M({},e),e.AnalyticsConfiguration&&{AnalyticsConfiguration:ze.filterSensitiveLog(e.AnalyticsConfiguration)})},(Dr||(Dr={})).filterSensitiveLog=function(e){return M({},e)},(Nr||(Nr={})).filterSensitiveLog=function(e){return M({},e)},(Mr||(Mr={})).filterSensitiveLog=function(e){return M(M({},e),e.ServerSideEncryptionConfiguration&&{ServerSideEncryptionConfiguration:Je.filterSensitiveLog(e.ServerSideEncryptionConfiguration)})},(Lr||(Lr={})).filterSensitiveLog=function(e){return M({},e)},(jr||(jr={})).filterSensitiveLog=function(e){return M(M({},e),e.InventoryConfiguration&&{InventoryConfiguration:dt.filterSensitiveLog(e.InventoryConfiguration)})},(Rr||(Rr={})).filterSensitiveLog=function(e){return M(M({},e),e.Rules&&{Rules:e.Rules.map(function(e){return wt.filterSensitiveLog(e)})})},(Ur||(Ur={})).filterSensitiveLog=function(e){return M(M({},e),e.LifecycleConfiguration&&{LifecycleConfiguration:Rr.filterSensitiveLog(e.LifecycleConfiguration)})},(Fr||(Fr={})).filterSensitiveLog=function(e){return M({},e)},(Br||(Br={})).filterSensitiveLog=function(e){return M({},e)},(zr||(zr={})).filterSensitiveLog=function(e){return M(M({},e),e.MetricsConfiguration&&{MetricsConfiguration:kt.filterSensitiveLog(e.MetricsConfiguration)})},(qr||(qr={})).filterSensitiveLog=function(e){return M({},e)},(Kr||(Kr={})).filterSensitiveLog=function(e){return M({},e)},($r||($r={})).filterSensitiveLog=function(e){return M({},e)},(Vr||(Vr={})).filterSensitiveLog=function(e){return M(M({},e),e.ReplicationConfiguration&&{ReplicationConfiguration:dn.filterSensitiveLog(e.ReplicationConfiguration)})},(Gr||(Gr={})).filterSensitiveLog=function(e){return M({},e)},(Wr||(Wr={})).filterSensitiveLog=function(e){return M({},e)},(Hr||(Hr={})).filterSensitiveLog=function(e){return M({},e)},(Jr||(Jr={})).filterSensitiveLog=function(e){return M({},e)},(Yr||(Yr={})).filterSensitiveLog=function(e){return M({},e)},(Zr||(Zr={})).filterSensitiveLog=function(e){return M({},e)},(Xr||(Xr={})).filterSensitiveLog=function(e){return M({},e)},(Qr||(Qr={})).filterSensitiveLog=function(e){return M({},e)},(ei||(ei={})).filterSensitiveLog=function(e){return M(M(M({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:yi.d}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:yi.d})},(ti||(ti={})).filterSensitiveLog=function(e){return M(M(M(M({},e),e.SSECustomerKey&&{SSECustomerKey:yi.d}),e.SSEKMSKeyId&&{SSEKMSKeyId:yi.d}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:yi.d})},(ni||(ni={})).filterSensitiveLog=function(e){return M({},e)},(ri||(ri={})).filterSensitiveLog=function(e){return M({},e)},(ii||(ii={})).filterSensitiveLog=function(e){return M({},e)},(oi||(oi={})).filterSensitiveLog=function(e){return M({},e)},(si||(si={})).filterSensitiveLog=function(e){return M({},e)},(ai||(ai={})).filterSensitiveLog=function(e){return M({},e)},(ui||(ui={})).filterSensitiveLog=function(e){return M({},e)},(ci||(ci={})).filterSensitiveLog=function(e){return M({},e)},(li||(li={})).filterSensitiveLog=function(e){return M({},e)},(di||(di={})).filterSensitiveLog=function(e){return M({},e)},(fi||(fi={})).filterSensitiveLog=function(e){return M({},e)},(pi||(pi={})).filterSensitiveLog=function(e){return M({},e)},(hi||(hi={})).filterSensitiveLog=function(e){return M({},e)},(vi||(vi={})).filterSensitiveLog=function(e){return M({},e)},(gi||(gi={})).filterSensitiveLog=function(e){return M(M({},e),e.KMSKeyId&&{KMSKeyId:yi.d})};for(var mi=n(3),bi=n(2),wi=function(){function e(e,t){void 0===t&&(t=[]),this.name=e,this.children=t,this.attributes={}}return e.prototype.withName=function(e){return this.name=e,this},e.prototype.addAttribute=function(e,t){return this.attributes[e]=t,this},e.prototype.addChildNode=function(e){return this.children.push(e),this},e.prototype.removeAttribute=function(e){return delete this.attributes[e],this},e.prototype.toString=function(){var e,t,n=Boolean(this.children.length),r="<"+this.name,i=this.attributes;try{for(var o=Object(bi.__values)(Object.keys(i)),s=o.next();!s.done;s=o.next()){var a=s.value,u=i[a];null!=u&&(r+=" "+a+'="'+(""+u).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")+'"')}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return r+(n?">"+this.children.map(function(e){return e.toString()}).join("")+"</"+this.name+">":"/>")},e}(),_i=function(){function e(e){this.value=e}return e.prototype.toString=function(){return(""+this.value).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},e}(),Si=n(184),Ei=function(e,t){return i(void 0,void 0,void 0,function(){var n,r,i,s,a,u,c,l;return o(this,function(o){switch(o.label){case 0:return r=[M({},e)],l={},[4,Ji(e.body,t)];case 1:switch(n=M.apply(void 0,r.concat([(l.body=o.sent(),l)])),s="UnknownError",s=Yi(e,n.body)){case"NoSuchUpload":case"com.amazonaws.s3#NoSuchUpload":return[3,2]}return[3,4];case 2:return a=[{}],[4,ji(n,t)];case 3:return i=M.apply(void 0,[M.apply(void 0,a.concat([o.sent()])),{name:s,$metadata:Gi(e)}]),[3,5];case 4:u=n.body,s=u.code||u.Code||s,i=M(M({},u),{name:""+s,message:u.message||u.Message||s,$fault:"client",$metadata:Gi(e)}),o.label=5;case 5:return c=i.message||i.Message||s,i.message=c,delete i.Message,[2,Promise.reject(Object.assign(new Error(c),i))]}})})},Ci=function(e,t){return i(void 0,void 0,void 0,function(){var n,r,i,s,a,u,c;return o(this,function(o){switch(o.label){case 0:return r=[M({},e)],c={},[4,Ji(e.body,t)];case 1:return n=M.apply(void 0,r.concat([(c.body=o.sent(),c)])),s="UnknownError",s=Yi(e,n.body),a=n.body,s=a.code||a.Code||s,i=M(M({},a),{name:""+s,message:a.message||a.Message||s,$fault:"client",$metadata:Gi(e)}),u=i.message||i.Message||s,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}})})},Ai=function(e,t){return i(void 0,void 0,void 0,function(){var n,r,i,s,a,u,c,l;return o(this,function(o){switch(o.label){case 0:return r=[M({},e)],l={},[4,Ji(e.body,t)];case 1:switch(n=M.apply(void 0,r.concat([(l.body=o.sent(),l)])),s="UnknownError",s=Yi(e,n.body)){case"ObjectNotInActiveTierError":case"com.amazonaws.s3#ObjectNotInActiveTierError":return[3,2]}return[3,4];case 2:return a=[{}],[4,Ri(n,t)];case 3:return i=M.apply(void 0,[M.apply(void 0,a.concat([o.sent()])),{name:s,$metadata:Gi(e)}]),[3,5];case 4:u=n.body,s=u.code||u.Code||s,i=M(M({},u),{name:""+s,message:u.message||u.Message||s,$fault:"client",$metadata:Gi(e)}),o.label=5;case 5:return c=i.message||i.Message||s,i.message=c,delete i.Message,[2,Promise.reject(Object.assign(new Error(c),i))]}})})},Oi=function(e,t){return i(void 0,void 0,void 0,function(){var n,r,i,s,a,u,c;return o(this,function(o){switch(o.label){case 0:return r=[M({},e)],c={},[4,Ji(e.body,t)];case 1:return n=M.apply(void 0,r.concat([(c.body=o.sent(),c)])),s="UnknownError",s=Yi(e,n.body),a=n.body,s=a.code||a.Code||s,i=M(M({},a),{name:""+s,message:a.message||a.Message||s,$fault:"client",$metadata:Gi(e)}),u=i.message||i.Message||s,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}})})},Ii=function(e,t){return i(void 0,void 0,void 0,function(){var n,r,i,s,a,u,c;return o(this,function(o){switch(o.label){case 0:return r=[M({},e)],c={},[4,Ji(e.body,t)];case 1:return n=M.apply(void 0,r.concat([(c.body=o.sent(),c)])),s="UnknownError",s=Yi(e,n.body),a=n.body,s=a.code||a.Code||s,i=M(M({},a),{name:""+s,message:a.message||a.Message||s,$fault:"client",$metadata:Gi(e)}),u=i.message||i.Message||s,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}})})},xi=function(e,t){return i(void 0,void 0,void 0,function(){var n,r,i,s,a,u,c,l,d;return o(this,function(o){switch(o.label){case 0:return r=[M({},e)],d={},[4,Ji(e.body,t)];case 1:switch(n=M.apply(void 0,r.concat([(d.body=o.sent(),d)])),s="UnknownError",s=Yi(e,n.body)){case"InvalidObjectState":case"com.amazonaws.s3#InvalidObjectState":return[3,2];case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":return[3,4]}return[3,6];case 2:return a=[{}],[4,Ni(n,t)];case 3:return i=M.apply(void 0,[M.apply(void 0,a.concat([o.sent()])),{name:s,$metadata:Gi(e)}]),[3,7];case 4:return u=[{}],[4,Li(n,t)];case 5:return i=M.apply(void 0,[M.apply(void 0,u.concat([o.sent()])),{name:s,$metadata:Gi(e)}]),[3,7];case 6:c=n.body,s=c.code||c.Code||s,i=M(M({},c),{name:""+s,message:c.message||c.Message||s,$fault:"client",$metadata:Gi(e)}),o.label=7;case 7:return l=i.message||i.Message||s,i.message=l,delete i.Message,[2,Promise.reject(Object.assign(new Error(l),i))]}})})},Ti=function(e,t){return i(void 0,void 0,void 0,function(){var n,r,i,s,a,u,c,l;return o(this,function(o){switch(o.label){case 0:return r=[M({},e)],l={},[4,Ji(e.body,t)];case 1:switch(n=M.apply(void 0,r.concat([(l.body=o.sent(),l)])),s="UnknownError",s=Yi(e,n.body)){case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":return[3,2]}return[3,4];case 2:return a=[{}],[4,Mi(n,t)];case 3:return i=M.apply(void 0,[M.apply(void 0,a.concat([o.sent()])),{name:s,$metadata:Gi(e)}]),[3,5];case 4:u=n.body,s=u.code||u.Code||s,i=M(M({},u),{name:""+s,message:u.message||u.Message||s,$fault:"client",$metadata:Gi(e)}),o.label=5;case 5:return c=i.message||i.Message||s,i.message=c,delete i.Message,[2,Promise.reject(Object.assign(new Error(c),i))]}})})},Pi=function(e,t){return i(void 0,void 0,void 0,function(){var n,r,i,s,a,u,c;return o(this,function(o){switch(o.label){case 0:return r=[M({},e)],c={},[4,Ji(e.body,t)];case 1:return n=M.apply(void 0,r.concat([(c.body=o.sent(),c)])),s="UnknownError",s=Yi(e,n.body),a=n.body,s=a.code||a.Code||s,i=M(M({},a),{name:""+s,message:a.message||a.Message||s,$fault:"client",$metadata:Gi(e)}),u=i.message||i.Message||s,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}})})},ki=function(e,t){return i(void 0,void 0,void 0,function(){var n,r,i,s,a,u,c;return o(this,function(o){switch(o.label){case 0:return r=[M({},e)],c={},[4,Ji(e.body,t)];case 1:return n=M.apply(void 0,r.concat([(c.body=o.sent(),c)])),s="UnknownError",s=Yi(e,n.body),a=n.body,s=a.code||a.Code||s,i=M(M({},a),{name:""+s,message:a.message||a.Message||s,$fault:"client",$metadata:Gi(e)}),u=i.message||i.Message||s,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}})})},Di=function(e,t){return i(void 0,void 0,void 0,function(){var n,r,i,s,a,u,c;return o(this,function(o){switch(o.label){case 0:return r=[M({},e)],c={},[4,Ji(e.body,t)];case 1:return n=M.apply(void 0,r.concat([(c.body=o.sent(),c)])),s="UnknownError",s=Yi(e,n.body),a=n.body,s=a.code||a.Code||s,i=M(M({},a),{name:""+s,message:a.message||a.Message||s,$fault:"client",$metadata:Gi(e)}),u=i.message||i.Message||s,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}})})},Ni=function(e,t){return i(void 0,void 0,void 0,function(){var t,n;return o(this,function(r){return t={name:"InvalidObjectState",$fault:"client",$metadata:Gi(e),AccessTier:void 0,StorageClass:void 0},void 0!==(n=e.body).AccessTier&&(t.AccessTier=n.AccessTier),void 0!==n.StorageClass&&(t.StorageClass=n.StorageClass),[2,t]})})},Mi=function(e,t){return i(void 0,void 0,void 0,function(){var t;return o(this,function(n){return t={name:"NoSuchBucket",$fault:"client",$metadata:Gi(e)},e.body,[2,t]})})},Li=function(e,t){return i(void 0,void 0,void 0,function(){var t;return o(this,function(n){return t={name:"NoSuchKey",$fault:"client",$metadata:Gi(e)},e.body,[2,t]})})},ji=function(e,t){return i(void 0,void 0,void 0,function(){var t;return o(this,function(n){return t={name:"NoSuchUpload",$fault:"client",$metadata:Gi(e)},e.body,[2,t]})})},Ri=function(e,t){return i(void 0,void 0,void 0,function(){var t;return o(this,function(n){return t={name:"ObjectNotInActiveTierError",$fault:"client",$metadata:Gi(e)},e.body,[2,t]})})},Ui=function(e,t){var n=new wi("CompletedMultipartUpload");return void 0!==e.Parts&&null!==e.Parts&&Fi(e.Parts,t).map(function(e){e=e.withName("Part"),n.addChildNode(e)}),n},Fi=function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:function(e,t){var n=new wi("CompletedPart");if(void 0!==e.ETag&&null!==e.ETag){var r=new wi("ETag").addChildNode(new _i(e.ETag)).withName("ETag");n.addChildNode(r)}return void 0!==e.PartNumber&&null!==e.PartNumber&&(r=new wi("PartNumber").addChildNode(new _i(String(e.PartNumber))).withName("PartNumber"),n.addChildNode(r)),n}(e).withName("member")})},Bi=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:function(e,t){var n={Prefix:void 0};return void 0!==e.Prefix&&(n.Prefix=e.Prefix),n}(e)})},zi=function(e,t){var n={ETag:void 0,LastModified:void 0};return void 0!==e.ETag&&(n.ETag=e.ETag),void 0!==e.LastModified&&(n.LastModified=new Date(e.LastModified)),n},qi=function(e,t){var n={ID:void 0,DisplayName:void 0};return void 0!==e.ID&&(n.ID=e.ID),void 0!==e.DisplayName&&(n.DisplayName=e.DisplayName),n},Ki=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:function(e,t){var n={Key:void 0,LastModified:void 0,ETag:void 0,Size:void 0,StorageClass:void 0,Owner:void 0};return void 0!==e.Key&&(n.Key=e.Key),void 0!==e.LastModified&&(n.LastModified=new Date(e.LastModified)),void 0!==e.ETag&&(n.ETag=e.ETag),void 0!==e.Size&&(n.Size=parseInt(e.Size)),void 0!==e.StorageClass&&(n.StorageClass=e.StorageClass),void 0!==e.Owner&&(n.Owner=$i(e.Owner,t)),n}(e,t)})},$i=function(e,t){var n={DisplayName:void 0,ID:void 0};return void 0!==e.DisplayName&&(n.DisplayName=e.DisplayName),void 0!==e.ID&&(n.ID=e.ID),n},Vi=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:function(e,t){var n={PartNumber:void 0,LastModified:void 0,ETag:void 0,Size:void 0};return void 0!==e.PartNumber&&(n.PartNumber=parseInt(e.PartNumber)),void 0!==e.LastModified&&(n.LastModified=new Date(e.LastModified)),void 0!==e.ETag&&(n.ETag=e.ETag),void 0!==e.Size&&(n.Size=parseInt(e.Size)),n}(e)})},Gi=function(e){var t;return{httpStatusCode:e.statusCode,requestId:null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},Wi=function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)},Hi=function(e){return!(null==e||""===e||Object.getOwnPropertyNames(e).includes("length")&&0==e.length||Object.getOwnPropertyNames(e).includes("size")&&0==e.size)},Ji=function(e,t){return function(e,t){return Wi(e,t).then(function(e){return t.utf8Encoder(e)})}(e,t).then(function(e){if(e.length){var t=Object(Si.parse)(e,{attributeNamePrefix:"",ignoreAttributes:!1,parseNodeValue:!1,tagValueProcessor:function(e,t){return e.replace(/&amp;/g,"&").replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<")}}),n=Object.keys(t)[0],r=t[n];return r["#text"]&&(r[n]=r["#text"],delete r["#text"]),Object(yi.h)(r)}return{}})},Yi=function(e,t){return void 0!==t.Code?t.Code:404==e.statusCode?"NotFound":""},Zi=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,Xi=/(\d+\.){3}\d+/,Qi=/\.\./,eo=/\./,to=/^(.+\.)?s3[.-]([a-z0-9-]+)\./,no=/^s3(-external-1)?\.amazonaws\.com$/,ro=function(e){return oo(e)?e.replace(/fips-|-fips/,""):e},io=function(e){var t=e.match(to);return[t[2],e.replace(new RegExp("^"+t[0]),"")]},oo=function(e){return e.startsWith("fips-")||e.endsWith("-fips")},so=function(e,t){return e===t||ro(e)===t||e===ro(t)},ao=function(e,t){if(void 0===t&&(t={tlsCompatible:!0}),e.length>=64||!/^[a-z0-9][a-z0-9.-]+[a-z0-9]$/.test(e)||/(\d+\.){3}\d+/.test(e)||/[.-]{2}/.test(e)||(null==t?void 0:t.tlsCompatible)&&eo.test(e))throw new Error("Invalid DNS label "+e)},uo=function(e){var t=e.isCustomEndpoint,n=(e.baseHostname,e.dualstackEndpoint),r=e.accelerateEndpoint;if(t){if(n)throw new Error("Dualstack endpoint is not supported with custom endpoint");if(r)throw new Error("Accelerate endpoint is not supported with custom endpoint")}return function(e){return"string"==typeof e.bucketName}(e)?lo(Object(bi.__assign)(Object(bi.__assign)({},e),{isCustomEndpoint:t})):co(Object(bi.__assign)(Object(bi.__assign)({},e),{isCustomEndpoint:t}))},co=function(e){var t,n=e.isCustomEndpoint,r=e.baseHostname,i=Object(bi.__read)(n?[e.clientRegion,r]:(t=r,no.test(t)?[t.replace(".amazonaws.com",""),"amazonaws.com"]:io(t)),2),o=i[0],s=i[1],a=e.pathStyleEndpoint,u=e.dualstackEndpoint,c=void 0!==u&&u,l=e.accelerateEndpoint,d=void 0!==l&&l,f=e.tlsCompatible,p=void 0===f||f,h=e.useArnRegion,v=e.bucketName,g=e.clientPartition,y=void 0===g?"aws":g,m=e.clientSigningRegion,b=void 0===m?o:m;!function(e){if(e.pathStyleEndpoint)throw new Error("Path-style S3 endpoint is not supported when bucket is an ARN");if(e.accelerateEndpoint)throw new Error("Accelerate endpoint is not supported when bucket is an ARN");if(!e.tlsCompatible)throw new Error("HTTPS is required when bucket is an ARN")}({pathStyleEndpoint:a,accelerateEndpoint:d,tlsCompatible:p});var w=v.service,_=v.partition,S=v.accountId,E=v.region,C=v.resource;!function(e){if("s3"!==e&&"s3-outposts"!==e)throw new Error("Expect 's3' or 's3-outposts' in ARN service component")}(w),function(e,t){if(e!==t.clientPartition)throw new Error('Partition in ARN is incompatible, got "'+e+'" but expected "'+t.clientPartition+'"')}(_,{clientPartition:y}),function(e){if(!/[0-9]{12}/.exec(e))throw new Error("Access point ARN accountID does not match regex '[0-9]{12}'")}(S),function(e,t){if(""===e)throw new Error("ARN region is empty");if(!t.useArnRegion&&!so(e,t.clientRegion)&&!so(e,t.clientSigningRegion))throw new Error("Region in ARN is incompatible, got "+e+" but expected "+t.clientRegion);if(t.useArnRegion&&oo(e))throw new Error("Endpoint does not support FIPS region")}(E,{useArnRegion:h,clientRegion:o,clientSigningRegion:b});var A=function(e){var t=e.includes(":")?":":"/",n=Object(bi.__read)(e.split(t)),r=n[0],i=n.slice(1);if("accesspoint"===r){if(1!==i.length||""===i[0])throw new Error("Access Point ARN should have one resource accesspoint"+t+"{accesspointname}");return{accesspointName:i[0]}}if("outpost"===r){if(!i[0]||"accesspoint"!==i[1]||!i[2]||3!==i.length)throw new Error("Outpost ARN should have resource outpost"+t+"{outpostId}"+t+"accesspoint"+t+"{accesspointName}");var o=Object(bi.__read)(i,3),s=o[0];return o[1],{outpostId:s,accesspointName:o[2]}}throw new Error("ARN resource should begin with 'accesspoint"+t+"' or 'outpost"+t+"'")}(C),O=A.accesspointName,I=A.outpostId;ao(O+"-"+S,{tlsCompatible:p});var x=h?E:o,T=h?E:b;return I?(function(e){if("s3-outposts"!==e)throw new Error("Expect 's3-posts' in Outpost ARN service component")}(w),ao(I,{tlsCompatible:p}),function(e){if(e)throw new Error("Dualstack endpoint is not supported with Outpost")}(c),function(e){if(oo(null!=e?e:""))throw new Error("FIPS region is not supported with Outpost, got "+e)}(x),{bucketEndpoint:!0,hostname:O+"-"+S+"."+I+(n?"":".s3-outposts."+x)+"."+s,signingRegion:T,signingService:"s3-outposts"}):(function(e){if("s3"!==e)throw new Error("Expect 's3' in Accesspoint ARN service component")}(w),{bucketEndpoint:!0,hostname:O+"-"+S+(n?"":".s3-accesspoint"+(c?".dualstack":"")+"."+x)+"."+s,signingRegion:T})},lo=function(e){var t,n=e.accelerateEndpoint,r=void 0!==n&&n,i=e.clientRegion,o=e.baseHostname,s=e.bucketName,a=e.dualstackEndpoint,u=void 0!==a&&a,c=e.pathStyleEndpoint,l=void 0!==c&&c,d=e.tlsCompatible,f=void 0===d||d,p=e.isCustomEndpoint,h=void 0!==p&&p,v=Object(bi.__read)(h?[i,o]:(t=o,no.test(t)?["us-east-1","amazonaws.com"]:io(t)),2),g=v[0],y=v[1];return l||!function(e){return Zi.test(e)&&!Xi.test(e)&&!Qi.test(e)}(s)||f&&eo.test(s)?{bucketEndpoint:!1,hostname:u?"s3.dualstack."+g+"."+y:o}:(r?o="s3-accelerate"+(u?".dualstack":"")+"."+y:u&&(o="s3.dualstack."+g+"."+y),{bucketEndpoint:!0,hostname:s+"."+o})},fo=function(e){return function(t,n){return function(r){return Object(bi.__awaiter)(void 0,void 0,void 0,function(){var i,o,s,a,u,c,l,d,f,p,h,v,g,y,m,b,w,_;return Object(bi.__generator)(this,function(S){switch(S.label){case 0:return i=r.input.Bucket,o=e.bucketEndpoint,s=r.request,mi.a.isInstance(s)?e.bucketEndpoint?(s.hostname=i,[3,7]):[3,1]:[3,8];case 1:return"string"==typeof(E=i)&&0===E.indexOf("arn:")&&E.split(":").length>=6?(a=function(e){var t=e.split(":");if(t.length<6||"arn"!==t[0])throw new Error("Malformed ARN");var n=Object(bi.__read)(t);return{partition:n[1],service:n[2],region:n[3],accountId:n[4],resource:n.slice(5).join(":")}}(i),u=ro,[4,e.region()]):[3,5];case 2:return y=u.apply(void 0,[S.sent()]),[4,e.regionInfoProvider(y)];case 3:return c=S.sent()||{},l=c.partition,d=c.signingRegion,f=void 0===d?y:d,[4,e.useArnRegion()];case 4:return p=S.sent(),h=uo({bucketName:a,baseHostname:s.hostname,accelerateEndpoint:e.useAccelerateEndpoint,dualstackEndpoint:e.useDualstackEndpoint,pathStyleEndpoint:e.forcePathStyle,tlsCompatible:"https:"===s.protocol,useArnRegion:p,clientPartition:l,clientSigningRegion:f,clientRegion:y,isCustomEndpoint:e.isCustomEndpoint}),w=h.hostname,_=h.bucketEndpoint,v=h.signingRegion,g=h.signingService,v&&v!==f&&(n.signing_region=v),g&&"s3"!==g&&(n.signing_service=g),s.hostname=w,o=_,[3,7];case 5:return m=ro,[4,e.region()];case 6:y=m.apply(void 0,[S.sent()]),b=uo({bucketName:i,clientRegion:y,baseHostname:s.hostname,accelerateEndpoint:e.useAccelerateEndpoint,dualstackEndpoint:e.useDualstackEndpoint,pathStyleEndpoint:e.forcePathStyle,tlsCompatible:"https:"===s.protocol,isCustomEndpoint:e.isCustomEndpoint}),w=b.hostname,_=b.bucketEndpoint,s.hostname=w,o=_,S.label=7;case 7:o&&(s.path=s.path.replace(/^(\/)?[^\/]+/,""),""===s.path&&(s.path="/")),S.label=8;case 8:return[2,t(Object(bi.__assign)(Object(bi.__assign)({},r),{request:s}))]}var E})})}}},po={tags:["BUCKET_ENDPOINT"],name:"bucketEndpointMiddleware",relation:"before",toMiddleware:"hostHeaderMiddleware",override:!0},ho=function(e){return{applyToStack:function(t){t.addRelativeTo(fo(e),po)}}},vo={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},go=function(e){return{applyToStack:function(e){e.add(function(){var e=this;return function(t){return function(n){return Object(bi.__awaiter)(e,void 0,void 0,function(){var e,r;return Object(bi.__generator)(this,function(i){if("string"==typeof(e=n.input.Bucket)&&!("string"==typeof(o=e)&&0===o.indexOf("arn:")&&o.split(":").length>=6)&&e.indexOf("/")>=0)throw(r=new Error("Bucket name shouldn't contain '/', received '"+e+"'")).name="InvalidBucketName",r;var o;return[2,t(Object(bi.__assign)({},n))]})})}}}(),vo)}}},yo={step:"build",tags:["USE_REGIONAL_ENDPOINT","S3"],name:"useRegionalEndpointMiddleware",override:!0},mo=function(e){return{applyToStack:function(t){t.add(function(e){return function(t){return function(n){return Object(bi.__awaiter)(void 0,void 0,void 0,function(){var r,i;return Object(bi.__generator)(this,function(o){switch(o.label){case 0:return r=n.request,!mi.a.isInstance(r)||e.isCustomEndpoint?[2,t(Object(bi.__assign)({},n))]:"s3.amazonaws.com"!==r.hostname?[3,1]:(r.hostname="s3.us-east-1.amazonaws.com",[3,3]);case 1:return i="aws-global",[4,e.region()];case 2:i===o.sent()&&(r.hostname="s3.amazonaws.com"),o.label=3;case 3:return[2,t(Object(bi.__assign)({},n))]}})})}}}(e),yo)}}},bo=function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)},wo=function(e,t){return bo(e,t).then(function(e){return t.utf8Encoder(e)})},_o={relation:"after",toMiddleware:"deserializerMiddleware",tags:["THROW_200_EXCEPTIONS","S3"],name:"throw200ExceptionsMiddleware",override:!0},So=function(e){return{applyToStack:function(t){t.addRelativeTo(function(e){return function(t){return function(n){return Object(bi.__awaiter)(void 0,void 0,void 0,function(){var r,i,o,s,a,u,c;return Object(bi.__generator)(this,function(l){switch(l.label){case 0:return[4,t(n)];case 1:return r=l.sent(),i=r.response,mi.b.isInstance(i)?(o=i.statusCode,s=i.body,o<200&&o>=300?[2,r]:[4,bo(s,e)]):[2,r];case 2:return a=l.sent(),[4,wo(a,e)];case 3:if(u=l.sent(),0===a.length)throw(c=new Error("S3 aborted request")).name="InternalError",c;return u&&u.match("<Error>")&&(i.statusCode=400),i.body=a,[2,r]}})})}}}(e),_o)}}},Eo=n(10),Co={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},Ao=function(e){return{applyToStack:function(t){t.add(function(e){var t=this;return function(n){return function(r){return Object(bi.__awaiter)(t,void 0,void 0,function(){var t,i,o,s,a,u,c,l,d,f,p,h,v,g,y,m,b;return Object(bi.__generator)(this,function(w){switch(w.label){case 0:t=Object(bi.__assign)({},r.input),i=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}],w.label=1;case 1:w.trys.push([1,6,7,8]),o=Object(bi.__values)(i),s=o.next(),w.label=2;case 2:return s.done?[3,5]:(a=s.value,(u=t[a.target])?(c=ArrayBuffer.isView(u)?new Uint8Array(u.buffer,u.byteOffset,u.byteLength):"string"==typeof u?e.utf8Decoder(u):new Uint8Array(u),l=e.base64Encoder(c),(d=new e.md5).update(c),f=[Object(bi.__assign)({},t)],(b={})[a.target]=l,p=a.hash,v=(h=e).base64Encoder,[4,d.digest()]):[3,4]);case 3:t=bi.__assign.apply(void 0,f.concat([(b[p]=v.apply(h,[w.sent()]),b)])),w.label=4;case 4:return s=o.next(),[3,2];case 5:return[3,8];case 6:return g=w.sent(),y={error:g},[3,8];case 7:try{s&&!s.done&&(m=o.return)&&m.call(o)}finally{if(y)throw y.error}return[7];case 8:return[2,n(Object(bi.__assign)(Object(bi.__assign)({},r),{input:t}))]}})})}}}(e),Co)}}},Oo=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return r(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(Eo.a)(t,this.serialize,this.deserialize)),this.middlewareStack.use(So(t)),this.middlewareStack.use(Ao(t)),this.middlewareStack.use(ho(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"CopyObjectCommand",inputFilterSensitiveLog:Z.filterSensitiveLog,outputFilterSensitiveLog:Y.filterSensitiveLog},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},i)},t.prototype.serialize=function(e,t){return function(e,t){return i(void 0,void 0,void 0,function(){var n,r,i,s,a,u,c,l,d;return o(this,function(o){switch(o.label){case 0:if(n=M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M({},Hi(e.ACL)&&{"x-amz-acl":e.ACL}),Hi(e.CacheControl)&&{"cache-control":e.CacheControl}),Hi(e.ContentDisposition)&&{
"content-disposition":e.ContentDisposition}),Hi(e.ContentEncoding)&&{"content-encoding":e.ContentEncoding}),Hi(e.ContentLanguage)&&{"content-language":e.ContentLanguage}),Hi(e.ContentType)&&{"content-type":e.ContentType}),Hi(e.CopySource)&&{"x-amz-copy-source":e.CopySource}),Hi(e.CopySourceIfMatch)&&{"x-amz-copy-source-if-match":e.CopySourceIfMatch}),Hi(e.CopySourceIfModifiedSince)&&{"x-amz-copy-source-if-modified-since":Object(yi.e)(e.CopySourceIfModifiedSince).toString()}),Hi(e.CopySourceIfNoneMatch)&&{"x-amz-copy-source-if-none-match":e.CopySourceIfNoneMatch}),Hi(e.CopySourceIfUnmodifiedSince)&&{"x-amz-copy-source-if-unmodified-since":Object(yi.e)(e.CopySourceIfUnmodifiedSince).toString()}),Hi(e.Expires)&&{expires:Object(yi.e)(e.Expires).toString()}),Hi(e.GrantFullControl)&&{"x-amz-grant-full-control":e.GrantFullControl}),Hi(e.GrantRead)&&{"x-amz-grant-read":e.GrantRead}),Hi(e.GrantReadACP)&&{"x-amz-grant-read-acp":e.GrantReadACP}),Hi(e.GrantWriteACP)&&{"x-amz-grant-write-acp":e.GrantWriteACP}),Hi(e.MetadataDirective)&&{"x-amz-metadata-directive":e.MetadataDirective}),Hi(e.TaggingDirective)&&{"x-amz-tagging-directive":e.TaggingDirective}),Hi(e.ServerSideEncryption)&&{"x-amz-server-side-encryption":e.ServerSideEncryption}),Hi(e.StorageClass)&&{"x-amz-storage-class":e.StorageClass}),Hi(e.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":e.WebsiteRedirectLocation}),Hi(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),Hi(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),Hi(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),Hi(e.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":e.SSEKMSKeyId}),Hi(e.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":e.SSEKMSEncryptionContext}),Hi(e.BucketKeyEnabled)&&{"x-amz-server-side-encryption-bucket-key-enabled":e.BucketKeyEnabled.toString()}),Hi(e.CopySourceSSECustomerAlgorithm)&&{"x-amz-copy-source-server-side-encryption-customer-algorithm":e.CopySourceSSECustomerAlgorithm}),Hi(e.CopySourceSSECustomerKey)&&{"x-amz-copy-source-server-side-encryption-customer-key":e.CopySourceSSECustomerKey}),Hi(e.CopySourceSSECustomerKeyMD5)&&{"x-amz-copy-source-server-side-encryption-customer-key-md5":e.CopySourceSSECustomerKeyMD5}),Hi(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),Hi(e.Tagging)&&{"x-amz-tagging":e.Tagging}),Hi(e.ObjectLockMode)&&{"x-amz-object-lock-mode":e.ObjectLockMode}),Hi(e.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(e.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),Hi(e.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":e.ObjectLockLegalHoldStatus}),Hi(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),Hi(e.ExpectedSourceBucketOwner)&&{"x-amz-source-expected-bucket-owner":e.ExpectedSourceBucketOwner}),void 0!==e.Metadata&&Object.keys(e.Metadata).reduce(function(t,n){var r;return M(M({},t),((r={})["x-amz-meta-"+n.toLowerCase()]=e.Metadata[n],r))},{})),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Object(yi.f)(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map(function(e){return Object(yi.f)(e)}).join("/")),s={"x-id":"CopyObject"},[4,t.endpoint()];case 1:return a=o.sent(),u=a.hostname,c=a.protocol,l=void 0===c?"https":c,d=a.port,[2,new mi.a({protocol:l,hostname:u,port:d,method:"PUT",headers:n,path:r,query:s,body:void 0})]}})})}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return i(void 0,void 0,void 0,function(){var n,r;return o(this,function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Ai(e,t)]:(n={$metadata:Gi(e),BucketKeyEnabled:void 0,CopyObjectResult:void 0,CopySourceVersionId:void 0,Expiration:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==e.headers["x-amz-expiration"]&&(n.Expiration=e.headers["x-amz-expiration"]),void 0!==e.headers["x-amz-copy-source-version-id"]&&(n.CopySourceVersionId=e.headers["x-amz-copy-source-version-id"]),void 0!==e.headers["x-amz-version-id"]&&(n.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(n.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(n.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-context"]&&(n.SSEKMSEncryptionContext=e.headers["x-amz-server-side-encryption-context"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(n.BucketKeyEnabled="true"===e.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,Ji(e.body,t)]);case 1:return r=i.sent(),n.CopyObjectResult=zi(r,t),[2,Promise.resolve(n)]}})})}(e,t)},t}(yi.b),Io=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return r(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(Eo.a)(t,this.serialize,this.deserialize)),this.middlewareStack.use(Ao(t)),this.middlewareStack.use(ho(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetObjectCommand",inputFilterSensitiveLog:Tn.filterSensitiveLog,outputFilterSensitiveLog:xn.filterSensitiveLog},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},i)},t.prototype.serialize=function(e,t){return function(e,t){return i(void 0,void 0,void 0,function(){var n,r,i,s,a,u,c,l,d;return o(this,function(o){switch(o.label){case 0:if(n=M(M(M(M(M(M(M(M(M(M({},Hi(e.IfMatch)&&{"if-match":e.IfMatch}),Hi(e.IfModifiedSince)&&{"if-modified-since":Object(yi.e)(e.IfModifiedSince).toString()}),Hi(e.IfNoneMatch)&&{"if-none-match":e.IfNoneMatch}),Hi(e.IfUnmodifiedSince)&&{"if-unmodified-since":Object(yi.e)(e.IfUnmodifiedSince).toString()}),Hi(e.Range)&&{range:e.Range}),Hi(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),Hi(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),Hi(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),Hi(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),Hi(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Object(yi.f)(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map(function(e){return Object(yi.f)(e)}).join("/")),s=M(M(M(M(M(M(M(M({"x-id":"GetObject"},void 0!==e.ResponseCacheControl&&{"response-cache-control":e.ResponseCacheControl}),void 0!==e.ResponseContentDisposition&&{"response-content-disposition":e.ResponseContentDisposition}),void 0!==e.ResponseContentEncoding&&{"response-content-encoding":e.ResponseContentEncoding}),void 0!==e.ResponseContentLanguage&&{"response-content-language":e.ResponseContentLanguage}),void 0!==e.ResponseContentType&&{"response-content-type":e.ResponseContentType}),void 0!==e.ResponseExpires&&{"response-expires":(e.ResponseExpires.toISOString().split(".")[0]+"Z").toString()}),void 0!==e.VersionId&&{versionId:e.VersionId}),void 0!==e.PartNumber&&{partNumber:e.PartNumber.toString()}),[4,t.endpoint()];case 1:return a=o.sent(),u=a.hostname,c=a.protocol,l=void 0===c?"https":c,d=a.port,[2,new mi.a({protocol:l,hostname:u,port:d,method:"GET",headers:n,path:r,query:s,body:void 0})]}})})}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return i(void 0,void 0,void 0,function(){var n,r;return o(this,function(i){return 200!==e.statusCode&&e.statusCode>=300?[2,xi(e,t)]:(n={$metadata:Gi(e),AcceptRanges:void 0,Body:void 0,BucketKeyEnabled:void 0,CacheControl:void 0,ContentDisposition:void 0,ContentEncoding:void 0,ContentLanguage:void 0,ContentLength:void 0,ContentRange:void 0,ContentType:void 0,DeleteMarker:void 0,ETag:void 0,Expiration:void 0,Expires:void 0,LastModified:void 0,Metadata:void 0,MissingMeta:void 0,ObjectLockLegalHoldStatus:void 0,ObjectLockMode:void 0,ObjectLockRetainUntilDate:void 0,PartsCount:void 0,ReplicationStatus:void 0,RequestCharged:void 0,Restore:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,StorageClass:void 0,TagCount:void 0,VersionId:void 0,WebsiteRedirectLocation:void 0},void 0!==e.headers["x-amz-delete-marker"]&&(n.DeleteMarker="true"===e.headers["x-amz-delete-marker"]),void 0!==e.headers["accept-ranges"]&&(n.AcceptRanges=e.headers["accept-ranges"]),void 0!==e.headers["x-amz-expiration"]&&(n.Expiration=e.headers["x-amz-expiration"]),void 0!==e.headers["x-amz-restore"]&&(n.Restore=e.headers["x-amz-restore"]),void 0!==e.headers["last-modified"]&&(n.LastModified=new Date(e.headers["last-modified"])),void 0!==e.headers["content-length"]&&(n.ContentLength=parseInt(e.headers["content-length"],10)),void 0!==e.headers.etag&&(n.ETag=e.headers.etag),void 0!==e.headers["x-amz-missing-meta"]&&(n.MissingMeta=parseInt(e.headers["x-amz-missing-meta"],10)),void 0!==e.headers["x-amz-version-id"]&&(n.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers["cache-control"]&&(n.CacheControl=e.headers["cache-control"]),void 0!==e.headers["content-disposition"]&&(n.ContentDisposition=e.headers["content-disposition"]),void 0!==e.headers["content-encoding"]&&(n.ContentEncoding=e.headers["content-encoding"]),void 0!==e.headers["content-language"]&&(n.ContentLanguage=e.headers["content-language"]),void 0!==e.headers["content-range"]&&(n.ContentRange=e.headers["content-range"]),void 0!==e.headers["content-type"]&&(n.ContentType=e.headers["content-type"]),void 0!==e.headers.expires&&(n.Expires=new Date(e.headers.expires)),void 0!==e.headers["x-amz-website-redirect-location"]&&(n.WebsiteRedirectLocation=e.headers["x-amz-website-redirect-location"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(n.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(n.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(n.BucketKeyEnabled="true"===e.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==e.headers["x-amz-storage-class"]&&(n.StorageClass=e.headers["x-amz-storage-class"]),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),void 0!==e.headers["x-amz-replication-status"]&&(n.ReplicationStatus=e.headers["x-amz-replication-status"]),void 0!==e.headers["x-amz-mp-parts-count"]&&(n.PartsCount=parseInt(e.headers["x-amz-mp-parts-count"],10)),void 0!==e.headers["x-amz-tagging-count"]&&(n.TagCount=parseInt(e.headers["x-amz-tagging-count"],10)),void 0!==e.headers["x-amz-object-lock-mode"]&&(n.ObjectLockMode=e.headers["x-amz-object-lock-mode"]),void 0!==e.headers["x-amz-object-lock-retain-until-date"]&&(n.ObjectLockRetainUntilDate=new Date(e.headers["x-amz-object-lock-retain-until-date"])),void 0!==e.headers["x-amz-object-lock-legal-hold"]&&(n.ObjectLockLegalHoldStatus=e.headers["x-amz-object-lock-legal-hold"]),Object.keys(e.headers).forEach(function(t){void 0===n.Metadata&&(n.Metadata={}),t.startsWith("x-amz-meta-")&&(n.Metadata[t.substring(11)]=e.headers[t])}),r=e.body,n.Body=r,[2,Promise.resolve(n)])})})}(e,t)},t}(yi.b),xo=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return r(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(Eo.a)(t,this.serialize,this.deserialize)),this.middlewareStack.use(ho(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"DeleteObjectCommand",inputFilterSensitiveLog:we.filterSensitiveLog,outputFilterSensitiveLog:be.filterSensitiveLog},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},i)},t.prototype.serialize=function(e,t){return function(e,t){return i(void 0,void 0,void 0,function(){var n,r,i,s,a,u,c,l,d;return o(this,function(o){switch(o.label){case 0:if(n=M(M(M(M({},Hi(e.MFA)&&{"x-amz-mfa":e.MFA}),Hi(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),Hi(e.BypassGovernanceRetention)&&{"x-amz-bypass-governance-retention":e.BypassGovernanceRetention.toString()}),Hi(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Object(yi.f)(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map(function(e){return Object(yi.f)(e)}).join("/")),s=M({"x-id":"DeleteObject"},void 0!==e.VersionId&&{versionId:e.VersionId}),[4,t.endpoint()];case 1:return a=o.sent(),u=a.hostname,c=a.protocol,l=void 0===c?"https":c,d=a.port,[2,new mi.a({protocol:l,hostname:u,port:d,method:"DELETE",headers:n,path:r,query:s,body:void 0})]}})})}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return i(void 0,void 0,void 0,function(){var n;return o(this,function(r){switch(r.label){case 0:return 204!==e.statusCode&&e.statusCode>=300?[2,Ii(e,t)]:(n={$metadata:Gi(e),DeleteMarker:void 0,RequestCharged:void 0,VersionId:void 0},void 0!==e.headers["x-amz-delete-marker"]&&(n.DeleteMarker="true"===e.headers["x-amz-delete-marker"]),void 0!==e.headers["x-amz-version-id"]&&(n.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,Wi(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}})})}(e,t)},t}(yi.b),To=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return r(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(Eo.a)(t,this.serialize,this.deserialize)),this.middlewareStack.use(ho(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"ListObjectsV2Command",inputFilterSensitiveLog:_r.filterSensitiveLog,outputFilterSensitiveLog:wr.filterSensitiveLog},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},i)},t.prototype.serialize=function(e,t){return function(e,t){return i(void 0,void 0,void 0,function(){var n,r,i,s,a,u,c,l,d;return o(this,function(o){switch(o.label){case 0:if(n=M(M({},Hi(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),Hi(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",Object(yi.f)(i)),s=M(M(M(M(M(M(M({"list-type":"2"},void 0!==e.Delimiter&&{delimiter:e.Delimiter}),void 0!==e.EncodingType&&{"encoding-type":e.EncodingType}),void 0!==e.MaxKeys&&{"max-keys":e.MaxKeys.toString()}),void 0!==e.Prefix&&{prefix:e.Prefix}),void 0!==e.ContinuationToken&&{"continuation-token":e.ContinuationToken}),void 0!==e.FetchOwner&&{"fetch-owner":e.FetchOwner.toString()}),void 0!==e.StartAfter&&{"start-after":e.StartAfter}),[4,t.endpoint()];case 1:return a=o.sent(),u=a.hostname,c=a.protocol,l=void 0===c?"https":c,d=a.port,[2,new mi.a({protocol:l,hostname:u,port:d,method:"GET",headers:n,path:r,query:s,body:void 0})]}})})}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return i(void 0,void 0,void 0,function(){var n,r;return o(this,function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Ti(e,t)]:(n={$metadata:Gi(e),CommonPrefixes:void 0,Contents:void 0,ContinuationToken:void 0,Delimiter:void 0,EncodingType:void 0,IsTruncated:void 0,KeyCount:void 0,MaxKeys:void 0,Name:void 0,NextContinuationToken:void 0,Prefix:void 0,StartAfter:void 0},[4,Ji(e.body,t)]);case 1:return""===(r=i.sent()).CommonPrefixes&&(n.CommonPrefixes=[]),void 0!==r.CommonPrefixes&&(n.CommonPrefixes=Bi(Object(yi.g)(r.CommonPrefixes),t)),""===r.Contents&&(n.Contents=[]),void 0!==r.Contents&&(n.Contents=Ki(Object(yi.g)(r.Contents),t)),void 0!==r.ContinuationToken&&(n.ContinuationToken=r.ContinuationToken),void 0!==r.Delimiter&&(n.Delimiter=r.Delimiter),void 0!==r.EncodingType&&(n.EncodingType=r.EncodingType),void 0!==r.IsTruncated&&(n.IsTruncated="true"==r.IsTruncated),void 0!==r.KeyCount&&(n.KeyCount=parseInt(r.KeyCount)),void 0!==r.MaxKeys&&(n.MaxKeys=parseInt(r.MaxKeys)),void 0!==r.Name&&(n.Name=r.Name),void 0!==r.NextContinuationToken&&(n.NextContinuationToken=r.NextContinuationToken),void 0!==r.Prefix&&(n.Prefix=r.Prefix),void 0!==r.StartAfter&&(n.StartAfter=r.StartAfter),[2,Promise.resolve(n)]}})})}(e,t)},t}(yi.b),Po=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,ko)},ko=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()},Do={},No={},Mo=0;Mo<256;Mo++){var Lo=Mo.toString(16).toLowerCase();1===Lo.length&&(Lo="0"+Lo),Do[Mo]=Lo,No[Lo]=Mo}var jo,Ro,Uo,Fo="X-Amz-Date".toLowerCase(),Bo=["authorization",Fo,"date"],zo="X-Amz-Signature".toLowerCase(),qo="X-Amz-Security-Token".toLowerCase(),Ko={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},$o=/^proxy-/,Vo=/^sec-/,Go="AWS4-HMAC-SHA256-PAYLOAD",Wo={},Ho=[],Jo=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,Yo)},Yo=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()},Zo=function(){function e(e){var t=e.applyChecksum,n=e.credentials,r=e.region,i=e.service,o=e.sha256,s=e.uriEscapePath,a=void 0===s||s;this.service=i,this.sha256=o,this.uriEscapePath=a,this.applyChecksum="boolean"!=typeof t||t,this.regionProvider=es(r),this.credentialProvider=ts(n)}return e.prototype.presign=function(e,t){return void 0===t&&(t={}),Object(bi.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,d,v,y,m,b,w,_,S,E,C,A,O,I,x,T,P;return Object(bi.__generator)(this,function(k){switch(k.label){case 0:return n=t.signingDate,r=void 0===n?new Date:n,i=t.expiresIn,o=void 0===i?3600:i,s=t.unsignableHeaders,a=t.unhoistableHeaders,u=t.signableHeaders,c=t.signingRegion,d=t.signingService,[4,this.credentialProvider()];case 1:return v=k.sent(),null==c?[3,2]:(m=c,[3,4]);case 2:return[4,this.regionProvider()];case 3:m=k.sent(),k.label=4;case 4:return y=m,b=Xo(r),w=b.longDate,_=b.shortDate,o>604800?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(S=l(_,y,null!=d?d:this.service),E=function(e,t){var n,r,i;void 0===t&&(t={});var o="function"==typeof e.clone?e.clone():h(e),s=o.headers,a=o.query,u=void 0===a?{}:a;try{for(var c=Object(bi.__values)(Object.keys(s)),l=c.next();!l.done;l=c.next()){var d=l.value,f=d.toLowerCase();"x-amz-"!==f.substr(0,6)||(null===(i=t.unhoistableHeaders)||void 0===i?void 0:i.has(f))||(u[d]=s[d],delete s[d])}}catch(e){n={error:e}}finally{try{l&&!l.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}return Object(bi.__assign)(Object(bi.__assign)({},e),{headers:s,query:u})}(g(e),{unhoistableHeaders:a}),v.sessionToken&&(E.query["X-Amz-Security-Token"]=v.sessionToken),E.query["X-Amz-Algorithm"]="AWS4-HMAC-SHA256",E.query["X-Amz-Credential"]=v.accessKeyId+"/"+S,E.query["X-Amz-Date"]=w,E.query["X-Amz-Expires"]=o.toString(10),C=f(E,s,u),E.query["X-Amz-SignedHeaders"]=Qo(C),A=E.query,O="X-Amz-Signature",I=this.getSignature,x=[w,S,this.getSigningKey(v,y,_,d)],T=this.createCanonicalRequest,P=[E,C],[4,p(e,this.sha256)]);case 5:return[4,I.apply(this,x.concat([T.apply(this,P.concat([k.sent()]))]))];case 6:return A[O]=k.sent(),[2,E]}})})},e.prototype.sign=function(e,t){return Object(bi.__awaiter)(this,void 0,void 0,function(){return Object(bi.__generator)(this,function(n){return"string"==typeof e?[2,this.signString(e,t)]:e.headers&&e.payload?[2,this.signEvent(e,t)]:[2,this.signRequest(e,t)]})})},e.prototype.signEvent=function(e,t){var n=e.headers,r=e.payload,i=t.signingDate,o=void 0===i?new Date:i,s=t.priorSignature,a=t.signingRegion,u=t.signingService;return Object(bi.__awaiter)(this,void 0,void 0,function(){var e,t,i,d,f,h,v,g,y,m,b;return Object(bi.__generator)(this,function(w){switch(w.label){case 0:return null==a?[3,1]:(t=a,[3,3]);case 1:return[4,this.regionProvider()];case 2:t=w.sent(),w.label=3;case 3:return e=t,i=Xo(o),d=i.shortDate,f=i.longDate,h=l(d,e,null!=u?u:this.service),[4,p({headers:{},body:r},this.sha256)];case 4:return v=w.sent(),(g=new this.sha256).update(n),m=c,[4,g.digest()];case 5:return y=m.apply(void 0,[w.sent()]),b=[Go,f,h,s,y,v].join("\n"),[2,this.signString(b,{signingDate:o,signingRegion:e,signingService:u})]}})})},e.prototype.signString=function(e,t){var n=void 0===t?{}:t,r=n.signingDate,i=void 0===r?new Date:r,o=n.signingRegion,s=n.signingService;return Object(bi.__awaiter)(this,void 0,void 0,function(){var t,n,r,a,u,l,d,f;return Object(bi.__generator)(this,function(p){switch(p.label){case 0:return[4,this.credentialProvider()];case 1:return t=p.sent(),null==o?[3,2]:(r=o,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=p.sent(),p.label=4;case 4:return n=r,a=Xo(i).shortDate,d=(l=this.sha256).bind,[4,this.getSigningKey(t,n,a,s)];case 5:return(u=new(d.apply(l,[void 0,p.sent()]))).update(e),f=c,[4,u.digest()];case 6:return[2,f.apply(void 0,[p.sent()])]}})})},e.prototype.signRequest=function(e,t){var n=void 0===t?{}:t,r=n.signingDate,i=void 0===r?new Date:r,o=n.signableHeaders,s=n.unsignableHeaders,a=n.signingRegion,u=n.signingService;return Object(bi.__awaiter)(this,void 0,void 0,function(){var t,n,r,c,d,h,v,y,m,b,w;return Object(bi.__generator)(this,function(_){switch(_.label){case 0:return[4,this.credentialProvider()];case 1:return t=_.sent(),null==a?[3,2]:(r=a,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=_.sent(),_.label=4;case 4:return n=r,c=g(e),d=Xo(i),h=d.longDate,v=d.shortDate,y=l(v,n,null!=u?u:this.service),c.headers[Fo]=h,t.sessionToken&&(c.headers[qo]=t.sessionToken),[4,p(c,this.sha256)];case 5:return m=_.sent(),!function(e,t){var n,r;e=e.toLowerCase();try{for(var i=Object(bi.__values)(Object.keys(t)),o=i.next();!o.done;o=i.next())if(e===o.value.toLowerCase())return!0}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return!1}("x-amz-content-sha256",c.headers)&&this.applyChecksum&&(c.headers["x-amz-content-sha256"]=m),b=f(c,s,o),[4,this.getSignature(h,y,this.getSigningKey(t,n,v,u),this.createCanonicalRequest(c,b,m))];case 6:return w=_.sent(),c.headers.authorization="AWS4-HMAC-SHA256 Credential="+t.accessKeyId+"/"+y+", SignedHeaders="+Qo(b)+", Signature="+w,[2,c]}})})},e.prototype.createCanonicalRequest=function(e,t,n){var r=Object.keys(t).sort();return e.method+"\n"+this.getCanonicalPath(e)+"\n"+function(e){var t,n,r=e.query,i=void 0===r?{}:r,o=[],s={},a=function(e){if(e.toLowerCase()===zo)return"continue";o.push(e);var t=i[e];"string"==typeof t?s[e]=Jo(e)+"="+Jo(t):Array.isArray(t)&&(s[e]=t.slice(0).sort().reduce(function(t,n){return t.concat([Jo(e)+"="+Jo(n)])},[]).join("&"))};try{for(var u=Object(bi.__values)(Object.keys(i).sort()),c=u.next();!c.done;c=u.next())a(c.value)}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return o.map(function(e){return s[e]}).filter(function(e){return e}).join("&")}(e)+"\n"+r.map(function(e){return e+":"+t[e]}).join("\n")+"\n\n"+r.join(";")+"\n"+n},e.prototype.createStringToSign=function(e,t,n){return Object(bi.__awaiter)(this,void 0,void 0,function(){var r,i;return Object(bi.__generator)(this,function(o){switch(o.label){case 0:return(r=new this.sha256).update(n),[4,r.digest()];case 1:return i=o.sent(),[2,"AWS4-HMAC-SHA256\n"+e+"\n"+t+"\n"+c(i)]}})})},e.prototype.getCanonicalPath=function(e){var t=e.path;return this.uriEscapePath?"/"+encodeURIComponent(t.replace(/^\//,"")).replace(/%2F/g,"/"):t},e.prototype.getSignature=function(e,t,n,r){return Object(bi.__awaiter)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(bi.__generator)(this,function(l){switch(l.label){case 0:return[4,this.createStringToSign(e,t,r)];case 1:return i=l.sent(),a=(s=this.sha256).bind,[4,n];case 2:return(o=new(a.apply(s,[void 0,l.sent()]))).update(i),u=c,[4,o.digest()];case 3:return[2,u.apply(void 0,[l.sent()])]}})})},e.prototype.getSigningKey=function(e,t,n,r){return function(e,t,n,r,i){return Object(bi.__awaiter)(void 0,void 0,void 0,function(){var o,s,a,u,l,f,p,h,v;return Object(bi.__generator)(this,function(g){switch(g.label){case 0:return[4,d(e,t.secretAccessKey,t.accessKeyId)];case 1:if(o=g.sent(),(s=n+":"+r+":"+i+":"+c(o)+":"+t.sessionToken)in Wo)return[2,Wo[s]];for(Ho.push(s);Ho.length>50;)delete Wo[Ho.shift()];a="AWS4"+t.secretAccessKey,g.label=2;case 2:g.trys.push([2,7,8,9]),u=Object(bi.__values)([n,r,i,"aws4_request"]),l=u.next(),g.label=3;case 3:return l.done?[3,6]:(f=l.value,[4,d(e,a,f)]);case 4:a=g.sent(),g.label=5;case 5:return l=u.next(),[3,3];case 6:return[3,9];case 7:return p=g.sent(),h={error:p},[3,9];case 8:try{l&&!l.done&&(v=u.return)&&v.call(u)}finally{if(h)throw h.error}return[7];case 9:return[2,Wo[s]=a]}})})}(this.sha256,e,n,t,r||this.service)},e}(),Xo=function(e){var t=y(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.substr(0,8)}},Qo=function(e){return Object.keys(e).sort().join(";")},es=function(e){if("string"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e},ts=function(e){if("object"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e},ns=function(){function e(e){var t=Object(bi.__assign)({service:e.signingName||e.service||"s3",uriEscapePath:e.uriEscapePath||!1},e);this.signer=new Zo(t)}return e.prototype.presign=function(e,t){void 0===t&&(t={});var n=t.unsignableHeaders,r=void 0===n?new Set:n,i=t.unhoistableHeaders,o=void 0===i?new Set:i,s=Object(bi.__rest)(t,["unsignableHeaders","unhoistableHeaders"]);return Object(bi.__awaiter)(this,void 0,void 0,function(){return Object(bi.__generator)(this,function(t){return r.add("content-type"),Object.keys(e.headers).map(function(e){return e.toLowerCase()}).filter(function(e){return e.startsWith("x-amz-server-side-encryption")}).forEach(function(e){o.add(e)}),e.headers["X-Amz-Content-Sha256"]="UNSIGNED-PAYLOAD",e.headers.host||(e.headers.host=e.hostname),[2,this.signer.presign(e,Object(bi.__assign)({expiresIn:900,unsignableHeaders:r,unhoistableHeaders:o},s))]})})},e}(),rs=n(36),is=n.n(rs),os=n(49);!function(e){e.NO_CREDENTIALS="No credentials",e.NO_SRC_KEY='source param should be an object with the property "key" with value of type string',e.NO_DEST_KEY='destination param should be an object with the property "key" with value of type string',e.INVALID_BLOB="Object must be an instance of Blob"}(jo||(jo={})),function(e){e.CLEANUP_FAILED="Multipart copy clean up failed",e.NO_OBJECT_FOUND="Object does not exist",e.INVALID_QUEUESIZE="Queue size must be a positive number",e.NO_COPYSOURCE="You must specify a copy source",e.MAX_NUM_PARTS_EXCEEDED="Only a maximum of 10000 parts are allowed"}(Ro||(Ro={})),function(e){e.UPLOAD_PAUSED_MESSAGE="paused"}(Uo||(Uo={}));var ss,as,us,cs,ls,ds,fs,ps,hs,vs,gs,ys,ms,bs,ws,_s,Ss,Es,Cs,As,Os,Is,xs,Ts,Ps,ks,Ds,Ns,Ms,Ls,js,Rs,Us,Fs,Bs=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},zs=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},qs=new x.a("axios-http-handler"),Ks=function(e,t){var n,r;try{for(var i=Bs(Object.entries(e)),o=i.next();!o.done;o=i.next()){var s=zs(o.value,2),a=s[0],u=s[1];a!==t&&a.toUpperCase()===t.toUpperCase()&&(e[t]=u,delete e[a])}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},$s=[function(e,t){return"undefined"!=typeof Blob&&e instanceof Blob?(Ks(t,"Content-Type"),Ks(t,"Accept"),e):is.a.defaults.transformRequest[0].call(null,e,t)}],Vs=function(){function e(e,t,n){void 0===e&&(e={}),this.httpOptions=e,this.emitter=t,this.cancelTokenSource=n}return e.prototype.destroy=function(){},e.prototype.handle=function(e,t){var n=this.httpOptions.requestTimeout,r=t.emitter||this.emitter,i=e.path;if(e.query){var o=s(e.query);o&&(i+="?"+o)}var a=e.port,u=e.protocol+"//"+e.hostname+(a?":"+a:"")+i,c={};c.url=u,c.method=e.method,c.headers=e.headers,delete c.headers.host,e.body?c.data=e.body:c.headers[Object.keys(c.headers).find(function(e){return"content-type"===e.toLowerCase()})]&&(c.data=null),r&&(c.onUploadProgress=function(e){r.emit("sendUploadProgress",e),qs.debug(e)},c.onDownloadProgress=function(e){r.emit("sendDownloadProgress",e),qs.debug(e)}),this.cancelTokenSource&&(c.cancelToken=this.cancelTokenSource.token),t.cancelTokenSource&&(c.cancelToken=t.cancelTokenSource.token),c.responseType="blob",os.a.isReactNative&&(c.transformRequest=$s);var l=[is.a.request(c).then(function(e){return{response:new mi.b({headers:e.headers,statusCode:e.status,body:e.data})}}).catch(function(e){var t,n;if(e.message!==Uo.UPLOAD_PAUSED_MESSAGE&&qs.error(e.message),is.a.isCancel(e)||!function(e){return void 0!==e&&Object.prototype.hasOwnProperty.call(e,"response")&&void 0!==e.response&&Object.prototype.hasOwnProperty.call(e.response,"status")&&"number"==typeof e.response.status}(e))throw e;return{response:new mi.b({statusCode:e.response.status,body:null===(t=e.response)||void 0===t?void 0:t.data,headers:null===(n=e.response)||void 0===n?void 0:n.headers})}}),m(n)];return Promise.race(l)},e}(),Gs="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",Ws=function(e,t,n,r,i){if(e){var o={attrs:n};r&&(o.metrics=r),k.a.dispatch("storage",{event:t,data:o,message:i},"Storage",Gs)}},Hs=function(e){return void 0!==e&&e instanceof Blob},Js=function(e){return void 0!==e&&e instanceof ArrayBuffer},Ys=n(185),Zs=n(42),Xs=n(97),Qs=n(22),ea=n(45),ta=n(16),na=[1732584193,4023233417,2562383102,271733878],ra=function(){function e(){this.state=Uint32Array.from(na),
this.buffer=new DataView(new ArrayBuffer(64)),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(!function(e){return"string"==typeof e?0===e.length:0===e.byteLength}(e)){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=function(e){return"string"==typeof e?Object(ta.a)(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}(e),n=0,r=t.byteLength;for(this.bytesHashed+=r;r>0;)this.buffer.setUint8(this.bufferLength++,t[n++]),r--,64===this.bufferLength&&(this.hashBuffer(),this.bufferLength=0)}},e.prototype.digest=function(){return Object(bi.__awaiter)(this,void 0,void 0,function(){var e,t,n,r,i,o,s;return Object(bi.__generator)(this,function(a){if(!this.finished){if(t=(e=this).buffer,n=e.bufferLength,r=e.bytesHashed,i=8*r,t.setUint8(this.bufferLength++,128),n%64>=56){for(s=this.bufferLength;s<64;s++)t.setUint8(s,0);this.hashBuffer(),this.bufferLength=0}for(s=this.bufferLength;s<56;s++)t.setUint8(s,0);t.setUint32(56,i>>>0,!0),t.setUint32(60,Math.floor(i/4294967296),!0),this.hashBuffer(),this.finished=!0}for(o=new DataView(new ArrayBuffer(16)),s=0;s<4;s++)o.setUint32(4*s,this.state[s],!0);return[2,new Uint8Array(o.buffer,o.byteOffset,o.byteLength)]})})},e.prototype.hashBuffer=function(){var e=this.buffer,t=this.state,n=t[0],r=t[1],i=t[2],o=t[3];n=_(n,r,i,o,e.getUint32(0,!0),7,3614090360),o=_(o,n,r,i,e.getUint32(4,!0),12,3905402710),i=_(i,o,n,r,e.getUint32(8,!0),17,606105819),r=_(r,i,o,n,e.getUint32(12,!0),22,3250441966),n=_(n,r,i,o,e.getUint32(16,!0),7,4118548399),o=_(o,n,r,i,e.getUint32(20,!0),12,1200080426),i=_(i,o,n,r,e.getUint32(24,!0),17,2821735955),r=_(r,i,o,n,e.getUint32(28,!0),22,4249261313),n=_(n,r,i,o,e.getUint32(32,!0),7,1770035416),o=_(o,n,r,i,e.getUint32(36,!0),12,2336552879),i=_(i,o,n,r,e.getUint32(40,!0),17,4294925233),r=_(r,i,o,n,e.getUint32(44,!0),22,2304563134),n=_(n,r,i,o,e.getUint32(48,!0),7,1804603682),o=_(o,n,r,i,e.getUint32(52,!0),12,4254626195),i=_(i,o,n,r,e.getUint32(56,!0),17,2792965006),n=S(n,r=_(r,i,o,n,e.getUint32(60,!0),22,1236535329),i,o,e.getUint32(4,!0),5,4129170786),o=S(o,n,r,i,e.getUint32(24,!0),9,3225465664),i=S(i,o,n,r,e.getUint32(44,!0),14,643717713),r=S(r,i,o,n,e.getUint32(0,!0),20,3921069994),n=S(n,r,i,o,e.getUint32(20,!0),5,3593408605),o=S(o,n,r,i,e.getUint32(40,!0),9,38016083),i=S(i,o,n,r,e.getUint32(60,!0),14,3634488961),r=S(r,i,o,n,e.getUint32(16,!0),20,3889429448),n=S(n,r,i,o,e.getUint32(36,!0),5,568446438),o=S(o,n,r,i,e.getUint32(56,!0),9,3275163606),i=S(i,o,n,r,e.getUint32(12,!0),14,4107603335),r=S(r,i,o,n,e.getUint32(32,!0),20,1163531501),n=S(n,r,i,o,e.getUint32(52,!0),5,2850285829),o=S(o,n,r,i,e.getUint32(8,!0),9,4243563512),i=S(i,o,n,r,e.getUint32(28,!0),14,1735328473),n=E(n,r=S(r,i,o,n,e.getUint32(48,!0),20,2368359562),i,o,e.getUint32(20,!0),4,4294588738),o=E(o,n,r,i,e.getUint32(32,!0),11,2272392833),i=E(i,o,n,r,e.getUint32(44,!0),16,1839030562),r=E(r,i,o,n,e.getUint32(56,!0),23,4259657740),n=E(n,r,i,o,e.getUint32(4,!0),4,2763975236),o=E(o,n,r,i,e.getUint32(16,!0),11,1272893353),i=E(i,o,n,r,e.getUint32(28,!0),16,4139469664),r=E(r,i,o,n,e.getUint32(40,!0),23,3200236656),n=E(n,r,i,o,e.getUint32(52,!0),4,681279174),o=E(o,n,r,i,e.getUint32(0,!0),11,3936430074),i=E(i,o,n,r,e.getUint32(12,!0),16,3572445317),r=E(r,i,o,n,e.getUint32(24,!0),23,76029189),n=E(n,r,i,o,e.getUint32(36,!0),4,3654602809),o=E(o,n,r,i,e.getUint32(48,!0),11,3873151461),i=E(i,o,n,r,e.getUint32(60,!0),16,530742520),n=C(n,r=E(r,i,o,n,e.getUint32(8,!0),23,3299628645),i,o,e.getUint32(0,!0),6,4096336452),o=C(o,n,r,i,e.getUint32(28,!0),10,1126891415),i=C(i,o,n,r,e.getUint32(56,!0),15,2878612391),r=C(r,i,o,n,e.getUint32(20,!0),21,4237533241),n=C(n,r,i,o,e.getUint32(48,!0),6,1700485571),o=C(o,n,r,i,e.getUint32(12,!0),10,2399980690),i=C(i,o,n,r,e.getUint32(40,!0),15,4293915773),r=C(r,i,o,n,e.getUint32(4,!0),21,2240044497),n=C(n,r,i,o,e.getUint32(32,!0),6,1873313359),o=C(o,n,r,i,e.getUint32(60,!0),10,4264355552),i=C(i,o,n,r,e.getUint32(24,!0),15,2734768916),r=C(r,i,o,n,e.getUint32(52,!0),21,1309151649),n=C(n,r,i,o,e.getUint32(16,!0),6,4149444226),o=C(o,n,r,i,e.getUint32(44,!0),10,3174756917),i=C(i,o,n,r,e.getUint32(8,!0),15,718787259),r=C(r,i,o,n,e.getUint32(36,!0),21,3951481745),t[0]=n+t[0]&4294967295,t[1]=r+t[1]&4294967295,t[2]=i+t[2]&4294967295,t[3]=o+t[3]&4294967295},e}(),ia=n(14),oa=n(18),sa=n(43),aa=n(44),ua=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),ca=new Set(["cn-north-1","cn-northwest-1"]),la=new Set(["us-iso-east-1"]),da=new Set(["us-isob-east-1"]),fa=new Set(["us-gov-east-1","us-gov-west-1"]),pa={apiVersion:"2006-03-01",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,t){var n=void 0;switch(e){case"af-south-1":n={hostname:"s3.af-south-1.amazonaws.com",partition:"aws"};break;case"ap-east-1":n={hostname:"s3.ap-east-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-1":n={hostname:"s3.ap-northeast-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-2":n={hostname:"s3.ap-northeast-2.amazonaws.com",partition:"aws"};break;case"ap-south-1":n={hostname:"s3.ap-south-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-1":n={hostname:"s3.ap-southeast-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-2":n={hostname:"s3.ap-southeast-2.amazonaws.com",partition:"aws"};break;case"aws-global":n={hostname:"s3.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"ca-central-1":n={hostname:"s3.ca-central-1.amazonaws.com",partition:"aws"};break;case"cn-north-1":n={hostname:"s3.cn-north-1.amazonaws.com.cn",partition:"aws-cn"};break;case"cn-northwest-1":n={hostname:"s3.cn-northwest-1.amazonaws.com.cn",partition:"aws-cn"};break;case"eu-central-1":n={hostname:"s3.eu-central-1.amazonaws.com",partition:"aws"};break;case"eu-north-1":n={hostname:"s3.eu-north-1.amazonaws.com",partition:"aws"};break;case"eu-south-1":n={hostname:"s3.eu-south-1.amazonaws.com",partition:"aws"};break;case"eu-west-1":n={hostname:"s3.eu-west-1.amazonaws.com",partition:"aws"};break;case"eu-west-2":n={hostname:"s3.eu-west-2.amazonaws.com",partition:"aws"};break;case"eu-west-3":n={hostname:"s3.eu-west-3.amazonaws.com",partition:"aws"};break;case"fips-us-gov-west-1":n={hostname:"s3-fips.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"me-south-1":n={hostname:"s3.me-south-1.amazonaws.com",partition:"aws"};break;case"s3-external-1":n={hostname:"s3-external-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"sa-east-1":n={hostname:"s3.sa-east-1.amazonaws.com",partition:"aws"};break;case"us-east-1":n={hostname:"s3.us-east-1.amazonaws.com",partition:"aws"};break;case"us-east-2":n={hostname:"s3.us-east-2.amazonaws.com",partition:"aws"};break;case"us-gov-east-1":n={hostname:"s3.us-gov-east-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-gov-west-1":n={hostname:"s3.us-gov-west-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-iso-east-1":n={hostname:"s3.us-iso-east-1.c2s.ic.gov",partition:"aws-iso"};break;case"us-isob-east-1":n={hostname:"s3.us-isob-east-1.sc2s.sgov.gov",partition:"aws-iso-b"};break;case"us-west-1":n={hostname:"s3.us-west-1.amazonaws.com",partition:"aws"};break;case"us-west-2":n={hostname:"s3.us-west-2.amazonaws.com",partition:"aws"};break;default:ua.has(e)&&(n={hostname:"s3.{region}.amazonaws.com".replace("{region}",e),partition:"aws"}),ca.has(e)&&(n={hostname:"s3.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),la.has(e)&&(n={hostname:"s3.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),da.has(e)&&(n={hostname:"s3.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),fa.has(e)&&(n={hostname:"s3.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}),void 0===n&&(n={hostname:"s3.{region}.amazonaws.com".replace("{region}",e),partition:"aws"})}return Promise.resolve(M({signingService:"s3"},n))},serviceId:"S3",signingEscapePath:!1,urlParser:n(47).a,useArnRegion:!1},ha=M(M({},pa),{runtime:"browser",base64Decoder:oa.a,base64Encoder:oa.b,bodyLengthChecker:sa.a,credentialDefaultProvider:function(e){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:Object(aa.a)({serviceId:pa.serviceId,clientVersion:Ys.version}),eventStreamSerdeProvider:Xs.a,maxAttempts:ia.a,md5:ra,region:Object(ea.a)("Region is missing"),requestHandler:new Qs.a,sha256:Zs.Sha256,streamCollector:Qs.b,streamHasher:function(e,t){return Object(bi.__awaiter)(this,void 0,void 0,function(){var n;return Object(bi.__generator)(this,function(r){switch(r.label){case 0:return n=new e,[4,b(t,function(e){n.update(e)})];case 1:return r.sent(),[2,n.digest()]}})})},utf8Decoder:ta.a,utf8Encoder:ta.b}),va=n(24),ga=n(99),ya=n(41),ma={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0},ba=function(e){return{applyToStack:function(t){t.add(function(e){var t=this;return function(n){return function(r){return Object(bi.__awaiter)(t,void 0,void 0,function(){var t;return Object(bi.__generator)(this,function(i){return t=r.request,mi.a.isInstance(t)&&t.body&&"node"===e.runtime&&(t.headers=Object(bi.__assign)(Object(bi.__assign)({},t.headers),{Expect:"100-continue"})),[2,n(Object(bi.__assign)(Object(bi.__assign)({},r),{request:t}))]})})}}}(e),ma)}}},wa=n(21),_a=n(46),Sa=n(27),Ea=n(23),Ca=function(e){function t(t){var n,r,i,o,s,a,u,c,l,d,f,p=this,h=M(M({},ha),t),v=Object(va.b)(h),g=Object(va.a)(v),y=Object(Sa.b)(g),m=Object(ia.c)(y),b=(i=void 0!==(r=(n=Object(wa.b)(m)).bucketEndpoint)&&r,s=void 0!==(o=n.forcePathStyle)&&o,u=void 0!==(a=n.useAccelerateEndpoint)&&a,l=void 0!==(c=n.useDualstackEndpoint)&&c,d=n.useArnRegion,f=void 0!==d&&d,Object(bi.__assign)(Object(bi.__assign)({},n),{bucketEndpoint:i,forcePathStyle:s,useAccelerateEndpoint:u,useDualstackEndpoint:l,useArnRegion:"function"==typeof f?f:function(){return Promise.resolve(f)}})),w=Object(Ea.b)(b),_=Object(ga.a)(w);return(p=e.call(this,_)||this).config=_,p.middlewareStack.use(Object(Sa.a)(p.config)),p.middlewareStack.use(Object(ia.b)(p.config)),p.middlewareStack.use(Object(ya.a)(p.config)),p.middlewareStack.use(Object(wa.a)(p.config)),p.middlewareStack.use(Object(_a.a)(p.config)),p.middlewareStack.use(go(p.config)),p.middlewareStack.use(mo(p.config)),p.middlewareStack.use(ba(p.config)),p.middlewareStack.use(Object(Ea.a)(p.config)),p}return r(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(yi.a),Aa=function(){return(Aa=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Oa=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},Ia=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},xa=new x.a("S3ClientUtils"),Ta={accessKeyId:"",secretAccessKey:""},Pa=function(e){var t=e.credentials,n=e.level,r=e.customPrefix||{},i=e.identityId||t.identityId,o=(void 0!==r.private?r.private:"private/")+i+"/",s=(void 0!==r.protected?r.protected:"protected/")+i+"/",a=void 0!==r.public?r.public:"public/";switch(n){case"private":return o;case"protected":return s;default:return a}},ka=function(e,t){return function(n,r){return function(r){return Oa(void 0,void 0,void 0,function(){var i,o,s,a;return Ia(this,function(u){switch(u.label){case 0:return[4,D.a.get()];case 1:return i=u.sent(),o=D.a.shear(i),s=Pa(Aa(Aa({},e),{credentials:o})),a=Object.assign({},r.input),Object.prototype.hasOwnProperty.call(r.input,"Key")?(a.Key=s+t,r.input=a):Object.prototype.hasOwnProperty.call(r.input,"Prefix")&&(a.Prefix=s+t,r.input=a),[2,n(r)]}})})}}},Da=function(e){return function(t,n){return function(n){return Oa(void 0,void 0,void 0,function(){var r,i;return Ia(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,t(n)];case 1:return[2,o.sent()];case 2:throw(s=r=o.sent()).ServerTime&&"string"==typeof s.Code&&"RequestTimeTooSkewed"===s.Code&&(i=new Date(r.ServerTime),e.systemClockOffset=i.getTime()-Date.now()),r;case 3:return[2]}var s})})}}},Na={step:"finalizeRequest",name:"autoAdjustClockskewMiddleware"},Ma={step:"initialize",name:"addPrefixMiddleware"},La=function(){return Oa(void 0,void 0,void 0,function(){var e,t,n;return Ia(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,D.a.get()];case 1:return(e=r.sent())?(t=D.a.shear(e),xa.debug("credentials provider get credentials",t),[2,t]):[2,Ta];case 2:return n=r.sent(),xa.warn("credentials provider error",n),[2,Ta];case 3:return[2]}})})},ja=function(e,t){var n=e.region,r=e.cancelTokenSource,i=e.dangerouslyConnectToHttpEndpointForTesting,o=e.useAccelerateEndpoint,s={};i&&(s={endpoint:"http://localhost:20005",tls:!1,bucketEndpoint:!1,forcePathStyle:!0});var a=new Ca(Aa(Aa({region:n,credentials:La,customUserAgent:Object(os.b)()},s),{requestHandler:new Vs({},t,r),useAccelerateEndpoint:o}));return a.middlewareStack.remove("contentLengthMiddleware"),a},Ra=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return r(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(Eo.a)(t,this.serialize,this.deserialize)),this.middlewareStack.use(Ao(t)),this.middlewareStack.use(ho(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutObjectCommand",inputFilterSensitiveLog:ti.filterSensitiveLog,outputFilterSensitiveLog:ei.filterSensitiveLog},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},i)},t.prototype.serialize=function(e,t){return function(e,t){return i(void 0,void 0,void 0,function(){var n,r,i,s,a,u,c,l,d,f,p;return o(this,function(o){switch(o.label){case 0:if(n=M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M({"content-type":"application/octet-stream"},Hi(e.ACL)&&{"x-amz-acl":e.ACL}),Hi(e.CacheControl)&&{"cache-control":e.CacheControl}),Hi(e.ContentDisposition)&&{"content-disposition":e.ContentDisposition}),Hi(e.ContentEncoding)&&{"content-encoding":e.ContentEncoding}),Hi(e.ContentLanguage)&&{"content-language":e.ContentLanguage}),Hi(e.ContentLength)&&{"content-length":e.ContentLength.toString()}),Hi(e.ContentMD5)&&{"content-md5":e.ContentMD5}),Hi(e.ContentType)&&{"content-type":e.ContentType}),Hi(e.Expires)&&{expires:Object(yi.e)(e.Expires).toString()}),Hi(e.GrantFullControl)&&{"x-amz-grant-full-control":e.GrantFullControl}),Hi(e.GrantRead)&&{"x-amz-grant-read":e.GrantRead}),Hi(e.GrantReadACP)&&{"x-amz-grant-read-acp":e.GrantReadACP}),Hi(e.GrantWriteACP)&&{"x-amz-grant-write-acp":e.GrantWriteACP}),Hi(e.ServerSideEncryption)&&{"x-amz-server-side-encryption":e.ServerSideEncryption}),Hi(e.StorageClass)&&{"x-amz-storage-class":e.StorageClass}),Hi(e.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":e.WebsiteRedirectLocation}),Hi(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),Hi(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),Hi(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),Hi(e.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":e.SSEKMSKeyId}),Hi(e.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":e.SSEKMSEncryptionContext}),Hi(e.BucketKeyEnabled)&&{"x-amz-server-side-encryption-bucket-key-enabled":e.BucketKeyEnabled.toString()}),Hi(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),Hi(e.Tagging)&&{"x-amz-tagging":e.Tagging}),Hi(e.ObjectLockMode)&&{"x-amz-object-lock-mode":e.ObjectLockMode}),Hi(e.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(e.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),Hi(e.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":e.ObjectLockLegalHoldStatus}),Hi(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),void 0!==e.Metadata&&Object.keys(e.Metadata).reduce(function(t,n){var r;return M(M({},t),((r={})["x-amz-meta-"+n.toLowerCase()]=e.Metadata[n],r))},{})),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Object(yi.f)(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map(function(e){return Object(yi.f)(e)}).join("/")),s={"x-id":"PutObject"},void 0!==e.Body&&(u=e.Body,a=u),[4,t.endpoint()];case 1:return c=o.sent(),l=c.hostname,d=c.protocol,f=void 0===d?"https":d,p=c.port,[2,new mi.a({protocol:f,hostname:l,port:p,method:"PUT",headers:n,path:r,query:s,body:a})]}})})}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return i(void 0,void 0,void 0,function(){var n;return o(this,function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,ki(e,t)]:(n={$metadata:Gi(e),BucketKeyEnabled:void 0,ETag:void 0,Expiration:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==e.headers["x-amz-expiration"]&&(n.Expiration=e.headers["x-amz-expiration"]),void 0!==e.headers.etag&&(n.ETag=e.headers.etag),void 0!==e.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-version-id"]&&(n.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(n.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(n.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-context"]&&(n.SSEKMSEncryptionContext=e.headers["x-amz-server-side-encryption-context"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(n.BucketKeyEnabled="true"===e.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,Wi(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}})})}(e,t)},t}(yi.b),Ua=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return r(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(Eo.a)(t,this.serialize,this.deserialize)),this.middlewareStack.use(Ao(t)),this.middlewareStack.use(ho(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"CreateMultipartUploadCommand",inputFilterSensitiveLog:oe.filterSensitiveLog,outputFilterSensitiveLog:ie.filterSensitiveLog},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},i)},t.prototype.serialize=function(e,t){return function(e,t){return i(void 0,void 0,void 0,function(){var n,r,i,s,a,u,c,l,d;return o(this,function(o){switch(o.label){case 0:if(n=M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M({},Hi(e.ACL)&&{"x-amz-acl":e.ACL}),Hi(e.CacheControl)&&{"cache-control":e.CacheControl}),Hi(e.ContentDisposition)&&{"content-disposition":e.ContentDisposition}),Hi(e.ContentEncoding)&&{"content-encoding":e.ContentEncoding}),Hi(e.ContentLanguage)&&{"content-language":e.ContentLanguage}),Hi(e.ContentType)&&{"content-type":e.ContentType}),Hi(e.Expires)&&{expires:Object(yi.e)(e.Expires).toString()}),Hi(e.GrantFullControl)&&{"x-amz-grant-full-control":e.GrantFullControl}),Hi(e.GrantRead)&&{"x-amz-grant-read":e.GrantRead}),Hi(e.GrantReadACP)&&{"x-amz-grant-read-acp":e.GrantReadACP}),Hi(e.GrantWriteACP)&&{"x-amz-grant-write-acp":e.GrantWriteACP}),Hi(e.ServerSideEncryption)&&{"x-amz-server-side-encryption":e.ServerSideEncryption}),Hi(e.StorageClass)&&{"x-amz-storage-class":e.StorageClass}),Hi(e.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":e.WebsiteRedirectLocation}),Hi(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),Hi(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),Hi(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),Hi(e.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":e.SSEKMSKeyId}),Hi(e.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":e.SSEKMSEncryptionContext}),Hi(e.BucketKeyEnabled)&&{"x-amz-server-side-encryption-bucket-key-enabled":e.BucketKeyEnabled.toString()}),Hi(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),Hi(e.Tagging)&&{"x-amz-tagging":e.Tagging}),Hi(e.ObjectLockMode)&&{"x-amz-object-lock-mode":e.ObjectLockMode}),Hi(e.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(e.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),Hi(e.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":e.ObjectLockLegalHoldStatus}),Hi(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),void 0!==e.Metadata&&Object.keys(e.Metadata).reduce(function(t,n){var r;return M(M({},t),((r={})["x-amz-meta-"+n.toLowerCase()]=e.Metadata[n],r))},{})),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Object(yi.f)(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map(function(e){return Object(yi.f)(e)}).join("/")),s={uploads:""},[4,t.endpoint()];case 1:return a=o.sent(),u=a.hostname,c=a.protocol,l=void 0===c?"https":c,d=a.port,[2,new mi.a({protocol:l,hostname:u,port:d,method:"POST",headers:n,path:r,query:s,body:void 0})]}})})}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return i(void 0,void 0,void 0,function(){var n,r;return o(this,function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Oi(e,t)]:(n={$metadata:Gi(e),AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,BucketKeyEnabled:void 0,Key:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,UploadId:void 0},void 0!==e.headers["x-amz-abort-date"]&&(n.AbortDate=new Date(e.headers["x-amz-abort-date"])),void 0!==e.headers["x-amz-abort-rule-id"]&&(n.AbortRuleId=e.headers["x-amz-abort-rule-id"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(n.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(n.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-context"]&&(n.SSEKMSEncryptionContext=e.headers["x-amz-server-side-encryption-context"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(n.BucketKeyEnabled="true"===e.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,Ji(e.body,t)]);case 1:return void 0!==(r=i.sent()).Bucket&&(n.Bucket=r.Bucket),void 0!==r.Key&&(n.Key=r.Key),void 0!==r.UploadId&&(n.UploadId=r.UploadId),[2,Promise.resolve(n)]}})})}(e,t)},t}(yi.b);(ss||(ss={})).filterSensitiveLog=function(e){return M({},e)},(as||(as={})).filterSensitiveLog=function(e){return M(M({},e),e.Encryption&&{Encryption:gi.filterSensitiveLog(e.Encryption)})},(us||(us={})).filterSensitiveLog=function(e){return M(M({},e),e.S3&&{S3:as.filterSensitiveLog(e.S3)})},function(e){e.IGNORE="IGNORE",e.NONE="NONE",e.USE="USE"}(cs||(cs={})),(ls||(ls={})).filterSensitiveLog=function(e){return M({},e)},function(e){e.DOCUMENT="DOCUMENT",e.LINES="LINES"}(ds||(ds={})),(fs||(fs={})).filterSensitiveLog=function(e){return M({},e)},(ps||(ps={})).filterSensitiveLog=function(e){return M({},e)},(hs||(hs={})).filterSensitiveLog=function(e){return M({},e)},function(e){e.ALWAYS="ALWAYS",e.ASNEEDED="ASNEEDED"}(vs||(vs={})),(gs||(gs={})).filterSensitiveLog=function(e){return M({},e)},(ys||(ys={})).filterSensitiveLog=function(e){return M({},e)},(ms||(ms={})).filterSensitiveLog=function(e){return M({},e)},(bs||(bs={})).filterSensitiveLog=function(e){return M({},e)},function(e){e.SELECT="SELECT"}(ws||(ws={})),(_s||(_s={})).filterSensitiveLog=function(e){return M(M({},e),e.OutputLocation&&{OutputLocation:us.filterSensitiveLog(e.OutputLocation)})},(Ss||(Ss={})).filterSensitiveLog=function(e){return M(M({},e),e.RestoreRequest&&{RestoreRequest:_s.filterSensitiveLog(e.RestoreRequest)})},(Es||(Es={})).filterSensitiveLog=function(e){return M({},e)},(Cs||(Cs={})).filterSensitiveLog=function(e){return M({},e)},(As||(As={})).filterSensitiveLog=function(e){return M({},e)},(Os||(Os={})).filterSensitiveLog=function(e){return M({},e)},(Is||(Is={})).filterSensitiveLog=function(e){return M({},e)},(xs||(xs={})).filterSensitiveLog=function(e){return M({},e)},(Ts||(Ts={})).filterSensitiveLog=function(e){return M({},e)},function(e){e.visit=function(e,t){return void 0!==e.Records?t.Records(e.Records):void 0!==e.Stats?t.Stats(e.Stats):void 0!==e.Progress?t.Progress(e.Progress):void 0!==e.Cont?t.Cont(e.Cont):void 0!==e.End?t.End(e.End):t._(e.$unknown[0],e.$unknown[1])},e.filterSensitiveLog=function(e){var t;return void 0!==e.Records?{Records:Is.filterSensitiveLog(e.Records)}:void 0!==e.Stats?{Stats:Ts.filterSensitiveLog(e.Stats)}:void 0!==e.Progress?{Progress:Os.filterSensitiveLog(e.Progress)}:void 0!==e.Cont?{Cont:Es.filterSensitiveLog(e.Cont)}:void 0!==e.End?{End:Cs.filterSensitiveLog(e.End)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0}}(Ps||(Ps={})),(ks||(ks={})).filterSensitiveLog=function(e){return M(M({},e),e.Payload&&{Payload:"STREAMING_CONTENT"})},(Ds||(Ds={})).filterSensitiveLog=function(e){return M({},e)},(Ns||(Ns={})).filterSensitiveLog=function(e){return M({},e)},(Ms||(Ms={})).filterSensitiveLog=function(e){return M(M({},e),e.SSECustomerKey&&{SSECustomerKey:yi.d})},(Ls||(Ls={})).filterSensitiveLog=function(e){return M(M({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:yi.d})},(js||(js={})).filterSensitiveLog=function(e){return M(M({},e),e.SSECustomerKey&&{SSECustomerKey:yi.d})},(Rs||(Rs={})).filterSensitiveLog=function(e){return M({},e)},(Us||(Us={})).filterSensitiveLog=function(e){return M(M({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:yi.d})},(Fs||(Fs={})).filterSensitiveLog=function(e){return M(M(M({},e),e.SSECustomerKey&&{SSECustomerKey:yi.d}),e.CopySourceSSECustomerKey&&{CopySourceSSECustomerKey:yi.d})};var Fa,Ba,za=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return r(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(Eo.a)(t,this.serialize,this.deserialize)),this.middlewareStack.use(Ao(t)),this.middlewareStack.use(ho(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"UploadPartCommand",inputFilterSensitiveLog:js.filterSensitiveLog,outputFilterSensitiveLog:Ls.filterSensitiveLog},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},i)},t.prototype.serialize=function(e,t){return function(e,t){return i(void 0,void 0,void 0,function(){var n,r,i,s,a,u,c,l,d,f,p;return o(this,function(o){switch(o.label){case 0:if(n=M(M(M(M(M(M(M({"content-type":"application/octet-stream"},Hi(e.ContentLength)&&{"content-length":e.ContentLength.toString()}),Hi(e.ContentMD5)&&{"content-md5":e.ContentMD5}),Hi(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),Hi(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),Hi(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),Hi(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),Hi(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Object(yi.f)(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map(function(e){return Object(yi.f)(e)}).join("/")),s=M(M({"x-id":"UploadPart"},void 0!==e.PartNumber&&{partNumber:e.PartNumber.toString()}),void 0!==e.UploadId&&{uploadId:e.UploadId}),void 0!==e.Body&&(u=e.Body,a=u),[4,t.endpoint()];case 1:return c=o.sent(),l=c.hostname,d=c.protocol,f=void 0===d?"https":d,p=c.port,[2,new mi.a({protocol:f,hostname:l,port:p,method:"PUT",headers:n,path:r,query:s,body:a})]}})})}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return i(void 0,void 0,void 0,function(){var n;return o(this,function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Di(e,t)]:(n={$metadata:Gi(e),BucketKeyEnabled:void 0,ETag:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0},void 0!==e.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers.etag&&(n.ETag=e.headers.etag),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(n.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(n.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),
void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(n.BucketKeyEnabled="true"===e.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,Wi(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}})})}(e,t)},t}(yi.b),qa=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return r(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(Eo.a)(t,this.serialize,this.deserialize)),this.middlewareStack.use(So(t)),this.middlewareStack.use(ho(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"CompleteMultipartUploadCommand",inputFilterSensitiveLog:H.filterSensitiveLog,outputFilterSensitiveLog:V.filterSensitiveLog},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},i)},t.prototype.serialize=function(e,t){return function(e,t){return i(void 0,void 0,void 0,function(){var n,r,i,s,a,u,c,l,d,f,p;return o(this,function(o){switch(o.label){case 0:if(n=M(M({"content-type":"application/xml"},Hi(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),Hi(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Object(yi.f)(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map(function(e){return Object(yi.f)(e)}).join("/")),s=M({},void 0!==e.UploadId&&{uploadId:e.UploadId}),void 0!==e.MultipartUpload&&(u=Ui(e.MultipartUpload,t),a='<?xml version="1.0" encoding="UTF-8"?>',u.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),a+=u.toString()),[4,t.endpoint()];case 1:return c=o.sent(),l=c.hostname,d=c.protocol,f=void 0===d?"https":d,p=c.port,[2,new mi.a({protocol:f,hostname:l,port:p,method:"POST",headers:n,path:r,query:s,body:a})]}})})}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return i(void 0,void 0,void 0,function(){var n,r;return o(this,function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Ci(e,t)]:(n={$metadata:Gi(e),Bucket:void 0,BucketKeyEnabled:void 0,ETag:void 0,Expiration:void 0,Key:void 0,Location:void 0,RequestCharged:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==e.headers["x-amz-expiration"]&&(n.Expiration=e.headers["x-amz-expiration"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-version-id"]&&(n.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(n.BucketKeyEnabled="true"===e.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,Ji(e.body,t)]);case 1:return void 0!==(r=i.sent()).Bucket&&(n.Bucket=r.Bucket),void 0!==r.ETag&&(n.ETag=r.ETag),void 0!==r.Key&&(n.Key=r.Key),void 0!==r.Location&&(n.Location=r.Location),[2,Promise.resolve(n)]}})})}(e,t)},t}(yi.b),Ka=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return r(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(Eo.a)(t,this.serialize,this.deserialize)),this.middlewareStack.use(ho(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"AbortMultipartUploadCommand",inputFilterSensitiveLog:R.filterSensitiveLog,outputFilterSensitiveLog:j.filterSensitiveLog},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},i)},t.prototype.serialize=function(e,t){return function(e,t){return i(void 0,void 0,void 0,function(){var n,r,i,s,a,u,c,l,d;return o(this,function(o){switch(o.label){case 0:if(n=M(M({},Hi(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),Hi(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Object(yi.f)(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map(function(e){return Object(yi.f)(e)}).join("/")),s=M({"x-id":"AbortMultipartUpload"},void 0!==e.UploadId&&{uploadId:e.UploadId}),[4,t.endpoint()];case 1:return a=o.sent(),u=a.hostname,c=a.protocol,l=void 0===c?"https":c,d=a.port,[2,new mi.a({protocol:l,hostname:u,port:d,method:"DELETE",headers:n,path:r,query:s,body:void 0})]}})})}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return i(void 0,void 0,void 0,function(){var n;return o(this,function(r){switch(r.label){case 0:return 204!==e.statusCode&&e.statusCode>=300?[2,Ei(e,t)]:(n={$metadata:Gi(e),RequestCharged:void 0},void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,Wi(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}})})}(e,t)},t}(yi.b),$a=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return r(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(Eo.a)(t,this.serialize,this.deserialize)),this.middlewareStack.use(ho(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"ListPartsCommand",inputFilterSensitiveLog:xr.filterSensitiveLog,outputFilterSensitiveLog:Ir.filterSensitiveLog},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},i)},t.prototype.serialize=function(e,t){return function(e,t){return i(void 0,void 0,void 0,function(){var n,r,i,s,a,u,c,l,d;return o(this,function(o){switch(o.label){case 0:if(n=M(M({},Hi(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),Hi(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Object(yi.f)(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map(function(e){return Object(yi.f)(e)}).join("/")),s=M(M(M({"x-id":"ListParts"},void 0!==e.MaxParts&&{"max-parts":e.MaxParts.toString()}),void 0!==e.PartNumberMarker&&{"part-number-marker":e.PartNumberMarker}),void 0!==e.UploadId&&{uploadId:e.UploadId}),[4,t.endpoint()];case 1:return a=o.sent(),u=a.hostname,c=a.protocol,l=void 0===c?"https":c,d=a.port,[2,new mi.a({protocol:l,hostname:u,port:d,method:"GET",headers:n,path:r,query:s,body:void 0})]}})})}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return i(void 0,void 0,void 0,function(){var n,r;return o(this,function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Pi(e,t)]:(n={$metadata:Gi(e),AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,Initiator:void 0,IsTruncated:void 0,Key:void 0,MaxParts:void 0,NextPartNumberMarker:void 0,Owner:void 0,PartNumberMarker:void 0,Parts:void 0,RequestCharged:void 0,StorageClass:void 0,UploadId:void 0},void 0!==e.headers["x-amz-abort-date"]&&(n.AbortDate=new Date(e.headers["x-amz-abort-date"])),void 0!==e.headers["x-amz-abort-rule-id"]&&(n.AbortRuleId=e.headers["x-amz-abort-rule-id"]),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,Ji(e.body,t)]);case 1:return void 0!==(r=i.sent()).Bucket&&(n.Bucket=r.Bucket),void 0!==r.Initiator&&(n.Initiator=qi(r.Initiator,t)),void 0!==r.IsTruncated&&(n.IsTruncated="true"==r.IsTruncated),void 0!==r.Key&&(n.Key=r.Key),void 0!==r.MaxParts&&(n.MaxParts=parseInt(r.MaxParts)),void 0!==r.NextPartNumberMarker&&(n.NextPartNumberMarker=r.NextPartNumberMarker),void 0!==r.Owner&&(n.Owner=$i(r.Owner,t)),void 0!==r.PartNumberMarker&&(n.PartNumberMarker=r.PartNumberMarker),""===r.Part&&(n.Parts=[]),void 0!==r.Part&&(n.Parts=Vi(Object(yi.g)(r.Part),t)),void 0!==r.StorageClass&&(n.StorageClass=r.StorageClass),void 0!==r.UploadId&&(n.UploadId=r.UploadId),[2,Promise.resolve(n)]}})})}(e,t)},t}(yi.b),Va=n(81),Ga=function(){return(Ga=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Wa=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},Ha=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},Ja=new x.a("AWSS3ProviderManagedUpload"),Ya=function(){function e(e,t,n){this.minPartSize=5242880,this.queueSize=4,this.body=null,this.params=null,this.opts=null,this.completedParts=[],this.uploadId=null,this.bytesUploaded=0,this.totalBytesToUpload=0,this.emitter=null,this.params=e,this.opts=t,this.emitter=n,this.s3client=this._createNewS3Client(t,n)}return e.prototype.upload=function(){return Wa(this,void 0,void 0,function(){var e,t,n,r,i,o,s,a=this;return Ha(this,function(u){switch(u.label){case 0:return u.trys.push([0,10,,12]),e=this,[4,this.validateAndSanitizeBody(this.params.Body)];case 1:return e.body=u.sent(),this.totalBytesToUpload=this.byteLength(this.body),this.totalBytesToUpload<=this.minPartSize?(this.params.Body=this.body,t=new Ra(this.params),[2,this.s3client.send(t)]):[3,2];case 2:return n=this,[4,this.createMultiPartUpload()];case 3:n.uploadId=u.sent(),r=Math.ceil(this.totalBytesToUpload/this.minPartSize),i=this.createParts(),o=0,u.label=4;case 4:return o<r?[4,this.uploadParts(this.uploadId,i.slice(o,o+this.queueSize))]:[3,7];case 5:u.sent(),u.label=6;case 6:return o+=this.queueSize,[3,4];case 7:return i.map(function(e){a.removeEventListener(e)}),[4,this.finishMultiPartUpload(this.uploadId)];case 8:return[2,u.sent()];case 9:return[3,12];case 10:return s=u.sent(),[4,this.cleanup(this.uploadId)];case 11:throw u.sent(),Ja.error("Error. Cancelling the multipart upload."),s;case 12:return[2]}})})},e.prototype.createParts=function(){try{for(var e=[],t=0;t<this.totalBytesToUpload;){var n=Math.min(t+this.minPartSize,this.totalBytesToUpload);e.push({bodyPart:this.body.slice(t,n),partNumber:e.length+1,emitter:new Va.EventEmitter,_lastUploadedBytes:0}),t+=this.minPartSize}return e}catch(e){throw Ja.error(e),e}},e.prototype.createMultiPartUpload=function(){return Wa(this,void 0,void 0,function(){var e,t,n;return Ha(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),e=new Ua(this.params),[4,this.s3client.send(e)];case 1:return t=r.sent(),Ja.debug(t.UploadId),[2,t.UploadId];case 2:throw n=r.sent(),Ja.error(n),n;case 3:return[2]}})})},e.prototype.uploadParts=function(e,t){return Wa(this,void 0,void 0,function(){var n,r,i,o=this;return Ha(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,Promise.all(t.map(function(t){return Wa(o,void 0,void 0,function(){var n,r,i,o,s,a,u;return Ha(this,function(c){switch(c.label){case 0:return this.setupEventListener(t),n={emitter:t.emitter},r=this.params,i=r.Key,o=r.Bucket,s=r.SSECustomerAlgorithm,a=r.SSECustomerKey,u=r.SSECustomerKeyMD5,[4,this.s3client.send(new za(Ga(Ga(Ga({PartNumber:t.partNumber,Body:t.bodyPart,UploadId:e,Key:i,Bucket:o},s&&{SSECustomerAlgorithm:s}),a&&{SSECustomerKey:a}),u&&{SSECustomerKeyMD5:u})),n)];case 1:return[2,c.sent()]}})})}))];case 1:for(n=s.sent(),r=0;r<n.length;r++)this.completedParts.push({PartNumber:t[r].partNumber,ETag:n[r].ETag});return[3,3];case 2:throw i=s.sent(),Ja.error("Error happened while uploading a part. Cancelling the multipart upload"),i;case 3:return[2]}})})},e.prototype.finishMultiPartUpload=function(e){return Wa(this,void 0,void 0,function(){var t,n,r;return Ha(this,function(i){switch(i.label){case 0:t={Bucket:this.params.Bucket,Key:this.params.Key,UploadId:e,MultipartUpload:{Parts:this.completedParts}},n=new qa(t),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.s3client.send(n)];case 2:return[2,i.sent().Key];case 3:throw r=i.sent(),Ja.error("Error happened while finishing the upload."),r;case 4:return[2]}})})},e.prototype.cleanup=function(e){return Wa(this,void 0,void 0,function(){var t,n;return Ha(this,function(r){switch(r.label){case 0:return this.body=null,this.completedParts=[],this.bytesUploaded=0,this.totalBytesToUpload=0,t={Bucket:this.params.Bucket,Key:this.params.Key,UploadId:e},[4,this.s3client.send(new Ka(t))];case 1:return r.sent(),[4,this.s3client.send(new $a(t))];case 2:if((n=r.sent())&&n.Parts&&n.Parts.length>0)throw new Error("Multipart upload clean up failed.");return[2]}})})},e.prototype.removeEventListener=function(e){e.emitter.removeAllListeners("sendUploadProgress"),e.emitter.removeAllListeners("sendDownloadProgress")},e.prototype.setupEventListener=function(e){var t=this;e.emitter.on("sendUploadProgress",function(n){t.progressChanged(e.partNumber,n.loaded-e._lastUploadedBytes),e._lastUploadedBytes=n.loaded})},e.prototype.progressChanged=function(e,t){this.bytesUploaded+=t,this.emitter.emit("sendUploadProgress",{loaded:this.bytesUploaded,total:this.totalBytesToUpload,part:e,key:this.params.Key})},e.prototype.byteLength=function(e){if(null==e)return 0;if("number"==typeof e.byteLength)return e.byteLength;if("number"==typeof e.length)return e.length;if("number"==typeof e.size)return e.size;if("string"!=typeof e.path)throw new Error("Cannot determine length of "+e)},e.prototype.validateAndSanitizeBody=function(e){return Wa(this,void 0,void 0,function(){return Ha(this,function(t){return this.isGenericObject(e)?[2,JSON.stringify(e)]:[2,e]})})},e.prototype.isGenericObject=function(e){if(null!==e&&"object"===A(e))try{return!(this.byteLength(e)>=0)}catch(e){return!0}return!1},e.prototype._createNewS3Client=function(e,t){var n=ja(e,t);return n.middlewareStack.add(ka(this.opts,this.params.Key),Ma),n.middlewareStack.add(Da(n.config),Na),n},e}(),Za=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},Xa=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},Qa=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},eu=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Qa(arguments[t]));return e},tu=new x.a("AWSS3UploadTask");!function(e){e[e.INIT=0]="INIT",e[e.IN_PROGRESS=1]="IN_PROGRESS",e[e.PAUSED=2]="PAUSED",e[e.CANCELLED=3]="CANCELLED",e[e.COMPLETED=4]="COMPLETED"}(Fa||(Fa={})),function(e){e.CANCEL="cancel",e.UPLOAD_COMPLETE="uploadComplete",e.UPLOAD_PROGRESS="uploadPartProgress",e.ERROR="error"}(Ba||(Ba={}));var nu=function(){function e(e){var t=e.s3Client,n=e.file,r=e.emitter,i=e.storage,o=e.params,s=e.level,a=e.prefixPromise;this.partSize=5242880,this.queueSize=4,this.inProgress=[],this.completedParts=[],this.queued=[],this.bytesUploaded=0,this.totalBytes=0,this.state=Fa.INIT,this.prefixPromise=a,this.s3client=t,this.s3client.middlewareStack.remove("contentLengthMiddleware"),this.storage=i,this.storageSync=Promise.resolve(),"function"==typeof this.storage.sync&&(this.storageSync=this.storage.sync()),this.params=o,this.file=n,this.totalBytes=this.file.size,this.bytesUploaded=0,this.emitter=r,this.queued=[],this.fileId=this._getFileId(s),this._validateParams(),this.emitter.on(Ba.ERROR,function(){})}return Object.defineProperty(e.prototype,"percent",{get:function(){return this.bytesUploaded/this.totalBytes*100},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInProgress",{get:function(){return this.state===Fa.IN_PROGRESS},enumerable:!0,configurable:!0}),e.prototype._listSingleFile=function(e){var t=e.key,n=e.bucket;return Za(this,void 0,void 0,function(){var e,r,i,o;return Xa(this,function(s){switch(s.label){case 0:return[4,this.s3client.send(new To({Bucket:n,Prefix:t}))];case 1:return e=s.sent(),r=e.Contents,i=void 0===r?[]:r,[4,this.prefixPromise];case 2:return o=s.sent(),[2,i.find(function(e){return e.Key===""+o+t})]}})})},e.prototype._getFileId=function(e){return void 0!==(t=this.file)&&t instanceof File?[this.file.name,this.file.lastModified,this.file.size,this.file.type,this.params.Bucket,e,this.params.Key].join("-"):[this.file.size,this.file.type,this.params.Bucket,e,this.params.Key].join("-");var t},e.prototype._findCachedUploadParts=function(){return Za(this,void 0,void 0,function(){var e,t;return Xa(this,function(n){switch(n.label){case 0:return[4,this._listCachedUploadTasks()];case 1:return e=n.sent(),0!==Object.keys(e).length&&Object.prototype.hasOwnProperty.call(e,this.fileId)?((t=e[this.fileId]).lastTouched=Date.now(),this.storage.setItem("__uploadInProgress",JSON.stringify(e)),[4,this.s3client.send(new $a({Bucket:this.params.Bucket,Key:this.params.Key,UploadId:t.uploadId}))]):[2,{parts:[],uploadId:null}];case 2:return[2,{parts:n.sent().Parts||[],uploadId:t.uploadId}]}})})},e.prototype._emitEvent=function(e,t){this.emitter.emit(e,t)},e.prototype._validateParams=function(){if(this.file.size/this.partSize>1e4)throw new Error("Too many parts. Number of parts is "+this.file.size/this.partSize+", maximum is 10000.")},e.prototype._listCachedUploadTasks=function(){return Za(this,void 0,void 0,function(){var e;return Xa(this,function(t){switch(t.label){case 0:return[4,this.storageSync];case 1:return t.sent(),e=this.storage.getItem("__uploadInProgress")||"{}",[2,JSON.parse(e)]}})})},e.prototype._cache=function(e){return Za(this,void 0,void 0,function(){var t;return Xa(this,function(n){switch(n.label){case 0:return[4,this._listCachedUploadTasks()];case 1:return(t=n.sent())[this.fileId]=e,this.storage.setItem("__uploadInProgress",JSON.stringify(t)),[2]}})})},e.prototype._isCached=function(){return Za(this,void 0,void 0,function(){var e,t;return Xa(this,function(n){switch(n.label){case 0:return t=(e=Object.prototype.hasOwnProperty).call,[4,this._listCachedUploadTasks()];case 1:return[2,t.apply(e,[n.sent(),this.fileId])]}})})},e.prototype._removeFromCache=function(){return Za(this,void 0,void 0,function(){var e;return Xa(this,function(t){switch(t.label){case 0:return[4,this._listCachedUploadTasks()];case 1:return delete(e=t.sent())[this.fileId],this.storage.setItem("__uploadInProgress",JSON.stringify(e)),[2]}})})},e.prototype._onPartUploadCompletion=function(e){var t=e.eTag,n=e.partNumber,r=e.chunk;return Za(this,void 0,void 0,function(){return Xa(this,function(e){return this.completedParts.push({ETag:t,PartNumber:n}),this.bytesUploaded+=function(e){if("string"==typeof e)return e.length;if(Js(e))return e.byteLength;if(Hs(e))return e.size;throw new Error("Cannot determine byte length of "+e)}(r),this._emitEvent(Ba.UPLOAD_PROGRESS,{loaded:this.bytesUploaded,total:this.totalBytes}),this.inProgress=this.inProgress.filter(function(e){return e.uploadPartInput.PartNumber!==n}),this.queued.length&&this.state!==Fa.PAUSED&&this._startNextPart(),this._isDone()&&this._completeUpload(),[2]})})},e.prototype._completeUpload=function(){return Za(this,void 0,void 0,function(){var e;return Xa(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.s3client.send(new qa({Bucket:this.params.Bucket,Key:this.params.Key,UploadId:this.uploadId,MultipartUpload:{Parts:this.completedParts.sort(O)}}))];case 1:return t.sent(),this._verifyFileSize(),this._emitEvent(Ba.UPLOAD_COMPLETE,{key:this.params.Bucket+"/"+this.params.Key}),this._removeFromCache(),this.state=Fa.COMPLETED,[3,3];case 2:return e=t.sent(),tu.error("error completing upload",e),this._emitEvent(Ba.ERROR,e),[3,3];case 3:return[2]}})})},e.prototype._makeUploadPartRequest=function(e,t){return Za(this,void 0,void 0,function(){var n,r;return Xa(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),[4,this.s3client.send(new za(e),{cancelTokenSource:t})];case 1:return n=i.sent(),[4,this._onPartUploadCompletion({eTag:n.ETag,partNumber:e.PartNumber,chunk:e.Body})];case 2:return i.sent(),[3,4];case 3:return r=i.sent(),this.state===Fa.PAUSED?tu.log("upload paused"):this.state===Fa.CANCELLED?tu.log("upload aborted"):tu.error("error starting next part of upload: ",r),is.a.isCancel(r)||r.message===Uo.UPLOAD_PAUSED_MESSAGE||(this._emitEvent(Ba.ERROR,r),this.pause()),[3,4];case 4:return[2]}})})},e.prototype._startNextPart=function(){if(this.queued.length>0&&this.state!==Fa.PAUSED){var e=is.a.CancelToken.source(),t=this.queued.shift();this.inProgress.push({uploadPartInput:t,s3Request:this._makeUploadPartRequest(t,e),cancel:e.cancel})}},e.prototype._verifyFileSize=function(){return Za(this,void 0,void 0,function(){var e,t;return Xa(this,function(n){switch(n.label){case 0:return[4,this._listSingleFile({key:this.params.Key,bucket:this.params.Bucket})];case 1:if(e=n.sent(),!(t=Boolean(e&&e.Size===this.file.size)))throw new Error("File size does not match between local file and file on s3");return[2,t]}})})},e.prototype._isDone=function(){return!this.queued.length&&!this.inProgress.length&&this.bytesUploaded===this.totalBytes},e.prototype._createParts=function(){for(var e=this.file.size,t=[],n=0;n<e;){var r=Math.min(n+this.partSize,e);t.push({Body:this.file.slice(n,r),Key:this.params.Key,Bucket:this.params.Bucket,PartNumber:t.length+1,UploadId:this.uploadId}),n+=this.partSize}return t},e.prototype._initCachedUploadParts=function(e){this.bytesUploaded+=e.reduce(function(e,t){return e+t.Size},0);var t=new Set(e.map(function(e){return e.PartNumber}));this.queued=this.queued.filter(function(e){return!t.has(e.PartNumber)}),this.completedParts=e.map(function(e){return{PartNumber:e.PartNumber,ETag:e.ETag}}),this._emitEvent(Ba.UPLOAD_PROGRESS,{loaded:this.bytesUploaded,total:this.totalBytes})},e.prototype._initMultipartUpload=function(){return Za(this,void 0,void 0,function(){var e;return Xa(this,function(t){switch(t.label){case 0:return[4,this.s3client.send(new Ua(this.params))];case 1:return e=t.sent(),this._cache({uploadId:e.UploadId,lastTouched:Date.now(),bucket:this.params.Bucket,key:this.params.Key,fileName:this.file instanceof File?this.file.name:""}),[2,e.UploadId]}})})},e.prototype._initializeUploadTask=function(){return Za(this,void 0,void 0,function(){var e,t,n,r;return Xa(this,function(i){switch(i.label){case 0:this.state=Fa.IN_PROGRESS,i.label=1;case 1:return i.trys.push([1,7,,8]),[4,this._isCached()];case 2:return i.sent()?[4,this._findCachedUploadParts()]:[3,4];case 3:return e=i.sent(),t=e.parts,n=e.uploadId,this.uploadId=n,this.queued=this._createParts(),this._initCachedUploadParts(t),this._startUpload(),[3,6];case 4:return this.uploadId?[3,6]:[4,this._initMultipartUpload()];case 5:n=i.sent(),this.uploadId=n,this.queued=this._createParts(),this._startUpload(),i.label=6;case 6:return[3,8];case 7:return r=i.sent(),is.a.isCancel(r)||tu.error("Error initializing the upload task",r),[3,8];case 8:return[2]}})})},e.prototype.resume=function(){this.state===Fa.CANCELLED?tu.warn("This task has already been cancelled"):this.state===Fa.COMPLETED?tu.warn("This task has already been completed"):this.state===Fa.IN_PROGRESS?tu.warn("Upload task already in progress"):this.uploadId?this._startUpload():this._initializeUploadTask()},e.prototype._startUpload=function(){this.state=Fa.IN_PROGRESS;for(var e=0;e<this.queueSize;e++)this._startNextPart()},e.prototype._cancel=function(){return Za(this,void 0,void 0,function(){var e;return Xa(this,function(t){switch(t.label){case 0:return this.state!==Fa.CANCELLED?[3,1]:(tu.warn("This task has already been cancelled"),[2,!1]);case 1:return this.state!==Fa.COMPLETED?[3,2]:(tu.warn("This task has already been completed"),[2,!1]);case 2:this.pause(),this.queued=[],this.completedParts=[],this.bytesUploaded=0,this.state=Fa.CANCELLED,t.label=3;case 3:return t.trys.push([3,6,,7]),[4,this.s3client.send(new Ka({Bucket:this.params.Bucket,Key:this.params.Key,UploadId:this.uploadId}))];case 4:return t.sent(),[4,this._removeFromCache()];case 5:return t.sent(),[2,!0];case 6:return e=t.sent(),tu.error("Error cancelling upload task",e),[2,!1];case 7:return[2]}})})},e.prototype.pause=function(){var e;this.state===Fa.CANCELLED?tu.warn("This task has already been cancelled"):this.state===Fa.COMPLETED?tu.warn("This task has already been completed"):this.state===Fa.PAUSED&&tu.warn("This task is already paused"),this.state=Fa.PAUSED;var t=this.inProgress.splice(0,this.inProgress.length);t.forEach(function(e){e.cancel(Uo.UPLOAD_PAUSED_MESSAGE)}),(e=this.queued).unshift.apply(e,eu(t.map(function(e){return e.uploadPartInput})))},e}(),ru=function(){return(ru=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},iu=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},ou=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},su=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},au=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(su(arguments[t]));return e},uu=new x.a("AWSS3Provider"),cu=function(){function e(e){var t=this;this._config=e||{},this._storage=(new P.a).getStorage(),k.a.listen("auth",function(e){var n=e.payload;"signOut"!==n.event&&"signIn"!==n.event||t._storage.removeItem("__uploadInProgress")}),uu.debug("Storage Options",this._config)}return e.prototype.getCategory=function(){return e.CATEGORY},e.prototype.getProviderName=function(){return e.PROVIDER_NAME},e.prototype.configure=function(e){if(uu.debug("configure Storage",e),!e)return this._config;var t=T.a.parseMobilehubConfig(e);return this._config=Object.assign({},this._config,t.Storage),this._config.bucket||uu.debug("Do not have bucket yet"),this._config},e.prototype.startResumableUpload=function(e,t){var n=e.s3Client,r=e.emitter,i=e.key,o=e.file,s=e.params,a=t.progressCallback,u=t.completeCallback,c=t.errorCallback,l=t.track,d=void 0!==l&&l;if(!(o instanceof Blob))throw new Error(jo.INVALID_BLOB);r.on(Ba.UPLOAD_PROGRESS,function(e){a&&("function"==typeof a?a(e):uu.warn("progressCallback should be a function, not a "+I(a)))}),r.on(Ba.UPLOAD_COMPLETE,function(e){u&&("function"==typeof u?u(e):uu.warn("completeCallback should be a function, not a "+I(u)))}),r.on(Ba.ERROR,function(e){c&&("function"==typeof c?c(e):uu.warn("errorCallback should be a function, not a "+I(c)))});var f=D.a.get().then(function(e){var n=D.a.shear(e);return Pa(ru(ru({},t),{credentials:n}))}),p=new nu({s3Client:n,file:o,emitter:r,level:t.level,storage:this._storage,params:s,prefixPromise:f});return Ws(d,"upload",{method:"put",result:"success"},null,"Upload Task created successfully for "+i),p.resume(),p},e.prototype.copy=function(e,t,n){return iu(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,d,f,p,h,v,g,y,m,b,w,_,S,E,C,A,O,I;return ou(this,function(x){switch(x.label){case 0:return[4,this._ensureCredentials()];case 1:if(!x.sent()||!this._isWithCredentials(this._config))throw new Error(jo.NO_CREDENTIALS);if(r=Object.assign({},this._config,n),i=r.acl,o=r.bucket,s=r.cacheControl,a=r.expires,u=r.track,c=r.serverSideEncryption,l=r.SSECustomerAlgorithm,d=r.SSECustomerKey,f=r.SSECustomerKeyMD5,p=r.SSEKMSKeyId,h=e.level,v=void 0===h?"public":h,g=e.identityId,y=e.key,m=t.level,b=void 0===m?"public":m,w=t.key,!y||"string"!=typeof y)throw new Error(jo.NO_SRC_KEY);if(!w||"string"!=typeof w)throw new Error(jo.NO_DEST_KEY);"protected"!==v&&g&&uu.warn('You may copy files from another user if the source level is "protected", currently it\'s '+v),
_=this._prefix(ru(ru(ru({},r),{level:v}),g&&{identityId:g})),S=this._prefix(ru(ru({},r),{level:b})),E=o+"/"+_+y,C=""+S+w,uu.debug("copying "+E+" to "+C),A={Bucket:o,CopySource:E,Key:C,MetadataDirective:"COPY"},s&&(A.CacheControl=s),a&&(A.Expires=a),c&&(A.ServerSideEncryption=c),l&&(A.SSECustomerAlgorithm=l),d&&(A.SSECustomerKey=d),f&&(A.SSECustomerKeyMD5=f),p&&(A.SSEKMSKeyId=p),i&&(A.ACL=i),O=this._createNewS3Client(r),x.label=2;case 2:return x.trys.push([2,4,,5]),[4,O.send(new Oo(A))];case 3:return x.sent(),Ws(u,"copy",{method:"copy",result:"success"},null,"Copy success from "+y+" to "+w),[2,{key:w}];case 4:throw I=x.sent(),Ws(u,"copy",{method:"copy",result:"failed"},null,"Copy failed from "+y+" to "+w),I;case 5:return[2]}})})},e.prototype.get=function(e,t){return iu(this,void 0,void 0,function(){var n,r,i,o,s,c,l,d,f,p,h,v,g,y,m,b,w,_,S,E,C,A,O,x,T,P,k;return ou(this,function(D){switch(D.label){case 0:return[4,this._ensureCredentials()];case 1:if(!D.sent()||!this._isWithCredentials(this._config))throw new Error(jo.NO_CREDENTIALS);if(n=Object.assign({},this._config,t),r=n.bucket,i=n.download,o=n.cacheControl,s=n.contentDisposition,c=n.contentEncoding,l=n.contentLanguage,d=n.contentType,f=n.expires,p=n.track,h=n.SSECustomerAlgorithm,v=n.SSECustomerKey,g=n.SSECustomerKeyMD5,y=n.progressCallback,m=this._prefix(n),b=m+e,w=new Va.EventEmitter,_=this._createNewS3Client(n,w),uu.debug("get "+e+" from "+b),S={Bucket:r,Key:b},o&&(S.ResponseCacheControl=o),s&&(S.ResponseContentDisposition=s),c&&(S.ResponseContentEncoding=c),l&&(S.ResponseContentLanguage=l),d&&(S.ResponseContentType=d),h&&(S.SSECustomerAlgorithm=h),v&&(S.SSECustomerKey=v),g&&(S.SSECustomerKeyMD5=g),!0!==i)return[3,5];E=new Io(S),D.label=2;case 2:return D.trys.push([2,4,,5]),y&&("function"==typeof y?w.on("sendDownloadProgress",function(e){y(e)}):uu.warn("progressCallback should be a function, not a "+I(y))),[4,_.send(E)];case 3:return C=D.sent(),w.removeAllListeners("sendDownloadProgress"),Ws(p,"download",{method:"get",result:"success"},{fileSize:Number(C.Body.size||C.Body.length)},"Download success for "+e),[2,C];case 4:throw A=D.sent(),Ws(p,"download",{method:"get",result:"failed"},null,"Download failed with "+A.message),A;case 5:return D.trys.push([5,8,,9]),O=new ns(ru({},_.config)),[4,u(_,new Io(S))];case 6:return x=D.sent(),P=a,[4,O.presign(x,{expiresIn:f||900})];case 7:return T=P.apply(void 0,[D.sent()]),Ws(p,"getSignedUrl",{method:"get",result:"success"},null,"Signed URL: "+T),[2,T];case 8:throw k=D.sent(),uu.warn("get signed url error",k),Ws(p,"getSignedUrl",{method:"get",result:"failed"},null,"Could not get a signed URL for "+e),k;case 9:return[2]}})})},e.prototype.put=function(e,t,n){var r=Object.assign({},this._config,n),i=r.bucket,o=r.track,s=r.progressCallback,a=r.level,u=r.resumable,c=r.contentType,l=r.contentDisposition,d=r.contentEncoding,f=r.cacheControl,p=r.expires,h=r.metadata,v=r.tagging,g=r.acl,y=r.serverSideEncryption,m=r.SSECustomerAlgorithm,b=r.SSECustomerKey,w=r.SSECustomerKeyMD5,_=r.SSEKMSKeyId,S={Bucket:i,Key:e,Body:t,ContentType:c||"binary/octet-stream"};f&&(S.CacheControl=f),l&&(S.ContentDisposition=l),d&&(S.ContentEncoding=d),p&&(S.Expires=p),h&&(S.Metadata=h),v&&(S.Tagging=v),y&&(S.ServerSideEncryption=y),m&&(S.SSECustomerAlgorithm=m),b&&(S.SSECustomerKey=b),w&&(S.SSECustomerKeyMD5=w),_&&(S.SSEKMSKeyId=_);var E=new Va.EventEmitter,C=new Ya(S,r,E);if(g&&(S.ACL=g),!0===u){var A=this._createNewS3Client(r);A.middlewareStack.add(ka(r,e),Ma);var O={bucket:i,key:e,s3Client:A,file:t,emitter:E,accessLevel:a,params:S};return this.startResumableUpload(O,n)}try{return s&&("function"==typeof s?E.on("sendUploadProgress",function(e){s(e)}):uu.warn("progressCallback should be a function, not a "+I(s))),C.upload().then(function(t){return uu.debug("upload result",t),Ws(o,"upload",{method:"put",result:"success"},null,"Upload success for "+e),{key:e}})}catch(t){throw uu.warn("error uploading",t),Ws(o,"upload",{method:"put",result:"failed"},null,"Error uploading "+e),t}},e.prototype.remove=function(e,t){return iu(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l;return ou(this,function(d){switch(d.label){case 0:return[4,this._ensureCredentials()];case 1:if(!d.sent()||!this._isWithCredentials(this._config))throw new Error(jo.NO_CREDENTIALS);n=Object.assign({},this._config,t),r=n.bucket,i=n.track,o=this._prefix(n),s=o+e,a=this._createNewS3Client(n),uu.debug("remove "+e+" from "+s),u=new xo({Bucket:r,Key:s}),d.label=2;case 2:return d.trys.push([2,4,,5]),[4,a.send(u)];case 3:return c=d.sent(),Ws(i,"delete",{method:"remove",result:"success"},null,"Deleted "+e+" successfully"),[2,c];case 4:throw l=d.sent(),Ws(i,"delete",{method:"remove",result:"failed"},null,"Deletion of "+e+" failed with "+l),l;case 5:return[2]}})})},e.prototype._list=function(e,t,n){return iu(this,void 0,void 0,function(){var r,i,o,s;return ou(this,function(a){switch(a.label){case 0:return r={contents:[],nextToken:""},i=this._createNewS3Client(t),o=new To(ru({},e)),[4,i.send(o)];case 1:return(s=a.sent())&&s.Contents&&(r.contents=s.Contents.map(function(e){return{key:e.Key.substr(n.length),eTag:e.ETag,lastModified:e.LastModified,size:e.Size}}),r.nextToken=s.NextContinuationToken),[2,r]}})})},e.prototype.list=function(e,t){return iu(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,d,f;return ou(this,function(p){switch(p.label){case 0:return[4,this._ensureCredentials()];case 1:if(!p.sent()||!this._isWithCredentials(this._config))throw new Error(jo.NO_CREDENTIALS);n=Object.assign({},this._config,t),r=n.bucket,i=n.track,o=n.maxKeys,s=this._prefix(n),a=s+e,uu.debug("list "+e+" from "+a),p.label=2;case 2:if(p.trys.push([2,10,,11]),u=[],c=void 0,l=void 0,d={Bucket:r,Prefix:a,MaxKeys:1e3},"ALL"!==o)return[3,7];p.label=3;case 3:return d.ContinuationToken=c,d.MaxKeys=1e3,[4,this._list(d,n,s)];case 4:l=p.sent(),u.push.apply(u,au(l.contents)),l.nextToken&&(c=l.nextToken),p.label=5;case 5:if(l.nextToken)return[3,3];p.label=6;case 6:return[3,9];case 7:return d.MaxKeys=o<1e3||"string"==typeof o?o:1e3,[4,this._list(d,n,s)];case 8:l=p.sent(),u.push.apply(u,au(l.contents)),o>1e3&&uu.warn("maxkeys can be from 0 - 1000 or 'ALL'. To list all files you can set maxKeys to 'ALL'."),p.label=9;case 9:return Ws(i,"list",{method:"list",result:"success"},null,u.length+" items returned from list operation"),uu.debug("list",u),[2,u];case 10:throw f=p.sent(),uu.warn("list error",f),Ws(i,"list",{method:"list",result:"failed"},null,"Listing items failed: "+f.message),f;case 11:return[2]}})})},e.prototype._ensureCredentials=function(){return iu(this,void 0,void 0,function(){var e,t,n;return ou(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,D.a.get()];case 1:return(e=r.sent())?(t=D.a.shear(e),uu.debug("set credentials for storage",t),this._config.credentials=t,[2,!0]):[2,!1];case 2:return n=r.sent(),uu.warn("ensure credentials error",n),[2,!1];case 3:return[2]}})})},e.prototype._isWithCredentials=function(e){return"object"===I(e)&&e.hasOwnProperty("credentials")},e.prototype._prefix=function(e){var t=e.credentials,n=e.level,r=e.customPrefix||{},i=e.identityId||t.identityId,o=(void 0!==r.private?r.private:"private/")+i+"/",s=(void 0!==r.protected?r.protected:"protected/")+i+"/",a=void 0!==r.public?r.public:"public/";switch(n){case"private":return o;case"protected":return s;default:return a}},e.prototype._createNewS3Client=function(e,t){var n=ja(e,t);return n.middlewareStack.add(Da(n.config),Na),n},e.CATEGORY="Storage",e.PROVIDER_NAME="AWSS3",e}(),lu=function(){return(lu=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},du=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},fu=new x.a("StorageClass"),pu=function(){function e(){this._config={},this._pluggables=[],this._cancelTokenSourceMap=new WeakMap,fu.debug("Storage Options",this._config),this.get=this.get.bind(this),this.put=this.put.bind(this),this.remove=this.remove.bind(this),this.list=this.list.bind(this)}return e.prototype.getModuleName=function(){return"Storage"},e.prototype.addPluggable=function(e){if(e&&"Storage"===e.getCategory())return this._pluggables.push(e),e.configure(this._config[e.getProviderName()])},e.prototype.getPluggable=function(e){var t=this._pluggables.find(function(t){return t.getProviderName()===e});return void 0===t?(fu.debug("No plugin found with providerName",e),null):t},e.prototype.removePluggable=function(e){this._pluggables=this._pluggables.filter(function(t){return t.getProviderName()!==e})},e.prototype.configure=function(e){var t=this;if(fu.debug("configure Storage"),!e)return this._config;var n=T.a.parseMobilehubConfig(e),r=Object.keys(n.Storage),i=["bucket","region","level","track","customPrefix","serverSideEncryption","SSECustomerAlgorithm","SSECustomerKey","SSECustomerKeyMD5","SSEKMSKeyId"],o=function(e){return i.some(function(t){return t===e})};return r&&r.find(function(e){return o(e)})&&!n.Storage.AWSS3&&(n.Storage.AWSS3={}),Object.entries(n.Storage).map(function(e){var t=du(e,2),r=t[0],i=t[1];r&&o(r)&&void 0!==i&&(n.Storage.AWSS3[r]=i,delete n.Storage[r])}),Object.keys(n.Storage).forEach(function(e){"string"!=typeof n.Storage[e]&&(t._config[e]=lu(lu({},t._config[e]),n.Storage[e]))}),this._pluggables.forEach(function(e){e.configure(t._config[e.getProviderName()])}),0===this._pluggables.length&&this.addPluggable(new cu),this._config},e.prototype.getCancellableTokenSource=function(){return is.a.CancelToken.source()},e.prototype.updateRequestToBeCancellable=function(e,t){this._cancelTokenSourceMap.set(e,t)},e.prototype.isUploadTask=function(e){return void 0!==e&&"function"==typeof e.pause&&"function"==typeof e.resume},e.prototype.cancel=function(e,t){if(e instanceof nu)return e._cancel();var n=this._cancelTokenSourceMap.get(e);n?n.cancel(t):fu.debug("The request does not map to any cancel token")},e.prototype.copy=function(e,t,n){var r=(null==n?void 0:n.provider)||"AWSS3",i=this._pluggables.find(function(e){return e.getProviderName()===r});if(void 0===i)return fu.debug("No plugin found with providerName",r),Promise.reject("No plugin found in Storage for the provider");var o=this.getCancellableTokenSource();if("function"!=typeof i.copy)return Promise.reject(".copy is not implemented on provider "+i.getProviderName());var s=i.copy(e,t,lu(lu({},n),{cancelTokenSource:o}));return this.updateRequestToBeCancellable(s,o),s},e.prototype.get=function(e,t){var n=(null==t?void 0:t.provider)||"AWSS3",r=this._pluggables.find(function(e){return e.getProviderName()===n});if(void 0===r)return fu.debug("No plugin found with providerName",n),Promise.reject("No plugin found in Storage for the provider");var i=this.getCancellableTokenSource(),o=r.get(e,lu(lu({},t),{cancelTokenSource:i}));return this.updateRequestToBeCancellable(o,i),o},e.prototype.isCancelError=function(e){return is.a.isCancel(e)},e.prototype.put=function(e,t,n){var r=(null==n?void 0:n.provider)||"AWSS3",i=this._pluggables.find(function(e){return e.getProviderName()===r});if(void 0===i)return fu.debug("No plugin found with providerName",r),Promise.reject("No plugin found in Storage for the provider");var o=this.getCancellableTokenSource(),s=i.put(e,t,lu(lu({},n),{cancelTokenSource:o}));return this.isUploadTask(s)||this.updateRequestToBeCancellable(s,o),s},e.prototype.remove=function(e,t){var n=(null==t?void 0:t.provider)||"AWSS3",r=this._pluggables.find(function(e){return e.getProviderName()===n});return void 0===r?(fu.debug("No plugin found with providerName",n),Promise.reject("No plugin found in Storage for the provider")):r.remove(e,t)},e.prototype.list=function(e,t){var n=(null==t?void 0:t.provider)||"AWSS3",r=this._pluggables.find(function(e){return e.getProviderName()===n});return void 0===r?(fu.debug("No plugin found with providerName",n),Promise.reject("No plugin found in Storage for the provider")):r.list(e,t)},e}(),hu=n(20),vu=function(){return(vu=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},gu=new x.a("Storage"),yu=null,mu=function(){if(yu)return yu;gu.debug("Create Storage Instance, debug"),(yu=new pu).vault=new pu;var e=yu.configure;return yu.configure=function(t){gu.debug("storage configure called");var n=vu({},e.call(yu,t));Object.keys(n).forEach(function(e){"string"!=typeof n[e]&&(n[e]=vu(vu({},n[e]),{level:"private"}))}),gu.debug("storage vault configure called"),yu.vault.configure(n)},yu}();hu.a.register(mu)},function(e,t,n){"use strict";function r(){return"undefined"==typeof window?{}:function(){if("undefined"==typeof window)return i.warn("No window object available to get browser client info"),{};var e=window.navigator;if(!e)return i.warn("No navigator object available to get browser client info"),{};var t,n=e.platform,r=e.product,o=e.vendor,s=e.userAgent,a=e.language,u=function(e){var t=/.+(Opera[\s[A-Z]*|OPR[\sA-Z]*)\/([0-9\.]+).*/i.exec(e);if(t)return{type:t[1],version:t[2]};var n=/.+(Trident|Edge)\/([0-9\.]+).*/i.exec(e);if(n)return{type:n[1],version:n[2]};var r=/.+(Chrome|Firefox|FxiOS)\/([0-9\.]+).*/i.exec(e);if(r)return{type:r[1],version:r[2]};var i=/.+(Safari)\/([0-9\.]+).*/i.exec(e);if(i)return{type:i[1],version:i[2]};var o=/.+(AppleWebKit)\/([0-9\.]+).*/i.exec(e);if(o)return{type:o[1],version:o[2]};var s=/.*([A-Z]+)\/([0-9\.]+).*/i.exec(e);return s?{type:s[1],version:s[2]}:{type:"",version:""}}(s),c=(t=/\(([A-Za-z\s].*)\)/.exec((new Date).toString()))&&t[1]||"";return{platform:n,make:r||o,model:u.type,version:u.version,appVersion:[u.type,u.version].join("/"),language:a,timezone:c}}()}n.d(t,"a",function(){return o});var i=new(n(48).a)("ClientDevice_Browser"),o=function(){function e(){}return e.clientInfo=function(){return r()},e.dimension=function(){return"undefined"==typeof window?(i.warn("No window object available to get browser client info"),{width:320,height:320}):{width:window.innerWidth,height:window.innerHeight}},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(48),i=new r.a("I18n"),o=function(){function e(e){this._options=null,this._lang=null,this._dict={},this._options=Object.assign({},e),this._lang=this._options.language,!this._lang&&"undefined"!=typeof window&&window&&window.navigator&&(this._lang=window.navigator.language),i.debug(this._lang)}return e.prototype.setLanguage=function(e){this._lang=e},e.prototype.get=function(e,t){if(void 0===t&&(t=void 0),!this._lang)return void 0!==t?t:e;var n=this._lang,r=this.getByLanguage(e,n);return r||(n.indexOf("-")>0&&(r=this.getByLanguage(e,n.split("-")[0])),r||(void 0!==t?t:e))},e.prototype.getByLanguage=function(e,t,n){if(void 0===n&&(n=null),!t)return n;var r=this._dict[t];return r?r[e]:n},e.prototype.putVocabulariesForLanguage=function(e,t){var n=this._dict[e];n||(n=this._dict[e]={}),Object.assign(n,t)},e.prototype.putVocabularies=function(e){var t=this;Object.keys(e).map(function(n){t.putVocabulariesForLanguage(n,e[n])})},e}(),s=n(20),a=new r.a("I18n"),u=null,c=null,l=function(){function e(){}return e.configure=function(t){return a.debug("configure I18n"),t?(u=Object.assign({},u,t.I18n||t),e.createInstance(),u):u},e.getModuleName=function(){return"I18n"},e.createInstance=function(){a.debug("create I18n instance"),c||(c=new o(u))},e.setLanguage=function(t){return e.checkConfig(),c.setLanguage(t)},e.get=function(t,n){return e.checkConfig()?c.get(t,n):void 0===n?t:n},e.putVocabulariesForLanguage=function(t,n){return e.checkConfig(),c.putVocabulariesForLanguage(t,n)},e.putVocabularies=function(t){return e.checkConfig(),c.putVocabularies(t)},e.checkConfig=function(){return c||(c=new o(u)),!0},e}();s.a.register(l)},function(e,t,n){var r;e.exports=(r=n(38),function(e){var t=r,n=t.lib,i=n.WordArray,o=n.Hasher,s=t.algo,a=[],u=[];!function(){function t(t){for(var n=e.sqrt(t),r=2;r<=n;r++)if(!(t%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,i=0;i<64;)t(r)&&(i<8&&(a[i]=n(e.pow(r,.5))),u[i]=n(e.pow(r,1/3)),i++),r++}();var c=[],l=s.SHA256=o.extend({_doReset:function(){this._hash=new i.init(a.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],a=n[4],l=n[5],d=n[6],f=n[7],p=0;p<64;p++){if(p<16)c[p]=0|e[t+p];else{var h=c[p-15],v=(h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3,g=c[p-2],y=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;c[p]=v+c[p-7]+y+c[p-16]}var m=r&i^r&o^i&o,b=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),w=f+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&l^~a&d)+u[p]+c[p];f=d,d=l,l=a,a=s+w|0,s=o,o=i,i=r,r=w+(b+m)|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0,n[5]=n[5]+l|0,n[6]=n[6]+d|0,n[7]=n[7]+f|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=e.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=o._createHelper(l),t.HmacSHA256=o._createHmacHelper(l)}(Math),r.SHA256)},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",function(){return a});var i=n(48),o=n(34),s=n(20),a=function(){function e(){this._logger=new i.a("ServiceWorker")}return Object.defineProperty(e.prototype,"serviceWorker",{get:function(){return this._serviceWorker},enumerable:!0,configurable:!0}),e.prototype.register=function(e,t){var n=this;return void 0===e&&(e="/service-worker.js"),void 0===t&&(t="/"),this._logger.debug("registering "+e),this._logger.debug("registering service worker with scope "+t),new Promise(function(r,i){if(!(navigator&&"serviceWorker"in navigator))return i(new Error("Service Worker not available"));navigator.serviceWorker.register(e,{scope:t}).then(function(e){return e.installing?n._serviceWorker=e.installing:e.waiting?n._serviceWorker=e.waiting:e.active&&(n._serviceWorker=e.active),n._registration=e,n._setupListeners(),n._logger.debug("Service Worker Registration Success: "+e),r(e)}).catch(function(e){return n._logger.debug("Service Worker Registration Failed "+e),i(e)})})},e.prototype.enablePush=function(e){var t=this;if(!this._registration)throw new Error("Service Worker not registered");return this._publicKey=e,new Promise(function(n,r){if(!Object(o.b)().isBrowser)return r(new Error("Service Worker not available"));t._registration.pushManager.getSubscription().then(function(r){if(!r)return t._logger.debug("User is NOT subscribed to push"),t._registration.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t._urlB64ToUint8Array(e)}).then(function(e){t._subscription=e,t._logger.debug("User subscribed: "+JSON.stringify(e)),n(e)}).catch(function(e){t._logger.error(e)});t._subscription=r,t._logger.debug("User is subscribed to push: "+JSON.stringify(r)),n(r)})})},e.prototype._urlB64ToUint8Array=function(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(t),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r},e.prototype.send=function(e){this._serviceWorker&&this._serviceWorker.postMessage("object"===r(e)?JSON.stringify(e):e)},e.prototype._setupListeners=function(){var e=this;this._serviceWorker.addEventListener("statechange",function(t){var n=e._serviceWorker.state;e._logger.debug("ServiceWorker statechange: "+n),s.a.Analytics&&"function"==typeof s.a.Analytics.record&&s.a.Analytics.record({name:"ServiceWorker",attributes:{state:n}})}),this._serviceWorker.addEventListener("message",function(t){e._logger.debug("ServiceWorker message event: "+t)})},e}()},function(e,t,n){"use strict";function r(e,t){function n(){this.constructor=e}if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Ut(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function i(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})}function o(e,t){function n(n){return function(u){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,n[0]&&(a=0)),a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,u])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s}function s(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",function(){return fr});var u,c,l,d,f,p,h,v,g,y,m,b,w,_,S,E,C,A,O,I,x,T,P,k,D,N,M,L,j,R,U,F,B,z,q,K,$,V,G,W,H,J,Y,Z,X,Q,ee,te,ne,re,ie,oe,se,ae,ue,ce,le,de,fe,pe,he,ve,ge,ye,me,be,we,_e,Se,Ee,Ce,Ae,Oe,Ie,xe,Te,Pe,ke,De,Ne,Me,Le,je,Re,Ue,Fe,Be,ze,qe,Ke,$e,Ve,Ge,We,He,Je,Ye,Ze,Xe,Qe,et,tt,nt,rt,it,ot,st,at,ut,ct,lt,dt,ft,pt,ht,vt,gt,yt,mt,bt,wt,_t,St,Et,Ct,At,Ot,It,xt,Tt,Pt,kt=n(78),Dt=n(48),Nt=n(113),Mt=n(93),Lt=n(34),jt=n(49),Rt=n(80),Ut=function(e,t){return(Ut=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},Ft=function(){return(Ft=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.create,Object.create,(u||(u={})).filterSensitiveLog=function(e){return Ft({},e)},(c||(c={})).filterSensitiveLog=function(e){return Ft({},e)},(l||(l={})).filterSensitiveLog=function(e){return Ft({},e)},(d||(d={})).filterSensitiveLog=function(e){return Ft({},e)},(f||(f={})).filterSensitiveLog=function(e){return Ft({},e)},(p||(p={})).filterSensitiveLog=function(e){return Ft({},e)},(h||(h={})).filterSensitiveLog=function(e){return Ft({},e)},(v||(v={})).filterSensitiveLog=function(e){return Ft({},e)},(g||(g={})).filterSensitiveLog=function(e){return Ft({},e)},(y||(y={})).filterSensitiveLog=function(e){return Ft({},e)},(m||(m={})).filterSensitiveLog=function(e){return Ft({},e)},(b||(b={})).filterSensitiveLog=function(e){return Ft({},e)},(w||(w={})).filterSensitiveLog=function(e){return Ft({},e)},(_||(_={})).filterSensitiveLog=function(e){return Ft({},e)},(S||(S={})).filterSensitiveLog=function(e){return Ft({},e)},(E||(E={})).filterSensitiveLog=function(e){return Ft({},e)},(C||(C={})).filterSensitiveLog=function(e){return Ft({},e)},(A||(A={})).filterSensitiveLog=function(e){return Ft({},e)},(O||(O={})).filterSensitiveLog=function(e){return Ft({},e)},(I||(I={})).filterSensitiveLog=function(e){return Ft({},e)},(x||(x={})).filterSensitiveLog=function(e){return Ft({},e)},(T||(T={})).filterSensitiveLog=function(e){return Ft({},e)},(P||(P={})).filterSensitiveLog=function(e){return Ft({},e)},(k||(k={})).filterSensitiveLog=function(e){return Ft({},e)},(D||(D={})).filterSensitiveLog=function(e){return Ft({},e)},(N||(N={})).filterSensitiveLog=function(e){return Ft({},e)},(M||(M={})).filterSensitiveLog=function(e){return Ft({},e)},(L||(L={})).filterSensitiveLog=function(e){return Ft({},e)},(j||(j={})).filterSensitiveLog=function(e){return Ft({},e)},(R||(R={})).filterSensitiveLog=function(e){return Ft({},e)},(U||(U={})).filterSensitiveLog=function(e){return Ft({},e)},(F||(F={})).filterSensitiveLog=function(e){return Ft({},e)},(B||(B={})).filterSensitiveLog=function(e){return Ft({},e)},(z||(z={})).filterSensitiveLog=function(e){return Ft({},e)},(q||(q={})).filterSensitiveLog=function(e){return Ft({},e)},(K||(K={})).filterSensitiveLog=function(e){return Ft({},e)},($||($={})).filterSensitiveLog=function(e){return Ft({},e)},(V||(V={})).filterSensitiveLog=function(e){return Ft({},e)},(G||(G={})).filterSensitiveLog=function(e){return Ft({},e)},(W||(W={})).filterSensitiveLog=function(e){return Ft({},e)},(H||(H={})).filterSensitiveLog=function(e){return Ft({},e)},(J||(J={})).filterSensitiveLog=function(e){return Ft({},e)},(Y||(Y={})).filterSensitiveLog=function(e){return Ft({},e)},(Z||(Z={})).filterSensitiveLog=function(e){return Ft({},e)},(X||(X={})).filterSensitiveLog=function(e){return Ft({},e)},(Q||(Q={})).filterSensitiveLog=function(e){return Ft({},e)},(ee||(ee={})).filterSensitiveLog=function(e){return Ft({},e)},(te||(te={})).filterSensitiveLog=function(e){return Ft({},e)},(ne||(ne={})).filterSensitiveLog=function(e){return Ft({},e)},(re||(re={})).filterSensitiveLog=function(e){return Ft({},e)},(ie||(ie={})).filterSensitiveLog=function(e){return Ft({},e)},(oe||(oe={})).filterSensitiveLog=function(e){return Ft({},e)},(se||(se={})).filterSensitiveLog=function(e){return Ft({},e)},(ae||(ae={})).filterSensitiveLog=function(e){return Ft({},e)},(ue||(ue={})).filterSensitiveLog=function(e){return Ft({},e)},(ce||(ce={})).filterSensitiveLog=function(e){return Ft({},e)},(le||(le={})).filterSensitiveLog=function(e){return Ft({},e)},(de||(de={})).filterSensitiveLog=function(e){return Ft({},e)},(fe||(fe={})).filterSensitiveLog=function(e){return Ft({},e)},(pe||(pe={})).filterSensitiveLog=function(e){return Ft({},e)},(he||(he={})).filterSensitiveLog=function(e){return Ft({},e)},(ve||(ve={})).filterSensitiveLog=function(e){return Ft({},e)},(ge||(ge={})).filterSensitiveLog=function(e){return Ft({},e)},(ye||(ye={})).filterSensitiveLog=function(e){return Ft({},e)},(me||(me={})).filterSensitiveLog=function(e){return Ft({},e)},(be||(be={})).filterSensitiveLog=function(e){return Ft({},e)},(we||(we={})).filterSensitiveLog=function(e){return Ft({},e)},(_e||(_e={})).filterSensitiveLog=function(e){return Ft({},e)},(Se||(Se={})).filterSensitiveLog=function(e){return Ft({},e)},(Ee||(Ee={})).filterSensitiveLog=function(e){return Ft({},e)},(Ce||(Ce={})).filterSensitiveLog=function(e){return Ft({},e)},(Ae||(Ae={})).filterSensitiveLog=function(e){return Ft({},e)},(Oe||(Oe={})).filterSensitiveLog=function(e){return Ft({},e)},(Ie||(Ie={})).filterSensitiveLog=function(e){return Ft({},e)},(xe||(xe={})).filterSensitiveLog=function(e){return Ft({},e)},(Te||(Te={})).filterSensitiveLog=function(e){return Ft({},e)},(Pe||(Pe={})).filterSensitiveLog=function(e){return Ft({},e)},(ke||(ke={})).filterSensitiveLog=function(e){return Ft({},e)},(De||(De={})).filterSensitiveLog=function(e){return Ft({},e)},(Ne||(Ne={})).filterSensitiveLog=function(e){return Ft({},e)},(Me||(Me={})).filterSensitiveLog=function(e){return Ft({},e)},(Le||(Le={})).filterSensitiveLog=function(e){return Ft({},e)},(je||(je={})).filterSensitiveLog=function(e){return Ft({},e)},(Re||(Re={})).filterSensitiveLog=function(e){return Ft({},e)},(Ue||(Ue={})).filterSensitiveLog=function(e){return Ft({},e)},(Fe||(Fe={})).filterSensitiveLog=function(e){return Ft({},e)},(Be||(Be={})).filterSensitiveLog=function(e){return Ft({},e)},(ze||(ze={})).filterSensitiveLog=function(e){return Ft({},e)},(qe||(qe={})).filterSensitiveLog=function(e){return Ft({},e)},(Ke||(Ke={})).filterSensitiveLog=function(e){return Ft({},e)},($e||($e={})).filterSensitiveLog=function(e){return Ft({},e)},(Ve||(Ve={})).filterSensitiveLog=function(e){return Ft({},e)},(Ge||(Ge={})).filterSensitiveLog=function(e){return Ft({},e)},(We||(We={})).filterSensitiveLog=function(e){return Ft({},e)},(He||(He={})).filterSensitiveLog=function(e){return Ft({},e)},(Je||(Je={})).filterSensitiveLog=function(e){return Ft({},e)},(Ye||(Ye={})).filterSensitiveLog=function(e){return Ft({},e)},(Ze||(Ze={})).filterSensitiveLog=function(e){return Ft({},e)},(Xe||(Xe={})).filterSensitiveLog=function(e){return Ft({},e)},(Qe||(Qe={})).filterSensitiveLog=function(e){return Ft({},e)},(et||(et={})).filterSensitiveLog=function(e){return Ft({},e)},(tt||(tt={})).filterSensitiveLog=function(e){return Ft({},e)},(nt||(nt={})).filterSensitiveLog=function(e){return Ft({},e)},(rt||(rt={})).filterSensitiveLog=function(e){return Ft({},e)},(it||(it={})).filterSensitiveLog=function(e){return Ft({},e)},(ot||(ot={})).filterSensitiveLog=function(e){return Ft({},e)},(st||(st={})).filterSensitiveLog=function(e){return Ft({},e)},(at||(at={})).filterSensitiveLog=function(e){return Ft({},e)},(ut||(ut={})).filterSensitiveLog=function(e){return Ft({},e)},(ct||(ct={})).filterSensitiveLog=function(e){return Ft({},e)},(lt||(lt={})).filterSensitiveLog=function(e){return Ft({},e)},(dt||(dt={})).filterSensitiveLog=function(e){return Ft({},e)},(ft||(ft={})).filterSensitiveLog=function(e){return Ft({},e)},(pt||(pt={})).filterSensitiveLog=function(e){return Ft({},e)},(ht||(ht={})).filterSensitiveLog=function(e){return Ft({},e)},(vt||(vt={})).filterSensitiveLog=function(e){return Ft({},e)},(gt||(gt={})).filterSensitiveLog=function(e){return Ft({},e)},(yt||(yt={})).filterSensitiveLog=function(e){return Ft({},e)},(mt||(mt={})).filterSensitiveLog=function(e){return Ft({},e)},(bt||(bt={})).filterSensitiveLog=function(e){return Ft({},e)},(wt||(wt={})).filterSensitiveLog=function(e){return Ft({},e)},(_t||(_t={})).filterSensitiveLog=function(e){return Ft({},e)},(St||(St={})).filterSensitiveLog=function(e){return Ft({},e)},(Et||(Et={})).filterSensitiveLog=function(e){return Ft({},e)},(Ct||(Ct={})).filterSensitiveLog=function(e){return Ft({},e)},(At||(At={})).filterSensitiveLog=function(e){return Ft({},e)},(Ot||(Ot={})).filterSensitiveLog=function(e){return Ft({},e)},(It||(It={})).filterSensitiveLog=function(e){return Ft({},e)},(xt||(xt={})).filterSensitiveLog=function(e){return Ft({},e)},(Tt||(Tt={})).filterSensitiveLog=function(e){return Ft({},e)},(Pt||(Pt={})).filterSensitiveLog=function(e){return Ft({},e)};var Bt=n(3),zt=n(1),qt=function(e,t){return i(void 0,void 0,void 0,function(){var n,r,i,s,a,u,c,l,d,f,p,h,v,g;return o(this,function(o){switch(o.label){case 0:return r=[Ft({},e)],g={},[4,mn(e.body,t)];case 1:switch(n=Ft.apply(void 0,r.concat([(g.body=o.sent(),g)])),s="UnknownError",s=bn(e,n.body)){case"BadRequestException":case"com.amazonaws.pinpoint#BadRequestException":return[3,2];case"ForbiddenException":case"com.amazonaws.pinpoint#ForbiddenException":return[3,4];case"InternalServerErrorException":case"com.amazonaws.pinpoint#InternalServerErrorException":return[3,6];case"MethodNotAllowedException":case"com.amazonaws.pinpoint#MethodNotAllowedException":return[3,8];case"NotFoundException":case"com.amazonaws.pinpoint#NotFoundException":return[3,10];case"PayloadTooLargeException":case"com.amazonaws.pinpoint#PayloadTooLargeException":
return[3,12];case"TooManyRequestsException":case"com.amazonaws.pinpoint#TooManyRequestsException":return[3,14]}return[3,16];case 2:return a=[{}],[4,$t(n,t)];case 3:return i=Ft.apply(void 0,[Ft.apply(void 0,a.concat([o.sent()])),{name:s,$metadata:gn(e)}]),[3,17];case 4:return u=[{}],[4,Vt(n,t)];case 5:return i=Ft.apply(void 0,[Ft.apply(void 0,u.concat([o.sent()])),{name:s,$metadata:gn(e)}]),[3,17];case 6:return c=[{}],[4,Gt(n,t)];case 7:return i=Ft.apply(void 0,[Ft.apply(void 0,c.concat([o.sent()])),{name:s,$metadata:gn(e)}]),[3,17];case 8:return l=[{}],[4,Wt(n,t)];case 9:return i=Ft.apply(void 0,[Ft.apply(void 0,l.concat([o.sent()])),{name:s,$metadata:gn(e)}]),[3,17];case 10:return d=[{}],[4,Ht(n,t)];case 11:return i=Ft.apply(void 0,[Ft.apply(void 0,d.concat([o.sent()])),{name:s,$metadata:gn(e)}]),[3,17];case 12:return f=[{}],[4,Jt(n,t)];case 13:return i=Ft.apply(void 0,[Ft.apply(void 0,f.concat([o.sent()])),{name:s,$metadata:gn(e)}]),[3,17];case 14:return p=[{}],[4,Yt(n,t)];case 15:return i=Ft.apply(void 0,[Ft.apply(void 0,p.concat([o.sent()])),{name:s,$metadata:gn(e)}]),[3,17];case 16:h=n.body,s=h.code||h.Code||s,i=Ft(Ft({},h),{name:""+s,message:h.message||h.Message||s,$fault:"client",$metadata:gn(e)}),o.label=17;case 17:return v=i.message||i.Message||s,i.message=v,delete i.Message,[2,Promise.reject(Object.assign(new Error(v),i))]}})})},Kt=function(e,t){return i(void 0,void 0,void 0,function(){var n,r,i,s,a,u,c,l,d,f,p,h,v,g;return o(this,function(o){switch(o.label){case 0:return r=[Ft({},e)],g={},[4,mn(e.body,t)];case 1:switch(n=Ft.apply(void 0,r.concat([(g.body=o.sent(),g)])),s="UnknownError",s=bn(e,n.body)){case"BadRequestException":case"com.amazonaws.pinpoint#BadRequestException":return[3,2];case"ForbiddenException":case"com.amazonaws.pinpoint#ForbiddenException":return[3,4];case"InternalServerErrorException":case"com.amazonaws.pinpoint#InternalServerErrorException":return[3,6];case"MethodNotAllowedException":case"com.amazonaws.pinpoint#MethodNotAllowedException":return[3,8];case"NotFoundException":case"com.amazonaws.pinpoint#NotFoundException":return[3,10];case"PayloadTooLargeException":case"com.amazonaws.pinpoint#PayloadTooLargeException":return[3,12];case"TooManyRequestsException":case"com.amazonaws.pinpoint#TooManyRequestsException":return[3,14]}return[3,16];case 2:return a=[{}],[4,$t(n,t)];case 3:return i=Ft.apply(void 0,[Ft.apply(void 0,a.concat([o.sent()])),{name:s,$metadata:gn(e)}]),[3,17];case 4:return u=[{}],[4,Vt(n,t)];case 5:return i=Ft.apply(void 0,[Ft.apply(void 0,u.concat([o.sent()])),{name:s,$metadata:gn(e)}]),[3,17];case 6:return c=[{}],[4,Gt(n,t)];case 7:return i=Ft.apply(void 0,[Ft.apply(void 0,c.concat([o.sent()])),{name:s,$metadata:gn(e)}]),[3,17];case 8:return l=[{}],[4,Wt(n,t)];case 9:return i=Ft.apply(void 0,[Ft.apply(void 0,l.concat([o.sent()])),{name:s,$metadata:gn(e)}]),[3,17];case 10:return d=[{}],[4,Ht(n,t)];case 11:return i=Ft.apply(void 0,[Ft.apply(void 0,d.concat([o.sent()])),{name:s,$metadata:gn(e)}]),[3,17];case 12:return f=[{}],[4,Jt(n,t)];case 13:return i=Ft.apply(void 0,[Ft.apply(void 0,f.concat([o.sent()])),{name:s,$metadata:gn(e)}]),[3,17];case 14:return p=[{}],[4,Yt(n,t)];case 15:return i=Ft.apply(void 0,[Ft.apply(void 0,p.concat([o.sent()])),{name:s,$metadata:gn(e)}]),[3,17];case 16:h=n.body,s=h.code||h.Code||s,i=Ft(Ft({},h),{name:""+s,message:h.message||h.Message||s,$fault:"client",$metadata:gn(e)}),o.label=17;case 17:return v=i.message||i.Message||s,i.message=v,delete i.Message,[2,Promise.reject(Object.assign(new Error(v),i))]}})})},$t=function(e,t){return i(void 0,void 0,void 0,function(){var t,n;return o(this,function(r){return t={name:"BadRequestException",$fault:"client",$metadata:gn(e),Message:void 0,RequestID:void 0},void 0!==(n=e.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},Vt=function(e,t){return i(void 0,void 0,void 0,function(){var t,n;return o(this,function(r){return t={name:"ForbiddenException",$fault:"client",$metadata:gn(e),Message:void 0,RequestID:void 0},void 0!==(n=e.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},Gt=function(e,t){return i(void 0,void 0,void 0,function(){var t,n;return o(this,function(r){return t={name:"InternalServerErrorException",$fault:"server",$metadata:gn(e),Message:void 0,RequestID:void 0},void 0!==(n=e.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},Wt=function(e,t){return i(void 0,void 0,void 0,function(){var t,n;return o(this,function(r){return t={name:"MethodNotAllowedException",$fault:"client",$metadata:gn(e),Message:void 0,RequestID:void 0},void 0!==(n=e.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},Ht=function(e,t){return i(void 0,void 0,void 0,function(){var t,n;return o(this,function(r){return t={name:"NotFoundException",$fault:"client",$metadata:gn(e),Message:void 0,RequestID:void 0},void 0!==(n=e.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},Jt=function(e,t){return i(void 0,void 0,void 0,function(){var t,n;return o(this,function(r){return t={name:"PayloadTooLargeException",$fault:"client",$metadata:gn(e),Message:void 0,RequestID:void 0},void 0!==(n=e.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},Yt=function(e,t){return i(void 0,void 0,void 0,function(){var t,n;return o(this,function(r){return t={name:"TooManyRequestsException",$fault:"client",$metadata:gn(e),Message:void 0,RequestID:void 0},void 0!==(n=e.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},Zt=function(e,t){return Ft(Ft(Ft(Ft(Ft(Ft(Ft(Ft({},void 0!==e.AppVersion&&null!==e.AppVersion&&{AppVersion:e.AppVersion}),void 0!==e.Locale&&null!==e.Locale&&{Locale:e.Locale}),void 0!==e.Make&&null!==e.Make&&{Make:e.Make}),void 0!==e.Model&&null!==e.Model&&{Model:e.Model}),void 0!==e.ModelVersion&&null!==e.ModelVersion&&{ModelVersion:e.ModelVersion}),void 0!==e.Platform&&null!==e.Platform&&{Platform:e.Platform}),void 0!==e.PlatformVersion&&null!==e.PlatformVersion&&{PlatformVersion:e.PlatformVersion}),void 0!==e.Timezone&&null!==e.Timezone&&{Timezone:e.Timezone})},Xt=function(e,t){return Ft(Ft(Ft(Ft(Ft(Ft({},void 0!==e.City&&null!==e.City&&{City:e.City}),void 0!==e.Country&&null!==e.Country&&{Country:e.Country}),void 0!==e.Latitude&&null!==e.Latitude&&{Latitude:e.Latitude}),void 0!==e.Longitude&&null!==e.Longitude&&{Longitude:e.Longitude}),void 0!==e.PostalCode&&null!==e.PostalCode&&{PostalCode:e.PostalCode}),void 0!==e.Region&&null!==e.Region&&{Region:e.Region})},Qt=function(e,t){return Ft(Ft(Ft(Ft(Ft(Ft(Ft(Ft(Ft(Ft(Ft({},void 0!==e.Address&&null!==e.Address&&{Address:e.Address}),void 0!==e.Attributes&&null!==e.Attributes&&{Attributes:un(e.Attributes,t)}),void 0!==e.ChannelType&&null!==e.ChannelType&&{ChannelType:e.ChannelType}),void 0!==e.Demographic&&null!==e.Demographic&&{Demographic:Zt(e.Demographic,t)}),void 0!==e.EffectiveDate&&null!==e.EffectiveDate&&{EffectiveDate:e.EffectiveDate}),void 0!==e.EndpointStatus&&null!==e.EndpointStatus&&{EndpointStatus:e.EndpointStatus}),void 0!==e.Location&&null!==e.Location&&{Location:Xt(e.Location,t)}),void 0!==e.Metrics&&null!==e.Metrics&&{Metrics:rn(e.Metrics,t)}),void 0!==e.OptOut&&null!==e.OptOut&&{OptOut:e.OptOut}),void 0!==e.RequestId&&null!==e.RequestId&&{RequestId:e.RequestId}),void 0!==e.User&&null!==e.User&&{User:en(e.User,t)})},en=function(e,t){return Ft(Ft({},void 0!==e.UserAttributes&&null!==e.UserAttributes&&{UserAttributes:un(e.UserAttributes,t)}),void 0!==e.UserId&&null!==e.UserId&&{UserId:e.UserId})},tn=function(e,t){return Ft({},void 0!==e.BatchItem&&null!==e.BatchItem&&{BatchItem:an(e.BatchItem,t)})},nn=function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:e})},rn=function(e,t){return Object.entries(e).reduce(function(e,t){var n,r=s(t,2),i=r[0],o=r[1];return null===o?e:Ft(Ft({},e),((n={})[i]=o,n))},{})},on=function(e,t){return Object.entries(e).reduce(function(e,t){var n,r=s(t,2),i=r[0],o=r[1];return null===o?e:Ft(Ft({},e),((n={})[i]=o,n))},{})},sn=function(e,t){return Object.entries(e).reduce(function(e,n){var r,i=s(n,2),o=i[0],a=i[1];return null===a?e:Ft(Ft({},e),((r={})[o]=function(e,t){return Ft(Ft(Ft(Ft(Ft(Ft(Ft(Ft(Ft(Ft({},void 0!==e.AppPackageName&&null!==e.AppPackageName&&{AppPackageName:e.AppPackageName}),void 0!==e.AppTitle&&null!==e.AppTitle&&{AppTitle:e.AppTitle}),void 0!==e.AppVersionCode&&null!==e.AppVersionCode&&{AppVersionCode:e.AppVersionCode}),void 0!==e.Attributes&&null!==e.Attributes&&{Attributes:on(e.Attributes,t)}),void 0!==e.ClientSdkVersion&&null!==e.ClientSdkVersion&&{ClientSdkVersion:e.ClientSdkVersion}),void 0!==e.EventType&&null!==e.EventType&&{EventType:e.EventType}),void 0!==e.Metrics&&null!==e.Metrics&&{Metrics:rn(e.Metrics,t)}),void 0!==e.SdkName&&null!==e.SdkName&&{SdkName:e.SdkName}),void 0!==e.Session&&null!==e.Session&&{Session:ln(e.Session,t)}),void 0!==e.Timestamp&&null!==e.Timestamp&&{Timestamp:e.Timestamp})}(a,t),r))},{})},an=function(e,t){return Object.entries(e).reduce(function(e,n){var r,i=s(n,2),o=i[0],a=i[1];return null===a?e:Ft(Ft({},e),((r={})[o]=function(e,t){return Ft(Ft({},void 0!==e.Endpoint&&null!==e.Endpoint&&{Endpoint:cn(e.Endpoint,t)}),void 0!==e.Events&&null!==e.Events&&{Events:sn(e.Events,t)})}(a,t),r))},{})},un=function(e,t){return Object.entries(e).reduce(function(e,n){var r,i=s(n,2),o=i[0],a=i[1];return null===a?e:Ft(Ft({},e),((r={})[o]=nn(a,t),r))},{})},cn=function(e,t){return Ft(Ft(Ft(Ft(Ft(Ft(Ft(Ft(Ft(Ft(Ft({},void 0!==e.Address&&null!==e.Address&&{Address:e.Address}),void 0!==e.Attributes&&null!==e.Attributes&&{Attributes:un(e.Attributes,t)}),void 0!==e.ChannelType&&null!==e.ChannelType&&{ChannelType:e.ChannelType}),void 0!==e.Demographic&&null!==e.Demographic&&{Demographic:Zt(e.Demographic,t)}),void 0!==e.EffectiveDate&&null!==e.EffectiveDate&&{EffectiveDate:e.EffectiveDate}),void 0!==e.EndpointStatus&&null!==e.EndpointStatus&&{EndpointStatus:e.EndpointStatus}),void 0!==e.Location&&null!==e.Location&&{Location:Xt(e.Location,t)}),void 0!==e.Metrics&&null!==e.Metrics&&{Metrics:rn(e.Metrics,t)}),void 0!==e.OptOut&&null!==e.OptOut&&{OptOut:e.OptOut}),void 0!==e.RequestId&&null!==e.RequestId&&{RequestId:e.RequestId}),void 0!==e.User&&null!==e.User&&{User:en(e.User,t)})},ln=function(e,t){return Ft(Ft(Ft(Ft({},void 0!==e.Duration&&null!==e.Duration&&{Duration:e.Duration}),void 0!==e.Id&&null!==e.Id&&{Id:e.Id}),void 0!==e.StartTimestamp&&null!==e.StartTimestamp&&{StartTimestamp:e.StartTimestamp}),void 0!==e.StopTimestamp&&null!==e.StopTimestamp&&{StopTimestamp:e.StopTimestamp})},dn=function(e,t){return{Message:void 0!==e.Message&&null!==e.Message?e.Message:void 0,StatusCode:void 0!==e.StatusCode&&null!==e.StatusCode?e.StatusCode:void 0}},fn=function(e,t){return{Results:void 0!==e.Results&&null!==e.Results?hn(e.Results,t):void 0}},pn=function(e,t){return Object.entries(e).reduce(function(e,t){var n,r=s(t,2),i=r[0],o=r[1];return null===o?e:Ft(Ft({},e),((n={})[i]=function(e,t){return{Message:void 0!==e.Message&&null!==e.Message?e.Message:void 0,StatusCode:void 0!==e.StatusCode&&null!==e.StatusCode?e.StatusCode:void 0}}(o),n))},{})},hn=function(e,t){return Object.entries(e).reduce(function(e,n){var r,i=s(n,2),o=i[0],a=i[1];return null===a?e:Ft(Ft({},e),((r={})[o]=function(e,t){return{EndpointItemResponse:void 0!==e.EndpointItemResponse&&null!==e.EndpointItemResponse?dn(e.EndpointItemResponse):void 0,EventsItemResponse:void 0!==e.EventsItemResponse&&null!==e.EventsItemResponse?pn(e.EventsItemResponse,t):void 0}}(a,t),r))},{})},vn=function(e,t){return{Message:void 0!==e.Message&&null!==e.Message?e.Message:void 0,RequestID:void 0!==e.RequestID&&null!==e.RequestID?e.RequestID:void 0}},gn=function(e){var t;return{httpStatusCode:e.statusCode,requestId:null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},yn=function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)},mn=function(e,t){return function(e,t){return yn(e,t).then(function(e){return t.utf8Encoder(e)})}(e,t).then(function(e){return e.length?JSON.parse(e):{}})},bn=function(e,t){var n,r,i=function(e){var t=e;return t.indexOf(":")>=0&&(t=t.split(":")[0]),t.indexOf("#")>=0&&(t=t.split("#")[1]),t},o=(n=e.headers,r="x-amzn-errortype",Object.keys(n).find(function(e){return e.toLowerCase()===r.toLowerCase()}));return void 0!==o?i(e.headers[o]):void 0!==t.code?i(t.code):void 0!==t.__type?i(t.__type):""},wn=n(10),_n=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return r(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(wn.a)(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"PinpointClient",commandName:"PutEventsCommand",inputFilterSensitiveLog:me.filterSensitiveLog,outputFilterSensitiveLog:be.filterSensitiveLog},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},i)},t.prototype.serialize=function(e,t){return function(e,t){return i(void 0,void 0,void 0,function(){var n,r,i,s,a,u,c,l,d;return o(this,function(o){switch(o.label){case 0:if(n={"content-type":"application/json"},r="/v1/apps/{ApplicationId}/events",void 0===e.ApplicationId)throw new Error("No value provided for input HTTP label: ApplicationId.");if((i=e.ApplicationId).length<=0)throw new Error("Empty value provided for input HTTP label: ApplicationId.");return r=r.replace("{ApplicationId}",Object(zt.f)(i)),void 0!==e.EventsRequest&&(s=tn(e.EventsRequest,t)),void 0===s&&(s={}),s=JSON.stringify(s),[4,t.endpoint()];case 1:return a=o.sent(),u=a.hostname,c=a.protocol,l=void 0===c?"https":c,d=a.port,[2,new Bt.a({protocol:l,hostname:u,port:d,method:"POST",headers:n,path:r,body:s})]}})})}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return i(void 0,void 0,void 0,function(){var n,r;return o(this,function(i){switch(i.label){case 0:return 202!==e.statusCode&&e.statusCode>=300?[2,qt(e,t)]:(n={$metadata:gn(e),EventsResponse:void 0},[4,mn(e.body,t)]);case 1:return r=i.sent(),n.EventsResponse=fn(r,t),[2,Promise.resolve(n)]}})})}(e,t)},t}(zt.b),Sn=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return r(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(wn.a)(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"PinpointClient",commandName:"UpdateEndpointCommand",inputFilterSensitiveLog:tt.filterSensitiveLog,outputFilterSensitiveLog:nt.filterSensitiveLog},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},i)},t.prototype.serialize=function(e,t){return function(e,t){return i(void 0,void 0,void 0,function(){var n,r,i,s,a,u,c,l,d;return o(this,function(o){switch(o.label){case 0:if(n={"content-type":"application/json"},r="/v1/apps/{ApplicationId}/endpoints/{EndpointId}",void 0===e.ApplicationId)throw new Error("No value provided for input HTTP label: ApplicationId.");if((i=e.ApplicationId).length<=0)throw new Error("Empty value provided for input HTTP label: ApplicationId.");if(r=r.replace("{ApplicationId}",Object(zt.f)(i)),void 0===e.EndpointId)throw new Error("No value provided for input HTTP label: EndpointId.");if((i=e.EndpointId).length<=0)throw new Error("Empty value provided for input HTTP label: EndpointId.");return r=r.replace("{EndpointId}",Object(zt.f)(i)),void 0!==e.EndpointRequest&&(s=Qt(e.EndpointRequest,t)),void 0===s&&(s={}),s=JSON.stringify(s),[4,t.endpoint()];case 1:return a=o.sent(),u=a.hostname,c=a.protocol,l=void 0===c?"https":c,d=a.port,[2,new Bt.a({protocol:l,hostname:u,port:d,method:"PUT",headers:n,path:r,body:s})]}})})}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return i(void 0,void 0,void 0,function(){var n,r;return o(this,function(i){switch(i.label){case 0:return 202!==e.statusCode&&e.statusCode>=300?[2,Kt(e,t)]:(n={$metadata:gn(e),MessageBody:void 0},[4,mn(e.body,t)]);case 1:return r=i.sent(),n.MessageBody=vn(r,t),[2,Promise.resolve(n)]}})})}(e,t)},t}(zt.b),En=n(179),Cn=n(42),An=n(22),On=n(45),In=n(14),xn=n(18),Tn=n(43),Pn=n(44),kn=n(16),Dn=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),Nn=new Set(["cn-north-1","cn-northwest-1"]),Mn=new Set(["us-iso-east-1"]),Ln=new Set(["us-isob-east-1"]),jn=new Set(["us-gov-east-1","us-gov-west-1"]),Rn={apiVersion:"2016-12-01",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,t){var n=void 0;switch(e){case"ap-northeast-1":n={hostname:"pinpoint.ap-northeast-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"ap-northeast-2":n={hostname:"pinpoint.ap-northeast-2.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"ap-south-1":n={hostname:"pinpoint.ap-south-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"ap-southeast-1":n={hostname:"pinpoint.ap-southeast-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"ap-southeast-2":n={hostname:"pinpoint.ap-southeast-2.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"ca-central-1":n={hostname:"pinpoint.ca-central-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"eu-central-1":n={hostname:"pinpoint.eu-central-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"eu-west-1":n={hostname:"pinpoint.eu-west-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"eu-west-2":n={hostname:"pinpoint.eu-west-2.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"fips-us-east-1":n={hostname:"pinpoint-fips.us-east-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"fips-us-gov-west-1":n={hostname:"pinpoint-fips.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"fips-us-west-2":n={hostname:"pinpoint-fips.us-west-2.amazonaws.com",partition:"aws",signingRegion:"us-west-2"};break;case"us-east-1":n={hostname:"pinpoint.us-east-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"us-gov-west-1":n={hostname:"pinpoint.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"us-west-2":n={hostname:"pinpoint.us-west-2.amazonaws.com",partition:"aws",signingRegion:"us-west-2"};break;default:Dn.has(e)&&(n={hostname:"pinpoint.{region}.amazonaws.com".replace("{region}",e),partition:"aws",signingService:"mobiletargeting"}),Nn.has(e)&&(n={hostname:"pinpoint.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),Mn.has(e)&&(n={hostname:"pinpoint.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),Ln.has(e)&&(n={hostname:"pinpoint.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),jn.has(e)&&(n={hostname:"pinpoint.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov",signingService:"mobiletargeting"}),void 0===n&&(n={hostname:"pinpoint.{region}.amazonaws.com".replace("{region}",e),partition:"aws",signingService:"mobiletargeting"})}return Promise.resolve(Ft({signingService:"mobiletargeting"},n))},serviceId:"Pinpoint",urlParser:n(47).a},Un=Ft(Ft({},Rn),{runtime:"browser",base64Decoder:xn.a,base64Encoder:xn.b,bodyLengthChecker:Tn.a,credentialDefaultProvider:function(e){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:Object(Pn.a)({serviceId:Rn.serviceId,clientVersion:En.version}),maxAttempts:In.a,region:Object(On.a)("Region is missing"),requestHandler:new An.a,sha256:Cn.Sha256,streamCollector:An.b,utf8Decoder:kn.a,utf8Encoder:kn.b}),Fn=n(24),Bn=n(41),zn=n(21),qn=n(46),Kn=n(27),$n=n(23),Vn=function(e){function t(t){var n=this,r=Ft(Ft({},Un),t),i=Object(Fn.b)(r),o=Object(Fn.a)(i),s=Object(Kn.b)(o),a=Object(In.c)(s),u=Object(zn.b)(a),c=Object($n.b)(u);return(n=e.call(this,c)||this).config=c,n.middlewareStack.use(Object(Kn.a)(n.config)),n.middlewareStack.use(Object(In.b)(n.config)),n.middlewareStack.use(Object(Bn.a)(n.config)),n.middlewareStack.use(Object(zn.a)(n.config)),n.middlewareStack.use(Object(qn.a)(n.config)),n.middlewareStack.use(Object($n.a)(n.config)),n}return r(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(zt.a),Gn=n(26),Wn=n(30),Hn=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},Jn=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},Yn=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},Zn=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Yn(arguments[t]));return e},Xn=new Dt.a("EventsBuffer"),Qn=[429,500],er=[202],tr=function(){function e(e,t){this._pause=!1,this._flush=!1,Xn.debug("Instantiating buffer with config:",t),this._buffer=[],this._client=e,this._config=t,this._sendBatch=this._sendBatch.bind(this),this._startLoop()}return e.prototype.push=function(e){var t;if(this._buffer.length>=this._config.bufferSize)return Xn.debug("Exceeded analytics events buffer size"),e.handlers.reject(new Error("Exceeded the size of analytics events buffer"));var n=((t={})[e.params.event.eventId]=e,t);this._buffer.push(n)},e.prototype.pause=function(){this._pause=!0},e.prototype.resume=function(){this._pause=!1},e.prototype.updateClient=function(e){this._client=e},e.prototype.flush=function(){this._flush=!0},e.prototype._startLoop=function(){this._interval&&clearInterval(this._interval);var e=this._config.flushInterval;this._interval=setInterval(this._sendBatch,e)},e.prototype._sendBatch=function(){var e=this._buffer.length;if(this._flush&&!e&&clearInterval(this._interval),!this._pause&&e){var t=this._config.flushSize,n=Math.min(t,e),r=this._buffer.splice(0,n);this._putEvents(r)}},e.prototype._putEvents=function(e){return Hn(this,void 0,void 0,function(){var t,n,r,i,o;return Jn(this,function(s){switch(s.label){case 0:t=this._bufferToMap(e),n=this._generateBatchEventParams(t),s.label=1;case 1:return s.trys.push([1,3,,4]),r=new _n(n),[4,this._client.send(r)];case 2:return i=s.sent(),this._processPutEventsSuccessResponse(i,t),[3,4];case 3:return o=s.sent(),[2,this._handlePutEventsFailure(o,t)];case 4:return[2]}})})},e.prototype._generateBatchEventParams=function(e){var t={ApplicationId:"",EventsRequest:{BatchItem:{}}};return Object.values(e).forEach(function(e){var n=e.params,r=n.event,i=n.timestamp,o=n.config,s=r.name,a=r.attributes,u=r.metrics,c=r.eventId,l=r.session,d=o.appId,f=o.endpointId,p=t.EventsRequest.BatchItem;t.ApplicationId=t.ApplicationId||d,p[f]||(p[f]={Endpoint:{},Events:{}}),p[f].Events[c]={EventType:s,Timestamp:new Date(i).toISOString(),Attributes:a,Metrics:u,Session:l}}),t},e.prototype._handlePutEventsFailure=function(e,t){Xn.debug("_putEvents Failed: ",e);var n=e.$metadata&&e.$metadata.httpStatusCode;if(Qn.includes(n)){var r=Object.values(t);this._retry(r)}},e.prototype._processPutEventsSuccessResponse=function(e,t){var n=e.EventsResponse.Results,r=[];Object.entries(n).forEach(function(e){var n=Yn(e,2),i=n[0],o=n[1].EventsItemResponse;Object.entries(o).forEach(function(e){var n,o,s=Yn(e,2),a=s[0],u=s[1],c=u.StatusCode,l=u.Message,d=t[a],f={EventsResponse:{Results:(n={},n[i]={EventsItemResponse:(o={},o[a]={StatusCode:c,Message:l},o)},n)}};if(er.includes(c))d.handlers.resolve(f);else{if(!Qn.includes(c)){var p=d.params.event.name;return Xn.error("event "+a+" : "+p+" failed with error: "+l),d.handlers.reject(f)}r.push(d)}})}),r.length&&this._retry(r)},e.prototype._retry=function(e){var t,n=[];e.forEach(function(e){var t,r=e.params,i=r.event,o=i.eventId,s=i.name;if(r.resendLimit-- >0)return Xn.debug("resending event "+o+" : "+s+" with "+r.resendLimit+" retry attempts remaining"),void n.push((t={},t[o]=e,t));Xn.debug("no retry attempts remaining for event "+o+" : "+s)}),(t=this._buffer).unshift.apply(t,Zn(n))},e.prototype._bufferToMap=function(e){return e.reduce(function(e,t){var n=Yn(Object.entries(t),1),r=Yn(n[0],2),i=r[0],o=r[1];return e[i]=o,e},{})},e}(),nr=function(){return(nr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},rr=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},ir=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},or=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},sr="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",ar=function(e,t){kt.a.dispatch("analytics",{event:e,data:t},"Analytics",sr)},ur=new Dt.a("AWSPinpointProvider"),cr=[429,500],lr=[202],dr="undefined"!=typeof navigator&&navigator&&"function"==typeof navigator.sendBeacon,fr=function(){function e(e){this._endpointGenerating=!0,this._endpointUpdateInProgress=!1,this._buffer=null,this._endpointBuffer=[],this._config=e||{},this._config.bufferSize=this._config.bufferSize||1e3,this._config.flushSize=this._config.flushSize||100,this._config.flushInterval=this._config.flushInterval||5e3,this._config.resendLimit=this._config.resendLimit||5,this._clientInfo=Nt.a.clientInfo()}return e.prototype.getCategory=function(){return e.category},e.prototype.getProviderName=function(){return e.providerName},e.prototype.configure=function(e){var t=this;ur.debug("configure Analytics",e);var n=e||{};if(this._config=Object.assign({},this._config,n),this._endpointGenerating=!!e.autoSessionRecord,this._config.appId&&!this._config.disabled)if(this._config.endpointId)ar("pinpointProvider_configured",null);else{var r=this.getProviderName()+"_"+this._config.appId;this._getEndpointId(r).then(function(e){ur.debug("setting endpoint id from the cache",e),t._config.endpointId=e,ar("pinpointProvider_configured",null)}).catch(function(e){ur.debug("Failed to generate endpointId",e)})}else this._flushBuffer();return this._config},e.prototype.record=function(e,t){return rr(this,void 0,void 0,function(){var n,r;return ir(this,function(i){switch(i.label){case 0:return ur.debug("_public record",e),[4,this._getCredentials()];case 1:return(n=i.sent())&&this._config.appId&&this._config.region?(this._initClients(n),r=(new Date).getTime(),this._generateSession(e),e.event.eventId=Object(Wn.v1)(),Object.assign(e,{timestamp:r,config:this._config}),e.event.immediate?[2,this._send(e,t)]:(this._putToBuffer(e,t),[2])):(ur.debug("cannot send events without credentials, applicationId or region"),[2,t.reject(new Error("No credentials, applicationId or region"))])}})})},e.prototype._sendEndpointUpdate=function(e){return rr(this,void 0,void 0,function(){var t;return ir(this,function(n){switch(n.label){case 0:return this._endpointUpdateInProgress?(this._endpointBuffer.push(e),[2]):(this._endpointUpdateInProgress=!0,[4,this._updateEndpoint(e)]);case 1:return n.sent(),t=this._endpointBuffer.shift(),this._endpointUpdateInProgress=!1,t&&this._sendEndpointUpdate(t),[2]}})})},e.prototype._putToBuffer=function(e,t){"_update_endpoint"!==e.event.name?this._buffer&&this._buffer.push({params:e,handlers:t}):this._sendEndpointUpdate({params:e,handlers:t})},e.prototype._generateSession=function(e){this._sessionId=this._sessionId||Object(Wn.v1)();var t=e.event;switch(t.name){case"_session.start":this._sessionStartTimestamp=(new Date).getTime(),this._sessionId=Object(Wn.v1)(),t.session={Id:this._sessionId,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString()};break;case"_session.stop":var n=(new Date).getTime();this._sessionStartTimestamp=this._sessionStartTimestamp||(new Date).getTime(),this._sessionId=this._sessionId||Object(Wn.v1)(),t.session={Id:this._sessionId,Duration:n-this._sessionStartTimestamp,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString(),StopTimestamp:new Date(n).toISOString()},this._sessionId=void 0,this._sessionStartTimestamp=void 0;break;default:this._sessionStartTimestamp=this._sessionStartTimestamp||(new Date).getTime(),this._sessionId=this._sessionId||Object(Wn.v1)(),t.session={Id:this._sessionId,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString()}}},e.prototype._send=function(e,t){return rr(this,void 0,void 0,function(){return ir(this,function(n){switch(e.event.name){case"_update_endpoint":return[2,this._updateEndpoint({params:e,handlers:t})];case"_session.stop":return[2,this._pinpointSendStopSession(e,t)];default:return[2,this._pinpointPutEvents(e,t)]}return[2]})})},
e.prototype._generateBatchItemContext=function(e){var t,n=e.event,r=e.timestamp,i=e.config,o=n.name,s=n.attributes,a=n.metrics,u=n.eventId,c=n.session,l=i.appId,d=i.endpointId,f={ApplicationId:l,EventsRequest:{BatchItem:{}}},p={Endpoint:{}};return p.Events=((t={})[u]={EventType:o,Timestamp:new Date(r).toISOString(),Attributes:s,Metrics:a,Session:c},t),f.EventsRequest.BatchItem[d]=p,f},e.prototype._pinpointPutEvents=function(e,t){return rr(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,d,f;return ir(this,function(p){switch(p.label){case 0:n=e.event.eventId,r=e.config.endpointId,i=this._generateBatchItemContext(e),o=new _n(i),p.label=1;case 1:return p.trys.push([1,3,,4]),[4,this.pinpointClient.send(o)];case 2:return s=p.sent(),a=r,u=n,c=s.EventsResponse.Results[a].EventsItemResponse[u],l=c.StatusCode,d=c.Message,lr.includes(l)?(ur.debug("record event success. ",s),[2,t.resolve(s)]):cr.includes(l)?(this._retry(e,t),[3,4]):(ur.error("Event "+n+" is not accepted, the error is "+d),[2,t.reject(s)]);case 3:return f=p.sent(),this._eventError(f),[2,t.reject(f)];case 4:return[2]}})})},e.prototype._pinpointSendStopSession=function(e,t){if(dr){var n=this._generateBatchItemContext(e),r=this._config.region,i=n.ApplicationId,o=n.EventsRequest,s={secret_key:this._config.credentials.secretAccessKey,access_key:this._config.credentials.accessKeyId,session_token:this._config.credentials.sessionToken},a="https://pinpoint."+r+".amazonaws.com/v1/apps/"+i+"/events/legacy",u=JSON.stringify(o),c={url:a,body:u,method:"POST"},l={region:r,service:"mobiletargeting"},d=Mt.a.signUrl(c,s,l,null);return navigator.sendBeacon(d,u)?t.resolve("sendBeacon success"):t.reject("sendBeacon failure")}this._pinpointPutEvents(e,t)},e.prototype._retry=function(e,t){var n=e.config.resendLimit;e.resendLimit="number"==typeof e.resendLimit?e.resendLimit:n,e.resendLimit-- >0?(ur.debug("resending event "+e.eventName+" with "+e.resendLimit+" retry times left"),this._pinpointPutEvents(e,t)):ur.debug("retry times used up for event "+e.eventName)},e.prototype._updateEndpoint=function(e){return rr(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,d,f;return ir(this,function(p){switch(p.label){case 0:t=e.params,n=e.handlers,r=t.config,i=t.event,o=r.appId,s=r.endpointId,a=this._endpointRequest(r,Lt.a.transferKeyToLowerCase(i,[],["attributes","userAttributes","Attributes","UserAttributes"])),u={ApplicationId:o,EndpointId:s,EndpointRequest:a},p.label=1;case 1:return p.trys.push([1,3,,4]),c=new Sn(u),[4,this.pinpointClient.send(c)];case 2:return l=p.sent(),ur.debug("updateEndpoint success",l),this._endpointGenerating=!1,this._resumeBuffer(),n.resolve(l),[2];case 3:return d=p.sent(),f={err:d,update_params:u,endpointObject:e},[2,this._handleEndpointUpdateFailure(f)];case 4:return[2]}})})},e.prototype._handleEndpointUpdateFailure=function(e){return rr(this,void 0,void 0,function(){var t,n,r;return ir(this,function(i){return 403===(t=e.err,n=e.endpointObject,r=t.$metadata&&t.$metadata.httpStatusCode,ur.debug("updateEndpoint error",t),r)?[2,this._handleEndpointUpdateForbidden(e)]:cr.includes(r)?[2,this._retryEndpointUpdate(n,!0)]:(ur.error("updateEndpoint failed",t),n.handlers.reject(t),[2])})})},e.prototype._handleEndpointUpdateForbidden=function(e){var t=e.err,n=e.endpointObject,r=t.code,i=t.retryable;if("ExpiredTokenException"!==r&&!i)return n.handlers.reject(t);this._retryEndpointUpdate(n)},e.prototype._retryEndpointUpdate=function(e,t){void 0===t&&(t=!1),ur.debug("_retryEndpointUpdate",e);var n=e.params,r=n.config.resendLimit;if(n.resendLimit="number"==typeof n.resendLimit?n.resendLimit:r,n.resendLimit-- >0)return ur.debug("resending endpoint update "+n.event.eventId+" with "+n.resendLimit+" retry attempts remaining"),void(this._endpointBuffer.length?this._endpointBuffer.unshift(e):this._updateEndpoint(e));ur.warn("resending endpoint update "+n.event.eventId+" failed after "+n.config.resendLimit+" attempts"),this._endpointGenerating&&ur.error("Initial endpoint update failed. ")},e.prototype._initClients=function(e){return rr(this,void 0,void 0,function(){var t,n;return ir(this,function(r){return ur.debug("init clients"),this.pinpointClient&&this._config.credentials&&this._config.credentials.sessionToken===e.sessionToken&&this._config.credentials.identityId===e.identityId?(ur.debug("no change for aws credentials, directly return from init"),[2]):(t=this._config.credentials?this._config.credentials.identityId:null,this._config.credentials=e,n=this._config.region,ur.debug("init clients with credentials",e),this.pinpointClient=new Vn({region:n,credentials:e,customUserAgent:Object(jt.b)()}),this.pinpointClient.middlewareStack.addRelativeTo(function(e){return function(t){return delete t.request.headers["amz-sdk-invocation-id"],delete t.request.headers["amz-sdk-request"],e(t)}},{step:"finalizeRequest",relation:"after",toMiddleware:"retryMiddleware"}),this._bufferExists()&&t===e.identityId?this._updateBufferClient():this._initBuffer(),this._customizePinpointClientReq(),[2])})})},e.prototype._bufferExists=function(){return this._buffer&&this._buffer instanceof tr},e.prototype._initBuffer=function(){this._bufferExists()&&this._flushBuffer(),this._buffer=new tr(this.pinpointClient,this._config),this._endpointGenerating&&this._buffer.pause()},e.prototype._updateBufferClient=function(){this._bufferExists()&&this._buffer.updateClient(this.pinpointClient)},e.prototype._flushBuffer=function(){this._bufferExists()&&(this._buffer.flush(),this._buffer=null)},e.prototype._resumeBuffer=function(){this._bufferExists()&&this._buffer.resume()},e.prototype._customizePinpointClientReq=function(){},e.prototype._getEndpointId=function(e){return rr(this,void 0,void 0,function(){var t,n;return ir(this,function(r){switch(r.label){case 0:return[4,Gn.b.getItem(e)];case 1:return t=r.sent(),ur.debug("endpointId from cache",t,"type",a(t)),t||(t=Object(Wn.v1)(),n=(new Date).getTime()+31536e8,Gn.b.setItem(e,t,{expires:n,priority:1})),[2,t]}})})},e.prototype._endpointRequest=function(e,t){var n=e.credentials,r=this._clientInfo||{},i=e.clientContext||{},o=e.endpoint||{},s={appVersion:r.appVersion,make:r.make,model:r.model,modelVersion:r.version,platform:r.platform},a=(i.clientId,i.appTitle,i.appVersionName,i.appVersionCode,i.appPackageName,or(i,["clientId","appTitle","appVersionName","appVersionCode","appPackageName"])),u=t.address?"android"===r.platform?"GCM":"APNS":void 0,c=nr(nr(nr({channelType:u,requestId:Object(Wn.v1)(),effectiveDate:(new Date).toISOString()},o),t),{attributes:nr(nr({},o.attributes),t.attributes),demographic:nr(nr(nr(nr({},s),a),o.demographic),t.demographic),location:nr(nr({},o.location),t.location),metrics:nr(nr({},o.metrics),t.metrics),user:{userId:t.userId||o.userId||n.identityId,userAttributes:nr(nr({},o.userAttributes),t.userAttributes)}}),l=(c.userId,c.userAttributes,c.name,c.session,c.eventId,c.immediate,or(c,["userId","userAttributes","name","session","eventId","immediate"]));return Lt.a.transferKeyToUpperCase(l,[],["metrics","userAttributes","attributes"])},e.prototype._eventError=function(e){ur.error("record event failed.",e),ur.warn('Please ensure you have updated your Pinpoint IAM Policy with the Action: "mobiletargeting:PutEvents" in order to record events')},e.prototype._getCredentials=function(){return rr(this,void 0,void 0,function(){var e,t;return ir(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,Rt.a.get()];case 1:return(e=n.sent())?(ur.debug("set credentials for analytics",e),[2,Rt.a.shear(e)]):[2,null];case 2:return t=n.sent(),ur.debug("ensure credentials error",t),[2,null];case 3:return[2]}})})},e.category="Analytics",e.providerName="AWSPinpoint",e}()},function(e,t,n){"use strict";function r(e,t){function n(){this.constructor=e}if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Re(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function i(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})}function o(e,t){function n(n){return function(u){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,n[0]&&(a=0)),a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,u])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s}n.d(t,"a",function(){return Vt});var s,a,u,c,l,d,f,p,h,v,g,y,m,b,w,_,S,E,C,A,O,I,x,T,P,k,D,N,M,L,j,R,U,F,B,z,q,K,$,V,G,W,H,J,Y,Z,X,Q,ee,te,ne,re,ie,oe,se,ae,ue,ce,le,de,fe,pe,he,ve,ge,ye,me,be,we,_e,Se,Ee,Ce,Ae,Oe,Ie,xe,Te,Pe,ke,De,Ne,Me=n(48),Le=n(49),je=n(80),Re=function(e,t){return(Re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},Ue=function(){return(Ue=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.create,Object.create,(s||(s={})).filterSensitiveLog=function(e){return Ue({},e)},(a||(a={})).filterSensitiveLog=function(e){return Ue({},e)},(u||(u={})).filterSensitiveLog=function(e){return Ue({},e)},(c||(c={})).filterSensitiveLog=function(e){return Ue({},e)},(l||(l={})).filterSensitiveLog=function(e){return Ue({},e)},(d||(d={})).filterSensitiveLog=function(e){return Ue({},e)},(f||(f={})).filterSensitiveLog=function(e){return Ue({},e)},function(e){e.ACTIVE="ACTIVE",e.CREATING="CREATING",e.DELETING="DELETING"}(p||(p={})),(h||(h={})).filterSensitiveLog=function(e){return Ue({},e)},(v||(v={})).filterSensitiveLog=function(e){return Ue({},e)},(g||(g={})).filterSensitiveLog=function(e){return Ue({},e)},(y||(y={})).filterSensitiveLog=function(e){return Ue({},e)},(m||(m={})).filterSensitiveLog=function(e){return Ue({},e)},(b||(b={})).filterSensitiveLog=function(e){return Ue({},e)},(w||(w={})).filterSensitiveLog=function(e){return Ue({},e)},(_||(_={})).filterSensitiveLog=function(e){return Ue({},e)},(S||(S={})).filterSensitiveLog=function(e){return Ue({},e)},function(e){e.KMS="KMS",e.NONE="NONE"}(E||(E={})),function(e){e.ALL="ALL",e.INCOMING_BYTES="IncomingBytes",e.INCOMING_RECORDS="IncomingRecords",e.ITERATOR_AGE_MILLISECONDS="IteratorAgeMilliseconds",e.OUTGOING_BYTES="OutgoingBytes",e.OUTGOING_RECORDS="OutgoingRecords",e.READ_PROVISIONED_THROUGHPUT_EXCEEDED="ReadProvisionedThroughputExceeded",e.WRITE_PROVISIONED_THROUGHPUT_EXCEEDED="WriteProvisionedThroughputExceeded"}(C||(C={})),(A||(A={})).filterSensitiveLog=function(e){return Ue({},e)},(O||(O={})).filterSensitiveLog=function(e){return Ue({},e)},(I||(I={})).filterSensitiveLog=function(e){return Ue({},e)},function(e){e.ACTIVE="ACTIVE",e.CREATING="CREATING",e.DELETING="DELETING",e.UPDATING="UPDATING"}(x||(x={})),(T||(T={})).filterSensitiveLog=function(e){return Ue({},e)},(P||(P={})).filterSensitiveLog=function(e){return Ue({},e)},(k||(k={})).filterSensitiveLog=function(e){return Ue({},e)},(D||(D={})).filterSensitiveLog=function(e){return Ue({},e)},(N||(N={})).filterSensitiveLog=function(e){return Ue({},e)},(M||(M={})).filterSensitiveLog=function(e){return Ue({},e)},(L||(L={})).filterSensitiveLog=function(e){return Ue({},e)},(j||(j={})).filterSensitiveLog=function(e){return Ue({},e)},(R||(R={})).filterSensitiveLog=function(e){return Ue({},e)},(U||(U={})).filterSensitiveLog=function(e){return Ue({},e)},(F||(F={})).filterSensitiveLog=function(e){return Ue({},e)},(B||(B={})).filterSensitiveLog=function(e){return Ue({},e)},(z||(z={})).filterSensitiveLog=function(e){return Ue({},e)},(q||(q={})).filterSensitiveLog=function(e){return Ue({},e)},(K||(K={})).filterSensitiveLog=function(e){return Ue({},e)},($||($={})).filterSensitiveLog=function(e){return Ue({},e)},(V||(V={})).filterSensitiveLog=function(e){return Ue({},e)},(G||(G={})).filterSensitiveLog=function(e){return Ue({},e)},(W||(W={})).filterSensitiveLog=function(e){return Ue({},e)},(H||(H={})).filterSensitiveLog=function(e){return Ue({},e)},(J||(J={})).filterSensitiveLog=function(e){return Ue({},e)},(Y||(Y={})).filterSensitiveLog=function(e){return Ue({},e)},function(e){e.AFTER_SEQUENCE_NUMBER="AFTER_SEQUENCE_NUMBER",e.AT_SEQUENCE_NUMBER="AT_SEQUENCE_NUMBER",e.AT_TIMESTAMP="AT_TIMESTAMP",e.LATEST="LATEST",e.TRIM_HORIZON="TRIM_HORIZON"}(Z||(Z={})),(X||(X={})).filterSensitiveLog=function(e){return Ue({},e)},(Q||(Q={})).filterSensitiveLog=function(e){return Ue({},e)},(ee||(ee={})).filterSensitiveLog=function(e){return Ue({},e)},(te||(te={})).filterSensitiveLog=function(e){return Ue({},e)},function(e){e.AFTER_SHARD_ID="AFTER_SHARD_ID",e.AT_LATEST="AT_LATEST",e.AT_TIMESTAMP="AT_TIMESTAMP",e.AT_TRIM_HORIZON="AT_TRIM_HORIZON",e.FROM_TIMESTAMP="FROM_TIMESTAMP",e.FROM_TRIM_HORIZON="FROM_TRIM_HORIZON"}(ne||(ne={})),(re||(re={})).filterSensitiveLog=function(e){return Ue({},e)},(ie||(ie={})).filterSensitiveLog=function(e){return Ue({},e)},(oe||(oe={})).filterSensitiveLog=function(e){return Ue({},e)},(se||(se={})).filterSensitiveLog=function(e){return Ue({},e)},(ae||(ae={})).filterSensitiveLog=function(e){return Ue({},e)},(ue||(ue={})).filterSensitiveLog=function(e){return Ue({},e)},(ce||(ce={})).filterSensitiveLog=function(e){return Ue({},e)},(le||(le={})).filterSensitiveLog=function(e){return Ue({},e)},(de||(de={})).filterSensitiveLog=function(e){return Ue({},e)},(fe||(fe={})).filterSensitiveLog=function(e){return Ue({},e)},(pe||(pe={})).filterSensitiveLog=function(e){return Ue({},e)},(he||(he={})).filterSensitiveLog=function(e){return Ue({},e)},(ve||(ve={})).filterSensitiveLog=function(e){return Ue({},e)},(ge||(ge={})).filterSensitiveLog=function(e){return Ue({},e)},(ye||(ye={})).filterSensitiveLog=function(e){return Ue({},e)},(me||(me={})).filterSensitiveLog=function(e){return Ue({},e)},(be||(be={})).filterSensitiveLog=function(e){return Ue({},e)},(we||(we={})).filterSensitiveLog=function(e){return Ue({},e)},(_e||(_e={})).filterSensitiveLog=function(e){return Ue({},e)},(Se||(Se={})).filterSensitiveLog=function(e){return Ue({},e)},(Ee||(Ee={})).filterSensitiveLog=function(e){return Ue({},e)},(Ce||(Ce={})).filterSensitiveLog=function(e){return Ue({},e)},(Ae||(Ae={})).filterSensitiveLog=function(e){return Ue({},e)},(Oe||(Oe={})).filterSensitiveLog=function(e){return Ue({},e)},(Ie||(Ie={})).filterSensitiveLog=function(e){return Ue({},e)},(xe||(xe={})).filterSensitiveLog=function(e){return Ue({},e)},function(e){e.visit=function(e,t){return void 0!==e.SubscribeToShardEvent?t.SubscribeToShardEvent(e.SubscribeToShardEvent):void 0!==e.ResourceNotFoundException?t.ResourceNotFoundException(e.ResourceNotFoundException):void 0!==e.ResourceInUseException?t.ResourceInUseException(e.ResourceInUseException):void 0!==e.KMSDisabledException?t.KMSDisabledException(e.KMSDisabledException):void 0!==e.KMSInvalidStateException?t.KMSInvalidStateException(e.KMSInvalidStateException):void 0!==e.KMSAccessDeniedException?t.KMSAccessDeniedException(e.KMSAccessDeniedException):void 0!==e.KMSNotFoundException?t.KMSNotFoundException(e.KMSNotFoundException):void 0!==e.KMSOptInRequired?t.KMSOptInRequired(e.KMSOptInRequired):void 0!==e.KMSThrottlingException?t.KMSThrottlingException(e.KMSThrottlingException):void 0!==e.InternalFailureException?t.InternalFailureException(e.InternalFailureException):t._(e.$unknown[0],e.$unknown[1])},e.filterSensitiveLog=function(e){var t;return void 0!==e.SubscribeToShardEvent?{SubscribeToShardEvent:xe.filterSensitiveLog(e.SubscribeToShardEvent)}:void 0!==e.ResourceNotFoundException?{ResourceNotFoundException:l.filterSensitiveLog(e.ResourceNotFoundException)}:void 0!==e.ResourceInUseException?{ResourceInUseException:c.filterSensitiveLog(e.ResourceInUseException)}:void 0!==e.KMSDisabledException?{KMSDisabledException:V.filterSensitiveLog(e.KMSDisabledException)}:void 0!==e.KMSInvalidStateException?{KMSInvalidStateException:G.filterSensitiveLog(e.KMSInvalidStateException)}:void 0!==e.KMSAccessDeniedException?{KMSAccessDeniedException:$.filterSensitiveLog(e.KMSAccessDeniedException)}:void 0!==e.KMSNotFoundException?{KMSNotFoundException:W.filterSensitiveLog(e.KMSNotFoundException)}:void 0!==e.KMSOptInRequired?{KMSOptInRequired:H.filterSensitiveLog(e.KMSOptInRequired)}:void 0!==e.KMSThrottlingException?{KMSThrottlingException:J.filterSensitiveLog(e.KMSThrottlingException)}:void 0!==e.InternalFailureException?{InternalFailureException:te.filterSensitiveLog(e.InternalFailureException)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0}}(Te||(Te={})),(Pe||(Pe={})).filterSensitiveLog=function(e){return Ue(Ue({},e),e.EventStream&&{EventStream:"STREAMING_CONTENT"})},function(e){e.UNIFORM_SCALING="UNIFORM_SCALING"}(ke||(ke={})),(De||(De={})).filterSensitiveLog=function(e){return Ue({},e)},(Ne||(Ne={})).filterSensitiveLog=function(e){return Ue({},e)};var Fe=n(3),Be=function(e,t){return i(void 0,void 0,void 0,function(){var n,r,i,s,a,u,c,l,d,f,p,h,v,g,y,m;return o(this,function(o){switch(o.label){case 0:return r=[Ue({},e)],m={},[4,ft(e.body,t)];case 1:switch(n=Ue.apply(void 0,r.concat([(m.body=o.sent(),m)])),s="UnknownError",s=pt(e,n.body)){case"InvalidArgumentException":case"com.amazonaws.kinesis#InvalidArgumentException":return[3,2];case"KMSAccessDeniedException":case"com.amazonaws.kinesis#KMSAccessDeniedException":return[3,4];case"KMSDisabledException":case"com.amazonaws.kinesis#KMSDisabledException":return[3,6];case"KMSInvalidStateException":case"com.amazonaws.kinesis#KMSInvalidStateException":return[3,8];case"KMSNotFoundException":case"com.amazonaws.kinesis#KMSNotFoundException":return[3,10];case"KMSOptInRequired":case"com.amazonaws.kinesis#KMSOptInRequired":return[3,12];case"KMSThrottlingException":case"com.amazonaws.kinesis#KMSThrottlingException":return[3,14];case"ProvisionedThroughputExceededException":case"com.amazonaws.kinesis#ProvisionedThroughputExceededException":return[3,16];case"ResourceNotFoundException":case"com.amazonaws.kinesis#ResourceNotFoundException":return[3,18]}return[3,20];case 2:return a=[{}],[4,ze(n,t)];case 3:return i=Ue.apply(void 0,[Ue.apply(void 0,a.concat([o.sent()])),{name:s,$metadata:ct(e)}]),[3,21];case 4:return u=[{}],[4,qe(n,t)];case 5:return i=Ue.apply(void 0,[Ue.apply(void 0,u.concat([o.sent()])),{name:s,$metadata:ct(e)}]),[3,21];case 6:return c=[{}],[4,Ke(n,t)];case 7:return i=Ue.apply(void 0,[Ue.apply(void 0,c.concat([o.sent()])),{name:s,$metadata:ct(e)}]),[3,21];case 8:return l=[{}],[4,$e(n,t)];case 9:return i=Ue.apply(void 0,[Ue.apply(void 0,l.concat([o.sent()])),{name:s,$metadata:ct(e)}]),[3,21];case 10:return d=[{}],[4,Ve(n,t)];case 11:return i=Ue.apply(void 0,[Ue.apply(void 0,d.concat([o.sent()])),{name:s,$metadata:ct(e)}]),[3,21];case 12:return f=[{}],[4,Ge(n,t)];case 13:return i=Ue.apply(void 0,[Ue.apply(void 0,f.concat([o.sent()])),{name:s,$metadata:ct(e)}]),[3,21];case 14:return p=[{}],[4,We(n,t)];case 15:return i=Ue.apply(void 0,[Ue.apply(void 0,p.concat([o.sent()])),{name:s,$metadata:ct(e)}]),[3,21];case 16:return h=[{}],[4,He(n,t)];case 17:return i=Ue.apply(void 0,[Ue.apply(void 0,h.concat([o.sent()])),{name:s,$metadata:ct(e)}]),[3,21];case 18:return v=[{}],[4,Je(n,t)];case 19:return i=Ue.apply(void 0,[Ue.apply(void 0,v.concat([o.sent()])),{name:s,$metadata:ct(e)}]),[3,21];case 20:g=n.body,s=g.code||g.Code||s,i=Ue(Ue({},g),{name:""+s,message:g.message||g.Message||s,$fault:"client",$metadata:ct(e)}),o.label=21;case 21:return y=i.message||i.Message||s,i.message=y,delete i.Message,[2,Promise.reject(Object.assign(new Error(y),i))]}})})},ze=function(e,t){return i(void 0,void 0,void 0,function(){var n,r;return o(this,function(i){return n=e.body,r=Xe(n,t),[2,Ue({name:"InvalidArgumentException",$fault:"client",$metadata:ct(e)},r)]})})},qe=function(e,t){return i(void 0,void 0,void 0,function(){var n,r;return o(this,function(i){return n=e.body,r=Qe(n,t),[2,Ue({name:"KMSAccessDeniedException",$fault:"client",$metadata:ct(e)},r)]})})},Ke=function(e,t){return i(void 0,void 0,void 0,function(){var n,r;return o(this,function(i){return n=e.body,r=et(n,t),[2,Ue({name:"KMSDisabledException",$fault:"client",$metadata:ct(e)},r)]})})},$e=function(e,t){return i(void 0,void 0,void 0,function(){var n,r;return o(this,function(i){return n=e.body,r=tt(n,t),[2,Ue({name:"KMSInvalidStateException",$fault:"client",$metadata:ct(e)},r)]})})},Ve=function(e,t){return i(void 0,void 0,void 0,function(){var n,r;return o(this,function(i){return n=e.body,r=nt(n,t),[2,Ue({name:"KMSNotFoundException",$fault:"client",$metadata:ct(e)},r)]})})},Ge=function(e,t){return i(void 0,void 0,void 0,function(){var n,r;return o(this,function(i){return n=e.body,r=rt(n,t),[2,Ue({name:"KMSOptInRequired",$fault:"client",$metadata:ct(e)},r)]})})},We=function(e,t){return i(void 0,void 0,void 0,function(){var n,r;return o(this,function(i){return n=e.body,r=it(n,t),[2,Ue({name:"KMSThrottlingException",$fault:"client",$metadata:ct(e)},r)]})})},He=function(e,t){return i(void 0,void 0,void 0,function(){var n,r;return o(this,function(i){return n=e.body,r=ot(n,t),[2,Ue({name:"ProvisionedThroughputExceededException",$fault:"client",$metadata:ct(e)},r)]})})},Je=function(e,t){return i(void 0,void 0,void 0,function(){var n,r;return o(this,function(i){return n=e.body,r=ut(n,t),[2,Ue({name:"ResourceNotFoundException",$fault:"client",$metadata:ct(e)},r)]})})},Ye=function(e,t){return Ue(Ue({},void 0!==e.Records&&null!==e.Records&&{Records:Ze(e.Records,t)}),void 0!==e.StreamName&&null!==e.StreamName&&{StreamName:e.StreamName})},Ze=function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:function(e,t){return Ue(Ue(Ue({},void 0!==e.Data&&null!==e.Data&&{Data:t.base64Encoder(e.Data)}),void 0!==e.ExplicitHashKey&&null!==e.ExplicitHashKey&&{ExplicitHashKey:e.ExplicitHashKey}),void 0!==e.PartitionKey&&null!==e.PartitionKey&&{PartitionKey:e.PartitionKey})}(e,t)})},Xe=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Qe=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},et=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},tt=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},nt=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},rt=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},it=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},ot=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},st=function(e,t){return{EncryptionType:void 0!==e.EncryptionType&&null!==e.EncryptionType?e.EncryptionType:void 0,FailedRecordCount:void 0!==e.FailedRecordCount&&null!==e.FailedRecordCount?e.FailedRecordCount:void 0,Records:void 0!==e.Records&&null!==e.Records?at(e.Records,t):void 0}},at=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:function(e,t){return{ErrorCode:void 0!==e.ErrorCode&&null!==e.ErrorCode?e.ErrorCode:void 0,ErrorMessage:void 0!==e.ErrorMessage&&null!==e.ErrorMessage?e.ErrorMessage:void 0,SequenceNumber:void 0!==e.SequenceNumber&&null!==e.SequenceNumber?e.SequenceNumber:void 0,ShardId:void 0!==e.ShardId&&null!==e.ShardId?e.ShardId:void 0}}(e)})},ut=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},ct=function(e){var t;return{httpStatusCode:e.statusCode,requestId:null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},lt=function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)},dt=function(e,t,n,r,s){return i(void 0,void 0,void 0,function(){var i,a,u,c,l,d;return o(this,function(o){switch(o.label){case 0:return[4,e.endpoint()];case 1:return i=o.sent(),a=i.hostname,u=i.protocol,c=void 0===u?"https":u,l=i.port,d={protocol:c,hostname:a,port:l,method:"POST",path:n,headers:t},void 0!==r&&(d.hostname=r),void 0!==s&&(d.body=s),[2,new Fe.a(d)]}})})},ft=function(e,t){return function(e,t){return lt(e,t).then(function(e){return t.utf8Encoder(e)})}(e,t).then(function(e){return e.length?JSON.parse(e):{}})},pt=function(e,t){var n,r,i=function(e){var t=e;return t.indexOf(":")>=0&&(t=t.split(":")[0]),t.indexOf("#")>=0&&(t=t.split("#")[1]),t},o=(n=e.headers,r="x-amzn-errortype",Object.keys(n).find(function(e){return e.toLowerCase()===r.toLowerCase()}));return void 0!==o?i(e.headers[o]):void 0!==t.code?i(t.code):void 0!==t.__type?i(t.__type):""},ht=n(10),vt=n(1),gt=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return r(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(ht.a)(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"KinesisClient",commandName:"PutRecordsCommand",inputFilterSensitiveLog:ye.filterSensitiveLog,outputFilterSensitiveLog:be.filterSensitiveLog},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},i)},t.prototype.serialize=function(e,t){return function(e,t){return i(void 0,void 0,void 0,function(){var n,r;return o(this,function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Kinesis_20131202.PutRecords"},r=JSON.stringify(Ye(e,t)),[2,dt(t,n,"/",void 0,r)]})})}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return i(void 0,void 0,void 0,function(){var n,r,i;return o(this,function(o){switch(o.label){case 0:return e.statusCode>=300?[2,Be(e,t)]:[4,ft(e.body,t)];case 1:return n=o.sent(),r=st(n,t),i=Ue({$metadata:ct(e)},r),[2,Promise.resolve(i)]}})})}(e,t)},t}(vt.b),yt=n(180),mt=n(42),bt=n(97),wt=n(22),_t=n(45),St=n(14),Et=n(18),Ct=n(43),At=n(44),Ot=n(16),It=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),xt=new Set(["cn-north-1","cn-northwest-1"]),Tt=new Set(["us-iso-east-1"]),Pt=new Set(["us-isob-east-1"]),kt=new Set(["us-gov-east-1","us-gov-west-1"]),Dt={apiVersion:"2013-12-02",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,t){var n=void 0;switch(e){case"af-south-1":n={hostname:"kinesis.af-south-1.amazonaws.com",partition:"aws"};break;case"ap-east-1":n={hostname:"kinesis.ap-east-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-1":n={hostname:"kinesis.ap-northeast-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-2":n={hostname:"kinesis.ap-northeast-2.amazonaws.com",partition:"aws"};break;case"ap-south-1":n={hostname:"kinesis.ap-south-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-1":n={hostname:"kinesis.ap-southeast-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-2":n={hostname:"kinesis.ap-southeast-2.amazonaws.com",partition:"aws"};break;case"ca-central-1":n={hostname:"kinesis.ca-central-1.amazonaws.com",partition:"aws"};break;case"cn-north-1":n={hostname:"kinesis.cn-north-1.amazonaws.com.cn",partition:"aws-cn"};break;case"cn-northwest-1":n={hostname:"kinesis.cn-northwest-1.amazonaws.com.cn",partition:"aws-cn"};break;case"eu-central-1":n={hostname:"kinesis.eu-central-1.amazonaws.com",partition:"aws"};break;case"eu-north-1":n={hostname:"kinesis.eu-north-1.amazonaws.com",partition:"aws"};break;case"eu-south-1":n={hostname:"kinesis.eu-south-1.amazonaws.com",partition:"aws"};break;case"eu-west-1":n={hostname:"kinesis.eu-west-1.amazonaws.com",partition:"aws"};break;case"eu-west-2":n={hostname:"kinesis.eu-west-2.amazonaws.com",partition:"aws"};break;case"eu-west-3":n={hostname:"kinesis.eu-west-3.amazonaws.com",partition:"aws"};break;case"fips-us-east-1":n={hostname:"kinesis-fips.us-east-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"fips-us-east-2":n={hostname:"kinesis-fips.us-east-2.amazonaws.com",partition:"aws",signingRegion:"us-east-2"};break;case"fips-us-west-1":n={hostname:"kinesis-fips.us-west-1.amazonaws.com",partition:"aws",signingRegion:"us-west-1"};break;case"fips-us-west-2":n={hostname:"kinesis-fips.us-west-2.amazonaws.com",partition:"aws",signingRegion:"us-west-2"};break;case"me-south-1":n={hostname:"kinesis.me-south-1.amazonaws.com",partition:"aws"};break;case"sa-east-1":n={hostname:"kinesis.sa-east-1.amazonaws.com",partition:"aws"};break;case"us-east-1":n={hostname:"kinesis.us-east-1.amazonaws.com",partition:"aws"};break;case"us-east-2":n={hostname:"kinesis.us-east-2.amazonaws.com",partition:"aws"};break;case"us-gov-east-1":n={hostname:"kinesis.us-gov-east-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-east-1"};break;case"us-gov-west-1":n={hostname:"kinesis.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"us-iso-east-1":n={hostname:"kinesis.us-iso-east-1.c2s.ic.gov",partition:"aws-iso"};break;case"us-isob-east-1":n={hostname:"kinesis.us-isob-east-1.sc2s.sgov.gov",partition:"aws-iso-b"};break;case"us-west-1":n={hostname:"kinesis.us-west-1.amazonaws.com",partition:"aws"};break;case"us-west-2":n={hostname:"kinesis.us-west-2.amazonaws.com",partition:"aws"};break;default:It.has(e)&&(n={hostname:"kinesis.{region}.amazonaws.com".replace("{region}",e),partition:"aws"}),xt.has(e)&&(n={hostname:"kinesis.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),Tt.has(e)&&(n={hostname:"kinesis.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),Pt.has(e)&&(n={hostname:"kinesis.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),kt.has(e)&&(n={hostname:"kinesis.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}),void 0===n&&(n={hostname:"kinesis.{region}.amazonaws.com".replace("{region}",e),partition:"aws"})}return Promise.resolve(Ue({signingService:"kinesis"},n))},serviceId:"Kinesis",urlParser:n(47).a},Nt=Ue(Ue({},Dt),{runtime:"browser",base64Decoder:Et.a,base64Encoder:Et.b,bodyLengthChecker:Ct.a,credentialDefaultProvider:function(e){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:Object(At.a)({serviceId:Dt.serviceId,clientVersion:yt.version}),eventStreamSerdeProvider:bt.a,maxAttempts:St.a,region:Object(_t.a)("Region is missing"),requestHandler:new wt.a,sha256:mt.Sha256,streamCollector:wt.b,utf8Decoder:Ot.a,utf8Encoder:Ot.b}),Mt=n(24),Lt=n(99),jt=n(41),Rt=n(21),Ut=n(46),Ft=n(27),Bt=n(23),zt=function(e){function t(t){var n=this,r=Ue(Ue({},Nt),t),i=Object(Mt.b)(r),o=Object(Mt.a)(i),s=Object(Ft.b)(o),a=Object(St.c)(s),u=Object(Rt.b)(a),c=Object(Bt.b)(u),l=Object(Lt.a)(c);return(n=e.call(this,l)||this).config=l,n.middlewareStack.use(Object(Ft.a)(n.config)),n.middlewareStack.use(Object(St.b)(n.config)),n.middlewareStack.use(Object(jt.a)(n.config)),n.middlewareStack.use(Object(Rt.a)(n.config)),n.middlewareStack.use(Object(Ut.a)(n.config)),n.middlewareStack.use(Object(Bt.a)(n.config)),n}
return r(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(vt.a),qt=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},Kt=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},$t=new Me.a("AWSKinesisProvider"),Vt=function(){function e(e){this._buffer=[],this._config=e||{},this._config.bufferSize=this._config.bufferSize||1e3,this._config.flushSize=this._config.flushSize||100,this._config.flushInterval=this._config.flushInterval||5e3,this._config.resendLimit=this._config.resendLimit||5,this._setupTimer()}return e.prototype._setupTimer=function(){var e=this;this._timer&&clearInterval(this._timer);var t=this._config,n=t.flushSize,r=t.flushInterval;this._timer=setInterval(function(){for(var t=e._buffer.length<n?e._buffer.length:n,r=[],i=0;i<t;i+=1){var o=e._buffer.shift();r.push(o)}e._sendFromBuffer(r)},r)},e.prototype.getCategory=function(){return"Analytics"},e.prototype.getProviderName=function(){return"AWSKinesis"},e.prototype.configure=function(e){$t.debug("configure Analytics",e);var t=e||{};return this._config=Object.assign({},this._config,t),this._setupTimer(),this._config},e.prototype.record=function(e){return qt(this,void 0,void 0,function(){var t;return Kt(this,function(n){switch(n.label){case 0:return[4,this._getCredentials()];case 1:return(t=n.sent())?(Object.assign(e,{config:this._config,credentials:t}),[2,this._putToBuffer(e)]):[2,Promise.resolve(!1)]}})})},e.prototype.updateEndpoint=function(){return $t.debug("updateEndpoint is not implemented in Kinesis provider"),Promise.resolve(!0)},e.prototype._putToBuffer=function(e){return this._buffer.length<1e3?(this._buffer.push(e),Promise.resolve(!0)):($t.debug("exceed analytics events buffer size"),Promise.reject(!1))},e.prototype._sendFromBuffer=function(e){for(var t=this,n=[],r=null,i=[],o=0;o<e.length;o+=1){var s=e[o].credentials;0===o?(i.push(e[o]),r=s):s.sessionToken===r.sessionToken&&s.identityId===r.identityId?($t.debug("no change for cred, put event in the same group"),i.push(e[o])):(n.push(i),(i=[]).push(e[o]),r=s)}n.push(i),n.map(function(e){t._sendEvents(e)})},e.prototype._sendEvents=function(e){var t=this;if(0!==e.length){var n=e[0],r=n.config,i=n.credentials;if(!this._init(r,i))return!1;var o={};e.map(function(e){var t=e.event,n=t.streamName;void 0===o[n]&&(o[n]=[]);var r=t.data&&"string"!=typeof t.data?JSON.stringify(t.data):t.data,s={Data:Object(Ot.a)(r),PartitionKey:t.partitionKey||"partition-"+i.identityId};o[n].push(s)}),Object.keys(o).map(function(e){return qt(t,void 0,void 0,function(){var t,n;return Kt(this,function(r){switch(r.label){case 0:$t.debug("putting records to kinesis with records",o[e]),r.label=1;case 1:return r.trys.push([1,3,,4]),t=new gt({Records:o[e],StreamName:e}),[4,this._kinesis.send(t)];case 2:return r.sent(),$t.debug("Upload records to stream",e),[3,4];case 3:return n=r.sent(),$t.debug("Failed to upload records to Kinesis",n),[3,4];case 4:return[2]}})})})}},e.prototype._init=function(e,t){if($t.debug("init clients"),this._kinesis&&this._config.credentials&&this._config.credentials.sessionToken===t.sessionToken&&this._config.credentials.identityId===t.identityId)return $t.debug("no change for analytics config, directly return from init"),!0;this._config.credentials=t;var n=e.region,r=e.endpoint;return this._initKinesis(n,r,t)},e.prototype._initKinesis=function(e,t,n){return $t.debug("initialize kinesis with credentials",n),this._kinesis=new zt({region:e,credentials:n,customUserAgent:Object(Le.b)(),endpoint:t}),!0},e.prototype._getCredentials=function(){var e=this;return je.a.get().then(function(t){return t?($t.debug("set credentials for analytics",e._config.credentials),je.a.shear(t)):null}).catch(function(e){return $t.debug("ensure credentials error",e),null})},e}()},function(e,t,n){"use strict";function r(e,t){void 0===t&&(t={});var n=function(e){return e&&"j"===e[0]&&":"===e[1]?e.substr(2):e}(e);if(function(e,t){return void 0===t&&(t=!e||"{"!==e[0]&&"["!==e[0]&&'"'!==e[0]),!t}(n,t.doNotParse))try{return JSON.parse(n)}catch(e){}return e}n.d(t,"a",function(){return c});var i=n(68),o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},s=function(){function e(e,t){var n=this;this.changeListeners=[],this.HAS_DOCUMENT_COOKIE=!1,this.cookies=function(e,t){return"string"==typeof e?i.parse(e,t):"object"==typeof e&&null!==e?e:{}}(e,t),new Promise(function(){n.HAS_DOCUMENT_COOKIE="object"==typeof document&&"string"==typeof document.cookie}).catch(function(){})}return e.prototype._updateBrowserValues=function(e){this.HAS_DOCUMENT_COOKIE&&(this.cookies=i.parse(document.cookie,e))},e.prototype._emitChange=function(e){for(var t=0;t<this.changeListeners.length;++t)this.changeListeners[t](e)},e.prototype.get=function(e,t,n){return void 0===t&&(t={}),this._updateBrowserValues(n),r(this.cookies[e],t)},e.prototype.getAll=function(e,t){void 0===e&&(e={}),this._updateBrowserValues(t);var n={};for(var i in this.cookies)n[i]=r(this.cookies[i],e);return n},e.prototype.set=function(e,t,n){var r;"object"==typeof t&&(t=JSON.stringify(t)),this.cookies=o(o({},this.cookies),((r={})[e]=t,r)),this.HAS_DOCUMENT_COOKIE&&(document.cookie=i.serialize(e,t,n)),this._emitChange({name:e,value:t,options:n})},e.prototype.remove=function(e,t){var n=t=o(o({},t),{expires:new Date(1970,1,1,0,0,1),maxAge:0});this.cookies=o({},this.cookies),delete this.cookies[e],this.HAS_DOCUMENT_COOKIE&&(document.cookie=i.serialize(e,"",n)),this._emitChange({name:e,value:void 0,options:t})},e.prototype.addChangeListener=function(e){this.changeListeners.push(e)},e.prototype.removeChangeListener=function(e){var t=this.changeListeners.indexOf(e);t>=0&&this.changeListeners.splice(t,1)},e}(),a=n(34),u=Object(a.b)().isBrowser,c=function(){function e(e){void 0===e&&(e={}),this.cookies=new s,this.store=u?window.localStorage:Object.create(null),this.cookies=e.req?new s(e.req.headers.cookie):new s,Object.assign(this.store,this.cookies.getAll())}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.entries(this.store).length},enumerable:!0,configurable:!0}),e.prototype.clear=function(){var e=this;Array.from(new Array(this.length)).map(function(t,n){return e.key(n)}).forEach(function(t){return e.removeItem(t)})},e.prototype.getItem=function(e){return this.getLocalItem(e)},e.prototype.getLocalItem=function(e){return Object.prototype.hasOwnProperty.call(this.store,e)?this.store[e]:null},e.prototype.getUniversalItem=function(e){return this.cookies.get(e)},e.prototype.key=function(e){return Object.keys(this.store)[e]},e.prototype.removeItem=function(e){this.removeLocalItem(e),this.removeUniversalItem(e)},e.prototype.removeLocalItem=function(e){delete this.store[e]},e.prototype.removeUniversalItem=function(e){this.cookies.remove(e,{path:"/"})},e.prototype.setItem=function(e,t){switch(this.setLocalItem(e,t),e.split(".").pop()){case"LastAuthUser":case"accessToken":case"refreshToken":case"idToken":u?this.setUniversalItem(e,t):this.setLocalItem(e,t)}},e.prototype.setLocalItem=function(e,t){this.store[e]=t},e.prototype.setUniversalItem=function(e,t){this.cookies.set(e,t,{path:"/",sameSite:!0,secure:"localhost"!==window.location.hostname})},e}()},function(e,t,n){var r,i,o;e.exports=(o=n(38),i=(r=o).lib.WordArray,r.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var i=[],o=0;o<n;o+=3)for(var s=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,a=0;a<4&&o+.75*a<n;a++)i.push(r.charAt(s>>>6*(3-a)&63));var u=r.charAt(64);if(u)for(;i.length%4;)i.push(u);return i.join("")},parse:function(e){var t=e.length,n=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var o=0;o<n.length;o++)r[n.charCodeAt(o)]=o}var s=n.charAt(64);if(s){var a=e.indexOf(s);-1!==a&&(t=a)}return function(e,t,n){for(var r=[],o=0,s=0;s<t;s++)if(s%4){var a=n[e.charCodeAt(s-1)]<<s%4*2|n[e.charCodeAt(s)]>>>6-s%4*2;r[o>>>2]|=a<<24-o%4*8,o++}return i.create(r,o)}(e,t,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},o.enc.Base64)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(2).__exportStar(n(246),t)},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return r}),n.d(t,"b",function(){return A});var r,i,o=n(52),s=n(9),a=n(59),u=n(26),c=n(48),l=n(405),d=n(78),f=n(29),p=n(15),h=n(6),v=n(8),g=n(11),y=n(4),m=n(65),b=function(){return(b=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},w=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},_=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},S=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},E=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(S(arguments[t]));return e},C=new c.a("DataStore");!function(e){e.CONNECTED="CONNECTED"}(r||(r={})),function(e){e[e.none=0]="none",e[e.unauth=1]="unauth",e[e.auth=2]="auth"}(i||(i={}));var A=function(){function t(e,t,n,r,i,s){void 0===n&&(n={}),void 0===s&&(s={Auth:a.a,API:o.a,Cache:u.b}),this.schema=e,this.syncPredicates=t,this.amplifyConfig=n,this.authModeStrategy=r,this.errorHandler=i,this.amplifyContext=s,this.typeQuery=new WeakMap,this.buffer=[],this.runningProcesses=new l.a}return t.prototype.buildSubscription=function(e,t,n,r,i,o,s){var a=this.amplifyConfig.aws_appsync_authenticationType,u=this.getAuthorizationInfo(t,r,a,i,o,s)||{},c=u.isOwner,l=u.ownerField,d=u.ownerValue,f=S(Object(v.c)(e,t,n,c,l),3);return{authMode:s,opType:f[0],opName:f[1],query:f[2],isOwner:c,ownerField:l,ownerValue:d}},t.prototype.getAuthorizationInfo=function(e,t,n,r,o,a){void 0===r&&(r={}),void 0===o&&(o={});var u=Object(v.e)(e);if(a===s.c.AWS_IAM&&u.find(function(e){return"private"===e.authStrategy&&"iam"===e.provider})&&t===i.unauth)return null;var c,l=u.filter(function(e){return"groups"===e.authStrategy&&["userPools","oidc"].includes(e.provider)});return a!==s.c.AMAZON_COGNITO_USER_POOLS&&a!==s.c.OPENID_CONNECT||!l.find(function(e){var t=Object(v.k)(r,e),n=Object(v.k)(o,e);return E(t,n).find(function(t){return e.groups.find(function(e){return e===t})})})?((a===s.c.AMAZON_COGNITO_USER_POOLS?u.filter(function(e){return"owner"===e.authStrategy&&"userPools"===e.provider}):[]).forEach(function(e){var t=r[e.identityClaim];t&&(c={authMode:s.c.AMAZON_COGNITO_USER_POOLS,isOwner:!e.areSubscriptionsPublic,ownerField:e.ownerField,ownerValue:t})}),c||((a===s.c.OPENID_CONNECT?u.filter(function(e){return"owner"===e.authStrategy&&"oidc"===e.provider}):[]).forEach(function(e){var t=o[e.identityClaim];t&&(c={authMode:s.c.OPENID_CONNECT,isOwner:!e.areSubscriptionsPublic,ownerField:e.ownerField,ownerValue:t})}),c||{authMode:a||n,isOwner:!1})):{authMode:a,isOwner:!1}},t.prototype.hubQueryCompletionListener=function(e,t){t.payload.event===f.a.SUBSCRIPTION_ACK&&e()},t.prototype.start=function(){var t=this;return[new p.a(function(n){var o,s,a=[],u={},c=i.none;return t.runningProcesses.add(function(){return w(t,void 0,void 0,function(){var t,l,p,E,A,O,I,x,T,P,k=this;return _(this,function(D){switch(D.label){case 0:return D.trys.push([0,2,,3]),[4,this.amplifyContext.Auth.currentCredentials()];case 1:return t=D.sent(),c=t.authenticated?i.auth:i.unauth,[3,3];case 2:return D.sent(),[3,3];case 3:return D.trys.push([3,5,,6]),[4,this.amplifyContext.Auth.currentSession()];case 4:return l=D.sent(),o=l.getIdToken().decodePayload(),[3,6];case 5:return D.sent(),[3,6];case 6:if(D.trys.push([6,11,,12]),p=this.amplifyConfig,E=p.aws_cognito_region,A=p.Auth,!E||A&&!A.region)throw"Auth is not configured";return O=void 0,[4,this.amplifyContext.Cache.getItem("federatedInfo")];case 7:return(I=D.sent())?(O=I.token,[3,10]):[3,8];case 8:return[4,this.amplifyContext.Auth.currentAuthenticatedUser()];case 9:(x=D.sent())&&(O=x.token),D.label=10;case 10:return O&&(T=O.split(".")[1],s=JSON.parse(e.from(T,"base64").toString("utf8"))),[3,12];case 11:return P=D.sent(),C.debug("error getting OIDC JWT",P),[3,12];case 12:return Object.values(this.schema.namespaces).forEach(function(e){Object.values(e.models).filter(function(e){return e.syncable}).forEach(function(t){return k.runningProcesses.isOpen&&k.runningProcesses.add(function(){return w(k,void 0,void 0,function(){var r,i,l,p,E,A,O,I,x=this;return _(this,function(T){switch(T.label){case 0:return[4,Object(v.i)({authModeStrategy:this.authModeStrategy,defaultAuthMode:this.amplifyConfig.aws_appsync_authenticationType,modelName:t.name,schema:this.schema})];case 1:return r=T.sent(),i=r.READ,u=b(b({},u),((A={})[t.name]=((O={})[v.a.CREATE]=[],O[v.a.UPDATE]=[],O[v.a.DELETE]=[],O),A)),l=[v.a.CREATE,v.a.UPDATE,v.a.DELETE],(I={})[v.a.CREATE]=0,I[v.a.UPDATE]=0,I[v.a.DELETE]=0,p=I,E=function(r){return w(x,void 0,void 0,function(){var l,A,O,I,x,T,P,k,D,N,M,L,j,R=this;return _(this,function(U){switch(U.label){case 0:return l=this.buildSubscription(e,t,r,c,o,s,i[p[r]]),A=l.opType,O=l.opName,I=l.query,x=l.isOwner,T=l.ownerField,P=l.ownerValue,k=l.authMode,[4,Object(v.j)(k,this.amplifyConfig)];case 1:if(D=U.sent(),N={},x){if(!P)return n.error("Owner field required, sign in is needed in order to perform this operation"),[2];N[T]=P}return C.debug("Attempting "+r+" subscription with authMode: "+i[p[r]]),M=y.i,L=this.amplifyContext.API.graphql(b(b({query:I,variables:N},{authMode:k}),{authToken:D,userAgentSuffix:M})),u[t.name][A].push(L.map(function(e){return e.value}).subscribe({next:function(e){var n=e.data,r=e.errors;if(Array.isArray(r)&&r.length>0){var i=r.map(function(e){return e.message});return C.warn("Skipping incoming subscription. Messages: "+i.join("\n")),void R.drainBuffer()}var o=g.a.getPredicates(R.syncPredicates.get(t),!1),s=n[O];R.passesPredicateValidation(s,o)&&R.pushToBuffer(A,t,s),R.drainBuffer()},error:function(e){return w(R,void 0,void 0,function(){var o,s,a,c,l,d;return _(this,function(v){switch(v.label){case 0:if(o=e.error,s=S((void 0===o?{errors:[]}:o).errors,1),a=s[0],c=(void 0===a?{}:a).message,(l=void 0===c?"":c).includes(f.a.REALTIME_SUBSCRIPTION_INIT_ERROR)||l.includes(f.a.CONNECTION_FAILED)){if(u[t.name][A].forEach(function(e){return e.unsubscribe()}),u[t.name][A]=[],p[r]++,!(p[r]>=i.length))return C.debug(r+" subscription failed with authMode: "+i[p[r]-1]+". Retrying with authMode: "+i[p[r]]),E(r),[2];C.debug(r+" subscription failed with authMode: "+i[p[r]-1])}C.warn("subscriptionError",l),v.label=1;case 1:return v.trys.push([1,3,,4]),[4,this.errorHandler({recoverySuggestion:"Ensure app code is up to date, auth directives exist and are correct on each model, and that server-side data has not been invalidated by a schema change. If the problem persists, search for or create an issue: https://github.com/aws-amplify/amplify-js/issues",localModel:null,message:l,model:t.name,operation:r,errorType:Object(m.b)(e),process:h.i.subscribe,remoteModel:null,cause:e})];case 2:return v.sent(),[3,4];case 3:return d=v.sent(),C.error("Subscription error handler failed with:",d),[3,4];case 4:return"function"==typeof j&&j(),l.includes('"errorType":"Unauthorized"')||l.includes('"errorType":"OperationDisabled"')||n.error(l),[2]}})})}})),a.push(w(R,void 0,void 0,function(){var e,t=this;return _(this,function(n){switch(n.label){case 0:return[4,new Promise(function(n){j=n,e=t.hubQueryCompletionListener.bind(t,n),d.a.listen("api",e)})];case 1:return n.sent(),d.a.remove("api",e),[2]}})})),[2]}})})},l.forEach(function(e){return E(e)}),[2]}})})})})}),this.runningProcesses.isOpen&&this.runningProcesses.add(function(){return Promise.all(a).then(function(){n.next(r.CONNECTED)})}),[2]}})})},"subscription processor new subscriber"),t.runningProcesses.addCleaner(function(){return w(t,void 0,void 0,function(){return _(this,function(e){return Object.keys(u).forEach(function(e){u[e][v.a.CREATE].forEach(function(e){return e.unsubscribe()}),u[e][v.a.UPDATE].forEach(function(e){return e.unsubscribe()}),u[e][v.a.DELETE].forEach(function(e){return e.unsubscribe()})}),[2]})})})}),new p.a(function(e){return t.dataObserver=e,t.drainBuffer(),t.runningProcesses.addCleaner(function(){return w(t,void 0,void 0,function(){return _(this,function(e){return this.dataObserver=null,[2]})})})})]},t.prototype.stop=function(){return w(this,void 0,void 0,function(){return _(this,function(e){switch(e.label){case 0:return[4,this.runningProcesses.close()];case 1:return e.sent(),[4,this.runningProcesses.open()];case 2:return e.sent(),[2]}})})},t.prototype.passesPredicateValidation=function(e,t){if(!t)return!0;var n=t.predicates,r=t.type;return Object(y.R)(e,r,n)},t.prototype.pushToBuffer=function(e,t,n){this.buffer.push([e,t,n])},t.prototype.drainBuffer=function(){var e=this;this.dataObserver&&(this.buffer.forEach(function(t){return e.dataObserver.next(t)}),this.buffer=[])},t}()}).call(this,n(12).Buffer)},function(e,t,n){"use strict";n.r(t);var r=n(20),i=n(116);n.d(t,"Amplify",function(){return r.a});var o=n(59),s=n(26);n.d(t,"Cache",function(){return s.a});var a=n(395);n.d(t,"Analytics",function(){return a.a});var u=n(117);n.d(t,"AWSPinpointProvider",function(){return u.a});var c=n(118);n.d(t,"AWSKinesisProvider",function(){return c.a});var l=n(396);n.d(t,"AWSKinesisFirehoseProvider",function(){return l.a});var d=n(394);n.d(t,"AmazonPersonalizeProvider",function(){return d.a}),n.d(t,"Auth",function(){return o.a});var f=n(112);n.d(t,"Storage",function(){return f.a}),n.d(t,"StorageClass",function(){return f.b});var p=n(62);n.d(t,"API",function(){return p.a}),n.d(t,"APIClass",function(){return p.b});var h=n(173);n.d(t,"graphqlOperation",function(){return h.b});var v=n(6);n.d(t,"AuthModeStrategyType",function(){return v.a});var g=n(195);n.d(t,"DataStore",function(){return g.a});var y=n(11);n.d(t,"Predicates",function(){return y.b}),n.d(t,"SortDirection",function(){return v.k}),n.d(t,"syncExpression",function(){return v.y});var m=n(397);n.d(t,"PubSub",function(){return m.a});var b=n(392);n.d(t,"Interactions",function(){return b.a});var w=n(165);for(var _ in w)["default","Analytics","AWSPinpointProvider","AWSKinesisProvider","AWSKinesisFirehoseProvider","AmazonPersonalizeProvider","Auth","Storage","StorageClass","API","APIClass","graphqlOperation","AuthModeStrategyType","DataStore","Predicates","SortDirection","syncExpression","PubSub","Interactions","XR","Predictions","Logger","Hub","JS","ClientDevice","Signer","I18n","ServiceWorker","AWSCloudWatchProvider","withSSRContext","Geo","Cache","Amplify"].indexOf(_)<0&&function(e){n.d(t,e,function(){return w[e]})}(_);var S=n(398);n.d(t,"XR",function(){return S.a});var E=n(373);n.d(t,"Predictions",function(){return E.a});var C=n(48);n.d(t,"Logger",function(){return C.a});var A=n(78);n.d(t,"Hub",function(){return A.a});var O=n(34);n.d(t,"JS",function(){return O.a});var I=n(113);n.d(t,"ClientDevice",function(){return I.a});var x=n(93);n.d(t,"Signer",function(){return x.a});var T=n(114);n.d(t,"I18n",function(){return T.a}),n.d(t,"ServiceWorker",function(){return i.a});var P=n(393);n.d(t,"AWSCloudWatchProvider",function(){return P.a});var k=n(166);n.d(t,"withSSRContext",function(){return k.a});var D=n(391);n.d(t,"Geo",function(){return D.a}),r.a.Auth=o.a,r.a.Cache=s.a,r.a.ServiceWorker=i.a,t.default=r.a},,function(e,t,n){var r;e.exports=(r=n(38),function(){if("function"==typeof ArrayBuffer){var e=r.lib.WordArray,t=e.init;(e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var n=e.byteLength,r=[],i=0;i<n;i++)r[i>>>2]|=e[i]<<24-i%4*8;t.call(this,r,n)}else t.apply(this,arguments)}).prototype=e}}(),r.lib.WordArray)},function(e,t,n){"use strict";n.r(t),t.default=function(e,t){return t=t||{},new Promise(function(n,r){var i=new XMLHttpRequest,o=[],s=[],a={},u=function(){return{ok:2==(i.status/100|0),statusText:i.statusText,status:i.status,url:i.responseURL,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},clone:u,headers:{keys:function(){return o},entries:function(){return s},get:function(e){return a[e.toLowerCase()]},has:function(e){return e.toLowerCase()in a}}}};for(var c in i.open(t.method||"get",e,!0),i.onload=function(){i.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(e,t,n){o.push(t=t.toLowerCase()),s.push([t,n]),a[t]=a[t]?a[t]+","+n:n}),n(u())},i.onerror=r,i.withCredentials="include"==t.credentials,t.headers)i.setRequestHeader(c,t.headers[c]);i.send(t.body||null)})}},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,i=n;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},function(e,t,n){"use strict";function r(e){return"string"==typeof e?(0,s.fromUtf8)(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var i=n(223),o=n(130),s=n(174),a=n(54),u=function(){function e(e){e?(this.operation=function(e){return new Promise(function(t,n){var i=(0,a.locateWindow)().msCrypto.subtle.importKey("raw",r(e),o.SHA_256_HMAC_ALGO,!1,["sign"]);i.oncomplete=function(){i.result&&t(i.result),n(new Error("ImportKey completed without importing key."))},i.onerror=function(){n(new Error("ImportKey failed to import key."))}})}(e).then(function(e){return(0,a.locateWindow)().msCrypto.subtle.sign(o.SHA_256_HMAC_ALGO,e)}),this.operation.catch(function(){})):this.operation=Promise.resolve((0,a.locateWindow)().msCrypto.subtle.digest("SHA-256"))}return e.prototype.update=function(e){var t=this;(0,i.isEmptyData)(e)||(this.operation=this.operation.then(function(n){return n.onerror=function(){t.operation=Promise.reject(new Error("Error encountered updating hash"))},n.process(r(e)),n}),this.operation.catch(function(){}))},e.prototype.digest=function(){return this.operation.then(function(e){return new Promise(function(t,n){e.onerror=function(){n(new Error("Error encountered finalizing hash"))},e.oncomplete=function(){e.result&&t(new Uint8Array(e.result)),n(new Error("Error encountered finalizing hash"))},e.finish()})})},e}();t.Sha256=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EMPTY_DATA_SHA_256=t.SHA_256_HMAC_ALGO=t.SHA_256_HASH=void 0,t.SHA_256_HASH={name:"SHA-256"},t.SHA_256_HMAC_ALGO={name:"HMAC",hash:t.SHA_256_HASH},t.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var r=n(224),i=n(130),o=n(54),s=function(){function e(e){this.toHash=new Uint8Array(0),void 0!==e&&(this.key=new Promise(function(t,n){(0,o.locateWindow)().crypto.subtle.importKey("raw",(0,r.convertToBuffer)(e),i.SHA_256_HMAC_ALGO,!1,["sign"]).then(t,n)}),this.key.catch(function(){}))}return e.prototype.update=function(e){if(!(0,r.isEmptyData)(e)){var t=(0,r.convertToBuffer)(e),n=new Uint8Array(this.toHash.byteLength+t.byteLength);n.set(this.toHash,0),n.set(t,this.toHash.byteLength),this.toHash=n}},e.prototype.digest=function(){var e=this;return this.key?this.key.then(function(t){return(0,o.locateWindow)().crypto.subtle.sign(i.SHA_256_HMAC_ALGO,t,e.toHash).then(function(e){return new Uint8Array(e)})}):(0,r.isEmptyData)(this.toHash)?Promise.resolve(i.EMPTY_DATA_SHA_256):Promise.resolve().then(function(){return(0,o.locateWindow)().crypto.subtle.digest(i.SHA_256_HASH,e.toHash)}).then(function(e){return Promise.resolve(new Uint8Array(e))})},e}();t.Sha256=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_HASHABLE_LENGTH=t.INIT=t.KEY=t.DIGEST_LENGTH=t.BLOCK_SIZE=void 0,t.BLOCK_SIZE=64,t.DIGEST_LENGTH=32,t.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),t.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],t.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},function(e,t,n){(function(t){var r;e.exports=(r=r||function(e,r){var i;if("undefined"!=typeof window&&window.crypto&&(i=window.crypto),"undefined"!=typeof self&&self.crypto&&(i=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(i=globalThis.crypto),!i&&"undefined"!=typeof window&&window.msCrypto&&(i=window.msCrypto),!i&&void 0!==t&&t.crypto&&(i=t.crypto),!i)try{i=n(245)}catch(e){}var o=function(){if(i){if("function"==typeof i.getRandomValues)try{return i.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof i.randomBytes)try{return i.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},s=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),a={},u=a.lib={},c=u.Base={extend:function(e){var t=s(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},l=u.WordArray=c.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||f).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var s=n[o>>>2]>>>24-o%4*8&255;t[r+o>>>2]|=s<<24-(r+o)%4*8}else for(var a=0;a<i;a+=4)t[r+a>>>2]=n[a>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=c.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(o());return new l.init(t,e)}}),d=a.enc={},f=d.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new l.init(n,t/2)}},p=d.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new l.init(n,t)}},h=d.Utf8={stringify:function(e){try{return decodeURIComponent(escape(p.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return p.parse(unescape(encodeURIComponent(e)))}},v=u.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=h.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,r=this._data,i=r.words,o=r.sigBytes,s=this.blockSize,a=o/(4*s),u=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*s,c=e.min(4*u,o);if(u){for(var d=0;d<u;d+=s)this._doProcessBlock(i,d);n=i.splice(0,u),r.sigBytes-=c}return new l.init(n,c)},clone:function(){var e=c.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),g=(u.Hasher=v.extend({cfg:c.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){v.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,
_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new g.HMAC.init(e,n).finalize(t)}}}),a.algo={});return a}(Math),r)}).call(this,n(60))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BLOCK_SIZE=64,t.DIGEST_LENGTH=32,t.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),t.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],t.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uint32ArrayFrom=t.numToUint8=t.isEmptyData=t.convertToBuffer=void 0;var r=n(248);Object.defineProperty(t,"convertToBuffer",{enumerable:!0,get:function(){return r.convertToBuffer}});var i=n(249);Object.defineProperty(t,"isEmptyData",{enumerable:!0,get:function(){return i.isEmptyData}});var o=n(250);Object.defineProperty(t,"numToUint8",{enumerable:!0,get:function(){return o.numToUint8}});var s=n(251);Object.defineProperty(t,"uint32ArrayFrom",{enumerable:!0,get:function(){return s.uint32ArrayFrom}})},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n(60))},function(e,t,n){var r=n(75),i=n(138);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t){var n=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,n){var r=n(142),i=n(286),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},function(e,t){var n=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},function(e,t,n){var r=n(288),i=n(107),o=n(289),s=n(290),a=n(291),u=n(75),c=n(139),l=c(r),d=c(i),f=c(o),p=c(s),h=c(a),v=u;(r&&"[object DataView]"!=v(new r(new ArrayBuffer(1)))||i&&"[object Map]"!=v(new i)||o&&"[object Promise]"!=v(o.resolve())||s&&"[object Set]"!=v(new s)||a&&"[object WeakMap]"!=v(new a))&&(v=function(e){var t=u(e),n="[object Object]"==t?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case l:return"[object DataView]";case d:return"[object Map]";case f:return"[object Promise]";case p:return"[object Set]";case h:return"[object WeakMap]"}return t}),e.exports=v},function(e,t,n){var r=n(292),i=n(76),o=Object.prototype,s=o.hasOwnProperty,a=o.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(e){return i(e)&&s.call(e,"callee")&&!a.call(e,"callee")};e.exports=u},function(e,t,n){var r=n(137),i=n(146);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},function(e,t){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,t,n){var r=n(305),i=n(308),o=n(309);e.exports=function(e,t,n,s,a,u){var c=1&n,l=e.length,d=t.length;if(l!=d&&!(c&&d>l))return!1;var f=u.get(e),p=u.get(t);if(f&&p)return f==t&&p==e;var h=-1,v=!0,g=2&n?new r:void 0;for(u.set(e,t),u.set(t,e);++h<l;){var y=e[h],m=t[h];if(s)var b=c?s(m,y,h,t,e,u):s(y,m,h,e,t,u);if(void 0!==b){if(b)continue;v=!1;break}if(g){if(!i(t,function(e,t){if(!o(g,t)&&(y===e||a(y,e,n,s,u)))return g.push(t)})){v=!1;break}}else if(y!==m&&!a(y,m,n,s,u)){v=!1;break}}return u.delete(e),u.delete(t),v}},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";function r(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var i=n(40);e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(i.isURLSearchParams(t))o=t.toString();else{var s=[];i.forEach(t,function(e,t){null!=e&&(i.isArray(e)?t+="[]":e=[e],i.forEach(e,function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),s.push(r(t)+"="+r(e))}))}),o=s.join("&")}if(o){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}},function(e,t,n){"use strict";var r=n(40),i=n(331),o=n(332),s=n(149),a=n(333),u=n(336),c=n(337),l=n(152),d=n(87),f=n(88);e.exports=function(e){return new Promise(function(t,n){function p(){e.cancelToken&&e.cancelToken.unsubscribe(v),e.signal&&e.signal.removeEventListener("abort",v)}function h(){if(b){var r="getAllResponseHeaders"in b?u(b.getAllResponseHeaders()):null,o={data:m&&"text"!==m&&"json"!==m?b.response:b.responseText,status:b.status,statusText:b.statusText,headers:r,config:e,request:b};i(function(e){t(e),p()},function(e){n(e),p()},o),b=null}}var v,g=e.data,y=e.headers,m=e.responseType;r.isFormData(g)&&delete y["Content-Type"];var b=new XMLHttpRequest;if(e.auth){var w=e.auth.username||"",_=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";y.Authorization="Basic "+btoa(w+":"+_)}var S=a(e.baseURL,e.url);if(b.open(e.method.toUpperCase(),s(S,e.params,e.paramsSerializer),!0),b.timeout=e.timeout,"onloadend"in b?b.onloadend=h:b.onreadystatechange=function(){b&&4===b.readyState&&(0!==b.status||b.responseURL&&0===b.responseURL.indexOf("file:"))&&setTimeout(h)},b.onabort=function(){b&&(n(l("Request aborted",e,"ECONNABORTED",b)),b=null)},b.onerror=function(){n(l("Network Error",e,null,b)),b=null},b.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||d.transitional;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(l(t,e,r.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",b)),b=null},r.isStandardBrowserEnv()){var E=(e.withCredentials||c(S))&&e.xsrfCookieName?o.read(e.xsrfCookieName):void 0;E&&(y[e.xsrfHeaderName]=E)}"setRequestHeader"in b&&r.forEach(y,function(e,t){void 0===g&&"content-type"===t.toLowerCase()?delete y[t]:b.setRequestHeader(t,e)}),r.isUndefined(e.withCredentials)||(b.withCredentials=!!e.withCredentials),m&&"json"!==m&&(b.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&b.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&b.upload&&b.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(v=function(e){b&&(n(!e||e&&e.type?new f("canceled"):e),b.abort(),b=null)},e.cancelToken&&e.cancelToken.subscribe(v),e.signal&&(e.signal.aborted?v():e.signal.addEventListener("abort",v))),g||(g=null),b.send(g)})}},function(e,t,n){"use strict";var r=n(150);e.exports=function(e,t,n,i,o){var s=new Error(e);return r(s,t,n,i,o)}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";var r=n(40);e.exports=function(e,t){function n(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function i(i){return r.isUndefined(t[i])?r.isUndefined(e[i])?void 0:n(void 0,e[i]):n(e[i],t[i])}function o(e){if(!r.isUndefined(t[e]))return n(void 0,t[e])}function s(i){return r.isUndefined(t[i])?r.isUndefined(e[i])?void 0:n(void 0,e[i]):n(void 0,t[i])}function a(r){return r in t?n(e[r],t[r]):r in e?n(void 0,e[r]):void 0}t=t||{};var u={},c={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a};return r.forEach(Object.keys(e).concat(Object.keys(t)),function(e){var t=c[e]||i,n=t(e);r.isUndefined(n)&&t!==a||(u[e]=n)}),u}},function(e,t){e.exports={version:"0.26.0"}},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,i=n;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){function e(){}return e.createPredicateBuilder=function(t){var n=t.name,r=new Set(Object.keys(t.fields)),i=new Proxy({},{get:function(t,i,o){var s=i;if(!r.has(s))throw new Error("Invalid field for model. field: "+s+", model: "+n);return function(t){return e.sortPredicateGroupsMap.get(o).push({field:s,sortDirection:t}),o}}});return e.sortPredicateGroupsMap.set(i,[]),i},e.isValidPredicate=function(t){return e.sortPredicateGroupsMap.has(t)},e.getPredicates=function(t,n){if(void 0===n&&(n=!0),n&&!e.isValidPredicate(t))throw new Error("The predicate is not valid");return e.sortPredicateGroupsMap.get(t)},e.createFromExisting=function(t,n){if(n&&t)return n(e.createPredicateBuilder(t))},e.sortPredicateGroupsMap=new WeakMap,e}()},function(e,t,n){"use strict";(function(e){}).call(this,n(74))},function(e,t,n){"use strict";function r(e){return"string"==typeof e?(0,s.fromUtf8)(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var i=n(356),o=n(161),s=n(400),a=n(54),u=function(){function e(e){e?(this.operation=function(e){return new Promise(function(t,n){var i=(0,a.locateWindow)().msCrypto.subtle.importKey("raw",r(e),o.SHA_256_HMAC_ALGO,!1,["sign"]);i.oncomplete=function(){i.result&&t(i.result),n(new Error("ImportKey completed without importing key."))},i.onerror=function(){n(new Error("ImportKey failed to import key."))}})}(e).then(function(e){return(0,a.locateWindow)().msCrypto.subtle.sign(o.SHA_256_HMAC_ALGO,e)}),this.operation.catch(function(){})):this.operation=Promise.resolve((0,a.locateWindow)().msCrypto.subtle.digest("SHA-256"))}return e.prototype.update=function(e){var t=this;(0,i.isEmptyData)(e)||(this.operation=this.operation.then(function(n){return n.onerror=function(){t.operation=Promise.reject(new Error("Error encountered updating hash"))},n.process(r(e)),n}),this.operation.catch(function(){}))},e.prototype.digest=function(){return this.operation.then(function(e){return new Promise(function(t,n){e.onerror=function(){n(new Error("Error encountered finalizing hash"))},e.oncomplete=function(){e.result&&t(new Uint8Array(e.result)),n(new Error("Error encountered finalizing hash"))},e.finish()})})},e}();t.Sha256=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EMPTY_DATA_SHA_256=t.SHA_256_HMAC_ALGO=t.SHA_256_HASH=void 0,t.SHA_256_HASH={name:"SHA-256"},t.SHA_256_HMAC_ALGO={name:"HMAC",hash:t.SHA_256_HASH},t.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var r=n(91),i=n(161),o=n(54),s=function(){function e(e){this.toHash=new Uint8Array(0),void 0!==e&&(this.key=new Promise(function(t,n){(0,o.locateWindow)().crypto.subtle.importKey("raw",(0,r.convertToBuffer)(e),i.SHA_256_HMAC_ALGO,!1,["sign"]).then(t,n)}),this.key.catch(function(){}))}return e.prototype.update=function(e){if(!(0,r.isEmptyData)(e)){var t=(0,r.convertToBuffer)(e),n=new Uint8Array(this.toHash.byteLength+t.byteLength);n.set(this.toHash,0),n.set(t,this.toHash.byteLength),this.toHash=n}},e.prototype.digest=function(){var e=this;return this.key?this.key.then(function(t){return(0,o.locateWindow)().crypto.subtle.sign(i.SHA_256_HMAC_ALGO,t,e.toHash).then(function(e){return new Uint8Array(e)})}):(0,r.isEmptyData)(this.toHash)?Promise.resolve(i.EMPTY_DATA_SHA_256):Promise.resolve().then(function(){return(0,o.locateWindow)().crypto.subtle.digest(i.SHA_256_HASH,e.toHash)}).then(function(e){return Promise.resolve(new Uint8Array(e))})},e}();t.Sha256=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_HASHABLE_LENGTH=t.INIT=t.KEY=t.DIGEST_LENGTH=t.BLOCK_SIZE=void 0,t.BLOCK_SIZE=64,t.DIGEST_LENGTH=32,t.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),t.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],t.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},function(e,t,n){"use strict";function r(e,t){function n(){this.constructor=e}A(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function i(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function o(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function s(e,t){return function(n,r){t(n,r,e)}}function a(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})}function c(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s}function l(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}function d(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function f(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function p(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function h(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}function v(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function g(e){return this instanceof g?(this.v=e,this):new g(e)}function y(e,t,n){function r(e){c[e]&&(u[e]=function(t){return new Promise(function(n,r){l.push([e,t,n,r])>1||i(e,t)})})}function i(e,t){try{(n=c[e](t)).value instanceof g?Promise.resolve(n.value.v).then(o,s):a(l[0][2],n)}catch(e){a(l[0][3],e)}var n}function o(e){i("next",e)}function s(e){i("throw",e)}function a(e,t){e(t),l.shift(),l.length&&i(l[0][0],l[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var u,c=n.apply(e,t||[]),l=[];return u={},r("next"),r("throw"),r("return"),u[Symbol.asyncIterator]=function(){return this},u}function m(e){function t(t,i){n[t]=e[t]?function(n){return(r=!r)?{value:g(e[t](n)),done:"return"===t}:i?i(n):n}:i}var n,r;return n={},t("next"),t("throw",function(e){throw e}),t("return"),n[Symbol.iterator]=function(){return this},n}function b(e){function t(t){n[t]=e[t]&&function(n){return new Promise(function(r,i){!function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}(r,i,(n=e[t](n)).done,n.value)})}}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,r=e[Symbol.asyncIterator];return r?r.call(e):(e=f(e),n={},t("next"),t("throw"),t("return"),n[Symbol.asyncIterator]=function(){return this},n)}function w(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function S(e){return e&&e.__esModule?e:{default:e}}function E(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function C(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}n.r(t),n.d(t,"__extends",function(){return r}),n.d(t,"__assign",function(){return O}),n.d(t,"__rest",function(){return i}),n.d(t,"__decorate",function(){return o}),n.d(t,"__param",function(){return s}),n.d(t,"__metadata",function(){return a}),n.d(t,"__awaiter",function(){return u}),n.d(t,"__generator",function(){return c}),n.d(t,"__createBinding",function(){return l}),n.d(t,"__exportStar",function(){return d}),n.d(t,"__values",function(){return f}),n.d(t,"__read",function(){return p}),n.d(t,"__spread",function(){return h}),n.d(t,"__spreadArrays",function(){return v}),n.d(t,"__await",function(){return g}),n.d(t,"__asyncGenerator",function(){return y}),n.d(t,"__asyncDelegator",function(){return m}),n.d(t,"__asyncValues",function(){return b}),n.d(t,"__makeTemplateObject",function(){return w}),n.d(t,"__importStar",function(){return _}),n.d(t,"__importDefault",function(){return S}),n.d(t,"__classPrivateFieldGet",function(){return E}),n.d(t,"__classPrivateFieldSet",function(){return C});var A=function(e,t){return(A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},O=function(){return(O=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)}},function(e,t,n){(function(e){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r,i,o,s;s=function(){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};return t.m=e,t.c=r,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==n(e)&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)t.d(i,o,function(t){return e[t]}.bind(null,o));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(1)),r(n(2)),r(n(3)),r(n(4)),r(n(5)),r(n(6)),r(n(7)),r(n(8)),r(n(9)),r(n(10)),r(n(11)),r(n(12)),r(n(13))},function(e,t,n){e.exports={a:"Anchor__a___1_Iz8"}},function(e,t,n){e.exports={button:"Button__button___vS7Mv",signInButton:"Button__signInButton___3bUH-",googleSignInButton:"Button__googleSignInButton___1YiCu",signInButtonIcon:"Button__signInButtonIcon___ihN75",auth0SignInButton:"Button__auth0SignInButton___znnCj",facebookSignInButton:"Button__facebookSignInButton___34Txh",amazonSignInButton:"Button__amazonSignInButton___2EMtl",oAuthSignInButton:"Button__oAuthSignInButton___3UGOl",signInButtonContent:"Button__signInButtonContent___xqTXJ"}},function(e,t,n){e.exports={formContainer:"Form__formContainer___1GA3x",formSection:"Form__formSection___1PPvW",formField:"Form__formField___38Ikl",formRow:"Form__formRow___2mwRs"}},function(e,t,n){e.exports={hint:"Hint__hint___2XngB"}},function(e,t,n){e.exports={input:"Input__input___3e_bf",inputLabel:"Input__inputLabel___3VF0S",label:"Input__label___23sO8",radio:"Input__radio___2hllK"}},function(e,t,n){e.exports={navBar:"Nav__navBar___xtCFA",navRight:"Nav__navRight___1QG2J",nav:"Nav__nav___2Dx2Y",navItem:"Nav__navItem___1LtFQ"}},function(e,t,n){e.exports={photoPickerButton:"PhotoPicker__photoPickerButton___2XdVn",photoPlaceholder:"PhotoPicker__photoPlaceholder___2JXO4",photoPlaceholderIcon:"PhotoPicker__photoPlaceholderIcon___3Et71"}},function(e,t,n){e.exports={container:"Section__container___3YYTG",actionRow:"Section__actionRow___2LWSU",sectionHeader:"Section__sectionHeader___2djyg",sectionHeaderHint:"Section__sectionHeaderHint___3Wxdc",sectionBody:"Section__sectionBody___ihqqd",sectionHeaderContent:"Section__sectionHeaderContent___1UCqa",sectionFooter:"Section__sectionFooter___1T54C",sectionFooterPrimaryContent:"Section__sectionFooterPrimaryContent___2r9ZX",sectionFooterSecondaryContent:"Section__sectionFooterSecondaryContent___Nj41Q"}},function(e,t,n){e.exports={selectInput:"SelectInput__selectInput___3efO4"}},function(e,t,n){e.exports={strike:"Strike__strike___1XV1b",strikeContent:"Strike__strikeContent___10gLb"}},function(e,t,n){e.exports={toast:"Toast__toast___XXr3v",toastClose:"Toast__toastClose___18lU4"}},function(e,t,n){e.exports={totpQrcode:"Totp__totpQrcode___1crLx"}},function(e,t,n){e.exports={sumerianSceneContainer:"XR__sumerianSceneContainer___3nVMt",sumerianScene:"XR__sumerianScene___2Tt7-",loadingOverlay:"XR__loadingOverlay___IbqcI",loadingContainer:"XR__loadingContainer___2Itxb",loadingLogo:"XR__loadingLogo___Ub7xQ",loadingSceneName:"XR__loadingSceneName___3__ne",loadingBar:"XR__loadingBar___2vcke",loadingBarFill:"XR__loadingBarFill___3M-D9",sceneErrorText:"XR__sceneErrorText___2y0tp",sceneBar:"XR__sceneBar___2ShrP",sceneName:"XR__sceneName___1ApHr",sceneActions:"XR__sceneActions___7plGs",actionButton:"XR__actionButton___2poIM",tooltip:"XR__tooltip___UYyhn",actionIcon:"XR__actionIcon___2qnd2",autoShowTooltip:"XR__autoShowTooltip___V1QH7"}}])},"object"==n(t)&&"object"==n(e)?e.exports=s():(i=[],void 0===(o="function"==typeof(r=s)?r.apply(t,i):r)||(e.exports=o))}).call(this,n(73)(e))},function(e,t,n){"use strict";function r(e){void 0===e&&(e={});var t=e.modules,n=void 0===t?f:t,r=e.req,i=a.a.configure(),o=new a.b,s=new u.a({req:r});return d.forEach(function(e){n.includes(e)||o.register(new e.constructor)}),n.forEach(function(e){o.register(new e.constructor)}),o.configure(l(l({},i),{storage:s})),o}n.d(t,"a",function(){return r});var i=n(52),o=n(59),s=n(80),a=n(20),u=n(119),c=n(195),l=function(){return(l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},d=[o.a,s.a],f=[i.a,o.a,c.a]},function(e,t,n){"use strict";(function(e){}).call(this,n(74))},function(e,t,n){"use strict";function r(e){return"string"==typeof e?(0,s.fromUtf8)(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var i=n(378),o=n(169),s=n(402),a=n(54),u=function(){function e(e){e?(this.operation=function(e){return new Promise(function(t,n){var i=(0,a.locateWindow)().msCrypto.subtle.importKey("raw",r(e),o.SHA_256_HMAC_ALGO,!1,["sign"]);i.oncomplete=function(){i.result&&t(i.result),n(new Error("ImportKey completed without importing key."))},i.onerror=function(){n(new Error("ImportKey failed to import key."))}})}(e).then(function(e){return(0,a.locateWindow)().msCrypto.subtle.sign(o.SHA_256_HMAC_ALGO,e)}),this.operation.catch(function(){})):this.operation=Promise.resolve((0,a.locateWindow)().msCrypto.subtle.digest("SHA-256"))}return e.prototype.update=function(e){var t=this;(0,i.isEmptyData)(e)||(this.operation=this.operation.then(function(n){return n.onerror=function(){t.operation=Promise.reject(new Error("Error encountered updating hash"))},n.process(r(e)),n}),this.operation.catch(function(){}))},e.prototype.digest=function(){return this.operation.then(function(e){return new Promise(function(t,n){e.onerror=function(){n(new Error("Error encountered finalizing hash"))},e.oncomplete=function(){e.result&&t(new Uint8Array(e.result)),n(new Error("Error encountered finalizing hash"))},e.finish()})})},e}();t.Sha256=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EMPTY_DATA_SHA_256=t.SHA_256_HMAC_ALGO=t.SHA_256_HASH=void 0,t.SHA_256_HASH={name:"SHA-256"},t.SHA_256_HMAC_ALGO={name:"HMAC",hash:t.SHA_256_HASH},t.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var r=n(91),i=n(169),o=n(54),s=function(){function e(e){this.toHash=new Uint8Array(0),void 0!==e&&(this.key=new Promise(function(t,n){(0,o.locateWindow)().crypto.subtle.importKey("raw",(0,r.convertToBuffer)(e),i.SHA_256_HMAC_ALGO,!1,["sign"]).then(t,n)}),this.key.catch(function(){}))}return e.prototype.update=function(e){if(!(0,r.isEmptyData)(e)){var t=(0,r.convertToBuffer)(e),n=new Uint8Array(this.toHash.byteLength+t.byteLength);n.set(this.toHash,0),n.set(t,this.toHash.byteLength),this.toHash=n}},e.prototype.digest=function(){var e=this;return this.key?this.key.then(function(t){return(0,o.locateWindow)().crypto.subtle.sign(i.SHA_256_HMAC_ALGO,t,e.toHash).then(function(e){return new Uint8Array(e)})}):(0,r.isEmptyData)(this.toHash)?Promise.resolve(i.EMPTY_DATA_SHA_256):Promise.resolve().then(function(){return(0,o.locateWindow)().crypto.subtle.digest(i.SHA_256_HASH,e.toHash)}).then(function(e){return Promise.resolve(new Uint8Array(e))})},e}();t.Sha256=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_HASHABLE_LENGTH=t.INIT=t.KEY=t.DIGEST_LENGTH=t.BLOCK_SIZE=void 0,t.BLOCK_SIZE=64,t.DIGEST_LENGTH=32,t.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),t.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],t.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},function(e,t,n){"use strict";function r(e,t){function n(){this.constructor=e}A(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function i(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function o(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function s(e,t){return function(n,r){t(n,r,e)}}function a(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})}function c(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop()
;continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s}function l(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}function d(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function f(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function p(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function h(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}function v(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function g(e){return this instanceof g?(this.v=e,this):new g(e)}function y(e,t,n){function r(e){c[e]&&(u[e]=function(t){return new Promise(function(n,r){l.push([e,t,n,r])>1||i(e,t)})})}function i(e,t){try{(n=c[e](t)).value instanceof g?Promise.resolve(n.value.v).then(o,s):a(l[0][2],n)}catch(e){a(l[0][3],e)}var n}function o(e){i("next",e)}function s(e){i("throw",e)}function a(e,t){e(t),l.shift(),l.length&&i(l[0][0],l[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var u,c=n.apply(e,t||[]),l=[];return u={},r("next"),r("throw"),r("return"),u[Symbol.asyncIterator]=function(){return this},u}function m(e){function t(t,i){n[t]=e[t]?function(n){return(r=!r)?{value:g(e[t](n)),done:"return"===t}:i?i(n):n}:i}var n,r;return n={},t("next"),t("throw",function(e){throw e}),t("return"),n[Symbol.iterator]=function(){return this},n}function b(e){function t(t){n[t]=e[t]&&function(n){return new Promise(function(r,i){!function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}(r,i,(n=e[t](n)).done,n.value)})}}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,r=e[Symbol.asyncIterator];return r?r.call(e):(e=f(e),n={},t("next"),t("throw"),t("return"),n[Symbol.asyncIterator]=function(){return this},n)}function w(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function S(e){return e&&e.__esModule?e:{default:e}}function E(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function C(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}n.r(t),n.d(t,"__extends",function(){return r}),n.d(t,"__assign",function(){return O}),n.d(t,"__rest",function(){return i}),n.d(t,"__decorate",function(){return o}),n.d(t,"__param",function(){return s}),n.d(t,"__metadata",function(){return a}),n.d(t,"__awaiter",function(){return u}),n.d(t,"__generator",function(){return c}),n.d(t,"__createBinding",function(){return l}),n.d(t,"__exportStar",function(){return d}),n.d(t,"__values",function(){return f}),n.d(t,"__read",function(){return p}),n.d(t,"__spread",function(){return h}),n.d(t,"__spreadArrays",function(){return v}),n.d(t,"__await",function(){return g}),n.d(t,"__asyncGenerator",function(){return y}),n.d(t,"__asyncDelegator",function(){return m}),n.d(t,"__asyncValues",function(){return b}),n.d(t,"__makeTemplateObject",function(){return w}),n.d(t,"__importStar",function(){return _}),n.d(t,"__importDefault",function(){return S}),n.d(t,"__classPrivateFieldGet",function(){return E}),n.d(t,"__classPrivateFieldSet",function(){return C});var A=function(e,t){return(A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},O=function(){return(O=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)}},function(e,t,n){"use strict";function r(e,t,n){return new L.a("Syntax Error: ".concat(n),void 0,e,[t])}function i(e){var t=e.prototype.toJSON;"function"==typeof t||function(e,t){if(!Boolean(0))throw new Error(null!=t?t:"Unexpected invariant triggered.")}(),e.prototype.inspect=t,R&&(e.prototype[R]=t)}function o(e){return null!=e&&"string"==typeof e.kind}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){return u(e,[])}function u(e,t){switch(s(e)){case"string":return JSON.stringify(e);case"function":return e.name?"[function ".concat(e.name,"]"):"[function]";case"object":return null===e?"null":function(e,t){if(-1!==t.indexOf(e))return"[Circular]";var n=[].concat(t,[e]),r=function(e){var t=e[String(R)];return"function"==typeof t?t:"function"==typeof e.inspect?e.inspect:void 0}(e);if(void 0!==r){var i=r.call(e);if(i!==e)return"string"==typeof i?i:u(i,n)}else if(Array.isArray(e))return function(e,t){if(0===e.length)return"[]";if(t.length>2)return"[Array]";for(var n=Math.min(10,e.length),r=e.length-n,i=[],o=0;o<n;++o)i.push(u(e[o],t));return 1===r?i.push("... 1 more item"):r>1&&i.push("... ".concat(r," more items")),"["+i.join(", ")+"]"}(e,n);return function(e,t){var n=Object.keys(e);return 0===n.length?"{}":t.length>2?"["+function(e){var t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if("Object"===t&&"function"==typeof e.constructor){var n=e.constructor.name;if("string"==typeof n&&""!==n)return n}return t}(e)+"]":"{ "+n.map(function(n){return n+": "+u(e[n],t)}).join(", ")+" }"}(e,n)}(e,t);default:return String(e)}}function c(e,t){if(!Boolean(e))throw new Error(t)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e){var t=e.split(/\r\n|[\n\r]/g),n=function(e){for(var t,n=!0,r=!0,i=0,o=null,s=0;s<e.length;++s)switch(e.charCodeAt(s)){case 13:10===e.charCodeAt(s+1)&&++s;case 10:n=!1,r=!0,i=0;break;case 9:case 32:++i;break;default:r&&!n&&(null===o||i<o)&&(o=i),r=!1}return null!==(t=o)&&void 0!==t?t:0}(e);if(0!==n)for(var r=1;r<t.length;r++)t[r]=t[r].slice(n);for(var i=0;i<t.length&&f(t[i]);)++i;for(var o=t.length;o>i&&f(t[o-1]);)--o;return t.slice(i,o).join("\n")}function f(e){for(var t=0;t<e.length;++t)if(" "!==e[t]&&"\t"!==e[t])return!1;return!0}function p(e){return isNaN(e)?B.EOF:e<127?JSON.stringify(String.fromCharCode(e)):'"\\u'.concat(("00"+e.toString(16).toUpperCase()).slice(-4),'"')}function h(e,t){for(var n=e.source,i=n.body,o=i.length,s=t.end;s<o;){var a=i.charCodeAt(s),u=e.line,c=1+s-e.lineStart;switch(a){case 65279:case 9:case 32:case 44:++s;continue;case 10:++s,++e.line,e.lineStart=s;continue;case 13:10===i.charCodeAt(s+1)?s+=2:++s,++e.line,e.lineStart=s;continue;case 33:return new F(B.BANG,s,s+1,u,c,t);case 35:return g(n,s,u,c,t);case 36:return new F(B.DOLLAR,s,s+1,u,c,t);case 38:return new F(B.AMP,s,s+1,u,c,t);case 40:return new F(B.PAREN_L,s,s+1,u,c,t);case 41:return new F(B.PAREN_R,s,s+1,u,c,t);case 46:if(46===i.charCodeAt(s+1)&&46===i.charCodeAt(s+2))return new F(B.SPREAD,s,s+3,u,c,t);break;case 58:return new F(B.COLON,s,s+1,u,c,t);case 61:return new F(B.EQUALS,s,s+1,u,c,t);case 64:return new F(B.AT,s,s+1,u,c,t);case 91:return new F(B.BRACKET_L,s,s+1,u,c,t);case 93:return new F(B.BRACKET_R,s,s+1,u,c,t);case 123:return new F(B.BRACE_L,s,s+1,u,c,t);case 124:return new F(B.PIPE,s,s+1,u,c,t);case 125:return new F(B.BRACE_R,s,s+1,u,c,t);case 34:return 34===i.charCodeAt(s+1)&&34===i.charCodeAt(s+2)?w(n,s,u,c,t,e):b(n,s,u,c,t);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return y(n,s,a,u,c,t);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return S(n,s,u,c,t)}throw r(n,s,v(a))}var l=e.line,d=1+s-e.lineStart;return new F(B.EOF,o,o,l,d,t)}function v(e){return e<32&&9!==e&&10!==e&&13!==e?"Cannot contain the invalid character ".concat(p(e),"."):39===e?"Unexpected single quote character ('), did you mean to use a double quote (\")?":"Cannot parse the unexpected character ".concat(p(e),".")}function g(e,t,n,r,i){var o,s=e.body,a=t;do{o=s.charCodeAt(++a)}while(!isNaN(o)&&(o>31||9===o));return new F(B.COMMENT,t,a,n,r,i,s.slice(t+1,a))}function y(e,t,n,i,o,s){var a=e.body,u=n,c=t,l=!1;if(45===u&&(u=a.charCodeAt(++c)),48===u){if((u=a.charCodeAt(++c))>=48&&u<=57)throw r(e,c,"Invalid number, unexpected digit after 0: ".concat(p(u),"."))}else c=m(e,c,u),u=a.charCodeAt(c);if(46===u&&(l=!0,u=a.charCodeAt(++c),c=m(e,c,u),u=a.charCodeAt(c)),69!==u&&101!==u||(l=!0,43!==(u=a.charCodeAt(++c))&&45!==u||(u=a.charCodeAt(++c)),c=m(e,c,u),u=a.charCodeAt(c)),46===u||function(e){return 95===e||e>=65&&e<=90||e>=97&&e<=122}(u))throw r(e,c,"Invalid number, expected digit but got: ".concat(p(u),"."));return new F(l?B.FLOAT:B.INT,t,c,i,o,s,a.slice(t,c))}function m(e,t,n){var i=e.body,o=t,s=n;if(s>=48&&s<=57){do{s=i.charCodeAt(++o)}while(s>=48&&s<=57);return o}throw r(e,o,"Invalid number, expected digit but got: ".concat(p(s),"."))}function b(e,t,n,i,o){for(var s,a,u,c,l=e.body,d=t+1,f=d,h=0,v="";d<l.length&&!isNaN(h=l.charCodeAt(d))&&10!==h&&13!==h;){if(34===h)return v+=l.slice(f,d),new F(B.STRING,t,d+1,n,i,o,v);if(h<32&&9!==h)throw r(e,d,"Invalid character within String: ".concat(p(h),"."));if(++d,92===h){switch(v+=l.slice(f,d-1),h=l.charCodeAt(d)){case 34:v+='"';break;case 47:v+="/";break;case 92:v+="\\";break;case 98:v+="\b";break;case 102:v+="\f";break;case 110:v+="\n";break;case 114:v+="\r";break;case 116:v+="\t";break;case 117:var g=(s=l.charCodeAt(d+1),a=l.charCodeAt(d+2),u=l.charCodeAt(d+3),c=l.charCodeAt(d+4),_(s)<<12|_(a)<<8|_(u)<<4|_(c));if(g<0){var y=l.slice(d+1,d+5);throw r(e,d,"Invalid character escape sequence: \\u".concat(y,"."))}v+=String.fromCharCode(g),d+=4;break;default:throw r(e,d,"Invalid character escape sequence: \\".concat(String.fromCharCode(h),"."))}f=++d}}throw r(e,d,"Unterminated string.")}function w(e,t,n,i,o,s){for(var a=e.body,u=t+3,c=u,l=0,f="";u<a.length&&!isNaN(l=a.charCodeAt(u));){if(34===l&&34===a.charCodeAt(u+1)&&34===a.charCodeAt(u+2))return f+=a.slice(c,u),new F(B.BLOCK_STRING,t,u+3,n,i,o,d(f));if(l<32&&9!==l&&10!==l&&13!==l)throw r(e,u,"Invalid character within String: ".concat(p(l),"."));10===l?(++u,++s.line,s.lineStart=u):13===l?(10===a.charCodeAt(u+1)?u+=2:++u,++s.line,s.lineStart=u):92===l&&34===a.charCodeAt(u+1)&&34===a.charCodeAt(u+2)&&34===a.charCodeAt(u+3)?(f+=a.slice(c,u)+'"""',c=u+=4):++u}throw r(e,u,"Unterminated string.")}function _(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:-1}function S(e,t,n,r,i){for(var o=e.body,s=o.length,a=t+1,u=0;a!==s&&!isNaN(u=o.charCodeAt(a))&&(95===u||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122);)++a;return new F(B.NAME,t,a,n,r,i,o.slice(t,a))}function E(e,t){return new G(e,t).parseDocument()}function C(e){var t=e.value;return A(e.kind)+(null!=t?' "'.concat(t,'"'):"")}function A(e){return function(e){return e===B.BANG||e===B.DOLLAR||e===B.AMP||e===B.PAREN_L||e===B.PAREN_R||e===B.SPREAD||e===B.COLON||e===B.EQUALS||e===B.AT||e===B.BRACKET_L||e===B.BRACKET_R||e===B.BRACE_L||e===B.PIPE||e===B.BRACE_R}(e)?'"'.concat(e,'"'):e}function O(e,t,n){var r=e[t];if(r){if(!n&&"function"==typeof r)return r;var i=n?r.leave:r.enter;if("function"==typeof i)return i}else{var o=n?e.leave:e.enter;if(o){if("function"==typeof o)return o;var s=o[t];if("function"==typeof s)return s}}}function I(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:W,r=void 0,i=Array.isArray(e),s=[e],u=-1,c=[],l=void 0,d=void 0,f=void 0,p=[],h=[],v=e;do{var g=++u===s.length,y=g&&0!==c.length;if(g){if(d=0===h.length?void 0:p[p.length-1],l=f,f=h.pop(),y){if(i)l=l.slice();else{for(var m={},b=0,w=Object.keys(l);b<w.length;b++){var _=w[b];m[_]=l[_]}l=m}for(var S=0,E=0;E<c.length;E++){var C=c[E][0],A=c[E][1];i&&(C-=S),i&&null===A?(l.splice(C,1),S++):l[C]=A}}u=r.index,s=r.keys,c=r.edits,i=r.inArray,r=r.prev}else{if(d=f?i?u:s[u]:void 0,null==(l=f?f[d]:v))continue;f&&p.push(d)}var I,x=void 0;if(!Array.isArray(l)){if(!o(l))throw new Error("Invalid AST Node: ".concat(a(l),"."));var T=O(t,l.kind,g);if(T){if((x=T.call(t,l,d,f,p,h))===H)break;if(!1===x){if(!g){p.pop();continue}}else if(void 0!==x&&(c.push([d,x]),!g)){if(!o(x)){p.pop();continue}l=x}}}void 0===x&&y&&c.push([d,l]),g?p.pop():(r={inArray:i,index:u,keys:s,edits:c,prev:r},s=(i=Array.isArray(l))?l:null!==(I=n[l.kind])&&void 0!==I?I:[],u=-1,c=[],f&&h.push(f),f=l)}while(void 0!==r);return 0!==c.length&&(v=c[c.length-1][1]),v}(e,{leave:J})}function x(e){return function(t){return T([t.description,e(t)],"\n")}}function T(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return null!==(t=null==e?void 0:e.filter(function(e){return e}).join(n))&&void 0!==t?t:""}function P(e){return k("{\n",D(T(e,"\n")),"\n}")}function k(e,t){return null!=t&&""!==t?e+t+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:""):""}function D(e){return k("  ",e.replace(/\n/g,"\n  "))}function N(e){return-1!==e.indexOf("\n")}function M(e){return null!=e&&e.some(N)}n.d(t,"b",function(){return fe}),n.d(t,"a",function(){return pe});var L=n(197),j=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"}),R="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):void 0,U=function(){function e(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}return e.prototype.toJSON=function(){return{start:this.start,end:this.end}},e}();i(U);var F=function(){function e(e,t,n,r,i,o,s){this.kind=e,this.start=t,this.end=n,this.line=r,this.column=i,this.value=s,this.prev=o,this.next=null}return e.prototype.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},e}();i(F);var B=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"}),z=n(95),q=function(e,t){return e instanceof t},K=function(){function e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GraphQL request",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{line:1,column:1};"string"==typeof e||c(0,"Body must be a string. Received: ".concat(a(e),".")),this.body=e,this.name=t,this.locationOffset=n,this.locationOffset.line>0||c(0,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||c(0,"column in locationOffset is 1-indexed and must be positive.")}var t,n,r;return t=e,(n=[{key:z.a,get:function(){return"Source"}}])&&l(t.prototype,n),r&&l(t,r),e}(),$=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"}),V=function(){function e(e){var t=new F(B.SOF,0,0,0,0,null);this.source=e,this.lastToken=t,this.token=t,this.line=1,this.lineStart=0}var t=e.prototype;return t.advance=function(){return this.lastToken=this.token,this.token=this.lookahead()},t.lookahead=function(){var e=this.token;if(e.kind!==B.EOF)do{var t;e=null!==(t=e.next)&&void 0!==t?t:e.next=h(this,e)}while(e.kind===B.COMMENT);return e},e}(),G=function(){function e(e,t){var n=function(e){return q(e,K)}(e)?e:new K(e);this._lexer=new V(n),this._options=t}var t=e.prototype;return t.parseName=function(){var e=this.expectToken(B.NAME);return{kind:j.NAME,value:e.value,loc:this.loc(e)}},t.parseDocument=function(){var e=this._lexer.token;return{kind:j.DOCUMENT,definitions:this.many(B.SOF,this.parseDefinition,B.EOF),loc:this.loc(e)}},t.parseDefinition=function(){if(this.peek(B.NAME))switch(this._lexer.token.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return this.parseTypeSystemDefinition();case"extend":return this.parseTypeSystemExtension()}else{if(this.peek(B.BRACE_L))return this.parseOperationDefinition();if(this.peekDescription())return this.parseTypeSystemDefinition()}throw this.unexpected()},t.parseOperationDefinition=function(){var e=this._lexer.token;if(this.peek(B.BRACE_L))return{kind:j.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet(),loc:this.loc(e)};var t,n=this.parseOperationType();return this.peek(B.NAME)&&(t=this.parseName()),{kind:j.OPERATION_DEFINITION,operation:n,name:t,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(e)}},t.parseOperationType=function(){var e=this.expectToken(B.NAME);switch(e.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw this.unexpected(e)},t.parseVariableDefinitions=function(){return this.optionalMany(B.PAREN_L,this.parseVariableDefinition,B.PAREN_R)},t.parseVariableDefinition=function(){var e=this._lexer.token;return{kind:j.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(B.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(B.EQUALS)?this.parseValueLiteral(!0):void 0,directives:this.parseDirectives(!0),loc:this.loc(e)}},t.parseVariable=function(){var e=this._lexer.token;return this.expectToken(B.DOLLAR),{kind:j.VARIABLE,name:this.parseName(),loc:this.loc(e)}},t.parseSelectionSet=function(){var e=this._lexer.token;return{kind:j.SELECTION_SET,selections:this.many(B.BRACE_L,this.parseSelection,B.BRACE_R),loc:this.loc(e)}},t.parseSelection=function(){return this.peek(B.SPREAD)?this.parseFragment():this.parseField()},t.parseField=function(){var e,t,n=this._lexer.token,r=this.parseName();return this.expectOptionalToken(B.COLON)?(e=r,t=this.parseName()):t=r,{kind:j.FIELD,alias:e,name:t,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(B.BRACE_L)?this.parseSelectionSet():void 0,loc:this.loc(n)}},t.parseArguments=function(e){var t=e?this.parseConstArgument:this.parseArgument;return this.optionalMany(B.PAREN_L,t,B.PAREN_R)},t.parseArgument=function(){var e=this._lexer.token,t=this.parseName();return this.expectToken(B.COLON),{kind:j.ARGUMENT,name:t,value:this.parseValueLiteral(!1),loc:this.loc(e)}},t.parseConstArgument=function(){var e=this._lexer.token;return{kind:j.ARGUMENT,name:this.parseName(),value:(this.expectToken(B.COLON),this.parseValueLiteral(!0)),loc:this.loc(e)}},t.parseFragment=function(){var e=this._lexer.token;this.expectToken(B.SPREAD);var t=this.expectOptionalKeyword("on");return!t&&this.peek(B.NAME)?{kind:j.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1),loc:this.loc(e)}:{kind:j.INLINE_FRAGMENT,typeCondition:t?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(e)}},t.parseFragmentDefinition=function(){var e,t=this._lexer.token;return this.expectKeyword("fragment"),!0===(null===(e=this._options)||void 0===e?void 0:e.experimentalFragmentVariables)?{kind:j.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}:{kind:j.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}},t.parseFragmentName=function(){if("on"===this._lexer.token.value)throw this.unexpected();return this.parseName()},t.parseValueLiteral=function(e){var t=this._lexer.token;switch(t.kind){case B.BRACKET_L:return this.parseList(e);case B.BRACE_L:return this.parseObject(e);case B.INT:return this._lexer.advance(),{kind:j.INT,value:t.value,loc:this.loc(t)};case B.FLOAT:return this._lexer.advance(),{kind:j.FLOAT,value:t.value,loc:this.loc(t)};case B.STRING:case B.BLOCK_STRING:return this.parseStringLiteral();case B.NAME:switch(this._lexer.advance(),t.value){case"true":return{kind:j.BOOLEAN,value:!0,loc:this.loc(t)};case"false":return{kind:j.BOOLEAN,value:!1,loc:this.loc(t)};case"null":return{kind:j.NULL,loc:this.loc(t)};default:return{kind:j.ENUM,value:t.value,loc:this.loc(t)}}case B.DOLLAR:if(!e)return this.parseVariable()}throw this.unexpected()},t.parseStringLiteral=function(){var e=this._lexer.token;return this._lexer.advance(),{kind:j.STRING,value:e.value,block:e.kind===B.BLOCK_STRING,loc:this.loc(e)}},t.parseList=function(e){var t=this,n=this._lexer.token;return{kind:j.LIST,values:this.any(B.BRACKET_L,function(){return t.parseValueLiteral(e)},B.BRACKET_R),loc:this.loc(n)}},t.parseObject=function(e){var t=this,n=this._lexer.token;return{kind:j.OBJECT,fields:this.any(B.BRACE_L,function(){return t.parseObjectField(e)},B.BRACE_R),loc:this.loc(n)}},t.parseObjectField=function(e){var t=this._lexer.token,n=this.parseName();return this.expectToken(B.COLON),{kind:j.OBJECT_FIELD,name:n,value:this.parseValueLiteral(e),loc:this.loc(t)}},t.parseDirectives=function(e){for(var t=[];this.peek(B.AT);)t.push(this.parseDirective(e));return t},t.parseDirective=function(e){var t=this._lexer.token;return this.expectToken(B.AT),{kind:j.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(e),loc:this.loc(t)}},t.parseTypeReference=function(){var e,t=this._lexer.token;return this.expectOptionalToken(B.BRACKET_L)?(e=this.parseTypeReference(),this.expectToken(B.BRACKET_R),e={kind:j.LIST_TYPE,type:e,loc:this.loc(t)}):e=this.parseNamedType(),this.expectOptionalToken(B.BANG)?{kind:j.NON_NULL_TYPE,type:e,loc:this.loc(t)}:e},t.parseNamedType=function(){var e=this._lexer.token;return{kind:j.NAMED_TYPE,name:this.parseName(),loc:this.loc(e)}},t.parseTypeSystemDefinition=function(){var e=this.peekDescription()?this._lexer.lookahead():this._lexer.token;if(e.kind===B.NAME)switch(e.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}throw this.unexpected(e)},t.peekDescription=function(){return this.peek(B.STRING)||this.peek(B.BLOCK_STRING)},t.parseDescription=function(){if(this.peekDescription())return this.parseStringLiteral()},t.parseSchemaDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("schema");var n=this.parseDirectives(!0),r=this.many(B.BRACE_L,this.parseOperationTypeDefinition,B.BRACE_R);return{kind:j.SCHEMA_DEFINITION,description:t,directives:n,operationTypes:r,loc:this.loc(e)}},t.parseOperationTypeDefinition=function(){var e=this._lexer.token,t=this.parseOperationType();this.expectToken(B.COLON);var n=this.parseNamedType();return{kind:j.OPERATION_TYPE_DEFINITION,operation:t,type:n,loc:this.loc(e)}},t.parseScalarTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("scalar");var n=this.parseName(),r=this.parseDirectives(!0);return{kind:j.SCALAR_TYPE_DEFINITION,description:t,name:n,directives:r,loc:this.loc(e)}},t.parseObjectTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("type");var n=this.parseName(),r=this.parseImplementsInterfaces(),i=this.parseDirectives(!0),o=this.parseFieldsDefinition();return{kind:j.OBJECT_TYPE_DEFINITION,description:t,name:n,interfaces:r,directives:i,fields:o,loc:this.loc(e)}},t.parseImplementsInterfaces=function(){var e;if(!this.expectOptionalKeyword("implements"))return[];if(!0===(null===(e=this._options)||void 0===e?void 0:e.allowLegacySDLImplementsInterfaces)){var t=[];this.expectOptionalToken(B.AMP);do{t.push(this.parseNamedType())}while(this.expectOptionalToken(B.AMP)||this.peek(B.NAME));return t}return this.delimitedMany(B.AMP,this.parseNamedType)},t.parseFieldsDefinition=function(){var e;return!0===(null===(e=this._options)||void 0===e?void 0:e.allowLegacySDLEmptyFields)&&this.peek(B.BRACE_L)&&this._lexer.lookahead().kind===B.BRACE_R?(this._lexer.advance(),this._lexer.advance(),[]):this.optionalMany(B.BRACE_L,this.parseFieldDefinition,B.BRACE_R)},t.parseFieldDefinition=function(){var e=this._lexer.token,t=this.parseDescription(),n=this.parseName(),r=this.parseArgumentDefs();this.expectToken(B.COLON);var i=this.parseTypeReference(),o=this.parseDirectives(!0);return{kind:j.FIELD_DEFINITION,description:t,name:n,arguments:r,type:i,directives:o,loc:this.loc(e)}},t.parseArgumentDefs=function(){return this.optionalMany(B.PAREN_L,this.parseInputValueDef,B.PAREN_R)},t.parseInputValueDef=function(){var e=this._lexer.token,t=this.parseDescription(),n=this.parseName();this.expectToken(B.COLON);var r,i=this.parseTypeReference();this.expectOptionalToken(B.EQUALS)&&(r=this.parseValueLiteral(!0));var o=this.parseDirectives(!0);return{kind:j.INPUT_VALUE_DEFINITION,description:t,name:n,type:i,defaultValue:r,directives:o,loc:this.loc(e)}},t.parseInterfaceTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("interface");var n=this.parseName(),r=this.parseImplementsInterfaces(),i=this.parseDirectives(!0),o=this.parseFieldsDefinition();return{kind:j.INTERFACE_TYPE_DEFINITION,description:t,name:n,interfaces:r,directives:i,fields:o,loc:this.loc(e)}},t.parseUnionTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("union");var n=this.parseName(),r=this.parseDirectives(!0),i=this.parseUnionMemberTypes();return{kind:j.UNION_TYPE_DEFINITION,description:t,name:n,directives:r,types:i,loc:this.loc(e)}},t.parseUnionMemberTypes=function(){return this.expectOptionalToken(B.EQUALS)?this.delimitedMany(B.PIPE,this.parseNamedType):[]},t.parseEnumTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("enum");var n=this.parseName(),r=this.parseDirectives(!0),i=this.parseEnumValuesDefinition();return{kind:j.ENUM_TYPE_DEFINITION,description:t,name:n,directives:r,values:i,loc:this.loc(e)}},t.parseEnumValuesDefinition=function(){return this.optionalMany(B.BRACE_L,this.parseEnumValueDefinition,B.BRACE_R)},t.parseEnumValueDefinition=function(){var e=this._lexer.token,t=this.parseDescription(),n=this.parseName(),r=this.parseDirectives(!0);return{kind:j.ENUM_VALUE_DEFINITION,description:t,name:n,directives:r,loc:this.loc(e)}},t.parseInputObjectTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("input");var n=this.parseName(),r=this.parseDirectives(!0),i=this.parseInputFieldsDefinition();return{kind:j.INPUT_OBJECT_TYPE_DEFINITION,description:t,name:n,directives:r,fields:i,loc:this.loc(e)}},t.parseInputFieldsDefinition=function(){return this.optionalMany(B.BRACE_L,this.parseInputValueDef,B.BRACE_R)},t.parseTypeSystemExtension=function(){var e=this._lexer.lookahead();if(e.kind===B.NAME)switch(e.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(e)},t.parseSchemaExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");var t=this.parseDirectives(!0),n=this.optionalMany(B.BRACE_L,this.parseOperationTypeDefinition,B.BRACE_R);if(0===t.length&&0===n.length)throw this.unexpected();return{kind:j.SCHEMA_EXTENSION,directives:t,operationTypes:n,loc:this.loc(e)}},t.parseScalarTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");var t=this.parseName(),n=this.parseDirectives(!0);if(0===n.length)throw this.unexpected();return{kind:j.SCALAR_TYPE_EXTENSION,name:t,directives:n,loc:this.loc(e)}},t.parseObjectTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");var t=this.parseName(),n=this.parseImplementsInterfaces(),r=this.parseDirectives(!0),i=this.parseFieldsDefinition();if(0===n.length&&0===r.length&&0===i.length)throw this.unexpected();return{kind:j.OBJECT_TYPE_EXTENSION,name:t,interfaces:n,directives:r,fields:i,loc:this.loc(e)}},t.parseInterfaceTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface")
;var t=this.parseName(),n=this.parseImplementsInterfaces(),r=this.parseDirectives(!0),i=this.parseFieldsDefinition();if(0===n.length&&0===r.length&&0===i.length)throw this.unexpected();return{kind:j.INTERFACE_TYPE_EXTENSION,name:t,interfaces:n,directives:r,fields:i,loc:this.loc(e)}},t.parseUnionTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");var t=this.parseName(),n=this.parseDirectives(!0),r=this.parseUnionMemberTypes();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:j.UNION_TYPE_EXTENSION,name:t,directives:n,types:r,loc:this.loc(e)}},t.parseEnumTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");var t=this.parseName(),n=this.parseDirectives(!0),r=this.parseEnumValuesDefinition();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:j.ENUM_TYPE_EXTENSION,name:t,directives:n,values:r,loc:this.loc(e)}},t.parseInputObjectTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");var t=this.parseName(),n=this.parseDirectives(!0),r=this.parseInputFieldsDefinition();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:j.INPUT_OBJECT_TYPE_EXTENSION,name:t,directives:n,fields:r,loc:this.loc(e)}},t.parseDirectiveDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("directive"),this.expectToken(B.AT);var n=this.parseName(),r=this.parseArgumentDefs(),i=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");var o=this.parseDirectiveLocations();return{kind:j.DIRECTIVE_DEFINITION,description:t,name:n,arguments:r,repeatable:i,locations:o,loc:this.loc(e)}},t.parseDirectiveLocations=function(){return this.delimitedMany(B.PIPE,this.parseDirectiveLocation)},t.parseDirectiveLocation=function(){var e=this._lexer.token,t=this.parseName();if(void 0!==$[t.value])return t;throw this.unexpected(e)},t.loc=function(e){var t;if(!0!==(null===(t=this._options)||void 0===t?void 0:t.noLocation))return new U(e,this._lexer.lastToken,this._lexer.source)},t.peek=function(e){return this._lexer.token.kind===e},t.expectToken=function(e){var t=this._lexer.token;if(t.kind===e)return this._lexer.advance(),t;throw r(this._lexer.source,t.start,"Expected ".concat(A(e),", found ").concat(C(t),"."))},t.expectOptionalToken=function(e){var t=this._lexer.token;if(t.kind===e)return this._lexer.advance(),t},t.expectKeyword=function(e){var t=this._lexer.token;if(t.kind!==B.NAME||t.value!==e)throw r(this._lexer.source,t.start,'Expected "'.concat(e,'", found ').concat(C(t),"."));this._lexer.advance()},t.expectOptionalKeyword=function(e){var t=this._lexer.token;return t.kind===B.NAME&&t.value===e&&(this._lexer.advance(),!0)},t.unexpected=function(e){var t=null!=e?e:this._lexer.token;return r(this._lexer.source,t.start,"Unexpected ".concat(C(t),"."))},t.any=function(e,t,n){this.expectToken(e);for(var r=[];!this.expectOptionalToken(n);)r.push(t.call(this));return r},t.optionalMany=function(e,t,n){if(this.expectOptionalToken(e)){var r=[];do{r.push(t.call(this))}while(!this.expectOptionalToken(n));return r}return[]},t.many=function(e,t,n){this.expectToken(e);var r=[];do{r.push(t.call(this))}while(!this.expectOptionalToken(n));return r},t.delimitedMany=function(e,t){this.expectOptionalToken(e);var n=[];do{n.push(t.call(this))}while(this.expectOptionalToken(e));return n},e}(),W={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},H=Object.freeze({}),J={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return T(e.definitions,"\n\n")+"\n"},OperationDefinition:function(e){var t=e.operation,n=e.name,r=k("(",T(e.variableDefinitions,", "),")"),i=T(e.directives," "),o=e.selectionSet;return n||i||r||"query"!==t?T([t,T([n,r]),i,o]," "):o},VariableDefinition:function(e){var t=e.variable,n=e.type,r=e.defaultValue,i=e.directives;return t+": "+n+k(" = ",r)+k(" ",T(i," "))},SelectionSet:function(e){return P(e.selections)},Field:function(e){var t=e.alias,n=e.name,r=e.arguments,i=e.directives,o=e.selectionSet,s=k("",t,": ")+n,a=s+k("(",T(r,", "),")");return a.length>80&&(a=s+k("(\n",D(T(r,"\n")),"\n)")),T([a,T(i," "),o]," ")},Argument:function(e){return e.name+": "+e.value},FragmentSpread:function(e){return"..."+e.name+k(" ",T(e.directives," "))},InlineFragment:function(e){var t=e.typeCondition,n=e.directives,r=e.selectionSet;return T(["...",k("on ",t),T(n," "),r]," ")},FragmentDefinition:function(e){var t=e.name,n=e.typeCondition,r=e.variableDefinitions,i=e.directives,o=e.selectionSet;return"fragment ".concat(t).concat(k("(",T(r,", "),")")," ")+"on ".concat(n," ").concat(k("",T(i," ")," "))+o},IntValue:function(e){return e.value},FloatValue:function(e){return e.value},StringValue:function(e,t){var n=e.value;return e.block?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=-1===e.indexOf("\n"),i=" "===e[0]||"\t"===e[0],o='"'===e[e.length-1],s="\\"===e[e.length-1],a=!r||o||s||n,u="";return!a||r&&i||(u+="\n"+t),u+=t?e.replace(/\n/g,"\n"+t):e,a&&(u+="\n"),'"""'+u.replace(/"""/g,'\\"""')+'"""'}(n,"description"===t?"":"  "):JSON.stringify(n)},BooleanValue:function(e){return e.value?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){return e.value},ListValue:function(e){return"["+T(e.values,", ")+"]"},ObjectValue:function(e){return"{"+T(e.fields,", ")+"}"},ObjectField:function(e){return e.name+": "+e.value},Directive:function(e){return"@"+e.name+k("(",T(e.arguments,", "),")")},NamedType:function(e){return e.name},ListType:function(e){return"["+e.type+"]"},NonNullType:function(e){return e.type+"!"},SchemaDefinition:x(function(e){var t=e.directives,n=e.operationTypes;return T(["schema",T(t," "),P(n)]," ")}),OperationTypeDefinition:function(e){return e.operation+": "+e.type},ScalarTypeDefinition:x(function(e){return T(["scalar",e.name,T(e.directives," ")]," ")}),ObjectTypeDefinition:x(function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return T(["type",t,k("implements ",T(n," & ")),T(r," "),P(i)]," ")}),FieldDefinition:x(function(e){var t=e.name,n=e.arguments,r=e.type,i=e.directives;return t+(M(n)?k("(\n",D(T(n,"\n")),"\n)"):k("(",T(n,", "),")"))+": "+r+k(" ",T(i," "))}),InputValueDefinition:x(function(e){var t=e.name,n=e.type,r=e.defaultValue,i=e.directives;return T([t+": "+n,k("= ",r),T(i," ")]," ")}),InterfaceTypeDefinition:x(function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return T(["interface",t,k("implements ",T(n," & ")),T(r," "),P(i)]," ")}),UnionTypeDefinition:x(function(e){var t=e.name,n=e.directives,r=e.types;return T(["union",t,T(n," "),r&&0!==r.length?"= "+T(r," | "):""]," ")}),EnumTypeDefinition:x(function(e){var t=e.name,n=e.directives,r=e.values;return T(["enum",t,T(n," "),P(r)]," ")}),EnumValueDefinition:x(function(e){return T([e.name,T(e.directives," ")]," ")}),InputObjectTypeDefinition:x(function(e){var t=e.name,n=e.directives,r=e.fields;return T(["input",t,T(n," "),P(r)]," ")}),DirectiveDefinition:x(function(e){var t=e.name,n=e.arguments,r=e.repeatable,i=e.locations;return"directive @"+t+(M(n)?k("(\n",D(T(n,"\n")),"\n)"):k("(",T(n,", "),")"))+(r?" repeatable":"")+" on "+T(i," | ")}),SchemaExtension:function(e){var t=e.directives,n=e.operationTypes;return T(["extend schema",T(t," "),P(n)]," ")},ScalarTypeExtension:function(e){return T(["extend scalar",e.name,T(e.directives," ")]," ")},ObjectTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return T(["extend type",t,k("implements ",T(n," & ")),T(r," "),P(i)]," ")},InterfaceTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return T(["extend interface",t,k("implements ",T(n," & ")),T(r," "),P(i)]," ")},UnionTypeExtension:function(e){var t=e.name,n=e.directives,r=e.types;return T(["extend union",t,T(n," "),r&&0!==r.length?"= "+T(r," | "):""]," ")},EnumTypeExtension:function(e){var t=e.name,n=e.directives,r=e.values;return T(["extend enum",t,T(n," "),P(r)]," ")},InputObjectTypeExtension:function(e){var t=e.name,n=e.directives,r=e.fields;return T(["extend input",t,T(n," "),P(r)]," ")}},Y=n(48),Z=n(80),X=n(49),Q=n(90),ee=n(20),te=n(397),ne=n(37),re=n(26),ie=n(57),oe=n(186),se=function(){return(se=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},ae=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},ue=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},ce=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},le=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},de=new Y.a("GraphQLAPI"),fe=function(e,t,n,r){return void 0===t&&(t={}),{query:e,variables:t,authToken:n,userAgentSuffix:r}},pe=function(){function e(e){this._api=null,this.Auth=ne.a,this.Cache=re.b,this.Credentials=Z.a,this._options=e,de.debug("API Options",this._options)}return e.prototype.getModuleName=function(){return"GraphQLAPI"},e.prototype.configure=function(e){var t=e||{},n=t.API,r=void 0===n?{}:n,i=ce(t,["API"]),o=se(se({},i),r);return de.debug("configure GraphQL API",{opt:o}),o.aws_project_region&&(o=Object.assign({},o,{region:o.aws_project_region,header:{}})),void 0!==o.graphql_headers&&"function"!=typeof o.graphql_headers&&(de.warn("graphql_headers should be a function"),o.graphql_headers=void 0),this._options=Object.assign({},this._options,o),this.createInstance(),this._options},e.prototype.createInstance=function(){return de.debug("create Rest instance"),this._options?(this._api=new oe.a(this._options),this._api.Credentials=this.Credentials,!0):Promise.reject("API not configured")},e.prototype._headerBasedAuth=function(e,t){return void 0===t&&(t={}),ae(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return ue(this,function(l){switch(l.label){case 0:switch(n=this._options,r=n.aws_appsync_authenticationType,i=n.aws_appsync_apiKey,o={},e||r||"AWS_IAM"){case"API_KEY":return[3,1];case"AWS_IAM":return[3,2];case"OPENID_CONNECT":return[3,4];case"AMAZON_COGNITO_USER_POOLS":return[3,11];case"AWS_LAMBDA":return[3,15]}return[3,16];case 1:if(!i)throw new Error(ie.a.NO_API_KEY);return o={Authorization:null,"X-Api-Key":i},[3,17];case 2:return[4,this._ensureCredentials()];case 3:if(!l.sent())throw new Error(ie.a.NO_CREDENTIALS);return[3,17];case 4:return l.trys.push([4,9,,10]),s=void 0,[4,re.b.getItem("federatedInfo")];case 5:return(a=l.sent())?(s=a.token,[3,8]):[3,6];case 6:return[4,ne.a.currentAuthenticatedUser()];case 7:(u=l.sent())&&(s=u.token),l.label=8;case 8:if(!s)throw new Error(ie.a.NO_FEDERATED_JWT);return o={Authorization:s},[3,10];case 9:throw l.sent(),new Error(ie.a.NO_CURRENT_USER);case 10:return[3,17];case 11:return l.trys.push([11,13,,14]),[4,this.Auth.currentSession()];case 12:return c=l.sent(),o={Authorization:c.getAccessToken().getJwtToken()},[3,14];case 13:throw l.sent(),new Error(ie.a.NO_CURRENT_USER);case 14:return[3,17];case 15:if(!t.Authorization)throw new Error(ie.a.NO_AUTH_TOKEN);return o={Authorization:t.Authorization},[3,17];case 16:return o={Authorization:null},[3,17];case 17:return[2,o]}})})},e.prototype.getGraphqlOperationType=function(e){var t=E(e).definitions;return le(t,1)[0].operation},e.prototype.graphql=function(e,t){var n=e.query,r=e.variables,i=void 0===r?{}:r,o=e.authMode,s=e.authToken,a=e.userAgentSuffix,u=E("string"==typeof n?n:I(n)),c=le(u.definitions.filter(function(e){return"OperationDefinition"===e.kind}),1)[0],l=(void 0===c?{}:c).operation,d=t||{};switch(s&&(d.Authorization=s),l){case"query":case"mutation":this.createInstanceIfNotCreated();var f=this._api.getCancellableToken(),p={cancellableToken:f},h=this._graphql({query:u,variables:i,authMode:o,userAgentSuffix:a},d,p);return this._api.updateRequestToBeCancellable(h,f),h;case"subscription":return this._graphqlSubscribe({query:u,variables:i,authMode:o},d);default:throw new Error("invalid operation type: "+l)}},e.prototype._graphql=function(e,t,n){var r=e.query,i=e.variables,o=e.authMode,s=e.userAgentSuffix;return void 0===t&&(t={}),void 0===n&&(n={}),ae(this,void 0,void 0,function(){var e,a,u,c,l,d,f,p,h,v,g,y,m,b,w,_,S,E,C,A,O;return ue(this,function(x){switch(x.label){case 0:return this.createInstanceIfNotCreated(),e=this._options,a=e.aws_appsync_region,u=e.aws_appsync_graphqlEndpoint,c=e.graphql_headers,l=void 0===c?function(){return{}}:c,d=e.graphql_endpoint,f=e.graphql_endpoint_iam_region,h=[{}],(v=!d)?[4,this._headerBasedAuth(o,t)]:[3,2];case 1:v=x.sent(),x.label=2;case 2:return g=[se.apply(void 0,h.concat([v]))],(y=d)?f?[4,this._headerBasedAuth(o,t)]:[3,4]:[3,6];case 3:return m=x.sent(),[3,5];case 4:m={Authorization:null},x.label=5;case 5:y=m,x.label=6;case 6:return b=[se.apply(void 0,g.concat([y]))],[4,l({query:r,variables:i})];case 7:if(p=se.apply(void 0,[se.apply(void 0,[se.apply(void 0,b.concat([x.sent()])),t]),!d&&(O={},O["x-amz-user-agent"]=Object(X.b)(s),O)]),w={query:I(r),variables:i},_=Object.assign({headers:p,body:w,signerServiceInfo:{service:d?"execute-api":"appsync",region:d?f:a}},n),!(S=d||u))throw{data:{},errors:[new L.a("No graphql endpoint provided.")]};x.label=8;case 8:return x.trys.push([8,10,,11]),[4,this._api.post(S,_)];case 9:return E=x.sent(),[3,11];case 10:if(C=x.sent(),this._api.isCancel(C))throw C;return E={data:{},errors:[new L.a(C.message,null,null,null,null,C)]},[3,11];case 11:if((A=E.errors)&&A.length)throw E;return[2,E]}})})},e.prototype.createInstanceIfNotCreated=function(){return ae(this,void 0,void 0,function(){return ue(this,function(e){switch(e.label){case 0:return this._api?[3,2]:[4,this.createInstance()];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e.prototype.isCancel=function(e){return this._api.isCancel(e)},e.prototype.cancel=function(e,t){return this._api.cancel(e,t)},e.prototype.hasCancelToken=function(e){return this._api.hasCancelToken(e)},e.prototype._graphqlSubscribe=function(e,t){var n=e.query,r=e.variables,i=e.authMode,o=e.authToken;void 0===t&&(t={});var s=this._options,a=s.aws_appsync_region,u=s.aws_appsync_graphqlEndpoint,c=s.aws_appsync_authenticationType,l=s.aws_appsync_apiKey,d=s.graphql_headers,f=void 0===d?function(){return{}}:d,p=i||c||"AWS_IAM";if(te.a&&"function"==typeof te.a.subscribe)return te.a.subscribe("",{provider:Q.b,appSyncGraphqlEndpoint:u,authenticationType:p,apiKey:l,query:I(n),region:a,variables:r,graphql_headers:f,additionalHeaders:t,authToken:o});throw de.debug("No pubsub module applied for subscription"),new Error("No pubsub module applied for subscription")},e.prototype._ensureCredentials=function(){var e=this;return this.Credentials.get().then(function(t){if(!t)return!1;var n=e.Credentials.shear(t);return de.debug("set credentials for api",n),!0}).catch(function(e){return de.warn("ensure credentials error",e),!1})},e}(),he=new pe(null);ee.a.register(he)},function(e,t,n){"use strict";n.r(t),n.d(t,"fromUtf8",function(){return r}),n.d(t,"toUtf8",function(){return i});const r=e=>"function"==typeof TextEncoder?function(e){return(new TextEncoder).encode(e)}(e):(e=>{const t=[];for(let n=0,r=e.length;n<r;n++){const r=e.charCodeAt(n);if(r<128)t.push(r);else if(r<2048)t.push(r>>6|192,63&r|128);else if(n+1<e.length&&55296==(64512&r)&&56320==(64512&e.charCodeAt(n+1))){const i=65536+((1023&r)<<10)+(1023&e.charCodeAt(++n));t.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}else t.push(r>>12|224,r>>6&63|128,63&r|128)}return Uint8Array.from(t)})(e),i=e=>"function"==typeof TextDecoder?function(e){return new TextDecoder("utf-8").decode(e)}(e):(e=>{let t="";for(let n=0,r=e.length;n<r;n++){const r=e[n];if(r<128)t+=String.fromCharCode(r);else if(192<=r&&r<224){const i=e[++n];t+=String.fromCharCode((31&r)<<6|63&i)}else if(240<=r&&r<365){const i="%"+[r,e[++n],e[++n],e[++n]].map(e=>e.toString(16)).join("%");t+=decodeURIComponent(i)}else t+=String.fromCharCode((15&r)<<12|(63&e[++n])<<6|63&e[++n])}return t})(e)},function(e,t,n){"use strict";(function(e){function r(){if(i){if("function"==typeof i.getRandomValues)try{return i.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof i.randomBytes)try{return i.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")}var i;if(n.d(t,"a",function(){return r}),"undefined"!=typeof window&&window.crypto&&(i=window.crypto),!i&&"undefined"!=typeof window&&window.msCrypto&&(i=window.msCrypto),!i&&void 0!==e&&e.crypto&&(i=e.crypto),!i)try{i=n(213)}catch(e){}}).call(this,n(60))},function(e){e.exports=JSON.parse('{"name":"@aws-sdk/client-cognito-identity","description":"AWS SDK for JavaScript Cognito Identity Client for Node.js, Browser and React Native","version":"3.6.1","scripts":{"clean":"yarn remove-definitions && yarn remove-dist && yarn remove-documentation","build-documentation":"yarn remove-documentation && typedoc ./","prepublishOnly":"yarn build","pretest":"yarn build:cjs","remove-definitions":"rimraf ./types","remove-dist":"rimraf ./dist","remove-documentation":"rimraf ./docs","test:unit":"mocha **/cjs/**/*.spec.js","test:e2e":"mocha **/cjs/**/*.ispec.js && karma start karma.conf.js","test":"yarn test:unit","build:cjs":"tsc -p tsconfig.json","build:es":"tsc -p tsconfig.es.json","build":"yarn build:cjs && yarn build:es","postbuild":"downlevel-dts types types/ts3.4"},"main":"./dist/cjs/index.js","types":"./types/index.d.ts","module":"./dist/es/index.js","browser":{"./runtimeConfig":"./runtimeConfig.browser"},"react-native":{"./runtimeConfig":"./runtimeConfig.native"},"sideEffects":false,"dependencies":{"@aws-crypto/sha256-browser":"^1.0.0","@aws-crypto/sha256-js":"^1.0.0","@aws-sdk/config-resolver":"3.6.1","@aws-sdk/credential-provider-node":"3.6.1","@aws-sdk/fetch-http-handler":"3.6.1","@aws-sdk/hash-node":"3.6.1","@aws-sdk/invalid-dependency":"3.6.1","@aws-sdk/middleware-content-length":"3.6.1","@aws-sdk/middleware-host-header":"3.6.1","@aws-sdk/middleware-logger":"3.6.1","@aws-sdk/middleware-retry":"3.6.1","@aws-sdk/middleware-serde":"3.6.1","@aws-sdk/middleware-signing":"3.6.1","@aws-sdk/middleware-stack":"3.6.1","@aws-sdk/middleware-user-agent":"3.6.1","@aws-sdk/node-config-provider":"3.6.1","@aws-sdk/node-http-handler":"3.6.1","@aws-sdk/protocol-http":"3.6.1","@aws-sdk/smithy-client":"3.6.1","@aws-sdk/types":"3.6.1","@aws-sdk/url-parser":"3.6.1","@aws-sdk/url-parser-native":"3.6.1","@aws-sdk/util-base64-browser":"3.6.1","@aws-sdk/util-base64-node":"3.6.1","@aws-sdk/util-body-length-browser":"3.6.1","@aws-sdk/util-body-length-node":"3.6.1","@aws-sdk/util-user-agent-browser":"3.6.1","@aws-sdk/util-user-agent-node":"3.6.1","@aws-sdk/util-utf8-browser":"3.6.1","@aws-sdk/util-utf8-node":"3.6.1","tslib":"^2.0.0"},"devDependencies":{"@aws-sdk/client-documentation-generator":"3.6.1","@aws-sdk/client-iam":"3.6.1","@types/chai":"^4.2.11","@types/mocha":"^8.0.4","@types/node":"^12.7.5","downlevel-dts":"0.7.0","jest":"^26.1.0","rimraf":"^3.0.0","typedoc":"^0.19.2","typescript":"~4.1.2"},"engines":{"node":">=10.0.0"},"typesVersions":{"<4.0":{"types/*":["types/ts3.4/*"]}},"author":{"name":"AWS SDK for JavaScript Team","url":"https://aws.amazon.com/javascript/"},"license":"Apache-2.0","homepage":"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-cognito-identity","repository":{"type":"git","url":"https://github.com/aws/aws-sdk-js-v3.git","directory":"clients/client-cognito-identity"}}')},function(e,t,n){var r;e.exports=(r=n(133),function(e){var t=r,n=t.lib,i=n.WordArray,o=n.Hasher,s=t.algo,a=[],u=[];!function(){function t(t){for(var n=e.sqrt(t),r=2;r<=n;r++)if(!(t%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,i=0;i<64;)t(r)&&(i<8&&(a[i]=n(e.pow(r,.5))),u[i]=n(e.pow(r,1/3)),i++),r++}();var c=[],l=s.SHA256=o.extend({_doReset:function(){this._hash=new i.init(a.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],a=n[4],l=n[5],d=n[6],f=n[7],p=0;p<64;p++){if(p<16)c[p]=0|e[t+p];else{var h=c[p-15],v=(h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3,g=c[p-2],y=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;c[p]=v+c[p-7]+y+c[p-16]}var m=r&i^r&o^i&o,b=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),w=f+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&l^~a&d)+u[p]+c[p];f=d,d=l,l=a,a=s+w|0,s=o,o=i,i=r,r=w+(b+m)|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0,n[5]=n[5]+l|0,n[6]=n[6]+d|0,n[7]=n[7]+f|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=e.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=o._createHelper(l),t.HmacSHA256=o._createHmacHelper(l)}(Math),r.SHA256)},function(e,t,n){var r,i,o;e.exports=(o=n(133),i=(r=o).lib.WordArray,r.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var i=[],o=0;o<n;o+=3)for(var s=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,a=0;a<4&&o+.75*a<n;a++)i.push(r.charAt(s>>>6*(3-a)&63));var u=r.charAt(64);if(u)for(;i.length%4;)i.push(u);return i.join("")},parse:function(e){var t=e.length,n=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var o=0;o<n.length;o++)r[n.charCodeAt(o)]=o}var s=n.charAt(64);if(s){var a=e.indexOf(s);-1!==a&&(t=a)}return function(e,t,n){for(var r=[],o=0,s=0;s<t;s++)if(s%4){var a=n[e.charCodeAt(s-1)]<<s%4*2|n[e.charCodeAt(s)]>>>6-s%4*2;r[o>>>2]|=a<<24-o%4*8,o++}return i.create(r,o)}(e,t,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},o.enc.Base64)},function(e){e.exports=JSON.parse('{"name":"@aws-sdk/client-pinpoint","description":"AWS SDK for JavaScript Pinpoint Client for Node.js, Browser and React Native","version":"3.6.1","scripts":{"clean":"yarn remove-definitions && yarn remove-dist && yarn remove-documentation","build-documentation":"yarn remove-documentation && typedoc ./","prepublishOnly":"yarn build","pretest":"yarn build:cjs","remove-definitions":"rimraf ./types","remove-dist":"rimraf ./dist","remove-documentation":"rimraf ./docs","test":"exit 0","build:cjs":"tsc -p tsconfig.json","build:es":"tsc -p tsconfig.es.json","build":"yarn build:cjs && yarn build:es","postbuild":"downlevel-dts types types/ts3.4"},"main":"./dist/cjs/index.js","types":"./types/index.d.ts","module":"./dist/es/index.js","browser":{"./runtimeConfig":"./runtimeConfig.browser"},"react-native":{"./runtimeConfig":"./runtimeConfig.native"},"sideEffects":false,"dependencies":{"@aws-crypto/sha256-browser":"^1.0.0","@aws-crypto/sha256-js":"^1.0.0","@aws-sdk/config-resolver":"3.6.1","@aws-sdk/credential-provider-node":"3.6.1","@aws-sdk/fetch-http-handler":"3.6.1","@aws-sdk/hash-node":"3.6.1","@aws-sdk/invalid-dependency":"3.6.1","@aws-sdk/middleware-content-length":"3.6.1","@aws-sdk/middleware-host-header":"3.6.1","@aws-sdk/middleware-logger":"3.6.1","@aws-sdk/middleware-retry":"3.6.1","@aws-sdk/middleware-serde":"3.6.1","@aws-sdk/middleware-signing":"3.6.1","@aws-sdk/middleware-stack":"3.6.1","@aws-sdk/middleware-user-agent":"3.6.1","@aws-sdk/node-config-provider":"3.6.1","@aws-sdk/node-http-handler":"3.6.1","@aws-sdk/protocol-http":"3.6.1","@aws-sdk/smithy-client":"3.6.1","@aws-sdk/types":"3.6.1","@aws-sdk/url-parser":"3.6.1","@aws-sdk/url-parser-native":"3.6.1","@aws-sdk/util-base64-browser":"3.6.1","@aws-sdk/util-base64-node":"3.6.1","@aws-sdk/util-body-length-browser":"3.6.1","@aws-sdk/util-body-length-node":"3.6.1","@aws-sdk/util-user-agent-browser":"3.6.1","@aws-sdk/util-user-agent-node":"3.6.1","@aws-sdk/util-utf8-browser":"3.6.1","@aws-sdk/util-utf8-node":"3.6.1","tslib":"^2.0.0"},"devDependencies":{"@aws-sdk/client-documentation-generator":"3.6.1","@types/node":"^12.7.5","downlevel-dts":"0.7.0","jest":"^26.1.0","rimraf":"^3.0.0","typedoc":"^0.19.2","typescript":"~4.1.2"},"engines":{"node":">=10.0.0"},"typesVersions":{"<4.0":{"types/*":["types/ts3.4/*"]}},"author":{"name":"AWS SDK for JavaScript Team","url":"https://aws.amazon.com/javascript/"},"license":"Apache-2.0","homepage":"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-pinpoint","repository":{"type":"git","url":"https://github.com/aws/aws-sdk-js-v3.git","directory":"clients/client-pinpoint"}}')},function(e){e.exports=JSON.parse('{"name":"@aws-sdk/client-kinesis","description":"AWS SDK for JavaScript Kinesis Client for Node.js, Browser and React Native","version":"3.6.1","scripts":{"clean":"yarn remove-definitions && yarn remove-dist && yarn remove-documentation","build-documentation":"yarn remove-documentation && typedoc ./","prepublishOnly":"yarn build","pretest":"yarn build:cjs","remove-definitions":"rimraf ./types","remove-dist":"rimraf ./dist","remove-documentation":"rimraf ./docs","test":"exit 0","build:cjs":"tsc -p tsconfig.json","build:es":"tsc -p tsconfig.es.json","build":"yarn build:cjs && yarn build:es","postbuild":"downlevel-dts types types/ts3.4"},"main":"./dist/cjs/index.js","types":"./types/index.d.ts","module":"./dist/es/index.js","browser":{"./runtimeConfig":"./runtimeConfig.browser"},"react-native":{"./runtimeConfig":"./runtimeConfig.native"},"sideEffects":false,"dependencies":{"@aws-crypto/sha256-browser":"^1.0.0","@aws-crypto/sha256-js":"^1.0.0","@aws-sdk/config-resolver":"3.6.1","@aws-sdk/credential-provider-node":"3.6.1","@aws-sdk/eventstream-serde-browser":"3.6.1","@aws-sdk/eventstream-serde-config-resolver":"3.6.1","@aws-sdk/eventstream-serde-node":"3.6.1","@aws-sdk/fetch-http-handler":"3.6.1","@aws-sdk/hash-node":"3.6.1","@aws-sdk/invalid-dependency":"3.6.1","@aws-sdk/middleware-content-length":"3.6.1","@aws-sdk/middleware-host-header":"3.6.1","@aws-sdk/middleware-logger":"3.6.1","@aws-sdk/middleware-retry":"3.6.1","@aws-sdk/middleware-serde":"3.6.1","@aws-sdk/middleware-signing":"3.6.1","@aws-sdk/middleware-stack":"3.6.1","@aws-sdk/middleware-user-agent":"3.6.1","@aws-sdk/node-config-provider":"3.6.1","@aws-sdk/node-http-handler":"3.6.1","@aws-sdk/protocol-http":"3.6.1","@aws-sdk/smithy-client":"3.6.1","@aws-sdk/types":"3.6.1","@aws-sdk/url-parser":"3.6.1","@aws-sdk/url-parser-native":"3.6.1","@aws-sdk/util-base64-browser":"3.6.1","@aws-sdk/util-base64-node":"3.6.1","@aws-sdk/util-body-length-browser":"3.6.1","@aws-sdk/util-body-length-node":"3.6.1","@aws-sdk/util-user-agent-browser":"3.6.1","@aws-sdk/util-user-agent-node":"3.6.1","@aws-sdk/util-utf8-browser":"3.6.1","@aws-sdk/util-utf8-node":"3.6.1","@aws-sdk/util-waiter":"3.6.1","tslib":"^2.0.0"},"devDependencies":{"@aws-sdk/client-documentation-generator":"3.6.1","@types/node":"^12.7.5","downlevel-dts":"0.7.0","jest":"^26.1.0","rimraf":"^3.0.0","typedoc":"^0.19.2","typescript":"~4.1.2"},"engines":{"node":">=10.0.0"},"typesVersions":{"<4.0":{"types/*":["types/ts3.4/*"]}},"author":{"name":"AWS SDK for JavaScript Team","url":"https://aws.amazon.com/javascript/"},"license":"Apache-2.0","homepage":"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-kinesis","repository":{"type":"git","url":"https://github.com/aws/aws-sdk-js-v3.git","directory":"clients/client-kinesis"}}')},function(e){
e.exports=JSON.parse('{"name":"@aws-sdk/client-firehose","description":"AWS SDK for JavaScript Firehose Client for Node.js, Browser and React Native","version":"3.6.1","scripts":{"clean":"yarn remove-definitions && yarn remove-dist && yarn remove-documentation","build-documentation":"yarn remove-documentation && typedoc ./","prepublishOnly":"yarn build","pretest":"yarn build:cjs","remove-definitions":"rimraf ./types","remove-dist":"rimraf ./dist","remove-documentation":"rimraf ./docs","test":"exit 0","build:cjs":"tsc -p tsconfig.json","build:es":"tsc -p tsconfig.es.json","build":"yarn build:cjs && yarn build:es","postbuild":"downlevel-dts types types/ts3.4"},"main":"./dist/cjs/index.js","types":"./types/index.d.ts","module":"./dist/es/index.js","browser":{"./runtimeConfig":"./runtimeConfig.browser"},"react-native":{"./runtimeConfig":"./runtimeConfig.native"},"sideEffects":false,"dependencies":{"@aws-crypto/sha256-browser":"^1.0.0","@aws-crypto/sha256-js":"^1.0.0","@aws-sdk/config-resolver":"3.6.1","@aws-sdk/credential-provider-node":"3.6.1","@aws-sdk/fetch-http-handler":"3.6.1","@aws-sdk/hash-node":"3.6.1","@aws-sdk/invalid-dependency":"3.6.1","@aws-sdk/middleware-content-length":"3.6.1","@aws-sdk/middleware-host-header":"3.6.1","@aws-sdk/middleware-logger":"3.6.1","@aws-sdk/middleware-retry":"3.6.1","@aws-sdk/middleware-serde":"3.6.1","@aws-sdk/middleware-signing":"3.6.1","@aws-sdk/middleware-stack":"3.6.1","@aws-sdk/middleware-user-agent":"3.6.1","@aws-sdk/node-config-provider":"3.6.1","@aws-sdk/node-http-handler":"3.6.1","@aws-sdk/protocol-http":"3.6.1","@aws-sdk/smithy-client":"3.6.1","@aws-sdk/types":"3.6.1","@aws-sdk/url-parser":"3.6.1","@aws-sdk/url-parser-native":"3.6.1","@aws-sdk/util-base64-browser":"3.6.1","@aws-sdk/util-base64-node":"3.6.1","@aws-sdk/util-body-length-browser":"3.6.1","@aws-sdk/util-body-length-node":"3.6.1","@aws-sdk/util-user-agent-browser":"3.6.1","@aws-sdk/util-user-agent-node":"3.6.1","@aws-sdk/util-utf8-browser":"3.6.1","@aws-sdk/util-utf8-node":"3.6.1","tslib":"^2.0.0"},"devDependencies":{"@aws-sdk/client-documentation-generator":"3.6.1","@types/node":"^12.7.5","downlevel-dts":"0.7.0","jest":"^26.1.0","rimraf":"^3.0.0","typedoc":"^0.19.2","typescript":"~4.1.2"},"engines":{"node":">=10.0.0"},"typesVersions":{"<4.0":{"types/*":["types/ts3.4/*"]}},"author":{"name":"AWS SDK for JavaScript Team","url":"https://aws.amazon.com/javascript/"},"license":"Apache-2.0","homepage":"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-firehose","repository":{"type":"git","url":"https://github.com/aws/aws-sdk-js-v3.git","directory":"clients/client-firehose"}}')},function(e,t,n){var r=n(253);e.exports=function(e,t,n){var i=null==e?void 0:r(e,t);return void 0===i?n:i}},function(e){e.exports=JSON.parse('{"name":"@aws-sdk/client-personalize-events","description":"AWS SDK for JavaScript Personalize Events Client for Node.js, Browser and React Native","version":"3.6.1","scripts":{"clean":"yarn remove-definitions && yarn remove-dist && yarn remove-documentation","build-documentation":"yarn remove-documentation && typedoc ./","prepublishOnly":"yarn build","pretest":"yarn build:cjs","remove-definitions":"rimraf ./types","remove-dist":"rimraf ./dist","remove-documentation":"rimraf ./docs","test":"exit 0","build:cjs":"tsc -p tsconfig.json","build:es":"tsc -p tsconfig.es.json","build":"yarn build:cjs && yarn build:es","postbuild":"downlevel-dts types types/ts3.4"},"main":"./dist/cjs/index.js","types":"./types/index.d.ts","module":"./dist/es/index.js","browser":{"./runtimeConfig":"./runtimeConfig.browser"},"react-native":{"./runtimeConfig":"./runtimeConfig.native"},"sideEffects":false,"dependencies":{"@aws-crypto/sha256-browser":"^1.0.0","@aws-crypto/sha256-js":"^1.0.0","@aws-sdk/config-resolver":"3.6.1","@aws-sdk/credential-provider-node":"3.6.1","@aws-sdk/fetch-http-handler":"3.6.1","@aws-sdk/hash-node":"3.6.1","@aws-sdk/invalid-dependency":"3.6.1","@aws-sdk/middleware-content-length":"3.6.1","@aws-sdk/middleware-host-header":"3.6.1","@aws-sdk/middleware-logger":"3.6.1","@aws-sdk/middleware-retry":"3.6.1","@aws-sdk/middleware-serde":"3.6.1","@aws-sdk/middleware-signing":"3.6.1","@aws-sdk/middleware-stack":"3.6.1","@aws-sdk/middleware-user-agent":"3.6.1","@aws-sdk/node-config-provider":"3.6.1","@aws-sdk/node-http-handler":"3.6.1","@aws-sdk/protocol-http":"3.6.1","@aws-sdk/smithy-client":"3.6.1","@aws-sdk/types":"3.6.1","@aws-sdk/url-parser":"3.6.1","@aws-sdk/url-parser-native":"3.6.1","@aws-sdk/util-base64-browser":"3.6.1","@aws-sdk/util-base64-node":"3.6.1","@aws-sdk/util-body-length-browser":"3.6.1","@aws-sdk/util-body-length-node":"3.6.1","@aws-sdk/util-user-agent-browser":"3.6.1","@aws-sdk/util-user-agent-node":"3.6.1","@aws-sdk/util-utf8-browser":"3.6.1","@aws-sdk/util-utf8-node":"3.6.1","tslib":"^2.0.0"},"devDependencies":{"@aws-sdk/client-documentation-generator":"3.6.1","@types/node":"^12.7.5","downlevel-dts":"0.7.0","jest":"^26.1.0","rimraf":"^3.0.0","typedoc":"^0.19.2","typescript":"~4.1.2"},"engines":{"node":">=10.0.0"},"typesVersions":{"<4.0":{"types/*":["types/ts3.4/*"]}},"author":{"name":"AWS SDK for JavaScript Team","url":"https://aws.amazon.com/javascript/"},"license":"Apache-2.0","homepage":"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-personalize-events","repository":{"type":"git","url":"https://github.com/aws/aws-sdk-js-v3.git","directory":"clients/client-personalize-events"}}')},function(e,t,n){"use strict";const r=n(342),i=n(89),o=n(89),s=n(56).buildOptions,a=n(345);t.parse=function(e,t={},n){if(n){!0===n&&(n={});const t=a.validate(e,n);if(!0!==t)throw Error(t.err.msg)}t.parseTrueNumberOnly&&!1!==t.parseNodeValue&&!t.numParseOptions&&(t.numParseOptions={leadingZeros:!1});let u=s(t,o.defaultOptions,o.props);const c=i.getTraversalObj(e,u);return r.convertToJson(c,u)},t.convertTonimn=n(346).convert2nimn,t.getTraversalObj=i.getTraversalObj,t.convertToJson=r.convertToJson,t.convertToJsonString=n(347).convertToJsonString,t.validate=a.validate,t.j2xParser=n(348),t.parseToNimn=function(e,n,r){return t.convertTonimn(t.getTraversalObj(e,r),n,r)}},function(e){e.exports=JSON.parse('{"name":"@aws-sdk/client-s3","description":"AWS SDK for JavaScript S3 Client for Node.js, Browser and React Native","version":"3.6.1","scripts":{"clean":"yarn remove-definitions && yarn remove-dist && yarn remove-documentation","build-documentation":"yarn remove-documentation && typedoc ./","prepublishOnly":"yarn build","pretest":"yarn build:cjs","remove-definitions":"rimraf ./types","remove-dist":"rimraf ./dist","remove-documentation":"rimraf ./docs","test:unit":"mocha **/cjs/**/*.spec.js","test:e2e":"mocha **/cjs/**/*.ispec.js && karma start karma.conf.js","test":"yarn test:unit","build:cjs":"tsc -p tsconfig.json","build:es":"tsc -p tsconfig.es.json","build":"yarn build:cjs && yarn build:es","postbuild":"downlevel-dts types types/ts3.4"},"main":"./dist/cjs/index.js","types":"./types/index.d.ts","module":"./dist/es/index.js","browser":{"./runtimeConfig":"./runtimeConfig.browser"},"react-native":{"./runtimeConfig":"./runtimeConfig.native"},"sideEffects":false,"dependencies":{"@aws-crypto/sha256-browser":"^1.0.0","@aws-crypto/sha256-js":"^1.0.0","@aws-sdk/config-resolver":"3.6.1","@aws-sdk/credential-provider-node":"3.6.1","@aws-sdk/eventstream-serde-browser":"3.6.1","@aws-sdk/eventstream-serde-config-resolver":"3.6.1","@aws-sdk/eventstream-serde-node":"3.6.1","@aws-sdk/fetch-http-handler":"3.6.1","@aws-sdk/hash-blob-browser":"3.6.1","@aws-sdk/hash-node":"3.6.1","@aws-sdk/hash-stream-node":"3.6.1","@aws-sdk/invalid-dependency":"3.6.1","@aws-sdk/md5-js":"3.6.1","@aws-sdk/middleware-apply-body-checksum":"3.6.1","@aws-sdk/middleware-bucket-endpoint":"3.6.1","@aws-sdk/middleware-content-length":"3.6.1","@aws-sdk/middleware-expect-continue":"3.6.1","@aws-sdk/middleware-host-header":"3.6.1","@aws-sdk/middleware-location-constraint":"3.6.1","@aws-sdk/middleware-logger":"3.6.1","@aws-sdk/middleware-retry":"3.6.1","@aws-sdk/middleware-sdk-s3":"3.6.1","@aws-sdk/middleware-serde":"3.6.1","@aws-sdk/middleware-signing":"3.6.1","@aws-sdk/middleware-ssec":"3.6.1","@aws-sdk/middleware-stack":"3.6.1","@aws-sdk/middleware-user-agent":"3.6.1","@aws-sdk/node-config-provider":"3.6.1","@aws-sdk/node-http-handler":"3.6.1","@aws-sdk/protocol-http":"3.6.1","@aws-sdk/smithy-client":"3.6.1","@aws-sdk/types":"3.6.1","@aws-sdk/url-parser":"3.6.1","@aws-sdk/url-parser-native":"3.6.1","@aws-sdk/util-base64-browser":"3.6.1","@aws-sdk/util-base64-node":"3.6.1","@aws-sdk/util-body-length-browser":"3.6.1","@aws-sdk/util-body-length-node":"3.6.1","@aws-sdk/util-user-agent-browser":"3.6.1","@aws-sdk/util-user-agent-node":"3.6.1","@aws-sdk/util-utf8-browser":"3.6.1","@aws-sdk/util-utf8-node":"3.6.1","@aws-sdk/util-waiter":"3.6.1","@aws-sdk/xml-builder":"3.6.1","fast-xml-parser":"^3.16.0","tslib":"^2.0.0"},"devDependencies":{"@aws-sdk/client-documentation-generator":"3.6.1","@types/chai":"^4.2.11","@types/mocha":"^8.0.4","@types/node":"^12.7.5","downlevel-dts":"0.7.0","jest":"^26.1.0","rimraf":"^3.0.0","typedoc":"^0.19.2","typescript":"~4.1.2"},"engines":{"node":">=10.0.0"},"typesVersions":{"<4.0":{"types/*":["types/ts3.4/*"]}},"author":{"name":"AWS SDK for JavaScript Team","url":"https://aws.amazon.com/javascript/"},"license":"Apache-2.0","homepage":"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-s3","repository":{"type":"git","url":"https://github.com/aws/aws-sdk-js-v3.git","directory":"clients/client-s3"}}')},function(e,t,n){"use strict";n.d(t,"a",function(){return g});var r=n(48),i=n(80),o=n(49),s=n(101),a=n(93),u=n(36),c=n.n(u),l=n(19),d=function(){return(d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},f=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},p=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},h=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},v=new r.a("RestClient"),g=function(){function e(e){this._region="us-east-1",this._service="execute-api",this._custom_header=void 0,this._cancelTokenMap=null,this.Credentials=i.a,this._options=e,v.debug("API Options",this._options),null==this._cancelTokenMap&&(this._cancelTokenMap=new WeakMap)}return e.prototype.ajax=function(e,t,n){return f(this,void 0,void 0,function(){var r,i,a,u,c,f,g,y,m,b,w,_,S,E,C=this;return p(this,function(p){switch(p.label){case 0:return v.debug(t,e),a="us-east-1",u="execute-api",c=void 0,"string"==typeof e?(r=this._parseUrl(e),i=e):(i=e.endpoint,c=e.custom_header,a=e.region,u=e.service,r=this._parseUrl(e.endpoint)),f={method:t,url:i,host:r.host,path:r.path,headers:{},data:null,responseType:"json",timeout:0,cancelToken:null},g={},o.a.isReactNative&&(y=o.a.userAgent||"aws-amplify/0.1.x",g={"User-Agent":y}),m=Object.assign({},n),b=m.response,m.body&&("function"==typeof FormData&&m.body instanceof FormData?(g["Content-Type"]="multipart/form-data",f.data=m.body):(g["Content-Type"]="application/json; charset=UTF-8",f.data=JSON.stringify(m.body))),m.responseType&&(f.responseType=m.responseType),m.withCredentials&&(f.withCredentials=m.withCredentials),m.timeout&&(f.timeout=m.timeout),m.cancellableToken&&(f.cancelToken=m.cancellableToken.token),f.signerServiceInfo=m.signerServiceInfo,"function"!=typeof c?[3,2]:[4,c()];case 1:return _=p.sent(),[3,3];case 2:_=void 0,p.label=3;case 3:return w=_,f.headers=d(d(d({},g),w),m.headers),(S=Object(l.parse)(i,!0,!0)).search,E=h(S,["search"]),f.url=Object(l.format)(d(d({},E),{query:d(d({},E.query),m.queryStringParameters||{})})),void 0!==f.headers.Authorization?(f.headers=Object.keys(f.headers).reduce(function(e,t){return f.headers[t]&&(e[t]=f.headers[t]),e},{}),[2,this._request(f,b)]):[2,this.Credentials.get().then(function(r){return C._signed(d({},f),r,b,{region:a,service:u}).catch(function(r){if(s.a.isClockSkewError(r)){var i=r.response.headers,o=i&&(i.date||i.Date),a=new Date(o),u=s.a.getDateFromHeaderString(f.headers["x-amz-date"]);if(s.a.isClockSkewed(a))return s.a.setClockOffset(a.getTime()-u.getTime()),C.ajax(e,t,n)}throw r})},function(e){return v.debug("No credentials available, the request will be unsigned"),C._request(f,b)})]}})})},e.prototype.get=function(e,t){return this.ajax(e,"GET",t)},e.prototype.put=function(e,t){return this.ajax(e,"PUT",t)},e.prototype.patch=function(e,t){return this.ajax(e,"PATCH",t)},e.prototype.post=function(e,t){return this.ajax(e,"POST",t)},e.prototype.del=function(e,t){return this.ajax(e,"DELETE",t)},e.prototype.head=function(e,t){return this.ajax(e,"HEAD",t)},e.prototype.cancel=function(e,t){var n=this._cancelTokenMap.get(e);return!!n&&(n.cancel(t),!0)},e.prototype.hasCancelToken=function(e){return this._cancelTokenMap.has(e)},e.prototype.isCancel=function(e){return c.a.isCancel(e)},e.prototype.getCancellableToken=function(){return c.a.CancelToken.source()},e.prototype.updateRequestToBeCancellable=function(e,t){this._cancelTokenMap.set(e,t)},e.prototype.endpoint=function(e){var t=this,n=this._options.endpoints,r="";return Array.isArray(n)?(n.forEach(function(n){n.name===e&&(r=n.endpoint,"string"==typeof n.region?t._region=n.region:"string"==typeof t._options.region&&(t._region=t._options.region),"string"==typeof n.service?t._service=n.service||"execute-api":t._service="execute-api","function"==typeof n.custom_header?t._custom_header=n.custom_header:t._custom_header=void 0)}),r):r},e.prototype._signed=function(e,t,n,r){var i=r.service,o=r.region,s=e.signerServiceInfo,u=h(e,["signerServiceInfo"]),l=o||this._region||this._options.region,d=i||this._service||this._options.service,f={secret_key:t.secretAccessKey,access_key:t.accessKeyId,session_token:t.sessionToken},p={region:l,service:d},g=Object.assign(p,s),y=a.a.sign(u,f,g);return y.data&&(y.body=y.data),v.debug("Signed Request: ",y),delete y.headers.host,c()(y).then(function(e){return n?e:e.data}).catch(function(e){throw v.debug(e),e})},e.prototype._request=function(e,t){return void 0===t&&(t=!1),c()(e).then(function(e){return t?e:e.data}).catch(function(e){throw v.debug(e),e})},e.prototype._parseUrl=function(e){var t=e.split("/");return{host:t[2],path:"/"+t.slice(3).join("/")}},e}()},function(e,t,n){e.exports=n(349).Observable},function(e,t,n){(function(t){var n;n=function(){return function(e){function t(e,t){var n,r=t,o=e[t],s=o>>4,u=o&=15;t+=1;var c=0,l=1;do{if(t==e.length)return[null,r];c+=(127&(n=e[t++]))*l,l*=128}while(0!=(128&n));var y=t+c;if(y>e.length)return[null,r];var b=new k(s);switch(s){case d:1&e[t++]&&(b.sessionPresent=!0),b.returnCode=e[t++];break;case f:var _=u>>1&3,S=i(e,t),E=a(e,t+=2,S);t+=S,_>0&&(b.messageIdentifier=i(e,t),t+=2);var C=new L(e.subarray(t,y));1==(1&u)&&(C.retained=!0),8==(8&u)&&(C.duplicate=!0),C.qos=_,C.destinationName=E,b.payloadMessage=C;break;case p:case h:case v:case g:case w:b.messageIdentifier=i(e,t);break;case m:b.messageIdentifier=i(e,t),t+=2,b.returnCode=e.subarray(t,y)}return[b,y]}function n(e,t,n){return t[n++]=e>>8,t[n++]=e%256,n}function r(e,t,r,i){return s(e,r,i=n(t,r,i)),i+t}function i(e,t){return 256*e[t]+e[t+1]}function o(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r>2047?(55296<=r&&r<=56319&&(n++,t++),t+=3):r>127?t+=2:t++}return t}function s(e,t,n){for(var r=n,i=0;i<e.length;i++){var o=e.charCodeAt(i);if(55296<=o&&o<=56319){var s=e.charCodeAt(++i);if(isNaN(s))throw new Error(x(O.MALFORMED_UNICODE,[o,s]));o=s-56320+(o-55296<<10)+65536}o<=127?t[r++]=o:o<=2047?(t[r++]=o>>6&31|192,t[r++]=63&o|128):o<=65535?(t[r++]=o>>12&15|224,t[r++]=o>>6&63|128,t[r++]=63&o|128):(t[r++]=o>>18&7|240,t[r++]=o>>12&63|128,t[r++]=o>>6&63|128,t[r++]=63&o|128)}return t}function a(e,t,n){for(var r,i="",o=t;o<t+n;){var s=e[o++];if(s<128)r=s;else{var a=e[o++]-128;if(a<0)throw new Error(x(O.MALFORMED_UTF,[s.toString(16),a.toString(16),""]));if(s<224)r=64*(s-192)+a;else{var u=e[o++]-128;if(u<0)throw new Error(x(O.MALFORMED_UTF,[s.toString(16),a.toString(16),u.toString(16)]));if(s<240)r=4096*(s-224)+64*a+u;else{var c=e[o++]-128;if(c<0)throw new Error(x(O.MALFORMED_UTF,[s.toString(16),a.toString(16),u.toString(16),c.toString(16)]));if(!(s<248))throw new Error(x(O.MALFORMED_UTF,[s.toString(16),a.toString(16),u.toString(16),c.toString(16)]));r=262144*(s-240)+4096*a+64*u+c}}}r>65535&&(r-=65536,i+=String.fromCharCode(55296+(r>>10)),r=56320+(1023&r)),i+=String.fromCharCode(r)}return i}var u,c=e.localStorage||(u={},{setItem:function(e,t){u[e]=t},getItem:function(e){return u[e]},removeItem:function(e){delete u[e]}}),l=1,d=2,f=3,p=4,h=5,v=6,g=7,y=8,m=9,b=10,w=11,_=12,S=13,E=14,C=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){if(!t.hasOwnProperty(n)){var r="Unknown property, "+n+". Valid properties are:";for(var i in t)t.hasOwnProperty(i)&&(r=r+" "+i);throw new Error(r)}if(typeof e[n]!==t[n])throw new Error(x(O.INVALID_TYPE,[typeof e[n],n]))}},A=function(e,t){return function(){return e.apply(t,arguments)}},O={OK:{code:0,text:"AMQJSC0000I OK."},CONNECT_TIMEOUT:{code:1,text:"AMQJSC0001E Connect timed out."},SUBSCRIBE_TIMEOUT:{code:2,text:"AMQJS0002E Subscribe timed out."},UNSUBSCRIBE_TIMEOUT:{code:3,text:"AMQJS0003E Unsubscribe timed out."},PING_TIMEOUT:{code:4,text:"AMQJS0004E Ping timed out."},INTERNAL_ERROR:{code:5,text:"AMQJS0005E Internal error. Error Message: {0}, Stack trace: {1}"},CONNACK_RETURNCODE:{code:6,text:"AMQJS0006E Bad Connack return code:{0} {1}."},SOCKET_ERROR:{code:7,text:"AMQJS0007E Socket error:{0}."},SOCKET_CLOSE:{code:8,text:"AMQJS0008I Socket closed."},MALFORMED_UTF:{code:9,text:"AMQJS0009E Malformed UTF data:{0} {1} {2}."},UNSUPPORTED:{code:10,text:"AMQJS0010E {0} is not supported by this browser."},INVALID_STATE:{code:11,text:"AMQJS0011E Invalid state {0}."},INVALID_TYPE:{code:12,text:"AMQJS0012E Invalid type {0} for {1}."},INVALID_ARGUMENT:{code:13,text:"AMQJS0013E Invalid argument {0} for {1}."},UNSUPPORTED_OPERATION:{code:14,text:"AMQJS0014E Unsupported operation."},INVALID_STORED_DATA:{code:15,text:"AMQJS0015E Invalid data in local storage key={0} value={1}."},INVALID_MQTT_MESSAGE_TYPE:{code:16,text:"AMQJS0016E Invalid MQTT message type {0}."},MALFORMED_UNICODE:{code:17,text:"AMQJS0017E Malformed Unicode string:{0} {1}."},BUFFER_FULL:{code:18,text:"AMQJS0018E Message buffer is full, maximum buffer size: {0}."}},I={0:"Connection Accepted",1:"Connection Refused: unacceptable protocol version",2:"Connection Refused: identifier rejected",3:"Connection Refused: server unavailable",4:"Connection Refused: bad user name or password",5:"Connection Refused: not authorized"},x=function(e,t){var n=e.text;if(t)for(var r,i,o=0;o<t.length;o++)if(r="{"+o+"}",(i=n.indexOf(r))>0){var s=n.substring(0,i),a=n.substring(i+r.length);n=s+t[o]+a}return n},T=[0,6,77,81,73,115,100,112,3],P=[0,4,77,81,84,84,4],k=function(e,t){for(var n in this.type=e,t)t.hasOwnProperty(n)&&(this[n]=t[n])};k.prototype.encode=function(){var e,t=(15&this.type)<<4,i=0,s=[],a=0;switch(void 0!==this.messageIdentifier&&(i+=2),this.type){case l:switch(this.mqttVersion){case 3:i+=T.length+3;break;case 4:i+=P.length+3}i+=o(this.clientId)+2,void 0!==this.willMessage&&(i+=o(this.willMessage.destinationName)+2,(e=this.willMessage.payloadBytes)instanceof Uint8Array||(e=new Uint8Array(c)),i+=e.byteLength+2),void 0!==this.userName&&(i+=o(this.userName)+2),void 0!==this.password&&(i+=o(this.password)+2);break;case y:t|=2;for(var u=0;u<this.topics.length;u++)s[u]=o(this.topics[u]),i+=s[u]+2;i+=this.requestedQos.length;break;case b:for(t|=2,u=0;u<this.topics.length;u++)s[u]=o(this.topics[u]),i+=s[u]+2;break;case v:t|=2;break;case f:this.payloadMessage.duplicate&&(t|=8),t=t|=this.payloadMessage.qos<<1,this.payloadMessage.retained&&(t|=1),i+=(a=o(this.payloadMessage.destinationName))+2;var c=this.payloadMessage.payloadBytes;i+=c.byteLength,c instanceof ArrayBuffer?c=new Uint8Array(c):c instanceof Uint8Array||(c=new Uint8Array(c.buffer))}var d=function(e){var t=new Array(1),n=0;do{var r=e%128;(e>>=7)>0&&(r|=128),t[n++]=r}while(e>0&&n<4);return t}(i),p=d.length+1,h=new ArrayBuffer(i+p),g=new Uint8Array(h);if(g[0]=t,g.set(d,1),this.type==f)p=r(this.payloadMessage.destinationName,a,g,p);else if(this.type==l){switch(this.mqttVersion){case 3:g.set(T,p),p+=T.length;break;case 4:g.set(P,p),p+=P.length}var m=0;this.cleanSession&&(m=2),void 0!==this.willMessage&&(m|=4,m|=this.willMessage.qos<<3,this.willMessage.retained&&(m|=32)),void 0!==this.userName&&(m|=128),void 0!==this.password&&(m|=64),g[p++]=m,p=n(this.keepAliveInterval,g,p)}switch(void 0!==this.messageIdentifier&&(p=n(this.messageIdentifier,g,p)),this.type){case l:p=r(this.clientId,o(this.clientId),g,p),void 0!==this.willMessage&&(p=r(this.willMessage.destinationName,o(this.willMessage.destinationName),g,p),p=n(e.byteLength,g,p),g.set(e,p),p+=e.byteLength),void 0!==this.userName&&(p=r(this.userName,o(this.userName),g,p)),void 0!==this.password&&(p=r(this.password,o(this.password),g,p));break;case f:g.set(c,p);break;case y:for(u=0;u<this.topics.length;u++)p=r(this.topics[u],s[u],g,p),g[p++]=this.requestedQos[u];break;case b:for(u=0;u<this.topics.length;u++)p=r(this.topics[u],s[u],g,p)}return h};var D=function(e,t){this._client=e,this._keepAliveInterval=1e3*t,this.isReset=!1;var n=new k(_).encode(),r=function(e){return function(){return i.apply(e)}},i=function(){this.isReset?(this.isReset=!1,this._client._trace("Pinger.doPing","send PINGREQ"),this._client.socket.send(n),this.timeout=setTimeout(r(this),this._keepAliveInterval)):(this._client._trace("Pinger.doPing","Timed out"),this._client._disconnected(O.PING_TIMEOUT.code,x(O.PING_TIMEOUT)))};this.reset=function(){this.isReset=!0,clearTimeout(this.timeout),this._keepAliveInterval>0&&(this.timeout=setTimeout(r(this),this._keepAliveInterval))},this.cancel=function(){clearTimeout(this.timeout)}},N=function(e,t,n,r){t||(t=30),this.timeout=setTimeout(function(e,t,n){return function(){return e.apply(t,n)}}(n,e,r),1e3*t),this.cancel=function(){clearTimeout(this.timeout)}},M=function(t,n,r,i,o){if(!("WebSocket"in e)||null===e.WebSocket)throw new Error(x(O.UNSUPPORTED,["WebSocket"]));if(!("ArrayBuffer"in e)||null===e.ArrayBuffer)throw new Error(x(O.UNSUPPORTED,["ArrayBuffer"]));for(var s in this._trace("Paho.Client",t,n,r,i,o),this.host=n,this.port=r,this.path=i,this.uri=t,this.clientId=o,this._wsuri=null,this._localKey=n+":"+r+("/mqtt"!=i?":"+i:"")+":"+o+":",this._msg_queue=[],this._buffered_msg_queue=[],this._sentMessages={},this._receivedMessages={},this._notify_msg_sent={},this._message_identifier=1,this._sequence=0,c)0!==s.indexOf("Sent:"+this._localKey)&&0!==s.indexOf("Received:"+this._localKey)||this.restore(s)};M.prototype.host=null,M.prototype.port=null,M.prototype.path=null,M.prototype.uri=null,M.prototype.clientId=null,M.prototype.socket=null,M.prototype.connected=!1,M.prototype.maxMessageIdentifier=65536,M.prototype.connectOptions=null,M.prototype.hostIndex=null,M.prototype.onConnected=null,M.prototype.onConnectionLost=null,M.prototype.onMessageDelivered=null,M.prototype.onMessageArrived=null,M.prototype.traceFunction=null,M.prototype._msg_queue=null,M.prototype._buffered_msg_queue=null,M.prototype._connectTimeout=null,M.prototype.sendPinger=null,M.prototype.receivePinger=null,M.prototype._reconnectInterval=1,M.prototype._reconnecting=!1,M.prototype._reconnectTimeout=null,M.prototype.disconnectedPublishing=!1,M.prototype.disconnectedBufferSize=5e3,M.prototype.receiveBuffer=null,M.prototype._traceBuffer=null,M.prototype._MAX_TRACE_ENTRIES=100,M.prototype.connect=function(e){var t=this._traceMask(e,"password");if(this._trace("Client.connect",t,this.socket,this.connected),this.connected)throw new Error(x(O.INVALID_STATE,["already connected"]));if(this.socket)throw new Error(x(O.INVALID_STATE,["already connected"]));this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1),this.connectOptions=e,this._reconnectInterval=1,this._reconnecting=!1,e.uris?(this.hostIndex=0,this._doConnect(e.uris[0])):this._doConnect(this.uri)},M.prototype.subscribe=function(e,t){if(this._trace("Client.subscribe",e,t),!this.connected)throw new Error(x(O.INVALID_STATE,["not connected"]));var n=new k(y);n.topics=e.constructor===Array?e:[e],void 0===t.qos&&(t.qos=0),n.requestedQos=[];for(var r=0;r<n.topics.length;r++)n.requestedQos[r]=t.qos;t.onSuccess&&(n.onSuccess=function(e){t.onSuccess({invocationContext:t.invocationContext,grantedQos:e})}),t.onFailure&&(n.onFailure=function(e){t.onFailure({invocationContext:t.invocationContext,errorCode:e,errorMessage:x(e)})}),t.timeout&&(n.timeOut=new N(this,t.timeout,t.onFailure,[{invocationContext:t.invocationContext,errorCode:O.SUBSCRIBE_TIMEOUT.code,errorMessage:x(O.SUBSCRIBE_TIMEOUT)}])),this._requires_ack(n),this._schedule_message(n)},M.prototype.unsubscribe=function(e,t){if(this._trace("Client.unsubscribe",e,t),!this.connected)throw new Error(x(O.INVALID_STATE,["not connected"]));var n=new k(b);n.topics=e.constructor===Array?e:[e],t.onSuccess&&(n.callback=function(){t.onSuccess({invocationContext:t.invocationContext})}),t.timeout&&(n.timeOut=new N(this,t.timeout,t.onFailure,[{invocationContext:t.invocationContext,errorCode:O.UNSUBSCRIBE_TIMEOUT.code,errorMessage:x(O.UNSUBSCRIBE_TIMEOUT)}])),this._requires_ack(n),this._schedule_message(n)},M.prototype.send=function(e){this._trace("Client.send",e);var t=new k(f);if(t.payloadMessage=e,this.connected)e.qos>0?this._requires_ack(t):this.onMessageDelivered&&(this._notify_msg_sent[t]=this.onMessageDelivered(t.payloadMessage)),this._schedule_message(t);else{if(!this._reconnecting||!this.disconnectedPublishing)throw new Error(x(O.INVALID_STATE,["not connected"]));if(Object.keys(this._sentMessages).length+this._buffered_msg_queue.length>this.disconnectedBufferSize)throw new Error(x(O.BUFFER_FULL,[this.disconnectedBufferSize]));e.qos>0?this._requires_ack(t):(t.sequence=++this._sequence,this._buffered_msg_queue.unshift(t))}},M.prototype.disconnect=function(){if(this._trace("Client.disconnect"),this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1),!this.socket)throw new Error(x(O.INVALID_STATE,["not connecting or connected"]));var e=new k(E);this._notify_msg_sent[e]=A(this._disconnected,this),this._schedule_message(e)},M.prototype.getTraceLog=function(){if(null!==this._traceBuffer){for(var e in this._trace("Client.getTraceLog",new Date),this._trace("Client.getTraceLog in flight messages",this._sentMessages.length),this._sentMessages)this._trace("_sentMessages ",e,this._sentMessages[e]);for(var e in this._receivedMessages)this._trace("_receivedMessages ",e,this._receivedMessages[e]);return this._traceBuffer}},M.prototype.startTrace=function(){null===this._traceBuffer&&(this._traceBuffer=[]),this._trace("Client.startTrace",new Date,"@VERSION@-@BUILDLEVEL@")},M.prototype.stopTrace=function(){delete this._traceBuffer},M.prototype._doConnect=function(e){if(this.connectOptions.useSSL){var t=e.split(":");t[0]="wss",e=t.join(":")}this._wsuri=e,this.connected=!1,this.connectOptions.mqttVersion<4?this.socket=new WebSocket(e,["mqttv3.1"]):this.socket=new WebSocket(e,["mqtt"]),this.socket.binaryType="arraybuffer",this.socket.onopen=A(this._on_socket_open,this),this.socket.onmessage=A(this._on_socket_message,this),this.socket.onerror=A(this._on_socket_error,this),this.socket.onclose=A(this._on_socket_close,this),this.sendPinger=new D(this,this.connectOptions.keepAliveInterval),this.receivePinger=new D(this,this.connectOptions.keepAliveInterval),this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null),this._connectTimeout=new N(this,this.connectOptions.timeout,this._disconnected,[O.CONNECT_TIMEOUT.code,x(O.CONNECT_TIMEOUT)])},M.prototype._schedule_message=function(e){this._msg_queue.unshift(e),this.connected&&this._process_queue()},M.prototype.store=function(e,t){var n={type:t.type,messageIdentifier:t.messageIdentifier,version:1};if(t.type!==f)throw Error(x(O.INVALID_STORED_DATA,[e+this._localKey+t.messageIdentifier,n]));t.pubRecReceived&&(n.pubRecReceived=!0),n.payloadMessage={};for(var r="",i=t.payloadMessage.payloadBytes,o=0;o<i.length;o++)i[o]<=15?r=r+"0"+i[o].toString(16):r+=i[o].toString(16);n.payloadMessage.payloadHex=r,n.payloadMessage.qos=t.payloadMessage.qos,n.payloadMessage.destinationName=t.payloadMessage.destinationName,t.payloadMessage.duplicate&&(n.payloadMessage.duplicate=!0),t.payloadMessage.retained&&(n.payloadMessage.retained=!0),0===e.indexOf("Sent:")&&(void 0===t.sequence&&(t.sequence=++this._sequence),n.sequence=t.sequence),c.setItem(e+this._localKey+t.messageIdentifier,JSON.stringify(n))},M.prototype.restore=function(e){var t=c.getItem(e),n=JSON.parse(t),r=new k(n.type,n);if(n.type!==f)throw Error(x(O.INVALID_STORED_DATA,[e,t]));for(var i=n.payloadMessage.payloadHex,o=new ArrayBuffer(i.length/2),s=new Uint8Array(o),a=0;i.length>=2;){var u=parseInt(i.substring(0,2),16);i=i.substring(2,i.length),s[a++]=u}var l=new L(s);l.qos=n.payloadMessage.qos,l.destinationName=n.payloadMessage.destinationName,n.payloadMessage.duplicate&&(l.duplicate=!0),n.payloadMessage.retained&&(l.retained=!0),r.payloadMessage=l,0===e.indexOf("Sent:"+this._localKey)?(r.payloadMessage.duplicate=!0,this._sentMessages[r.messageIdentifier]=r):0===e.indexOf("Received:"+this._localKey)&&(this._receivedMessages[r.messageIdentifier]=r)},M.prototype._process_queue=function(){for(var e=null;e=this._msg_queue.pop();)this._socket_send(e),this._notify_msg_sent[e]&&(this._notify_msg_sent[e](),delete this._notify_msg_sent[e])},M.prototype._requires_ack=function(e){var t=Object.keys(this._sentMessages).length;if(t>this.maxMessageIdentifier)throw Error("Too many messages:"+t);for(;void 0!==this._sentMessages[this._message_identifier];)this._message_identifier++;e.messageIdentifier=this._message_identifier,this._sentMessages[e.messageIdentifier]=e,e.type===f&&this.store("Sent:",e),this._message_identifier===this.maxMessageIdentifier&&(this._message_identifier=1)},M.prototype._on_socket_open=function(){var e=new k(l,this.connectOptions);e.clientId=this.clientId,this._socket_send(e)},M.prototype._on_socket_message=function(e){this._trace("Client._on_socket_message",e.data);for(var t=this._deframeMessages(e.data),n=0;n<t.length;n+=1)this._handleMessage(t[n])},M.prototype._deframeMessages=function(e){var n=new Uint8Array(e),r=[];if(this.receiveBuffer){var i=new Uint8Array(this.receiveBuffer.length+n.length);i.set(this.receiveBuffer),i.set(n,this.receiveBuffer.length),n=i,delete this.receiveBuffer}try{for(var o=0;o<n.length;){
var s=t(n,o),a=s[0];if(o=s[1],null===a)break;r.push(a)}o<n.length&&(this.receiveBuffer=n.subarray(o))}catch(e){var u="undefined"==e.hasOwnProperty("stack")?e.stack.toString():"No Error Stack Available";return void this._disconnected(O.INTERNAL_ERROR.code,x(O.INTERNAL_ERROR,[e.message,u]))}return r},M.prototype._handleMessage=function(e){this._trace("Client._handleMessage",e);try{switch(e.type){case d:if(this._connectTimeout.cancel(),this._reconnectTimeout&&this._reconnectTimeout.cancel(),this.connectOptions.cleanSession){for(var t in this._sentMessages){var n=this._sentMessages[t];c.removeItem("Sent:"+this._localKey+n.messageIdentifier)}for(var t in this._sentMessages={},this._receivedMessages){var r=this._receivedMessages[t];c.removeItem("Received:"+this._localKey+r.messageIdentifier)}this._receivedMessages={}}if(0!==e.returnCode){this._disconnected(O.CONNACK_RETURNCODE.code,x(O.CONNACK_RETURNCODE,[e.returnCode,I[e.returnCode]]));break}this.connected=!0,this.connectOptions.uris&&(this.hostIndex=this.connectOptions.uris.length);var i=[];for(var o in this._sentMessages)this._sentMessages.hasOwnProperty(o)&&i.push(this._sentMessages[o]);if(this._buffered_msg_queue.length>0)for(var s=null;s=this._buffered_msg_queue.pop();)i.push(s),this.onMessageDelivered&&(this._notify_msg_sent[s]=this.onMessageDelivered(s.payloadMessage));i=i.sort(function(e,t){return e.sequence-t.sequence});for(var a=0,u=i.length;a<u;a++)if((n=i[a]).type==f&&n.pubRecReceived){var l=new k(v,{messageIdentifier:n.messageIdentifier});this._schedule_message(l)}else this._schedule_message(n);this.connectOptions.onSuccess&&this.connectOptions.onSuccess({invocationContext:this.connectOptions.invocationContext});var y=!1;this._reconnecting&&(y=!0,this._reconnectInterval=1,this._reconnecting=!1),this._connected(y,this._wsuri),this._process_queue();break;case f:this._receivePublish(e);break;case p:(n=this._sentMessages[e.messageIdentifier])&&(delete this._sentMessages[e.messageIdentifier],c.removeItem("Sent:"+this._localKey+e.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(n.payloadMessage));break;case h:(n=this._sentMessages[e.messageIdentifier])&&(n.pubRecReceived=!0,l=new k(v,{messageIdentifier:e.messageIdentifier}),this.store("Sent:",n),this._schedule_message(l));break;case v:r=this._receivedMessages[e.messageIdentifier],c.removeItem("Received:"+this._localKey+e.messageIdentifier),r&&(this._receiveMessage(r),delete this._receivedMessages[e.messageIdentifier]);var b=new k(g,{messageIdentifier:e.messageIdentifier});this._schedule_message(b);break;case g:n=this._sentMessages[e.messageIdentifier],delete this._sentMessages[e.messageIdentifier],c.removeItem("Sent:"+this._localKey+e.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(n.payloadMessage);break;case m:(n=this._sentMessages[e.messageIdentifier])&&(n.timeOut&&n.timeOut.cancel(),128===e.returnCode[0]?n.onFailure&&n.onFailure(e.returnCode):n.onSuccess&&n.onSuccess(e.returnCode),delete this._sentMessages[e.messageIdentifier]);break;case w:(n=this._sentMessages[e.messageIdentifier])&&(n.timeOut&&n.timeOut.cancel(),n.callback&&n.callback(),delete this._sentMessages[e.messageIdentifier]);break;case S:this.sendPinger.reset();break;default:this._disconnected(O.INVALID_MQTT_MESSAGE_TYPE.code,x(O.INVALID_MQTT_MESSAGE_TYPE,[e.type]))}}catch(e){var _="undefined"==e.hasOwnProperty("stack")?e.stack.toString():"No Error Stack Available";return void this._disconnected(O.INTERNAL_ERROR.code,x(O.INTERNAL_ERROR,[e.message,_]))}},M.prototype._on_socket_error=function(e){this._reconnecting||this._disconnected(O.SOCKET_ERROR.code,x(O.SOCKET_ERROR,[e.data]))},M.prototype._on_socket_close=function(){this._reconnecting||this._disconnected(O.SOCKET_CLOSE.code,x(O.SOCKET_CLOSE))},M.prototype._socket_send=function(e){if(1==e.type){var t=this._traceMask(e,"password");this._trace("Client._socket_send",t)}else this._trace("Client._socket_send",e);this.socket.send(e.encode()),this.sendPinger.reset()},M.prototype._receivePublish=function(e){switch(e.payloadMessage.qos){case"undefined":case 0:this._receiveMessage(e);break;case 1:var t=new k(p,{messageIdentifier:e.messageIdentifier});this._schedule_message(t),this._receiveMessage(e);break;case 2:this._receivedMessages[e.messageIdentifier]=e,this.store("Received:",e);var n=new k(h,{messageIdentifier:e.messageIdentifier});this._schedule_message(n);break;default:throw Error("Invaild qos="+e.payloadMessage.qos)}},M.prototype._receiveMessage=function(e){this.onMessageArrived&&this.onMessageArrived(e.payloadMessage)},M.prototype._connected=function(e,t){this.onConnected&&this.onConnected(e,t)},M.prototype._reconnect=function(){this._trace("Client._reconnect"),this.connected||(this._reconnecting=!0,this.sendPinger.cancel(),this.receivePinger.cancel(),this._reconnectInterval<128&&(this._reconnectInterval=2*this._reconnectInterval),this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri))},M.prototype._disconnected=function(e,t){if(this._trace("Client._disconnected",e,t),void 0!==e&&this._reconnecting)this._reconnectTimeout=new N(this,this._reconnectInterval,this._reconnect);else if(this.sendPinger.cancel(),this.receivePinger.cancel(),this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null),this._msg_queue=[],this._buffered_msg_queue=[],this._notify_msg_sent={},this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,1===this.socket.readyState&&this.socket.close(),delete this.socket),this.connectOptions.uris&&this.hostIndex<this.connectOptions.uris.length-1)this.hostIndex++,this._doConnect(this.connectOptions.uris[this.hostIndex]);else if(void 0===e&&(e=O.OK.code,t=x(O.OK)),this.connected){if(this.connected=!1,this.onConnectionLost&&this.onConnectionLost({errorCode:e,errorMessage:t,reconnect:this.connectOptions.reconnect,uri:this._wsuri}),e!==O.OK.code&&this.connectOptions.reconnect)return this._reconnectInterval=1,void this._reconnect()}else 4===this.connectOptions.mqttVersion&&!1===this.connectOptions.mqttVersionExplicit?(this._trace("Failed to connect V4, dropping back to V3"),this.connectOptions.mqttVersion=3,this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri)):this.connectOptions.onFailure&&this.connectOptions.onFailure({invocationContext:this.connectOptions.invocationContext,errorCode:e,errorMessage:t})},M.prototype._trace=function(){if(this.traceFunction){var e=Array.prototype.slice.call(arguments);for(var t in e)void 0!==e[t]&&e.splice(t,1,JSON.stringify(e[t]));var n=e.join("");this.traceFunction({severity:"Debug",message:n})}if(null!==this._traceBuffer){t=0;for(var r=arguments.length;t<r;t++)this._traceBuffer.length==this._MAX_TRACE_ENTRIES&&this._traceBuffer.shift(),0===t||void 0===arguments[t]?this._traceBuffer.push(arguments[t]):this._traceBuffer.push("  "+JSON.stringify(arguments[t]))}},M.prototype._traceMask=function(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=r==t?"******":e[r]);return n};var L=function(e){var t,n;if(!("string"==typeof e||e instanceof ArrayBuffer||ArrayBuffer.isView(e)&&!(e instanceof DataView)))throw x(O.INVALID_ARGUMENT,[e,"newPayload"]);t=e;var r=0,i=!1,u=!1;Object.defineProperties(this,{payloadString:{enumerable:!0,get:function(){return"string"==typeof t?t:a(t,0,t.length)}},payloadBytes:{enumerable:!0,get:function(){if("string"==typeof t){var e=new ArrayBuffer(o(t)),n=new Uint8Array(e);return s(t,n,0),n}return t}},destinationName:{enumerable:!0,get:function(){return n},set:function(e){if("string"!=typeof e)throw new Error(x(O.INVALID_ARGUMENT,[e,"newDestinationName"]));n=e}},qos:{enumerable:!0,get:function(){return r},set:function(e){if(0!==e&&1!==e&&2!==e)throw new Error("Invalid argument:"+e);r=e}},retained:{enumerable:!0,get:function(){return i},set:function(e){if("boolean"!=typeof e)throw new Error(x(O.INVALID_ARGUMENT,[e,"newRetained"]));i=e}},topic:{enumerable:!0,get:function(){return n},set:function(e){n=e}},duplicate:{enumerable:!0,get:function(){return u},set:function(e){u=e}}})};return{Client:function(e,t,n,r){var i;if("string"!=typeof e)throw new Error(x(O.INVALID_TYPE,[typeof e,"host"]));if(2==arguments.length){r=t;var o=(i=e).match(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/);if(!o)throw new Error(x(O.INVALID_ARGUMENT,[e,"host"]));e=o[4]||o[2],t=parseInt(o[7]),n=o[8]}else{if(3==arguments.length&&(r=n,n="/mqtt"),"number"!=typeof t||t<0)throw new Error(x(O.INVALID_TYPE,[typeof t,"port"]));if("string"!=typeof n)throw new Error(x(O.INVALID_TYPE,[typeof n,"path"]));var s=-1!==e.indexOf(":")&&"["!==e.slice(0,1)&&"]"!==e.slice(-1);i="ws://"+(s?"["+e+"]":e)+":"+t+n}for(var a=0,u=0;u<r.length;u++){var c=r.charCodeAt(u);55296<=c&&c<=56319&&u++,a++}if("string"!=typeof r||a>65535)throw new Error(x(O.INVALID_ARGUMENT,[r,"clientId"]));var l=new M(i,e,t,n,r);Object.defineProperties(this,{host:{get:function(){return e},set:function(){throw new Error(x(O.UNSUPPORTED_OPERATION))}},port:{get:function(){return t},set:function(){throw new Error(x(O.UNSUPPORTED_OPERATION))}},path:{get:function(){return n},set:function(){throw new Error(x(O.UNSUPPORTED_OPERATION))}},uri:{get:function(){return i},set:function(){throw new Error(x(O.UNSUPPORTED_OPERATION))}},clientId:{get:function(){return l.clientId},set:function(){throw new Error(x(O.UNSUPPORTED_OPERATION))}},onConnected:{get:function(){return l.onConnected},set:function(e){if("function"!=typeof e)throw new Error(x(O.INVALID_TYPE,[typeof e,"onConnected"]));l.onConnected=e}},disconnectedPublishing:{get:function(){return l.disconnectedPublishing},set:function(e){l.disconnectedPublishing=e}},disconnectedBufferSize:{get:function(){return l.disconnectedBufferSize},set:function(e){l.disconnectedBufferSize=e}},onConnectionLost:{get:function(){return l.onConnectionLost},set:function(e){if("function"!=typeof e)throw new Error(x(O.INVALID_TYPE,[typeof e,"onConnectionLost"]));l.onConnectionLost=e}},onMessageDelivered:{get:function(){return l.onMessageDelivered},set:function(e){if("function"!=typeof e)throw new Error(x(O.INVALID_TYPE,[typeof e,"onMessageDelivered"]));l.onMessageDelivered=e}},onMessageArrived:{get:function(){return l.onMessageArrived},set:function(e){if("function"!=typeof e)throw new Error(x(O.INVALID_TYPE,[typeof e,"onMessageArrived"]));l.onMessageArrived=e}},trace:{get:function(){return l.traceFunction},set:function(e){if("function"!=typeof e)throw new Error(x(O.INVALID_TYPE,[typeof e,"onTrace"]));l.traceFunction=e}}}),this.connect=function(e){if(C(e=e||{},{timeout:"number",userName:"string",password:"string",willMessage:"object",keepAliveInterval:"number",cleanSession:"boolean",useSSL:"boolean",invocationContext:"object",onSuccess:"function",onFailure:"function",hosts:"object",ports:"object",reconnect:"boolean",mqttVersion:"number",mqttVersionExplicit:"boolean",uris:"object"}),void 0===e.keepAliveInterval&&(e.keepAliveInterval=60),e.mqttVersion>4||e.mqttVersion<3)throw new Error(x(O.INVALID_ARGUMENT,[e.mqttVersion,"connectOptions.mqttVersion"]));if(void 0===e.mqttVersion?(e.mqttVersionExplicit=!1,e.mqttVersion=4):e.mqttVersionExplicit=!0,void 0!==e.password&&void 0===e.userName)throw new Error(x(O.INVALID_ARGUMENT,[e.password,"connectOptions.password"]));if(e.willMessage){if(!(e.willMessage instanceof L))throw new Error(x(O.INVALID_TYPE,[e.willMessage,"connectOptions.willMessage"]));if(e.willMessage.stringPayload=null,void 0===e.willMessage.destinationName)throw new Error(x(O.INVALID_TYPE,[typeof e.willMessage.destinationName,"connectOptions.willMessage.destinationName"]))}if(void 0===e.cleanSession&&(e.cleanSession=!0),e.hosts){if(!(e.hosts instanceof Array))throw new Error(x(O.INVALID_ARGUMENT,[e.hosts,"connectOptions.hosts"]));if(e.hosts.length<1)throw new Error(x(O.INVALID_ARGUMENT,[e.hosts,"connectOptions.hosts"]));for(var t=!1,r=0;r<e.hosts.length;r++){if("string"!=typeof e.hosts[r])throw new Error(x(O.INVALID_TYPE,[typeof e.hosts[r],"connectOptions.hosts["+r+"]"]));if(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/.test(e.hosts[r])){if(0===r)t=!0;else if(!t)throw new Error(x(O.INVALID_ARGUMENT,[e.hosts[r],"connectOptions.hosts["+r+"]"]))}else if(t)throw new Error(x(O.INVALID_ARGUMENT,[e.hosts[r],"connectOptions.hosts["+r+"]"]))}if(t)e.uris=e.hosts;else{if(!e.ports)throw new Error(x(O.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));if(!(e.ports instanceof Array))throw new Error(x(O.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));if(e.hosts.length!==e.ports.length)throw new Error(x(O.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));for(e.uris=[],r=0;r<e.hosts.length;r++){if("number"!=typeof e.ports[r]||e.ports[r]<0)throw new Error(x(O.INVALID_TYPE,[typeof e.ports[r],"connectOptions.ports["+r+"]"]));var o=e.hosts[r],s=e.ports[r],a=-1!==o.indexOf(":");i="ws://"+(a?"["+o+"]":o)+":"+s+n,e.uris.push(i)}}}l.connect(e)},this.subscribe=function(e,t){if("string"!=typeof e&&e.constructor!==Array)throw new Error("Invalid argument:"+e);if(C(t=t||{},{qos:"number",invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),t.timeout&&!t.onFailure)throw new Error("subscribeOptions.timeout specified with no onFailure callback.");if(void 0!==t.qos&&0!==t.qos&&1!==t.qos&&2!==t.qos)throw new Error(x(O.INVALID_ARGUMENT,[t.qos,"subscribeOptions.qos"]));l.subscribe(e,t)},this.unsubscribe=function(e,t){if("string"!=typeof e&&e.constructor!==Array)throw new Error("Invalid argument:"+e);if(C(t=t||{},{invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),t.timeout&&!t.onFailure)throw new Error("unsubscribeOptions.timeout specified with no onFailure callback.");l.unsubscribe(e,t)},this.send=function(e,t,n,r){var i;if(0===arguments.length)throw new Error("Invalid argument.length");if(1==arguments.length){if(!(e instanceof L)&&"string"!=typeof e)throw new Error("Invalid argument:"+typeof e);if(void 0===(i=e).destinationName)throw new Error(x(O.INVALID_ARGUMENT,[i.destinationName,"Message.destinationName"]));l.send(i)}else(i=new L(t)).destinationName=e,arguments.length>=3&&(i.qos=n),arguments.length>=4&&(i.retained=r),l.send(i)},this.publish=function(e,t,n,r){var i;if(0===arguments.length)throw new Error("Invalid argument.length");if(1==arguments.length){if(!(e instanceof L)&&"string"!=typeof e)throw new Error("Invalid argument:"+typeof e);if(void 0===(i=e).destinationName)throw new Error(x(O.INVALID_ARGUMENT,[i.destinationName,"Message.destinationName"]));l.send(i)}else(i=new L(t)).destinationName=e,arguments.length>=3&&(i.qos=n),arguments.length>=4&&(i.retained=r),l.send(i)},this.disconnect=function(){l.disconnect()},this.getTraceLog=function(){return l.getTraceLog()},this.startTrace=function(){l.startTrace()},this.stopTrace=function(){l.stopTrace()},this.isConnected=function(){return l.connected}},Message:L}}(void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},e.exports=n()}).call(this,n(60))},function(e,t,n){"use strict";function r(e,t,n){if(e._observer)i(e._observer,t,n);else if(e._observers){var r=[];e._observers.forEach(function(e){r.push(e)}),r.forEach(function(e){i(e,t,n)})}}function i(e,t,n){if(!e.closed)switch(t){case"next":return e.next(n);case"error":return e.error(n);case"complete":return e.complete(n)}}function o(e){return e._observer||e._observers&&e._observers.size>0}function s(e){var t=this;this._observer=null,this._observers=null,this._observable=new c(function(n){return function(e,t){!o(e)&&t&&t.start&&t.start()}(t,e),function(e,t){e._observers?e._observers.add(t):e._observer?(e._observers=new Set,e._observers.add(e._observer),e._observers.add(t),e._observer=null):e._observer=t}(t,n),function(){!function(e,t){e._observers?e._observers.delete(t):e._observer===t&&(e._observer=null)}(t,n),function(e,t){!o(e)&&t&&t.pause&&t.pause()}(t,e)}})}var a,u,c=n(353);a=s.prototype,u={get observable(){return this._observable},get observed(){return o(this)},next:function(e){r(this,"next",e)},error:function(e){r(this,"error",e)},complete:function(e){r(this,"complete",e)}},Object.keys(u).forEach(function(e){var t=Object.getOwnPropertyDescriptor(u,e);t.enumerable=!1,Object.defineProperty(a,e,t)}),e.exports=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebCryptoSha256=t.Ie11Sha256=void 0,(0,n(110).__exportStar)(n(355),t);var r=n(160);Object.defineProperty(t,"Ie11Sha256",{enumerable:!0,get:function(){return r.Sha256}});var i=n(162);Object.defineProperty(t,"WebCryptoSha256",{enumerable:!0,get:function(){return i.Sha256}})},function(e){e.exports=JSON.parse('{"name":"@aws-sdk/client-lex-runtime-service","description":"AWS SDK for JavaScript Lex Runtime Service Client for Node.js, Browser and React Native","version":"3.186.0","scripts":{"build":"concurrently \'yarn:build:cjs\' \'yarn:build:es\' \'yarn:build:types\'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4","clean":"rimraf ./dist-* && rimraf *.tsbuildinfo","test":"yarn test:unit","test:unit":"ts-mocha test/**/*.spec.ts"},"main":"./dist-cjs/index.js","types":"./dist-types/index.d.ts","module":"./dist-es/index.js","sideEffects":false,"dependencies":{"@aws-crypto/sha256-browser":"2.0.0","@aws-crypto/sha256-js":"2.0.0","@aws-sdk/client-sts":"3.186.0","@aws-sdk/config-resolver":"3.186.0","@aws-sdk/credential-provider-node":"3.186.0","@aws-sdk/fetch-http-handler":"3.186.0","@aws-sdk/hash-node":"3.186.0","@aws-sdk/invalid-dependency":"3.186.0","@aws-sdk/middleware-content-length":"3.186.0","@aws-sdk/middleware-host-header":"3.186.0","@aws-sdk/middleware-logger":"3.186.0","@aws-sdk/middleware-recursion-detection":"3.186.0","@aws-sdk/middleware-retry":"3.186.0","@aws-sdk/middleware-serde":"3.186.0","@aws-sdk/middleware-signing":"3.186.0","@aws-sdk/middleware-stack":"3.186.0","@aws-sdk/middleware-user-agent":"3.186.0","@aws-sdk/node-config-provider":"3.186.0","@aws-sdk/node-http-handler":"3.186.0","@aws-sdk/protocol-http":"3.186.0","@aws-sdk/smithy-client":"3.186.0","@aws-sdk/types":"3.186.0","@aws-sdk/url-parser":"3.186.0","@aws-sdk/util-base64-browser":"3.186.0","@aws-sdk/util-base64-node":"3.186.0","@aws-sdk/util-body-length-browser":"3.186.0","@aws-sdk/util-body-length-node":"3.186.0","@aws-sdk/util-defaults-mode-browser":"3.186.0","@aws-sdk/util-defaults-mode-node":"3.186.0","@aws-sdk/util-user-agent-browser":"3.186.0","@aws-sdk/util-user-agent-node":"3.186.0","@aws-sdk/util-utf8-browser":"3.186.0","@aws-sdk/util-utf8-node":"3.186.0","tslib":"^2.3.1"},"devDependencies":{"@aws-sdk/service-client-documentation-generator":"3.186.0","@tsconfig/recommended":"1.0.1","@types/chai":"^4.2.11","@types/mocha":"^8.0.4","@types/node":"^12.7.5","concurrently":"7.0.0","downlevel-dts":"0.10.1","rimraf":"3.0.2","typedoc":"0.19.2","typescript":"~4.6.2"},"overrides":{"typedoc":{"typescript":"~4.6.2"}},"engines":{"node":">=12.0.0"},"typesVersions":{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},"files":["dist-*"],"author":{"name":"AWS SDK for JavaScript Team","url":"https://aws.amazon.com/javascript/"},"license":"Apache-2.0","browser":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},"homepage":"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-lex-runtime-service","repository":{"type":"git","url":"https://github.com/aws/aws-sdk-js-v3.git","directory":"clients/client-lex-runtime-service"}}')},function(e){e.exports=JSON.parse('{"name":"@aws-sdk/client-cloudwatch-logs","description":"AWS SDK for JavaScript Cloudwatch Logs Client for Node.js, Browser and React Native","version":"3.6.1","scripts":{"clean":"yarn remove-definitions && yarn remove-dist && yarn remove-documentation","build-documentation":"yarn remove-documentation && typedoc ./","prepublishOnly":"yarn build","pretest":"yarn build:cjs","remove-definitions":"rimraf ./types","remove-dist":"rimraf ./dist","remove-documentation":"rimraf ./docs","test":"exit 0","build:cjs":"tsc -p tsconfig.json","build:es":"tsc -p tsconfig.es.json","build":"yarn build:cjs && yarn build:es","postbuild":"downlevel-dts types types/ts3.4"},"main":"./dist/cjs/index.js","types":"./types/index.d.ts","module":"./dist/es/index.js","browser":{"./runtimeConfig":"./runtimeConfig.browser"},"react-native":{"./runtimeConfig":"./runtimeConfig.native"},"sideEffects":false,"dependencies":{"@aws-crypto/sha256-browser":"^1.0.0","@aws-crypto/sha256-js":"^1.0.0","@aws-sdk/config-resolver":"3.6.1","@aws-sdk/credential-provider-node":"3.6.1","@aws-sdk/fetch-http-handler":"3.6.1","@aws-sdk/hash-node":"3.6.1","@aws-sdk/invalid-dependency":"3.6.1","@aws-sdk/middleware-content-length":"3.6.1","@aws-sdk/middleware-host-header":"3.6.1","@aws-sdk/middleware-logger":"3.6.1","@aws-sdk/middleware-retry":"3.6.1","@aws-sdk/middleware-serde":"3.6.1","@aws-sdk/middleware-signing":"3.6.1","@aws-sdk/middleware-stack":"3.6.1","@aws-sdk/middleware-user-agent":"3.6.1","@aws-sdk/node-config-provider":"3.6.1","@aws-sdk/node-http-handler":"3.6.1","@aws-sdk/protocol-http":"3.6.1","@aws-sdk/smithy-client":"3.6.1","@aws-sdk/types":"3.6.1","@aws-sdk/url-parser":"3.6.1","@aws-sdk/url-parser-native":"3.6.1","@aws-sdk/util-base64-browser":"3.6.1","@aws-sdk/util-base64-node":"3.6.1","@aws-sdk/util-body-length-browser":"3.6.1","@aws-sdk/util-body-length-node":"3.6.1","@aws-sdk/util-user-agent-browser":"3.6.1","@aws-sdk/util-user-agent-node":"3.6.1","@aws-sdk/util-utf8-browser":"3.6.1","@aws-sdk/util-utf8-node":"3.6.1","tslib":"^2.0.0"},"devDependencies":{"@aws-sdk/client-documentation-generator":"3.6.1","@types/node":"^12.7.5","downlevel-dts":"0.7.0","jest":"^26.1.0","rimraf":"^3.0.0","typedoc":"^0.19.2","typescript":"~4.1.2"},"engines":{"node":">=10.0.0"},"typesVersions":{"<4.0":{"types/*":["types/ts3.4/*"]}},"author":{"name":"AWS SDK for JavaScript Team","url":"https://aws.amazon.com/javascript/"},"license":"Apache-2.0","homepage":"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-cloudwatch-logs","repository":{"type":"git","url":"https://github.com/aws/aws-sdk-js-v3.git","directory":"clients/client-cloudwatch-logs"}}')},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebCryptoSha256=t.Ie11Sha256=void 0,(0,n(111).__exportStar)(n(377),t);var r=n(168);Object.defineProperty(t,"Ie11Sha256",{enumerable:!0,get:function(){return r.Sha256}});var i=n(170);Object.defineProperty(t,"WebCryptoSha256",{enumerable:!0,get:function(){return i.Sha256}})},function(e){e.exports=JSON.parse('{"name":"@aws-sdk/client-location","description":"AWS SDK for JavaScript Location Client for Node.js, Browser and React Native","version":"3.186.0","scripts":{"build":"concurrently \'yarn:build:cjs\' \'yarn:build:es\' \'yarn:build:types\'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4","clean":"rimraf ./dist-* && rimraf *.tsbuildinfo"},"main":"./dist-cjs/index.js","types":"./dist-types/index.d.ts","module":"./dist-es/index.js","sideEffects":false,"dependencies":{"@aws-crypto/sha256-browser":"2.0.0","@aws-crypto/sha256-js":"2.0.0","@aws-sdk/client-sts":"3.186.0","@aws-sdk/config-resolver":"3.186.0","@aws-sdk/credential-provider-node":"3.186.0","@aws-sdk/fetch-http-handler":"3.186.0","@aws-sdk/hash-node":"3.186.0","@aws-sdk/invalid-dependency":"3.186.0","@aws-sdk/middleware-content-length":"3.186.0","@aws-sdk/middleware-host-header":"3.186.0","@aws-sdk/middleware-logger":"3.186.0","@aws-sdk/middleware-recursion-detection":"3.186.0","@aws-sdk/middleware-retry":"3.186.0","@aws-sdk/middleware-serde":"3.186.0","@aws-sdk/middleware-signing":"3.186.0","@aws-sdk/middleware-stack":"3.186.0","@aws-sdk/middleware-user-agent":"3.186.0","@aws-sdk/node-config-provider":"3.186.0","@aws-sdk/node-http-handler":"3.186.0","@aws-sdk/protocol-http":"3.186.0","@aws-sdk/smithy-client":"3.186.0","@aws-sdk/types":"3.186.0","@aws-sdk/url-parser":"3.186.0","@aws-sdk/util-base64-browser":"3.186.0","@aws-sdk/util-base64-node":"3.186.0","@aws-sdk/util-body-length-browser":"3.186.0","@aws-sdk/util-body-length-node":"3.186.0","@aws-sdk/util-defaults-mode-browser":"3.186.0","@aws-sdk/util-defaults-mode-node":"3.186.0","@aws-sdk/util-user-agent-browser":"3.186.0","@aws-sdk/util-user-agent-node":"3.186.0","@aws-sdk/util-utf8-browser":"3.186.0","@aws-sdk/util-utf8-node":"3.186.0","tslib":"^2.3.1"},"devDependencies":{"@aws-sdk/service-client-documentation-generator":"3.186.0","@tsconfig/recommended":"1.0.1","@types/node":"^12.7.5","concurrently":"7.0.0","downlevel-dts":"0.10.1","rimraf":"3.0.2","typedoc":"0.19.2","typescript":"~4.6.2"},"overrides":{"typedoc":{"typescript":"~4.6.2"}},"engines":{"node":">=12.0.0"},"typesVersions":{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},"files":["dist-*"],"author":{"name":"AWS SDK for JavaScript Team","url":"https://aws.amazon.com/javascript/"},"license":"Apache-2.0","browser":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},"homepage":"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-location","repository":{"type":"git","url":"https://github.com/aws/aws-sdk-js-v3.git","directory":"clients/client-location"}}')},function(e,t,n){"use strict";function r(e){return"private"!==e.allow||e.provider?"public"!==e.allow||e.provider?e.provider:k.f.API_KEY:k.f.USER_POOLS}function i(e){var t=e.rules,n=e.currentUser,r=new Set;return t.forEach(function(e){switch(e.allow){case k.e.CUSTOM:e.provider&&e.provider!==k.f.FUNCTION||r.add(P.c.AWS_LAMBDA);break;case k.e.GROUPS:case k.e.OWNER:n&&(e.provider===k.f.USER_POOLS?r.add(P.c.AMAZON_COGNITO_USER_POOLS):e.provider===k.f.OIDC&&r.add(P.c.OPENID_CONNECT));break;case k.e.PRIVATE:n&&(e.provider&&e.provider!==k.f.USER_POOLS?e.provider===k.f.IAM&&r.add(P.c.AWS_IAM):r.add(P.c.AMAZON_COGNITO_USER_POOLS));break;case k.e.PUBLIC:e.provider===k.f.IAM?r.add(P.c.AWS_IAM):e.provider&&e.provider!==k.f.API_KEY||r.add(P.c.API_KEY)}}),Array.from(r)}function o(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(G||(G=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(Q(this),t),a(W.get(this))}:function(...t){return a(e.apply(Q(this),t))}:function(t,...n){const r=e.call(Q(this),t,...n);return J.set(r,t.sort?t.sort():[t]),a(r)}}function s(e){return"function"==typeof e?o(e):(e instanceof IDBTransaction&&function(e){if(H.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});H.set(e,t)}(e),t=e,(V||(V=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,X):e);var t}function a(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(a(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)});return t.then(t=>{t instanceof IDBCursor&&W.set(t,e)}).catch(()=>{}),Z.set(t,e),t}(e);if(Y.has(e))return Y.get(e);const t=s(e);return t!==e&&(Y.set(e,t),Z.set(t,e)),t}function u(e,t,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(e,t),u=a(s);return r&&s.addEventListener("upgradeneeded",e=>{r(a(s.result),e.oldVersion,e.newVersion,a(s.transaction))}),n&&s.addEventListener("blocked",()=>n()),u.then(e=>{o&&e.addEventListener("close",()=>o()),i&&e.addEventListener("versionchange",()=>i())}).catch(()=>{}),u}function c(e,{blocked:t}={}){const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",()=>t()),a(n).then(()=>{})}function l(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(ne.get(t))return ne.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=te.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!ee.includes(n))return;const o=async function(e,...t){const o=this.transaction(e,i?"readwrite":"readonly");let s=o.store;r&&(s=s.index(t.shift()));const a=await s[n](...t);return i&&await o.done,a};return ne.set(t,o),o}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){return Qt.add(t),new e(t)}function h(e){return"string"==typeof e}function v(e){var t=e.localModel,n=e.modelConstructor,r=e.remoteModel._version;return p(n,Dt(Dt({},t),{_version:r}))}function g(e){Vt.warn(e)}function y(e,t){var n;switch(e){case K.a:n=zt[t];break;case K.h:n=Bt[t];break;case K.g:n=Ft[t];break;case K.f:n=qt[t];break;default:Object(K.l)(e)}if(Yt(n))return n;var r="Model name is not valid for namespace. modelName: "+t+", namespace: "+e;throw Vt.error(r),new Error(r)}function m(e,t){return Nt(this,void 0,void 0,function(){var n,r,i=this;return Mt(this,function(o){switch(o.label){case 0:return n=zt.Setting,r=Ut.namespaces[K.a].models.Setting,[4,e.runExclusive(function(e){return Nt(i,void 0,void 0,function(){var i,o;return Mt(this,function(s){switch(s.label){case 0:return[4,e.query(n,U.a.createFromExisting(r,function(e){return e.key("eq","schemaVersion")}),{page:0,limit:1})];case 1:return i=jt.apply(void 0,[s.sent(),1]),void 0===(o=i[0])||void 0===o.value?[3,4]:JSON.parse(o.value)===t?[3,3]:[4,e.clear(!1)];case 2:s.sent(),s.label=3;case 3:return[3,6];case 4:return[4,e.save(p(n,{key:"schemaVersion",value:JSON.stringify(t)}))];case 5:s.sent(),s.label=6;case 6:return[2]}})})})];case 1:return o.sent(),[2]}})})}n.d(t,"a",function(){return en});var b=n(52),w=n(59),_=n(26),S=n(48),E=n(34),C=n(405),A=n(78),O=n(20),I=n(53),x=(n(69),n(15)),T=n(37),P=n(9),k=n(6),D=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},N=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},
"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},M=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},L=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(M(arguments[t]));return e},j=function(e){return function(t){var n=t.schema,o=t.modelName;return D(void 0,void 0,void 0,function(){var t,s,a,u,c;return N(this,function(l){switch(l.label){case 0:e.Auth=e.Auth||T.a,l.label=1;case 1:return l.trys.push([1,3,,4]),[4,e.Auth.currentAuthenticatedUser()];case 2:return t=l.sent(),[3,4];case 3:return l.sent(),[3,4];case 4:return(s=n.namespaces.user.models[o].attributes)&&(a=s.find(function(e){return"auth"===e.type}),null===(c=null==a?void 0:a.properties)||void 0===c?void 0:c.rules)?(d=a.properties.rules,f=[k.e.CUSTOM,k.e.OWNER,k.e.GROUPS,k.e.PRIVATE,k.e.PUBLIC],p=[k.f.FUNCTION,k.f.USER_POOLS,k.f.OIDC,k.f.IAM,k.f.API_KEY],u=L(d).sort(function(e,t){return e.allow===t.allow?p.indexOf(r(e))-p.indexOf(r(t)):f.indexOf(e.allow)-f.indexOf(t.allow)}),[2,i({currentUser:t,rules:u})]):[2,[]]}var d,f,p})})}},R=function(){return[]},U=n(11),F=n(158),B=function(){function e(){this._queue=[],this._pending=!1}return e.prototype.isLocked=function(){return this._pending},e.prototype.acquire=function(){var e=this,t=new Promise(function(t){return e._queue.push(t)});return this._pending||this._dispatchNext(),t},e.prototype.runExclusive=function(e){return this.acquire().then(function(t){var n;try{n=e()}catch(e){throw t(),e}return Promise.resolve(n).then(function(e){return t(),e},function(e){throw t(),e})})},e.prototype._dispatchNext=function(){this._queue.length>0?(this._pending=!0,this._queue.shift()(this._dispatchNext.bind(this))):this._pending=!1},e}(),z=n(189),q=n.n(z),K=n(4),$=n(8);let V,G;const W=new WeakMap,H=new WeakMap,J=new WeakMap,Y=new WeakMap,Z=new WeakMap;let X={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return H.get(e);if("objectStoreNames"===t)return e.objectStoreNames||J.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return a(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};const Q=e=>Z.get(e),ee=["get","getKey","getAll","getAllKeys","count"],te=["put","add","delete","clear"],ne=new Map;X=(e=>({...e,get:(t,n,r)=>l(t,n)||e.get(t,n,r),has:(t,n)=>!!l(t,n)||e.has(t,n)}))(X);var re,ie=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},oe=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},se=function(e){function t(t){n[t]=e[t]&&function(n){return new Promise(function(r,i){!function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}(r,i,(n=e[t](n)).done,n.value)})}}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,r=e[Symbol.asyncIterator];return r?r.call(e):(e="function"==typeof ue?ue(e):e[Symbol.iterator](),n={},t("next"),t("throw"),t("return"),n[Symbol.asyncIterator]=function(){return this},n)},ae=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},ue=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ce=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(ae(arguments[t]));return e},le=new S.a("DataStore"),de=new(function(){function e(){var e=this;this.dbName="amplify-datastore",this.safariCompatabilityMode=!1,this.canonicalKeyPath=function(t){return e.safariCompatabilityMode?t.length>1?t:t[0]:t}}return e.prototype.getStorenameForModel=function(e){var t=this.namespaceResolver(e),n=e.name;return Object(K.u)(t,n)},e.prototype.getIndexKeyValuesFromModel=function(e){var t=Object.getPrototypeOf(e).constructor,n=this.namespaceResolver(t),r=Object(K.s)(this.schema.namespaces[n],t.name);return Object(K.n)(e,r)},e.prototype.checkPrivate=function(){return ie(this,void 0,void 0,function(){return oe(this,function(e){switch(e.label){case 0:return[4,Object(K.J)().then(function(e){return e})];case 1:return e.sent()?(le.error("IndexedDB not supported in this browser's private mode"),[2,Promise.reject("IndexedDB not supported in this browser's private mode")]):[2,Promise.resolve()]}})})},e.prototype.setSafariCompatabilityMode=function(){return ie(this,void 0,void 0,function(){var e;return oe(this,function(t){switch(t.label){case 0:return e=this,[4,Object(K.K)()];case 1:return e.safariCompatabilityMode=t.sent(),!0===this.safariCompatabilityMode&&le.debug("IndexedDB Adapter is running in Safari Compatability Mode"),[2]}})})},e.prototype.getNamespaceAndModelFromStorename=function(e){var t=ae(e.split("_"));return{namespaceName:t[0],modelName:t.slice(1).join("_")}},e.prototype.setUp=function(e,t,n,r,i){return ie(this,void 0,void 0,function(){var o,s,a=this;return oe(this,function(c){switch(c.label){case 0:return[4,this.checkPrivate()];case 1:return c.sent(),[4,this.setSafariCompatabilityMode()];case 2:return c.sent(),this.initPromise?[3,3]:(this.initPromise=new Promise(function(e,t){a.resolve=e,a.reject=t}),[3,5]);case 3:return[4,this.initPromise];case 4:c.sent(),c.label=5;case 5:i&&(this.dbName="amplify-datastore-"+i),this.schema=e,this.namespaceResolver=t,this.modelInstanceCreator=n,this.getModelConstructorByModelName=r,c.label=6;case 6:return c.trys.push([6,9,,10]),this.db?[3,8]:(o=this,[4,u(this.dbName,3,{upgrade:function(t,n,r,i){return ie(a,void 0,void 0,function(){var o,s,a,u,c,l,d,f,p,h,v,g,y,m,b,w=this;return oe(this,function(_){switch(_.label){case 0:if(0===n)return Object.keys(e.namespaces).forEach(function(n){var r=e.namespaces[n];Object.keys(r.models).forEach(function(e){var r=Object(K.u)(n,e);w.createObjectStoreForModel(t,n,r,e)})}),[2];if(1!==n&&2!==n||3!==r)return[3,16];_.label=1;case 1:_.trys.push([1,14,,15]),_.label=2;case 2:_.trys.push([2,11,12,13]),o=ue(i.objectStoreNames),s=o.next(),_.label=3;case 3:return s.done?[3,10]:(a=s.value,u=i.objectStore(a),c="tmp_"+a,u.name=c,l=this.getNamespaceAndModelFromStorename(a),d=l.namespaceName,f=l.modelName,p=this.createObjectStoreForModel(t,d,a,f),[4,u.openCursor()]);case 4:h=_.sent(),v=0,_.label=5;case 5:return h&&h.value?[4,p.put(h.value)]:[3,8];case 6:return _.sent(),[4,h.continue()];case 7:return h=_.sent(),v++,[3,5];case 8:t.deleteObjectStore(c),le.debug(v+" "+a+" records migrated"),_.label=9;case 9:return s=o.next(),[3,3];case 10:return[3,13];case 11:return g=_.sent(),m={error:g},[3,13];case 12:try{s&&!s.done&&(b=o.return)&&b.call(o)}finally{if(m)throw m.error}return[7];case 13:return Object.keys(e.namespaces).forEach(function(n){var r=e.namespaces[n],o=new Set(i.objectStoreNames);Object.keys(r.models).map(function(e){return[e,Object(K.u)(n,e)]}).filter(function(e){var t=ae(e,2)[1];return!o.has(t)}).forEach(function(e){var r=ae(e,2),i=r[0],o=r[1];w.createObjectStoreForModel(t,n,o,i)})}),[3,15];case 14:throw y=_.sent(),le.error("Error migrating IndexedDB data",y),i.abort(),y;case 15:case 16:return[2]}})})}})]);case 7:o.db=c.sent(),this.resolve(),c.label=8;case 8:return[3,10];case 9:return s=c.sent(),this.reject(s),[3,10];case 10:return[2]}})})},e.prototype._get=function(e,t){return ie(this,void 0,void 0,function(){var n,r;return oe(this,function(i){switch(i.label){case 0:return"string"==typeof e?(r=e,n=this.db.transaction(r,"readonly").store.index("byPk")):n=e.index("byPk"),[4,n.get(this.canonicalKeyPath(t))];case 1:return[2,i.sent()]}})})},e.prototype.save=function(e,t){var n,r;return ie(this,void 0,void 0,function(){var i,o,s,a,u,c,l,d,f,p,h,v,g,y,m,b,w,_,S,E,C,A,O,I,x,T,P,D,N,M=this;return oe(this,function(L){switch(L.label){case 0:return[4,this.checkPrivate()];case 1:return L.sent(),i=Object.getPrototypeOf(e).constructor,o=this.getStorenameForModel(i),s=this.namespaceResolver(i),a=Object(K.Q)(i.name,e,this.schema.namespaces[s],this.modelInstanceCreator,this.getModelConstructorByModelName),u=new Set,c=Object.values(a).map(function(e){var t=e.modelName,n=e.item,r=e.instance,i=Object(K.u)(s,t);return u.add(i),{storeName:i,item:n,instance:r,keys:Object(K.s)(M.schema.namespaces[s],t)}}),l=this.db.transaction(ce([o],Array.from(u.values())),"readwrite"),d=l.objectStore(o),f=this.getIndexKeyValuesFromModel(e),[4,this._get(d,f)];case 2:if(p=L.sent(),t&&p&&(h=U.a.getPredicates(t),v=h.predicates,g=h.type,!Object(K.R)(p,g,v)))throw y="Conditional update failed",le.error(y,{model:p,condition:v}),new Error(y);m=[],L.label=3;case 3:L.trys.push([3,11,12,17]),b=se(c),L.label=4;case 4:return[4,b.next()];case 5:return(w=L.sent()).done?[3,10]:(_=w.value,S=_.storeName,E=_.item,C=_.instance,A=_.keys,O=l.objectStore(S),I=A.map(function(e){return E[e]}),[4,this._get(O,I)]);case 6:return x=L.sent(),T=void 0===x?k.h.INSERT:k.h.UPDATE,P=this.getIndexKeyValuesFromModel(e),Object(K.L)(I,P)||T===k.h.INSERT?[4,O.index("byPk").getKey(this.canonicalKeyPath(I))]:[3,9];case 7:return D=L.sent(),[4,O.put(E,D)];case 8:L.sent(),m.push([C,T]),L.label=9;case 9:return[3,4];case 10:return[3,17];case 11:return N=L.sent(),n={error:N},[3,17];case 12:return L.trys.push([12,,15,16]),w&&!w.done&&(r=b.return)?[4,r.call(b)]:[3,14];case 13:L.sent(),L.label=14;case 14:return[3,16];case 15:if(n)throw n.error;return[7];case 16:return[7];case 17:return[4,l.done];case 18:return L.sent(),[2,m]}})})},e.prototype.load=function(e,t,n){var r,i,o,s,a,u,c,l,d,f;return ie(this,void 0,void 0,function(){var p,h,v,g,y,m,b,w,_,S,E,C,A,O,I,x,T,P,k,D,N,M,L,j=this;return oe(this,function(R){switch(R.label){case 0:if(p=this.schema.namespaces[e],h=p.relationships[t].relationTypes,v=h.map(function(t){var n=t.modelName;return Object(K.u)(e,n)}),g=this.getModelConstructorByModelName(e,t),0===v.length)return[2,n.map(function(e){return j.modelInstanceCreator(g,e)})];y=this.db.transaction(ce(v),"readonly"),R.label=1;case 1:R.trys.push([1,38,39,44]),m=se(h),R.label=2;case 2:return[4,m.next()];case 3:if((b=R.sent()).done)return[3,37];switch(w=b.value,_=w.fieldName,S=w.modelName,E=w.targetName,C=w.targetNames,A=Object(K.u)(e,S),O=y.objectStore(A),I=this.getModelConstructorByModelName(e,S),w.relationType){case"HAS_ONE":return[3,4];case"BELONGS_TO":return[3,19];case"HAS_MANY":return[3,34]}return[3,35];case 4:R.trys.push([4,12,13,18]),r=se(n),R.label=5;case 5:return[4,r.next()];case 6:return(i=R.sent()).done?[3,11]:(P=i.value,(null==C?void 0:C.length)?C.every(function(e){return null!=P[e]})?(k=C.map(function(e){return P[e]}),[4,this._get(O,k)]):[3,11]:[3,8]);case 7:return N=R.sent(),P[_]=N&&this.modelInstanceCreator(I,N),[3,10];case 8:return x=P[E]?E:_,P[x]?(D=[P[x]],[4,this._get(O,D)]):[3,11];case 9:N=R.sent(),P[_]=N&&this.modelInstanceCreator(I,N),R.label=10;case 10:return[3,5];case 11:return[3,18];case 12:return T=R.sent(),c={error:T},[3,18];case 13:return R.trys.push([13,,16,17]),i&&!i.done&&(l=r.return)?[4,l.call(r)]:[3,15];case 14:R.sent(),R.label=15;case 15:return[3,17];case 16:if(c)throw c.error;return[7];case 17:return[7];case 18:return[3,36];case 19:R.trys.push([19,27,28,33]),o=se(n),R.label=20;case 20:return[4,o.next()];case 21:return(s=R.sent()).done?[3,26]:(P=s.value,(null==C?void 0:C.length)?C.every(function(e){return null!=P[e]})?(k=C.map(function(e){return P[e]}),[4,this._get(O,k)]):[3,26]:[3,23]);case 22:return N=R.sent(),P[_]=N&&this.modelInstanceCreator(I,N),null==C||C.map(function(e){delete P[e]}),[3,25];case 23:return P[E]?(D=[P[E]],[4,this._get(O,D)]):[3,25];case 24:N=R.sent(),P[_]=N&&this.modelInstanceCreator(I,N),delete P[E],R.label=25;case 25:return[3,20];case 26:return[3,33];case 27:return M=R.sent(),d={error:M},[3,33];case 28:return R.trys.push([28,,31,32]),s&&!s.done&&(f=o.return)?[4,f.call(o)]:[3,30];case 29:R.sent(),R.label=30;case 30:return[3,32];case 31:if(d)throw d.error;return[7];case 32:return[7];case 33:case 34:return[3,36];case 35:return Object(K.l)(w.relationType),[3,36];case 36:return[3,2];case 37:return[3,44];case 38:return L=R.sent(),a={error:L},[3,44];case 39:return R.trys.push([39,,42,43]),b&&!b.done&&(u=m.return)?[4,u.call(m)]:[3,41];case 40:R.sent(),R.label=41;case 41:return[3,43];case 42:if(a)throw a.error;return[7];case 43:return[7];case 44:return[2,n.map(function(e){return j.modelInstanceCreator(g,e)})]}})})},e.prototype.query=function(e,t,n){return ie(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,d=this;return oe(this,function(f){switch(f.label){case 0:return[4,this.checkPrivate()];case 1:return f.sent(),r=this.getStorenameForModel(e),i=this.namespaceResolver(e),o=t&&U.a.getPredicates(t),s=Object(K.s)(this.schema.namespaces[i],e.name),a=o&&this.keyValueFromPredicate(o,s),u=n&&n.sort,c=n&&n.limit,[4,ie(d,void 0,void 0,function(){var e,t,i;return oe(this,function(s){switch(s.label){case 0:return a?[4,this.getByKey(r,a)]:[3,2];case 1:return[2,(e=s.sent())?[e]:[]];case 2:return o?[4,this.filterOnPredicate(r,o)]:[3,4];case 3:return t=s.sent(),[2,this.inMemoryPagination(t,n)];case 4:return u?[4,this.getAll(r)]:[3,6];case 5:return i=s.sent(),[2,this.inMemoryPagination(i,n)];case 6:return c?[2,this.enginePagination(r,n)]:[2,this.getAll(r)]}})})];case 2:return l=f.sent(),[4,this.load(i,e.name,l)];case 3:return[2,f.sent()]}})})},e.prototype.getByKey=function(e,t){return ie(this,void 0,void 0,function(){return oe(this,function(n){switch(n.label){case 0:return[4,this._get(e,t)];case 1:return[2,n.sent()]}})})},e.prototype.getAll=function(e){return ie(this,void 0,void 0,function(){return oe(this,function(t){switch(t.label){case 0:return[4,this.db.getAll(e)];case 1:return[2,t.sent()]}})})},e.prototype.keyValueFromPredicate=function(e,t){var n,r,i=e.predicates;if(i.length===t.length){var o=[],s=function(e){var t=i.find(function(t){return Object(k.u)(t)&&t.field===e&&"eq"===t.operator});t&&o.push(t.operand)};try{for(var a=ue(t),u=a.next();!u.done;u=a.next())s(u.value)}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return o.length===t.length?o:void 0}},e.prototype.filterOnPredicate=function(e,t){return ie(this,void 0,void 0,function(){var n,r,i;return oe(this,function(o){switch(o.label){case 0:return n=t.predicates,r=t.type,[4,this.getAll(e)];case 1:return i=o.sent(),[2,n?i.filter(function(e){return Object(K.R)(e,r,n)}):i]}})})},e.prototype.inMemoryPagination=function(e,t){if(t&&e.length>1){if(t.sort){var n=F.a.getPredicates(t.sort);if(n.length){var r=Object(K.P)(n);e.sort(r)}}var i=t.page,o=void 0===i?0:i,s=t.limit,a=void 0===s?0:s,u=Math.max(0,o*a)||0,c=a>0?u+a:e.length;return e.slice(u,c)}return e},e.prototype.enginePagination=function(e,t){return ie(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l;return oe(this,function(d){switch(d.label){case 0:return t?(r=t.page,i=void 0===r?0:r,o=t.limit,s=void 0===o?0:o,a=Math.max(0,i*s)||0,[4,this.db.transaction(e).objectStore(e).openCursor()]):[3,7];case 1:return(u=d.sent())&&a>0?[4,u.advance(a)]:[3,3];case 2:d.sent(),d.label=3;case 3:c=[],l="number"==typeof s&&s>0,d.label=4;case 4:return u&&u.value?(c.push(u.value),l&&c.length===s?[3,6]:[4,u.continue()]):[3,6];case 5:return u=d.sent(),[3,4];case 6:return n=c,[3,9];case 7:return[4,this.db.getAll(e)];case 8:n=d.sent(),d.label=9;case 9:return[2,n]}})})},e.prototype.queryOne=function(e,t){return void 0===t&&(t=k.j.FIRST),ie(this,void 0,void 0,function(){var n,r,i;return oe(this,function(o){switch(o.label){case 0:return[4,this.checkPrivate()];case 1:return o.sent(),n=this.getStorenameForModel(e),[4,this.db.transaction([n],"readonly").objectStore(n).openCursor(void 0,t===k.j.FIRST?"next":"prev")];case 2:return r=o.sent(),[2,(i=r?r.value:void 0)&&this.modelInstanceCreator(e,i)]}})})},e.prototype.delete=function(e,t){return ie(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,d,f,p,h,v,g,y,m;return oe(this,function(b){switch(b.label){case 0:return[4,this.checkPrivate()];case 1:return b.sent(),n=[],Object(K.H)(e)?(s=e,r=this.namespaceResolver(s),u=this.getStorenameForModel(s),[4,this.query(s,t)]):[3,9];case 2:return i=b.sent(),y=this.schema.namespaces[r].relationships[s.name].relationTypes,void 0===t?[3,5]:[4,this.deleteTraverse(y,i,s.name,r,n)];case 3:return b.sent(),[4,this.deleteItem(n)];case 4:return b.sent(),m=n.reduce(function(e,t){var n=t.items;return e.concat(n)},[]),[2,[i,m]];case 5:return[4,this.deleteTraverse(y,i,s.name,r,n)];case 6:return b.sent(),[4,this.db.transaction([u],"readwrite").objectStore(u).clear()];case 7:return b.sent(),m=n.reduce(function(e,t){var n=t.items;return e.concat(n)},[]),[2,[i,m]];case 8:return[3,17];case 9:return o=e,s=Object.getPrototypeOf(o).constructor,a=this.namespaceResolver(s),u=this.getStorenameForModel(s),t?(c=this.db.transaction([u],"readwrite"),l=c.objectStore(u),d=this.getIndexKeyValuesFromModel(o),[4,this._get(l,d)]):[3,13];case 10:if(void 0===(f=b.sent()))return g="Model instance not found in storage",le.warn(g,{model:o}),[2,[[o],[]]];if(p=U.a.getPredicates(t),h=p.predicates,v=p.type,!Object(K.R)(f,v,h))throw g="Conditional update failed",le.error(g,{model:f,condition:h}),new Error(g);return[4,c.done];case 11:return b.sent(),y=this.schema.namespaces[a].relationships[s.name].relationTypes,[4,this.deleteTraverse(y,[o],s.name,a,n)];case 12:return b.sent(),[3,15];case 13:return y=this.schema.namespaces[a].relationships[s.name].relationTypes,[4,this.deleteTraverse(y,[o],s.name,a,n)];case 14:b.sent(),b.label=15;case 15:return[4,this.deleteItem(n)];case 16:return b.sent(),m=n.reduce(function(e,t){var n=t.items;return e.concat(n)},[]),[2,[[o],m]];case 17:return[2]}})})},e.prototype.deleteItem=function(e){var t,n,r,i,o,s;return ie(this,void 0,void 0,function(){var a,u,c,l,f,p,h,v,g,y,m,b,w,_;return oe(this,function(S){switch(S.label){case 0:a=e.map(function(e){return e.storeName}),u=this.db.transaction(ce(a),"readwrite"),S.label=1;case 1:S.trys.push([1,22,23,28]),t=se(e),S.label=2;case 2:return[4,t.next()];case 3:if((n=S.sent()).done)return[3,21];c=n.value,l=c.storeName,f=c.items,p=u.objectStore(l),S.label=4;case 4:S.trys.push([4,14,15,20]),h=se(f),S.label=5;case 5:return[4,h.next()];case 6:return(v=S.sent()).done?[3,13]:(g=v.value)?(y=void 0,"object"!==d(g)?[3,8]:(m=this.getIndexKeyValuesFromModel(g),[4,p.index("byPk").getKey(this.canonicalKeyPath(m))])):[3,12];case 7:return y=S.sent(),[3,10];case 8:return b=g.toString(),[4,p.index("byPk").getKey(b)];case 9:y=S.sent(),S.label=10;case 10:return void 0===y?[3,12]:[4,p.delete(y)];case 11:S.sent(),S.label=12;case 12:return[3,5];case 13:return[3,20];case 14:return w=S.sent(),o={error:w},[3,20];case 15:return S.trys.push([15,,18,19]),v&&!v.done&&(s=h.return)?[4,s.call(h)]:[3,17];case 16:S.sent(),S.label=17;case 17:return[3,19];case 18:if(o)throw o.error;return[7];case 19:return[7];case 20:return[3,2];case 21:return[3,28];case 22:return _=S.sent(),r={error:_},[3,28];case 23:return S.trys.push([23,,26,27]),n&&!n.done&&(i=t.return)?[4,i.call(t)]:[3,25];case 24:S.sent(),S.label=25;case 25:return[3,27];case 26:if(r)throw r.error;return[7];case 27:return[7];case 28:return[2]}})})},e.prototype.deleteTraverse=function(e,t,n,r,i){var o,s,a,u,c,l,d,f,p,h,v,g;return ie(this,void 0,void 0,function(){var y,m,b,w,_,S,E,C,A,O,I,x,T,P,k,D,N,M,L=this;return oe(this,function(j){switch(j.label){case 0:j.trys.push([0,38,39,44]),o=se(e),j.label=1;case 1:return[4,o.next()];case 2:if((s=j.sent()).done)return[3,37];switch(y=s.value,m=y.relationType,b=y.modelName,w=y.targetName,_=y.targetNames,S=y.associatedWith,E=Object(K.u)(r,b),m){case"HAS_ONE":return[3,3];case"HAS_MANY":return[3,20];case"BELONGS_TO":return[3,34]}return[3,35];case 3:j.trys.push([3,13,14,19]),a=se(t),j.label=4;case 4:return[4,a.next()];case 5:return(u=j.sent()).done?[3,12]:(T=u.value,C="byPk",(null==_?void 0:_.length)?0===(A=_.map(function(e){return T[e]})).length?[3,12]:[4,this.db.transaction(E,"readwrite").objectStore(E).index(C).get(this.canonicalKeyPath(A))]:[3,8]);case 6:return I=j.sent(),[4,this.deleteTraverse(this.schema.namespaces[r].relationships[b].relationTypes,I?[I]:[],b,r,i)];case 7:return j.sent(),[3,12];case 8:return P=void 0,A=void 0,w&&w in T?(P=C,O=T[w],A=[O]):(P=Object(K.q)(this.schema.namespaces[r].relationships[b].relationTypes,n),A=this.getIndexKeyValuesFromModel(T)),A&&P?[4,this.db.transaction(E,"readwrite").objectStore(E).index(P).get(this.canonicalKeyPath(A))]:[3,12];case 9:return I=j.sent(),[4,this.deleteTraverse(this.schema.namespaces[r].relationships[b].relationTypes,I?[I]:[],b,r,i)];case 10:j.sent(),j.label=11;case 11:return[3,4];case 12:return[3,19];case 13:return x=j.sent(),p={error:x},[3,19];case 14:return j.trys.push([14,,17,18]),u&&!u.done&&(h=a.return)?[4,h.call(a)]:[3,16];case 15:j.sent(),j.label=16;case 16:return[3,18];case 17:if(p)throw p.error;return[7];case 18:return[7];case 19:return[3,36];case 20:j.trys.push([20,27,28,33]),c=se(t),j.label=21;case 21:return[4,c.next()];case 22:return(l=j.sent()).done?[3,26]:(T=l.value,P=Object(K.q)(this.schema.namespaces[r].relationships[b].relationTypes,n)||Object(K.r)(this.schema.namespaces[r].relationships[b].indexes,S),k=this.getIndexKeyValuesFromModel(T),[4,this.db.transaction(E,"readwrite").objectStore(E).index(P).getAll(this.canonicalKeyPath(k))]);case 23:return D=j.sent(),[4,this.deleteTraverse(this.schema.namespaces[r].relationships[b].relationTypes,D,b,r,i)];case 24:j.sent(),j.label=25;case 25:return[3,21];case 26:return[3,33];case 27:return N=j.sent(),v={error:N},[3,33];case 28:return j.trys.push([28,,31,32]),l&&!l.done&&(g=c.return)?[4,g.call(c)]:[3,30];case 29:j.sent(),j.label=30;case 30:return[3,32];case 31:if(v)throw v.error;return[7];case 32:return[7];case 33:case 34:return[3,36];case 35:return Object(K.l)(m),[3,36];case 36:return[3,1];case 37:return[3,44];case 38:return M=j.sent(),d={error:M},[3,44];case 39:return j.trys.push([39,,42,43]),s&&!s.done&&(f=o.return)?[4,f.call(o)]:[3,41];case 40:j.sent(),j.label=41;case 41:return[3,43];case 42:if(d)throw d.error;return[7];case 43:return[7];case 44:return i.push({storeName:Object(K.u)(r,n),items:t.map(function(e){return L.modelInstanceCreator(L.getModelConstructorByModelName(r,n),e)})}),[2]}})})},e.prototype.clear=function(){var e;return ie(this,void 0,void 0,function(){return oe(this,function(t){switch(t.label){case 0:return[4,this.checkPrivate()];case 1:return t.sent(),null===(e=this.db)||void 0===e||e.close(),[4,c(this.dbName)];case 2:return t.sent(),this.db=void 0,this.initPromise=void 0,[2]}})})},e.prototype.batchSave=function(e,t){return ie(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,d,f,p,h=this;return oe(this,function(v){switch(v.label){case 0:return 0===t.length?[2,[]]:[4,this.checkPrivate()];case 1:v.sent(),n=[],r=this.getStorenameForModel(e),i=this.db.transaction(r,"readwrite"),o=i.store,s=function(t){var r,i,s,u,c,l,d,f;return oe(this,function(p){switch(p.label){case 0:return r=a.namespaceResolver(e),i=e.name,s=a.modelInstanceCreator(e,t),u=Object(K.Q)(i,s,a.schema.namespaces[r],a.modelInstanceCreator,a.getModelConstructorByModelName),c=a.getIndexKeyValuesFromModel(s),l=t._deleted,[4,o.index("byPk").getKey(a.canonicalKeyPath(c))];case 1:return d=p.sent(),l?[3,3]:(f=u.find(function(e){var t=e.instance,n=h.getIndexKeyValuesFromModel(t);return Object(K.L)(n,c)}).instance,n.push([f,d?k.h.UPDATE:k.h.INSERT]),[4,o.put(f,d)]);case 2:return p.sent(),[3,5];case 3:return n.push([t,k.h.DELETE]),d?[4,o.delete(d)]:[3,5];case 4:p.sent(),p.label=5;case 5:return[2]}})},a=this,v.label=2;case 2:v.trys.push([2,7,8,9]),u=ue(t),c=u.next(),v.label=3;case 3:return c.done?[3,6]:(l=c.value,[5,s(l)]);case 4:v.sent(),v.label=5;case 5:return c=u.next(),[3,3];case 6:return[3,9];case 7:return d=v.sent(),f={error:d},[3,9];case 8:try{c&&!c.done&&(p=u.return)&&p.call(u)}finally{if(f)throw f.error}return[7];case 9:return[4,i.done];case 10:return v.sent(),[2,n]}})})},e.prototype.createObjectStoreForModel=function(e,t,n,r){var i=e.createObjectStore(n,{autoIncrement:!0});return this.schema.namespaces[t].relationships[r].indexes.forEach(function(e){var t=ae(e,3),n=t[0],r=t[1],o=t[2];i.createIndex(n,r,o)}),i},e}()),fe=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},pe=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},he=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},ve=function(){var e=this;this.db=new Map,this.getAllKeys=function(){return fe(e,void 0,void 0,function(){return pe(this,function(e){return[2,Array.from(this.db.keys())]})})},this.multiGet=function(t){return fe(e,void 0,void 0,function(){var e=this;return pe(this,function(n){return[2,t.reduce(function(t,n){return t.push([n,e.db.get(n)]),t},[])]})})},this.multiRemove=function(t,n){return fe(e,void 0,void 0,function(){var e=this;return pe(this,function(r){return t.forEach(function(t){return e.db.delete(t)}),"function"==typeof n&&n(),[2]})})},this.multiSet=function(t,n){return fe(e,void 0,void 0,function(){var e=this;return pe(this,function(r){return t.forEach(function(t){var n=he(t,2),r=n[0],i=n[1];e.setItem(r,i)}),"function"==typeof n&&n(),[2]})})},this.setItem=function(t,n){return fe(e,void 0,void 0,function(){return pe(this,function(e){return[2,this.db.set(t,n)]})})},this.removeItem=function(t){return fe(e,void 0,void 0,function(){return pe(this,function(e){return[2,this.db.delete(t)]})})},this.getItem=function(t){return fe(e,void 0,void 0,function(){return pe(this,function(e){return[2,this.db.get(t)]})})}},ge=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},ye=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},me=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},be=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},we=new Map,_e=function(){function e(){this._collectionInMemoryIndex=new Map,this.storage=new ve}return e.prototype.getCollectionIndex=function(e){return this._collectionInMemoryIndex.has(e)||this._collectionInMemoryIndex.set(e,new Map),this._collectionInMemoryIndex.get(e)},e.prototype.getMonotonicFactory=function(e){return we.has(e)||we.set(e,Object(K.N)()),we.get(e)},e.prototype.init=function(){return ge(this,void 0,void 0,function(){var e,t,n,r,i,o,s,a,u,c,l,d,f,p,h,v,g,y,m,b;return ye(this,function(w){switch(w.label){case 0:return this._collectionInMemoryIndex.clear(),[4,this.storage.getAllKeys()];case 1:e=w.sent(),t=[],w.label=2;case 2:w.trys.push([2,12,13,14]),n=me(e),r=n.next(),w.label=3;case 3:return r.done?[3,11]:(i=r.value,o=be(i.split("::"),5),s=o[0],a=o[1],u=o[2],c=o[3],l=o[4],"@AmplifyDatastore"!==s?[3,10]:"Data"!==u?[3,9]:(d=void 0,void 0!==l?[3,7]:(f=c,p=this.getMonotonicFactory(a)(),h=this.getLegacyKeyForItem(a,f),v=this.getKeyForItem(a,f,p),[4,this.storage.getItem(h)])));case 4:return g=w.sent(),[4,this.storage.setItem(v,g)];case 5:return w.sent(),[4,this.storage.removeItem(h)];case 6:return w.sent(),d=p,[3,8];case 7:d=c,w.label=8;case 8:return this.getCollectionIndex(a).set(l,d),[3,10];case 9:"Collection"===u&&t.push(i),w.label=10;case 10:return r=n.next(),[3,3];case 11:return[3,14];case 12:return y=w.sent(),m={error:y},[3,14];case 13:try{r&&!r.done&&(b=n.return)&&b.call(n)}finally{if(m)throw m.error}return[7];case 14:return t.length>0?[4,this.storage.multiRemove(t)]:[3,16];case 15:w.sent(),w.label=16;case 16:return[2]}})})},e.prototype.save=function(e,t,n,r){return ge(this,void 0,void 0,function(){var i,o,s;return ye(this,function(a){
switch(a.label){case 0:return i=Object(K.v)(n),o=this.getCollectionIndex(t).get(i)||this.getMonotonicFactory(t)(),s=this.getKeyForItem(t,r,o),this.getCollectionIndex(t).set(r,o),[4,this.storage.setItem(s,JSON.stringify(e))];case 1:return a.sent(),[2]}})})},e.prototype.batchSave=function(e,t,n){return ge(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,d,f,p,h,v,g,y,m,b,w,_,S,E=this;return ye(this,function(C){switch(C.label){case 0:if(0===t.length)return[2,[]];r=[],i=this.getCollectionIndex(e),o=new Set,s=new Set,a=[],u={},c=function(t){var r=n.map(function(e){return t[e]}),c=t._deleted,d=i.get(r.join(K.b))||l.getMonotonicFactory(e)(),f=l.getKeyForItem(e,r.join(K.b),d);a.push(f),u[f]={ulid:d,model:t},c?o.add(f):s.add(f)},l=this;try{for(d=me(t),f=d.next();!f.done;f=d.next())p=f.value,c(p)}catch(e){b={error:e}}finally{try{f&&!f.done&&(w=d.return)&&w.call(d)}finally{if(b)throw b.error}}return[4,this.storage.multiGet(a)];case 1:return h=C.sent(),v=h.filter(function(e){return!!be(e,2)[1]}).reduce(function(e,t){var n=be(t,1)[0];return e.add(n)},new Set),[4,new Promise(function(e,t){if(0!==o.size){var r=Array.from(o);r.forEach(function(e){var t=n.map(function(t){return u[e].model[t]}).join(K.b);i.delete(t)}),E.storage.multiRemove(r,function(n){n&&n.length>0?t(n):e()})}else e()})];case 2:return C.sent(),[4,new Promise(function(e,t){if(0!==s.size){var r=Array.from(s).map(function(e){return[e,JSON.stringify(u[e].model)]});s.forEach(function(e){var t=u[e],r=t.model,o=t.ulid,s=n.map(function(e){return r[e]}).join(K.b);i.set(s,o)}),E.storage.multiSet(r,function(n){n&&n.length>0?t(n):e()})}else e()})];case 3:C.sent();try{for(g=me(a),y=g.next();!y.done;y=g.next())m=y.value,o.has(m)&&v.has(m)?r.push([u[m].model,k.h.DELETE]):s.has(m)&&r.push([u[m].model,v.has(m)?k.h.UPDATE:k.h.INSERT])}catch(e){_={error:e}}finally{try{y&&!y.done&&(S=g.return)&&S.call(g)}finally{if(_)throw _.error}}return[2,r]}})})},e.prototype.get=function(e,t){return ge(this,void 0,void 0,function(){var n,r,i;return ye(this,function(o){switch(o.label){case 0:return n=this.getCollectionIndex(t).get(e),r=this.getKeyForItem(t,e,n),[4,this.storage.getItem(r)];case 1:return[2,(i=o.sent())&&JSON.parse(i)]}})})},e.prototype.getOne=function(e,t){return ge(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return ye(this,function(c){switch(c.label){case 0:return n=this.getCollectionIndex(t),r=be(e===k.j.FIRST?function(){var e,t,r,i,o;try{for(var s=me(n),a=s.next();!a.done;a=s.next()){i=(r=be(a.value,2))[0],o=r[1];break}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return[i,o]}():function(){var e,t,r,i,o;try{for(var s=me(n),a=s.next();!a.done;a=s.next())i=(r=be(a.value,2))[0],o=r[1]}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return[i,o]}(),2),i=r[0],o=r[1],s=this.getKeyForItem(t,i,o),(u=s)?[4,this.storage.getItem(s)]:[3,2];case 1:u=c.sent(),c.label=2;case 2:return[2,(a=u)&&JSON.parse(a)||void 0]}})})},e.prototype.getAll=function(e,t){return ge(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,d,f,p,h,v,g,y,m;return ye(this,function(b){switch(b.label){case 0:n=this.getCollectionIndex(e),i=(r=t||{}).page,o=void 0===i?0:i,s=r.limit,a=void 0===s?0:s,u=Math.max(0,o*a)||0,c=a>0?u+a:void 0,l=[],d=0;try{for(f=me(n),p=f.next();!p.done&&(h=be(p.value,2),v=h[0],g=h[1],++d<=u||(l.push(this.getKeyForItem(e,v,g)),d!==c));p=f.next());}catch(e){y={error:e}}finally{try{p&&!p.done&&(m=f.return)&&m.call(f)}finally{if(y)throw y.error}}return[4,this.storage.multiGet(l)];case 1:return[2,b.sent().filter(function(e){return be(e,2)[1]}).map(function(e){var t=be(e,2)[1];return JSON.parse(t)})]}})})},e.prototype.delete=function(e,t){return ge(this,void 0,void 0,function(){var n,r;return ye(this,function(i){switch(i.label){case 0:return n=this.getCollectionIndex(t).get(e),r=this.getKeyForItem(t,e,n),this.getCollectionIndex(t).delete(e),[4,this.storage.removeItem(r)];case 1:return i.sent(),[2]}})})},e.prototype.clear=function(){return ge(this,void 0,void 0,function(){var e,t;return ye(this,function(n){switch(n.label){case 0:return[4,this.storage.getAllKeys()];case 1:return e=n.sent(),t=e.filter(function(e){return e.startsWith("@AmplifyDatastore")}),[4,this.storage.multiRemove(t)];case 2:return n.sent(),this._collectionInMemoryIndex.clear(),[2]}})})},e.prototype.getKeyForItem=function(e,t,n){return this.getKeyPrefixForStoreItems(e)+"::"+n+"::"+t},e.prototype.getLegacyKeyForItem=function(e,t){return this.getKeyPrefixForStoreItems(e)+"::"+t},e.prototype.getKeyPrefixForStoreItems=function(e){return"@AmplifyDatastore::"+e+"::Data"},e}(),Se=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},Ee=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},Ce=function(e){function t(t){n[t]=e[t]&&function(n){return new Promise(function(r,i){!function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}(r,i,(n=e[t](n)).done,n.value)})}}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,r=e[Symbol.asyncIterator];return r?r.call(e):(e="function"==typeof Ae?Ae(e):e[Symbol.iterator](),n={},t("next"),t("throw"),t("return"),n[Symbol.asyncIterator]=function(){return this},n)},Ae=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Oe=new S.a("DataStore"),Ie=new(function(){function e(){}return e.prototype.getStorenameForModel=function(e){var t=this.namespaceResolver(e),n=e.name;return Object(K.u)(t,n)},e.prototype.getIndexKeyValuesFromModel=function(e){var t=Object.getPrototypeOf(e).constructor,n=this.namespaceResolver(t),r=Object(K.s)(this.schema.namespaces[n],t.name);return Object(K.n)(e,r)},e.prototype.getIndexKeyValuesPath=function(e){return this.getIndexKeyValuesFromModel(e).join(K.b)},e.prototype.setUp=function(e,t,n,r){return Se(this,void 0,void 0,function(){var i,o=this;return Ee(this,function(s){switch(s.label){case 0:return this.initPromise?[3,1]:(this.initPromise=new Promise(function(e,t){o.resolve=e,o.reject=t}),[3,3]);case 1:return[4,this.initPromise];case 2:return s.sent(),[2];case 3:this.schema=e,this.namespaceResolver=t,this.modelInstanceCreator=n,this.getModelConstructorByModelName=r,s.label=4;case 4:return s.trys.push([4,7,,8]),this.db?[3,6]:(this.db=new _e,[4,this.db.init()]);case 5:s.sent(),this.resolve(),s.label=6;case 6:return[3,8];case 7:return i=s.sent(),this.reject(i),[3,8];case 8:return[2]}})})},e.prototype.save=function(e,t){var n,r;return Se(this,void 0,void 0,function(){var i,o,s,a,u,c,l,d,f,p,h,v,g,y,m,b,w,_,S,E,C,A,O,I,x,T,P=this;return Ee(this,function(D){switch(D.label){case 0:return i=Object.getPrototypeOf(e).constructor,o=this.getStorenameForModel(i),s=this.namespaceResolver(i),a=Object(K.Q)(i.name,e,this.schema.namespaces[s],this.modelInstanceCreator,this.getModelConstructorByModelName),u=new Set,c=Object.values(a).map(function(e){var t=e.modelName,n=e.item,r=e.instance,i=Object(K.u)(s,t);return u.add(i),{storeName:i,item:n,instance:r,keys:Object(K.s)(P.schema.namespaces[s],t)}}),l=this.getIndexKeyValuesPath(e),[4,this.db.get(l,o)];case 1:if(d=D.sent(),t&&d&&(f=U.a.getPredicates(t),p=f.predicates,h=f.type,!Object(K.R)(d,h,p)))throw v="Conditional update failed",Oe.error(v,{model:d,condition:p}),new Error(v);g=[],D.label=2;case 2:D.trys.push([2,9,10,15]),y=Ce(c),D.label=3;case 3:return[4,y.next()];case 4:return(m=D.sent()).done?[3,8]:(b=m.value,w=b.storeName,_=b.item,S=b.instance,E=b.keys,C=E.map(function(e){return _[e]}),A=C.join(K.b),[4,this.db.get(A,w)]);case 5:return O=D.sent(),I=O?k.h.UPDATE:k.h.INSERT,x=this.getIndexKeyValuesFromModel(e),Object(K.L)(C,x)||I===k.h.INSERT?[4,this.db.save(_,w,E,A)]:[3,7];case 6:D.sent(),g.push([S,I]),D.label=7;case 7:return[3,3];case 8:return[3,15];case 9:return T=D.sent(),n={error:T},[3,15];case 10:return D.trys.push([10,,13,14]),m&&!m.done&&(r=y.return)?[4,r.call(y)]:[3,12];case 11:D.sent(),D.label=12;case 12:return[3,14];case 13:if(n)throw n.error;return[7];case 14:return[7];case 15:return[2,g]}})})},e.prototype.load=function(e,t,n){var r,i,o,s,a,u,c,l,d,f;return Se(this,void 0,void 0,function(){var p,h,v,g,y,m,b,w,_,S,E,C,A,O,I,x,T,P,k,D,N,M,L=this;return Ee(this,function(j){switch(j.label){case 0:if(p=this.schema.namespaces[e],h=p.relationships[t].relationTypes,v=h.map(function(t){var n=t.modelName;return Object(K.u)(e,n)}),g=this.getModelConstructorByModelName(e,t),0===v.length)return[2,n.map(function(e){return L.modelInstanceCreator(g,e)})];j.label=1;case 1:j.trys.push([1,38,39,44]),y=Ce(h),j.label=2;case 2:return[4,y.next()];case 3:if((m=j.sent()).done)return[3,37];switch(b=m.value,w=b.fieldName,_=b.modelName,S=b.targetName,E=b.targetNames,C=b.relationType,A=Object(K.u)(e,_),O=this.getModelConstructorByModelName(e,_),C){case"HAS_ONE":return[3,4];case"BELONGS_TO":return[3,19];case"HAS_MANY":return[3,34]}return[3,35];case 4:j.trys.push([4,12,13,18]),r=Ce(n),j.label=5;case 5:return[4,r.next()];case 6:return(i=j.sent()).done?[3,11]:(T=i.value,(null==E?void 0:E.length)?E.every(function(e){return null!=T[e]})?(P=E.map(function(e){return T[e]}).join(K.b),[4,this.db.get(P,A)]):[3,11]:[3,8]);case 7:return D=j.sent(),T[w]=D&&this.modelInstanceCreator(O,D),[3,10];case 8:return I=T[S]?S:w,T[I]?(k=T[I],[4,this.db.get(k,A)]):[3,11];case 9:D=j.sent(),T[w]=D&&this.modelInstanceCreator(O,D),j.label=10;case 10:return[3,5];case 11:return[3,18];case 12:return x=j.sent(),c={error:x},[3,18];case 13:return j.trys.push([13,,16,17]),i&&!i.done&&(l=r.return)?[4,l.call(r)]:[3,15];case 14:j.sent(),j.label=15;case 15:return[3,17];case 16:if(c)throw c.error;return[7];case 17:return[7];case 18:return[3,36];case 19:j.trys.push([19,27,28,33]),o=Ce(n),j.label=20;case 20:return[4,o.next()];case 21:return(s=j.sent()).done?[3,26]:(T=s.value,(null==E?void 0:E.length)?E.every(function(e){return null!=T[e]})?(P=E.map(function(e){return T[e]}).join(K.b),[4,this.db.get(P,A)]):[3,26]:[3,23]);case 22:return D=j.sent(),T[w]=D&&this.modelInstanceCreator(O,D),null==E||E.map(function(e){delete T[e]}),[3,25];case 23:return T[S]?(k=T[S],[4,this.db.get(k,A)]):[3,25];case 24:D=j.sent(),T[w]=D&&this.modelInstanceCreator(O,D),delete T[S],j.label=25;case 25:return[3,20];case 26:return[3,33];case 27:return N=j.sent(),d={error:N},[3,33];case 28:return j.trys.push([28,,31,32]),s&&!s.done&&(f=o.return)?[4,f.call(o)]:[3,30];case 29:j.sent(),j.label=30;case 30:return[3,32];case 31:if(d)throw d.error;return[7];case 32:return[7];case 33:case 34:return[3,36];case 35:return Object(K.l)(C),[3,36];case 36:return[3,2];case 37:return[3,44];case 38:return M=j.sent(),a={error:M},[3,44];case 39:return j.trys.push([39,,42,43]),m&&!m.done&&(u=y.return)?[4,u.call(y)]:[3,41];case 40:j.sent(),j.label=41;case 41:return[3,43];case 42:if(a)throw a.error;return[7];case 43:return[7];case 44:return[2,n.map(function(e){return L.modelInstanceCreator(g,e)})]}})})},e.prototype.query=function(e,t,n){return Se(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,d=this;return Ee(this,function(f){switch(f.label){case 0:return r=this.getStorenameForModel(e),i=this.namespaceResolver(e),o=t&&U.a.getPredicates(t),s=Object(K.s)(this.schema.namespaces[i],e.name),a=o&&this.keyValueFromPredicate(o,s),u=n&&n.sort,c=n&&n.limit,[4,Se(d,void 0,void 0,function(){var e,t,i;return Ee(this,function(s){switch(s.label){case 0:return a?[4,this.getByKey(r,a)]:[3,2];case 1:return[2,(e=s.sent())?[e]:[]];case 2:return o?[4,this.filterOnPredicate(r,o)]:[3,4];case 3:return t=s.sent(),[2,this.inMemoryPagination(t,n)];case 4:return u||c?[4,this.getAll(r)]:[3,6];case 5:return i=s.sent(),[2,this.inMemoryPagination(i,n)];case 6:return[2,this.getAll(r)]}})})];case 1:return l=f.sent(),[4,this.load(i,e.name,l)];case 2:return[2,f.sent()]}})})},e.prototype.getByKey=function(e,t){return Se(this,void 0,void 0,function(){return Ee(this,function(n){switch(n.label){case 0:return[4,this.db.get(t,e)];case 1:return[2,n.sent()]}})})},e.prototype.getAll=function(e){return Se(this,void 0,void 0,function(){return Ee(this,function(t){switch(t.label){case 0:return[4,this.db.getAll(e)];case 1:return[2,t.sent()]}})})},e.prototype.keyValueFromPredicate=function(e,t){var n,r,i=e.predicates;if(i.length===t.length){var o=[],s=function(e){var t=i.find(function(t){return Object(k.u)(t)&&t.field===e&&"eq"===t.operator});t&&o.push(t.operand)};try{for(var a=Ae(t),u=a.next();!u.done;u=a.next())s(u.value)}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return o.length===t.length?o.join(K.b):void 0}},e.prototype.filterOnPredicate=function(e,t){return Se(this,void 0,void 0,function(){var n,r,i;return Ee(this,function(o){switch(o.label){case 0:return n=t.predicates,r=t.type,[4,this.getAll(e)];case 1:return i=o.sent(),[2,n?i.filter(function(e){return Object(K.R)(e,r,n)}):i]}})})},e.prototype.inMemoryPagination=function(e,t){if(t&&e.length>1){if(t.sort){var n=F.a.getPredicates(t.sort);if(n.length){var r=Object(K.P)(n);e.sort(r)}}var i=t.page,o=void 0===i?0:i,s=t.limit,a=void 0===s?0:s,u=Math.max(0,o*a)||0,c=a>0?u+a:e.length;return e.slice(u,c)}return e},e.prototype.queryOne=function(e,t){return void 0===t&&(t=k.j.FIRST),Se(this,void 0,void 0,function(){var n,r;return Ee(this,function(i){switch(i.label){case 0:return n=this.getStorenameForModel(e),[4,this.db.getOne(t,n)];case 1:return[2,(r=i.sent())&&this.modelInstanceCreator(e,r)]}})})},e.prototype.delete=function(e,t){return Se(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,d,f,p,h,v,g;return Ee(this,function(y){switch(y.label){case 0:return n=[],Object(K.H)(e)?(s=e,r=this.namespaceResolver(s),[4,this.query(s,t)]):[3,8];case 1:return i=y.sent(),v=this.schema.namespaces[r].relationships[s.name].relationTypes,void 0===t?[3,4]:[4,this.deleteTraverse(v,i,s.name,r,n)];case 2:return y.sent(),[4,this.deleteItem(n)];case 3:return y.sent(),g=n.reduce(function(e,t){var n=t.items;return e.concat(n)},[]),[2,[i,g]];case 4:return[4,this.deleteTraverse(v,i,s.name,r,n)];case 5:return y.sent(),[4,this.deleteItem(n)];case 6:return y.sent(),g=n.reduce(function(e,t){var n=t.items;return e.concat(n)},[]),[2,[i,g]];case 7:return[3,15];case 8:return o=e,s=Object.getPrototypeOf(o).constructor,a=this.namespaceResolver(s),u=this.getStorenameForModel(s),t?(c=this.getIndexKeyValuesPath(o),[4,this.db.get(c,u)]):[3,11];case 9:if(void 0===(l=y.sent()))return h="Model instance not found in storage",Oe.warn(h,{model:o}),[2,[[o],[]]];if(d=U.a.getPredicates(t),f=d.predicates,p=d.type,!Object(K.R)(l,p,f))throw h="Conditional update failed",Oe.error(h,{model:l,condition:f}),new Error(h);return v=this.schema.namespaces[a].relationships[s.name].relationTypes,[4,this.deleteTraverse(v,[o],s.name,a,n)];case 10:return y.sent(),[3,13];case 11:return v=this.schema.namespaces[a].relationships[s.name].relationTypes,[4,this.deleteTraverse(v,[o],s.name,a,n)];case 12:y.sent(),y.label=13;case 13:return[4,this.deleteItem(n)];case 14:return y.sent(),g=n.reduce(function(e,t){var n=t.items;return e.concat(n)},[]),[2,[[o],g]];case 15:return[2]}})})},e.prototype.deleteItem=function(e){var t,n,r,i,o,s;return Se(this,void 0,void 0,function(){var a,u,c,l,d,p,h,v,g;return Ee(this,function(y){switch(y.label){case 0:y.trys.push([0,17,18,23]),t=Ce(e),y.label=1;case 1:return[4,t.next()];case 2:if((n=y.sent()).done)return[3,16];a=n.value,u=a.storeName,c=a.items,y.label=3;case 3:y.trys.push([3,9,10,15]),l=Ce(c),y.label=4;case 4:return[4,l.next()];case 5:return(d=y.sent()).done?[3,8]:(p=d.value)?"object"!==f(p)?[3,7]:(h=this.getIndexKeyValuesPath(p),[4,this.db.delete(h,u)]):[3,7];case 6:y.sent(),y.label=7;case 7:return[3,4];case 8:return[3,15];case 9:return v=y.sent(),o={error:v},[3,15];case 10:return y.trys.push([10,,13,14]),d&&!d.done&&(s=l.return)?[4,s.call(l)]:[3,12];case 11:y.sent(),y.label=12;case 12:return[3,14];case 13:if(o)throw o.error;return[7];case 14:return[7];case 15:return[3,1];case 16:return[3,23];case 17:return g=y.sent(),r={error:g},[3,23];case 18:return y.trys.push([18,,21,22]),n&&!n.done&&(i=t.return)?[4,i.call(t)]:[3,20];case 19:y.sent(),y.label=20;case 20:return[3,22];case 21:if(r)throw r.error;return[7];case 22:return[7];case 23:return[2]}})})},e.prototype.deleteTraverse=function(e,t,n,r,i){var o,s,a,u,c,l,d,f,p,h,v,g;return Se(this,void 0,void 0,function(){var y,m,b,w,_,S,E,C,A,O,I,x,T,P,k,D,N,M,L,j,R,U,F,B,z,q=this;return Ee(this,function($){switch($.label){case 0:$.trys.push([0,38,39,44]),o=Ce(e),$.label=1;case 1:return[4,o.next()];case 2:if((s=$.sent()).done)return[3,37];switch(y=s.value,m=y.relationType,b=y.modelName,w=y.targetName,_=y.targetNames,S=y.associatedWith,E=Object(K.u)(r,b),C=Object(K.q)(this.schema.namespaces[r].relationships[b].relationTypes,n)||Object(K.r)(this.schema.namespaces[r].relationships[b].indexes,y.associatedWith),m){case"HAS_ONE":return[3,3];case"HAS_MANY":return[3,20];case"BELONGS_TO":return[3,34]}return[3,35];case 3:$.trys.push([3,13,14,19]),a=Ce(t),$.label=4;case 4:return[4,a.next()];case 5:return(u=$.sent()).done?[3,12]:(L=u.value,_&&(null==_?void 0:_.length)?(C?A=C.split(K.e):S&&(A=Array.isArray(S)?S:[S]),O=_.every(function(e){return L.hasOwnProperty(e)}),k=this.getIndexKeyValuesPath(L),x=A===S,0===(I=O&&x?_.map(function(e){return L[e]}):k.split(K.b)).length?[3,12]:[4,this.db.getAll(E)]):[3,8]);case 6:return R=$.sent(),N=void 0,N=O?R.filter(function(e){return A.every(function(t){return I.includes(e[t])})}):R.filter(function(e){return e[A]===I}),[4,this.deleteTraverse(this.schema.namespaces[r].relationships[b].relationTypes,N,b,r,i)];case 7:return $.sent(),[3,11];case 8:return T=C||S,P=w in L,k=this.getIndexKeyValuesPath(L),(D=P?L[w]:k)?[4,this.db.getAll(E)]:[3,12];case 9:return R=$.sent(),N=R.filter(function(e){return e[T]===D}),[4,this.deleteTraverse(this.schema.namespaces[r].relationships[b].relationTypes,N,b,r,i)];case 10:$.sent(),$.label=11;case 11:return[3,4];case 12:return[3,19];case 13:return M=$.sent(),p={error:M},[3,19];case 14:return $.trys.push([14,,17,18]),u&&!u.done&&(h=a.return)?[4,h.call(a)]:[3,16];case 15:$.sent(),$.label=16;case 16:return[3,18];case 17:if(p)throw p.error;return[7];case 18:return[7];case 19:return[3,36];case 20:$.trys.push([20,27,28,33]),c=Ce(t),$.label=21;case 21:return[4,c.next()];case 22:return(l=$.sent()).done?[3,26]:(L=l.value,j=this.getIndexKeyValuesFromModel(L),[4,this.db.getAll(E)]);case 23:return R=$.sent(),U=C.split(K.e),F=R.filter(function(e){return U.every(function(t){return j.includes(e[t])})}),[4,this.deleteTraverse(this.schema.namespaces[r].relationships[b].relationTypes,F,b,r,i)];case 24:$.sent(),$.label=25;case 25:return[3,21];case 26:return[3,33];case 27:return B=$.sent(),v={error:B},[3,33];case 28:return $.trys.push([28,,31,32]),l&&!l.done&&(g=c.return)?[4,g.call(c)]:[3,30];case 29:$.sent(),$.label=30;case 30:return[3,32];case 31:if(v)throw v.error;return[7];case 32:return[7];case 33:case 34:return[3,36];case 35:return Object(K.l)(m),[3,36];case 36:return[3,1];case 37:return[3,44];case 38:return z=$.sent(),d={error:z},[3,44];case 39:return $.trys.push([39,,42,43]),s&&!s.done&&(f=o.return)?[4,f.call(o)]:[3,41];case 40:$.sent(),$.label=41;case 41:return[3,43];case 42:if(d)throw d.error;return[7];case 43:return[7];case 44:return i.push({storeName:Object(K.u)(r,n),items:t.map(function(e){return q.modelInstanceCreator(q.getModelConstructorByModelName(r,n),e)})}),[2]}})})},e.prototype.clear=function(){return Se(this,void 0,void 0,function(){return Ee(this,function(e){switch(e.label){case 0:return[4,this.db.clear()];case 1:return e.sent(),this.db=void 0,this.initPromise=void 0,[2]}})})},e.prototype.batchSave=function(e,t){return Se(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,d,f,p,h=this;return Ee(this,function(v){switch(v.label){case 0:n=e.name,r=this.namespaceResolver(e),i=Object(K.u)(r,n),o=Object(K.s)(this.schema.namespaces[r],n),s=[],a=function(t){var i=u.modelInstanceCreator(e,t),o=Object(K.Q)(n,i,u.schema.namespaces[r],u.modelInstanceCreator,u.getModelConstructorByModelName),a=u.getIndexKeyValuesPath(i),c=o.find(function(e){var t=e.instance,n=h.getIndexKeyValuesPath(t);return Object(K.L)([n],[a])}).instance;s.push(c)},u=this;try{for(c=Ae(t),l=c.next();!l.done;l=c.next())d=l.value,a(d)}catch(e){f={error:e}}finally{try{l&&!l.done&&(p=c.return)&&p.call(c)}finally{if(f)throw f.error}}return[4,this.db.batchSave(i,s,o)];case 1:return[2,v.sent()]}})})},e}()),xe=function(){return Object(E.b)().isBrowser&&window.indexedDB||Object(E.c)()&&self.indexedDB?de:Ie},Te=function(){return(Te=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Pe=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},ke=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},De=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Ne=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},Me=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Le=new S.a("DataStore"),je=function(){function e(e,t,n,r,i,o){this.schema=e,this.namespaceResolver=t,this.getModelConstructorByModelName=n,this.modelInstanceCreator=r,this.adapter=i,this.sessionId=o,this.adapter=this.adapter||xe(),this.pushStream=new q.a}return e.getNamespace=function(){return{name:K.f,relationships:{},enums:{},models:{},nonModels:{}}},e.prototype.init=function(){return Pe(this,void 0,void 0,function(){var e,t;return ke(this,function(n){switch(n.label){case 0:return void 0===this.initialized?[3,2]:[4,this.initialized];case 1:case 3:return n.sent(),[2];case 2:return Le.debug("Starting Storage"),this.initialized=new Promise(function(n,r){e=n,t=r}),this.adapter.setUp(this.schema,this.namespaceResolver,this.modelInstanceCreator,this.getModelConstructorByModelName,this.sessionId).then(e,t),[4,this.initialized]}})})},e.prototype.save=function(e,t,n,r){return Pe(this,void 0,void 0,function(){var i,o=this;return ke(this,function(s){switch(s.label){case 0:return[4,this.init()];case 1:return s.sent(),[4,this.adapter.save(e,t)];case 2:return(i=s.sent()).forEach(function(s){var a,u=Ne(s,2),c=u[0],l=u[1],d=!!n;if(l===k.h.UPDATE&&!d&&null===(a=o.getUpdateMutationInput(e,c,r)))return i;var f=a||c,p=Object.getPrototypeOf(c).constructor;o.pushStream.next({model:p,opType:l,element:f,mutator:n,condition:U.a.getPredicates(t,!1),savedElement:c})}),[2,i]}})})},e.prototype.delete=function(e,t,n){return Pe(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l=this;return ke(this,function(d){switch(d.label){case 0:return[4,this.init()];case 1:return d.sent(),[4,this.adapter.delete(e,t)];case 2:return c=Ne.apply(void 0,[d.sent(),2]),i=c[0],r=c[1],o=Object(K.H)(e)?e:Object.getPrototypeOf(e||{}).constructor,s=this.namespaceResolver(o),a=this.schema.namespaces[s].models[o.name],u=new Set(i.map(function(e){return Object($.h)(a,e)})),Object(K.H)(e)||Array.isArray(r)||(r=[r]),r.forEach(function(r){var i,o=Object.getPrototypeOf(r).constructor;if(!Object(K.H)(e)){var s=Object($.h)(a,r);i=u.has(s)?U.a.getPredicates(t,!1):void 0}l.pushStream.next({model:o,opType:k.h.DELETE,element:r,mutator:n,condition:i})}),[2,[i,r]]}})})},e.prototype.query=function(e,t,n){return Pe(this,void 0,void 0,function(){return ke(this,function(r){switch(r.label){case 0:return[4,this.init()];case 1:return r.sent(),[4,this.adapter.query(e,t,n)];case 2:return[2,r.sent()]}})})},e.prototype.queryOne=function(e,t){return void 0===t&&(t=k.j.FIRST),Pe(this,void 0,void 0,function(){return ke(this,function(n){switch(n.label){case 0:return[4,this.init()];case 1:return n.sent(),[4,this.adapter.queryOne(e,t)];case 2:return[2,n.sent()]}})})},e.prototype.observe=function(e,t,n){var r=!e,i=U.a.getPredicates(t,!1)||{},o=i.predicates,s=i.type,a=!!o,u=this.pushStream.observable.filter(function(e){var t=e.mutator;return!n||t!==n}).map(function(e){return e.mutator,De(e,["mutator"])});return r||(u=u.filter(function(t){var n=t.model,r=t.element;return e===n&&(!a||Object(K.R)(r,s,o))})),u},e.prototype.clear=function(e){return void 0===e&&(e=!0),Pe(this,void 0,void 0,function(){return ke(this,function(t){switch(t.label){case 0:return this.initialized=void 0,[4,this.adapter.clear()];case 1:return t.sent(),e&&this.pushStream.complete(),[2]}})})},e.prototype.batchSave=function(e,t,n){return Pe(this,void 0,void 0,function(){var r,i=this;return ke(this,function(o){switch(o.label){case 0:return[4,this.init()];case 1:return o.sent(),[4,this.adapter.batchSave(e,t)];case 2:return(r=o.sent()).forEach(function(t){var r=Ne(t,2),o=r[0],s=r[1];i.pushStream.next({model:e,opType:s,element:o,mutator:n,condition:void 0})}),[2,r]}})})},e.prototype.getUpdateMutationInput=function(e,t,n){var r,i;if(!n||!n.length)return null;var o=Ne(n,2),s=o[0],a=o[1],u={},c=s.map(function(e){return e.path&&e.path[0]}),l=Object.getPrototypeOf(e).constructor,d=this.namespaceResolver(l),f=this.schema.namespaces[d].models[l.name].fields,p=this.schema.namespaces[d].keys[l.name],h=p.primaryKey,v=p.compositeKeys,g=void 0===v?[]:v;if(c.forEach(function(e){var n,r,i,o,s,c,l,d,p,h,v,y=Object(k.x)(null===(v=f[e])||void 0===v?void 0:v.association);if(Array.isArray(y))try{for(var m=Me(y),b=m.next();!b.done;b=m.next()){var w=b.value;if(!Object(K.S)(a[w],t[w])){u[w]=void 0===t[w]?null:t[w];try{for(var _=(i=void 0,Me(g)),S=_.next();!S.done;S=_.next())if((T=S.value).has(w))try{for(var E=(s=void 0,Me(T)),C=E.next();!C.done;C=E.next()){var A=C.value;u[A]=t[A]}}catch(e){s={error:e}}finally{try{C&&!C.done&&(c=E.return)&&c.call(E)}finally{if(s)throw s.error}}}catch(e){i={error:e}}finally{try{S&&!S.done&&(o=_.return)&&o.call(_)}finally{if(i)throw i.error}}}}}catch(e){n={error:e}}finally{try{b&&!b.done&&(r=m.return)&&r.call(m)}finally{if(n)throw n.error}}else{var O=y||e;if(!Object(K.S)(a[O],t[O])){u[O]=void 0===t[O]?null:t[O];try{for(var I=Me(g),x=I.next();!x.done;x=I.next()){var T;if((T=x.value).has(O))try{for(var P=(p=void 0,Me(T)),D=P.next();!D.done;D=P.next())A=D.value,u[A]=t[A]}catch(e){p={error:e}}finally{try{D&&!D.done&&(h=P.return)&&h.call(P)}finally{if(p)throw p.error}}}}catch(e){l={error:e}}finally{try{x&&!x.done&&(d=I.return)&&d.call(I)}finally{if(l)throw l.error}}}}}),0===Object.keys(u).length)return null;if(h&&h.length)try{for(var y=Me(h),m=y.next();!m.done;m=y.next()){var b=m.value;u[b]=t[b]}}catch(e){r={error:e}}finally{try{m&&!m.done&&(i=y.return)&&i.call(y)}finally{if(r)throw r.error}}var w=t.id,_=t._version,S=t._lastChangedAt,E=t._deleted;return Te(Te({},u),{id:w,_version:_,_lastChangedAt:S,_deleted:E})},e}(),Re=function(){function e(e,t,n,r,i,o){this.mutex=new B,this.storage=new je(e,t,n,r,i,o)}return e.prototype.runExclusive=function(e){return this.mutex.runExclusive(e.bind(this,this.storage))},e.prototype.save=function(e,t,n,r){return Pe(this,void 0,void 0,function(){return ke(this,function(i){return[2,this.runExclusive(function(i){return i.save(e,t,n,r)})]})})},e.prototype.delete=function(e,t,n){return Pe(this,void 0,void 0,function(){return ke(this,function(r){return[2,this.runExclusive(function(r){if(Object(K.H)(e)){var i=e;return r.delete(i,t,n)}var o=e;return r.delete(o,t,n)})]})})},e.prototype.query=function(e,t,n){return Pe(this,void 0,void 0,function(){return ke(this,function(r){return[2,this.runExclusive(function(r){return r.query(e,t,n)})]})})},e.prototype.queryOne=function(e,t){return void 0===t&&(t=k.j.FIRST),Pe(this,void 0,void 0,function(){return ke(this,function(n){return[2,this.runExclusive(function(n){return n.queryOne(e,t)})]})})},e.getNamespace=function(){return je.getNamespace()},e.prototype.observe=function(e,t,n){return this.storage.observe(e,t,n)},e.prototype.clear=function(){return Pe(this,void 0,void 0,function(){return ke(this,function(e){switch(e.label){case 0:return[4,this.runExclusive(function(e){return e.clear()})];case 1:return e.sent(),[2]}})})},e.prototype.batchSave=function(e,t){return this.storage.batchSave(e,t)},e.prototype.init=function(){return Pe(this,void 0,void 0,function(){return ke(this,function(e){return[2,this.storage.init()]})})},e}(),Ue=n(29),Fe=(new(n(430).a)).networkMonitor(),Be=function(){return(Be=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},ze=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},qe=function(e,t){function n(n){return function(s){return function(n){
if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},Ke=(new S.a("DataStore"),function(){function e(){this.connectionStatus={online:!1}}return e.prototype.status=function(){var e=this;if(this.observer)throw new Error("Subscriber already exists");return new x.a(function(t){return e.observer=t,e.subscription=Fe.subscribe(function(n){var r=n.online;e.connectionStatus.online=r;var i=Be({},e.connectionStatus);t.next(i)}),function(){clearTimeout(e.timeout),e.unsubscribe()}})},e.prototype.unsubscribe=function(){this.subscription&&(clearTimeout(this.timeout),this.subscription.unsubscribe())},e.prototype.stop=function(){return ze(this,void 0,void 0,function(){return qe(this,function(e){return this.unsubscribe(),[2]})})},e.prototype.socketDisconnected=function(){var e=this;this.observer&&"function"==typeof this.observer.next&&(this.observer.next({online:!1}),this.timeout=setTimeout(function(){var t=Be({},e.connectionStatus);e.observer.next(t)},5e3))},e}()),$e=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},Ve=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},Ge=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},We=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},He=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Ge(arguments[t]));return e},Je=function(){function e(e,t){this.outbox=e,this.ownSymbol=t}return e.prototype.merge=function(e,t,n){return $e(this,void 0,void 0,function(){var r,i,o,s,a;return Ve(this,function(u){switch(u.label){case 0:return[4,this.outbox.getForModel(e,t,n)];case 1:return i=u.sent(),o=t._deleted,0!==i.length?[3,5]:o?(r=k.h.DELETE,[4,e.delete(t,void 0,this.ownSymbol)]):[3,3];case 2:return u.sent(),[3,5];case 3:return[4,e.save(t,void 0,this.ownSymbol)];case 4:s=Ge.apply(void 0,[u.sent(),1]),a=Ge(s[0],2),r=a[1],u.label=5;case 5:return[2,r]}})})},e.prototype.mergePage=function(e,t,n,r){return $e(this,void 0,void 0,function(){var i,o,s,a,u,c,l,d;return Ve(this,function(f){switch(f.label){case 0:i=new Map;try{for(o=We(n),s=o.next();!s.done;s=o.next())a=s.value,u=Object($.h)(r,a),i.set(u,a)}catch(e){l={error:e}}finally{try{s&&!s.done&&(d=o.return)&&d.call(o)}finally{if(l)throw l.error}}return c=He(i.values()),[4,e.batchSave(t,c,this.ownSymbol)];case 1:return[2,f.sent()]}})})},e}(),Ye=function(){return(Ye=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Ze=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},Xe=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},Qe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},et=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},tt=function(){function e(e,t,n,r){this.schema=e,this.MutationEvent=t,this.modelInstanceCreator=n,this.ownSymbol=r}return e.prototype.enqueue=function(e,t){return Ze(this,void 0,void 0,function(){var n=this;return Xe(this,function(r){switch(r.label){case 0:return[4,e.runExclusive(function(e){return Ze(n,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,d=this;return Xe(this,function(f){switch(f.label){case 0:return n=this.schema.namespaces[K.g].models.MutationEvent,r=U.a.createFromExisting(n,function(e){return e.modelId("eq",t.modelId).id("ne",d.inProgressMutationEventId)}),[4,e.query(this.MutationEvent,r)];case 1:return i=et.apply(void 0,[f.sent(),1]),void 0!==(o=i[0])?[3,3]:[4,e.save(t,void 0,this.ownSymbol)];case 2:return f.sent(),[2];case 3:return s=t.operation,o.operation!==$.a.CREATE?[3,8]:s!==$.a.DELETE?[3,5]:[4,e.delete(this.MutationEvent,r)];case 4:return f.sent(),[3,7];case 5:return a=this.mergeUserFields(o,t),[4,e.save(this.MutationEvent.copyOf(o,function(e){e.data=a.data}),void 0,this.ownSymbol)];case 6:f.sent(),f.label=7;case 7:return[3,12];case 8:return u=t.condition,c=JSON.parse(u),l=void 0,0!==Object.keys(c).length?[3,10]:(l=this.mergeUserFields(o,t),[4,e.delete(this.MutationEvent,r)]);case 9:f.sent(),f.label=10;case 10:return l=l||t,[4,e.save(l,void 0,this.ownSymbol)];case 11:f.sent(),f.label=12;case 12:return[2]}})})})];case 1:return r.sent(),[2]}})})},e.prototype.dequeue=function(e,t,n){return Ze(this,void 0,void 0,function(){var r;return Xe(this,function(i){switch(i.label){case 0:return[4,this.peek(e)];case 1:return r=i.sent(),t?[4,this.syncOutboxVersionsOnDequeue(e,t,r,n)]:[3,3];case 2:i.sent(),i.label=3;case 3:return[4,e.delete(r)];case 4:return i.sent(),this.inProgressMutationEventId=void 0,[2,r]}})})},e.prototype.peek=function(e){return Ze(this,void 0,void 0,function(){var t;return Xe(this,function(n){switch(n.label){case 0:return[4,e.queryOne(this.MutationEvent,k.j.FIRST)];case 1:return t=n.sent(),this.inProgressMutationEventId=t?t.id:void 0,[2,t]}})})},e.prototype.getForModel=function(e,t,n){return Ze(this,void 0,void 0,function(){var r,i;return Xe(this,function(o){switch(o.label){case 0:return r=this.schema.namespaces[K.g].models.MutationEvent,i=Object($.h)(n,t),[4,e.query(this.MutationEvent,U.a.createFromExisting(r,function(e){return e.modelId("eq",i)}))];case 1:return[2,o.sent()]}})})},e.prototype.getModelIds=function(e){return Ze(this,void 0,void 0,function(){var t,n;return Xe(this,function(r){switch(r.label){case 0:return[4,e.query(this.MutationEvent)];case 1:return t=r.sent(),n=new Set,t.forEach(function(e){var t=e.modelId;return n.add(t)}),[2,n]}})})},e.prototype.syncOutboxVersionsOnDequeue=function(e,t,n,r){return Ze(this,void 0,void 0,function(){var i,o,s,a,u,c,l,d,f,p,h,v,g,y=this;return Xe(this,function(m){switch(m.label){case 0:return n.operation!==r?[2]:(i=t._version,o=t._lastChangedAt,t._deleted,s=Qe(t,["_version","_lastChangedAt","_deleted"]),a=this.removeTimestampFields(n.model,s),(u=JSON.parse(n.data))?(u._version,u._lastChangedAt,u._deleted,c=Qe(u,["_version","_lastChangedAt","_deleted"]),l=this.removeTimestampFields(n.model,c),Object(K.S)(a,l,!0)?(d=this.schema.namespaces[K.g].models.MutationEvent,f=this.schema.namespaces.user.models[n.model],p=Object($.h)(f,t),h=U.a.createFromExisting(d,function(e){return e.modelId("eq",p).id("ne",y.inProgressMutationEventId)}),[4,e.query(this.MutationEvent,h)]):[2]):[2]);case 1:return(v=m.sent()).length?(g=v.map(function(e){var t=JSON.parse(e.data),n=Ye(Ye({},t),{_version:i,_lastChangedAt:o});return y.MutationEvent.copyOf(e,function(e){e.data=JSON.stringify(n)})}),[4,e.delete(this.MutationEvent,h)]):[2];case 2:return m.sent(),[4,Promise.all(g.map(function(t){return Ze(y,void 0,void 0,function(){return Xe(this,function(n){switch(n.label){case 0:return[4,e.save(t,void 0,this.ownSymbol)];case 1:return[2,n.sent()]}})})}))];case 3:return m.sent(),[2]}})})},e.prototype.mergeUserFields=function(e,t){var n=JSON.parse(e.data),r=n._version,i=n._lastChangedAt,o=n._deleted,s=Qe(n,["_version","_lastChangedAt","_deleted"]),a=JSON.parse(t.data),u=(a._version,a._lastChangedAt,a._deleted,Qe(a,["_version","_lastChangedAt","_deleted"])),c=JSON.stringify(Ye(Ye({_version:r,_lastChangedAt:i,_deleted:o},s),u));return this.modelInstanceCreator(this.MutationEvent,Ye(Ye({},t),{data:c}))},e.prototype.removeTimestampFields=function(e,t){var n,r,i="createdAt",o="updatedAt",s=null===(n=this.schema.namespaces[K.h].models[e].attributes)||void 0===n?void 0:n.find(function(e){return"model"===e.type}),a=null===(r=null==s?void 0:s.properties)||void 0===r?void 0:r.timestamps;return a&&(i=a.createdAt,o=a.updatedAt),delete t[i],delete t[o],t},e}(),nt=n(429),rt=n(65),it=function(){return(it=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},ot=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},st=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},at=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},ut=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},ct=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},lt=new S.a("DataStore"),dt=function(){function e(e,t,n,r,i,o,s,a,u,c,l){void 0===s&&(s={}),this.schema=e,this.storage=t,this.userClasses=n,this.outbox=r,this.modelInstanceCreator=i,this.MutationEvent=o,this.amplifyConfig=s,this.authModeStrategy=a,this.errorHandler=u,this.conflictHandler=c,this.amplifyContext=l,this.typeQuery=new WeakMap,this.processing=!1,this.runningProcesses=new C.a,this.amplifyContext.API=this.amplifyContext.API||b.a,this.generateQueries()}return e.prototype.generateQueries=function(){var e=this;Object.values(this.schema.namespaces).forEach(function(t){Object.values(t.models).filter(function(e){return e.syncable}).forEach(function(n){var r=ut(Object($.b)(t,n,"CREATE"),1)[0],i=ut(Object($.b)(t,n,"UPDATE"),1)[0],o=ut(Object($.b)(t,n,"DELETE"),1)[0];e.typeQuery.set(n,[r,i,o])})})},e.prototype.isReady=function(){return void 0!==this.observer},e.prototype.start=function(){var e=this;return new x.a(function(t){e.observer=t;try{e.resume()}catch(e){throw lt.error("mutations processor start error",e),e}return e.runningProcesses.addCleaner(function(){return ot(e,void 0,void 0,function(){return st(this,function(e){return this.pause(),[2]})})})})},e.prototype.stop=function(){return ot(this,void 0,void 0,function(){return st(this,function(e){switch(e.label){case 0:return[4,this.runningProcesses.close()];case 1:return e.sent(),[4,this.runningProcesses.open()];case 2:return e.sent(),[2]}})})},e.prototype.resume=function(){return ot(this,void 0,void 0,function(){var e=this;return st(this,function(t){switch(t.label){case 0:return[4,this.runningProcesses.isOpen&&this.runningProcesses.add(function(t){return ot(e,void 0,void 0,function(){var e,n,r,i,o,s=this;return st(this,function(a){switch(a.label){case 0:if(this.processing||!this.isReady()||!this.runningProcesses.isOpen)return[2];this.processing=!0,n=K.h,r=function(){var r,o,a,u,c,l,d,f,p,h,v,g,y,m,b,w;return st(this,function(_){switch(_.label){case 0:r=e.model,o=e.operation,a=e.data,u=e.condition,c=i.userClasses[r],l=void 0,d=void 0,f=void 0,_.label=1;case 1:return _.trys.push([1,4,,5]),[4,Object($.i)({authModeStrategy:i.authModeStrategy,defaultAuthMode:i.amplifyConfig.aws_appsync_authenticationType,modelName:r,schema:i.schema})];case 2:return p=_.sent(),h=p[o.toUpperCase()],v=0,[4,(g=function(){return ot(s,void 0,void 0,function(){var i,s;return st(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,4]),lt.debug("Attempting mutation with authMode: "+h[v]),[4,this.jitteredRetry(n,r,o,a,u,c,this.MutationEvent,e,h[v],t)];case 1:return i=l.sent(),lt.debug("Mutation sent successfully with authMode: "+h[v]),[2,i];case 2:if(s=l.sent(),++v>=h.length)throw lt.debug("Mutation failed with authMode: "+h[v-1]),s;return lt.debug("Mutation failed with authMode: "+h[v-1]+". Retrying with authMode: "+h[v]),[4,g()];case 3:return[2,l.sent()];case 4:return[2]}})})})()];case 3:return w=ut.apply(void 0,[_.sent(),3]),l=w[0],d=w[1],f=w[2],[3,5];case 4:return"Offline"===(y=_.sent()).message||"RetryMutation"===y.message?[2,"continue"]:[3,5];case 5:return void 0!==l?[3,7]:(lt.debug("done retrying"),[4,i.storage.runExclusive(function(e){return ot(s,void 0,void 0,function(){return st(this,function(t){switch(t.label){case 0:return[4,this.outbox.dequeue(e)];case 1:return t.sent(),[2]}})})})]);case 6:return _.sent(),[2,"continue"];case 7:return m=l.data[d],b=!1,[4,i.storage.runExclusive(function(e){return ot(s,void 0,void 0,function(){return st(this,function(t){switch(t.label){case 0:return[4,this.outbox.dequeue(e,m,o)];case 1:return t.sent(),[4,this.outbox.peek(e)];case 2:return b=void 0!==t.sent(),[2]}})})})];case 8:return _.sent(),i.observer.next({operation:o,modelDefinition:f,model:m,hasMore:b}),[2]}})},i=this,a.label=1;case 1:return(o=this.processing&&this.runningProcesses.isOpen)?[4,this.outbox.peek(this.storage)]:[3,3];case 2:o=void 0!==(e=a.sent()),a.label=3;case 3:return o?[5,r()]:[3,5];case 4:return a.sent(),[3,1];case 5:return this.pause(),[2]}})})},"mutation resume loop")];case 1:return t.sent(),[2]}})})},e.prototype.jitteredRetry=function(e,t,n,r,i,o,s,a,u,c){return ot(this,void 0,void 0,function(){var l=this;return st(this,function(d){switch(d.label){case 0:return[4,Object(nt.d)(function(t,n,r,i,o,s,a){return ot(l,void 0,void 0,function(){var c,l,d,f,p,h,v,g,y,m,b,w,_,S,E,C,A,O,I,x,T,P,D,N,M,L;return st(this,function(j){switch(j.label){case 0:return c=ut(this.createQueryVariables(e,t,n,r,i),5),l=c[0],d=c[1],f=c[2],p=c[3],h=c[4],[4,Object($.j)(u,this.amplifyConfig)];case 1:v=j.sent(),g={query:l,variables:d,authMode:u,authToken:v,userAgentSuffix:K.i},y=0,m=this.opTypeFromTransformerOperation(n),j.label=2;case 2:return j.trys.push([2,4,,17]),[4,this.amplifyContext.API.graphql(g)];case 3:return[2,[j.sent(),p,h]];case 4:if(!((b=j.sent()).errors&&b.errors.length>0))return[3,15];if(w=ut(b.errors,1),_=w[0],S=_.originalError,E=(void 0===S?{}:S).code,C=void 0===E?null:E,"Unauthorized"===_.errorType)throw new nt.a("Unauthorized");if("Network Error"===_.message||"ECONNABORTED"===C){if(!this.processing)throw new nt.a("Offline");throw new Error("Network Error")}return"ConflictUnhandled"!==_.errorType?[3,13]:(y++,A=void 0,y>10?(A=k.b,[3,8]):[3,5]);case 5:return j.trys.push([5,7,,8]),[4,this.conflictHandler({modelConstructor:o,localModel:this.modelInstanceCreator(o,d.input),remoteModel:this.modelInstanceCreator(o,_.data),operation:m,attempts:y})];case 6:return A=j.sent(),[3,8];case 7:return O=j.sent(),lt.warn("conflict trycatch",O),[3,17];case 8:return A!==k.b?[3,11]:(I=ut(Object($.b)(this.schema.namespaces[e],h,"GET"),1),x=ut(I[0],3),T=x[1],P=x[2],[4,Object($.j)(u,this.amplifyConfig)]);case 9:return D=j.sent(),[4,this.amplifyContext.API.graphql({query:P,variables:{id:d.input.id},authMode:u,authToken:D,userAgentSuffix:K.i})];case 10:return[2,[j.sent(),T,h]];case 11:return N=this.schema.namespaces[e],M=Object($.d)(N.relationships,h,m,o,A,f,s,this.modelInstanceCreator,a.id),[4,this.storage.save(M)];case 12:throw j.sent(),new nt.a("RetryMutation");case 13:try{this.errorHandler({recoverySuggestion:"Ensure app code is up to date, auth directives exist and are correct on each model, and that server-side data has not been invalidated by a schema change. If the problem persists, search for or create an issue: https://github.com/aws-amplify/amplify-js/issues",localModel:d.input,message:_.message,operation:n,errorType:Object(rt.a)(_),errorInfo:_.errorInfo,process:k.i.mutate,cause:_,remoteModel:_.data?this.modelInstanceCreator(o,_.data):null})}catch(e){lt.warn("Mutation error handler failed with:",e)}finally{return[2,_.data?[{data:(L={},L[p]=_.data,L)},p,h]:[]]}j.label=14;case 14:return[3,16];case 15:throw new nt.a(b);case 16:return[3,17];case 17:if(g)return[3,2];j.label=18;case 18:return[2]}})})},[t,n,r,i,o,s,a],pt,c)];case 1:return[2,d.sent()]}})})},e.prototype.createQueryVariables=function(e,t,n,r,i){var o,s,a,u,c,l,d,f=this.schema.namespaces[e].models[t],p=this.schema.namespaces[e].keys[t].primaryKey,h=this.typeQuery.get(f),v=ut(h.find(function(e){return ut(e,1)[0]===n}),3),g=v[1],y=v[2],m=JSON.parse(r),b=m._version,w=at(m,["_version"]),_={};if(null==p?void 0:p.length)try{for(var S=ct(p),E=S.next();!E.done;E=S.next()){var C=E.value;_[C]=w[C]}}catch(e){o={error:e}}finally{try{E&&!E.done&&(s=S.return)&&s.call(S)}finally{if(o)throw o.error}}else _[K.d]=w.id;if(n===$.a.DELETE)d=_;else{d={};var A=Object.values(f.fields);try{for(var O=ct(A),I=O.next();!I.done;I=O.next()){var x=I.value,T=x.name,P=x.type,D=x.association;if(Object(k.r)(P)){if(Object(k.x)(D)&&"BELONGS_TO"===D.connectionType){var N=Object(K.p)(D);if(N)try{for(var M=(c=void 0,ct(N)),L=M.next();!L.done;L=M.next()){var j=L.value;d[j]=w[j]}}catch(e){c={error:e}}finally{try{L&&!L.done&&(l=M.return)&&l.call(M)}finally{if(c)throw c.error}}}}else(n!==$.a.UPDATE||w.hasOwnProperty(T))&&(d[T]=w[T])}}catch(e){a={error:e}}finally{try{I&&!I.done&&(u=O.return)&&u.call(O)}finally{if(a)throw a.error}}}var R=it(it({},d),{_version:b}),U=JSON.parse(i);return[y,it({input:R},n===$.a.CREATE?{}:{condition:Object.keys(U).length>0?U:null}),U,g,f]},e.prototype.opTypeFromTransformerOperation=function(e){switch(e){case $.a.CREATE:return k.h.INSERT;case $.a.DELETE:return k.h.DELETE;case $.a.UPDATE:return k.h.UPDATE;case $.a.GET:break;default:Object(K.l)(e)}},e.prototype.pause=function(){this.processing=!1},e}(),ft=Object(nt.b)(3e5),pt=function(e,t,n){var r=ft(e);return!1===r&&"Network Error"===(null==n?void 0:n.message)?3e5:r},ht=n(122),vt=function(){return(vt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},gt=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},yt=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},mt=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},bt=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},wt={items:[],nextToken:null,startedAt:null},_t=new S.a("DataStore"),St=function(){function e(e,t,n,r,i,o){void 0===n&&(n={}),this.schema=e,this.syncPredicates=t,this.amplifyConfig=n,this.authModeStrategy=r,this.errorHandler=i,this.amplifyContext=o,this.typeQuery=new WeakMap,this.runningProcesses=new C.a,o.API=o.API||b.a,this.generateQueries()}return e.prototype.generateQueries=function(){var e=this;Object.values(this.schema.namespaces).forEach(function(t){Object.values(t.models).filter(function(e){return e.syncable}).forEach(function(n){var r=mt(Object($.b)(t,n,"LIST"),1),i=mt(r[0]).slice(1);e.typeQuery.set(n,i)})})},e.prototype.graphqlFilterFromPredicate=function(e){if(!this.syncPredicates)return null;var t=U.a.getPredicates(this.syncPredicates.get(e),!1);return t?Object($.m)(t):null},e.prototype.retrievePage=function(e,t,n,r,i,o){return void 0===r&&(r=null),gt(this,void 0,void 0,function(){var s,a,u,c,l,d,f,p,h,v,g,y,m,b=this;return yt(this,function(w){switch(w.label){case 0:return s=mt(this.typeQuery.get(e),2),a=s[0],u=s[1],c={limit:r,nextToken:n,lastSync:t,filter:i},[4,Object($.i)({authModeStrategy:this.authModeStrategy,defaultAuthMode:this.amplifyConfig.aws_appsync_authenticationType,modelName:e.name,schema:this.schema})];case 1:return l=w.sent(),d=l.READ,f=0,[4,(p=function(){return gt(b,void 0,void 0,function(){var t,n,r,i;return yt(this,function(s){switch(s.label){case 0:if(!this.runningProcesses.isOpen)throw new Error("sync.retreievePage termination was requested. Exiting.");s.label=1;case 1:return s.trys.push([1,3,,5]),_t.debug("Attempting sync with authMode: "+d[f]),[4,this.jitteredRetry({query:u,variables:c,opName:a,modelDefinition:e,authMode:d[f],onTerminate:o})];case 2:return t=s.sent(),_t.debug("Sync successful with authMode: "+d[f]),[2,t];case 3:if(n=s.sent(),++f>=d.length){if(r=d[f-1],_t.debug("Sync failed with authMode: "+r,n),Object($.f)(n)||Object($.g)(n))return _t.warn("User is unauthorized to query "+a+" with auth mode "+r+". No data could be returned."),[2,{data:(i={},i[a]=wt,i)}];throw n}return _t.debug("Sync failed with authMode: "+d[f-1]+". Retrying with authMode: "+d[f]),[4,p()];case 4:return[2,s.sent()];case 5:return[2]}})})})()];case 2:return h=w.sent().data,v=h[a],g=v.items,y=v.nextToken,m=v.startedAt,[2,{nextToken:y,startedAt:m,items:g}]}})})},e.prototype.jitteredRetry=function(e){var t=e.query,n=e.variables,r=e.opName,i=e.modelDefinition,o=e.authMode,s=e.onTerminate;return gt(this,void 0,void 0,function(){var e=this;return yt(this,function(a){switch(a.label){case 0:return[4,Object(nt.c)(function(t,n){return gt(e,void 0,void 0,function(){var e,s,a,u,c,l,d,f,p,h,v,g=this;return yt(this,function(y){switch(y.label){case 0:return y.trys.push([0,3,,6]),[4,Object($.j)(o,this.amplifyConfig)];case 1:return e=y.sent(),[4,this.amplifyContext.API.graphql({query:t,variables:n,authMode:o,authToken:e,userAgentSuffix:K.i})];case 2:return[2,y.sent()];case 3:if(s=y.sent(),a=Object($.f)(s)||Object($.g)(s))throw new nt.a(a);return u=Boolean(null===(p=null===(f=null==s?void 0:s.data)||void 0===f?void 0:f[r])||void 0===p?void 0:p.items),c=(null==s?void 0:s.errors)&&s.errors.some(function(e){return"Unauthorized"===e.errorType}),l=(null==s?void 0:s.errors)&&s.errors.filter(function(e){return"Unauthorized"!==e.errorType}),d=s,u&&(d.data[r].items=d.data[r].items.filter(function(e){return null!==e})),u&&(null==l?void 0:l.length)?[4,Promise.all(l.map(function(e){return gt(g,void 0,void 0,function(){var t;return yt(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.errorHandler({recoverySuggestion:"Ensure app code is up to date, auth directives exist and are correct on each model, and that server-side data has not been invalidated by a schema change. If the problem persists, search for or create an issue: https://github.com/aws-amplify/amplify-js/issues",localModel:null,message:e.message,model:i.name,operation:r,errorType:Object(rt.c)(e),process:k.i.sync,remoteModel:null,cause:e})];case 1:return n.sent(),[3,3];case 2:return t=n.sent(),_t.error("Sync error handler failed with:",t),[3,3];case 3:return[2]}})})}))]:[3,5];case 4:y.sent(),A.a.dispatch("datastore",{event:"nonApplicableDataReceived",data:{errors:l,modelName:i.name}}),y.label=5;case 5:if(c)return _t.warn("queryError","User is unauthorized to query "+r+", some items could not be returned."),d.data=d.data||{},d.data[r]=vt(vt({},wt),d.data[r]),[2,d];if(null===(v=null===(h=d.data)||void 0===h?void 0:h[r].items)||void 0===v?void 0:v.length)return[2,d];throw s;case 6:return[2]}})})},[t,n],void 0,s)];case 1:return[2,a.sent()]}})})},e.prototype.start=function(e){var t=this,n=this.amplifyConfig,r=n.maxRecordsToSync,i=n.syncPageSize,o=new Map;return new x.a(function(n){var s=Object.values(t.schema.namespaces).reduce(function(t,n){var r,i;try{for(var o=bt(Array.from(n.modelTopologicalOrdering.keys())),s=o.next();!s.done;s=o.next()){var a=s.value,u=e.get(n.models[a]);t.set(n.models[a],u)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return t},new Map),a=Array.from(s.entries()).filter(function(e){return mt(e,1)[0].syncable}).map(function(e){var s=mt(e,2),a=s[0],u=mt(s[1],2),c=u[0],l=u[1];return t.runningProcesses.isOpen&&t.runningProcesses.add(function(e){return gt(t,void 0,void 0,function(){var t,s,u,d,f,p,h,v,g,y=this;return yt(this,function(m){switch(m.label){case 0:return t=!1,s=null,u=null,d=null,f=0,p=this.graphqlFilterFromPredicate(a),h=this.schema.namespaces[c].modelTopologicalOrdering.get(a.name),v=h.map(function(e){return o.get(c+"_"+e)}),g=new Promise(function(o){return gt(y,void 0,void 0,function(){var h,g;return yt(this,function(y){switch(y.label){case 0:return[4,Promise.all(v)];case 1:y.sent(),y.label=2;case 2:return this.runningProcesses.isOpen?(h=Math.min(r-f,i),[4,this.retrievePage(a,l,s,h,p,e)]):[2];case 3:g=y.sent(),d=g.items,s=g.nextToken,u=g.startedAt,f+=d.length,t=null===s||f>=r,n.next({namespace:c,modelDefinition:a,items:d,done:t,startedAt:u,isFullSync:!l}),y.label=4;case 4:if(!t)return[3,2];y.label=5;case 5:return o(),[2]}})})}),o.set(c+"_"+a.name,g),[4,g];case 1:return m.sent(),[2]}})})},"adding model "+a.name)});Promise.all(a).then(function(){n.complete()})})},e.prototype.stop=function(){return gt(this,void 0,void 0,function(){return yt(this,function(e){switch(e.label){case 0:return _t.debug("stopping sync processor"),[4,this.runningProcesses.close()];case 1:return e.sent(),[4,this.runningProcesses.open()];case 2:return e.sent(),_t.debug("sync processor stopped"),[2]}})})},e}(),Et=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},Ct=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){
case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},At=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},Ot=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},It=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(At(arguments[t]));return e},xt=Object(E.b)().isNode,Tt=new S.a("DataStore"),Pt=Symbol("sync");!function(e){e.SYNC_ENGINE_STORAGE_SUBSCRIBED="storageSubscribed",e.SYNC_ENGINE_SUBSCRIPTIONS_ESTABLISHED="subscriptionsEstablished",e.SYNC_ENGINE_SYNC_QUERIES_STARTED="syncQueriesStarted",e.SYNC_ENGINE_SYNC_QUERIES_READY="syncQueriesReady",e.SYNC_ENGINE_MODEL_SYNCED="modelSynced",e.SYNC_ENGINE_OUTBOX_MUTATION_ENQUEUED="outboxMutationEnqueued",e.SYNC_ENGINE_OUTBOX_MUTATION_PROCESSED="outboxMutationProcessed",e.SYNC_ENGINE_OUTBOX_STATUS="outboxStatus",e.SYNC_ENGINE_NETWORK_STATUS="networkStatus",e.SYNC_ENGINE_READY="ready"}(re||(re={}));var kt=function(){function e(e,t,n,r,i,o,s,a,u,c,l,d,f){void 0===c&&(c={}),this.schema=e,this.namespaceResolver=t,this.modelClasses=n,this.userModelClasses=r,this.storage=i,this.modelInstanceCreator=o,this.syncPredicates=u,this.amplifyConfig=c,this.authModeStrategy=l,this.amplifyContext=d,this.connectivityMonitor=f,this.online=!1,this.modelSyncedStatus=new WeakMap,this.runningProcesses=new C.a;var p=this.modelClasses.MutationEvent;this.outbox=new tt(this.schema,p,o,Pt),this.modelMerger=new Je(this.outbox,Pt),this.syncQueriesProcessor=new St(this.schema,this.syncPredicates,this.amplifyConfig,this.authModeStrategy,a,this.amplifyContext),this.subscriptionsProcessor=new ht.b(this.schema,this.syncPredicates,this.amplifyConfig,this.authModeStrategy,a,this.amplifyContext),this.mutationsProcessor=new dt(this.schema,this.storage,this.userModelClasses,this.outbox,this.modelInstanceCreator,p,this.amplifyConfig,this.authModeStrategy,a,s,this.amplifyContext),this.datastoreConnectivity=this.connectivityMonitor||new Ke}return e.prototype.getModelSyncedStatus=function(e){return this.modelSyncedStatus.get(e)},e.prototype.start=function(e){var t=this;return new x.a(function(n){Tt.log("starting sync engine...");var r=[];t.runningProcesses.add(function(){return Et(t,void 0,void 0,function(){var t,i,o,s=this;return Ct(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,this.setupModels(e)];case 1:return a.sent(),[3,3];case 2:return t=a.sent(),n.error(t),[2];case 3:return i=new Promise(function(e,t){s.datastoreConnectivity.status().subscribe(function(i){var o=i.online;return Et(s,void 0,void 0,function(){var i=this;return Ct(this,function(s){return[2,this.runningProcesses.isOpen&&this.runningProcesses.add(function(s){return Et(i,void 0,void 0,function(){var i,a,u,c,l,d=this;return Ct(this,function(f){switch(f.label){case 0:return!o||this.online?[3,10]:(this.online=o,n.next({type:re.SYNC_ENGINE_NETWORK_STATUS,data:{active:this.online}}),a=void 0,xt?(Tt.warn("Realtime disabled when in a server-side environment"),[3,6]):[3,1]);case 1:l=At(this.subscriptionsProcessor.start(),2),i=l[0],a=l[1],f.label=2;case 2:return f.trys.push([2,4,,5]),[4,new Promise(function(e,t){s.then(t);var n=i.subscribe({next:function(t){t===ht.a.CONNECTED&&e()},error:function(e){t(e),d.disconnectionHandler()(e)}});r.push(n)})];case 3:return f.sent(),[3,5];case 4:return u=f.sent(),n.error(u),t(),[2];case 5:Tt.log("Realtime ready"),n.next({type:re.SYNC_ENGINE_SUBSCRIPTIONS_ESTABLISHED}),f.label=6;case 6:return f.trys.push([6,8,,9]),[4,new Promise(function(e,t){var i=d.syncQueriesObservable().subscribe({next:function(t){t.type===re.SYNC_ENGINE_SYNC_QUERIES_READY&&e(),n.next(t)},complete:function(){e()},error:function(e){t(e)}});i&&r.push(i)})];case 7:return f.sent(),[3,9];case 8:return c=f.sent(),n.error(c),t(),[2];case 9:return r.push(this.mutationsProcessor.start().subscribe(function(e){var t=e.modelDefinition,r=e.model,i=e.hasMore;return d.runningProcesses.add(function(){return Et(d,void 0,void 0,function(){var e,o,s=this;return Ct(this,function(a){switch(a.label){case 0:return e=this.userModelClasses[t.name],o=this.modelInstanceCreator(e,r),[4,this.storage.runExclusive(function(e){return s.modelMerger.merge(e,o,t)})];case 1:return a.sent(),n.next({type:re.SYNC_ENGINE_OUTBOX_MUTATION_PROCESSED,data:{model:e,element:o}}),n.next({type:re.SYNC_ENGINE_OUTBOX_STATUS,data:{isEmpty:!i}}),[2]}})})},"mutation processor event")})),xt||r.push(a.subscribe(function(e){var t=At(e,3),n=(t[0],t[1]),r=t[2];return d.runningProcesses.add(function(){return Et(d,void 0,void 0,function(){var e,t,i=this;return Ct(this,function(o){switch(o.label){case 0:return e=this.userModelClasses[n.name],t=this.modelInstanceCreator(e,r),[4,this.storage.runExclusive(function(e){return i.modelMerger.merge(e,t,n)})];case 1:return o.sent(),[2]}})})},"subscription dataSubsObservable event")})),[3,11];case 10:o||(this.online=o,n.next({type:re.SYNC_ENGINE_NETWORK_STATUS,data:{active:this.online}}),r.forEach(function(e){return e.unsubscribe()}),r=[]),f.label=11;case 11:return e(),[2]}})})},"datastore connectivity event")]})})})}),this.storage.observe(null,null,Pt).filter(function(e){var t=e.model;return!0===s.getModelDefinition(t).syncable}).subscribe({next:function(e){var t=e.opType,r=e.model,o=e.element,a=e.condition;return Et(s,void 0,void 0,function(){var e=this;return Ct(this,function(s){return[2,this.runningProcesses.add(function(){return Et(e,void 0,void 0,function(){var e,s,u,c,l;return Ct(this,function(d){switch(d.label){case 0:return e=this.schema.namespaces[this.namespaceResolver(r)],s=this.modelClasses.MutationEvent,u=this.getModelDefinition(r),c=Object($.l)(a,u),l=Object($.d)(e.relationships,this.getModelDefinition(r),t,r,o,c,s,this.modelInstanceCreator),[4,this.outbox.enqueue(this.storage,l)];case 1:return d.sent(),n.next({type:re.SYNC_ENGINE_OUTBOX_MUTATION_ENQUEUED,data:{model:r,element:o}}),n.next({type:re.SYNC_ENGINE_OUTBOX_STATUS,data:{isEmpty:!1}}),[4,i];case 2:return d.sent(),this.online&&this.mutationsProcessor.resume(),[2]}})})},"storage event")]})})}}),n.next({type:re.SYNC_ENGINE_STORAGE_SUBSCRIBED}),[4,this.outbox.peek(this.storage)];case 4:return o=void 0===a.sent(),n.next({type:re.SYNC_ENGINE_OUTBOX_STATUS,data:{isEmpty:o}}),[4,i];case 5:return a.sent(),n.next({type:re.SYNC_ENGINE_READY}),[2]}})})},"sync start")})},e.prototype.getModelsMetadataWithNextFullSync=function(e){return Et(this,void 0,void 0,function(){var t,n=this;return Ct(this,function(r){switch(r.label){case 0:return t=Map.bind,[4,this.runningProcesses.add(function(){return n.getModelsMetadata()},"sync/index getModelsMetadataWithNextFullSync")];case 1:return[2,new(t.apply(Map,[void 0,r.sent().map(function(t){var r=t.namespace,i=t.model,o=t.lastSync,s=t.lastFullSync,a=t.fullSyncInterval,u=(t.lastSyncPredicate,!s||s+a<e?0:o);return[n.schema.namespaces[r].models[i],[r,u]]})]))]}})})},e.prototype.syncQueriesObservable=function(){var e=this;return this.online?new x.a(function(t){var n;e.runningProcesses.isOpen&&e.runningProcesses.add(function(r){return Et(e,void 0,void 0,function(){var e,i,o,s=this;return Ct(this,function(a){switch(a.label){case 0:e=!1,i=function(){var i,a,u,c,l,d,f,p,h;return Ct(this,function(v){switch(v.label){case 0:return i=new WeakMap,[4,o.getModelsMetadataWithNextFullSync(Date.now())];case 1:return a=v.sent(),u=new Set(a.keys()),[4,new Promise(function(e,o){s.runningProcesses.isOpen||e(),r.then(function(){return e()}),n=s.syncQueriesProcessor.start(a).subscribe({next:function(r){var o=r.namespace,a=r.modelDefinition,h=r.items,v=r.done,g=r.startedAt,y=r.isFullSync;return Et(s,void 0,void 0,function(){var r,s,m,b,w,_,S=this;return Ct(this,function(E){switch(E.label){case 0:return r=this.userModelClasses[a.name],i.has(r)||(i.set(r,{new:0,updated:0,deleted:0}),d=Object(K.t)(),p=void 0===p?g:Math.max(p,g)),[4,this.storage.runExclusive(function(e){return Et(S,void 0,void 0,function(){var t,n,o,s,u,c,l,d,f,p,v,g,y,m,b;return Ct(this,function(w){switch(w.label){case 0:return[4,this.outbox.getModelIds(e)];case 1:t=w.sent(),n=[],o=h.filter(function(e){var r=Object($.h)(a,e);return!t.has(r)||(n.push(e),!1)}),s=[],w.label=2;case 2:w.trys.push([2,7,8,9]),u=Ot(n),c=u.next(),w.label=3;case 3:return c.done?[3,6]:(l=c.value,[4,this.modelMerger.merge(e,l,a)]);case 4:void 0!==(d=w.sent())&&s.push([l,d]),w.label=5;case 5:return c=u.next(),[3,3];case 6:return[3,9];case 7:return f=w.sent(),m={error:f},[3,9];case 8:try{c&&!c.done&&(b=u.return)&&b.call(u)}finally{if(m)throw m.error}return[7];case 9:return v=(p=s.push).apply,g=[s],[4,this.modelMerger.mergePage(e,r,o,a)];case 10:return v.apply(p,g.concat([It.apply(void 0,[w.sent()])])),y=i.get(r),s.forEach(function(e){var t=At(e,2)[1];switch(t){case k.h.INSERT:y.new++;break;case k.h.UPDATE:y.updated++;break;case k.h.DELETE:y.deleted++;break;default:Object(K.l)(t)}}),[2]}})})})];case 1:return E.sent(),v?(s=a.name,[4,this.getModelMetadata(o,s)]):[3,4];case 2:return m=E.sent(),b=m.lastFullSync,w=m.fullSyncInterval,l=w,c=void 0===c?b:Math.max(c,y?g:b),m=this.modelClasses.ModelMetadata.copyOf(m,function(e){e.lastSync=g,e.lastFullSync=y?g:m.lastFullSync}),[4,this.storage.save(m,void 0,Pt)];case 3:E.sent(),_=i.get(r),this.modelSyncedStatus.set(r,!0),t.next({type:re.SYNC_ENGINE_MODEL_SYNCED,data:{model:r,isFullSync:y,isDeltaSync:!y,counts:_}}),u.delete(a),0===u.size&&(f=Object(K.t)()-d,e(),t.next({type:re.SYNC_ENGINE_SYNC_QUERIES_READY}),n.unsubscribe()),E.label=4;case 4:return[2]}})})},error:function(e){t.error(e)}}),t.next({type:re.SYNC_ENGINE_SYNC_QUERIES_STARTED,data:{models:Array.from(u).map(function(e){return e.name})}})})];case 2:return v.sent(),h=c+l-(p+f),Tt.debug("Next fullSync in "+h/1e3+" seconds. ("+new Date(Date.now()+h)+")"),[4,o.runningProcesses.add(function(t){return Et(s,void 0,void 0,function(){var n,r;return Ct(this,function(i){return r=new Promise(function(e){n=e,setTimeout(n,h)}),t.then(function(){e=!0,n()}),[2,r]})})},"syncQueriesObservable sleep")];case 3:return v.sent(),[2]}})},o=this,a.label=1;case 1:return t.closed||e?[3,3]:[5,i()];case 2:return a.sent(),[3,1];case 3:return[2]}})})},"syncQueriesObservable main")}):x.a.of()},e.prototype.disconnectionHandler=function(){var e=this;return function(t){Ue.a.CONNECTION_CLOSED!==t&&Ue.a.TIMEOUT_DISCONNECT!==t||e.datastoreConnectivity.socketDisconnected()}},e.prototype.unsubscribeConnectivity=function(){this.datastoreConnectivity.unsubscribe()},e.prototype.stop=function(){return Et(this,void 0,void 0,function(){return Ct(this,function(e){switch(e.label){case 0:return Tt.debug("stopping sync engine"),this.unsubscribeConnectivity(),[4,this.mutationsProcessor.stop()];case 1:return e.sent(),[4,this.subscriptionsProcessor.stop()];case 2:return e.sent(),[4,this.datastoreConnectivity.stop()];case 3:return e.sent(),[4,this.syncQueriesProcessor.stop()];case 4:return e.sent(),[4,this.runningProcesses.close()];case 5:return e.sent(),[4,this.runningProcesses.open()];case 6:return e.sent(),Tt.debug("sync engine stopped and ready to restart"),[2]}})})},e.prototype.setupModels=function(e){return Et(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,d,f,p,h=this;return Ct(this,function(v){switch(v.label){case 0:t=e.fullSyncInterval,n=this.modelClasses.ModelMetadata,r=[],Object.values(this.schema.namespaces).forEach(function(e){Object.values(e.models).filter(function(e){return e.syncable}).forEach(function(t){if(r.push([e.name,t]),e.name===K.h){var n=h.userModelClasses[t.name];h.modelSyncedStatus.set(n,!1)}})}),o=r.map(function(e){var r=At(e,2),o=r[0],s=r[1];return Et(h,void 0,void 0,function(){var e,r,a,u,c,l,d,f,p;return Ct(this,function(h){switch(h.label){case 0:return[4,this.getModelMetadata(o,s.name)];case 1:return e=h.sent(),r=U.a.getPredicates(this.syncPredicates.get(s),!1),a=r?JSON.stringify(r):null,void 0!==e?[3,3]:[4,this.storage.save(this.modelInstanceCreator(n,{model:s.name,namespace:o,lastSync:null,fullSyncInterval:t,lastFullSync:null,lastSyncPredicate:a}),void 0,Pt)];case 2:return l=At.apply(void 0,[h.sent(),1]),d=At(l[0],1),i=d[0],[3,5];case 3:return u=e.lastSyncPredicate?e.lastSyncPredicate:null,c=u!==a,[4,this.storage.save(n.copyOf(e,function(e){e.fullSyncInterval=t,c&&(e.lastSync=null,e.lastFullSync=null,e.lastSyncPredicate=a)}))];case 4:f=At.apply(void 0,[h.sent(),1]),p=At(f[0],1),i=p[0],h.label=5;case 5:return[2,i]}})})}),s={},v.label=1;case 1:return v.trys.push([1,6,7,8]),[4,Promise.all(o)];case 2:a=Ot.apply(void 0,[v.sent()]),u=a.next(),v.label=3;case 3:if(u.done)return[3,5];c=u.value,l=c.model,s[l]=c,v.label=4;case 4:return u=a.next(),[3,3];case 5:return[3,8];case 6:return d=v.sent(),f={error:d},[3,8];case 7:try{u&&!u.done&&(p=a.return)&&p.call(a)}finally{if(f)throw f.error}return[7];case 8:return[2,s]}})})},e.prototype.getModelsMetadata=function(){return Et(this,void 0,void 0,function(){var e;return Ct(this,function(t){switch(t.label){case 0:return e=this.modelClasses.ModelMetadata,[4,this.storage.query(e)];case 1:return[2,t.sent()]}})})},e.prototype.getModelMetadata=function(e,t){return Et(this,void 0,void 0,function(){var n,r;return Ct(this,function(i){switch(i.label){case 0:return n=this.modelClasses.ModelMetadata,r=U.a.createFromExisting(this.schema.namespaces[K.g].models[n.name],function(n){return n.namespace("eq",e).model("eq",t)}),[4,this.storage.query(n,r,{page:0,limit:1})];case 1:return[2,At.apply(void 0,[i.sent(),1])[0]]}})})},e.prototype.getModelDefinition=function(e){var t=this.namespaceResolver(e);return this.schema.namespaces[t].models[e.name]},e.getNamespace=function(){return{name:K.g,relationships:{},enums:{OperationType:{name:"OperationType",values:["CREATE","UPDATE","DELETE"]}},nonModels:{},models:{MutationEvent:{name:"MutationEvent",pluralName:"MutationEvents",syncable:!1,fields:{id:{name:"id",type:"ID",isRequired:!0,isArray:!1},model:{name:"model",type:"String",isRequired:!0,isArray:!1},data:{name:"data",type:"String",isRequired:!0,isArray:!1},modelId:{name:"modelId",type:"String",isRequired:!0,isArray:!1},operation:{name:"operation",type:{enum:"Operationtype"},isArray:!1,isRequired:!0},condition:{name:"condition",type:"String",isArray:!1,isRequired:!0}}},ModelMetadata:{name:"ModelMetadata",pluralName:"ModelsMetadata",syncable:!1,fields:{id:{name:"id",type:"ID",isRequired:!0,isArray:!1},namespace:{name:"namespace",type:"String",isRequired:!0,isArray:!1},model:{name:"model",type:"String",isRequired:!0,isArray:!1},lastSync:{name:"lastSync",type:"Int",isRequired:!1,isArray:!1},lastFullSync:{name:"lastFullSync",type:"Int",isRequired:!1,isArray:!1},fullSyncInterval:{name:"fullSyncInterval",type:"Int",isRequired:!0,isArray:!1},lastSyncPredicate:{name:"lastSyncPredicate",type:"String",isRequired:!1,isArray:!1}}}}}},e}(),Dt=function(){return(Dt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Nt=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},Mt=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},Lt=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},jt=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},Rt=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(jt(arguments[t]));return e};Object(I.e)(!0),Object(I.b)();var Ut,Ft,Bt,zt,qt,Kt,$t,Vt=new S.a("DataStore"),Gt=(Object(K.N)(Date.now()),E.a.browserOrNode().isNode),Wt=new WeakMap,Ht=new WeakMap,Jt=function(e){var t=Wt.get(e);return Ut.namespaces[t].models[e.name]},Yt=function(e){return Object(K.H)(e)&&Wt.has(e)},Zt=function(e){return Wt.get(e)},Xt=function(){if(void 0===Ut){var e="Schema is not initialized. DataStore will not function as expected. This could happen if you have multiple versions of DataStore installed. Please see https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js/#check-for-duplicate-versions";throw Vt.error(e),new Error(e)}},Qt=new WeakSet;!function(e){e.NotRunning="Not Running",e.Starting="Starting",e.Running="Running",e.Stopping="Stopping",e.Clearing="Clearing"}($t||($t={}));var en=new(function(){function e(){var e=this;this.Auth=w.a,this.API=b.a,this.Cache=_.b,this.amplifyConfig={},this.syncPredicates=new WeakMap,this.amplifyContext={Auth:this.Auth,API:this.API,Cache:this.Cache},this.runningProcesses=new C.a,this.state=$t.NotRunning,this.start=function(){return Nt(e,void 0,void 0,function(){var e=this;return Mt(this,function(t){return[2,this.runningProcesses.add(function(){return Nt(e,void 0,void 0,function(){var e,t,n,r=this;return Mt(this,function(i){switch(i.label){case 0:return this.state=$t.Starting,void 0!==this.initialized?[3,1]:(Vt.debug("Starting DataStore"),this.initialized=new Promise(function(e,t){r.initResolve=e,r.initReject=t}),[3,3]);case 1:return[4,this.initialized];case 2:return i.sent(),[2];case 3:return this.storage=new Re(Ut,Zt,y,p,this.storageAdapter,this.sessionId),[4,this.storage.init()];case 4:return i.sent(),Xt(),[4,m(this.storage,Ut.version)];case 5:return i.sent(),(e=this.amplifyConfig.aws_appsync_graphqlEndpoint)?(Vt.debug("GraphQL endpoint available",e),t=this,[4,this.processSyncExpressions()]):[3,7];case 6:return t.syncPredicates=i.sent(),this.sync=new kt(Ut,Zt,Ft,Bt,this.storage,p,this.conflictHandler,this.errorHandler,this.syncPredicates,this.amplifyConfig,this.authModeStrategy,this.amplifyContext,this.connectivityMonitor),n=1e3*this.fullSyncInterval*60,Kt=this.sync.start({fullSyncInterval:n}).subscribe({next:function(e){var t=e.type,n=e.data;t===(Gt?re.SYNC_ENGINE_SYNC_QUERIES_READY:re.SYNC_ENGINE_STORAGE_SUBSCRIBED)&&r.initResolve(),A.a.dispatch("datastore",{event:t,data:n})},error:function(e){Vt.warn("Sync error",e),r.initReject()}}),[3,8];case 7:Vt.warn("Data won't be synchronized. No GraphQL endpoint configured. Did you forget `Amplify.configure(awsconfig)`?",{config:this.amplifyConfig}),this.initResolve(),i.label=8;case 8:return[4,this.initialized];case 9:return i.sent(),this.state=$t.Running,[2]}})})},"datastore start").catch(this.handleAddProcError("DataStore.start()"))]})})},this.query=function(t,n,r){return Nt(e,void 0,void 0,function(){var e=this;return Mt(this,function(i){return[2,this.runningProcesses.add(function(){return Nt(e,void 0,void 0,function(){var e,i,o,s,a,u;return Mt(this,function(c){switch(c.label){case 0:return[4,this.start()];case 1:if(c.sent(),!Yt(t))throw s="Constructor is not for a valid model",Vt.error(s,{modelConstructor:t}),new Error(s);if("string"==typeof n&&void 0!==r&&Vt.warn("Pagination is ignored when querying by id"),e=Jt(t),i=Object(K.m)(e),h(n)){if(i.length>1)throw s=K.j.queryByPkWithCompositeKeyPresent,Vt.error(s,{keyFields:i}),new Error(s);o=U.a.createForSingleField(e,i[0],n)}else o=Object(k.n)(n,e)?U.a.createForPk(e,n):Object(U.c)(n)?void 0:U.a.createFromExisting(e,n);return a=this.processPagination(e,r),Vt.debug("params ready",{modelConstructor:t,predicate:U.a.getPredicates(o,!1),pagination:Dt(Dt({},a),{sort:F.a.getPredicates(a&&a.sort,!1)})}),[4,this.storage.query(t,o,a)];case 2:return u=c.sent(),[2,h(n)||Object(k.n)(n,e)?u[0]:u]}})})},"datastore query").catch(this.handleAddProcError("DataStore.query()"))]})})},this.save=function(t,n){return Nt(e,void 0,void 0,function(){var e=this;return Mt(this,function(r){return[2,this.runningProcesses.add(function(){return Nt(e,void 0,void 0,function(){var e,r,i,o,s,a=this;return Mt(this,function(u){switch(u.label){case 0:return[4,this.start()];case 1:if(u.sent(),e=Ht.get(t),r=t?t.constructor:void 0,!Yt(r))throw i="Object is not an instance of a valid model",Vt.error(i,{model:t}),new Error(i);return o=Jt(r),s=U.a.createFromExisting(o,n),[4,this.storage.runExclusive(function(n){return Nt(a,void 0,void 0,function(){return Mt(this,function(i){switch(i.label){case 0:return[4,n.save(t,s,void 0,e)];case 1:return i.sent(),[2,n.query(r,U.a.createForPk(o,t))]}})})})];case 2:return[2,jt.apply(void 0,[u.sent(),1])[0]]}})})},"datastore save").catch(this.handleAddProcError("DataStore.save()"))]})})},this.setConflictHandler=function(t){var n=t.DataStore;return n&&n.conflictHandler?n.conflictHandler:e.conflictHandler===v&&t.conflictHandler?t.conflictHandler:e.conflictHandler||v},this.setErrorHandler=function(t){var n=t.DataStore;return n&&n.errorHandler?n.errorHandler:e.errorHandler===g&&t.errorHandler?t.errorHandler:e.errorHandler||g},this.delete=function(t,n){return Nt(e,void 0,void 0,function(){var e=this;return Mt(this,function(r){return[2,this.runningProcesses.add(function(){return Nt(e,void 0,void 0,function(){var e,r,i,o,s,a,u,c;return Mt(this,function(l){switch(l.label){case 0:return[4,this.start()];case 1:if(l.sent(),!t)throw u="Model or Model Constructor required",Vt.error(u,{modelOrConstructor:t}),new Error(u);if(!Yt(t))return[3,3];if(o=t,!n)throw u="Id to delete or criteria required. Do you want to delete all? Pass Predicates.ALL",Vt.error(u,{identifierOrCriteria:n}),new Error(u);if(s=Jt(o),"string"==typeof n){if((r=Object(K.m)(s)).length>1)throw u=K.j.deleteByPkWithCompositeKeyPresent,Vt.error(u,{keyFields:r}),new Error(u);e=U.a.createForSingleField(Jt(o),r[0],n)}else if(!(e=Object(k.n)(n,s)?U.a.createForPk(s,n):U.a.createFromExisting(s,n))||!U.a.isValidPredicate(e))throw u="Criteria required. Do you want to delete all? Pass Predicates.ALL",Vt.error(u,{condition:e}),new Error(u);return[4,this.storage.delete(o,e)];case 2:return[2,jt.apply(void 0,[l.sent(),1])[0]];case 3:if(i=t,o=Object.getPrototypeOf(i||{}).constructor,!Yt(o))throw u="Object is not an instance of a valid model",Vt.error(u,{model:i}),new Error(u);if(s=Jt(o),a=U.a.createForPk(s,i),n){if("function"!=typeof n)throw u="Invalid criteria",Vt.error(u,{identifierOrCriteria:n}),new Error(u);e=n(a)}else e=a;return[4,this.storage.delete(i,e)];case 4:return c=jt.apply(void 0,[l.sent(),1]),[2,jt(c[0],1)[0]]}})})},"datastore delete").catch(this.handleAddProcError("DataStore.delete()"))]})})},this.observe=function(t,n){var r,i=t&&Yt(t)?t:void 0;if(t&&void 0===i){var o=t,s=o&&Object.getPrototypeOf(o).constructor;if(Yt(s))return n&&Vt.warn("idOrCriteria is ignored when using a model instance",{model:o,identifierOrCriteria:n}),e.observe(s,o.id);var a="The model is not an instance of a PersistentModelConstructor";throw Vt.error(a,{model:o}),new Error(a)}if(n&&i&&Object(k.n)(n,Jt(i)))throw a=K.j.observeWithObjectLiteral,Vt.error(a,{objectLiteral:n}),new Error(a);if(void 0!==n&&void 0===i)throw a="Cannot provide criteria without a modelConstructor",Vt.error(a,n),new Error(a);if(i&&!Yt(i))throw a="Constructor is not for a valid model",Vt.error(a,{modelConstructor:i}),new Error(a);if("string"==typeof n){var u=Jt(i),c=jt(Object(K.m)(u),1)[0];r=U.a.createForSingleField(Jt(i),c,n)}else r=Object(U.c)(n)?void 0:i&&U.a.createFromExisting(Jt(i),n);return new x.a(function(t){var n;return e.runningProcesses.add(function(){return Nt(e,void 0,void 0,function(){var e=this;return Mt(this,function(o){switch(o.label){case 0:return[4,this.start()];case 1:return o.sent(),n=this.storage.observe(i,r).filter(function(e){var t=e.model;return Zt(t)===K.h}).subscribe({next:function(n){return e.runningProcesses.isOpen&&e.runningProcesses.add(function(){return Nt(e,void 0,void 0,function(){var e,r,i,o,s;return Mt(this,function(a){switch(a.label){case 0:return e=n,"DELETE"===n.opType?[3,2]:(r=Jt(n.model),i=Object(K.m)(r),o=Object(K.o)(n.element,i),[4,this.query(n.model,o)]);case 1:s=a.sent(),e=Dt(Dt({},e),{element:s}),a.label=2;case 2:return t.next(e),[2]}})})},"datastore observe message handler")},error:function(e){return t.error(e)},complete:function(){return t.complete()}}),[2]}})})},"datastore observe observable initialization").catch(e.handleAddProcError("DataStore.observe()")).catch(function(e){t.error(e)}),e.runningProcesses.addCleaner(function(){return Nt(e,void 0,void 0,function(){return Mt(this,function(e){return n&&n.unsubscribe(),[2]})})},"DataStore.observe() cleanup")})},this.observeQuery=function(t,n,r){return new x.a(function(i){var o,s,a=new Map,u=new Map,c=[],l=function(){var e=_();S(e)},d=new K.c({callback:l,errorHandler:i.error,maxInterval:2e3}),f=(r||{}).sort,p=f?{sort:f}:void 0,v=Jt(t),g=Object(K.m)(v);s=h(n)?U.a.createForSingleField(v,g[0],n):Object(U.c)(n)?void 0:U.a.createFromExisting(v,n);var y=U.a.getPredicates(s,!1)||{},m=y.predicates,b=y.type,w=!!m;e.runningProcesses.add(function(){return Nt(e,void 0,void 0,function(){var e,r=this;return Mt(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,this.query(t,n,p)];case 1:return s.sent().forEach(function(e){var n=Jt(t),r=Object($.h)(n,e);a.set(r,e)}),o=this.observe(t).subscribe(function(e){var t,n,i=e.element,o=e.model,s=e.opType,l=Jt(o),f=Object($.h)(l,i);if(w&&!Object(K.R)(i,b,m)){if("UPDATE"!==s||!a.has(f)&&!u.has(f))return;c.push(f)}"DELETE"===s?c.push(f):u.set(f,i);var p=null!==(n=null===(t=r.sync)||void 0===t?void 0:t.getModelSyncedStatus(o))&&void 0!==n&&n;(u.size-c.length>=r.syncPageSize||p)&&d.resolve(),d.start()}),l(),[3,3];case 2:return e=s.sent(),i.error(e),[3,3];case 3:return[2]}})})},"datastore observequery startup").catch(e.handleAddProcError("DataStore.observeQuery()")).catch(function(e){i.error(e)});var _=function(){var n,i,o=null!==(i=null===(n=e.sync)||void 0===n?void 0:n.getModelSyncedStatus(t))&&void 0!==i&&i,s=Rt(Array.from(a.values()),Array.from(u.values()));return(null==r?void 0:r.sort)&&E(s),a.clear(),s.forEach(function(e){var n=Jt(t),r=Object($.h)(n,e);a.set(r,e)}),c.forEach(function(e){return a.delete(e)}),{items:Array.from(a.values()),isSynced:o}},S=function(e){i.next(e),u.clear(),c=[]},E=function(n){var i=Jt(t),o=e.processPagination(i,r),s=F.a.getPredicates(o.sort);if(s.length){var a=Object(K.P)(s);n.sort(a)}};return A.a.listen("datastore",function e(n){var r,i=n.payload,o=i.event,s=i.data;o===re.SYNC_ENGINE_MODEL_SYNCED&&(null===(r=null==s?void 0:s.model)||void 0===r?void 0:r.name)===t.name&&(l(),A.a.remove("datastore",e))}),e.runningProcesses.addCleaner(function(){return Nt(e,void 0,void 0,function(){return Mt(this,function(e){return o&&o.unsubscribe(),[2]})})},"datastore observequery cleaner")})},this.configure=function(t){void 0===t&&(t={}),e.amplifyContext.Auth=e.Auth,e.amplifyContext.API=e.API,e.amplifyContext.Cache=e.Cache;var n=t.DataStore,r=t.authModeStrategyType,i=(t.conflictHandler,t.errorHandler,t.maxRecordsToSync),o=t.syncPageSize,s=t.fullSyncInterval,a=t.syncExpressions,u=t.authProviders,c=t.storageAdapter,l=Lt(t,["DataStore","authModeStrategyType","conflictHandler","errorHandler","maxRecordsToSync","syncPageSize","fullSyncInterval","syncExpressions","authProviders","storageAdapter"]);switch(e.amplifyConfig=Dt(Dt({},l),e.amplifyConfig),e.conflictHandler=e.setConflictHandler(t),e.errorHandler=e.setErrorHandler(t),n&&n.authModeStrategyType||r||k.a.DEFAULT){case k.a.MULTI_AUTH:e.authModeStrategy=j(e.amplifyContext);break;case k.a.DEFAULT:default:e.authModeStrategy=R}e.amplifyConfig.authProviders=n&&n.authProviders||u,e.syncExpressions=n&&n.syncExpressions||a||e.syncExpressions,e.maxRecordsToSync=n&&n.maxRecordsToSync||i||e.maxRecordsToSync||1e4,e.amplifyConfig.maxRecordsToSync=e.maxRecordsToSync,e.syncPageSize=n&&n.syncPageSize||o||e.syncPageSize||1e3,e.amplifyConfig.syncPageSize=e.syncPageSize,e.fullSyncInterval=n&&n.fullSyncInterval||s||e.fullSyncInterval||1440,e.storageAdapter=n&&n.storageAdapter||c||e.storageAdapter||void 0,e.sessionId=e.retrieveSessionId()}}return e.prototype.getModuleName=function(){return"DataStore"},e.prototype.handleAddProcError=function(e){var t=this;return function(n){throw n.message.startsWith("BackgroundManagerNotOpenError")?new Error(["DataStoreStateError: Tried to execute `"+e+'` while DataStore was "'+t.state+'".','This can only be done while DataStore is "Started" or "Stopped". To remedy:',"Ensure all calls to `stop()` and `clear()` have completed first.","If this is not possible, retry the operation until it succeeds."].join("\n")):n}},e.prototype.clear=function(){return Nt(this,void 0,void 0,function(){return Mt(this,function(e){switch(e.label){case 0:return Xt(),this.state=$t.Clearing,[4,this.runningProcesses.close()];case 1:return e.sent(),void 0!==this.storage?[3,3]:(this.storage=new Re(Ut,Zt,y,p,this.storageAdapter,this.sessionId),[4,this.storage.init()]);case 2:e.sent(),e.label=3;case 3:return Kt&&!Kt.closed&&Kt.unsubscribe(),this.sync?[4,this.sync.stop()]:[3,5];case 4:e.sent(),e.label=5;case 5:return[4,this.storage.clear()];case 6:return e.sent(),this.initialized=void 0,this.storage=void 0,this.sync=void 0,this.syncPredicates=new WeakMap,[4,this.runningProcesses.open()];case 7:return e.sent(),this.state=$t.NotRunning,[2]}})})},e.prototype.stop=function(){return Nt(this,void 0,void 0,function(){return Mt(this,function(e){switch(e.label){case 0:return this.state=$t.Stopping,[4,this.runningProcesses.close()];case 1:return e.sent(),Kt&&!Kt.closed&&Kt.unsubscribe(),this.sync?[4,this.sync.stop()]:[3,3];case 2:e.sent(),e.label=3;case 3:return this.initialized=void 0,this.sync=void 0,[4,this.runningProcesses.open()];case 4:return e.sent(),this.state=$t.NotRunning,[2]}})})},e.prototype.processPagination=function(e,t){var n,r=t||{},i=r.limit,o=r.page,s=r.sort;if(void 0!==i||void 0!==o||void 0!==s){if(void 0!==o&&void 0===i)throw new Error("Limit is required when requesting a page")
;if(void 0!==o){if("number"!=typeof o)throw new Error("Page should be a number");if(o<0)throw new Error("Page can't be negative")}if(void 0!==i){if("number"!=typeof i)throw new Error("Limit should be a number");if(i<0)throw new Error("Limit can't be negative")}return s&&(n=F.a.createFromExisting(e,t.sort)),{limit:i,page:o,sort:n}}},e.prototype.processSyncExpressions=function(){return Nt(this,void 0,void 0,function(){var e,t=this;return Mt(this,function(n){switch(n.label){case 0:return this.syncExpressions&&this.syncExpressions.length?[4,Promise.all(this.syncExpressions.map(function(e){return Nt(t,void 0,void 0,function(){var t,n,r,i,o,s;return Mt(this,function(a){switch(a.label){case 0:return[4,e];case 1:return t=a.sent(),n=t.modelConstructor,r=t.conditionProducer,i=Jt(n),[4,this.unwrapPromise(r)];case 2:return o=a.sent(),Object(U.c)(o)?[2,[i,null]]:(s=this.createFromCondition(i,o),[2,[i,s]])}})})}))]:[2,new WeakMap];case 1:return e=n.sent(),[2,this.weakMapFromEntries(e)]}})})},e.prototype.createFromCondition=function(e,t){try{return U.a.createFromExisting(e,t)}catch(e){throw Vt.error("Error creating Sync Predicate"),e}},e.prototype.unwrapPromise=function(e){return Nt(this,void 0,void 0,function(){var t;return Mt(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e()];case 1:return[2,n.sent()];case 2:if((t=n.sent())instanceof TypeError)return[2,e];throw t;case 3:return[2]}})})},e.prototype.weakMapFromEntries=function(e){return e.reduce(function(e,t){var n=jt(t,2),r=n[0],i=n[1];if(e.has(r)){var o=r.name;return Vt.warn("You can only utilize one Sync Expression per model.\n          Subsequent sync expressions for the "+o+" model will be ignored."),e}return i&&e.set(r,i),e},new WeakMap)},e.prototype.retrieveSessionId=function(){try{var e=sessionStorage.getItem("datastoreSessionId");if(e){var t=this.amplifyConfig.aws_appsync_graphqlEndpoint.split("/")[2];return e+"-"+jt(t.split("."),1)[0]}}catch(e){}},e}());O.a.register(en)},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(50),i=function(){function e(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?":"!==e.protocol.slice(-1)?"".concat(e.protocol,":"):e.protocol:"https:",this.path=e.path?"/"!==e.path.charAt(0)?"/".concat(e.path):e.path:"/"}return e.isInstance=function(e){if(!e)return!1;var t=e;return"method"in t&&"protocol"in t&&"hostname"in t&&"path"in t&&"object"==typeof t.query&&"object"==typeof t.headers},e.prototype.clone=function(){var t,n=new e(Object(r.a)(Object(r.a)({},this),{headers:Object(r.a)({},this.headers)}));return n.query&&(n.query=(t=n.query,Object.keys(t).reduce(function(e,n){var i,o=t[n];return Object(r.a)(Object(r.a)({},e),((i={})[n]=Array.isArray(o)?Object(r.e)([],Object(r.d)(o),!1):o,i))},{}))),n},e}();!function(){function e(e){this.statusCode=e.statusCode,this.headers=e.headers||{},this.body=e.body}e.isInstance=function(e){if(!e)return!1;var t=e;return"number"==typeof t.statusCode&&"object"==typeof t.headers}}()},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n,r=/\r\n|[\n\r]/g,i=1,o=t+1;(n=r.exec(e.body))&&n.index<t;)i+=1,o=t+1-(n.index+n[0].length);return{line:i,column:o}}function o(e){return s(e.source,i(e.source,e.start))}function s(e,t){var n=e.locationOffset.column-1,r=u(n)+e.body,i=t.line-1,o=e.locationOffset.line-1,s=t.line+o,c=1===t.line?n:0,l=t.column+c,d="".concat(e.name,":").concat(s,":").concat(l,"\n"),f=r.split(/\r\n|[\n\r]/g),p=f[i];if(p.length>120){for(var h=Math.floor(l/80),v=l%80,g=[],y=0;y<p.length;y+=80)g.push(p.slice(y,y+80));return d+a([["".concat(s),g[0]]].concat(g.slice(1,h+1).map(function(e){return["",e]}),[[" ",u(v-1)+"^"],["",g[h+1]]]))}return d+a([["".concat(s-1),f[i-1]],["".concat(s),p],["",u(l-1)+"^"],["".concat(s+1),f[i+1]]])}function a(e){var t=e.filter(function(e){return e[0],void 0!==e[1]}),n=Math.max.apply(Math,t.map(function(e){return e[0].length}));return t.map(function(e){var t,r=e[0],i=e[1];return u(n-(t=r).length)+t+(i?" | "+i:" |")}).join("\n")}function u(e){return Array(e+1).join(" ")}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){var t="function"==typeof Map?new Map:void 0;return(v=function(e){function n(){return g(e,arguments,b(this).constructor)}if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),m(n,e)})(e)}function g(e,t,n){return(g=y()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&m(i,n.prototype),i}).apply(null,arguments)}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e){return void 0===e||0===e.length?void 0:e}n.d(t,"a",function(){return S});var _=n(95),S=function(e){function t(e,n,o,s,a,u,c){var f,v,y,m;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(m=g.call(this,e)).name="GraphQLError",m.originalError=null!=u?u:void 0,m.nodes=w(Array.isArray(n)?n:n?[n]:void 0);for(var b=[],_=0,S=null!==(E=m.nodes)&&void 0!==E?E:[];_<S.length;_++){var E,C=S[_].loc;null!=C&&b.push(C)}b=w(b),m.source=null!=o?o:null===(f=b)||void 0===f?void 0:f[0].source,m.positions=null!=s?s:null===(v=b)||void 0===v?void 0:v.map(function(e){return e.start}),m.locations=s&&o?s.map(function(e){return i(o,e)}):null===(y=b)||void 0===y?void 0:y.map(function(e){return i(e.source,e.start)}),m.path=null!=a?a:void 0;var A,O=null==u?void 0:u.extensions;return null==c&&"object"==r(A=O)&&null!==A?m.extensions=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){d(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},O):m.extensions=null!=c?c:{},Object.defineProperties(h(m),{message:{enumerable:!0},locations:{enumerable:null!=m.locations},path:{enumerable:null!=m.path},extensions:{enumerable:null!=m.extensions&&Object.keys(m.extensions).length>0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),null!=u&&u.stack?(Object.defineProperty(h(m),"stack",{value:u.stack,writable:!0,configurable:!0}),p(m)):(Error.captureStackTrace?Error.captureStackTrace(h(m),t):Object.defineProperty(h(m),"stack",{value:Error().stack,writable:!0,configurable:!0}),m)}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,e);var n,a,u,c,v,g=(n=t,a=y(),function(){var e,t=b(n);if(a){var r=b(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return p(this,e)});return u=t,(c=[{key:"toString",value:function(){return function(e){var t=e.message;if(e.nodes)for(var n=0,r=e.nodes;n<r.length;n++){var i=r[n];i.loc&&(t+="\n\n"+o(i.loc))}else if(e.source&&e.locations)for(var a=0,u=e.locations;a<u.length;a++){var c=u[a];t+="\n\n"+s(e.source,c)}return t}(this)}},{key:_.a,get:function(){return"Object"}}])&&f(u.prototype,c),v&&f(u,v),t}(v(Error))},,,,,,,,,,,function(e,t,n){"use strict";function r(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function i(e,t,n){for(var r,i,s=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(o[(i=r)>>18&63]+o[i>>12&63]+o[i>>6&63]+o[63&i]);return s.join("")}t.byteLength=function(e){var t=r(e),n=t[0],i=t[1];return 3*(n+i)/4-i},t.toByteArray=function(e){var t,n,i=r(e),o=i[0],u=i[1],c=new a(function(e,t,n){return 3*(t+n)/4-n}(0,o,u)),l=0,d=u>0?o-4:o;for(n=0;n<d;n+=4)t=s[e.charCodeAt(n)]<<18|s[e.charCodeAt(n+1)]<<12|s[e.charCodeAt(n+2)]<<6|s[e.charCodeAt(n+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;return 2===u&&(t=s[e.charCodeAt(n)]<<2|s[e.charCodeAt(n+1)]>>4,c[l++]=255&t),1===u&&(t=s[e.charCodeAt(n)]<<10|s[e.charCodeAt(n+1)]<<4|s[e.charCodeAt(n+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t),c},t.fromByteArray=function(e){for(var t,n=e.length,r=n%3,s=[],a=0,u=n-r;a<u;a+=16383)s.push(i(e,a,a+16383>u?u:a+16383));return 1===r?(t=e[n-1],s.push(o[t>>2]+o[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],s.push(o[t>>10]+o[t>>4&63]+o[t<<2&63]+"=")),s.join("")};for(var o=[],s=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,l=u.length;c<l;++c)o[c]=u[c],s[u.charCodeAt(c)]=c;s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,d=n?i-1:0,f=n?-1:1,p=e[t+d];for(d+=f,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+e[t+d],d+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+e[t+d],d+=f,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),o-=c}return(p?-1:1)*s*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,d=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,h=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+d>=1?f/u:f*Math.pow(2,1-d))*u>=2&&(s++,u/=2),s+d>=l?(a=0,s=l):s+d>=1?(a=(t*u-1)*Math.pow(2,i),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;e[n+p]=255&a,p+=h,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;e[n+p]=255&s,p+=h,s/=256,c-=8);e[n+p-h]|=128*v}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t){},function(e,t,n){var r,i,o;e.exports=(i=(r=n(38)).lib.Base,o=r.enc.Utf8,void(r.algo.HMAC=i.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=o.parse(t));var n=e.blockSize,r=4*n;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var i=this._oKey=t.clone(),s=this._iKey=t.clone(),a=i.words,u=s.words,c=0;c<n;c++)a[c]^=1549556828,u[c]^=909522486;i.sigBytes=s.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})))},function(e,t){},function(e,t,n){e.exports=self.fetch||(self.fetch=n(126).default||n(126))},function(e,t,n){(function(e,r){var i;!function(o){function s(e){throw new RangeError(_[e])}function a(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function u(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+a((e=e.replace(w,".")).split("."),t).join(".")}function c(e){for(var t,n,r=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function l(e){return a(e,function(e){var t="";return e>65535&&(t+=E((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+E(e)}).join("")}function d(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function f(e,t,n){var r=0;for(e=n?S(e/700):e>>1,e+=S(e/t);e>455;r+=36)e=S(e/35);return S(r+36*e/(e+38))}function p(e){var t,n,r,i,o,a,u,c,d,p,h,v=[],g=e.length,m=0,b=128,w=72;for((n=e.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&s("not-basic"),v.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<g;){for(o=m,a=1,u=36;i>=g&&s("invalid-input"),((c=(h=e.charCodeAt(i++))-48<10?h-22:h-65<26?h-65:h-97<26?h-97:36)>=36||c>S((y-m)/a))&&s("overflow"),m+=c*a,!(c<(d=u<=w?1:u>=w+26?26:u-w));u+=36)a>S(y/(p=36-d))&&s("overflow"),a*=p;w=f(m-o,t=v.length+1,0==o),S(m/t)>y-b&&s("overflow"),b+=S(m/t),m%=t,v.splice(m++,0,b)}return l(v)}function h(e){var t,n,r,i,o,a,u,l,p,h,v,g,m,b,w,_=[];for(g=(e=c(e)).length,t=128,n=0,o=72,a=0;a<g;++a)(v=e[a])<128&&_.push(E(v));for(r=i=_.length,i&&_.push("-");r<g;){for(u=y,a=0;a<g;++a)(v=e[a])>=t&&v<u&&(u=v);for(u-t>S((y-n)/(m=r+1))&&s("overflow"),n+=(u-t)*m,t=u,a=0;a<g;++a)if((v=e[a])<t&&++n>y&&s("overflow"),v==t){for(l=n,p=36;!(l<(h=p<=o?1:p>=o+26?26:p-o));p+=36)w=l-h,b=36-h,_.push(E(d(h+w%b,0))),l=S(w/b);_.push(E(d(l,0))),o=f(n,m,r==i),n=0,++r}++n,++t}return _.join("")}t&&t.nodeType,e&&e.nodeType;var v="object"==typeof r&&r;v.global!==v&&v.window!==v&&v.self;var g,y=2147483647,m=/^xn--/,b=/[^\x20-\x7E]/,w=/[\x2E\u3002\uFF0E\uFF61]/g,_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},S=Math.floor,E=String.fromCharCode;g={version:"1.4.1",ucs2:{decode:c,encode:l},decode:p,encode:h,toASCII:function(e){return u(e,function(e){return b.test(e)?"xn--"+h(e):e})},toUnicode:function(e){return u(e,function(e){return m.test(e)?p(e.slice(4).toLowerCase()):e})}},void 0===(i=function(){return g}.call(t,n,t,e))||(e.exports=i)}()}).call(this,n(73)(e),n(60))},function(e,t,n){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,n){"use strict";t.decode=t.parse=n(218),t.encode=t.stringify=n(219)},function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,o){t=t||"&",n=n||"=";var s={};if("string"!=typeof e||0===e.length)return s;var a=/\+/g;e=e.split(t);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var c=e.length;u>0&&c>u&&(c=u);for(var l=0;l<c;++l){var d,f,p,h,v=e[l].replace(a,"%20"),g=v.indexOf(n);g>=0?(d=v.substr(0,g),f=v.substr(g+1)):(d=v,f=""),p=decodeURIComponent(d),h=decodeURIComponent(f),r(s,p)?i(s[p])?s[p].push(h):s[p]=[s[p],h]:s[p]=h}return s};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";function r(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,a){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?r(s(e),function(s){var a=encodeURIComponent(i(s))+n;return o(e[s])?r(e[s],function(e){return a+encodeURIComponent(i(e))}).join(t):a+encodeURIComponent(i(e[s]))}).join(t):a?encodeURIComponent(i(a))+n+encodeURIComponent(i(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},s=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},function(e,t,n){var r,i,o=n(127),s=n(128),a=0,u=0;e.exports=function(e,t,n){var c=t&&n||0,l=t||[],d=(e=e||{}).node||r,f=void 0!==e.clockseq?e.clockseq:i;if(null==d||null==f){var p=o();null==d&&(d=r=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==f&&(f=i=16383&(p[6]<<8|p[7]))}var h=void 0!==e.msecs?e.msecs:(new Date).getTime(),v=void 0!==e.nsecs?e.nsecs:u+1,g=h-a+(v-u)/1e4;if(g<0&&void 0===e.clockseq&&(f=f+1&16383),(g<0||h>a)&&void 0===e.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=h,u=v,i=f;var y=(1e4*(268435455&(h+=122192928e5))+v)%4294967296;l[c++]=y>>>24&255,l[c++]=y>>>16&255,l[c++]=y>>>8&255,l[c++]=255&y;var m=h/4294967296*1e4&268435455;l[c++]=m>>>8&255,l[c++]=255&m,l[c++]=m>>>24&15|16,l[c++]=m>>>16&255,l[c++]=f>>>8|128,l[c++]=255&f;for(var b=0;b<6;++b)l[c+b]=d[b];return t||s(l)}},function(e,t,n){var r=n(127),i=n(128);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[o+a]=s[a];return t||i(s)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var r=n(129),i=n(131),o=n(229),s=n(237),a=n(239),u=n(54),c=function(){function e(e){(0,s.supportsWebCrypto)((0,u.locateWindow)())?this.hash=new i.Sha256(e):(0,a.isMsWindow)((0,u.locateWindow)())?this.hash=new r.Sha256(e):this.hash=new o.Sha256(e)}return e.prototype.update=function(e,t){this.hash.update(e,t)},e.prototype.digest=function(){return this.hash.digest()},e}();t.Sha256=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEmptyData=void 0,t.isEmptyData=function(e){return"string"==typeof e?0===e.length:0===e.byteLength}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uint32ArrayFrom=t.numToUint8=t.isEmptyData=t.convertToBuffer=void 0;var r=n(225);Object.defineProperty(t,"convertToBuffer",{enumerable:!0,get:function(){return r.convertToBuffer}});var i=n(226);Object.defineProperty(t,"isEmptyData",{enumerable:!0,get:function(){return i.isEmptyData}});var o=n(227);Object.defineProperty(t,"numToUint8",{enumerable:!0,get:function(){return o.numToUint8}});var s=n(228);Object.defineProperty(t,"uint32ArrayFrom",{enumerable:!0,get:function(){return s.uint32ArrayFrom}})},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.convertToBuffer=void 0;var r=n(174),i=void 0!==e&&e.from?function(t){return e.from(t,"utf8")}:r.fromUtf8;t.convertToBuffer=function(e){return e instanceof Uint8Array?e:"string"==typeof e?i(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}}).call(this,n(12).Buffer)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEmptyData=void 0,t.isEmptyData=function(e){return"string"==typeof e?0===e.length:0===e.byteLength}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.numToUint8=void 0,t.numToUint8=function(e){return new Uint8Array([(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uint32ArrayFrom=void 0,t.uint32ArrayFrom=function(e){if(!Array.from){for(var t=new Uint32Array(e.length);0<e.length;)t[0]=e[0];return t}return Uint32Array.from(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(0,n(2).__exportStar)(n(230),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var r=n(2),i=n(132),o=n(231),s=n(232),a=function(){function e(e){if(this.hash=new o.RawSha256,e){this.outer=new o.RawSha256;var t=function(e){var t=(0,s.convertToBuffer)(e);if(t.byteLength>i.BLOCK_SIZE){var n=new o.RawSha256;n.update(t),t=n.digest()}var r=new Uint8Array(i.BLOCK_SIZE);return r.set(t),r}(e),n=new Uint8Array(i.BLOCK_SIZE);n.set(t);for(var r=0;r<i.BLOCK_SIZE;r++)t[r]^=54,n[r]^=92;for(this.hash.update(t),this.outer.update(n),r=0;r<t.byteLength;r++)t[r]=0}}return e.prototype.update=function(e){if(!(0,s.isEmptyData)(e)&&!this.error)try{this.hash.update((0,s.convertToBuffer)(e))}catch(e){this.error=e}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return(0,r.__awaiter)(this,void 0,void 0,function(){return(0,r.__generator)(this,function(e){return[2,this.digestSync()]})})},e}();t.Sha256=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RawSha256=void 0;var r=n(132),i=function(){function e(){this.state=Int32Array.from(r.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=0,n=e.byteLength;if(this.bytesHashed+=n,8*this.bytesHashed>r.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=e[t++],n--,this.bufferLength===r.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var e=8*this.bytesHashed,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(t.setUint8(this.bufferLength++,128),n%r.BLOCK_SIZE>=r.BLOCK_SIZE-8){for(var i=this.bufferLength;i<r.BLOCK_SIZE;i++)t.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(i=this.bufferLength;i<r.BLOCK_SIZE-8;i++)t.setUint8(i,0);t.setUint32(r.BLOCK_SIZE-8,Math.floor(e/4294967296),!0),t.setUint32(r.BLOCK_SIZE-4,e),this.hashBuffer(),this.finished=!0}var o=new Uint8Array(r.DIGEST_LENGTH);for(i=0;i<8;i++)o[4*i]=this.state[i]>>>24&255,o[4*i+1]=this.state[i]>>>16&255,o[4*i+2]=this.state[i]>>>8&255,o[4*i+3]=this.state[i]>>>0&255;return o},e.prototype.hashBuffer=function(){for(var e=this.buffer,t=this.state,n=t[0],i=t[1],o=t[2],s=t[3],a=t[4],u=t[5],c=t[6],l=t[7],d=0;d<r.BLOCK_SIZE;d++){if(d<16)this.temp[d]=(255&e[4*d])<<24|(255&e[4*d+1])<<16|(255&e[4*d+2])<<8|255&e[4*d+3];else{var f=this.temp[d-2],p=(f>>>17|f<<15)^(f>>>19|f<<13)^f>>>10,h=((f=this.temp[d-15])>>>7|f<<25)^(f>>>18|f<<14)^f>>>3;this.temp[d]=(p+this.temp[d-7]|0)+(h+this.temp[d-16]|0)}var v=(((a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7))+(a&u^~a&c)|0)+(l+(r.KEY[d]+this.temp[d]|0)|0)|0,g=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&i^n&o^i&o)|0;l=c,c=u,u=a,a=s+v|0,s=o,o=i,i=n,n=v+g|0}t[0]+=n,t[1]+=i,t[2]+=o,t[3]+=s,t[4]+=a,t[5]+=u,t[6]+=c,t[7]+=l},e}();t.RawSha256=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uint32ArrayFrom=t.numToUint8=t.isEmptyData=t.convertToBuffer=void 0;var r=n(233);Object.defineProperty(t,"convertToBuffer",{enumerable:!0,get:function(){return r.convertToBuffer}});var i=n(234);Object.defineProperty(t,"isEmptyData",{enumerable:!0,get:function(){return i.isEmptyData}});var o=n(235);Object.defineProperty(t,"numToUint8",{enumerable:!0,get:function(){return o.numToUint8}});var s=n(236);Object.defineProperty(t,"uint32ArrayFrom",{enumerable:!0,get:function(){return s.uint32ArrayFrom}})},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.convertToBuffer=void 0;var r=n(404),i=void 0!==e&&e.from?function(t){return e.from(t,"utf8")}:r.fromUtf8;t.convertToBuffer=function(e){return e instanceof Uint8Array?e:"string"==typeof e?i(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}}).call(this,n(12).Buffer)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEmptyData=void 0,t.isEmptyData=function(e){return"string"==typeof e?0===e.length:0===e.byteLength}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.numToUint8=void 0,t.numToUint8=function(e){return new Uint8Array([(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uint32ArrayFrom=void 0,t.uint32ArrayFrom=function(e){if(!Array.from){for(var t=new Uint32Array(e.length);0<e.length;)t[0]=e[0];return t}return Uint32Array.from(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(2).__exportStar(n(238),t)},function(e,t,n){"use strict";function r(e){return"object"==typeof e&&"object"==typeof e.crypto&&"function"==typeof e.crypto.getRandomValues}function i(e){return e&&s.every(function(t){return"function"==typeof e[t]})}Object.defineProperty(t,"__esModule",{value:!0}),t.supportsZeroByteGCM=t.supportsSubtleCrypto=t.supportsSecureRandom=t.supportsWebCrypto=void 0;var o=n(2),s=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];t.supportsWebCrypto=function(e){return!(!r(e)||"object"!=typeof e.crypto.subtle)&&i(e.crypto.subtle)},t.supportsSecureRandom=r,t.supportsSubtleCrypto=i,t.supportsZeroByteGCM=function(e){return o.__awaiter(this,void 0,void 0,function(){var t;return o.__generator(this,function(n){switch(n.label){case 0:if(!i(e))return[2,!1];n.label=1;case 1:return n.trys.push([1,4,,5]),[4,e.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return t=n.sent(),[4,e.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},t,new Uint8Array(0))];case 3:return[2,16===n.sent().byteLength];case 4:return n.sent(),[2,!1];case 5:return[2]}})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);r.__exportStar(n(240),t),r.__exportStar(n(241),t),r.__exportStar(n(242),t),r.__exportStar(n(243),t),r.__exportStar(n(244),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMsWindow=void 0;var r=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];t.isMsWindow=function(e){if(function(e){return"MSInputMethodContext"in e&&"msCrypto"in e}(e)&&void 0!==e.msCrypto.subtle){var t=e.msCrypto,n=t.getRandomValues,i=t.subtle;return r.map(function(e){return i[e]}).concat(n).every(function(e){return"function"==typeof e})}return!1}},function(e,t){},function(e,t,n){"use strict";function r(e){return"string"==typeof e?a.fromUtf8(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=n(134),s=n(247),a=n(399),u=function(){function e(e){if(this.hash=new s.RawSha256,e){this.outer=new s.RawSha256;var t=function(e){var t=r(e);if(t.byteLength>o.BLOCK_SIZE){var n=new s.RawSha256;n.update(t),t=n.digest()}var i=new Uint8Array(o.BLOCK_SIZE);return i.set(t),i}(e),n=new Uint8Array(o.BLOCK_SIZE);n.set(t);for(var i=0;i<o.BLOCK_SIZE;i++)t[i]^=54,n[i]^=92;for(this.hash.update(t),this.outer.update(n),i=0;i<t.byteLength;i++)t[i]=0}}return e.prototype.update=function(e){if(!function(e){return"string"==typeof e?0===e.length:0===e.byteLength}(e)&&!this.error)try{this.hash.update(r(e))}catch(e){this.error=e}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(e){return[2,this.digestSync()]})})},e}();t.Sha256=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(134),i=function(){function e(){this.state=Int32Array.from(r.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=0,n=e.byteLength;if(this.bytesHashed+=n,8*this.bytesHashed>r.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=e[t++],n--,this.bufferLength===r.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var e=8*this.bytesHashed,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(t.setUint8(this.bufferLength++,128),n%r.BLOCK_SIZE>=r.BLOCK_SIZE-8){for(var i=this.bufferLength;i<r.BLOCK_SIZE;i++)t.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(i=this.bufferLength;i<r.BLOCK_SIZE-8;i++)t.setUint8(i,0);t.setUint32(r.BLOCK_SIZE-8,Math.floor(e/4294967296),!0),t.setUint32(r.BLOCK_SIZE-4,e),this.hashBuffer(),this.finished=!0}var o=new Uint8Array(r.DIGEST_LENGTH);for(i=0;i<8;i++)o[4*i]=this.state[i]>>>24&255,o[4*i+1]=this.state[i]>>>16&255,o[4*i+2]=this.state[i]>>>8&255,o[4*i+3]=this.state[i]>>>0&255;return o},e.prototype.hashBuffer=function(){for(var e=this.buffer,t=this.state,n=t[0],i=t[1],o=t[2],s=t[3],a=t[4],u=t[5],c=t[6],l=t[7],d=0;d<r.BLOCK_SIZE;d++){if(d<16)this.temp[d]=(255&e[4*d])<<24|(255&e[4*d+1])<<16|(255&e[4*d+2])<<8|255&e[4*d+3];else{var f=this.temp[d-2],p=(f>>>17|f<<15)^(f>>>19|f<<13)^f>>>10,h=((f=this.temp[d-15])>>>7|f<<25)^(f>>>18|f<<14)^f>>>3;this.temp[d]=(p+this.temp[d-7]|0)+(h+this.temp[d-16]|0)}var v=(((a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7))+(a&u^~a&c)|0)+(l+(r.KEY[d]+this.temp[d]|0)|0)|0,g=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&i^n&o^i&o)|0;l=c,c=u,u=a,a=s+v|0,s=o,o=i,i=n,n=v+g|0}t[0]+=n,t[1]+=i,t[2]+=o,t[3]+=s,t[4]+=a,t[5]+=u,t[6]+=c,t[7]+=l},e}();t.RawSha256=i},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.convertToBuffer=void 0;var r=n(401),i=void 0!==e&&e.from?function(t){return e.from(t,"utf8")}:r.fromUtf8;t.convertToBuffer=function(e){return e instanceof Uint8Array?e:"string"==typeof e?i(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}}).call(this,n(12).Buffer)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEmptyData=void 0,t.isEmptyData=function(e){return"string"==typeof e?0===e.length:0===e.byteLength}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.numToUint8=void 0,t.numToUint8=function(e){return new Uint8Array([(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uint32ArrayFrom=void 0,t.uint32ArrayFrom=function(e){if(!Array.from){for(var t=new Uint32Array(e.length);0<e.length;)t[0]=e[0];return t}return Uint32Array.from(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AwsCrc32=void 0;var r=n(2),i=n(135),o=n(79),s=function(){function e(){this.crc32=new o.Crc32}return e.prototype.update=function(e){(0,i.isEmptyData)(e)||this.crc32.update((0,i.convertToBuffer)(e))},e.prototype.digest=function(){return(0,r.__awaiter)(this,void 0,void 0,function(){return(0,r.__generator)(this,function(e){return[2,(0,i.numToUint8)(this.crc32.digest())]})})},e}();t.AwsCrc32=s},function(e,t,n){var r=n(254),i=n(285);e.exports=function(e,t){
for(var n=0,o=(t=r(t,e)).length;null!=e&&n<o;)e=e[i(t[n++])];return n&&n==o?e:void 0}},function(e,t,n){var r=n(61),i=n(255),o=n(258),s=n(282);e.exports=function(e,t){return r(e)?e:i(e,t)?[e]:o(s(e))}},function(e,t,n){var r=n(61),i=n(105),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||s.test(e)||!o.test(e)||null!=t&&e in Object(t)}},function(e,t,n){var r=n(82),i=Object.prototype,o=i.hasOwnProperty,s=i.toString,a=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,a),n=e[a];try{e[a]=void 0;var r=!0}catch(e){}var i=s.call(e);return r&&(t?e[a]=n:delete e[a]),i}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t,n){var r=n(259),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,s=r(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,function(e,n,r,i){t.push(r?i.replace(o,"$1"):n||e)}),t});e.exports=s},function(e,t,n){var r=n(260);e.exports=function(e){var t=r(e,function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}},function(e,t,n){function r(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=e.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(r.Cache||i),n}var i=n(106);r.Cache=i,e.exports=r},function(e,t,n){var r=n(262),i=n(84),o=n(107);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var i=n(263),o=n(268),s=n(269),a=n(270),u=n(271);r.prototype.clear=i,r.prototype.delete=o,r.prototype.get=s,r.prototype.has=a,r.prototype.set=u,e.exports=r},function(e,t,n){var r=n(83);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(e,t,n){var r=n(137),i=n(265),o=n(138),s=n(139),a=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,l=u.toString,d=c.hasOwnProperty,f=RegExp("^"+l.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(r(e)?f:a).test(s(e))}},function(e,t,n){var r,i=n(266),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!o&&o in e}},function(e,t,n){var r=n(55)["__core-js_shared__"];e.exports=r},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,n){var r=n(83),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},function(e,t,n){var r=n(83),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},function(e,t,n){var r=n(83);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},function(e,t){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,n){var r=n(85),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0||(n==t.length-1?t.pop():i.call(t,n,1),--this.size,0))}},function(e,t,n){var r=n(85);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},function(e,t,n){var r=n(85);e.exports=function(e){return r(this.__data__,e)>-1}},function(e,t,n){var r=n(85);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},function(e,t,n){var r=n(86);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},function(e,t,n){var r=n(86);e.exports=function(e){return r(this,e).get(e)}},function(e,t,n){var r=n(86);e.exports=function(e){return r(this,e).has(e)}},function(e,t,n){var r=n(86);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},function(e,t,n){var r=n(283);e.exports=function(e){return null==e?"":r(e)}},function(e,t,n){var r=n(82),i=n(284),o=n(61),s=n(105),a=r?r.prototype:void 0,u=a?a.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return i(t,e)+"";if(s(t))return u?u.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},function(e,t,n){var r=n(105);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},function(e,t,n){var r=n(287)(Object.keys,Object);e.exports=r},function(e,t){e.exports=function(e,t){return function(n){return e(t(n))}}},function(e,t,n){var r=n(63)(n(55),"DataView");e.exports=r},function(e,t,n){var r=n(63)(n(55),"Promise");e.exports=r},function(e,t,n){var r=n(63)(n(55),"Set");e.exports=r},function(e,t,n){var r=n(63)(n(55),"WeakMap");e.exports=r},function(e,t,n){var r=n(75),i=n(76);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},function(e,t){e.exports=function(){return!1}},function(e,t,n){var r=n(75),i=n(146),o=n(76),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&i(e.length)&&!!s[r(e)]}},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t,n){(function(e){var r=n(136),i=t&&!t.nodeType&&t,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,s=o&&o.exports===i&&r.process,a=function(){try{return o&&o.require&&o.require("util").types||s&&s.binding&&s.binding("util")}catch(e){}}();e.exports=a}).call(this,n(73)(e))},function(e,t,n){var r=n(298),i=n(76);e.exports=function e(t,n,o,s,a){return t===n||(null==t||null==n||!i(t)&&!i(n)?t!=t&&n!=n:r(t,n,o,s,e,a))}},function(e,t,n){var r=n(299),i=n(147),o=n(310),s=n(314),a=n(143),u=n(61),c=n(108),l=n(109),d="[object Object]",f=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,p,h,v){var g=u(e),y=u(t),m=g?"[object Array]":a(e),b=y?"[object Array]":a(t),w=(m="[object Arguments]"==m?d:m)==d,_=(b="[object Arguments]"==b?d:b)==d,S=m==b;if(S&&c(e)){if(!c(t))return!1;g=!0,w=!1}if(S&&!w)return v||(v=new r),g||l(e)?i(e,t,n,p,h,v):o(e,t,m,n,p,h,v);if(!(1&n)){var E=w&&f.call(e,"__wrapped__"),C=_&&f.call(t,"__wrapped__");if(E||C){var A=E?e.value():e,O=C?t.value():t;return v||(v=new r),h(A,O,n,p,v)}}return!!S&&(v||(v=new r),s(e,t,n,p,h,v))}},function(e,t,n){function r(e){var t=this.__data__=new i(e);this.size=t.size}var i=n(84),o=n(300),s=n(301),a=n(302),u=n(303),c=n(304);r.prototype.clear=o,r.prototype.delete=s,r.prototype.get=a,r.prototype.has=u,r.prototype.set=c,e.exports=r},function(e,t,n){var r=n(84);e.exports=function(){this.__data__=new r,this.size=0}},function(e,t){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},function(e,t){e.exports=function(e){return this.__data__.get(e)}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,n){var r=n(84),i=n(107),o=n(106);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var s=n.__data__;if(!i||s.length<199)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(s)}return n.set(e,t),this.size=n.size,this}},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new i;++t<n;)this.add(e[t])}var i=n(106),o=n(306),s=n(307);r.prototype.add=r.prototype.push=o,r.prototype.has=s,e.exports=r},function(e,t){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},function(e,t){e.exports=function(e,t){return e.has(t)}},function(e,t,n){var r=n(82),i=n(311),o=n(140),s=n(147),a=n(312),u=n(313),c=r?r.prototype:void 0,l=c?c.valueOf:void 0;e.exports=function(e,t,n,r,c,d,f){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!d(new i(e),new i(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=a;case"[object Set]":var h=1&r;if(p||(p=u),e.size!=t.size&&!h)return!1;var v=f.get(e);if(v)return v==t;r|=2,f.set(e,t);var g=s(p(e),p(t),r,c,d,f);return f.delete(e),g;case"[object Symbol]":if(l)return l.call(e)==l.call(t)}return!1}},function(e,t,n){var r=n(55).Uint8Array;e.exports=r},function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}},function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}},function(e,t,n){var r=n(315),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,o,s,a){var u=1&n,c=r(e),l=c.length;if(l!=r(t).length&&!u)return!1;for(var d=l;d--;){var f=c[d];if(!(u?f in t:i.call(t,f)))return!1}var p=a.get(e),h=a.get(t);if(p&&h)return p==t&&h==e;var v=!0;a.set(e,t),a.set(t,e);for(var g=u;++d<l;){var y=e[f=c[d]],m=t[f];if(o)var b=u?o(m,y,f,t,e,a):o(y,m,f,e,t,a);if(!(void 0===b?y===m||s(y,m,n,o,a):b)){v=!1;break}g||(g="constructor"==f)}if(v&&!g){var w=e.constructor,_=t.constructor;w==_||!("constructor"in e)||!("constructor"in t)||"function"==typeof w&&w instanceof w&&"function"==typeof _&&_ instanceof _||(v=!1)}return a.delete(e),a.delete(t),v}},function(e,t,n){var r=n(316),i=n(318),o=n(321);e.exports=function(e){return r(e,o,i)}},function(e,t,n){var r=n(317),i=n(61);e.exports=function(e,t,n){var o=t(e);return i(e)?o:r(o,n(e))}},function(e,t){e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},function(e,t,n){var r=n(319),i=n(320),o=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,a=s?function(e){return null==e?[]:(e=Object(e),r(s(e),function(t){return o.call(e,t)}))}:i;e.exports=a},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var s=e[n];t(s,n,e)&&(o[i++]=s)}return o}},function(e,t){e.exports=function(){return[]}},function(e,t,n){var r=n(322),i=n(141),o=n(145);e.exports=function(e){return o(e)?r(e):i(e)}},function(e,t,n){var r=n(323),i=n(144),o=n(61),s=n(108),a=n(324),u=n(109),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),l=!n&&i(e),d=!n&&!l&&s(e),f=!n&&!l&&!d&&u(e),p=n||l||d||f,h=p?r(e.length,String):[],v=h.length;for(var g in e)!t&&!c.call(e,g)||p&&("length"==g||d&&("offset"==g||"parent"==g)||f&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||a(g,v))||h.push(g);return h}},function(e,t){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},function(e,t){var n=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&n.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t,n){"use strict";var r=n(40),i=n(148),o=n(326),s=n(154),a=function e(t){var n=new o(t),a=i(o.prototype.request,n);return r.extend(a,o.prototype,n),r.extend(a,n),a.create=function(n){return e(s(t,n))},a}(n(87));a.Axios=o,a.Cancel=n(88),a.CancelToken=n(339),a.isCancel=n(153),a.VERSION=n(155).version,a.all=function(e){return Promise.all(e)},a.spread=n(340),a.isAxiosError=n(341),e.exports=a,e.exports.default=a},function(e,t,n){"use strict";function r(e){this.defaults=e,this.interceptors={request:new s,response:new s}}var i=n(40),o=n(149),s=n(327),a=n(328),u=n(154),c=n(338),l=c.validators;r.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=u(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&c.assertOptions(n,{silentJSONParsing:l.transitional(l.boolean),forcedJSONParsing:l.transitional(l.boolean),clarifyTimeoutError:l.transitional(l.boolean)},!1);var r=[],i=!0;this.interceptors.request.forEach(function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(i=i&&e.synchronous,r.unshift(e.fulfilled,e.rejected))});var o,s=[];if(this.interceptors.response.forEach(function(e){s.push(e.fulfilled,e.rejected)}),!i){var d=[a,void 0];for(Array.prototype.unshift.apply(d,r),d=d.concat(s),o=Promise.resolve(t);d.length;)o=o.then(d.shift(),d.shift());return o}for(var f=t;r.length;){var p=r.shift(),h=r.shift();try{f=p(f)}catch(e){h(e);break}}try{o=a(f)}catch(e){return Promise.reject(e)}for(;s.length;)o=o.then(s.shift(),s.shift());return o},r.prototype.getUri=function(e){return e=u(this.defaults,e),o(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},i.forEach(["delete","get","head","options"],function(e){r.prototype[e]=function(t,n){return this.request(u(n||{},{method:e,url:t,data:(n||{}).data}))}}),i.forEach(["post","put","patch"],function(e){r.prototype[e]=function(t,n,r){return this.request(u(r||{},{method:e,url:t,data:n}))}}),e.exports=r},function(e,t,n){"use strict";function r(){this.handlers=[]}var i=n(40);r.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){i.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=r},function(e,t,n){"use strict";function r(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new u("canceled")}var i=n(40),o=n(329),s=n(153),a=n(87),u=n(88);e.exports=function(e){return r(e),e.headers=e.headers||{},e.data=o.call(e,e.data,e.headers,e.transformRequest),e.headers=i.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),i.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||a.adapter)(e).then(function(t){return r(e),t.data=o.call(e,t.data,t.headers,e.transformResponse),t},function(t){return s(t)||(r(e),t&&t.response&&(t.response.data=o.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,n){"use strict";var r=n(40),i=n(87);e.exports=function(e,t,n){var o=this||i;return r.forEach(n,function(n){e=n.call(o,e,t)}),e}},function(e,t,n){"use strict";var r=n(40);e.exports=function(e,t){r.forEach(e,function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])})}},function(e,t,n){"use strict";var r=n(152);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},function(e,t,n){"use strict";var r=n(40);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,o,s){var a=[];a.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),r.isString(i)&&a.push("path="+i),r.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";var r=n(334),i=n(335);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var r=n(40),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,s={};return e?(r.forEach(e.split("\n"),function(e){if(o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t){if(s[t]&&i.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}}),s):s}},function(e,t,n){"use strict";var r=n(40);e.exports=r.isStandardBrowserEnv()?function(){function e(e){var t=e;return n&&(i.setAttribute("href",t),t=i.href),i.setAttribute("href",t),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}var t,n=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");return t=e(window.location.href),function(n){var i=r.isString(n)?e(n):n;return i.protocol===t.protocol&&i.host===t.host}}():function(){return!0}},function(e,t,n){"use strict";var r=n(155).version,i={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){i[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});var o={};i.transitional=function(e,t,n){function i(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,s){if(!1===e)throw new Error(i(r," has been removed"+(t?" in "+t:"")));return t&&!o[r]&&(o[r]=!0,console.warn(i(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,s)}},e.exports={assertOptions:function(e,t,n){if("object"!=typeof e)throw new TypeError("options must be an object");for(var r=Object.keys(e),i=r.length;i-- >0;){var o=r[i],s=t[o];if(s){var a=e[o],u=void 0===a||s(a,o,e);if(!0!==u)throw new TypeError("option "+o+" must be "+u)}else if(!0!==n)throw Error("Unknown option "+o)}},validators:i}},function(e,t,n){"use strict";function r(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;this.promise.then(function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}}),this.promise.then=function(e){var t,r=new Promise(function(e){n.subscribe(e),t=e}).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e(function(e){n.reason||(n.reason=new i(e),t(n.reason))})}var i=n(88);r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},r.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},r.source=function(){var e;return{token:new r(function(t){e=t}),cancel:e}},e.exports=r},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";var r=n(40);e.exports=function(e){return r.isObject(e)&&!0===e.isAxiosError}},function(e,t,n){"use strict";const r=n(56),i=function(e,t,n){const o={};if(!t.alwaysCreateTextNode&&(!e.child||r.isEmptyObject(e.child))&&(!e.attrsMap||r.isEmptyObject(e.attrsMap)))return r.isExist(e.val)?e.val:"";if(r.isExist(e.val)&&("string"!=typeof e.val||""!==e.val&&e.val!==t.cdataPositionChar)){const i=r.isTagNameInArrayMode(e.tagname,t.arrayMode,n);o[t.textNodeName]=i?[e.val]:e.val}r.merge(o,e.attrsMap,t.arrayMode);const s=Object.keys(e.child);for(let a=0;a<s.length;a++){const u=s[a];if(e.child[u]&&e.child[u].length>1){o[u]=[];for(let n in e.child[u])e.child[u].hasOwnProperty(n)&&o[u].push(i(e.child[u][n],t,u))}else{const s=i(e.child[u][0],t,u),a=!0===t.arrayMode&&"object"==typeof s||r.isTagNameInArrayMode(u,t.arrayMode,n);o[u]=a?[s]:s}}return o};t.convertToJson=i},function(e,t,n){"use strict";e.exports=function(e,t,n){this.tagname=e,this.parent=t,this.child={},this.attrsMap={},this.val=n,this.addChild=function(e){Array.isArray(this.child[e.tagname])?this.child[e.tagname].push(e):this.child[e.tagname]=[e]}}},function(e,t){const n=/^[-+]?0x[a-fA-F0-9]+$/,r=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const i={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};e.exports=function(e,t={}){if(t=Object.assign({},i,t),!e||"string"!=typeof e)return e;let o=e.trim();if(void 0!==t.skipLike&&t.skipLike.test(o))return e;if(t.hex&&n.test(o))return Number.parseInt(o,16);{const n=r.exec(o);if(n){const r=n[1],i=n[2];let s=function(e){return e&&-1!==e.indexOf(".")?("."===(e=e.replace(/0+$/,""))?e="0":"."===e[0]?e="0"+e:"."===e[e.length-1]&&(e=e.substr(0,e.length-1)),e):e}(n[3]);const a=n[4]||n[6];if(!t.leadingZeros&&i.length>0&&r&&"."!==o[2])return e;if(!t.leadingZeros&&i.length>0&&!r&&"."!==o[1])return e;{const n=Number(o),u=""+n;return-1!==u.search(/[eE]/)||a?t.eNotation?n:e:-1!==o.indexOf(".")?"0"===u&&""===s||u===s||r&&u==="-"+s?n:e:i?s===u||r+s===u?n:e:o===u||o===r+u?n:e}}return e}}},function(e,t,n){"use strict";function r(e,t){const n=t;for(;t<e.length;t++)if("?"!=e[t]&&" "!=e[t]);else{const r=e.substr(n,t-n);if(t>5&&"xml"===r)return u("InvalidXml","XML declaration allowed only at the start of the document.",l(e,t));if("?"==e[t]&&">"==e[t+1]){t++;break}}return t}function i(e,t){if(e.length>t+5&&"-"===e[t+1]&&"-"===e[t+2]){for(t+=3;t<e.length;t++)if("-"===e[t]&&"-"===e[t+1]&&">"===e[t+2]){t+=2;break}}else if(e.length>t+8&&"D"===e[t+1]&&"O"===e[t+2]&&"C"===e[t+3]&&"T"===e[t+4]&&"Y"===e[t+5]&&"P"===e[t+6]&&"E"===e[t+7]){let n=1;for(t+=8;t<e.length;t++)if("<"===e[t])n++;else if(">"===e[t]&&(n--,0===n))break}else if(e.length>t+9&&"["===e[t+1]&&"C"===e[t+2]&&"D"===e[t+3]&&"A"===e[t+4]&&"T"===e[t+5]&&"A"===e[t+6]&&"["===e[t+7])for(t+=8;t<e.length;t++)if("]"===e[t]&&"]"===e[t+1]&&">"===e[t+2]){t+=2;break}return t}function o(e,t){let n="",r="",i=!1;for(;t<e.length;t++){if('"'===e[t]||"'"===e[t])""===r?r=e[t]:r!==e[t]||(r="");else if(">"===e[t]&&""===r){i=!0;break}n+=e[t]}return""===r&&{value:n,index:t,tagClosed:i}}function s(e,t){const n=f.getAllMatches(e,v),r={};for(let e=0;e<n.length;e++){if(0===n[e][1].length)return u("InvalidAttr","Attribute '"+n[e][2]+"' has no space in starting.",d(n[e]));if(void 0===n[e][3]&&!t.allowBooleanAttributes)return u("InvalidAttr","boolean attribute '"+n[e][2]+"' is not allowed.",d(n[e]));const i=n[e][2];if(!c(i))return u("InvalidAttr","Attribute '"+i+"' is an invalid name.",d(n[e]));if(r.hasOwnProperty(i))return u("InvalidAttr","Attribute '"+i+"' is repeated.",d(n[e]));r[i]=1}return!0}function a(e,t){if(";"===e[++t])return-1;if("#"===e[t])return function(e,t){let n=/\d/;for("x"===e[t]&&(t++,n=/[\da-fA-F]/);t<e.length;t++){if(";"===e[t])return t;if(!e[t].match(n))break}return-1}(e,++t);let n=0;for(;t<e.length;t++,n++)if(!(e[t].match(/\w/)&&n<20)){if(";"===e[t])break;return-1}return t}function u(e,t,n){return{err:{code:e,msg:t,line:n.line||n,col:n.col}}}function c(e){return f.isName(e)}function l(e,t){const n=e.substring(0,t).split(/\r?\n/);return{line:n.length,col:n[n.length-1].length+1}}function d(e){return e.startIndex+e[1].length}const f=n(56),p={allowBooleanAttributes:!1},h=["allowBooleanAttributes"];t.validate=function(e,t){t=f.buildOptions(t,p,h);const n=[];let c=!1,d=!1;"\ufeff"===e[0]&&(e=e.substr(1));for(let p=0;p<e.length;p++)if("<"===e[p]&&"?"===e[p+1]){if(p+=2,p=r(e,p),p.err)return p}else{if("<"!==e[p]){if(" "===e[p]||"\t"===e[p]||"\n"===e[p]||"\r"===e[p])continue;return u("InvalidChar","char '"+e[p]+"' is not expected.",l(e,p))}{let h=p;if(p++,"!"===e[p]){p=i(e,p);continue}{let g=!1;"/"===e[p]&&(g=!0,p++);let y="";for(;p<e.length&&">"!==e[p]&&" "!==e[p]&&"\t"!==e[p]&&"\n"!==e[p]&&"\r"!==e[p];p++)y+=e[p];if(y=y.trim(),"/"===y[y.length-1]&&(y=y.substring(0,y.length-1),p--),v=y,!f.isName(v)){let t;return t=0===y.trim().length?"Invalid space after '<'.":"Tag '"+y+"' is an invalid name.",u("InvalidTag",t,l(e,p))}const m=o(e,p);if(!1===m)return u("InvalidAttr","Attributes for '"+y+"' have open quote.",l(e,p));let b=m.value;if(p=m.index,"/"===b[b.length-1]){const n=p-b.length;b=b.substring(0,b.length-1);const r=s(b,t);if(!0!==r)return u(r.err.code,r.err.msg,l(e,n+r.err.line));c=!0}else if(g){if(!m.tagClosed)return u("InvalidTag","Closing tag '"+y+"' doesn't have proper closing.",l(e,p));if(b.trim().length>0)return u("InvalidTag","Closing tag '"+y+"' can't have attributes or invalid starting.",l(e,h));{const t=n.pop();if(y!==t.tagName){let n=l(e,t.tagStartPos);return u("InvalidTag","Expected closing tag '"+t.tagName+"' (opened in line "+n.line+", col "+n.col+") instead of closing tag '"+y+"'.",l(e,h))}0==n.length&&(d=!0)}}else{const r=s(b,t);if(!0!==r)return u(r.err.code,r.err.msg,l(e,p-b.length+r.err.line));if(!0===d)return u("InvalidXml","Multiple possible root nodes found.",l(e,p));n.push({tagName:y,tagStartPos:h}),c=!0}for(p++;p<e.length;p++)if("<"===e[p]){if("!"===e[p+1]){p++,p=i(e,p);continue}if("?"!==e[p+1])break;if(p=r(e,++p),p.err)return p}else if("&"===e[p]){const t=a(e,p);if(-1==t)return u("InvalidChar","char '&' is not expected.",l(e,p));p=t}"<"===e[p]&&p--}}}var v;return c?1==n.length?u("InvalidTag","Unclosed tag '"+n[0].tagName+"'.",l(e,n[0].tagStartPos)):!(n.length>0)||u("InvalidXml","Invalid '"+JSON.stringify(n.map(e=>e.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):u("InvalidXml","Start tag expected.",1)};const v=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g")},function(e,t,n){"use strict";const r=function(e){return String.fromCharCode(e)},i={nilChar:r(176),missingChar:r(201),nilPremitive:r(175),missingPremitive:r(200),emptyChar:r(178),emptyValue:r(177),boundryChar:r(179),objStart:r(198),arrStart:r(204),arrayEnd:r(185)},o=[i.nilChar,i.nilPremitive,i.missingChar,i.missingPremitive,i.boundryChar,i.emptyChar,i.emptyValue,i.arrayEnd,i.objStart,i.arrStart],s=function(e,t,n){if("string"==typeof t)return e&&e[0]&&void 0!==e[0].val?a(e[0].val,t):a(e,t);{const o=void 0===(r=e)?i.missingChar:null===r?i.nilChar:!(r.child&&0===Object.keys(r.child).length&&(!r.attrsMap||0===Object.keys(r.attrsMap).length))||i.emptyChar;if(!0===o){let r="";if(Array.isArray(t)){r+=i.arrStart;const o=t[0],c=e.length;if("string"==typeof o)for(let t=0;t<c;t++){const n=a(e[t].val,o);r=u(r,n)}else for(let t=0;t<c;t++){const i=s(e[t],o,n);r=u(r,i)}r+=i.arrayEnd}else{r+=i.objStart;const o=Object.keys(t);Array.isArray(e)&&(e=e[0]);for(let i in o){const a=o[i];let c;c=!n.ignoreAttributes&&e.attrsMap&&e.attrsMap[a]?s(e.attrsMap[a],t[a],n):a===n.textNodeName?s(e.val,t[a],n):s(e.child[a],t[a],n),r=u(r,c)}}return r}return o}var r},a=function(e){switch(e){case void 0:return i.missingPremitive;case null:return i.nilPremitive;case"":return i.emptyValue;default:return e}},u=function(e,t){return c(t[0])||c(e[e.length-1])||(e+=i.boundryChar),e+t},c=function(e){return-1!==o.indexOf(e)},l=n(89),d=n(56).buildOptions;t.convert2nimn=function(e,t,n){return n=d(n,l.defaultOptions,l.props),s(e,t,n)}},function(e,t,n){"use strict";const r=n(56),i=n(56).buildOptions,o=n(89),s=function(e,t,n){let i="{";const o=Object.keys(e.child);for(let n=0;n<o.length;n++){const r=o[n];if(e.child[r]&&e.child[r].length>1){i+='"'+r+'" : [ ';for(let n in e.child[r])i+=s(e.child[r][n],t)+" , ";i=i.substr(0,i.length-1)+" ] "}else i+='"'+r+'" : '+s(e.child[r][0],t)+" ,"}return r.merge(i,e.attrsMap),r.isEmptyObject(i)?r.isExist(e.val)?e.val:"":(r.isExist(e.val)&&("string"!=typeof e.val||""!==e.val&&e.val!==t.cdataPositionChar)&&(i+='"'+t.textNodeName+'" : '+(!0!==(a=e.val)&&!1!==a&&isNaN(a)?'"'+a+'"':a)),","===i[i.length-1]&&(i=i.substr(0,i.length-2)),i+"}");var a};t.convertToJsonString=function(e,t){return(t=i(t,o.defaultOptions,o.props)).indentBy=t.indentBy||"",s(e,t,0)}},function(e,t,n){"use strict";function r(e){this.options=h(e,v,g),this.options.ignoreAttributes||this.options.attrNodeName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=f),this.options.cdataTagName?this.isCDATA=p:this.isCDATA=function(){return!1},this.replaceCDATAstr=o,this.replaceCDATAarr=s,this.processTextOrObjNode=i,this.options.format?(this.indentate=d,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.supressEmptyNode?(this.buildTextNode=l,this.buildObjNode=u):(this.buildTextNode=c,this.buildObjNode=a),this.buildTextValNode=c,this.buildObjectNode=a}function i(e,t,n){const r=this.j2x(e,n+1);return void 0!==e[this.options.textNodeName]&&1===Object.keys(e).length?this.buildTextNode(r.val,t,r.attrStr,n):this.buildObjNode(r.val,t,r.attrStr,n)}function o(e,t){return e=this.options.tagValueProcessor(""+e),""===this.options.cdataPositionChar||""===e?e+"<![CDATA["+t+"]]"+this.tagEndChar:e.replace(this.options.cdataPositionChar,"<![CDATA["+t+"]]"+this.tagEndChar)}function s(e,t){if(e=this.options.tagValueProcessor(""+e),""===this.options.cdataPositionChar||""===e)return e+"<![CDATA["+t.join("]]><![CDATA[")+"]]"+this.tagEndChar;for(let n in t)e=e.replace(this.options.cdataPositionChar,"<![CDATA["+t[n]+"]]>");return e+this.newLine}function a(e,t,n,r){return n&&-1===e.indexOf("<")?this.indentate(r)+"<"+t+n+">"+e+"</"+t+this.tagEndChar:this.indentate(r)+"<"+t+n+this.tagEndChar+e+this.indentate(r)+"</"+t+this.tagEndChar}function u(e,t,n,r){return""!==e?this.buildObjectNode(e,t,n,r):this.indentate(r)+"<"+t+n+"/"+this.tagEndChar}function c(e,t,n,r){return this.indentate(r)+"<"+t+n+">"+this.options.tagValueProcessor(e)+"</"+t+this.tagEndChar}function l(e,t,n,r){return""!==e?this.buildTextValNode(e,t,n,r):this.indentate(r)+"<"+t+n+"/"+this.tagEndChar}function d(e){return this.options.indentBy.repeat(e)}function f(e){return!!e.startsWith(this.options.attributeNamePrefix)&&e.substr(this.attrPrefixLen)}function p(e){return e===this.options.cdataTagName}const h=n(56).buildOptions,v={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataTagName:!1,cdataPositionChar:"\\c",format:!1,indentBy:"  ",supressEmptyNode:!1,tagValueProcessor:function(e){return e},attrValueProcessor:function(e){return e}},g=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","cdataTagName","cdataPositionChar","format","indentBy","supressEmptyNode","tagValueProcessor","attrValueProcessor","rootNodeName"];r.prototype.parse=function(e){return Array.isArray(e)&&this.options.rootNodeName&&this.options.rootNodeName.length>1&&(e={[this.options.rootNodeName]:e}),this.j2x(e,0).val},r.prototype.j2x=function(e,t){let n="",r="";for(let i in e)if(void 0===e[i]);else if(null===e[i])r+=this.indentate(t)+"<"+i+"/"+this.tagEndChar;else if(e[i]instanceof Date)r+=this.buildTextNode(e[i],i,"",t);else if("object"!=typeof e[i]){const o=this.isAttribute(i);o?n+=" "+o+'="'+this.options.attrValueProcessor(""+e[i])+'"':this.isCDATA(i)?e[this.options.textNodeName]?r+=this.replaceCDATAstr(e[this.options.textNodeName],e[i]):r+=this.replaceCDATAstr("",e[i]):i===this.options.textNodeName?e[this.options.cdataTagName]||(r+=this.options.tagValueProcessor(""+e[i])):r+=this.buildTextNode(e[i],i,"",t)}else if(Array.isArray(e[i]))if(this.isCDATA(i))r+=this.indentate(t),
e[this.options.textNodeName]?r+=this.replaceCDATAarr(e[this.options.textNodeName],e[i]):r+=this.replaceCDATAarr("",e[i]);else{const n=e[i].length;for(let o=0;o<n;o++){const n=e[i][o];void 0===n||(r+=null===n?this.indentate(t)+"<"+i+"/"+this.tagEndChar:"object"==typeof n?this.processTextOrObjNode(n,i,t):this.buildTextNode(n,i,"",t))}}else if(this.options.attrNodeName&&i===this.options.attrNodeName){const t=Object.keys(e[i]),r=t.length;for(let o=0;o<r;o++)n+=" "+t[o]+'="'+this.options.attrValueProcessor(""+e[i][t[o]])+'"'}else r+=this.processTextOrObjNode(e[i],i,t);return{attrStr:n,val:r}},e.exports=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function s(e,t){var n=e[t];if(null!=n){if("function"!=typeof n)throw new TypeError(n+" is not a function");return n}}function a(e){var t=e.constructor;return void 0!==t&&null===(t=t[w])&&(t=void 0),void 0!==t?t:E}function u(e){return e instanceof E}function c(e){c.log?c.log(e):setTimeout(function(){throw e})}function l(e){Promise.resolve().then(function(){try{e()}catch(e){c(e)}})}function d(e){var t=e._cleanup;if(void 0!==t&&(e._cleanup=void 0,t))try{if("function"==typeof t)t();else{var n=s(t,"unsubscribe");n&&n.call(t)}}catch(e){c(e)}}function f(e){e._observer=void 0,e._queue=void 0,e._state="closed"}function p(e,t,n){e._state="running";var r=e._observer;try{var i=s(r,t);switch(t){case"next":i&&i.call(r,n);break;case"error":if(f(e),!i)throw n;i.call(r,n);break;case"complete":f(e),i&&i.call(r)}}catch(e){c(e)}"closed"===e._state?d(e):"running"===e._state&&(e._state="ready")}function h(e,t,n){if("closed"!==e._state){if("buffering"!==e._state)return"ready"!==e._state?(e._state="buffering",e._queue=[{type:t,value:n}],void l(function(){return function(e){var t=e._queue;if(t){e._queue=void 0,e._state="ready";for(var n=0;n<t.length&&(p(e,t[n].type,t[n].value),"closed"!==e._state);++n);}}(e)})):void p(e,t,n);e._queue.push({type:t,value:n})}}Object.defineProperty(t,"__esModule",{value:!0}),t.Observable=void 0;var v=function(){return"function"==typeof Symbol},g=function(e){return v()&&Boolean(Symbol[e])},y=function(e){return g(e)?Symbol[e]:"@@"+e};v()&&!g("observable")&&(Symbol.observable=Symbol("observable"));var m=y("iterator"),b=y("observable"),w=y("species"),_=function(){function e(t,n){r(this,e),this._cleanup=void 0,this._observer=t,this._queue=void 0,this._state="initializing";var i=new S(this);try{this._cleanup=n.call(void 0,i)}catch(e){i.error(e)}"initializing"===this._state&&(this._state="ready")}return o(e,[{key:"unsubscribe",value:function(){"closed"!==this._state&&(f(this),d(this))}},{key:"closed",get:function(){return"closed"===this._state}}]),e}(),S=function(){function e(t){r(this,e),this._subscription=t}return o(e,[{key:"next",value:function(e){h(this._subscription,"next",e)}},{key:"error",value:function(e){h(this._subscription,"error",e)}},{key:"complete",value:function(){h(this._subscription,"complete")}},{key:"closed",get:function(){return"closed"===this._subscription._state}}]),e}(),E=function(){function e(t){if(r(this,e),!(this instanceof e))throw new TypeError("Observable cannot be called as a function");if("function"!=typeof t)throw new TypeError("Observable initializer must be a function");this._subscriber=t}return o(e,[{key:"subscribe",value:function(e){return"object"==typeof e&&null!==e||(e={next:e,error:arguments[1],complete:arguments[2]}),new _(e,this._subscriber)}},{key:"forEach",value:function(e){var t=this;return new Promise(function(n,r){function i(){o.unsubscribe(),n()}if("function"==typeof e)var o=t.subscribe({next:function(t){try{e(t,i)}catch(e){r(e),o.unsubscribe()}},error:r,complete:n});else r(new TypeError(e+" is not a function"))})}},{key:"map",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(a(this))(function(n){return t.subscribe({next:function(t){try{t=e(t)}catch(e){return n.error(e)}n.next(t)},error:function(e){n.error(e)},complete:function(){n.complete()}})})}},{key:"filter",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(a(this))(function(n){return t.subscribe({next:function(t){try{if(!e(t))return}catch(e){return n.error(e)}n.next(t)},error:function(e){n.error(e)},complete:function(){n.complete()}})})}},{key:"reduce",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");var n=a(this),r=arguments.length>1,i=!1,o=arguments[1];return new n(function(n){return t.subscribe({next:function(t){var s=!i;if(i=!0,!s||r)try{o=e(o,t)}catch(e){return n.error(e)}else o=t},error:function(e){n.error(e)},complete:function(){if(!i&&!r)return n.error(new TypeError("Cannot reduce an empty sequence"));n.next(o),n.complete()}})})}},{key:"concat",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=a(this);return new i(function(t){var r,o=0;return function e(s){r=s.subscribe({next:function(e){t.next(e)},error:function(e){t.error(e)},complete:function(){o===n.length?(r=void 0,t.complete()):e(i.from(n[o++]))}})}(e),function(){r&&(r.unsubscribe(),r=void 0)}})}},{key:"flatMap",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");var n=a(this);return new n(function(r){function i(){s.closed&&0===o.length&&r.complete()}var o=[],s=t.subscribe({next:function(t){if(e)try{t=e(t)}catch(e){return r.error(e)}var s=n.from(t).subscribe({next:function(e){r.next(e)},error:function(e){r.error(e)},complete:function(){var e=o.indexOf(s);e>=0&&o.splice(e,1),i()}});o.push(s)},error:function(e){r.error(e)},complete:function(){i()}});return function(){o.forEach(function(e){return e.unsubscribe()}),s.unsubscribe()}})}},{key:b,value:function(){return this}}],[{key:"from",value:function(t){var n="function"==typeof this?this:e;if(null==t)throw new TypeError(t+" is not an object");var r=s(t,b);if(r){var i=r.call(t);if(Object(i)!==i)throw new TypeError(i+" is not an object");return u(i)&&i.constructor===n?i:new n(function(e){return i.subscribe(e)})}if(g("iterator")&&(r=s(t,m)))return new n(function(e){l(function(){if(!e.closed){var n=!0,i=!1,o=void 0;try{for(var s,a=r.call(t)[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var u=s.value;if(e.next(u),e.closed)return}}catch(e){i=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}e.complete()}})});if(Array.isArray(t))return new n(function(e){l(function(){if(!e.closed){for(var n=0;n<t.length;++n)if(e.next(t[n]),e.closed)return;e.complete()}})});throw new TypeError(t+" is not observable")}},{key:"of",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return new("function"==typeof this?this:e)(function(e){l(function(){if(!e.closed){for(var t=0;t<n.length;++t)if(e.next(n[t]),e.closed)return;e.complete()}})})}},{key:w,get:function(){return this}}]),e}();t.Observable=E,v()&&Object.defineProperty(E,Symbol("extensions"),{value:{symbol:b,hostReportError:c},configurable:!0})},function(e,t){},function(e,t,n){var r,i,o=n(156),s=n(157),a=0,u=0;e.exports=function(e,t,n){var c=t&&n||0,l=t||[],d=(e=e||{}).node||r,f=void 0!==e.clockseq?e.clockseq:i;if(null==d||null==f){var p=o();null==d&&(d=r=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==f&&(f=i=16383&(p[6]<<8|p[7]))}var h=void 0!==e.msecs?e.msecs:(new Date).getTime(),v=void 0!==e.nsecs?e.nsecs:u+1,g=h-a+(v-u)/1e4;if(g<0&&void 0===e.clockseq&&(f=f+1&16383),(g<0||h>a)&&void 0===e.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=h,u=v,i=f;var y=(1e4*(268435455&(h+=122192928e5))+v)%4294967296;l[c++]=y>>>24&255,l[c++]=y>>>16&255,l[c++]=y>>>8&255,l[c++]=255&y;var m=h/4294967296*1e4&268435455;l[c++]=m>>>8&255,l[c++]=255&m,l[c++]=m>>>24&15|16,l[c++]=m>>>16&255,l[c++]=f>>>8|128,l[c++]=255&f;for(var b=0;b<6;++b)l[c+b]=d[b];return t||s(l)}},function(e,t,n){var r=n(156),i=n(157);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[o+a]=s[a];return t||i(s)}},function(e,t,n){e.exports=n(354).Observable},function(e,t,n){"use strict";(function(e){!function(e,t){function n(e){return"function"==typeof Symbol&&Boolean(Symbol[e])}function r(e){return n(e)?Symbol[e]:"@@"+e}function i(e){setTimeout(function(){throw e})}function o(e,t){var n=e[t];if(null!=n){if("function"!=typeof n)throw new TypeError(n+" is not a function");return n}}function s(e){var t=e.constructor;return void 0!==t&&null===(t=t[r("species")])&&(t=void 0),void 0!==t?t:f}function a(e,t){Object.keys(t).forEach(function(n){var r=Object.getOwnPropertyDescriptor(t,n);r.enumerable=!1,Object.defineProperty(e,n,r)})}function u(e){var t=e._cleanup;if(t){e._cleanup=void 0;try{t()}catch(e){i(e)}}}function c(e){return void 0===e._observer}function l(e,t){if(Object(e)!==e)throw new TypeError("Observer must be an object");this._cleanup=void 0,this._observer=e;try{var n=o(e,"start");n&&n.call(e,this)}catch(e){i(e)}if(!c(this)){e=new d(this);try{var r=t.call(void 0,e);if(null!=r){if("function"==typeof r.unsubscribe)s=r,r=function(){s.unsubscribe()};else if("function"!=typeof r)throw new TypeError(r+" is not a function");this._cleanup=r}}catch(t){return void e.error(t)}var s;c(this)&&u(this)}}function d(e){this._subscription=e}function f(e){if(!(this instanceof f))throw new TypeError("Observable cannot be called as a function");if("function"!=typeof e)throw new TypeError("Observable initializer must be a function");this._subscriber=e}"function"!=typeof Symbol||Symbol.observable||(Symbol.observable=Symbol("observable")),a(l.prototype={},{get closed(){return c(this)},unsubscribe:function(){var e;c(e=this)||(e._observer=void 0,u(e))}}),a(d.prototype={},{get closed(){return c(this._subscription)},next:function(e){var t=this._subscription;if(!c(t)){var n=t._observer;try{var r=o(n,"next");r&&r.call(n,e)}catch(e){i(e)}}},error:function(e){var t=this._subscription;if(c(t))i(e);else{var n=t._observer;t._observer=void 0;try{var r=o(n,"error");if(!r)throw e;r.call(n,e)}catch(e){i(e)}u(t)}},complete:function(){var e=this._subscription;if(!c(e)){var t=e._observer;e._observer=void 0;try{var n=o(t,"complete");n&&n.call(t)}catch(e){i(e)}u(e)}}}),a(f.prototype,{subscribe:function(e){for(var t=[],n=1;n<arguments.length;++n)t.push(arguments[n]);return"function"==typeof e?e={next:e,error:t[0],complete:t[1]}:"object"==typeof e&&null!==e||(e={}),new l(e,this._subscriber)},forEach:function(e){var t=this;return new Promise(function(n,r){if("function"!=typeof e)return Promise.reject(new TypeError(e+" is not a function"));t.subscribe({_subscription:null,start:function(e){if(Object(e)!==e)throw new TypeError(e+" is not an object");this._subscription=e},next:function(t){var n=this._subscription;if(!n.closed)try{e(t)}catch(e){r(e),n.unsubscribe()}},error:r,complete:n})})},map:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(s(this))(function(n){return t.subscribe({next:function(t){if(!n.closed){try{t=e(t)}catch(e){return n.error(e)}n.next(t)}},error:function(e){n.error(e)},complete:function(){n.complete()}})})},filter:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(s(this))(function(n){return t.subscribe({next:function(t){if(!n.closed){try{if(!e(t))return}catch(e){return n.error(e)}n.next(t)}},error:function(e){n.error(e)},complete:function(){n.complete()}})})},reduce:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");var n=s(this),r=arguments.length>1,i=!1,o=arguments[1];return new n(function(n){return t.subscribe({next:function(t){if(!n.closed){var s=!i;if(i=!0,!s||r)try{o=e(o,t)}catch(e){return n.error(e)}else o=t}},error:function(e){n.error(e)},complete:function(){if(!i&&!r)return n.error(new TypeError("Cannot reduce an empty sequence"));n.next(o),n.complete()}})})}}),Object.defineProperty(f.prototype,r("observable"),{value:function(){return this},writable:!0,configurable:!0}),a(f,{from:function(e){var t="function"==typeof this?this:f;if(null==e)throw new TypeError(e+" is not an object");var i=o(e,r("observable"));if(i){var s=i.call(e);if(Object(s)!==s)throw new TypeError(s+" is not an object");return s.constructor===t?s:new t(function(e){return s.subscribe(e)})}if(n("iterator")&&(i=o(e,r("iterator"))))return new t(function(t){for(var n,r=i.call(e)[Symbol.iterator]();!(n=r.next()).done;){var o=n.value;if(t.next(o),t.closed)return}t.complete()});if(Array.isArray(e))return new t(function(t){for(var n=0;n<e.length;++n)if(t.next(e[n]),t.closed)return;t.complete()});throw new TypeError(e+" is not observable")},of:function(){for(var e=[],t=0;t<arguments.length;++t)e.push(arguments[t]);return new("function"==typeof this?this:f)(function(t){for(var n=0;n<e.length;++n)if(t.next(e[n]),t.closed)return;t.complete()})}}),Object.defineProperty(f,r("species"),{get:function(){return this},configurable:!0}),Object.defineProperty(f,"extensions",{value:{observableSymbol:r("observable"),setHostReportError:function(e){i=e}}}),e.Observable=f}(t)}).call(this,n(73)(e))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var r=n(160),i=n(162),o=n(361),s=n(364),a=n(366),u=n(54),c=function(){function e(e){(0,s.supportsWebCrypto)((0,u.locateWindow)())?this.hash=new i.Sha256(e):(0,a.isMsWindow)((0,u.locateWindow)())?this.hash=new r.Sha256(e):this.hash=new o.Sha256(e)}return e.prototype.update=function(e,t){this.hash.update(e,t)},e.prototype.digest=function(){return this.hash.digest()},e}();t.Sha256=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEmptyData=void 0,t.isEmptyData=function(e){return"string"==typeof e?0===e.length:0===e.byteLength}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.convertToBuffer=void 0;var r=n(403),i=void 0!==e&&e.from?function(t){return e.from(t,"utf8")}:r.fromUtf8;t.convertToBuffer=function(e){return e instanceof Uint8Array?e:"string"==typeof e?i(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}}).call(this,n(12).Buffer)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEmptyData=void 0,t.isEmptyData=function(e){return"string"==typeof e?0===e.length:0===e.byteLength}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.numToUint8=void 0,t.numToUint8=function(e){return new Uint8Array([(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uint32ArrayFrom=void 0,t.uint32ArrayFrom=function(e){if(!Uint32Array.from){for(var t=new Uint32Array(e.length),n=0;n<e.length;)t[n]=e[n],n+=1;return t}return Uint32Array.from(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(110).__exportStar(n(362),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var r=n(110),i=n(163),o=n(363),s=n(91),a=function(){function e(e){if(this.hash=new o.RawSha256,e){this.outer=new o.RawSha256;var t=function(e){var t=(0,s.convertToBuffer)(e);if(t.byteLength>i.BLOCK_SIZE){var n=new o.RawSha256;n.update(t),t=n.digest()}var r=new Uint8Array(i.BLOCK_SIZE);return r.set(t),r}(e),n=new Uint8Array(i.BLOCK_SIZE);n.set(t);for(var r=0;r<i.BLOCK_SIZE;r++)t[r]^=54,n[r]^=92;for(this.hash.update(t),this.outer.update(n),r=0;r<t.byteLength;r++)t[r]=0}}return e.prototype.update=function(e){if(!(0,s.isEmptyData)(e)&&!this.error)try{this.hash.update((0,s.convertToBuffer)(e))}catch(e){this.error=e}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return r.__awaiter(this,void 0,void 0,function(){return r.__generator(this,function(e){return[2,this.digestSync()]})})},e}();t.Sha256=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RawSha256=void 0;var r=n(163),i=function(){function e(){this.state=Int32Array.from(r.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=0,n=e.byteLength;if(this.bytesHashed+=n,8*this.bytesHashed>r.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=e[t++],n--,this.bufferLength===r.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var e=8*this.bytesHashed,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(t.setUint8(this.bufferLength++,128),n%r.BLOCK_SIZE>=r.BLOCK_SIZE-8){for(var i=this.bufferLength;i<r.BLOCK_SIZE;i++)t.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(i=this.bufferLength;i<r.BLOCK_SIZE-8;i++)t.setUint8(i,0);t.setUint32(r.BLOCK_SIZE-8,Math.floor(e/4294967296),!0),t.setUint32(r.BLOCK_SIZE-4,e),this.hashBuffer(),this.finished=!0}var o=new Uint8Array(r.DIGEST_LENGTH);for(i=0;i<8;i++)o[4*i]=this.state[i]>>>24&255,o[4*i+1]=this.state[i]>>>16&255,o[4*i+2]=this.state[i]>>>8&255,o[4*i+3]=this.state[i]>>>0&255;return o},e.prototype.hashBuffer=function(){for(var e=this.buffer,t=this.state,n=t[0],i=t[1],o=t[2],s=t[3],a=t[4],u=t[5],c=t[6],l=t[7],d=0;d<r.BLOCK_SIZE;d++){if(d<16)this.temp[d]=(255&e[4*d])<<24|(255&e[4*d+1])<<16|(255&e[4*d+2])<<8|255&e[4*d+3];else{var f=this.temp[d-2],p=(f>>>17|f<<15)^(f>>>19|f<<13)^f>>>10,h=((f=this.temp[d-15])>>>7|f<<25)^(f>>>18|f<<14)^f>>>3;this.temp[d]=(p+this.temp[d-7]|0)+(h+this.temp[d-16]|0)}var v=(((a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7))+(a&u^~a&c)|0)+(l+(r.KEY[d]+this.temp[d]|0)|0)|0,g=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&i^n&o^i&o)|0;l=c,c=u,u=a,a=s+v|0,s=o,o=i,i=n,n=v+g|0}t[0]+=n,t[1]+=i,t[2]+=o,t[3]+=s,t[4]+=a,t[5]+=u,t[6]+=c,t[7]+=l},e}();t.RawSha256=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(164).__exportStar(n(365),t)},function(e,t,n){"use strict";function r(e){return"object"==typeof e&&"object"==typeof e.crypto&&"function"==typeof e.crypto.getRandomValues}function i(e){return e&&s.every(function(t){return"function"==typeof e[t]})}Object.defineProperty(t,"__esModule",{value:!0}),t.supportsZeroByteGCM=t.supportsSubtleCrypto=t.supportsSecureRandom=t.supportsWebCrypto=void 0;var o=n(164),s=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];t.supportsWebCrypto=function(e){return!(!r(e)||"object"!=typeof e.crypto.subtle)&&i(e.crypto.subtle)},t.supportsSecureRandom=r,t.supportsSubtleCrypto=i,t.supportsZeroByteGCM=function(e){return o.__awaiter(this,void 0,void 0,function(){var t;return o.__generator(this,function(n){switch(n.label){case 0:if(!i(e))return[2,!1];n.label=1;case 1:return n.trys.push([1,4,,5]),[4,e.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return t=n.sent(),[4,e.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},t,new Uint8Array(0))];case 3:return[2,16===n.sent().byteLength];case 4:return n.sent(),[2,!1];case 5:return[2]}})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(367);r.__exportStar(n(368),t),r.__exportStar(n(369),t),r.__exportStar(n(370),t),r.__exportStar(n(371),t),r.__exportStar(n(372),t)},function(e,t,n){"use strict";function r(e,t){function n(){this.constructor=e}A(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function i(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function o(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function s(e,t){return function(n,r){t(n,r,e)}}function a(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})}function c(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s}function l(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}function d(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function f(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function p(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function h(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}function v(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function g(e){return this instanceof g?(this.v=e,this):new g(e)}function y(e,t,n){function r(e){c[e]&&(u[e]=function(t){return new Promise(function(n,r){l.push([e,t,n,r])>1||i(e,t)})})}function i(e,t){try{(n=c[e](t)).value instanceof g?Promise.resolve(n.value.v).then(o,s):a(l[0][2],n)}catch(e){a(l[0][3],e)}var n}function o(e){i("next",e)}function s(e){i("throw",e)}function a(e,t){e(t),l.shift(),l.length&&i(l[0][0],l[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var u,c=n.apply(e,t||[]),l=[];return u={},r("next"),r("throw"),r("return"),u[Symbol.asyncIterator]=function(){return this},u}function m(e){function t(t,i){n[t]=e[t]?function(n){return(r=!r)?{value:g(e[t](n)),done:"return"===t}:i?i(n):n}:i}var n,r;return n={},t("next"),t("throw",function(e){throw e}),t("return"),n[Symbol.iterator]=function(){return this},n}function b(e){function t(t){n[t]=e[t]&&function(n){return new Promise(function(r,i){!function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}(r,i,(n=e[t](n)).done,n.value)})}}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,r=e[Symbol.asyncIterator];return r?r.call(e):(e=f(e),n={},t("next"),t("throw"),t("return"),n[Symbol.asyncIterator]=function(){return this},n)}function w(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function S(e){return e&&e.__esModule?e:{default:e}}function E(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function C(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}n.r(t),n.d(t,"__extends",function(){return r}),n.d(t,"__assign",function(){return O}),n.d(t,"__rest",function(){return i}),n.d(t,"__decorate",function(){return o}),n.d(t,"__param",function(){return s}),n.d(t,"__metadata",function(){return a}),n.d(t,"__awaiter",function(){return u}),n.d(t,"__generator",function(){return c}),n.d(t,"__createBinding",function(){return l}),n.d(t,"__exportStar",function(){return d}),n.d(t,"__values",function(){return f}),n.d(t,"__read",function(){return p}),n.d(t,"__spread",function(){return h}),n.d(t,"__spreadArrays",function(){return v}),n.d(t,"__await",function(){return g}),n.d(t,"__asyncGenerator",function(){return y}),n.d(t,"__asyncDelegator",function(){return m}),n.d(t,"__asyncValues",function(){return b}),n.d(t,"__makeTemplateObject",function(){return w}),n.d(t,"__importStar",function(){return _}),n.d(t,"__importDefault",function(){return S}),n.d(t,"__classPrivateFieldGet",function(){return E}),n.d(t,"__classPrivateFieldSet",function(){return C});var A=function(e,t){return(A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},O=function(){return(O=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMsWindow=void 0;var r=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];t.isMsWindow=function(e){if(function(e){return"MSInputMethodContext"in e&&"msCrypto"in e}(e)&&void 0!==e.msCrypto.subtle){var t=e.msCrypto,n=t.getRandomValues,i=t.subtle;return r.map(function(e){return i[e]}).concat(n).every(function(e){return"function"==typeof e})}return!1}},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(48),i=n(20),o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},s=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},a=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(s(arguments[t]));return e},u=new r.a("Predictions"),c=new(function(){function e(e){this._options=e,this._convertPluggables=[],this._identifyPluggables=[],this._interpretPluggables=[]}return e.prototype.getModuleName=function(){return"Predictions"},e.prototype.addPluggable=function(e){if(this.getPluggable(e.getProviderName()))throw new Error("Pluggable with name "+e.getProviderName()+" has already been added.");var t=!1;this.implementsConvertPluggable(e)&&(this._convertPluggables.push(e),t=!0),this.implementsIdentifyPluggable(e)&&(this._identifyPluggables.push(e),t=!0),this.implementsInterpretPluggable(e)&&(this._interpretPluggables.push(e),t=!0),t&&this.configurePluggable(e)},e.prototype.getPluggable=function(e){var t=this.getAllProviders().find(function(t){return t.getProviderName()===e});return void 0===t?(u.debug("No plugin found with providerName=>",e),null):t},e.prototype.removePluggable=function(e){this._convertPluggables=this._convertPluggables.filter(function(t){return t.getProviderName()!==e}),this._identifyPluggables=this._identifyPluggables.filter(function(t){return t.getProviderName()!==e}),this._interpretPluggables=this._interpretPluggables.filter(function(t){return t.getProviderName()!==e})},e.prototype.configure=function(e){var t=this,n=e?e.predictions||e:{};n=o(o({},n),e),this._options=Object.assign({},this._options,n),u.debug("configure Predictions",this._options),this.getAllProviders().forEach(function(e){return t.configurePluggable(e)})},e.prototype.interpret=function(e,t){return this.getPluggableToExecute(this._interpretPluggables,t).interpret(e)},e.prototype.convert=function(e,t){return this.getPluggableToExecute(this._convertPluggables,t).convert(e)},e.prototype.identify=function(e,t){return this.getPluggableToExecute(this._identifyPluggables,t).identify(e)},e.prototype.getPluggableToExecute=function(e,t){if(t&&t.providerName)return a(e).find(function(e){return e.getProviderName()===t.providerName});if(1===e.length)return e[0];throw new Error("More than one or no providers are configured, Either specify a provider name or configure exactly one provider")},e.prototype.getAllProviders=function(){return a(this._convertPluggables,this._identifyPluggables,this._interpretPluggables)},e.prototype.configurePluggable=function(e){var t=Object.assign({},this._options.predictions,this._options[e.getCategory().toLowerCase()]);e.configure(t)},e.prototype.implementsConvertPluggable=function(e){return e&&"function"==typeof e.convert},e.prototype.implementsIdentifyPluggable=function(e){return e&&"function"==typeof e.identify},e.prototype.implementsInterpretPluggable=function(e){return e&&"function"==typeof e.interpret},e}())({});i.a.register(c)},function(e,t,n){"use strict";const r=e=>"object"==typeof e&&null!==e,i=Symbol("skip"),o=e=>r(e)&&!(e instanceof RegExp)&&!(e instanceof Error)&&!(e instanceof Date),s=(e,t,n,r=new WeakMap)=>{if(n={deep:!1,target:{},...n},r.has(e))return r.get(e);r.set(e,n.target);const{target:a}=n;delete n.target;const u=e=>e.map(e=>o(e)?s(e,t,n,r):e);if(Array.isArray(e))return u(e);for(const[c,l]of Object.entries(e)){const d=t(c,l,e);if(d===i)continue;let[f,p,{shouldRecurse:h=!0}={}]=d;"__proto__"!==f&&(n.deep&&h&&o(p)&&(p=Array.isArray(p)?u(p):s(p,t,n,r)),a[f]=p)}return a};e.exports=((e,t,n)=>{if(!r(e))throw new TypeError(`Expected an object, got \`${e}\` (${typeof e})`);return s(e,t,n)}),e.exports.mapObjectSkip=i},function(e,t,n){"use strict";const r=(e,t)=>{if("string"!=typeof e&&!Array.isArray(e))throw new TypeError("Expected the input to be `string | string[]`");return t=Object.assign({pascalCase:!1},t),0===(e=Array.isArray(e)?e.map(e=>e.trim()).filter(e=>e.length).join("-"):e.trim()).length?"":1===e.length?t.pascalCase?e.toUpperCase():e.toLowerCase():(e!==e.toLowerCase()&&(e=(e=>{let t=!1,n=!1,r=!1;for(let i=0;i<e.length;i++){const o=e[i];t&&/[a-zA-Z]/.test(o)&&o.toUpperCase()===o?(e=e.slice(0,i)+"-"+e.slice(i),t=!1,r=n,n=!0,i++):n&&r&&/[a-zA-Z]/.test(o)&&o.toLowerCase()===o?(e=e.slice(0,i-1)+"-"+e.slice(i-1),r=n,n=!1,t=!0):(t=o.toLowerCase()===o&&o.toUpperCase()!==o,r=n,n=o.toUpperCase()===o&&o.toLowerCase()!==o)}return e})(e)),
e=e.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,(e,t)=>t.toUpperCase()).replace(/\d+(\w|$)/g,e=>e.toUpperCase()),n=e,t.pascalCase?n.charAt(0).toUpperCase()+n.slice(1):n);var n};e.exports=r,e.exports.default=r},function(e,t,n){"use strict";e.exports=class{constructor(e={}){if(!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=e.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}get(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e)){const t=this.oldCache.get(e);return this.oldCache.delete(e),this._set(e,t),t}}set(e,t){return this.cache.has(e)?this.cache.set(e,t):this._set(e,t),this}has(e){return this.cache.has(e)||this.oldCache.has(e)}peek(e){return this.cache.has(e)?this.cache.get(e):this.oldCache.has(e)?this.oldCache.get(e):void 0}delete(e){const t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache)yield e;for(const e of this.oldCache){const[t]=e;this.cache.has(t)||(yield e)}}get size(){let e=0;for(const t of this.oldCache.keys())this.cache.has(t)||e++;return this._size+e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var r=n(168),i=n(170),o=n(379),s=n(382),a=n(384),u=n(54),c=function(){function e(e){(0,s.supportsWebCrypto)((0,u.locateWindow)())?this.hash=new i.Sha256(e):(0,a.isMsWindow)((0,u.locateWindow)())?this.hash=new r.Sha256(e):this.hash=new o.Sha256(e)}return e.prototype.update=function(e,t){this.hash.update(e,t)},e.prototype.digest=function(){return this.hash.digest()},e}();t.Sha256=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEmptyData=void 0,t.isEmptyData=function(e){return"string"==typeof e?0===e.length:0===e.byteLength}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(111).__exportStar(n(380),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var r=n(111),i=n(171),o=n(381),s=n(91),a=function(){function e(e){if(this.hash=new o.RawSha256,e){this.outer=new o.RawSha256;var t=function(e){var t=(0,s.convertToBuffer)(e);if(t.byteLength>i.BLOCK_SIZE){var n=new o.RawSha256;n.update(t),t=n.digest()}var r=new Uint8Array(i.BLOCK_SIZE);return r.set(t),r}(e),n=new Uint8Array(i.BLOCK_SIZE);n.set(t);for(var r=0;r<i.BLOCK_SIZE;r++)t[r]^=54,n[r]^=92;for(this.hash.update(t),this.outer.update(n),r=0;r<t.byteLength;r++)t[r]=0}}return e.prototype.update=function(e){if(!(0,s.isEmptyData)(e)&&!this.error)try{this.hash.update((0,s.convertToBuffer)(e))}catch(e){this.error=e}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return r.__awaiter(this,void 0,void 0,function(){return r.__generator(this,function(e){return[2,this.digestSync()]})})},e}();t.Sha256=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RawSha256=void 0;var r=n(171),i=function(){function e(){this.state=Int32Array.from(r.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=0,n=e.byteLength;if(this.bytesHashed+=n,8*this.bytesHashed>r.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=e[t++],n--,this.bufferLength===r.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var e=8*this.bytesHashed,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(t.setUint8(this.bufferLength++,128),n%r.BLOCK_SIZE>=r.BLOCK_SIZE-8){for(var i=this.bufferLength;i<r.BLOCK_SIZE;i++)t.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(i=this.bufferLength;i<r.BLOCK_SIZE-8;i++)t.setUint8(i,0);t.setUint32(r.BLOCK_SIZE-8,Math.floor(e/4294967296),!0),t.setUint32(r.BLOCK_SIZE-4,e),this.hashBuffer(),this.finished=!0}var o=new Uint8Array(r.DIGEST_LENGTH);for(i=0;i<8;i++)o[4*i]=this.state[i]>>>24&255,o[4*i+1]=this.state[i]>>>16&255,o[4*i+2]=this.state[i]>>>8&255,o[4*i+3]=this.state[i]>>>0&255;return o},e.prototype.hashBuffer=function(){for(var e=this.buffer,t=this.state,n=t[0],i=t[1],o=t[2],s=t[3],a=t[4],u=t[5],c=t[6],l=t[7],d=0;d<r.BLOCK_SIZE;d++){if(d<16)this.temp[d]=(255&e[4*d])<<24|(255&e[4*d+1])<<16|(255&e[4*d+2])<<8|255&e[4*d+3];else{var f=this.temp[d-2],p=(f>>>17|f<<15)^(f>>>19|f<<13)^f>>>10,h=((f=this.temp[d-15])>>>7|f<<25)^(f>>>18|f<<14)^f>>>3;this.temp[d]=(p+this.temp[d-7]|0)+(h+this.temp[d-16]|0)}var v=(((a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7))+(a&u^~a&c)|0)+(l+(r.KEY[d]+this.temp[d]|0)|0)|0,g=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&i^n&o^i&o)|0;l=c,c=u,u=a,a=s+v|0,s=o,o=i,i=n,n=v+g|0}t[0]+=n,t[1]+=i,t[2]+=o,t[3]+=s,t[4]+=a,t[5]+=u,t[6]+=c,t[7]+=l},e}();t.RawSha256=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(172).__exportStar(n(383),t)},function(e,t,n){"use strict";function r(e){return"object"==typeof e&&"object"==typeof e.crypto&&"function"==typeof e.crypto.getRandomValues}function i(e){return e&&s.every(function(t){return"function"==typeof e[t]})}Object.defineProperty(t,"__esModule",{value:!0}),t.supportsZeroByteGCM=t.supportsSubtleCrypto=t.supportsSecureRandom=t.supportsWebCrypto=void 0;var o=n(172),s=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];t.supportsWebCrypto=function(e){return!(!r(e)||"object"!=typeof e.crypto.subtle)&&i(e.crypto.subtle)},t.supportsSecureRandom=r,t.supportsSubtleCrypto=i,t.supportsZeroByteGCM=function(e){return o.__awaiter(this,void 0,void 0,function(){var t;return o.__generator(this,function(n){switch(n.label){case 0:if(!i(e))return[2,!1];n.label=1;case 1:return n.trys.push([1,4,,5]),[4,e.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return t=n.sent(),[4,e.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},t,new Uint8Array(0))];case 3:return[2,16===n.sent().byteLength];case 4:return n.sent(),[2,!1];case 5:return[2]}})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(385);r.__exportStar(n(386),t),r.__exportStar(n(387),t),r.__exportStar(n(388),t),r.__exportStar(n(389),t),r.__exportStar(n(390),t)},function(e,t,n){"use strict";function r(e,t){function n(){this.constructor=e}A(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function i(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function o(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function s(e,t){return function(n,r){t(n,r,e)}}function a(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})}function c(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s}function l(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}function d(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function f(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function p(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function h(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}function v(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function g(e){return this instanceof g?(this.v=e,this):new g(e)}function y(e,t,n){function r(e){c[e]&&(u[e]=function(t){return new Promise(function(n,r){l.push([e,t,n,r])>1||i(e,t)})})}function i(e,t){try{(n=c[e](t)).value instanceof g?Promise.resolve(n.value.v).then(o,s):a(l[0][2],n)}catch(e){a(l[0][3],e)}var n}function o(e){i("next",e)}function s(e){i("throw",e)}function a(e,t){e(t),l.shift(),l.length&&i(l[0][0],l[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var u,c=n.apply(e,t||[]),l=[];return u={},r("next"),r("throw"),r("return"),u[Symbol.asyncIterator]=function(){return this},u}function m(e){function t(t,i){n[t]=e[t]?function(n){return(r=!r)?{value:g(e[t](n)),done:"return"===t}:i?i(n):n}:i}var n,r;return n={},t("next"),t("throw",function(e){throw e}),t("return"),n[Symbol.iterator]=function(){return this},n}function b(e){function t(t){n[t]=e[t]&&function(n){return new Promise(function(r,i){!function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}(r,i,(n=e[t](n)).done,n.value)})}}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,r=e[Symbol.asyncIterator];return r?r.call(e):(e=f(e),n={},t("next"),t("throw"),t("return"),n[Symbol.asyncIterator]=function(){return this},n)}function w(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function S(e){return e&&e.__esModule?e:{default:e}}function E(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function C(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}n.r(t),n.d(t,"__extends",function(){return r}),n.d(t,"__assign",function(){return O}),n.d(t,"__rest",function(){return i}),n.d(t,"__decorate",function(){return o}),n.d(t,"__param",function(){return s}),n.d(t,"__metadata",function(){return a}),n.d(t,"__awaiter",function(){return u}),n.d(t,"__generator",function(){return c}),n.d(t,"__createBinding",function(){return l}),n.d(t,"__exportStar",function(){return d}),n.d(t,"__values",function(){return f}),n.d(t,"__read",function(){return p}),n.d(t,"__spread",function(){return h}),n.d(t,"__spreadArrays",function(){return v}),n.d(t,"__await",function(){return g}),n.d(t,"__asyncGenerator",function(){return y}),n.d(t,"__asyncDelegator",function(){return m}),n.d(t,"__asyncValues",function(){return b}),n.d(t,"__makeTemplateObject",function(){return w}),n.d(t,"__importStar",function(){return _}),n.d(t,"__importDefault",function(){return S}),n.d(t,"__classPrivateFieldGet",function(){return E}),n.d(t,"__classPrivateFieldSet",function(){return C});var A=function(e,t){return(A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},O=function(){return(O=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMsWindow=void 0;var r=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];t.isMsWindow=function(e){if(function(e){return"MSInputMethodContext"in e&&"msCrypto"in e}(e)&&void 0!==e.msCrypto.subtle){var t=e.msCrypto,n=t.getRandomValues,i=t.subtle;return r.map(function(e){return i[e]}).concat(n).every(function(e){return"function"==typeof e})}return!1}},function(e,t,n){"use strict";function r(e,t){function n(){this.constructor=e}if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");D(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function i(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function o(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})}function s(e,t){function n(n){return function(u){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,n[0]&&(a=0)),a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,u])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s}function a(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function u(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function c(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function l(e){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(e)}function d(){if(!Y&&!(Y="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Y(oe)}function f(e){for(var t="",n=0;n<e.byteLength;n++)t+=_e[e[n]];return t}function p(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function h(e,t,n){var r,i,o,s;if(void 0===t&&void 0===n)o={},s=e;else{if(o=e,"function"==typeof t)return Gt(o,t,s=n);s=t}try{for(var c=a(Object.keys(s)),l=c.next();!l.done;l=c.next()){var d=l.value;if(Array.isArray(s[d])){var f=u(s[d],2),p=f[0],h=f[1];if("function"==typeof h){var v=void 0,g=void 0===p&&null!=(v=h()),y="function"==typeof p&&!!p(void 0)||"function"!=typeof p&&!!p;g?o[d]=v:y&&(o[d]=h())}else g=void 0===p&&null!=h,y="function"==typeof p&&!!p(h)||"function"!=typeof p&&!!p,(g||y)&&(o[d]=h)}else o[d]=s[d]}}catch(e){r={error:e}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}return o}function v(e){var t=e.length/4*3;"=="===e.slice(-2)?t-=2:"="===e.slice(-1)&&t--;for(var n=new ArrayBuffer(t),r=new DataView(n),i=0;i<e.length;i+=4){for(var o=0,s=0,a=i,u=i+3;a<=u;a++)if("="!==e[a]){if(!(e[a]in Xt))throw new TypeError("Invalid character ".concat(e[a]," in base64 string."));o|=Xt[e[a]]<<6*(u-a),s+=6}else o>>=6;var c=i/4*3;o>>=s%8;for(var l=Math.floor(s/8),d=0;d<l;d++){var f=8*(l-d-1);r.setUint8(c+d,(o&255<<f)>>f)}}return new Uint8Array(n)}function g(e){for(var t="",n=0;n<e.length;n+=3){for(var r=0,i=0,o=n,s=Math.min(n+3,e.length);o<s;o++)r|=e[o]<<8*(s-o-1),i+=8;var a=Math.ceil(i/6);r<<=6*a-i;for(var u=1;u<=a;u++){var c=6*(a-u);t+=Qt[(r&63<<c)>>c]}t+="==".slice(0,4-a)}return t}function y(e){return new Promise(function(t,n){var r=new FileReader;r.onloadend=function(){var e;if(2!==r.readyState)return n(new Error("Reader aborted too early"));var i=null!==(e=r.result)&&void 0!==e?e:"",o=i.indexOf(","),s=o>-1?o+1:i.length;t(i.substring(s))},r.onabort=function(){return n(new Error("Read aborted"))},r.onerror=function(){return n(r.error)},r.readAsDataURL(e)})}function m(e,t,n){return{applyToStack:function(r){r.add(function(e,t){return function(n,r){return function(r){return o(void 0,void 0,void 0,function(){var i,o,a;return s(this,function(s){switch(s.label){case 0:return[4,n(r)];case 1:i=s.sent().response,s.label=2;case 2:return s.trys.push([2,4,,5]),[4,t(i,e)];case 3:return o=s.sent(),[2,{response:i,output:o}];case 4:throw a=s.sent(),Object.defineProperty(a,"$response",{value:i}),a;case 5:return[2]}})})}}}(e,n),wn),r.add(function(e,t){return function(n,r){return function(i){return o(void 0,void 0,void 0,function(){var a,u,c;return s(this,function(l){switch(l.label){case 0:if(!(a=(null===(c=r.endpointV2)||void 0===c?void 0:c.url)&&e.urlParser?function(){return o(void 0,void 0,void 0,function(){return s(this,function(t){return[2,e.urlParser(r.endpointV2.url)]})})}:e.endpoint))throw new Error("No valid endpoint provider available.");return[4,t(i.input,N(N({},e),{endpoint:a}))];case 1:return u=l.sent(),[2,n(N(N({},i),{request:u}))]}})})}}}(e,t),_n)}}}function b(e){for(var t,n,r=function(e){if(Array.isArray(e))return e;if("Feature"===e.type){if(null!==e.geometry)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}(e),i=0,o=1;o<r.length;)t=n||r[0],i+=((n=r[o])[0]-t[0])*(n[1]+t[1]),o++;return i>0}function w(e,t){if(!Number.isFinite(e)||!Number.isFinite(t))throw new Error("Invalid coordinates: ["+e+","+t+"]");if(t<-90||90<t)throw new Error("Latitude must be between -90 and 90 degrees inclusive.");if(e<-180||180<e)throw new Error("Longitude must be between -180 and 180 degrees inclusive.")}function _(e){if(!/^(?:[\x2D\.0-9A-Z_a-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDF50-\uDF59\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEC0-\uDED3\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDCD0-\uDCEB\uDCF0-\uDCF9\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])+$/i.test(e))throw new Error("Invalid geofenceId: '"+e+"' - IDs can only contain alphanumeric characters, hyphens, underscores and periods.")}function S(e,t){var n=t?t+": ":"";if(e.length<4)throw new Error(n+"LinearRing must contain 4 or more coordinates.");var r=[];if(e.forEach(function(e){try{w(e[0],e[1])}catch(t){r.push({coordinates:e,error:t.message})}}),r.length>0)throw new Error(n+"One or more of the coordinates in the Polygon LinearRing are not valid: "+JSON.stringify(r));var i=Qr(e[0],2),o=i[0],s=i[1],a=Qr(e[e.length-1],2),u=a[0],c=a[1];if(o!==u||s!==c)throw new Error(n+"LinearRing's first and last coordinates are not the same");if(b(e))throw new Error(n+"LinearRing coordinates must be wound counterclockwise")}function E(e){var t={};e.forEach(function(e){if(!e.geofenceId)throw new Error("Geofence '"+e+"' is missing geofenceId");var n=e.geofenceId;if(_(n),t[n])throw new Error("Duplicate geofenceId: "+n);if(t[n]=!0,!e.geometry)throw new Error("Geofence '"+n+"' is missing geometry");var r=e.geometry;if(!r.polygon)throw new Error("Geofence '"+n+"' is missing geometry.polygon");var i=r.polygon;try{!function(e,t){var n=t?t+": ":"";if(!Array.isArray(e))throw new Error(n+"Polygon is of incorrect structure. It should be an array of LinearRings");if(e.length<1)throw new Error(n+"Polygon must have a single LinearRing array.");if(e.length>1)throw new Error(n+"Polygon must have a single LinearRing array. Note: We do not currently support polygons with holes, multipolygons, polygons that are wound clockwise, or that cross the antimeridian.");if(e.reduce(function(e,t){return e+t.length},0)>1e3)throw new Error(n+"Polygon has more than the maximum 1000 vertices.");e.forEach(function(e){S(e,t)})}(i,n)}catch(e){if(e.message.includes("Polygon has more than the maximum 1000 vertices."))throw new Error("Geofence '"+n+"' has more than the maximum of 1000 vertices")}
S(Qr(i,1)[0],n)})}function C(e,t){var n=Xr({},t);if(n.FilterCountries=e.countries,n.MaxResults=e.maxResults,e.searchIndexName&&(n.IndexName=e.searchIndexName),e.biasPosition&&e.searchAreaConstraints)throw new Error("BiasPosition and SearchAreaConstraints are mutually exclusive, please remove one or the other from the options object");return e.biasPosition&&(n.BiasPosition=e.biasPosition),e.searchAreaConstraints&&(n.FilterBBox=e.searchAreaConstraints),n}n.d(t,"a",function(){return fi});var A=n(48),O=n(92),I=n(20),x=n(100),T=n.n(x),P=n(49),k=n(80),D=function(e,t){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},N=function(){return(N=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.create,Object.create,n(28);var M,L=n(13),j=function(e){var t,n=Object(L.a)(e.useDualstackEndpoint),r=e.endpoint,i=e.useFipsEndpoint,a=e.urlParser;return N(N({},e),{tls:null===(t=e.tls)||void 0===t||t,endpoint:r?Object(L.a)("string"==typeof r?a(r):r):function(){return function(e){return o(void 0,void 0,void 0,function(){var t,n,r,i,o,a,u;return s(this,function(s){switch(s.label){case 0:return t=e.tls,n=void 0===t||t,[4,e.region()];case 1:if(r=s.sent(),!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(r))throw new Error("Invalid region in client config");return[4,e.useDualstackEndpoint()];case 2:return i=s.sent(),[4,e.useFipsEndpoint()];case 3:return o=s.sent(),[4,e.regionInfoProvider(r,{useDualstackEndpoint:i,useFipsEndpoint:o})];case 4:if(!(a=(null!==(u=s.sent())&&void 0!==u?u:{}).hostname))throw new Error("Cannot resolve hostname from client config");return[2,e.urlParser("".concat(n?"https:":"http:","//").concat(a))]}})})}(N(N({},e),{useDualstackEndpoint:n,useFipsEndpoint:i}))},isCustomEndpoint:!!r,useDualstackEndpoint:n})},R=function(e){return"string"==typeof e&&(e.startsWith("fips-")||e.endsWith("-fips"))},U=function(e){return R(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e},F=function(e,t){var n;void 0===e&&(e=[]);var r=t.useFipsEndpoint,i=t.useDualstackEndpoint;return null===(n=e.find(function(e){var t=e.tags;return r===t.includes("fips")&&i===t.includes("dualstack")}))||void 0===n?void 0:n.hostname},B=function(e,t){var n,r,i,o,s,a,u=t.useFipsEndpoint,c=void 0!==u&&u,l=t.useDualstackEndpoint,d=void 0!==l&&l,f=t.signingService,p=t.regionHash,h=t.partitionHash,v=function(e,t){var n,r=t.partitionHash;return null!==(n=Object.keys(r||{}).find(function(t){return r[t].regions.includes(e)}))&&void 0!==n?n:"aws"}(e,{partitionHash:h}),g=e in p?e:null!==(r=null===(n=h[v])||void 0===n?void 0:n.endpoint)&&void 0!==r?r:e,y={useFipsEndpoint:c,useDualstackEndpoint:d},m=function(e,t){var n=t.regionHostname,r=t.partitionHostname;return n||(r?r.replace("{region}",e):void 0)}(g,{regionHostname:F(null===(i=p[g])||void 0===i?void 0:i.variants,y),partitionHostname:F(null===(o=h[v])||void 0===o?void 0:o.variants,y)});if(void 0===m)throw new Error("Endpoint resolution failed for: ".concat({resolvedRegion:g,useFipsEndpoint:c,useDualstackEndpoint:d}));var b=function(e,t){var n=t.signingRegion,r=t.regionRegex,i=t.useFipsEndpoint;if(n)return n;if(i){var o=r.replace("\\\\","\\").replace(/^\^/g,"\\.").replace(/\$$/g,"\\."),s=e.match(o);if(s)return s[0].slice(1,-1)}}(m,{signingRegion:null===(s=p[g])||void 0===s?void 0:s.signingRegion,regionRegex:h[v].regionRegex,useFipsEndpoint:c});return N(N({partition:v,signingService:f,hostname:m},b&&{signingRegion:b}),(null===(a=p[g])||void 0===a?void 0:a.signingService)&&{signingService:p[g].signingService})},z=function(){function e(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?":"!==e.protocol.slice(-1)?"".concat(e.protocol,":"):e.protocol:"https:",this.path=e.path?"/"!==e.path.charAt(0)?"/".concat(e.path):e.path:"/"}return e.isInstance=function(e){if(!e)return!1;var t=e;return"method"in t&&"protocol"in t&&"hostname"in t&&"path"in t&&"object"==typeof t.query&&"object"==typeof t.headers},e.prototype.clone=function(){var t,n=new e(N(N({},this),{headers:N({},this.headers)}));return n.query&&(n.query=(t=n.query,Object.keys(t).reduce(function(e,n){var r,i=t[n];return N(N({},e),((r={})[n]=Array.isArray(i)?c([],u(i),!1):i,r))},{}))),n},e}(),q=function(){function e(e){this.statusCode=e.statusCode,this.headers=e.headers||{},this.body=e.body}return e.isInstance=function(e){if(!e)return!1;var t=e;return"number"==typeof t.statusCode&&"object"==typeof t.headers},e}(),K={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},$=function(e){return{applyToStack:function(t){t.add(function(e){var t=this;return function(n){return function(r){return o(t,void 0,void 0,function(){var t,i,o,a,u;return s(this,function(s){if(t=r.request,z.isInstance(t)&&(i=t.body,o=t.headers,i&&-1===Object.keys(o).map(function(e){return e.toLowerCase()}).indexOf("content-length")))try{a=e(i),t.headers=N(N({},t.headers),((u={})["content-length"]=String(a),u))}catch(e){}return[2,n(N(N({},r),{request:t}))]})})}}}(e.bodyLengthChecker),K)}}},V={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},G=function(e){return{applyToStack:function(t){t.add(function(e){return function(t){return function(n){return o(void 0,void 0,void 0,function(){var r,i;return s(this,function(o){return z.isInstance(n.request)?(r=n.request,(void 0===(i=(e.requestHandler.metadata||{}).handlerProtocol)?"":i).indexOf("h2")>=0&&!r.headers[":authority"]?(delete r.headers.host,r.headers[":authority"]=""):r.headers.host||(r.headers.host=r.hostname),[2,t(n)]):[2,t(n)]})})}}}(e),V)}}},W={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},H=function(e){return{applyToStack:function(e){e.add(function(e,t){return function(n){return o(void 0,void 0,void 0,function(){var r,o,a,u,c,l,d,f,p;return s(this,function(s){switch(s.label){case 0:return r=t.clientName,o=t.commandName,a=t.inputFilterSensitiveLog,u=t.logger,c=t.outputFilterSensitiveLog,[4,e(n)];case 1:return l=s.sent(),u?("function"==typeof u.info&&(d=l.output,f=d.$metadata,p=i(d,["$metadata"]),u.info({clientName:r,commandName:o,input:a(n.input),output:c(p),metadata:f})),[2,l]):[2,l]}})})}},W)}}},J=n(96);!function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"}(M||(M={}));for(var Y,Z=M.STANDARD,X=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],Q=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],ee=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],te=[500,502,503,504],ne=["ECONNRESET","EPIPE","ETIMEDOUT"],re=function(e){var t,n;return 429===(null===(t=e.$metadata)||void 0===t?void 0:t.httpStatusCode)||Q.includes(e.name)||1==(null===(n=e.$retryable)||void 0===n?void 0:n.throttling)},ie=function(){function e(e){var t,n,r,i,o;this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=null!==(t=null==e?void 0:e.beta)&&void 0!==t?t:.7,this.minCapacity=null!==(n=null==e?void 0:e.minCapacity)&&void 0!==n?n:1,this.minFillRate=null!==(r=null==e?void 0:e.minFillRate)&&void 0!==r?r:.5,this.scaleConstant=null!==(i=null==e?void 0:e.scaleConstant)&&void 0!==i?i:.4,this.smooth=null!==(o=null==e?void 0:e.smooth)&&void 0!==o?o:.8;var s=this.getCurrentTimeInSeconds();this.lastThrottleTime=s,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}return e.prototype.getCurrentTimeInSeconds=function(){return Date.now()/1e3},e.prototype.getSendToken=function(){return o(this,void 0,void 0,function(){return s(this,function(e){return[2,this.acquireTokenBucket(1)]})})},e.prototype.acquireTokenBucket=function(e){return o(this,void 0,void 0,function(){var t;return s(this,function(n){switch(n.label){case 0:return this.enabled?(this.refillTokenBucket(),e>this.currentCapacity?(t=(e-this.currentCapacity)/this.fillRate*1e3,[4,new Promise(function(e){return setTimeout(e,t)})]):[3,2]):[2];case 1:n.sent(),n.label=2;case 2:return this.currentCapacity=this.currentCapacity-e,[2]}})})},e.prototype.refillTokenBucket=function(){var e=this.getCurrentTimeInSeconds();if(this.lastTimestamp){var t=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+t),this.lastTimestamp=e}else this.lastTimestamp=e},e.prototype.updateClientSendingRate=function(e){var t;if(this.updateMeasuredRate(),re(e)){var n=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=n,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),t=this.cubicThrottle(n),this.enableTokenBucket()}else this.calculateTimeWindow(),t=this.cubicSuccess(this.getCurrentTimeInSeconds());var r=Math.min(t,2*this.measuredTxRate);this.updateTokenBucketRate(r)},e.prototype.calculateTimeWindow=function(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))},e.prototype.cubicThrottle=function(e){return this.getPrecise(e*this.beta)},e.prototype.cubicSuccess=function(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)},e.prototype.enableTokenBucket=function(){this.enabled=!0},e.prototype.updateTokenBucketRate=function(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)},e.prototype.updateMeasuredRate=function(){var e=this.getCurrentTimeInSeconds(),t=Math.floor(2*e)/2;if(this.requestCount++,t>this.lastTxRateBucket){var n=this.requestCount/(t-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=t}},e.prototype.getPrecise=function(e){return parseFloat(e.toFixed(8))},e}(),oe=new Uint8Array(16),se=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,ae=function(e){return"string"==typeof e&&se.test(e)},ue=[],ce=0;ce<256;++ce)ue.push((ce+256).toString(16).substr(1));for(var le=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(ue[e[t+0]]+ue[e[t+1]]+ue[e[t+2]]+ue[e[t+3]]+"-"+ue[e[t+4]]+ue[e[t+5]]+"-"+ue[e[t+6]]+ue[e[t+7]]+"-"+ue[e[t+8]]+ue[e[t+9]]+"-"+ue[e[t+10]]+ue[e[t+11]]+ue[e[t+12]]+ue[e[t+13]]+ue[e[t+14]]+ue[e[t+15]]).toLowerCase();if(!ae(n))throw TypeError("Stringified UUID is invalid");return n},de=function(e,t,n){var r=(e=e||{}).random||(e.rng||d)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return le(r)},fe=function(e,t){return Math.floor(Math.min(2e4,Math.random()*Math.pow(2,t)*e))},pe=function(e){return!!e&&(function(e){return void 0!==e.$retryable}(e)||function(e){return X.includes(e.name)}(e)||re(e)||function(e){var t;return ee.includes(e.name)||ne.includes((null==e?void 0:e.code)||"")||te.includes((null===(t=e.$metadata)||void 0===t?void 0:t.httpStatusCode)||0)}(e))},he=function(){function e(e,t){var n,r,i;this.maxAttemptsProvider=e,this.mode=M.STANDARD,this.retryDecider=null!==(n=null==t?void 0:t.retryDecider)&&void 0!==n?n:pe,this.delayDecider=null!==(r=null==t?void 0:t.delayDecider)&&void 0!==r?r:fe,this.retryQuota=null!==(i=null==t?void 0:t.retryQuota)&&void 0!==i?i:function(e,t){var n,r,i,o=e,s=null!==(n=null==t?void 0:t.noRetryIncrement)&&void 0!==n?n:1,a=null!==(r=null==t?void 0:t.retryCost)&&void 0!==r?r:5,u=null!==(i=null==t?void 0:t.timeoutRetryCost)&&void 0!==i?i:10,c=e,l=function(e){return"TimeoutError"===e.name?u:a},d=function(e){return l(e)<=c};return Object.freeze({hasRetryTokens:d,retrieveRetryTokens:function(e){if(!d(e))throw new Error("No retry token available");var t=l(e);return c-=t,t},releaseRetryTokens:function(e){c+=null!=e?e:s,c=Math.min(c,o)}})}(500)}return e.prototype.shouldRetry=function(e,t,n){return t<n&&this.retryDecider(e)&&this.retryQuota.hasRetryTokens(e)},e.prototype.getMaxAttempts=function(){return o(this,void 0,void 0,function(){var e;return s(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.maxAttemptsProvider()];case 1:return e=t.sent(),[3,3];case 2:return t.sent(),e=3,[3,3];case 3:return[2,e]}})})},e.prototype.retry=function(e,t,n){return o(this,void 0,void 0,function(){var r,i,o,a,u,c,l,d;return s(this,function(f){switch(f.label){case 0:return i=0,o=0,[4,this.getMaxAttempts()];case 1:a=f.sent(),u=t.request,z.isInstance(u)&&(u.headers["amz-sdk-invocation-id"]=de()),c=function(){var c,d,f,p,h,v,g,y;return s(this,function(s){switch(s.label){case 0:return s.trys.push([0,4,,7]),z.isInstance(u)&&(u.headers["amz-sdk-request"]="attempt=".concat(i+1,"; max=").concat(a)),(null==n?void 0:n.beforeRequest)?[4,n.beforeRequest()]:[3,2];case 1:s.sent(),s.label=2;case 2:return[4,e(t)];case 3:return c=s.sent(),d=c.response,f=c.output,(null==n?void 0:n.afterRequest)&&n.afterRequest(d),l.retryQuota.releaseRetryTokens(r),f.$metadata.attempts=i+1,f.$metadata.totalRetryDelay=o,[2,{value:{response:d,output:f}}];case 4:return p=s.sent(),h=ge(p),i++,l.shouldRetry(h,i,a)?(r=l.retryQuota.retrieveRetryTokens(h),v=l.delayDecider(re(h)?500:100,i),g=ve(h.$response),y=Math.max(g||0,v),o+=y,[4,new Promise(function(e){return setTimeout(e,y)})]):[3,6];case 5:return s.sent(),[2,"continue"];case 6:throw h.$metadata||(h.$metadata={}),h.$metadata.attempts=i,h.$metadata.totalRetryDelay=o,h;case 7:return[2]}})},l=this,f.label=2;case 2:return[5,c()];case 3:return"object"==typeof(d=f.sent())?[2,d.value]:[3,2];case 4:return[2]}})})},e}(),ve=function(e){if(q.isInstance(e)){var t=Object.keys(e.headers).find(function(e){return"retry-after"===e.toLowerCase()});if(t){var n=e.headers[t],r=Number(n);return Number.isNaN(r)?new Date(n).getTime()-Date.now():1e3*r}}},ge=function(e){return e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):"string"==typeof e?new Error(e):new Error("AWS SDK error wrapper for ".concat(e))},ye=function(e){function t(t,n){var r=this,o=null!=n?n:{},s=o.rateLimiter,a=i(o,["rateLimiter"]);return(r=e.call(this,t,a)||this).rateLimiter=null!=s?s:new ie,r.mode=M.ADAPTIVE,r}return r(t,e),t.prototype.retry=function(t,n){return o(this,void 0,void 0,function(){var r=this;return s(this,function(i){return[2,e.prototype.retry.call(this,t,n,{beforeRequest:function(){return o(r,void 0,void 0,function(){return s(this,function(e){return[2,this.rateLimiter.getSendToken()]})})},afterRequest:function(e){r.rateLimiter.updateClientSendingRate(e)}})]})})},t}(he),me={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},be=function(e){return{applyToStack:function(t){t.add(function(e){return function(t,n){return function(r){return o(void 0,void 0,void 0,function(){var i;return s(this,function(o){switch(o.label){case 0:return[4,e.retryStrategy()];case 1:return(null==(i=o.sent())?void 0:i.mode)&&(n.userAgent=c(c([],u(n.userAgent||[]),!1),[["cfg/retry-mode",i.mode]],!1)),[2,i.retry(t,r)]}})})}}}(e),me)}}},we=n(66),_e={},Se={},Ee=0;Ee<256;Ee++){var Ce=Ee.toString(16).toLowerCase();1===Ce.length&&(Ce="0".concat(Ce)),_e[Ee]=Ce,Se[Ce]=Ee}var Ae="X-Amz-Date".toLowerCase(),Oe=["authorization",Ae,"date"],Ie="X-Amz-Signature".toLowerCase(),xe="X-Amz-Security-Token".toLowerCase(),Te={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},Pe=/^proxy-/,ke=/^sec-/,De="AWS4-HMAC-SHA256-PAYLOAD",Ne={},Me=[],Le=function(e,t,n){return"".concat(e,"/").concat(t,"/").concat(n,"/").concat("aws4_request")},je=function(e,t,n){var r=new e(t);return r.update(n),r.digest()},Re=function(e,t,n){var r,i,o=e.headers,s={};try{for(var u=a(Object.keys(o).sort()),c=u.next();!c.done;c=u.next()){var l=c.value;if(null!=o[l]){var d=l.toLowerCase();(d in Te||(null==t?void 0:t.has(d))||Pe.test(d)||ke.test(d))&&(!n||n&&!n.has(d))||(s[d]=o[l].trim().replace(/\s+/g," "))}}}catch(e){r={error:e}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return s},Ue=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,Fe)},Fe=function(e){return"%".concat(e.charCodeAt(0).toString(16).toUpperCase())},Be=function(e,t){var n=e.headers,r=e.body;return o(void 0,void 0,void 0,function(){var e,i,o,u,c,l,d;return s(this,function(s){switch(s.label){case 0:try{for(e=a(Object.keys(n)),i=e.next();!i.done;i=e.next())if("x-amz-content-sha256"===(o=i.value).toLowerCase())return[2,n[o]]}catch(e){l={error:e}}finally{try{i&&!i.done&&(d=e.return)&&d.call(e)}finally{if(l)throw l.error}}return null!=r?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof r||ArrayBuffer.isView(r)||(p=r,"function"==typeof ArrayBuffer&&p instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(p))?((u=new t).update(r),c=f,[4,u.digest()]):[3,3];case 2:return[2,c.apply(void 0,[s.sent()])];case 3:return[2,"UNSIGNED-PAYLOAD"]}var p})})},ze=function(e){var t=e.headers,n=e.query,r=i(e,["headers","query"]);return N(N({},r),{headers:N({},t),query:n?qe(n):void 0})},qe=function(e){return Object.keys(e).reduce(function(t,n){var r,i=e[n];return N(N({},t),((r={})[n]=Array.isArray(i)?c([],u(i),!1):i,r))},{})},Ke=function(e){var t,n;e="function"==typeof e.clone?e.clone():ze(e);try{for(var r=a(Object.keys(e.headers)),i=r.next();!i.done;i=r.next()){var o=i.value;Oe.indexOf(o.toLowerCase())>-1&&delete e.headers[o]}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return e},$e=function(e){return"number"==typeof e?new Date(1e3*e):"string"==typeof e?Number(e)?new Date(1e3*Number(e)):new Date(e):e},Ve=function(){function e(e){var t=e.applyChecksum,n=e.credentials,r=e.region,i=e.service,o=e.sha256,s=e.uriEscapePath,a=void 0===s||s;this.service=i,this.sha256=o,this.uriEscapePath=a,this.applyChecksum="boolean"!=typeof t||t,this.regionProvider=Object(L.a)(r),this.credentialProvider=Object(L.a)(n)}return e.prototype.presign=function(e,t){return void 0===t&&(t={}),o(this,void 0,void 0,function(){var n,r,i,o,u,c,l,d,f,p,h,v,g,y,m,b,w,_,S,E,C,A,O,I;return s(this,function(s){switch(s.label){case 0:return n=t.signingDate,r=void 0===n?new Date:n,i=t.expiresIn,o=void 0===i?3600:i,u=t.unsignableHeaders,c=t.unhoistableHeaders,l=t.signableHeaders,d=t.signingRegion,f=t.signingService,[4,this.credentialProvider()];case 1:return p=s.sent(),this.validateResolvedCredentials(p),null==d?[3,2]:(v=d,[3,4]);case 2:return[4,this.regionProvider()];case 3:v=s.sent(),s.label=4;case 4:return h=v,g=Ge(r),y=g.longDate,m=g.shortDate,o>604800?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(b=Le(m,h,null!=f?f:this.service),w=function(e,t){var n,r,i;void 0===t&&(t={});var o="function"==typeof e.clone?e.clone():ze(e),s=o.headers,u=o.query,c=void 0===u?{}:u;try{for(var l=a(Object.keys(s)),d=l.next();!d.done;d=l.next()){var f=d.value,p=f.toLowerCase();"x-amz-"!==p.slice(0,6)||(null===(i=t.unhoistableHeaders)||void 0===i?void 0:i.has(p))||(c[f]=s[f],delete s[f])}}catch(e){n={error:e}}finally{try{d&&!d.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}return N(N({},e),{headers:s,query:c})}(Ke(e),{unhoistableHeaders:c}),p.sessionToken&&(w.query["X-Amz-Security-Token"]=p.sessionToken),w.query["X-Amz-Algorithm"]="AWS4-HMAC-SHA256",w.query["X-Amz-Credential"]="".concat(p.accessKeyId,"/").concat(b),w.query["X-Amz-Date"]=y,w.query["X-Amz-Expires"]=o.toString(10),_=Re(w,u,l),w.query["X-Amz-SignedHeaders"]=We(_),S=w.query,E="X-Amz-Signature",C=this.getSignature,A=[y,b,this.getSigningKey(p,h,m,f)],O=this.createCanonicalRequest,I=[w,_],[4,Be(e,this.sha256)]);case 5:return[4,C.apply(this,A.concat([O.apply(this,I.concat([s.sent()]))]))];case 6:return S[E]=s.sent(),[2,w]}})})},e.prototype.sign=function(e,t){return o(this,void 0,void 0,function(){return s(this,function(n){return"string"==typeof e?[2,this.signString(e,t)]:e.headers&&e.payload?[2,this.signEvent(e,t)]:[2,this.signRequest(e,t)]})})},e.prototype.signEvent=function(e,t){var n=e.headers,r=e.payload,i=t.signingDate,a=void 0===i?new Date:i,u=t.priorSignature,c=t.signingRegion,l=t.signingService;return o(this,void 0,void 0,function(){var e,t,i,o,d,p,h,v,g,y,m;return s(this,function(s){switch(s.label){case 0:return null==c?[3,1]:(t=c,[3,3]);case 1:return[4,this.regionProvider()];case 2:t=s.sent(),s.label=3;case 3:return e=t,i=Ge(a),o=i.shortDate,d=i.longDate,p=Le(o,e,null!=l?l:this.service),[4,Be({headers:{},body:r},this.sha256)];case 4:return h=s.sent(),(v=new this.sha256).update(n),y=f,[4,v.digest()];case 5:return g=y.apply(void 0,[s.sent()]),m=[De,d,p,u,g,h].join("\n"),[2,this.signString(m,{signingDate:a,signingRegion:e,signingService:l})]}})})},e.prototype.signString=function(e,t){var n=void 0===t?{}:t,r=n.signingDate,i=void 0===r?new Date:r,a=n.signingRegion,u=n.signingService;return o(this,void 0,void 0,function(){var t,n,r,o,c,l,d,p;return s(this,function(s){switch(s.label){case 0:return[4,this.credentialProvider()];case 1:return t=s.sent(),this.validateResolvedCredentials(t),null==a?[3,2]:(r=a,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=s.sent(),s.label=4;case 4:return n=r,o=Ge(i).shortDate,d=(l=this.sha256).bind,[4,this.getSigningKey(t,n,o,u)];case 5:return(c=new(d.apply(l,[void 0,s.sent()]))).update(e),p=f,[4,c.digest()];case 6:return[2,p.apply(void 0,[s.sent()])]}})})},e.prototype.signRequest=function(e,t){var n=void 0===t?{}:t,r=n.signingDate,i=void 0===r?new Date:r,u=n.signableHeaders,c=n.unsignableHeaders,l=n.signingRegion,d=n.signingService;return o(this,void 0,void 0,function(){var t,n,r,o,f,p,h,v,g,y,m;return s(this,function(s){switch(s.label){case 0:return[4,this.credentialProvider()];case 1:return t=s.sent(),this.validateResolvedCredentials(t),null==l?[3,2]:(r=l,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=s.sent(),s.label=4;case 4:return n=r,o=Ke(e),f=Ge(i),p=f.longDate,h=f.shortDate,v=Le(h,n,null!=d?d:this.service),o.headers[Ae]=p,t.sessionToken&&(o.headers[xe]=t.sessionToken),[4,Be(o,this.sha256)];case 5:return g=s.sent(),!function(e,t){var n,r;e=e.toLowerCase();try{for(var i=a(Object.keys(t)),o=i.next();!o.done;o=i.next())if(e===o.value.toLowerCase())return!0}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return!1}("x-amz-content-sha256",o.headers)&&this.applyChecksum&&(o.headers["x-amz-content-sha256"]=g),y=Re(o,c,u),[4,this.getSignature(p,v,this.getSigningKey(t,n,h,d),this.createCanonicalRequest(o,y,g))];case 6:return m=s.sent(),o.headers.authorization="".concat("AWS4-HMAC-SHA256"," ")+"Credential=".concat(t.accessKeyId,"/").concat(v,", ")+"SignedHeaders=".concat(We(y),", ")+"Signature=".concat(m),[2,o]}})})},e.prototype.createCanonicalRequest=function(e,t,n){var r=Object.keys(t).sort();return"".concat(e.method,"\n").concat(this.getCanonicalPath(e),"\n").concat(function(e){var t,n,r=e.query,i=void 0===r?{}:r,o=[],s={},u=function(e){if(e.toLowerCase()===Ie)return"continue";o.push(e);var t=i[e];"string"==typeof t?s[e]="".concat(Ue(e),"=").concat(Ue(t)):Array.isArray(t)&&(s[e]=t.slice(0).sort().reduce(function(t,n){return t.concat(["".concat(Ue(e),"=").concat(Ue(n))])},[]).join("&"))};try{for(var c=a(Object.keys(i).sort()),l=c.next();!l.done;l=c.next())u(l.value)}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}return o.map(function(e){return s[e]}).filter(function(e){return e}).join("&")}(e),"\n").concat(r.map(function(e){return"".concat(e,":").concat(t[e])}).join("\n"),"\n\n").concat(r.join(";"),"\n").concat(n)},e.prototype.createStringToSign=function(e,t,n){return o(this,void 0,void 0,function(){var r,i;return s(this,function(o){switch(o.label){case 0:return(r=new this.sha256).update(n),[4,r.digest()];case 1:return i=o.sent(),[2,"".concat("AWS4-HMAC-SHA256","\n").concat(e,"\n").concat(t,"\n").concat(f(i))]}})})},e.prototype.getCanonicalPath=function(e){var t,n,r=e.path;if(this.uriEscapePath){var i=[];try{for(var o=a(r.split("/")),s=o.next();!s.done;s=o.next()){var u=s.value;0!==(null==u?void 0:u.length)&&"."!==u&&(".."===u?i.pop():i.push(u))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}var c="".concat((null==r?void 0:r.startsWith("/"))?"/":"").concat(i.join("/")).concat(i.length>0&&(null==r?void 0:r.endsWith("/"))?"/":"");return encodeURIComponent(c).replace(/%2F/g,"/")}return r},e.prototype.getSignature=function(e,t,n,r){return o(this,void 0,void 0,function(){var i,o,a,u,c;return s(this,function(s){switch(s.label){case 0:return[4,this.createStringToSign(e,t,r)];case 1:return i=s.sent(),u=(a=this.sha256).bind,[4,n];case 2:return(o=new(u.apply(a,[void 0,s.sent()]))).update(i),c=f,[4,o.digest()];case 3:return[2,c.apply(void 0,[s.sent()])]}})})},e.prototype.getSigningKey=function(e,t,n,r){return function(e,t,n,r,i){return o(void 0,void 0,void 0,function(){var o,u,c,l,d,p,h,v,g;return s(this,function(s){switch(s.label){case 0:return[4,je(e,t.secretAccessKey,t.accessKeyId)];case 1:if(o=s.sent(),(u="".concat(n,":").concat(r,":").concat(i,":").concat(f(o),":").concat(t.sessionToken))in Ne)return[2,Ne[u]];for(Me.push(u);Me.length>50;)delete Ne[Me.shift()];c="AWS4".concat(t.secretAccessKey),s.label=2;case 2:s.trys.push([2,7,8,9]),l=a([n,r,i,"aws4_request"]),d=l.next(),s.label=3;case 3:return d.done?[3,6]:(p=d.value,[4,je(e,c,p)]);case 4:c=s.sent(),s.label=5;case 5:return d=l.next(),[3,3];case 6:return[3,9];case 7:return h=s.sent(),v={error:h},[3,9];case 8:try{d&&!d.done&&(g=l.return)&&g.call(l)}finally{if(v)throw v.error}return[7];case 9:return[2,Ne[u]=c]}})})}(this.sha256,e,n,t,r||this.service)},e.prototype.validateResolvedCredentials=function(e){if("object"!=typeof e||"string"!=typeof e.accessKeyId||"string"!=typeof e.secretAccessKey)throw new Error("Resolved credential object is not valid")},e}(),Ge=function(e){var t,n=(t=e,$e(t).toISOString().replace(/\.\d{3}Z$/,"Z")).replace(/[\-:]/g,"");return{longDate:n,shortDate:n.slice(0,8)}},We=function(e){return Object.keys(e).sort().join(";")},He=function(e){return"function"==typeof e?Object(we.a)(e,function(e){return void 0!==e.expiration&&e.expiration.getTime()-Date.now()<3e5},function(e){return void 0!==e.expiration}):Object(L.a)(e)},Je=function(e){return new Date(Date.now()+e)},Ye=function(e,t){var n=Date.parse(e);return function(e,t){return Math.abs(Je(t).getTime()-e)>=3e5}(n,t)?n-Date.now():t},Ze=function(e){var t,n,r;return q.isInstance(e)?null!==(n=null===(t=e.headers)||void 0===t?void 0:t.date)&&void 0!==n?n:null===(r=e.headers)||void 0===r?void 0:r.Date:void 0},Xe={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},Qe=function(e){return{applyToStack:function(t){t.addRelativeTo(function(e){return function(t,n){return function(r){var i,a,u;return o(this,void 0,void 0,function(){var o,c,l,d,f,p,h;return s(this,function(s){switch(s.label){case 0:return z.isInstance(r.request)?(o=null===(u=null===(a=null===(i=n.endpointV2)||void 0===i?void 0:i.properties)||void 0===a?void 0:a.authSchemes)||void 0===u?void 0:u[0],[4,e.signer(o)]):[2,t(r)];case 1:return c=s.sent(),d=t,f=[N({},r)],h={},[4,c.sign(r.request,{signingDate:Je(e.systemClockOffset),signingRegion:n.signing_region,signingService:n.signing_service})];case 2:return[4,d.apply(void 0,[N.apply(void 0,f.concat([(h.request=s.sent(),h)]))]).catch(function(t){var n,r=null!==(n=t.ServerTime)&&void 0!==n?n:Ze(t.$response);throw r&&(e.systemClockOffset=Ye(r,e.systemClockOffset)),t})];case 3:return l=s.sent(),(p=Ze(l.response))&&(e.systemClockOffset=Ye(p,e.systemClockOffset)),[2,l]}})})}}}(e),Xe)}}},et=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,tt=function(e){var t=u(e,2),n=t[0],r=t[1],i=n.indexOf("/"),o=n.substring(0,i),s=n.substring(i+1);return"api"===o&&(s=s.toLowerCase()),[o,s,r].filter(function(e){return e&&e.length>0}).map(function(e){return null==e?void 0:e.replace(et,"_")}).join("/")},nt={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},rt=function(e){return{applyToStack:function(t){var n;t.add((n=e,function(e,t){return function(r){return o(void 0,void 0,void 0,function(){var i,o,a,l,d,f,p,h,v;return s(this,function(s){switch(s.label){case 0:return i=r.request,z.isInstance(i)?(o=i.headers,a=(null===(h=null==t?void 0:t.userAgent)||void 0===h?void 0:h.map(tt))||[],[4,n.defaultUserAgentProvider()]):[2,e(r)];case 1:return l=s.sent().map(tt),d=(null===(v=null==n?void 0:n.customUserAgent)||void 0===v?void 0:v.map(tt))||[],f=c(c(c([],u(l),!1),u(a),!1),u(d),!1).join(" "),p=c(c([],u(l.filter(function(e){return e.startsWith("aws-sdk-")})),!1),u(d),!1).join(" "),"browser"!==n.runtime?(p&&(o["x-amz-user-agent"]=o["x-amz-user-agent"]?"".concat(o["user-agent"]," ").concat(p):p),o["user-agent"]=f):o["x-amz-user-agent"]=f,[2,e(N(N({},r),{request:i}))]}})})}}),nt)}}},it=function(){var e=[],t=[],n=new Set,r=function(n){return e.forEach(function(e){n.add(e.middleware,N({},e))}),t.forEach(function(e){n.addRelativeTo(e.middleware,N({},e))}),n},i=function(e){var t=[];return e.before.forEach(function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,c([],u(i(e)),!1))}),t.push(e),e.after.reverse().forEach(function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,c([],u(i(e)),!1))}),t},o=function(n){void 0===n&&(n=!1);var r,o=[],s=[],a={};return e.forEach(function(e){var t=N(N({},e),{before:[],after:[]});t.name&&(a[t.name]=t),o.push(t)}),t.forEach(function(e){var t=N(N({},e),{before:[],after:[]});t.name&&(a[t.name]=t),s.push(t)}),s.forEach(function(e){if(e.toMiddleware){var t=a[e.toMiddleware];if(void 0===t){if(n)return;throw new Error("".concat(e.toMiddleware," is not found when adding ").concat(e.name||"anonymous"," middleware ").concat(e.relation," ").concat(e.toMiddleware))}"after"===e.relation&&t.after.push(e),"before"===e.relation&&t.before.push(e)}}),(r=o,r.sort(function(e,t){return ot[t.step]-ot[e.step]||st[t.priority||"normal"]-st[e.priority||"normal"]})).map(i).reduce(function(e,t){return e.push.apply(e,c([],u(t),!1)),e},[])},s={add:function(t,r){void 0===r&&(r={});var i=r.name,o=r.override,s=N({step:"initialize",priority:"normal",middleware:t},r);if(i){if(n.has(i)){if(!o)throw new Error("Duplicate middleware name '".concat(i,"'"));var a=e.findIndex(function(e){return e.name===i}),u=e[a];if(u.step!==s.step||u.priority!==s.priority)throw new Error('"'.concat(i,'" middleware with ').concat(u.priority," priority in ").concat(u.step," step cannot be ")+"overridden by same-name middleware with ".concat(s.priority," priority in ").concat(s.step," step."));e.splice(a,1)}n.add(i)}e.push(s)},addRelativeTo:function(e,r){var i=r.name,o=r.override,s=N({middleware:e},r);if(i){if(n.has(i)){if(!o)throw new Error("Duplicate middleware name '".concat(i,"'"));var a=t.findIndex(function(e){return e.name===i}),u=t[a]
;if(u.toMiddleware!==s.toMiddleware||u.relation!==s.relation)throw new Error('"'.concat(i,'" middleware ').concat(u.relation,' "').concat(u.toMiddleware,'" middleware cannot be overridden ')+"by same-name middleware ".concat(s.relation,' "').concat(s.toMiddleware,'" middleware.'));t.splice(a,1)}n.add(i)}t.push(s)},clone:function(){return r(it())},use:function(e){e.applyToStack(s)},remove:function(r){return"string"==typeof r?function(r){var i=!1,o=function(e){return!e.name||e.name!==r||(i=!0,n.delete(r),!1)};return e=e.filter(o),t=t.filter(o),i}(r):function(r){var i=!1,o=function(e){return e.middleware!==r||(i=!0,e.name&&n.delete(e.name),!1)};return e=e.filter(o),t=t.filter(o),i}(r)},removeByTag:function(r){var i=!1,o=function(e){var t=e.tags,o=e.name;return!t||!t.includes(r)||(o&&n.delete(o),i=!0,!1)};return e=e.filter(o),t=t.filter(o),i},concat:function(e){var t=r(it());return t.use(e),t},applyToStack:r,identify:function(){return o(!0).map(function(e){return e.name+": "+(e.tags||[]).join(",")})},resolve:function(e,t){var n,r;try{for(var i=a(o().map(function(e){return e.middleware}).reverse()),s=i.next();!s.done;s=i.next())e=(0,s.value)(e,t)}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return e}};return s},ot={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},st={high:3,normal:2,low:1},at=function(){function e(e){this.middlewareStack=it(),this.config=e}return e.prototype.send=function(e,t,n){var r="function"!=typeof t?t:void 0,i="function"==typeof t?t:n,o=e.resolveMiddleware(this.middlewareStack,this.config,r);if(!i)return o(e).then(function(e){return e.output});o(e).then(function(e){return i(null,e.output)},function(e){return i(e)}).catch(function(){})},e.prototype.destroy=function(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()},e}(),ut=function(){this.middlewareStack=it()},ct="***SensitiveInformation***",lt=function(e){if(null!=e){if("number"==typeof e){if(0!==e&&1!==e||Tt.warn(xt("Expected boolean, got ".concat(typeof e,": ").concat(e))),0===e)return!1;if(1===e)return!0}if("string"==typeof e){var t=e.toLowerCase();if("false"!==t&&"true"!==t||Tt.warn(xt("Expected boolean, got ".concat(typeof e,": ").concat(e))),"false"===t)return!1;if("true"===t)return!0}if("boolean"==typeof e)return e;throw new TypeError("Expected boolean, got ".concat(typeof e,": ").concat(e))}},dt=function(e){if(null!=e){if("string"==typeof e){var t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&Tt.warn(xt("Expected number but observed string: ".concat(e))),t}if("number"==typeof e)return e;throw new TypeError("Expected number, got ".concat(typeof e,": ").concat(e))}},ft=Math.ceil(Math.pow(2,127)*(2-Math.pow(2,-23))),pt=function(e){var t=dt(e);if(void 0!==t&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>ft)throw new TypeError("Expected 32-bit float, got ".concat(e));return t},ht=function(e){if(null!=e){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError("Expected integer, got ".concat(typeof e,": ").concat(e))}},vt=function(e){return mt(e,32)},gt=function(e){return mt(e,16)},yt=function(e){return mt(e,8)},mt=function(e,t){var n=ht(e);if(void 0!==n&&bt(n,t)!==n)throw new TypeError("Expected ".concat(t,"-bit integer, got ").concat(e));return n},bt=function(e,t){switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},wt=function(e,t){if(null==e){if(t)throw new TypeError("Expected a non-null value for ".concat(t));throw new TypeError("Expected a non-null value")}return e},_t=function(e){if(null!=e){if("object"==typeof e&&!Array.isArray(e))return e;var t=Array.isArray(e)?"array":typeof e;throw new TypeError("Expected object, got ".concat(t,": ").concat(e))}},St=function(e){if(null!=e){if("string"==typeof e)return e;if(["boolean","number","bigint"].includes(typeof e))return Tt.warn(xt("Expected string, got ".concat(typeof e,": ").concat(e))),String(e);throw new TypeError("Expected string, got ".concat(typeof e,": ").concat(e))}},Et=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Ct=function(e){var t=e.match(Et);if(null===t||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)},At=function(e){return"string"==typeof e?Ot(e):dt(e)},Ot=function(e){switch(e){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error("Unable to parse float value: ".concat(e))}},It=function(e){return gt("string"==typeof e?Ct(e):e)},xt=function(e){return String(new TypeError(e).stack||e).split("\n").slice(0,5).filter(function(e){return!e.includes("stackTraceWarning")}).join("\n")},Tt={warn:console.warn},Pt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],kt=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),Dt=function(e){if(null!=e){if("string"!=typeof e)throw new TypeError("RFC-3339 date-times must be expressed as strings");var t=kt.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");var n=u(t,8),r=(n[0],n[1]),i=n[2],o=n[3],s=n[4],a=n[5],c=n[6],l=n[7],d=It(Ft(r)),f=Rt(i,"month",1,12),p=Rt(o,"day",1,31);return Nt(d,f,p,{hours:s,minutes:a,seconds:c,fractionalMilliseconds:l})}},Nt=(new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),function(e,t,n,r){var i=t-1;return Lt(e,i,n),new Date(Date.UTC(e,i,n,Rt(r.hours,"hour",0,23),Rt(r.minutes,"minute",0,59),Rt(r.seconds,"seconds",0,60),Ut(r.fractionalMilliseconds)))}),Mt=[31,28,31,30,31,30,31,31,30,31,30,31],Lt=function(e,t,n){var r=Mt[t];if(1===t&&jt(e)&&(r=29),n>r)throw new TypeError("Invalid day for ".concat(Pt[t]," in ").concat(e,": ").concat(n))},jt=function(e){return e%4==0&&(e%100!=0||e%400==0)},Rt=function(e,t,n,r){var i=function(e){return yt("string"==typeof e?Ct(e):e)}(Ft(e));if(i<n||i>r)throw new TypeError("".concat(t," must be between ").concat(n," and ").concat(r,", inclusive"));return i},Ut=function(e){return null==e?0:1e3*function(e){return pt("string"==typeof e?Ct(e):e)}("0."+e)},Ft=function(e){for(var t=0;t<e.length-1&&"0"===e.charAt(t);)t++;return 0===t?e:e.slice(t)},Bt=function(e){function t(n){var r=e.call(this,n.message)||this;return Object.setPrototypeOf(r,t.prototype),r.name=n.name,r.$fault=n.$fault,r.$metadata=n.$metadata,r}return r(t,e),t}(Error),zt=function(e,t){void 0===t&&(t={}),Object.entries(t).filter(function(e){return void 0!==u(e,2)[1]}).forEach(function(t){var n=u(t,2),r=n[0],i=n[1];null!=e[r]&&""!==e[r]||(e[r]=i)});var n=e.message||e.Message||"UnknownError";return e.message=n,delete e.Message,e},qt=function(e){var t=e.output,n=e.parsedBody,r=e.exceptionCtor,i=e.errorCode,o=Kt(t),s=o.httpStatusCode?o.httpStatusCode+"":void 0,a=new r({name:n.code||n.Code||i||s||"UnknowError",$fault:"client",$metadata:o});throw zt(a,n)},Kt=function(e){var t;return{httpStatusCode:e.statusCode,requestId:null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},$t=function(e){switch(e){case"standard":case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}};n(167);var Vt=function(){var e=Object.getPrototypeOf(this).constructor,t=new(Function.bind.apply(String,c([null],u(arguments),!1)));return Object.setPrototypeOf(t,e.prototype),t};Vt.prototype=Object.create(String.prototype,{constructor:{value:Vt,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(Vt,String),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r(t,e),t.prototype.deserializeJSON=function(){return JSON.parse(e.prototype.toString.call(this))},t.prototype.toJSON=function(){return e.prototype.toString.call(this)},t.fromObject=function(e){return e instanceof t?e:new t(e instanceof String||"string"==typeof e?e:JSON.stringify(e))}}(Vt);for(var Gt=function(e,t,n){return h(e,Object.entries(n).reduce(function(e,n){var r=u(n,2),i=r[0],o=r[1];return Array.isArray(o)?e[i]=o:e[i]="function"==typeof o?[t,o()]:[t,o],e},{}))},Wt=function(e,t,n,r,i,o){if(null==t||void 0===t[n])throw new Error("No value provided for input HTTP label: "+n+".");var s=r();if(s.length<=0)throw new Error("Empty value provided for input HTTP label: "+n+".");return e.replace(i,o?s.split("/").map(function(e){return p(e)}).join("/"):p(s))},Ht=function(e){if(e!=e)return"NaN";switch(e){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return e}},Jt=n(194),Yt=n(193),Zt=function(){function e(e){"function"==typeof e?this.configProvider=e().then(function(e){return e||{}}):(this.config=null!=e?e:{},this.configProvider=Promise.resolve(this.config))}return e.prototype.destroy=function(){},e.prototype.handle=function(e,t){var n=(void 0===t?{}:t).abortSignal;return o(this,void 0,void 0,function(){var t,r,i,o,u,c,l,d,f,p,h,v;return s(this,function(s){switch(s.label){case 0:return this.config?[3,2]:(t=this,[4,this.configProvider]);case 1:t.config=s.sent(),s.label=2;case 2:return r=this.config.requestTimeout,(null==n?void 0:n.aborted)?((i=new Error("Request aborted")).name="AbortError",[2,Promise.reject(i)]):(o=e.path,e.query&&(u=function(e){var t,n,r=[];try{for(var i=a(Object.keys(e).sort()),o=i.next();!o.done;o=i.next()){var s=o.value,u=e[s];if(s=Ue(s),Array.isArray(u))for(var c=0,l=u.length;c<l;c++)r.push("".concat(s,"=").concat(Ue(u[c])));else{var d=s;(u||"string"==typeof u)&&(d+="=".concat(Ue(u))),r.push(d)}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r.join("&")}(e.query))&&(o+="?".concat(u)),c=e.port,l=e.method,d="".concat(e.protocol,"//").concat(e.hostname).concat(c?":".concat(c):"").concat(o),f="GET"===l||"HEAD"===l?void 0:e.body,p={body:f,headers:new Headers(e.headers),method:l},"undefined"!=typeof AbortController&&(p.signal=n),h=new Request(d,p),v=[fetch(h).then(function(e){var t,n,r=e.headers,i={};try{for(var o=a(r.entries()),s=o.next();!s.done;s=o.next()){var u=s.value;i[u[0]]=u[1]}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return void 0!==e.body?{response:new q({headers:i,statusCode:e.status,body:e.body})}:e.blob().then(function(t){return{response:new q({headers:i,statusCode:e.status,body:t})}})}),(g=r,void 0===g&&(g=0),new Promise(function(e,t){g&&setTimeout(function(){var e=new Error("Request did not complete within ".concat(g," ms"));e.name="TimeoutError",t(e)},g)}))],n&&v.push(new Promise(function(e,t){n.onabort=function(){var e=new Error("Request aborted");e.name="AbortError",t(e)}})),[2,Promise.race(v)])}var g})})},e}(),Xt={},Qt=new Array(64),en=0,tn="A".charCodeAt(0),nn="Z".charCodeAt(0);en+tn<=nn;en++){var rn=String.fromCharCode(en+tn);Xt[rn]=en,Qt[en]=rn}for(en=0,tn="a".charCodeAt(0),nn="z".charCodeAt(0);en+tn<=nn;en++){rn=String.fromCharCode(en+tn);var on=en+26;Xt[rn]=on,Qt[on]=rn}for(en=0;en<10;en++)Xt[en.toString(10)]=en+52,rn=en.toString(10),on=en+52,Xt[rn]=on,Qt[on]=rn;Xt["+"]=62,Qt[62]="+",Xt["/"]=63,Qt[63]="/";var sn=function(e){return"function"==typeof Blob&&e instanceof Blob?function(e){return o(this,void 0,void 0,function(){var t,n;return s(this,function(r){switch(r.label){case 0:return[4,y(e)];case 1:return t=r.sent(),n=v(t),[2,new Uint8Array(n)]}})})}(e):function(e){return o(this,void 0,void 0,function(){var t,n,r,i,o,a,u;return s(this,function(s){switch(s.label){case 0:t=new Uint8Array(0),n=e.getReader(),r=!1,s.label=1;case 1:return r?[3,3]:[4,n.read()];case 2:return i=s.sent(),o=i.done,(a=i.value)&&(u=t,(t=new Uint8Array(u.length+a.length)).set(u),t.set(a,u.length)),r=o,[3,1];case 3:return[2,t]}})})}(e)},an=function(e){if("string"==typeof e){for(var t=e.length,n=t-1;n>=0;n--){var r=e.charCodeAt(n);r>127&&r<=2047?t++:r>2047&&r<=65535&&(t+=2),r>=56320&&r<=57343&&n--}return t}if("number"==typeof e.byteLength)return e.byteLength;if("number"==typeof e.size)return e.size;throw new Error("Body Length computation failed for ".concat(e))},un=n(58),cn=n.n(un),ln=function(e){var t=e.serviceId,n=e.clientVersion;return function(){return o(void 0,void 0,void 0,function(){var e,r,i,o,a,u,c,l,d;return s(this,function(s){return e="undefined"!=typeof window&&(null===(i=null===window||void 0===window?void 0:window.navigator)||void 0===i?void 0:i.userAgent)?cn.a.parse(window.navigator.userAgent):void 0,r=[["aws-sdk-js",n],["os/".concat((null===(o=null==e?void 0:e.os)||void 0===o?void 0:o.name)||"other"),null===(a=null==e?void 0:e.os)||void 0===a?void 0:a.version],["lang/js"],["md/browser","".concat(null!==(c=null===(u=null==e?void 0:e.browser)||void 0===u?void 0:u.name)&&void 0!==c?c:"unknown","_").concat(null!==(d=null===(l=null==e?void 0:e.browser)||void 0===l?void 0:l.version)&&void 0!==d?d:"unknown")]],t&&r.push(["api/".concat(t),n]),[2,r]})})}},dn=function(e){return"function"==typeof TextEncoder?function(e){return(new TextEncoder).encode(e)}(e):function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e.charCodeAt(n);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192,63&i|128);else if(n+1<e.length&&55296==(64512&i)&&56320==(64512&e.charCodeAt(n+1))){var o=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n));t.push(o>>18|240,o>>12&63|128,o>>6&63|128,63&o|128)}else t.push(i>>12|224,i>>6&63|128,63&i|128)}return Uint8Array.from(t)}(e)},fn=function(e){return"function"==typeof TextDecoder?function(e){return new TextDecoder("utf-8").decode(e)}(e):function(e){for(var t="",n=0,r=e.length;n<r;n++){var i=e[n];if(i<128)t+=String.fromCharCode(i);else if(192<=i&&i<224){var o=e[++n];t+=String.fromCharCode((31&i)<<6|63&o)}else if(240<=i&&i<365){var s="%"+[i,e[++n],e[++n],e[++n]].map(function(e){return e.toString(16)}).join("%");t+=decodeURIComponent(s)}else t+=String.fromCharCode((15&i)<<12|(63&e[++n])<<6|63&e[++n])}return t}(e)},pn=function(e){if("string"==typeof e)return pn(new URL(e));var t,n=e,r=n.hostname,i=n.pathname,o=n.port,s=n.protocol,c=n.search;return c&&(t=function(e){var t,n,r={};if(e=e.replace(/^\?/,""))try{for(var i=a(e.split("&")),o=i.next();!o.done;o=i.next()){var s=u(o.value.split("="),2),c=s[0],l=s[1],d=void 0===l?null:l;c=decodeURIComponent(c),d&&(d=decodeURIComponent(d)),c in r?Array.isArray(r[c])?r[c].push(d):r[c]=[r[c],d]:r[c]=d}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}(c)),{hostname:r,port:o?parseInt(o):void 0,protocol:s,path:i,query:t}},hn={},vn={aws:{regions:["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-northeast-3","ap-south-1","ap-southeast-1","ap-southeast-2","ap-southeast-3","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-central-1","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"],regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",variants:[{hostname:"geo.{region}.amazonaws.com",tags:[]},{hostname:"geo-fips.{region}.amazonaws.com",tags:["fips"]},{hostname:"geo-fips.{region}.api.aws",tags:["dualstack","fips"]},{hostname:"geo.{region}.api.aws",tags:["dualstack"]}]},"aws-cn":{regions:["cn-north-1","cn-northwest-1"],regionRegex:"^cn\\-\\w+\\-\\d+$",variants:[{hostname:"geo.{region}.amazonaws.com.cn",tags:[]},{hostname:"geo-fips.{region}.amazonaws.com.cn",tags:["fips"]},{hostname:"geo-fips.{region}.api.amazonwebservices.com.cn",tags:["dualstack","fips"]},{hostname:"geo.{region}.api.amazonwebservices.com.cn",tags:["dualstack"]}]},"aws-iso":{regions:["us-iso-east-1","us-iso-west-1"],regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",variants:[{hostname:"geo.{region}.c2s.ic.gov",tags:[]},{hostname:"geo-fips.{region}.c2s.ic.gov",tags:["fips"]}]},"aws-iso-b":{regions:["us-isob-east-1"],regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",variants:[{hostname:"geo.{region}.sc2s.sgov.gov",tags:[]},{hostname:"geo-fips.{region}.sc2s.sgov.gov",tags:["fips"]}]},"aws-us-gov":{regions:["us-gov-east-1","us-gov-west-1"],regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",variants:[{hostname:"geo.{region}.amazonaws.com",tags:[]},{hostname:"geo-fips.{region}.amazonaws.com",tags:["fips"]},{hostname:"geo-fips.{region}.api.aws",tags:["dualstack","fips"]},{hostname:"geo.{region}.api.aws",tags:["dualstack"]}]}},gn=function(e,t){return o(void 0,void 0,void 0,function(){return s(this,function(n){return[2,B(e,N(N({},t),{signingService:"geo",regionHash:hn,partitionHash:vn}))]})})},yn=n(98),mn=function(e){var t,n,r,i,a,u,c,l,d,f,p,h,y,m,b,w,_=Object(yn.a)(e),S=function(){return _().then($t)},E=function(e){var t,n,r,i,o;return{apiVersion:"2020-11-19",disableHostPrefix:null!==(t=null==e?void 0:e.disableHostPrefix)&&void 0!==t&&t,logger:null!==(n=null==e?void 0:e.logger)&&void 0!==n?n:{},regionInfoProvider:null!==(r=null==e?void 0:e.regionInfoProvider)&&void 0!==r?r:gn,serviceId:null!==(i=null==e?void 0:e.serviceId)&&void 0!==i?i:"Location",urlParser:null!==(o=null==e?void 0:e.urlParser)&&void 0!==o?o:pn}}(e);return N(N(N({},E),e),{runtime:"browser",defaultsMode:_,base64Decoder:null!==(t=null==e?void 0:e.base64Decoder)&&void 0!==t?t:v,base64Encoder:null!==(n=null==e?void 0:e.base64Encoder)&&void 0!==n?n:g,bodyLengthChecker:null!==(r=null==e?void 0:e.bodyLengthChecker)&&void 0!==r?r:an,credentialDefaultProvider:null!==(i=null==e?void 0:e.credentialDefaultProvider)&&void 0!==i?i:function(e){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:null!==(a=null==e?void 0:e.defaultUserAgentProvider)&&void 0!==a?a:ln({serviceId:E.serviceId,clientVersion:Jt.version}),maxAttempts:null!==(u=null==e?void 0:e.maxAttempts)&&void 0!==u?u:3,region:null!==(c=null==e?void 0:e.region)&&void 0!==c?c:(w="Region is missing",function(){return Promise.reject(w)}),requestHandler:null!==(l=null==e?void 0:e.requestHandler)&&void 0!==l?l:new Zt(S),retryMode:null!==(d=null==e?void 0:e.retryMode)&&void 0!==d?d:function(){return o(void 0,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,S()];case 1:return[2,e.sent().retryMode||Z]}})})},sha256:null!==(f=null==e?void 0:e.sha256)&&void 0!==f?f:Yt.Sha256,streamCollector:null!==(p=null==e?void 0:e.streamCollector)&&void 0!==p?p:sn,useDualstackEndpoint:null!==(h=null==e?void 0:e.useDualstackEndpoint)&&void 0!==h?h:function(){return Promise.resolve(!1)},useFipsEndpoint:null!==(y=null==e?void 0:e.useFipsEndpoint)&&void 0!==y?y:function(){return Promise.resolve(!1)},utf8Decoder:null!==(m=null==e?void 0:e.utf8Decoder)&&void 0!==m?m:dn,utf8Encoder:null!==(b=null==e?void 0:e.utf8Encoder)&&void 0!==b?b:fn})},bn=function(e){function t(t){var n,r,i,a=this,c=function(e){var t=e.region,n=e.useFipsEndpoint;if(!t)throw new Error("Region is missing");return N(N({},e),{region:function(){return o(void 0,void 0,void 0,function(){var e;return s(this,function(n){switch(n.label){case 0:return"string"==typeof t?[2,U(t)]:[4,t()];case 1:return e=n.sent(),[2,U(e)]}})})},useFipsEndpoint:function(){return o(void 0,void 0,void 0,function(){var e;return s(this,function(r){switch(r.label){case 0:return"string"!=typeof t?[3,1]:(e=t,[3,3]);case 1:return[4,t()];case 2:e=r.sent(),r.label=3;case 3:return R(e)?[2,!0]:[2,"boolean"==typeof n?Promise.resolve(n):n()]}})})}})}(mn(t)),l=j(c),d=function(e){return N(N({},e),{customUserAgent:"string"==typeof e.customUserAgent?[[e.customUserAgent]]:e.customUserAgent})}(function(e){var t,n=e.credentials?He(e.credentials):e.credentialDefaultProvider(e),r=e.signingEscapePath,i=void 0===r||r,a=e.systemClockOffset,c=void 0===a?e.systemClockOffset||0:a,l=e.sha256;return t=e.signer?Object(L.a)(e.signer):e.regionInfoProvider?function(){return Object(L.a)(e.region)().then(function(t){return o(void 0,void 0,void 0,function(){var n,r,i,o;return s(this,function(s){switch(s.label){case 0:return r=(n=e).regionInfoProvider,i=[t],o={},[4,e.useFipsEndpoint()];case 1:return o.useFipsEndpoint=s.sent(),[4,e.useDualstackEndpoint()];case 2:return[4,r.apply(n,i.concat([(o.useDualstackEndpoint=s.sent(),o)]))];case 3:return[2,[s.sent()||{},t]]}})})}).then(function(t){var r=u(t,2),o=r[0],s=r[1],a=o.signingRegion,c=o.signingService;e.signingRegion=e.signingRegion||a||s,e.signingName=e.signingName||c||e.serviceId;var d=N(N({},e),{credentials:n,region:e.signingRegion,service:e.signingName,sha256:l,uriEscapePath:i});return new(e.signerConstructor||Ve)(d)})}:function(t){return o(void 0,void 0,void 0,function(){var r,o,a;return s(this,function(s){if(!t)throw new Error("Unexpected empty auth scheme config");return r=t.signingScope,o=t.signingName,e.signingRegion=e.signingRegion||r,e.signingName=e.signingName||o||e.serviceId,a=N(N({},e),{credentials:n,region:e.signingRegion,service:e.signingName,sha256:l,uriEscapePath:i}),[2,new(e.signerConstructor||Ve)(a)]})})},N(N({},e),{systemClockOffset:c,signingEscapePath:i,credentials:n,signer:t})}((n=l,i=Object(L.a)(null!==(r=n.maxAttempts)&&void 0!==r?r:3),N(N({},n),{maxAttempts:i,retryStrategy:function(){return o(void 0,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return n.retryStrategy?[2,n.retryStrategy]:[4,Object(L.a)(n.retryMode)()];case 1:return e.sent()===M.ADAPTIVE?[2,new ye(i)]:[2,new he(i)]}})})}}))));return(a=e.call(this,d)||this).config=d,a.middlewareStack.use(be(a.config)),a.middlewareStack.use($(a.config)),a.middlewareStack.use(G(a.config)),a.middlewareStack.use(H(a.config)),a.middlewareStack.use(Object(J.a)(a.config)),a.middlewareStack.use(Qe(a.config)),a.middlewareStack.use(rt(a.config)),a}return r(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(at),wn={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},_n={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0},Sn=function(e){function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r}return r(t,e),t}(Bt),En=function(e){function t(n){var r=e.call(this,N({name:"AccessDeniedException",$fault:"client"},n))||this;return r.name="AccessDeniedException",r.$fault="client",Object.setPrototypeOf(r,t.prototype),r.Message=n.Message,r}return r(t,e),t}(Sn),Cn=(function(e){function t(n){var r=e.call(this,N({name:"ConflictException",$fault:"client"},n))||this;return r.name="ConflictException",r.$fault="client",Object.setPrototypeOf(r,t.prototype),r.Message=n.Message,r}r(t,e)}(Sn),function(e){function t(n){var r=e.call(this,N({name:"InternalServerException",$fault:"server"},n))||this;return r.name="InternalServerException",r.$fault="server",r.$retryable={},Object.setPrototypeOf(r,t.prototype),r.Message=n.Message,r}return r(t,e),t}(Sn)),An=function(e){function t(n){var r=e.call(this,N({name:"ResourceNotFoundException",$fault:"client"},n))||this;return r.name="ResourceNotFoundException",r.$fault="client",Object.setPrototypeOf(r,t.prototype),r.Message=n.Message,r}return r(t,e),t}(Sn),On=(function(e){function t(n){var r=e.call(this,N({name:"ServiceQuotaExceededException",$fault:"client"},n))||this;return r.name="ServiceQuotaExceededException",r.$fault="client",Object.setPrototypeOf(r,t.prototype),r.Message=n.Message,r}r(t,e)}(Sn),function(e){function t(n){var r=e.call(this,N({name:"ThrottlingException",$fault:"client"},n))||this;return r.name="ThrottlingException",r.$fault="client",r.$retryable={},Object.setPrototypeOf(r,t.prototype),r.Message=n.Message,r}return r(t,e),t}(Sn)),In=function(e){function t(n){var r=e.call(this,N({name:"ValidationException",$fault:"client"},n))||this;return r.name="ValidationException",r.$fault="client",Object.setPrototypeOf(r,t.prototype),r.Message=n.Message,r.Reason=n.Reason,r.FieldList=n.FieldList,r}return r(t,e),t}(Sn),xn=function(e){return N({},e)},Tn=function(e){return N({},e)},Pn=function(e){return N(N(N({},e),e.Polygon&&{Polygon:e.Polygon.map(function(e){return ct})}),e.Circle&&{Circle:ct})},kn=function(e){return N(N({},e),e.Entries&&{Entries:e.Entries.map(function(e){return function(e){return N(N({},e),e.Geometry&&{Geometry:Pn(e.Geometry)})}(e)})})},Dn=function(e){return N({},e)},Nn=function(e){return N({},e)},Mn=function(e){return N(N({},e),e.Geometry&&{Geometry:Pn(e.Geometry)})},Ln=function(e){return N({},e)},jn=function(e){return N(N({},e),e.Entries&&{Entries:e.Entries.map(function(e){return function(e){return N(N({},e),e.Geometry&&{Geometry:Pn(e.Geometry)})}(e)})})},Rn=function(e){return N({},e)},Un=function(e){return N(N({},e),e.Point&&{Point:ct})},Fn=function(e){return N(N({},e),e.Geometry&&{Geometry:Un(e.Geometry)})},Bn=function(e){return N(N({},e),e.Place&&{Place:Fn(e.Place)})},zn=function(e){return N(N({},e),e.Position&&{Position:ct})},qn=function(e){return N(N({},e),e.Position&&{Position:ct})},Kn=function(e){return N(N(N({},e),e.Summary&&{Summary:qn(e.Summary)}),e.Results&&{Results:e.Results.map(function(e){return function(e){return N(N({},e),e.Place&&{Place:Fn(e.Place)})}(e)})})},$n=function(e){return N(N(N(N({},e),e.Text&&{Text:ct}),e.BiasPosition&&{BiasPosition:ct}),e.FilterBBox&&{FilterBBox:ct})},Vn=function(e){return N(N(N(N({},e),e.Text&&{Text:ct}),e.BiasPosition&&{BiasPosition:ct}),e.FilterBBox&&{FilterBBox:ct})},Gn=function(e){return N(N({},e),e.Summary&&{Summary:Vn(e.Summary)})},Wn=function(e){return N(N(N(N({},e),e.Text&&{Text:ct}),e.BiasPosition&&{BiasPosition:ct}),e.FilterBBox&&{FilterBBox:ct})},Hn=function(e){return N(N(N(N(N({},e),e.Text&&{Text:ct}),e.BiasPosition&&{BiasPosition:ct}),e.FilterBBox&&{FilterBBox:ct}),e.ResultBBox&&{ResultBBox:ct})},Jn=function(e){return N(N(N({},e),e.Summary&&{Summary:Hn(e.Summary)}),e.Results&&{Results:e.Results.map(function(e){return function(e){return N(N({},e),e.Place&&{Place:Fn(e.Place)})}(e)})})},Yn=function(e,t){return o(void 0,void 0,void 0,function(){var n,r,i,o,a;return s(this,function(s){switch(s.label){case 0:return r=[N({},e)],a={},[4,qr(e.body,t)];case 1:switch(n=N.apply(void 0,r.concat([(a.body=s.sent(),a)])),i=Kr(e,n.body)){case"AccessDeniedException":case"com.amazonaws.location#AccessDeniedException":return[3,2];case"InternalServerException":case"com.amazonaws.location#InternalServerException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.location#ResourceNotFoundException":return[3,6];case"ThrottlingException":case"com.amazonaws.location#ThrottlingException":return[3,8];case"ValidationException":case"com.amazonaws.location#ValidationException":return[3,10]}return[3,12];case 2:return[4,or(n,t)];case 3:throw s.sent();case 4:return[4,sr(n,t)];case 5:throw s.sent();case 6:return[4,ar(n,t)];case 7:throw s.sent();case 8:return[4,ur(n,t)];case 9:throw s.sent();case 10:return[4,cr(n,t)];case 11:throw s.sent();case 12:o=n.body,qt({output:e,parsedBody:o,exceptionCtor:Sn,errorCode:i}),s.label=13;case 13:return[2]}})})},Zn=function(e,t){return o(void 0,void 0,void 0,function(){var n,r,i,o,a;return s(this,function(s){switch(s.label){case 0:return r=[N({},e)],a={},[4,qr(e.body,t)];case 1:switch(n=N.apply(void 0,r.concat([(a.body=s.sent(),a)])),i=Kr(e,n.body)){case"AccessDeniedException":case"com.amazonaws.location#AccessDeniedException":return[3,2];case"InternalServerException":case"com.amazonaws.location#InternalServerException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.location#ResourceNotFoundException":return[3,6];case"ThrottlingException":case"com.amazonaws.location#ThrottlingException":return[3,8];case"ValidationException":case"com.amazonaws.location#ValidationException":return[3,10]}return[3,12];case 2:return[4,or(n,t)];case 3:throw s.sent();case 4:return[4,sr(n,t)];case 5:throw s.sent();case 6:return[4,ar(n,t)];case 7:throw s.sent();case 8:return[4,ur(n,t)];case 9:throw s.sent();case 10:return[4,cr(n,t)];case 11:throw s.sent();case 12:o=n.body,qt({output:e,parsedBody:o,exceptionCtor:Sn,errorCode:i}),s.label=13;case 13:return[2]}})})},Xn=function(e,t){return o(void 0,void 0,void 0,function(){var n,r,i,o,a;return s(this,function(s){switch(s.label){case 0:return r=[N({},e)],a={},[4,qr(e.body,t)];case 1:switch(n=N.apply(void 0,r.concat([(a.body=s.sent(),a)])),i=Kr(e,n.body)){case"AccessDeniedException":case"com.amazonaws.location#AccessDeniedException":return[3,2];case"InternalServerException":case"com.amazonaws.location#InternalServerException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.location#ResourceNotFoundException":return[3,6];case"ThrottlingException":case"com.amazonaws.location#ThrottlingException":return[3,8];case"ValidationException":case"com.amazonaws.location#ValidationException":return[3,10]}return[3,12];case 2:return[4,or(n,t)];case 3:throw s.sent();case 4:return[4,sr(n,t)];case 5:throw s.sent();case 6:return[4,ar(n,t)];case 7:throw s.sent();case 8:return[4,ur(n,t)];case 9:throw s.sent();case 10:return[4,cr(n,t)];case 11:throw s.sent();case 12:o=n.body,qt({output:e,parsedBody:o,exceptionCtor:Sn,errorCode:i}),s.label=13;case 13:return[2]}})})},Qn=function(e,t){return o(void 0,void 0,void 0,function(){var n,r,i,o,a;return s(this,function(s){switch(s.label){case 0:return r=[N({},e)],a={},[4,qr(e.body,t)];case 1:switch(n=N.apply(void 0,r.concat([(a.body=s.sent(),a)])),i=Kr(e,n.body)){case"AccessDeniedException":case"com.amazonaws.location#AccessDeniedException":return[3,2];case"InternalServerException":case"com.amazonaws.location#InternalServerException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.location#ResourceNotFoundException":return[3,6];case"ThrottlingException":case"com.amazonaws.location#ThrottlingException":return[3,8];case"ValidationException":case"com.amazonaws.location#ValidationException":return[3,10]}return[3,12];case 2:return[4,or(n,t)];case 3:throw s.sent();case 4:return[4,sr(n,t)];case 5:throw s.sent();case 6:return[4,ar(n,t)];case 7:throw s.sent();case 8:return[4,ur(n,t)];case 9:throw s.sent();case 10:return[4,cr(n,t)];case 11:throw s.sent();case 12:o=n.body,qt({output:e,parsedBody:o,exceptionCtor:Sn,errorCode:i}),s.label=13;case 13:return[2]}})})},er=function(e,t){return o(void 0,void 0,void 0,function(){var n,r,i,o,a;return s(this,function(s){switch(s.label){case 0:return r=[N({},e)],a={},[4,qr(e.body,t)];case 1:switch(n=N.apply(void 0,r.concat([(a.body=s.sent(),a)])),i=Kr(e,n.body)){case"AccessDeniedException":case"com.amazonaws.location#AccessDeniedException":return[3,2];case"InternalServerException":case"com.amazonaws.location#InternalServerException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.location#ResourceNotFoundException":return[3,6];case"ThrottlingException":case"com.amazonaws.location#ThrottlingException":return[3,8];case"ValidationException":case"com.amazonaws.location#ValidationException":return[3,10]}return[3,12];case 2:return[4,or(n,t)];case 3:throw s.sent();case 4:return[4,sr(n,t)];case 5:throw s.sent();case 6:return[4,ar(n,t)];case 7:throw s.sent();case 8:return[4,ur(n,t)];case 9:throw s.sent();case 10:return[4,cr(n,t)];case 11:throw s.sent();case 12:o=n.body,qt({output:e,parsedBody:o,exceptionCtor:Sn,errorCode:i}),s.label=13;case 13:return[2]}})})},tr=function(e,t){return o(void 0,void 0,void 0,function(){var n,r,i,o,a;return s(this,function(s){switch(s.label){case 0:return r=[N({},e)],a={},[4,qr(e.body,t)];case 1:switch(n=N.apply(void 0,r.concat([(a.body=s.sent(),a)])),i=Kr(e,n.body)){case"AccessDeniedException":case"com.amazonaws.location#AccessDeniedException":return[3,2];case"InternalServerException":case"com.amazonaws.location#InternalServerException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.location#ResourceNotFoundException":return[3,6];case"ThrottlingException":case"com.amazonaws.location#ThrottlingException":return[3,8];case"ValidationException":
case"com.amazonaws.location#ValidationException":return[3,10]}return[3,12];case 2:return[4,or(n,t)];case 3:throw s.sent();case 4:return[4,sr(n,t)];case 5:throw s.sent();case 6:return[4,ar(n,t)];case 7:throw s.sent();case 8:return[4,ur(n,t)];case 9:throw s.sent();case 10:return[4,cr(n,t)];case 11:throw s.sent();case 12:o=n.body,qt({output:e,parsedBody:o,exceptionCtor:Sn,errorCode:i}),s.label=13;case 13:return[2]}})})},nr=function(e,t){return o(void 0,void 0,void 0,function(){var n,r,i,o,a;return s(this,function(s){switch(s.label){case 0:return r=[N({},e)],a={},[4,qr(e.body,t)];case 1:switch(n=N.apply(void 0,r.concat([(a.body=s.sent(),a)])),i=Kr(e,n.body)){case"AccessDeniedException":case"com.amazonaws.location#AccessDeniedException":return[3,2];case"InternalServerException":case"com.amazonaws.location#InternalServerException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.location#ResourceNotFoundException":return[3,6];case"ThrottlingException":case"com.amazonaws.location#ThrottlingException":return[3,8];case"ValidationException":case"com.amazonaws.location#ValidationException":return[3,10]}return[3,12];case 2:return[4,or(n,t)];case 3:throw s.sent();case 4:return[4,sr(n,t)];case 5:throw s.sent();case 6:return[4,ar(n,t)];case 7:throw s.sent();case 8:return[4,ur(n,t)];case 9:throw s.sent();case 10:return[4,cr(n,t)];case 11:throw s.sent();case 12:o=n.body,qt({output:e,parsedBody:o,exceptionCtor:Sn,errorCode:i}),s.label=13;case 13:return[2]}})})},rr=function(e,t){return o(void 0,void 0,void 0,function(){var n,r,i,o,a;return s(this,function(s){switch(s.label){case 0:return r=[N({},e)],a={},[4,qr(e.body,t)];case 1:switch(n=N.apply(void 0,r.concat([(a.body=s.sent(),a)])),i=Kr(e,n.body)){case"AccessDeniedException":case"com.amazonaws.location#AccessDeniedException":return[3,2];case"InternalServerException":case"com.amazonaws.location#InternalServerException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.location#ResourceNotFoundException":return[3,6];case"ThrottlingException":case"com.amazonaws.location#ThrottlingException":return[3,8];case"ValidationException":case"com.amazonaws.location#ValidationException":return[3,10]}return[3,12];case 2:return[4,or(n,t)];case 3:throw s.sent();case 4:return[4,sr(n,t)];case 5:throw s.sent();case 6:return[4,ar(n,t)];case 7:throw s.sent();case 8:return[4,ur(n,t)];case 9:throw s.sent();case 10:return[4,cr(n,t)];case 11:throw s.sent();case 12:o=n.body,qt({output:e,parsedBody:o,exceptionCtor:Sn,errorCode:i}),s.label=13;case 13:return[2]}})})},ir=h,or=function(e,t){return o(void 0,void 0,void 0,function(){var t,n,r;return s(this,function(i){return t=ir({}),null!=(n=e.body).message&&(t.Message=St(n.message)),r=new En(N({$metadata:Fr(e)},t)),[2,zt(r,e.body)]})})},sr=function(e,t){return o(void 0,void 0,void 0,function(){var t,n,r;return s(this,function(i){return t=ir({}),null!=(n=e.body).message&&(t.Message=St(n.message)),r=new Cn(N({$metadata:Fr(e)},t)),[2,zt(r,e.body)]})})},ar=function(e,t){return o(void 0,void 0,void 0,function(){var t,n,r;return s(this,function(i){return t=ir({}),null!=(n=e.body).message&&(t.Message=St(n.message)),r=new An(N({$metadata:Fr(e)},t)),[2,zt(r,e.body)]})})},ur=function(e,t){return o(void 0,void 0,void 0,function(){var t,n,r;return s(this,function(i){return t=ir({}),null!=(n=e.body).message&&(t.Message=St(n.message)),r=new On(N({$metadata:Fr(e)},t)),[2,zt(r,e.body)]})})},cr=function(e,t){return o(void 0,void 0,void 0,function(){var n,r,i;return s(this,function(o){return n=ir({}),null!=(r=e.body).fieldList&&(n.FieldList=Ur(r.fieldList,t)),null!=r.message&&(n.Message=St(r.message)),null!=r.reason&&(n.Reason=St(r.reason)),i=new In(N({$metadata:Fr(e)},n)),[2,zt(i,e.body)]})})},lr=function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return function(e,t){return N(N({},null!=e.GeofenceId&&{GeofenceId:e.GeofenceId}),null!=e.Geometry&&{Geometry:hr(e.Geometry,t)})}(e,t)})},dr=function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return Ht(e)})},fr=function(e,t){return N(N({},null!=e.Center&&{Center:yr(e.Center,t)}),null!=e.Radius&&{Radius:Ht(e.Radius)})},pr=function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return e})},hr=function(e,t){return N(N({},null!=e.Circle&&{Circle:fr(e.Circle,t)}),null!=e.Polygon&&{Polygon:gr(e.Polygon,t)})},vr=function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return e})},gr=function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return yr(e,t)})}(e,t)})},yr=function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return Ht(e)})},mr=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:function(e,t){return{Error:null!=e.Error?br(e.Error,t):void 0,GeofenceId:St(e.GeofenceId)}}(e,t)})},br=function(e,t){return{Code:St(e.Code),Message:St(e.Message)}},wr=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:function(e,t){return{Error:null!=e.Error?br(e.Error,t):void 0,GeofenceId:St(e.GeofenceId)}}(e,t)})},_r=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:function(e,t){return{CreateTime:null!=e.CreateTime?wt(Dt(e.CreateTime)):void 0,GeofenceId:St(e.GeofenceId),UpdateTime:null!=e.UpdateTime?wt(Dt(e.UpdateTime)):void 0}}(e)})},Sr=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:At(e)})},Er=function(e,t){return{Center:null!=e.Center?Pr(e.Center,t):void 0,Radius:At(e.Radius)}},Cr=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:St(e)})},Ar=function(e,t){return{Circle:null!=e.Circle?Er(e.Circle,t):void 0,Polygon:null!=e.Polygon?Or(e.Polygon,t):void 0}},Or=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:Pr(e,t)})}(e,t)})},Ir=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:function(e,t){return{CreateTime:null!=e.CreateTime?wt(Dt(e.CreateTime)):void 0,GeofenceId:St(e.GeofenceId),Geometry:null!=e.Geometry?Ar(e.Geometry,t):void 0,Status:St(e.Status),UpdateTime:null!=e.UpdateTime?wt(Dt(e.UpdateTime)):void 0}}(e,t)})},xr=function(e,t){return{AddressNumber:St(e.AddressNumber),Country:St(e.Country),Geometry:null!=e.Geometry?Tr(e.Geometry,t):void 0,Interpolated:lt(e.Interpolated),Label:St(e.Label),Municipality:St(e.Municipality),Neighborhood:St(e.Neighborhood),PostalCode:St(e.PostalCode),Region:St(e.Region),Street:St(e.Street),SubRegion:St(e.SubRegion),TimeZone:null!=e.TimeZone?Rr(e.TimeZone,t):void 0,UnitNumber:St(e.UnitNumber),UnitType:St(e.UnitType)}},Tr=function(e,t){return{Point:null!=e.Point?Pr(e.Point,t):void 0}},Pr=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:At(e)})},kr=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:function(e,t){return{Distance:At(e.Distance),Place:null!=e.Place?xr(e.Place,t):void 0,PlaceId:St(e.PlaceId)}}(e,t)})},Dr=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:function(e,t){return{PlaceId:St(e.PlaceId),Text:St(e.Text)}}(e)})},Nr=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:function(e,t){return{Distance:At(e.Distance),Place:null!=e.Place?xr(e.Place,t):void 0,PlaceId:St(e.PlaceId),Relevance:At(e.Relevance)}}(e,t)})},Mr=function(e,t){return{DataSource:St(e.DataSource),Language:St(e.Language),MaxResults:vt(e.MaxResults),Position:null!=e.Position?Pr(e.Position,t):void 0}},Lr=function(e,t){return{BiasPosition:null!=e.BiasPosition?Pr(e.BiasPosition,t):void 0,DataSource:St(e.DataSource),FilterBBox:null!=e.FilterBBox?Sr(e.FilterBBox):void 0,FilterCountries:null!=e.FilterCountries?Cr(e.FilterCountries):void 0,Language:St(e.Language),MaxResults:vt(e.MaxResults),Text:St(e.Text)}},jr=function(e,t){return{BiasPosition:null!=e.BiasPosition?Pr(e.BiasPosition,t):void 0,DataSource:St(e.DataSource),FilterBBox:null!=e.FilterBBox?Sr(e.FilterBBox):void 0,FilterCountries:null!=e.FilterCountries?Cr(e.FilterCountries):void 0,Language:St(e.Language),MaxResults:vt(e.MaxResults),ResultBBox:null!=e.ResultBBox?Sr(e.ResultBBox):void 0,Text:St(e.Text)}},Rr=function(e,t){return{Name:St(e.Name),Offset:vt(e.Offset)}},Ur=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:function(e,t){return{Message:St(e.message),Name:St(e.name)}}(e)})},Fr=function(e){var t,n;return{httpStatusCode:e.statusCode,requestId:null!==(n=null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"])&&void 0!==n?n:e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},Br=function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)},zr=function(e,t){return function(e,t){return Br(e,t).then(function(e){return t.utf8Encoder(e)})}(e,t).then(function(e){return e.length?JSON.parse(e):{}})},qr=function(e,t){return o(void 0,void 0,void 0,function(){var n,r;return s(this,function(i){switch(i.label){case 0:return[4,zr(e,t)];case 1:return(n=i.sent()).message=null!==(r=n.message)&&void 0!==r?r:n.Message,[2,n]}})})},Kr=function(e,t){var n,r,i=function(e){var t=e;return"number"==typeof t&&(t=t.toString()),t.indexOf(",")>=0&&(t=t.split(",")[0]),t.indexOf(":")>=0&&(t=t.split(":")[0]),t.indexOf("#")>=0&&(t=t.split("#")[1]),t},o=(n=e.headers,r="x-amzn-errortype",Object.keys(n).find(function(e){return e.toLowerCase()===r.toLowerCase()}));return void 0!==o?i(e.headers[o]):void 0!==t.code?i(t.code):void 0!==t.__type?i(t.__type):void 0},$r=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return r(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(m(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"LocationClient",commandName:"SearchPlaceIndexForTextCommand",inputFilterSensitiveLog:Wn,outputFilterSensitiveLog:Jn},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},i)},t.prototype.serialize=function(e,t){return function(e,t){return o(void 0,void 0,void 0,function(){var n,r,i,o,a,u,c,d,f;return s(this,function(s){switch(s.label){case 0:return[4,t.endpoint()];case 1:return(n=s.sent()).hostname,r=n.protocol,i=void 0===r?"https":r,o=n.port,a=n.path,u={"content-type":"application/json"},c="".concat((null==a?void 0:a.endsWith("/"))?a.slice(0,-1):a||"")+"/places/v0/indexes/{IndexName}/search/text",c=Wt(c,e,"IndexName",function(){return e.IndexName},"{IndexName}",!1),d=JSON.stringify(N(N(N(N(N(N({},null!=e.BiasPosition&&{BiasPosition:yr(e.BiasPosition,t)}),null!=e.FilterBBox&&{FilterBBox:dr(e.FilterBBox,t)}),null!=e.FilterCountries&&{FilterCountries:pr(e.FilterCountries,t)}),null!=e.Language&&{Language:e.Language}),null!=e.MaxResults&&{MaxResults:e.MaxResults}),null!=e.Text&&{Text:e.Text})),[4,t.endpoint()];case 2:if(f=s.sent().hostname,!0!==t.disableHostPrefix&&!l(f="places."+f))throw new Error("ValidationError: prefixed hostname must be hostname compatible.");return[2,new z({protocol:i,hostname:f,port:o,method:"POST",headers:u,path:c,body:d})]}})})}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return o(void 0,void 0,void 0,function(){var n,r,i,o;return s(this,function(s){switch(s.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,rr(e,t)]:(n=ir({$metadata:Fr(e)}),i=wt,o=_t,[4,zr(e.body,t)]);case 1:return null!=(r=i.apply(void 0,[o.apply(void 0,[s.sent()]),"body"])).Results&&(n.Results=Nr(r.Results,t)),null!=r.Summary&&(n.Summary=jr(r.Summary,t)),[2,n]}})})}(e,t)},t}(ut),Vr=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return r(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(m(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"LocationClient",commandName:"SearchPlaceIndexForSuggestionsCommand",inputFilterSensitiveLog:$n,outputFilterSensitiveLog:Gn},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},i)},t.prototype.serialize=function(e,t){return function(e,t){return o(void 0,void 0,void 0,function(){var n,r,i,o,a,u,c,d,f;return s(this,function(s){switch(s.label){case 0:return[4,t.endpoint()];case 1:return(n=s.sent()).hostname,r=n.protocol,i=void 0===r?"https":r,o=n.port,a=n.path,u={"content-type":"application/json"},c="".concat((null==a?void 0:a.endsWith("/"))?a.slice(0,-1):a||"")+"/places/v0/indexes/{IndexName}/search/suggestions",c=Wt(c,e,"IndexName",function(){return e.IndexName},"{IndexName}",!1),d=JSON.stringify(N(N(N(N(N(N({},null!=e.BiasPosition&&{BiasPosition:yr(e.BiasPosition,t)}),null!=e.FilterBBox&&{FilterBBox:dr(e.FilterBBox,t)}),null!=e.FilterCountries&&{FilterCountries:pr(e.FilterCountries,t)}),null!=e.Language&&{Language:e.Language}),null!=e.MaxResults&&{MaxResults:e.MaxResults}),null!=e.Text&&{Text:e.Text})),[4,t.endpoint()];case 2:if(f=s.sent().hostname,!0!==t.disableHostPrefix&&!l(f="places."+f))throw new Error("ValidationError: prefixed hostname must be hostname compatible.");return[2,new z({protocol:i,hostname:f,port:o,method:"POST",headers:u,path:c,body:d})]}})})}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return o(void 0,void 0,void 0,function(){var n,r,i,o;return s(this,function(s){switch(s.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,nr(e,t)]:(n=ir({$metadata:Fr(e)}),i=wt,o=_t,[4,zr(e.body,t)]);case 1:return null!=(r=i.apply(void 0,[o.apply(void 0,[s.sent()]),"body"])).Results&&(n.Results=Dr(r.Results,t)),null!=r.Summary&&(n.Summary=Lr(r.Summary,t)),[2,n]}})})}(e,t)},t}(ut),Gr=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return r(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(m(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"LocationClient",commandName:"GetPlaceCommand",inputFilterSensitiveLog:Rn,outputFilterSensitiveLog:Bn},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},i)},t.prototype.serialize=function(e,t){return function(e,t){return o(void 0,void 0,void 0,function(){var n,r,i,o,a,u,c,d,f;return s(this,function(s){switch(s.label){case 0:return[4,t.endpoint()];case 1:return(n=s.sent()).hostname,r=n.protocol,i=void 0===r?"https":r,o=n.port,a=n.path,u={},c="".concat((null==a?void 0:a.endsWith("/"))?a.slice(0,-1):a||"")+"/places/v0/indexes/{IndexName}/places/{PlaceId}",c=Wt(c,e,"IndexName",function(){return e.IndexName},"{IndexName}",!1),c=Wt(c,e,"PlaceId",function(){return e.PlaceId},"{PlaceId}",!1),d=ir({language:[,e.Language]}),[4,t.endpoint()];case 2:if(f=s.sent().hostname,!0!==t.disableHostPrefix&&!l(f="places."+f))throw new Error("ValidationError: prefixed hostname must be hostname compatible.");return[2,new z({protocol:i,hostname:f,port:o,method:"GET",headers:u,path:c,query:d,body:void 0})]}})})}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return o(void 0,void 0,void 0,function(){var n,r,i,o;return s(this,function(s){switch(s.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Qn(e,t)]:(n=ir({$metadata:Fr(e)}),i=wt,o=_t,[4,zr(e.body,t)]);case 1:return null!=(r=i.apply(void 0,[o.apply(void 0,[s.sent()]),"body"])).Place&&(n.Place=xr(r.Place,t)),[2,n]}})})}(e,t)},t}(ut),Wr=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return r(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(m(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"LocationClient",commandName:"SearchPlaceIndexForPositionCommand",inputFilterSensitiveLog:zn,outputFilterSensitiveLog:Kn},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},i)},t.prototype.serialize=function(e,t){return function(e,t){return o(void 0,void 0,void 0,function(){var n,r,i,o,a,u,c,d,f;return s(this,function(s){switch(s.label){case 0:return[4,t.endpoint()];case 1:return(n=s.sent()).hostname,r=n.protocol,i=void 0===r?"https":r,o=n.port,a=n.path,u={"content-type":"application/json"},c="".concat((null==a?void 0:a.endsWith("/"))?a.slice(0,-1):a||"")+"/places/v0/indexes/{IndexName}/search/position",c=Wt(c,e,"IndexName",function(){return e.IndexName},"{IndexName}",!1),d=JSON.stringify(N(N(N({},null!=e.Language&&{Language:e.Language}),null!=e.MaxResults&&{MaxResults:e.MaxResults}),null!=e.Position&&{Position:yr(e.Position,t)})),[4,t.endpoint()];case 2:if(f=s.sent().hostname,!0!==t.disableHostPrefix&&!l(f="places."+f))throw new Error("ValidationError: prefixed hostname must be hostname compatible.");return[2,new z({protocol:i,hostname:f,port:o,method:"POST",headers:u,path:c,body:d})]}})})}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return o(void 0,void 0,void 0,function(){var n,r,i,o;return s(this,function(s){switch(s.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,tr(e,t)]:(n=ir({$metadata:Fr(e)}),i=wt,o=_t,[4,zr(e.body,t)]);case 1:return null!=(r=i.apply(void 0,[o.apply(void 0,[s.sent()]),"body"])).Results&&(n.Results=kr(r.Results,t)),null!=r.Summary&&(n.Summary=Mr(r.Summary,t)),[2,n]}})})}(e,t)},t}(ut),Hr=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return r(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(m(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"LocationClient",commandName:"GetGeofenceCommand",inputFilterSensitiveLog:Nn,outputFilterSensitiveLog:Mn},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},i)},t.prototype.serialize=function(e,t){return function(e,t){return o(void 0,void 0,void 0,function(){var n,r,i,o,a,u,c,d;return s(this,function(s){switch(s.label){case 0:return[4,t.endpoint()];case 1:return(n=s.sent()).hostname,r=n.protocol,i=void 0===r?"https":r,o=n.port,a=n.path,u={},c="".concat((null==a?void 0:a.endsWith("/"))?a.slice(0,-1):a||"")+"/geofencing/v0/collections/{CollectionName}/geofences/{GeofenceId}",c=Wt(c,e,"CollectionName",function(){return e.CollectionName},"{CollectionName}",!1),c=Wt(c,e,"GeofenceId",function(){return e.GeofenceId},"{GeofenceId}",!1),[4,t.endpoint()];case 2:if(d=s.sent().hostname,!0!==t.disableHostPrefix&&!l(d="geofencing."+d))throw new Error("ValidationError: prefixed hostname must be hostname compatible.");return[2,new z({protocol:i,hostname:d,port:o,method:"GET",headers:u,path:c,body:void 0})]}})})}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return o(void 0,void 0,void 0,function(){var n,r,i,o;return s(this,function(s){switch(s.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Xn(e,t)]:(n=ir({$metadata:Fr(e)}),i=wt,o=_t,[4,zr(e.body,t)]);case 1:return null!=(r=i.apply(void 0,[o.apply(void 0,[s.sent()]),"body"])).CreateTime&&(n.CreateTime=wt(Dt(r.CreateTime))),null!=r.GeofenceId&&(n.GeofenceId=St(r.GeofenceId)),null!=r.Geometry&&(n.Geometry=Ar(r.Geometry,t)),null!=r.Status&&(n.Status=St(r.Status)),null!=r.UpdateTime&&(n.UpdateTime=wt(Dt(r.UpdateTime))),[2,n]}})})}(e,t)},t}(ut),Jr=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return r(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(m(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"LocationClient",commandName:"ListGeofencesCommand",inputFilterSensitiveLog:Ln,outputFilterSensitiveLog:jn},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},i)},t.prototype.serialize=function(e,t){return function(e,t){return o(void 0,void 0,void 0,function(){var n,r,i,o,a,u,c,d,f;return s(this,function(s){switch(s.label){case 0:return[4,t.endpoint()];case 1:return(n=s.sent()).hostname,r=n.protocol,i=void 0===r?"https":r,o=n.port,a=n.path,u={"content-type":"application/json"},c="".concat((null==a?void 0:a.endsWith("/"))?a.slice(0,-1):a||"")+"/geofencing/v0/collections/{CollectionName}/list-geofences",c=Wt(c,e,"CollectionName",function(){return e.CollectionName},"{CollectionName}",!1),d=JSON.stringify(N(N({},null!=e.MaxResults&&{MaxResults:e.MaxResults}),null!=e.NextToken&&{NextToken:e.NextToken})),[4,t.endpoint()];case 2:if(f=s.sent().hostname,!0!==t.disableHostPrefix&&!l(f="geofencing."+f))throw new Error("ValidationError: prefixed hostname must be hostname compatible.");return[2,new z({protocol:i,hostname:f,port:o,method:"POST",headers:u,path:c,body:d})]}})})}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return o(void 0,void 0,void 0,function(){var n,r,i,o;return s(this,function(s){switch(s.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,er(e,t)]:(n=ir({$metadata:Fr(e)}),i=wt,o=_t,[4,zr(e.body,t)]);case 1:return null!=(r=i.apply(void 0,[o.apply(void 0,[s.sent()]),"body"])).Entries&&(n.Entries=Ir(r.Entries,t)),null!=r.NextToken&&(n.NextToken=St(r.NextToken)),[2,n]}})})}(e,t)},t}(ut),Yr=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return r(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(m(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"LocationClient",commandName:"BatchPutGeofenceCommand",inputFilterSensitiveLog:kn,outputFilterSensitiveLog:Dn},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},i)},t.prototype.serialize=function(e,t){return function(e,t){return o(void 0,void 0,void 0,function(){var n,r,i,o,a,u,c,d,f;return s(this,function(s){switch(s.label){case 0:return[4,t.endpoint()];case 1:return(n=s.sent()).hostname,r=n.protocol,i=void 0===r?"https":r,o=n.port,a=n.path,u={"content-type":"application/json"},c="".concat((null==a?void 0:a.endsWith("/"))?a.slice(0,-1):a||"")+"/geofencing/v0/collections/{CollectionName}/put-geofences",c=Wt(c,e,"CollectionName",function(){return e.CollectionName},"{CollectionName}",!1),d=JSON.stringify(N({},null!=e.Entries&&{Entries:lr(e.Entries,t)})),[4,t.endpoint()];case 2:if(f=s.sent().hostname,!0!==t.disableHostPrefix&&!l(f="geofencing."+f))throw new Error("ValidationError: prefixed hostname must be hostname compatible.");return[2,new z({protocol:i,hostname:f,port:o,method:"POST",headers:u,path:c,body:d})]}})})}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return o(void 0,void 0,void 0,function(){var n,r,i,o;return s(this,function(s){switch(s.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Zn(e,t)]:(n=ir({$metadata:Fr(e)}),i=wt,o=_t,[4,zr(e.body,t)]);case 1:return null!=(r=i.apply(void 0,[o.apply(void 0,[s.sent()]),"body"])).Errors&&(n.Errors=wr(r.Errors,t)),null!=r.Successes&&(n.Successes=_r(r.Successes,t)),[2,n]}})})}(e,t)},t}(ut),Zr=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return r(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(m(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"LocationClient",commandName:"BatchDeleteGeofenceCommand",inputFilterSensitiveLog:xn,outputFilterSensitiveLog:Tn},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},i)},t.prototype.serialize=function(e,t){return function(e,t){return o(void 0,void 0,void 0,function(){var n,r,i,o,a,u,c,d,f;return s(this,function(s){switch(s.label){case 0:return[4,t.endpoint()];case 1:return(n=s.sent()).hostname,r=n.protocol,i=void 0===r?"https":r,o=n.port,a=n.path,u={"content-type":"application/json"},c="".concat((null==a?void 0:a.endsWith("/"))?a.slice(0,-1):a||"")+"/geofencing/v0/collections/{CollectionName}/delete-geofences",c=Wt(c,e,"CollectionName",function(){return e.CollectionName},"{CollectionName}",!1),d=JSON.stringify(N({},null!=e.GeofenceIds&&{GeofenceIds:vr(e.GeofenceIds,t)})),[4,t.endpoint()];case 2:if(f=s.sent().hostname,!0!==t.disableHostPrefix&&!l(f="geofencing."+f))throw new Error("ValidationError: prefixed hostname must be hostname compatible.");return[2,new z({protocol:i,hostname:f,port:o,method:"POST",headers:u,path:c,body:d})]}})})}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return o(void 0,void 0,void 0,function(){var n,r,i,o;return s(this,function(s){switch(s.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Yn(e,t)]:(n=ir({$metadata:Fr(e)}),i=wt,o=_t,[4,zr(e.body,t)]);case 1:return null!=(r=i.apply(void 0,[o.apply(void 0,[s.sent()]),"body"])).Errors&&(n.Errors=mr(r.Errors,t)),[2,n]}})})}(e,t)},t}(ut),Xr=function(){return(Xr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Qr=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},ei=function(){return(ei=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},ti=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},ni=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},ri=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},ii=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(ri(arguments[t]));return e},oi=new A.a("AmazonLocationServiceProvider"),si=function(){function e(e){this._config=e||{},oi.debug("Geo Options",this._config)}return e.prototype.getCategory=function(){return e.CATEGORY},e.prototype.getProviderName=function(){return e.PROVIDER_NAME},e.prototype.configure=function(e){return oi.debug("configure Amazon Location Service Provider",e),e?(this._config=Object.assign({},this._config,e),this._config):this._config},e.prototype.getAvailableMaps=function(){this._verifyMapResources();var e=[],t=this._config.maps.items,n=this._config.region;for(var r in t){var i=t[r].style;e.push({mapName:r,style:i,region:n})}return e},e.prototype.getDefaultMap=function(){this._verifyMapResources();var e=this._config.maps.default;return{mapName:e,style:this._config.maps.items[e].style,region:this._config.region}},e.prototype.searchByText=function(e,t){return ti(this,void 0,void 0,function(){var n,r,i,o,s,a;return ni(this,function(u){switch(u.label){case 0:return[4,this._ensureCredentials()];case 1:if(!u.sent())throw new Error("No credentials");this._verifySearchIndex(null==t?void 0:t.searchIndexName),n={Text:e,IndexName:this._config.search_indices.default},t&&(n=ei(ei({},n),C(t,n))),r=new bn({credentials:this._config.credentials,region:this._config.region,customUserAgent:Object(P.b)()}),i=new $r(n),u.label=2;case 2:return u.trys.push([2,4,,5]),[4,r.send(i)];case 3:return o=u.sent(),[3,5];case 4:throw s=u.sent(),oi.debug(s),s;case 5:return a=o.Results.map(function(e){return e.Place}),[2,T()(a,{deep:!0})]}})})},e.prototype.searchForSuggestions=function(e,t){return ti(this,void 0,void 0,function(){var n,r,i,o,s;return ni(this,function(a){switch(a.label){case 0:return[4,this._ensureCredentials()];case 1:if(!a.sent())throw new Error("No credentials");this._verifySearchIndex(null==t?void 0:t.searchIndexName),n={Text:e,IndexName:this._config.search_indices.default},t&&(n=ei(ei({},n),C(t,n))),r=new bn({credentials:this._config.credentials,region:this._config.region,customUserAgent:Object(P.b)()}),i=new Vr(n),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,r.send(i)];case 3:return o=a.sent(),[3,5];case 4:throw s=a.sent(),oi.debug(s),s;case 5:return[2,o.Results.map(function(e){return{text:e.Text,placeId:e.PlaceId}})]}})})},e.prototype._verifyPlaceId=function(e){if(0===e.length){var t="PlaceId cannot be an empty string.";throw oi.debug(t),new Error(t)}},e.prototype.searchByPlaceId=function(e,t){return ti(this,void 0,void 0,function(){var n,r,i,o,s,a;return ni(this,function(u){switch(u.label){case 0:return[4,this._ensureCredentials()];case 1:if(!u.sent())throw new Error("No credentials");this._verifySearchIndex(null==t?void 0:t.searchIndexName),this._verifyPlaceId(e),n=new bn({credentials:this._config.credentials,region:this._config.region,customUserAgent:Object(P.b)()}),r={PlaceId:e,IndexName:(null==t?void 0:t.searchIndexName)||this._config.search_indices.default},i=new Gr(r),u.label=2;case 2:return u.trys.push([2,4,,5]),[4,n.send(i)];case 3:return o=u.sent(),[3,5];case 4:throw s=u.sent(),oi.debug(s),s;case 5:return(a=o.Place)?[2,T()(a,{deep:!0})]:[2]}})})},e.prototype.searchByCoordinates=function(e,t){return ti(this,void 0,void 0,function(){var n,r,i,o,s,a;return ni(this,function(u){switch(u.label){case 0:return[4,this._ensureCredentials()];case 1:if(!u.sent())throw new Error("No credentials");this._verifySearchIndex(null==t?void 0:t.searchIndexName),n={Position:e,IndexName:this._config.search_indices.default},t&&(t.searchIndexName&&(n.IndexName=t.searchIndexName),n.MaxResults=t.maxResults),r=new bn({credentials:this._config.credentials,region:this._config.region,customUserAgent:Object(P.b)()}),i=new Wr(n),u.label=2;case 2:return u.trys.push([2,4,,5]),[4,r.send(i)];case 3:return o=u.sent(),[3,5];case 4:throw s=u.sent(),oi.debug(s),s;case 5:return a=o.Results.map(function(e){return e.Place}),[2,T()(a[0],{deep:!0})]}})})},e.prototype.saveGeofences=function(e,t){return ti(this,void 0,void 0,function(){var n,r,i,o=this;return ni(this,function(s){switch(s.label){case 0:if(e.length<1)throw new Error("Geofence input array is empty");return[4,this._ensureCredentials()];case 1:if(!s.sent())throw new Error("No credentials");try{this._verifyGeofenceCollections(null==t?void 0:t.collectionName)}catch(e){throw oi.debug(e),e}for(E(e),n=e.map(function(e){return{GeofenceId:e.geofenceId,Geometry:{Polygon:e.geometry.polygon}}}),r={successes:[],errors:[]},i=[];n.length>0;)i.push(n.splice(0,10));return[4,Promise.all(i.map(function(e){return ti(o,void 0,void 0,function(){var n,i;return ni(this,function(o){switch(o.label){case 0:
return o.trys.push([0,2,,3]),[4,this._AmazonLocationServiceBatchPutGeofenceCall(e,(null==t?void 0:t.collectionName)||this._config.geofenceCollections.default)];case 1:return n=o.sent(),[3,3];case 2:return i=o.sent(),e.forEach(function(e){r.errors.push({geofenceId:e.GeofenceId,error:{code:"APIConnectionError",message:i.message}})}),[2];case 3:return n.Successes.forEach(function(e){var t=e.GeofenceId,n=e.CreateTime,i=e.UpdateTime;r.successes.push({geofenceId:t,createTime:n,updateTime:i})}),n.Errors.forEach(function(e){var t=e.Error,n=t.Code,i=t.Message,o=e.GeofenceId;r.errors.push({error:{code:n,message:i},geofenceId:o})}),[2]}})})}))];case 2:return s.sent(),[2,r]}})})},e.prototype.getGeofence=function(e,t){return ti(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,d;return ni(this,function(f){switch(f.label){case 0:return[4,this._ensureCredentials()];case 1:if(!f.sent())throw new Error("No credentials");try{this._verifyGeofenceCollections(null==t?void 0:t.collectionName)}catch(e){throw oi.debug(e),e}_(e),n=new bn({credentials:this._config.credentials,region:this._config.region,customUserAgent:Object(P.b)()}),r={GeofenceId:e,CollectionName:(null==t?void 0:t.collectionName)||this._config.geofenceCollections.default},i=new Hr(r),f.label=2;case 2:return f.trys.push([2,4,,5]),[4,n.send(i)];case 3:return o=f.sent(),[3,5];case 4:throw s=f.sent(),oi.debug(s),s;case 5:return a=o.GeofenceId,u=o.CreateTime,c=o.UpdateTime,l=o.Status,d=o.Geometry,[2,{createTime:u,geofenceId:a,geometry:{polygon:d.Polygon},status:l,updateTime:c}]}})})},e.prototype.listGeofences=function(e){return ti(this,void 0,void 0,function(){var t,n,r,i,o,s;return ni(this,function(a){switch(a.label){case 0:return[4,this._ensureCredentials()];case 1:if(!a.sent())throw new Error("No credentials");try{this._verifyGeofenceCollections(null==e?void 0:e.collectionName)}catch(e){throw oi.debug(e),e}t=new bn({credentials:this._config.credentials,region:this._config.region,customUserAgent:Object(P.b)()}),n={NextToken:null==e?void 0:e.nextToken,CollectionName:(null==e?void 0:e.collectionName)||this._config.geofenceCollections.default},r=new Jr(n),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,t.send(r)];case 3:return i=a.sent(),[3,5];case 4:throw o=a.sent(),oi.debug(o),o;case 5:return s=i.NextToken,[2,{entries:i.Entries.map(function(e){return{geofenceId:e.GeofenceId,createTime:e.CreateTime,updateTime:e.UpdateTime,status:e.Status,geometry:{polygon:e.Geometry.Polygon}}}),nextToken:s}]}})})},e.prototype.deleteGeofences=function(e,t){return ti(this,void 0,void 0,function(){var n,r,i,o,s=this;return ni(this,function(a){switch(a.label){case 0:if(e.length<1)throw new Error("GeofenceId input array is empty");return[4,this._ensureCredentials()];case 1:if(!a.sent())throw new Error("No credentials");if(this._verifyGeofenceCollections(null==t?void 0:t.collectionName),(n=e.filter(function(e){try{_(e)}catch(e){return!0}})).length>0)throw new Error("Invalid geofence ids: "+n.join(", "));for(r={successes:[],errors:[]},i=[],o=0;o<e.length;)i.push(e.slice(o,o+=10));return[4,Promise.all(i.map(function(e){return ti(s,void 0,void 0,function(){var n,i,o,s;return ni(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,this._AmazonLocationServiceBatchDeleteGeofenceCall(e,(null==t?void 0:t.collectionName)||this._config.geofenceCollections.default)];case 1:return n=a.sent(),[3,3];case 2:return i=a.sent(),e.forEach(function(e){var t={geofenceId:e,error:{code:i.message,message:i.message}};r.errors.push(t)}),[2];case 3:return o=n.Errors.map(function(e){return e.geofenceId}),(s=r.successes).push.apply(s,ii(e.filter(function(e){return!o.includes(e)}))),[2]}})})}))];case 2:return a.sent(),[2,r]}})})},e.prototype._ensureCredentials=function(){return ti(this,void 0,void 0,function(){var e,t,n;return ni(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,k.a.get()];case 1:return(e=r.sent())?(t=k.a.shear(e),oi.debug("Set credentials for storage. Credentials are:",t),this._config.credentials=t,[2,!0]):[2,!1];case 2:return n=r.sent(),oi.debug("Ensure credentials error. Credentials are:",n),[2,!1];case 3:return[2]}})})},e.prototype._verifyMapResources=function(){if(!this._config.maps){var e="No map resources found in amplify config, run 'amplify add geo' to create one and run `amplify push` after";throw oi.debug(e),new Error(e)}if(!this._config.maps.default)throw e="No default map resource found in amplify config, run 'amplify add geo' to create one and run `amplify push` after",oi.debug(e),new Error(e)},e.prototype._verifySearchIndex=function(e){if(!(this._config.search_indices&&this._config.search_indices.default||e)){var t="No Search Index found in amplify config, please run `amplify add geo` to create one and run `amplify push` after.";throw oi.debug(t),new Error(t)}},e.prototype._verifyGeofenceCollections=function(e){if(!(this._config.geofenceCollections&&this._config.geofenceCollections.default||e)){var t="No Geofence Collections found, please run `amplify add geo` to create one and run `amplify push` after.";throw oi.debug(t),new Error(t)}},e.prototype._AmazonLocationServiceBatchPutGeofenceCall=function(e,t){return ti(this,void 0,void 0,function(){var n,r,i,o;return ni(this,function(s){switch(s.label){case 0:n={Entries:e,CollectionName:t||this._config.geofenceCollections.default},r=new bn({credentials:this._config.credentials,region:this._config.region,customUserAgent:Object(P.b)()}),i=new Yr(n),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,r.send(i)];case 2:return o=s.sent(),[3,4];case 3:throw s.sent();case 4:return[2,o]}})})},e.prototype._AmazonLocationServiceBatchDeleteGeofenceCall=function(e,t){return ti(this,void 0,void 0,function(){var n,r,i,o;return ni(this,function(s){switch(s.label){case 0:n={GeofenceIds:e,CollectionName:t||this._config.geofenceCollections.default},r=new bn({credentials:this._config.credentials,region:this._config.region,customUserAgent:Object(P.b)()}),i=new Zr(n),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,r.send(i)];case 2:return o=s.sent(),[3,4];case 3:throw s.sent();case 4:return[2,o]}})})},e.CATEGORY="Geo",e.PROVIDER_NAME="AmazonLocationService",e}(),ai=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},ui=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},ci=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},li=new A.a("Geo"),di="AmazonLocationService",fi=new(function(){function e(){this._config={},this._pluggables=[],li.debug("Geo Options",this._config)}return e.prototype.getModuleName=function(){return e.MODULE},e.prototype.addPluggable=function(e){if(e&&"Geo"===e.getCategory())return this._pluggables.push(e),e.configure(this._config[e.getProviderName()])},e.prototype.getPluggable=function(e){var t=this._pluggables.find(function(t){return t.getProviderName()===e});if(void 0===t)throw li.debug("No plugin found with providerName",e),new Error("No plugin found in Geo for the provider");return t},e.prototype.removePluggable=function(e){this._pluggables=this._pluggables.filter(function(t){return t.getProviderName()!==e})},e.prototype.configure=function(e){var t=this;if(li.debug("configure Geo"),!e)return this._config;var n=Object(O.b)(e);return this._config=Object.assign({},this._config,n.Geo,e),this._pluggables.forEach(function(e){e.configure(t._config[e.getProviderName()])}),0===this._pluggables.length&&this.addPluggable(new si),this._config},e.prototype.getAvailableMaps=function(e){return void 0===e&&(e=di),this.getPluggable(e).getAvailableMaps()},e.prototype.getDefaultMap=function(e){return void 0===e&&(e=di),this.getPluggable(e).getDefaultMap()},e.prototype.searchByText=function(e,t){return ai(this,void 0,void 0,function(){var n,r,i,o;return ui(this,function(s){switch(s.label){case 0:n=(t||{}).providerName,r=void 0===n?di:n,i=this.getPluggable(r),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,i.searchByText(e,t)];case 2:return[2,s.sent()];case 3:throw o=s.sent(),li.debug(o),o;case 4:return[2]}})})},e.prototype.searchForSuggestions=function(e,t){return ai(this,void 0,void 0,function(){var n,r,i,o;return ui(this,function(s){switch(s.label){case 0:n=(t||{}).providerName,r=void 0===n?di:n,i=this.getPluggable(r),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,i.searchForSuggestions(e,t)];case 2:return[2,s.sent()];case 3:throw o=s.sent(),li.debug(o),o;case 4:return[2]}})})},e.prototype.searchByPlaceId=function(e,t){return ai(this,void 0,void 0,function(){var n,r;return ui(this,function(i){switch(i.label){case 0:n=this.getPluggable("AmazonLocationService"),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,n.searchByPlaceId(e,t)];case 2:return[2,i.sent()];case 3:throw r=i.sent(),li.debug(r),r;case 4:return[2]}})})},e.prototype.searchByCoordinates=function(e,t){return ai(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return ui(this,function(c){switch(c.label){case 0:n=(t||{}).providerName,r=void 0===n?di:n,i=this.getPluggable(r),o=ci(e,2),s=o[0],a=o[1],c.label=1;case 1:return c.trys.push([1,3,,4]),w(s,a),[4,i.searchByCoordinates(e,t)];case 2:return[2,c.sent()];case 3:throw u=c.sent(),li.debug(u),u;case 4:return[2]}})})},e.prototype.saveGeofences=function(e,t){return ai(this,void 0,void 0,function(){var n,r,i,o,s;return ui(this,function(a){switch(a.label){case 0:n=(t||{}).providerName,r=void 0===n?di:n,i=this.getPluggable(r),o=Array.isArray(e)?e:[e],a.label=1;case 1:return a.trys.push([1,3,,4]),[4,i.saveGeofences(o,t)];case 2:return[2,a.sent()];case 3:throw s=a.sent(),li.debug(s),s;case 4:return[2]}})})},e.prototype.getGeofence=function(e,t){return ai(this,void 0,void 0,function(){var n,r,i,o;return ui(this,function(s){switch(s.label){case 0:n=(t||{}).providerName,r=void 0===n?di:n,i=this.getPluggable(r),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,i.getGeofence(e,t)];case 2:return[2,s.sent()];case 3:throw o=s.sent(),li.debug(o),o;case 4:return[2]}})})},e.prototype.listGeofences=function(e){return ai(this,void 0,void 0,function(){var t,n,r,i;return ui(this,function(o){switch(o.label){case 0:t=(e||{}).providerName,n=void 0===t?di:t,r=this.getPluggable(n),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,r.listGeofences(e)];case 2:return[2,o.sent()];case 3:throw i=o.sent(),li.debug(i),i;case 4:return[2]}})})},e.prototype.deleteGeofences=function(e,t){return ai(this,void 0,void 0,function(){var n,r,i,o,s;return ui(this,function(a){switch(a.label){case 0:n=(t||{}).providerName,r=void 0===n?di:n,i=this.getPluggable(r),o=Array.isArray(e)?e:[e],a.label=1;case 1:return a.trys.push([1,3,,4]),[4,i.deleteGeofences(o,t)];case 2:return[2,a.sent()];case 3:throw s=a.sent(),li.debug(s),s;case 4:return[2]}})})},e.MODULE="Geo",e}());I.a.register(fi)},function(e,t,n){"use strict";function r(){if(!k&&!(k="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return k(B)}function i(e){for(var t="",n=0;n<e.byteLength;n++)t+=ne[e[n]];return t}function o(e){var t=e.length/4*3;"=="===e.slice(-2)?t-=2:"="===e.slice(-1)&&t--;for(var n=new ArrayBuffer(t),r=new DataView(n),i=0;i<e.length;i+=4){for(var o=0,s=0,a=i,u=i+3;a<=u;a++)if("="!==e[a]){if(!(e[a]in Ke))throw new TypeError("Invalid character ".concat(e[a]," in base64 string."));o|=Ke[e[a]]<<6*(u-a),s+=6}else o>>=6;var c=i/4*3;o>>=s%8;for(var l=Math.floor(s/8),d=0;d<l;d++){var f=8*(l-d-1);r.setUint8(c+d,(o&255<<f)>>f)}}return new Uint8Array(n)}function s(e){for(var t="",n=0;n<e.length;n+=3){for(var r=0,i=0,o=n,s=Math.min(n+3,e.length);o<s;o++)r|=e[o]<<8*(s-o-1),i+=8;var a=Math.ceil(i/6);r<<=6*a-i;for(var u=1;u<=a;u++){var c=6*(a-u);t+=$e[(r&63<<c)>>c]}t+="==".slice(0,4-a)}return t}function a(e){return new Promise(function(t,n){var r=new FileReader;r.onloadend=function(){var e;if(2!==r.readyState)return n(new Error("Reader aborted too early"));var i=null!==(e=r.result)&&void 0!==e?e:"",o=i.indexOf(","),s=o>-1?o+1:i.length;t(i.substring(s))},r.onabort=function(){return n(new Error("Read aborted"))},r.onerror=function(){return n(r.error)},r.readAsDataURL(e)})}function u(e,t,n){return{applyToStack:function(r){r.add(function(e,t){return function(n,r){return function(r){return Object(g.b)(void 0,void 0,void 0,function(){var i,o,s;return Object(g.d)(this,function(a){switch(a.label){case 0:return[4,n(r)];case 1:i=a.sent().response,a.label=2;case 2:return a.trys.push([2,4,,5]),[4,t(i,e)];case 3:return o=a.sent(),[2,{response:i,output:o}];case 4:throw s=a.sent(),Object.defineProperty(s,"$response",{value:i}),s;case 5:return[2]}})})}}}(e,n),lt),r.add(function(e,t){return function(n,r){return function(i){return Object(g.b)(void 0,void 0,void 0,function(){var o,s,a;return Object(g.d)(this,function(u){switch(u.label){case 0:if(!(o=(null===(a=r.endpointV2)||void 0===a?void 0:a.url)&&e.urlParser?function(){return Object(g.b)(void 0,void 0,void 0,function(){return Object(g.d)(this,function(t){return[2,e.urlParser(r.endpointV2.url)]})})}:e.endpoint))throw new Error("No valid endpoint provider available.");return[4,t(i.input,Object(g.a)(Object(g.a)({},e),{endpoint:o}))];case 1:return s=u.sent(),[2,n(Object(g.a)(Object(g.a)({},i),{request:s}))]}})})}}}(e,t),dt)}}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",function(){return Jt});var l,d=n(48),f=n(20),p=function(){return(p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},h=new d.a("AbstractInteractionsProvider"),v=function(){function e(e){void 0===e&&(e={}),this._config=e}return e.prototype.configure=function(e){return void 0===e&&(e={}),this._config=p(p({},this._config),e),h.debug("configure "+this.getProviderName(),this._config),this.options},e.prototype.getCategory=function(){return"Interactions"},Object.defineProperty(e.prototype,"options",{get:function(){return p({},this._config)},enumerable:!0,configurable:!0}),e}(),g=n(0),y=(n(28),n(13)),m=function(e){var t,n=Object(y.a)(e.useDualstackEndpoint),r=e.endpoint,i=e.useFipsEndpoint,o=e.urlParser;return Object(g.a)(Object(g.a)({},e),{tls:null===(t=e.tls)||void 0===t||t,endpoint:r?Object(y.a)("string"==typeof r?o(r):r):function(){return function(e){return Object(g.b)(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a;return Object(g.d)(this,function(u){switch(u.label){case 0:return t=e.tls,n=void 0===t||t,[4,e.region()];case 1:if(r=u.sent(),!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(r))throw new Error("Invalid region in client config");return[4,e.useDualstackEndpoint()];case 2:return i=u.sent(),[4,e.useFipsEndpoint()];case 3:return o=u.sent(),[4,e.regionInfoProvider(r,{useDualstackEndpoint:i,useFipsEndpoint:o})];case 4:if(!(s=(null!==(a=u.sent())&&void 0!==a?a:{}).hostname))throw new Error("Cannot resolve hostname from client config");return[2,e.urlParser("".concat(n?"https:":"http:","//").concat(s))]}})})}(Object(g.a)(Object(g.a)({},e),{useDualstackEndpoint:n,useFipsEndpoint:i}))},isCustomEndpoint:!!r,useDualstackEndpoint:n})},b=function(e){return"string"==typeof e&&(e.startsWith("fips-")||e.endsWith("-fips"))},w=function(e){return b(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e},_=function(e,t){var n;void 0===e&&(e=[]);var r=t.useFipsEndpoint,i=t.useDualstackEndpoint;return null===(n=e.find(function(e){var t=e.tags;return r===t.includes("fips")&&i===t.includes("dualstack")}))||void 0===n?void 0:n.hostname},S=function(e,t){var n,r,i,o,s,a,u=t.useFipsEndpoint,c=void 0!==u&&u,l=t.useDualstackEndpoint,d=void 0!==l&&l,f=t.signingService,p=t.regionHash,h=t.partitionHash,v=function(e,t){var n,r=t.partitionHash;return null!==(n=Object.keys(r||{}).find(function(t){return r[t].regions.includes(e)}))&&void 0!==n?n:"aws"}(e,{partitionHash:h}),y=e in p?e:null!==(r=null===(n=h[v])||void 0===n?void 0:n.endpoint)&&void 0!==r?r:e,m={useFipsEndpoint:c,useDualstackEndpoint:d},b=function(e,t){var n=t.regionHostname,r=t.partitionHostname;return n||(r?r.replace("{region}",e):void 0)}(y,{regionHostname:_(null===(i=p[y])||void 0===i?void 0:i.variants,m),partitionHostname:_(null===(o=h[v])||void 0===o?void 0:o.variants,m)});if(void 0===b)throw new Error("Endpoint resolution failed for: ".concat({resolvedRegion:y,useFipsEndpoint:c,useDualstackEndpoint:d}));var w=function(e,t){var n=t.signingRegion,r=t.regionRegex,i=t.useFipsEndpoint;if(n)return n;if(i){var o=r.replace("\\\\","\\").replace(/^\^/g,"\\.").replace(/\$$/g,"\\."),s=e.match(o);if(s)return s[0].slice(1,-1)}}(b,{signingRegion:null===(s=p[y])||void 0===s?void 0:s.signingRegion,regionRegex:h[v].regionRegex,useFipsEndpoint:c});return Object(g.a)(Object(g.a)({partition:v,signingService:f,hostname:b},w&&{signingRegion:w}),(null===(a=p[y])||void 0===a?void 0:a.signingService)&&{signingService:p[y].signingService})},E=n(17),C={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},A=function(e){return{applyToStack:function(t){t.add(function(e){var t=this;return function(n){return function(r){return Object(g.b)(t,void 0,void 0,function(){var t,i,o,s,a;return Object(g.d)(this,function(u){if(t=r.request,E.a.isInstance(t)&&(i=t.body,o=t.headers,i&&-1===Object.keys(o).map(function(e){return e.toLowerCase()}).indexOf("content-length")))try{s=e(i),t.headers=Object(g.a)(Object(g.a)({},t.headers),((a={})["content-length"]=String(s),a))}catch(e){}return[2,n(Object(g.a)(Object(g.a)({},r),{request:t}))]})})}}}(e.bodyLengthChecker),C)}}},O={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},I=function(e){return{applyToStack:function(t){t.add(function(e){return function(t){return function(n){return Object(g.b)(void 0,void 0,void 0,function(){var r,i;return Object(g.d)(this,function(o){return E.a.isInstance(n.request)?(r=n.request,(void 0===(i=(e.requestHandler.metadata||{}).handlerProtocol)?"":i).indexOf("h2")>=0&&!r.headers[":authority"]?(delete r.headers.host,r.headers[":authority"]=""):r.headers.host||(r.headers.host=r.hostname),[2,t(n)]):[2,t(n)]})})}}}(e),O)}}},x={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},T=function(e){return{applyToStack:function(e){e.add(function(e,t){return function(n){return Object(g.b)(void 0,void 0,void 0,function(){var r,i,o,s,a,u,c,l,d;return Object(g.d)(this,function(f){switch(f.label){case 0:return r=t.clientName,i=t.commandName,o=t.inputFilterSensitiveLog,s=t.logger,a=t.outputFilterSensitiveLog,[4,e(n)];case 1:return u=f.sent(),s?("function"==typeof s.info&&(c=u.output,l=c.$metadata,d=Object(g.f)(c,["$metadata"]),s.info({clientName:r,commandName:i,input:o(n.input),output:a(d),metadata:l})),[2,u]):[2,u]}})})}},x)}}},P=n(96);!function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"}(l||(l={}));for(var k,D=l.STANDARD,N=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],M=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],L=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],j=[500,502,503,504],R=["ECONNRESET","EPIPE","ETIMEDOUT"],U=function(e){var t,n;return 429===(null===(t=e.$metadata)||void 0===t?void 0:t.httpStatusCode)||M.includes(e.name)||1==(null===(n=e.$retryable)||void 0===n?void 0:n.throttling)},F=function(){function e(e){var t,n,r,i,o;this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=null!==(t=null==e?void 0:e.beta)&&void 0!==t?t:.7,this.minCapacity=null!==(n=null==e?void 0:e.minCapacity)&&void 0!==n?n:1,this.minFillRate=null!==(r=null==e?void 0:e.minFillRate)&&void 0!==r?r:.5,this.scaleConstant=null!==(i=null==e?void 0:e.scaleConstant)&&void 0!==i?i:.4,this.smooth=null!==(o=null==e?void 0:e.smooth)&&void 0!==o?o:.8;var s=this.getCurrentTimeInSeconds();this.lastThrottleTime=s,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}return e.prototype.getCurrentTimeInSeconds=function(){return Date.now()/1e3},e.prototype.getSendToken=function(){return Object(g.b)(this,void 0,void 0,function(){return Object(g.d)(this,function(e){return[2,this.acquireTokenBucket(1)]})})},e.prototype.acquireTokenBucket=function(e){return Object(g.b)(this,void 0,void 0,function(){var t;return Object(g.d)(this,function(n){switch(n.label){case 0:return this.enabled?(this.refillTokenBucket(),e>this.currentCapacity?(t=(e-this.currentCapacity)/this.fillRate*1e3,[4,new Promise(function(e){return setTimeout(e,t)})]):[3,2]):[2];case 1:n.sent(),n.label=2;case 2:return this.currentCapacity=this.currentCapacity-e,[2]}})})},e.prototype.refillTokenBucket=function(){var e=this.getCurrentTimeInSeconds();if(this.lastTimestamp){var t=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+t),this.lastTimestamp=e}else this.lastTimestamp=e},e.prototype.updateClientSendingRate=function(e){var t;if(this.updateMeasuredRate(),U(e)){var n=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=n,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),t=this.cubicThrottle(n),this.enableTokenBucket()}else this.calculateTimeWindow(),t=this.cubicSuccess(this.getCurrentTimeInSeconds());var r=Math.min(t,2*this.measuredTxRate);this.updateTokenBucketRate(r)},e.prototype.calculateTimeWindow=function(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))},e.prototype.cubicThrottle=function(e){return this.getPrecise(e*this.beta)},e.prototype.cubicSuccess=function(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)},e.prototype.enableTokenBucket=function(){this.enabled=!0},e.prototype.updateTokenBucketRate=function(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)},e.prototype.updateMeasuredRate=function(){var e=this.getCurrentTimeInSeconds(),t=Math.floor(2*e)/2;if(this.requestCount++,t>this.lastTxRateBucket){var n=this.requestCount/(t-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=t}},e.prototype.getPrecise=function(e){return parseFloat(e.toFixed(8))},e}(),B=new Uint8Array(16),z=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,q=function(e){return"string"==typeof e&&z.test(e)},K=[],$=0;$<256;++$)K.push(($+256).toString(16).substr(1));for(var V=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(K[e[t+0]]+K[e[t+1]]+K[e[t+2]]+K[e[t+3]]+"-"+K[e[t+4]]+K[e[t+5]]+"-"+K[e[t+6]]+K[e[t+7]]+"-"+K[e[t+8]]+K[e[t+9]]+"-"+K[e[t+10]]+K[e[t+11]]+K[e[t+12]]+K[e[t+13]]+K[e[t+14]]+K[e[t+15]]).toLowerCase();if(!q(n))throw TypeError("Stringified UUID is invalid");return n},G=function(e,t,n){var i=(e=e||{}).random||(e.rng||r)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=i[o];return t}return V(i)},W=function(e,t){return Math.floor(Math.min(2e4,Math.random()*Math.pow(2,t)*e))},H=function(e){return!!e&&(function(e){return void 0!==e.$retryable}(e)||function(e){return N.includes(e.name)}(e)||U(e)||function(e){var t;return L.includes(e.name)||R.includes((null==e?void 0:e.code)||"")||j.includes((null===(t=e.$metadata)||void 0===t?void 0:t.httpStatusCode)||0)}(e))},J=function(){function e(e,t){var n,r,i;this.maxAttemptsProvider=e,this.mode=l.STANDARD,this.retryDecider=null!==(n=null==t?void 0:t.retryDecider)&&void 0!==n?n:H,this.delayDecider=null!==(r=null==t?void 0:t.delayDecider)&&void 0!==r?r:W,this.retryQuota=null!==(i=null==t?void 0:t.retryQuota)&&void 0!==i?i:function(e,t){var n,r,i,o=e,s=null!==(n=null==t?void 0:t.noRetryIncrement)&&void 0!==n?n:1,a=null!==(r=null==t?void 0:t.retryCost)&&void 0!==r?r:5,u=null!==(i=null==t?void 0:t.timeoutRetryCost)&&void 0!==i?i:10,c=e,l=function(e){return"TimeoutError"===e.name?u:a},d=function(e){return l(e)<=c};return Object.freeze({hasRetryTokens:d,retrieveRetryTokens:function(e){if(!d(e))throw new Error("No retry token available");var t=l(e);return c-=t,t},releaseRetryTokens:function(e){c+=null!=e?e:s,c=Math.min(c,o)}})}(500)}return e.prototype.shouldRetry=function(e,t,n){return t<n&&this.retryDecider(e)&&this.retryQuota.hasRetryTokens(e)},e.prototype.getMaxAttempts=function(){return Object(g.b)(this,void 0,void 0,function(){var e;return Object(g.d)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.maxAttemptsProvider()];case 1:return e=t.sent(),[3,3];case 2:return t.sent(),e=3,[3,3];case 3:return[2,e]}})})},e.prototype.retry=function(e,t,n){return Object(g.b)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l;return Object(g.d)(this,function(d){switch(d.label){case 0:return i=0,o=0,[4,this.getMaxAttempts()];case 1:s=d.sent(),a=t.request,E.a.isInstance(a)&&(a.headers["amz-sdk-invocation-id"]=G()),u=function(){var u,l,d,f,p,h,v,y;return Object(g.d)(this,function(g){switch(g.label){case 0:return g.trys.push([0,4,,7]),E.a.isInstance(a)&&(a.headers["amz-sdk-request"]="attempt=".concat(i+1,"; max=").concat(s)),(null==n?void 0:n.beforeRequest)?[4,n.beforeRequest()]:[3,2];case 1:g.sent(),g.label=2;case 2:return[4,e(t)];case 3:return u=g.sent(),l=u.response,d=u.output,(null==n?void 0:n.afterRequest)&&n.afterRequest(l),c.retryQuota.releaseRetryTokens(r),d.$metadata.attempts=i+1,d.$metadata.totalRetryDelay=o,[2,{value:{response:l,output:d}}];case 4:return f=g.sent(),p=Z(f),i++,c.shouldRetry(p,i,s)?(r=c.retryQuota.retrieveRetryTokens(p),h=c.delayDecider(U(p)?500:100,i),v=Y(p.$response),y=Math.max(v||0,h),o+=y,[4,new Promise(function(e){return setTimeout(e,y)})]):[3,6];case 5:return g.sent(),[2,"continue"];case 6:throw p.$metadata||(p.$metadata={}),p.$metadata.attempts=i,p.$metadata.totalRetryDelay=o,p;case 7:return[2]}})},c=this,d.label=2;case 2:return[5,u()];case 3:return"object"==typeof(l=d.sent())?[2,l.value]:[3,2];case 4:return[2]}})})},e}(),Y=function(e){if(E.b.isInstance(e)){var t=Object.keys(e.headers).find(function(e){return"retry-after"===e.toLowerCase()});if(t){var n=e.headers[t],r=Number(n);return Number.isNaN(r)?new Date(n).getTime()-Date.now():1e3*r}}},Z=function(e){return e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):"string"==typeof e?new Error(e):new Error("AWS SDK error wrapper for ".concat(e))},X=function(e){function t(t,n){var r=this,i=null!=n?n:{},o=i.rateLimiter,s=Object(g.f)(i,["rateLimiter"]);return(r=e.call(this,t,s)||this).rateLimiter=null!=o?o:new F,r.mode=l.ADAPTIVE,r}return Object(g.c)(t,e),t.prototype.retry=function(t,n){return Object(g.b)(this,void 0,void 0,function(){var r=this;return Object(g.d)(this,function(i){return[2,e.prototype.retry.call(this,t,n,{beforeRequest:function(){return Object(g.b)(r,void 0,void 0,function(){return Object(g.d)(this,function(e){return[2,this.rateLimiter.getSendToken()]})})},afterRequest:function(e){r.rateLimiter.updateClientSendingRate(e)}})]})})},t}(J),Q={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},ee=function(e){return{applyToStack:function(t){t.add(function(e){return function(t,n){return function(r){return Object(g.b)(void 0,void 0,void 0,function(){var i;return Object(g.d)(this,function(o){switch(o.label){case 0:return[4,e.retryStrategy()];case 1:return(null==(i=o.sent())?void 0:i.mode)&&(n.userAgent=Object(g.g)(Object(g.g)([],Object(g.e)(n.userAgent||[]),!1),[["cfg/retry-mode",i.mode]],!1)),[2,i.retry(t,r)]}})})}}}(e),Q)}}},te=n(66),ne={},re={},ie=0;ie<256;ie++){var oe=ie.toString(16).toLowerCase();1===oe.length&&(oe="0".concat(oe)),ne[ie]=oe,re[oe]=ie}for(var se="X-Amz-Date".toLowerCase(),ae=["authorization",se,"date"],ue="X-Amz-Signature".toLowerCase(),ce="X-Amz-Security-Token".toLowerCase(),le={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},de=/^proxy-/,fe=/^sec-/,pe="AWS4-HMAC-SHA256-PAYLOAD",he={},ve=[],ge=function(e,t,n){return"".concat(e,"/").concat(t,"/").concat(n,"/").concat("aws4_request")},ye=function(e,t,n){var r=new e(t);return r.update(n),r.digest()},me=function(e,t,n){var r,i,o=e.headers,s={};try{for(var a=Object(g.h)(Object.keys(o).sort()),u=a.next();!u.done;u=a.next()){var c=u.value;if(null!=o[c]){var l=c.toLowerCase();(l in le||(null==t?void 0:t.has(l))||de.test(l)||fe.test(l))&&(!n||n&&!n.has(l))||(s[l]=o[c].trim().replace(/\s+/g," "))}}}catch(e){r={error:e}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return s},be=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,we)},we=function(e){return"%".concat(e.charCodeAt(0).toString(16).toUpperCase())},_e=function(e,t){var n=e.headers,r=e.body;return Object(g.b)(void 0,void 0,void 0,function(){var e,o,s,a,u,c,l;return Object(g.d)(this,function(d){switch(d.label){case 0:try{for(e=Object(g.h)(Object.keys(n)),o=e.next();!o.done;o=e.next())if("x-amz-content-sha256"===(s=o.value).toLowerCase())return[2,n[s]]}catch(e){c={error:e}}finally{try{o&&!o.done&&(l=e.return)&&l.call(e)}finally{if(c)throw c.error}}return null!=r?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof r||ArrayBuffer.isView(r)||(f=r,"function"==typeof ArrayBuffer&&f instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(f))?((a=new t).update(r),u=i,[4,a.digest()]):[3,3];case 2:return[2,u.apply(void 0,[d.sent()])];case 3:return[2,"UNSIGNED-PAYLOAD"]}var f})})},Se=function(e){var t=e.headers,n=e.query,r=Object(g.f)(e,["headers","query"])
;return Object(g.a)(Object(g.a)({},r),{headers:Object(g.a)({},t),query:n?Ee(n):void 0})},Ee=function(e){return Object.keys(e).reduce(function(t,n){var r,i=e[n];return Object(g.a)(Object(g.a)({},t),((r={})[n]=Array.isArray(i)?Object(g.g)([],Object(g.e)(i),!1):i,r))},{})},Ce=function(e){var t,n;e="function"==typeof e.clone?e.clone():Se(e);try{for(var r=Object(g.h)(Object.keys(e.headers)),i=r.next();!i.done;i=r.next()){var o=i.value;ae.indexOf(o.toLowerCase())>-1&&delete e.headers[o]}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return e},Ae=function(e){return"number"==typeof e?new Date(1e3*e):"string"==typeof e?Number(e)?new Date(1e3*Number(e)):new Date(e):e},Oe=function(){function e(e){var t=e.applyChecksum,n=e.credentials,r=e.region,i=e.service,o=e.sha256,s=e.uriEscapePath,a=void 0===s||s;this.service=i,this.sha256=o,this.uriEscapePath=a,this.applyChecksum="boolean"!=typeof t||t,this.regionProvider=Object(y.a)(r),this.credentialProvider=Object(y.a)(n)}return e.prototype.presign=function(e,t){return void 0===t&&(t={}),Object(g.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,d,f,p,h,v,y,m,b,w,_,S,E,C,A,O;return Object(g.d)(this,function(I){switch(I.label){case 0:return n=t.signingDate,r=void 0===n?new Date:n,i=t.expiresIn,o=void 0===i?3600:i,s=t.unsignableHeaders,a=t.unhoistableHeaders,u=t.signableHeaders,c=t.signingRegion,l=t.signingService,[4,this.credentialProvider()];case 1:return d=I.sent(),this.validateResolvedCredentials(d),null==c?[3,2]:(p=c,[3,4]);case 2:return[4,this.regionProvider()];case 3:p=I.sent(),I.label=4;case 4:return f=p,h=Ie(r),v=h.longDate,y=h.shortDate,o>604800?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(m=ge(y,f,null!=l?l:this.service),b=function(e,t){var n,r,i;void 0===t&&(t={});var o="function"==typeof e.clone?e.clone():Se(e),s=o.headers,a=o.query,u=void 0===a?{}:a;try{for(var c=Object(g.h)(Object.keys(s)),l=c.next();!l.done;l=c.next()){var d=l.value,f=d.toLowerCase();"x-amz-"!==f.slice(0,6)||(null===(i=t.unhoistableHeaders)||void 0===i?void 0:i.has(f))||(u[d]=s[d],delete s[d])}}catch(e){n={error:e}}finally{try{l&&!l.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}return Object(g.a)(Object(g.a)({},e),{headers:s,query:u})}(Ce(e),{unhoistableHeaders:a}),d.sessionToken&&(b.query["X-Amz-Security-Token"]=d.sessionToken),b.query["X-Amz-Algorithm"]="AWS4-HMAC-SHA256",b.query["X-Amz-Credential"]="".concat(d.accessKeyId,"/").concat(m),b.query["X-Amz-Date"]=v,b.query["X-Amz-Expires"]=o.toString(10),w=me(b,s,u),b.query["X-Amz-SignedHeaders"]=xe(w),_=b.query,S="X-Amz-Signature",E=this.getSignature,C=[v,m,this.getSigningKey(d,f,y,l)],A=this.createCanonicalRequest,O=[b,w],[4,_e(e,this.sha256)]);case 5:return[4,E.apply(this,C.concat([A.apply(this,O.concat([I.sent()]))]))];case 6:return _[S]=I.sent(),[2,b]}})})},e.prototype.sign=function(e,t){return Object(g.b)(this,void 0,void 0,function(){return Object(g.d)(this,function(n){return"string"==typeof e?[2,this.signString(e,t)]:e.headers&&e.payload?[2,this.signEvent(e,t)]:[2,this.signRequest(e,t)]})})},e.prototype.signEvent=function(e,t){var n=e.headers,r=e.payload,o=t.signingDate,s=void 0===o?new Date:o,a=t.priorSignature,u=t.signingRegion,c=t.signingService;return Object(g.b)(this,void 0,void 0,function(){var e,t,o,l,d,f,p,h,v,y,m;return Object(g.d)(this,function(g){switch(g.label){case 0:return null==u?[3,1]:(t=u,[3,3]);case 1:return[4,this.regionProvider()];case 2:t=g.sent(),g.label=3;case 3:return e=t,o=Ie(s),l=o.shortDate,d=o.longDate,f=ge(l,e,null!=c?c:this.service),[4,_e({headers:{},body:r},this.sha256)];case 4:return p=g.sent(),(h=new this.sha256).update(n),y=i,[4,h.digest()];case 5:return v=y.apply(void 0,[g.sent()]),m=[pe,d,f,a,v,p].join("\n"),[2,this.signString(m,{signingDate:s,signingRegion:e,signingService:c})]}})})},e.prototype.signString=function(e,t){var n=void 0===t?{}:t,r=n.signingDate,o=void 0===r?new Date:r,s=n.signingRegion,a=n.signingService;return Object(g.b)(this,void 0,void 0,function(){var t,n,r,u,c,l,d,f;return Object(g.d)(this,function(p){switch(p.label){case 0:return[4,this.credentialProvider()];case 1:return t=p.sent(),this.validateResolvedCredentials(t),null==s?[3,2]:(r=s,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=p.sent(),p.label=4;case 4:return n=r,u=Ie(o).shortDate,d=(l=this.sha256).bind,[4,this.getSigningKey(t,n,u,a)];case 5:return(c=new(d.apply(l,[void 0,p.sent()]))).update(e),f=i,[4,c.digest()];case 6:return[2,f.apply(void 0,[p.sent()])]}})})},e.prototype.signRequest=function(e,t){var n=void 0===t?{}:t,r=n.signingDate,i=void 0===r?new Date:r,o=n.signableHeaders,s=n.unsignableHeaders,a=n.signingRegion,u=n.signingService;return Object(g.b)(this,void 0,void 0,function(){var t,n,r,c,l,d,f,p,h,v,y;return Object(g.d)(this,function(m){switch(m.label){case 0:return[4,this.credentialProvider()];case 1:return t=m.sent(),this.validateResolvedCredentials(t),null==a?[3,2]:(r=a,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=m.sent(),m.label=4;case 4:return n=r,c=Ce(e),l=Ie(i),d=l.longDate,f=l.shortDate,p=ge(f,n,null!=u?u:this.service),c.headers[se]=d,t.sessionToken&&(c.headers[ce]=t.sessionToken),[4,_e(c,this.sha256)];case 5:return h=m.sent(),!function(e,t){var n,r;e=e.toLowerCase();try{for(var i=Object(g.h)(Object.keys(t)),o=i.next();!o.done;o=i.next())if(e===o.value.toLowerCase())return!0}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return!1}("x-amz-content-sha256",c.headers)&&this.applyChecksum&&(c.headers["x-amz-content-sha256"]=h),v=me(c,s,o),[4,this.getSignature(d,p,this.getSigningKey(t,n,f,u),this.createCanonicalRequest(c,v,h))];case 6:return y=m.sent(),c.headers.authorization="".concat("AWS4-HMAC-SHA256"," ")+"Credential=".concat(t.accessKeyId,"/").concat(p,", ")+"SignedHeaders=".concat(xe(v),", ")+"Signature=".concat(y),[2,c]}})})},e.prototype.createCanonicalRequest=function(e,t,n){var r=Object.keys(t).sort();return"".concat(e.method,"\n").concat(this.getCanonicalPath(e),"\n").concat(function(e){var t,n,r=e.query,i=void 0===r?{}:r,o=[],s={},a=function(e){if(e.toLowerCase()===ue)return"continue";o.push(e);var t=i[e];"string"==typeof t?s[e]="".concat(be(e),"=").concat(be(t)):Array.isArray(t)&&(s[e]=t.slice(0).sort().reduce(function(t,n){return t.concat(["".concat(be(e),"=").concat(be(n))])},[]).join("&"))};try{for(var u=Object(g.h)(Object.keys(i).sort()),c=u.next();!c.done;c=u.next())a(c.value)}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return o.map(function(e){return s[e]}).filter(function(e){return e}).join("&")}(e),"\n").concat(r.map(function(e){return"".concat(e,":").concat(t[e])}).join("\n"),"\n\n").concat(r.join(";"),"\n").concat(n)},e.prototype.createStringToSign=function(e,t,n){return Object(g.b)(this,void 0,void 0,function(){var r,o;return Object(g.d)(this,function(s){switch(s.label){case 0:return(r=new this.sha256).update(n),[4,r.digest()];case 1:return o=s.sent(),[2,"".concat("AWS4-HMAC-SHA256","\n").concat(e,"\n").concat(t,"\n").concat(i(o))]}})})},e.prototype.getCanonicalPath=function(e){var t,n,r=e.path;if(this.uriEscapePath){var i=[];try{for(var o=Object(g.h)(r.split("/")),s=o.next();!s.done;s=o.next()){var a=s.value;0!==(null==a?void 0:a.length)&&"."!==a&&(".."===a?i.pop():i.push(a))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}var u="".concat((null==r?void 0:r.startsWith("/"))?"/":"").concat(i.join("/")).concat(i.length>0&&(null==r?void 0:r.endsWith("/"))?"/":"");return encodeURIComponent(u).replace(/%2F/g,"/")}return r},e.prototype.getSignature=function(e,t,n,r){return Object(g.b)(this,void 0,void 0,function(){var o,s,a,u,c;return Object(g.d)(this,function(l){switch(l.label){case 0:return[4,this.createStringToSign(e,t,r)];case 1:return o=l.sent(),u=(a=this.sha256).bind,[4,n];case 2:return(s=new(u.apply(a,[void 0,l.sent()]))).update(o),c=i,[4,s.digest()];case 3:return[2,c.apply(void 0,[l.sent()])]}})})},e.prototype.getSigningKey=function(e,t,n,r){return function(e,t,n,r,o){return Object(g.b)(void 0,void 0,void 0,function(){var s,a,u,c,l,d,f,p,h;return Object(g.d)(this,function(v){switch(v.label){case 0:return[4,ye(e,t.secretAccessKey,t.accessKeyId)];case 1:if(s=v.sent(),(a="".concat(n,":").concat(r,":").concat(o,":").concat(i(s),":").concat(t.sessionToken))in he)return[2,he[a]];for(ve.push(a);ve.length>50;)delete he[ve.shift()];u="AWS4".concat(t.secretAccessKey),v.label=2;case 2:v.trys.push([2,7,8,9]),c=Object(g.h)([n,r,o,"aws4_request"]),l=c.next(),v.label=3;case 3:return l.done?[3,6]:(d=l.value,[4,ye(e,u,d)]);case 4:u=v.sent(),v.label=5;case 5:return l=c.next(),[3,3];case 6:return[3,9];case 7:return f=v.sent(),p={error:f},[3,9];case 8:try{l&&!l.done&&(h=c.return)&&h.call(c)}finally{if(p)throw p.error}return[7];case 9:return[2,he[a]=u]}})})}(this.sha256,e,n,t,r||this.service)},e.prototype.validateResolvedCredentials=function(e){if("object"!=typeof e||"string"!=typeof e.accessKeyId||"string"!=typeof e.secretAccessKey)throw new Error("Resolved credential object is not valid")},e}(),Ie=function(e){var t,n=(t=e,Ae(t).toISOString().replace(/\.\d{3}Z$/,"Z")).replace(/[\-:]/g,"");return{longDate:n,shortDate:n.slice(0,8)}},xe=function(e){return Object.keys(e).sort().join(";")},Te=function(e){return"function"==typeof e?Object(te.a)(e,function(e){return void 0!==e.expiration&&e.expiration.getTime()-Date.now()<3e5},function(e){return void 0!==e.expiration}):Object(y.a)(e)},Pe=function(e){return new Date(Date.now()+e)},ke=function(e,t){var n=Date.parse(e);return function(e,t){return Math.abs(Pe(t).getTime()-e)>=3e5}(n,t)?n-Date.now():t},De=function(e){var t,n,r;return E.b.isInstance(e)?null!==(n=null===(t=e.headers)||void 0===t?void 0:t.date)&&void 0!==n?n:null===(r=e.headers)||void 0===r?void 0:r.Date:void 0},Ne={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},Me=function(e){return{applyToStack:function(t){t.addRelativeTo(function(e){return function(t,n){return function(r){var i,o,s;return Object(g.b)(this,void 0,void 0,function(){var a,u,c,l,d,f,p;return Object(g.d)(this,function(h){switch(h.label){case 0:return E.a.isInstance(r.request)?(a=null===(s=null===(o=null===(i=n.endpointV2)||void 0===i?void 0:i.properties)||void 0===o?void 0:o.authSchemes)||void 0===s?void 0:s[0],[4,e.signer(a)]):[2,t(r)];case 1:return u=h.sent(),l=t,d=[Object(g.a)({},r)],p={},[4,u.sign(r.request,{signingDate:Pe(e.systemClockOffset),signingRegion:n.signing_region,signingService:n.signing_service})];case 2:return[4,l.apply(void 0,[g.a.apply(void 0,d.concat([(p.request=h.sent(),p)]))]).catch(function(t){var n,r=null!==(n=t.ServerTime)&&void 0!==n?n:De(t.$response);throw r&&(e.systemClockOffset=ke(r,e.systemClockOffset)),t})];case 3:return c=h.sent(),(f=De(c.response))&&(e.systemClockOffset=ke(f,e.systemClockOffset)),[2,c]}})})}}}(e),Ne)}}},Le=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,je=function(e){var t=Object(g.e)(e,2),n=t[0],r=t[1],i=n.indexOf("/"),o=n.substring(0,i),s=n.substring(i+1);return"api"===o&&(s=s.toLowerCase()),[o,s,r].filter(function(e){return e&&e.length>0}).map(function(e){return null==e?void 0:e.replace(Le,"_")}).join("/")},Re={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},Ue=function(e){return{applyToStack:function(t){var n;t.add((n=e,function(e,t){return function(r){return Object(g.b)(void 0,void 0,void 0,function(){var i,o,s,a,u,c,l,d,f;return Object(g.d)(this,function(p){switch(p.label){case 0:return i=r.request,E.a.isInstance(i)?(o=i.headers,s=(null===(d=null==t?void 0:t.userAgent)||void 0===d?void 0:d.map(je))||[],[4,n.defaultUserAgentProvider()]):[2,e(r)];case 1:return a=p.sent().map(je),u=(null===(f=null==n?void 0:n.customUserAgent)||void 0===f?void 0:f.map(je))||[],c=Object(g.g)(Object(g.g)(Object(g.g)([],Object(g.e)(a),!1),Object(g.e)(s),!1),Object(g.e)(u),!1).join(" "),l=Object(g.g)(Object(g.g)([],Object(g.e)(a.filter(function(e){return e.startsWith("aws-sdk-")})),!1),Object(g.e)(u),!1).join(" "),"browser"!==n.runtime?(l&&(o["x-amz-user-agent"]=o["x-amz-user-agent"]?"".concat(o["user-agent"]," ").concat(l):l),o["user-agent"]=c):o["x-amz-user-agent"]=c,[2,e(Object(g.a)(Object(g.a)({},r),{request:i}))]}})})}}),Re)}}},Fe=n(5),Be=n(191),ze=n(190),qe=function(){function e(e){"function"==typeof e?this.configProvider=e().then(function(e){return e||{}}):(this.config=null!=e?e:{},this.configProvider=Promise.resolve(this.config))}return e.prototype.destroy=function(){},e.prototype.handle=function(e,t){var n=(void 0===t?{}:t).abortSignal;return Object(g.b)(this,void 0,void 0,function(){var t,r,i,o,s,a,u,c,l,d,f,p;return Object(g.d)(this,function(h){switch(h.label){case 0:return this.config?[3,2]:(t=this,[4,this.configProvider]);case 1:t.config=h.sent(),h.label=2;case 2:return r=this.config.requestTimeout,(null==n?void 0:n.aborted)?((i=new Error("Request aborted")).name="AbortError",[2,Promise.reject(i)]):(o=e.path,e.query&&(s=function(e){var t,n,r=[];try{for(var i=Object(g.h)(Object.keys(e).sort()),o=i.next();!o.done;o=i.next()){var s=o.value,a=e[s];if(s=be(s),Array.isArray(a))for(var u=0,c=a.length;u<c;u++)r.push("".concat(s,"=").concat(be(a[u])));else{var l=s;(a||"string"==typeof a)&&(l+="=".concat(be(a))),r.push(l)}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r.join("&")}(e.query))&&(o+="?".concat(s)),a=e.port,u=e.method,c="".concat(e.protocol,"//").concat(e.hostname).concat(a?":".concat(a):"").concat(o),l="GET"===u||"HEAD"===u?void 0:e.body,d={body:l,headers:new Headers(e.headers),method:u},"undefined"!=typeof AbortController&&(d.signal=n),f=new Request(c,d),p=[fetch(f).then(function(e){var t,n,r=e.headers,i={};try{for(var o=Object(g.h)(r.entries()),s=o.next();!s.done;s=o.next()){var a=s.value;i[a[0]]=a[1]}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return void 0!==e.body?{response:new E.b({headers:i,statusCode:e.status,body:e.body})}:e.blob().then(function(t){return{response:new E.b({headers:i,statusCode:e.status,body:t})}})}),(v=r,void 0===v&&(v=0),new Promise(function(e,t){v&&setTimeout(function(){var e=new Error("Request did not complete within ".concat(v," ms"));e.name="TimeoutError",t(e)},v)}))],n&&p.push(new Promise(function(e,t){n.onabort=function(){var e=new Error("Request aborted");e.name="AbortError",t(e)}})),[2,Promise.race(p)])}var v})})},e}(),Ke={},$e=new Array(64),Ve=0,Ge="A".charCodeAt(0),We="Z".charCodeAt(0);Ve+Ge<=We;Ve++){var He=String.fromCharCode(Ve+Ge);Ke[He]=Ve,$e[Ve]=He}for(Ve=0,Ge="a".charCodeAt(0),We="z".charCodeAt(0);Ve+Ge<=We;Ve++){He=String.fromCharCode(Ve+Ge);var Je=Ve+26;Ke[He]=Je,$e[Je]=He}for(Ve=0;Ve<10;Ve++)Ke[Ve.toString(10)]=Ve+52,He=Ve.toString(10),Je=Ve+52,Ke[He]=Je,$e[Je]=He;Ke["+"]=62,$e[62]="+",Ke["/"]=63,$e[63]="/";var Ye=function(e){return"function"==typeof Blob&&e instanceof Blob?function(e){return Object(g.b)(this,void 0,void 0,function(){var t,n;return Object(g.d)(this,function(r){switch(r.label){case 0:return[4,a(e)];case 1:return t=r.sent(),n=o(t),[2,new Uint8Array(n)]}})})}(e):function(e){return Object(g.b)(this,void 0,void 0,function(){var t,n,r,i,o,s,a;return Object(g.d)(this,function(u){switch(u.label){case 0:t=new Uint8Array(0),n=e.getReader(),r=!1,u.label=1;case 1:return r?[3,3]:[4,n.read()];case 2:return i=u.sent(),o=i.done,(s=i.value)&&(a=t,(t=new Uint8Array(a.length+s.length)).set(a),t.set(s,a.length)),r=o,[3,1];case 3:return[2,t]}})})}(e)},Ze=function(e){if("string"==typeof e){for(var t=e.length,n=t-1;n>=0;n--){var r=e.charCodeAt(n);r>127&&r<=2047?t++:r>2047&&r<=65535&&(t+=2),r>=56320&&r<=57343&&n--}return t}if("number"==typeof e.byteLength)return e.byteLength;if("number"==typeof e.size)return e.size;throw new Error("Body Length computation failed for ".concat(e))},Xe=n(58),Qe=n.n(Xe),et=function(e){var t=e.serviceId,n=e.clientVersion;return function(){return Object(g.b)(void 0,void 0,void 0,function(){var e,r,i,o,s,a,u,c,l;return Object(g.d)(this,function(d){return e="undefined"!=typeof window&&(null===(i=null===window||void 0===window?void 0:window.navigator)||void 0===i?void 0:i.userAgent)?Qe.a.parse(window.navigator.userAgent):void 0,r=[["aws-sdk-js",n],["os/".concat((null===(o=null==e?void 0:e.os)||void 0===o?void 0:o.name)||"other"),null===(s=null==e?void 0:e.os)||void 0===s?void 0:s.version],["lang/js"],["md/browser","".concat(null!==(u=null===(a=null==e?void 0:e.browser)||void 0===a?void 0:a.name)&&void 0!==u?u:"unknown","_").concat(null!==(l=null===(c=null==e?void 0:e.browser)||void 0===c?void 0:c.version)&&void 0!==l?l:"unknown")]],t&&r.push(["api/".concat(t),n]),[2,r]})})}},tt=function(e){return"function"==typeof TextEncoder?function(e){return(new TextEncoder).encode(e)}(e):function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e.charCodeAt(n);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192,63&i|128);else if(n+1<e.length&&55296==(64512&i)&&56320==(64512&e.charCodeAt(n+1))){var o=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n));t.push(o>>18|240,o>>12&63|128,o>>6&63|128,63&o|128)}else t.push(i>>12|224,i>>6&63|128,63&i|128)}return Uint8Array.from(t)}(e)},nt=function(e){return"function"==typeof TextDecoder?function(e){return new TextDecoder("utf-8").decode(e)}(e):function(e){for(var t="",n=0,r=e.length;n<r;n++){var i=e[n];if(i<128)t+=String.fromCharCode(i);else if(192<=i&&i<224){var o=e[++n];t+=String.fromCharCode((31&i)<<6|63&o)}else if(240<=i&&i<365){var s="%"+[i,e[++n],e[++n],e[++n]].map(function(e){return e.toString(16)}).join("%");t+=decodeURIComponent(s)}else t+=String.fromCharCode((15&i)<<12|(63&e[++n])<<6|63&e[++n])}return t}(e)},rt=function(e){if("string"==typeof e)return rt(new URL(e));var t,n=e,r=n.hostname,i=n.pathname,o=n.port,s=n.protocol,a=n.search;return a&&(t=function(e){var t,n,r={};if(e=e.replace(/^\?/,""))try{for(var i=Object(g.h)(e.split("&")),o=i.next();!o.done;o=i.next()){var s=o.value,a=Object(g.e)(s.split("="),2),u=a[0],c=a[1],l=void 0===c?null:c;u=decodeURIComponent(u),l&&(l=decodeURIComponent(l)),u in r?Array.isArray(r[u])?r[u].push(l):r[u]=[r[u],l]:r[u]=l}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}(a)),{hostname:r,port:o?parseInt(o):void 0,protocol:s,path:i,query:t}},it={"us-east-1":{variants:[{hostname:"runtime-fips.lex.us-east-1.amazonaws.com",tags:["fips"]}]},"us-gov-west-1":{variants:[{hostname:"runtime-fips.lex.us-gov-west-1.amazonaws.com",tags:["fips"]}]},"us-west-2":{variants:[{hostname:"runtime-fips.lex.us-west-2.amazonaws.com",tags:["fips"]}]}},ot={aws:{regions:["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-northeast-3","ap-south-1","ap-southeast-1","ap-southeast-2","ap-southeast-3","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-central-1","me-south-1","sa-east-1","us-east-1","us-east-1-fips","us-east-2","us-west-1","us-west-2","us-west-2-fips"],regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",variants:[{hostname:"runtime.lex.{region}.amazonaws.com",tags:[]},{hostname:"runtime-fips.lex.{region}.amazonaws.com",tags:["fips"]},{hostname:"runtime.lex-fips.{region}.api.aws",tags:["dualstack","fips"]},{hostname:"runtime.lex.{region}.api.aws",tags:["dualstack"]}]},"aws-cn":{regions:["cn-north-1","cn-northwest-1"],regionRegex:"^cn\\-\\w+\\-\\d+$",variants:[{hostname:"runtime.lex.{region}.amazonaws.com.cn",tags:[]},{hostname:"runtime.lex-fips.{region}.amazonaws.com.cn",tags:["fips"]},{hostname:"runtime.lex-fips.{region}.api.amazonwebservices.com.cn",tags:["dualstack","fips"]},{hostname:"runtime.lex.{region}.api.amazonwebservices.com.cn",tags:["dualstack"]}]},"aws-iso":{regions:["us-iso-east-1","us-iso-west-1"],regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",variants:[{hostname:"runtime.lex.{region}.c2s.ic.gov",tags:[]},{hostname:"runtime.lex-fips.{region}.c2s.ic.gov",tags:["fips"]}]},"aws-iso-b":{regions:["us-isob-east-1"],regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",variants:[{hostname:"runtime.lex.{region}.sc2s.sgov.gov",tags:[]},{hostname:"runtime.lex-fips.{region}.sc2s.sgov.gov",tags:["fips"]}]},"aws-us-gov":{regions:["us-gov-east-1","us-gov-west-1","us-gov-west-1-fips"],regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",variants:[{hostname:"runtime.lex.{region}.amazonaws.com",tags:[]},{hostname:"runtime-fips.lex.{region}.amazonaws.com",tags:["fips"]},{hostname:"runtime.lex-fips.{region}.api.aws",tags:["dualstack","fips"]},{hostname:"runtime.lex.{region}.api.aws",tags:["dualstack"]}]}},st=function(e,t){return Object(g.b)(void 0,void 0,void 0,function(){return Object(g.d)(this,function(n){return[2,S(e,Object(g.a)(Object(g.a)({},t),{signingService:"lex",regionHash:it,partitionHash:ot}))]})})},at=n(98),ut=function(e){var t,n,r,i,a,u,c,l,d,f,p,h,v,y,m,b,w=Object(at.a)(e),_=function(){return w().then(Fe.l)},S=function(e){var t,n,r,i,o;return{apiVersion:"2016-11-28",disableHostPrefix:null!==(t=null==e?void 0:e.disableHostPrefix)&&void 0!==t&&t,logger:null!==(n=null==e?void 0:e.logger)&&void 0!==n?n:{},regionInfoProvider:null!==(r=null==e?void 0:e.regionInfoProvider)&&void 0!==r?r:st,serviceId:null!==(i=null==e?void 0:e.serviceId)&&void 0!==i?i:"Lex Runtime Service",urlParser:null!==(o=null==e?void 0:e.urlParser)&&void 0!==o?o:rt}}(e);return Object(g.a)(Object(g.a)(Object(g.a)({},S),e),{runtime:"browser",defaultsMode:w,base64Decoder:null!==(t=null==e?void 0:e.base64Decoder)&&void 0!==t?t:o,base64Encoder:null!==(n=null==e?void 0:e.base64Encoder)&&void 0!==n?n:s,bodyLengthChecker:null!==(r=null==e?void 0:e.bodyLengthChecker)&&void 0!==r?r:Ze,credentialDefaultProvider:null!==(i=null==e?void 0:e.credentialDefaultProvider)&&void 0!==i?i:function(e){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:null!==(a=null==e?void 0:e.defaultUserAgentProvider)&&void 0!==a?a:et({serviceId:S.serviceId,clientVersion:Be.version}),maxAttempts:null!==(u=null==e?void 0:e.maxAttempts)&&void 0!==u?u:3,region:null!==(c=null==e?void 0:e.region)&&void 0!==c?c:(b="Region is missing",function(){return Promise.reject(b)}),requestHandler:null!==(l=null==e?void 0:e.requestHandler)&&void 0!==l?l:new qe(_),retryMode:null!==(d=null==e?void 0:e.retryMode)&&void 0!==d?d:function(){return Object(g.b)(void 0,void 0,void 0,function(){return Object(g.d)(this,function(e){switch(e.label){case 0:return[4,_()];case 1:return[2,e.sent().retryMode||D]}})})},sha256:null!==(f=null==e?void 0:e.sha256)&&void 0!==f?f:ze.Sha256,streamCollector:null!==(p=null==e?void 0:e.streamCollector)&&void 0!==p?p:Ye,useDualstackEndpoint:null!==(h=null==e?void 0:e.useDualstackEndpoint)&&void 0!==h?h:function(){return Promise.resolve(!1)},useFipsEndpoint:null!==(v=null==e?void 0:e.useFipsEndpoint)&&void 0!==v?v:function(){return Promise.resolve(!1)},utf8Decoder:null!==(y=null==e?void 0:e.utf8Decoder)&&void 0!==y?y:tt,utf8Encoder:null!==(m=null==e?void 0:e.utf8Encoder)&&void 0!==m?m:nt})},ct=function(e){function t(t){var n,r,i,o=this,s=function(e){var t=e.region,n=e.useFipsEndpoint;if(!t)throw new Error("Region is missing");return Object(g.a)(Object(g.a)({},e),{region:function(){return Object(g.b)(void 0,void 0,void 0,function(){var e;return Object(g.d)(this,function(n){switch(n.label){case 0:return"string"==typeof t?[2,w(t)]:[4,t()];case 1:return e=n.sent(),[2,w(e)]}})})},useFipsEndpoint:function(){return Object(g.b)(void 0,void 0,void 0,function(){var e;return Object(g.d)(this,function(r){switch(r.label){case 0:return"string"!=typeof t?[3,1]:(e=t,[3,3]);case 1:return[4,t()];case 2:e=r.sent(),r.label=3;case 3:return b(e)?[2,!0]:[2,"boolean"==typeof n?Promise.resolve(n):n()]}})})}})}(ut(t)),a=m(s),u=function(e){return Object(g.a)(Object(g.a)({},e),{customUserAgent:"string"==typeof e.customUserAgent?[[e.customUserAgent]]:e.customUserAgent})}(function(e){var t,n=e.credentials?Te(e.credentials):e.credentialDefaultProvider(e),r=e.signingEscapePath,i=void 0===r||r,o=e.systemClockOffset,s=void 0===o?e.systemClockOffset||0:o,a=e.sha256;return t=e.signer?Object(y.a)(e.signer):e.regionInfoProvider?function(){return Object(y.a)(e.region)().then(function(t){return Object(g.b)(void 0,void 0,void 0,function(){var n,r,i,o;return Object(g.d)(this,function(s){switch(s.label){case 0:return r=(n=e).regionInfoProvider,i=[t],o={},[4,e.useFipsEndpoint()];case 1:return o.useFipsEndpoint=s.sent(),[4,e.useDualstackEndpoint()];case 2:return[4,r.apply(n,i.concat([(o.useDualstackEndpoint=s.sent(),o)]))];case 3:return[2,[s.sent()||{},t]]}})})}).then(function(t){var r=Object(g.e)(t,2),o=r[0],s=r[1],u=o.signingRegion,c=o.signingService;e.signingRegion=e.signingRegion||u||s,e.signingName=e.signingName||c||e.serviceId;var l=Object(g.a)(Object(g.a)({},e),{credentials:n,region:e.signingRegion,service:e.signingName,sha256:a,uriEscapePath:i});return new(e.signerConstructor||Oe)(l)})}:function(t){return Object(g.b)(void 0,void 0,void 0,function(){var r,o,s;return Object(g.d)(this,function(u){if(!t)throw new Error("Unexpected empty auth scheme config");return r=t.signingScope,o=t.signingName,e.signingRegion=e.signingRegion||r,e.signingName=e.signingName||o||e.serviceId,s=Object(g.a)(Object(g.a)({},e),{credentials:n,region:e.signingRegion,service:e.signingName,sha256:a,uriEscapePath:i}),[2,new(e.signerConstructor||Oe)(s)]})})},Object(g.a)(Object(g.a)({},e),{systemClockOffset:s,signingEscapePath:i,credentials:n,signer:t})}((n=a,i=Object(y.a)(null!==(r=n.maxAttempts)&&void 0!==r?r:3),Object(g.a)(Object(g.a)({},n),{maxAttempts:i,retryStrategy:function(){return Object(g.b)(void 0,void 0,void 0,function(){return Object(g.d)(this,function(e){switch(e.label){case 0:return n.retryStrategy?[2,n.retryStrategy]:[4,Object(y.a)(n.retryMode)()];case 1:return e.sent()===l.ADAPTIVE?[2,new X(i)]:[2,new J(i)]}})})}}))));return(o=e.call(this,u)||this).config=u,o.middlewareStack.use(ee(o.config)),o.middlewareStack.use(A(o.config)),o.middlewareStack.use(I(o.config)),o.middlewareStack.use(T(o.config)),o.middlewareStack.use(Object(P.a)(o.config)),o.middlewareStack.use(Me(o.config)),o.middlewareStack.use(Ue(o.config)),o}return Object(g.c)(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(Fe.a),lt={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},dt={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0},ft=n(32),pt=n(70),ht=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Object(g.c)(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(u(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"LexRuntimeServiceClient",commandName:"PostTextCommand",inputFilterSensitiveLog:ft.l,outputFilterSensitiveLog:ft.m},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},i)},t.prototype.serialize=function(e,t){return Object(pt.d)(e,t)},t.prototype.deserialize=function(e,t){return Object(pt.b)(e,t)},t}(Fe.b),vt=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Object(g.c)(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(u(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"LexRuntimeServiceClient",commandName:"PostContentCommand",inputFilterSensitiveLog:ft.j,outputFilterSensitiveLog:ft.k},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},i)},t.prototype.serialize=function(e,t){return Object(pt.c)(e,t)},t.prototype.deserialize=function(e,t){return Object(pt.a)(e,t)},t}(Fe.b),gt=n(80),yt=n(49),mt=Uint8Array,bt=Uint16Array,wt=Uint32Array,_t=new mt([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),St=new mt([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Et=(new mt([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),function(e,t){for(var n=new bt(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var i=new wt(n[30]);for(r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)i[o]=o-n[r]<<5|r;return[n,i]}),Ct=Et(_t,2),At=Ct[0],Ot=Ct[1];At[28]=258,Ot[258]=28;for(var It=Et(St,0),xt=(It[0],It[1],new bt(32768)),Tt=0;Tt<32768;++Tt){var Pt=(43690&Tt)>>>1|(21845&Tt)<<1;Pt=(61680&(Pt=(52428&Pt)>>>2|(13107&Pt)<<2))>>>4|(3855&Pt)<<4,xt[Tt]=((65280&Pt)>>>8|(255&Pt)<<8)>>>1}var kt=new mt(288);for(Tt=0;Tt<144;++Tt)kt[Tt]=8;for(Tt=144;Tt<256;++Tt)kt[Tt]=9;for(Tt=256;Tt<280;++Tt)kt[Tt]=7;for(Tt=280;Tt<288;++Tt)kt[Tt]=8;var Dt=new mt(32);for(Tt=0;Tt<32;++Tt)Dt[Tt]=5;var Nt=new mt(0),Mt="undefined"!=typeof TextDecoder&&new TextDecoder;try{Mt.decode(Nt,{stream:!0})}catch(e){}"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;var Lt,jt=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},Rt=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},Ut=function(e){return jt(void 0,void 0,void 0,function(){return Rt(this,function(t){return e instanceof Blob||e instanceof ReadableStream?[2,new Response(e).arrayBuffer().then(function(e){return new Uint8Array(e)})]:[2,Promise.reject("Invalid content type")]})})},Ft=(Lt=function(e,t){return(Lt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Lt(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Bt=function(){return(Bt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},zt=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},qt=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],
i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},Kt=new d.a("AWSLexProvider"),$t=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,t)||this;return n._botsCompleteCallback={},n}return Ft(t,e),t.prototype.getProviderName=function(){return"AWSLexProvider"},t.prototype.configure=function(t){void 0===t&&(t={});var n=["name","alias","region"];return Object.keys(t).forEach(function(e){var r=t[e];if(!n.every(function(e){return e in r}))throw new Error("invalid bot configuration")}),e.prototype.configure.call(this,t)},t.prototype.reportBotStatus=function(e,t){var n=this;Kt.debug("postContent state",e.dialogState),"ReadyForFulfillment"!==e.dialogState&&"Fulfilled"!==e.dialogState||("function"==typeof this._botsCompleteCallback[t]&&setTimeout(function(){return n._botsCompleteCallback[t](null,e)},0),this._config&&"function"==typeof this._config[t].onComplete&&setTimeout(function(){return n._config[t].onComplete(null,e)},0)),"Failed"===e.dialogState&&("function"==typeof this._botsCompleteCallback[t]&&setTimeout(function(){return n._botsCompleteCallback[t]("Bot conversation failed")},0),this._config&&"function"==typeof this._config[t].onComplete&&setTimeout(function(){return n._config[t].onComplete("Bot conversation failed")},0))},t.prototype.sendMessage=function(e,t){return zt(this,void 0,void 0,function(){var n,r,i,o,s,a,u,l,d,f,p,h,v;return qt(this,function(g){switch(g.label){case 0:if(!this._config[e])return[2,Promise.reject("Bot "+e+" does not exist")];g.label=1;case 1:return g.trys.push([1,3,,4]),[4,gt.a.get()];case 2:return n=g.sent(),[3,4];case 3:return g.sent(),[2,Promise.reject("No credentials")];case 4:if(this.lexRuntimeServiceClient=new ct({region:this._config[e].region,credentials:n,customUserAgent:Object(yt.b)()}),"string"!=typeof t)return[3,9];r={botAlias:this._config[e].alias,botName:e,inputText:t,userId:n.identityId},Kt.debug("postText to lex",t),g.label=5;case 5:return g.trys.push([5,7,,8]),i=new ht(r),[4,this.lexRuntimeServiceClient.send(i)];case 6:return d=g.sent(),this.reportBotStatus(d,e),[2,d];case 7:return o=g.sent(),[2,Promise.reject(o)];case 8:return[3,21];case 9:return s=t.content,"voice"!==t.options.messageType?[3,13]:"object"!==c(s)?[2,Promise.reject("invalid content type")]:s instanceof Uint8Array?(u=s,[3,12]):[3,10];case 10:return[4,Ut(s)];case 11:u=g.sent(),g.label=12;case 12:return a=u,r={botAlias:this._config[e].alias,botName:e,contentType:"audio/x-l16; sample-rate=16000; channel-count=1",userId:n.identityId,accept:"audio/mpeg",inputStream:a},[3,14];case 13:if("string"!=typeof s)return[2,Promise.reject("invalid content type")];r={botAlias:this._config[e].alias,botName:e,contentType:"text/plain; charset=utf-8",inputStream:s,userId:n.identityId,accept:"audio/mpeg"},g.label=14;case 14:Kt.debug("postContent to lex",t),g.label=15;case 15:return g.trys.push([15,20,,21]),l=new vt(r),[4,this.lexRuntimeServiceClient.send(l)];case 16:return(d=g.sent()).audioStream?[4,Ut(d.audioStream)]:[3,18];case 17:return p=g.sent(),[3,19];case 18:p=void 0,g.label=19;case 19:return f=p,h=Bt(Bt({},d),{audioStream:f}),this.reportBotStatus(h,e),[2,h];case 20:return v=g.sent(),[2,Promise.reject(v)];case 21:return[2]}})})},t.prototype.onComplete=function(e,t){if(!this._config[e])throw new Error("Bot "+e+" does not exist");this._botsCompleteCallback[e]=t},t}(v),Vt=function(){return(Vt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Gt=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},Wt=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},Ht=new d.a("Interactions"),Jt=new(function(){function e(e){void 0===e&&(e={}),this._options=e,Ht.debug("Interactions Options",this._options),this._pluggables={}}return e.prototype.getModuleName=function(){return"Interactions"},e.prototype.configure=function(e){var t=this,n=e?e.Interactions||e:{};Ht.debug("configure Interactions",{opt:n}),this._options=Vt(Vt({bots:{}},n),n.Interactions);var r=this._options.aws_bots_config,i=this._options.bots;return!Object.keys(i).length&&r&&Array.isArray(r)&&r.forEach(function(e){t._options.bots[e.name]=e}),Object.keys(i).forEach(function(e){var n,r=i[e],o=r.providerName||"AWSLexProvider";t._pluggables.AWSLexProvider||"AWSLexProvider"!==o||(t._pluggables.AWSLexProvider=new $t),t._pluggables[o]?t._pluggables[o].configure(((n={})[r.name]=r,n)):Ht.debug("bot "+r.name+" was not configured as "+o+" provider was not found")}),this._options},e.prototype.addPluggable=function(e){var t=this;if(e&&"Interactions"===e.getCategory()){if(this._pluggables[e.getProviderName()])throw new Error("Pluggable "+e.getProviderName()+" already plugged");return Object.keys(this._options.bots).filter(function(n){return t._options.bots[n].providerName===e.getProviderName()}).forEach(function(n){var r,i=t._options.bots[n];e.configure(((r={})[i.name]=i,r))}),void(this._pluggables[e.getProviderName()]=e)}},e.prototype.send=function(e,t){return Gt(this,void 0,void 0,function(){var n;return Wt(this,function(r){switch(r.label){case 0:return this._options.bots&&this._options.bots[e]?(n=this._options.bots[e].providerName||"AWSLexProvider",this._pluggables[n]?[4,this._pluggables[n].sendMessage(e,t)]:[2,Promise.reject("Bot "+n+" does not have valid pluggin did you try addPluggable first?")]):[2,Promise.reject("Bot "+e+" does not exist")];case 1:return[2,r.sent()]}})})},e.prototype.onComplete=function(e,t){if(!this._options.bots||!this._options.bots[e])throw new Error("Bot "+e+" does not exist");var n=this._options.bots[e].providerName||"AWSLexProvider";if(!this._pluggables[n])throw new Error("Bot "+n+" does not have valid pluggin did you try addPluggable first?");this._pluggables[n].onComplete(e,t)},e}());f.a.register(Jt)},function(e,t,n){"use strict";function r(e,t){function n(){this.constructor=e}if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");rt(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function i(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})}function o(e,t){function n(n){return function(u){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,n[0]&&(a=0)),a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,u])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s}function s(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}n.d(t,"a",function(){return Fn});var a,u,c,l,d,f,p,h,v,g,y,m,b,w,_,S,E,C,A,O,I,x,T,P,k,D,N,M,L,j,R,U,F,B,z,q,K,$,V,G,W,H,J,Y,Z,X,Q,ee,te,ne,re,ie,oe,se,ae,ue,ce,le,de,fe,pe,he,ve,ge,ye,me,be,we,_e,Se,Ee,Ce,Ae,Oe,Ie,xe,Te,Pe,ke,De,Ne,Me,Le,je,Re,Ue,Fe,Be,ze,qe,Ke,$e,Ve,Ge,We,He,Je,Ye,Ze,Xe,Qe,et,tt,nt,rt=function(e,t){return(rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},it=function(){return(it=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.create,Object.create,(a||(a={})).filterSensitiveLog=function(e){return it({},e)},(u||(u={})).filterSensitiveLog=function(e){return it({},e)},(c||(c={})).filterSensitiveLog=function(e){return it({},e)},(l||(l={})).filterSensitiveLog=function(e){return it({},e)},(d||(d={})).filterSensitiveLog=function(e){return it({},e)},(f||(f={})).filterSensitiveLog=function(e){return it({},e)},(p||(p={})).filterSensitiveLog=function(e){return it({},e)},(h||(h={})).filterSensitiveLog=function(e){return it({},e)},(v||(v={})).filterSensitiveLog=function(e){return it({},e)},(g||(g={})).filterSensitiveLog=function(e){return it({},e)},(y||(y={})).filterSensitiveLog=function(e){return it({},e)},(m||(m={})).filterSensitiveLog=function(e){return it({},e)},(b||(b={})).filterSensitiveLog=function(e){return it({},e)},(w||(w={})).filterSensitiveLog=function(e){return it({},e)},(_||(_={})).filterSensitiveLog=function(e){return it({},e)},(S||(S={})).filterSensitiveLog=function(e){return it({},e)},(E||(E={})).filterSensitiveLog=function(e){return it({},e)},(C||(C={})).filterSensitiveLog=function(e){return it({},e)},(A||(A={})).filterSensitiveLog=function(e){return it({},e)},(O||(O={})).filterSensitiveLog=function(e){return it({},e)},(I||(I={})).filterSensitiveLog=function(e){return it({},e)},(x||(x={})).filterSensitiveLog=function(e){return it({},e)},(T||(T={})).filterSensitiveLog=function(e){return it({},e)},(P||(P={})).filterSensitiveLog=function(e){return it({},e)},(k||(k={})).filterSensitiveLog=function(e){return it({},e)},(D||(D={})).filterSensitiveLog=function(e){return it({},e)},function(e){e.CANCELLED="CANCELLED",e.COMPLETED="COMPLETED",e.FAILED="FAILED",e.PENDING="PENDING",e.PENDING_CANCEL="PENDING_CANCEL",e.RUNNING="RUNNING"}(N||(N={})),(M||(M={})).filterSensitiveLog=function(e){return it({},e)},(L||(L={})).filterSensitiveLog=function(e){return it({},e)},(j||(j={})).filterSensitiveLog=function(e){return it({},e)},(R||(R={})).filterSensitiveLog=function(e){return it({},e)},(U||(U={})).filterSensitiveLog=function(e){return it({},e)},(F||(F={})).filterSensitiveLog=function(e){return it({},e)},(B||(B={})).filterSensitiveLog=function(e){return it({},e)},(z||(z={})).filterSensitiveLog=function(e){return it({},e)},function(e){e.LastEventTime="LastEventTime",e.LogStreamName="LogStreamName"}(q||(q={})),(K||(K={})).filterSensitiveLog=function(e){return it({},e)},($||($={})).filterSensitiveLog=function(e){return it({},e)},(V||(V={})).filterSensitiveLog=function(e){return it({},e)},(G||(G={})).filterSensitiveLog=function(e){return it({},e)},(W||(W={})).filterSensitiveLog=function(e){return it({},e)},(H||(H={})).filterSensitiveLog=function(e){return it({},e)},(J||(J={})).filterSensitiveLog=function(e){return it({},e)},function(e){e.Cancelled="Cancelled",e.Complete="Complete",e.Failed="Failed",e.Running="Running",e.Scheduled="Scheduled"}(Y||(Y={})),(Z||(Z={})).filterSensitiveLog=function(e){return it({},e)},(X||(X={})).filterSensitiveLog=function(e){return it({},e)},(Q||(Q={})).filterSensitiveLog=function(e){return it({},e)},(ee||(ee={})).filterSensitiveLog=function(e){return it({},e)},(te||(te={})).filterSensitiveLog=function(e){return it({},e)},(ne||(ne={})).filterSensitiveLog=function(e){return it({},e)},(re||(re={})).filterSensitiveLog=function(e){return it({},e)},(ie||(ie={})).filterSensitiveLog=function(e){return it({},e)},(oe||(oe={})).filterSensitiveLog=function(e){return it({},e)},(se||(se={})).filterSensitiveLog=function(e){return it({},e)},function(e){e.ByLogStream="ByLogStream",e.Random="Random"}(ae||(ae={})),(ue||(ue={})).filterSensitiveLog=function(e){return it({},e)},(ce||(ce={})).filterSensitiveLog=function(e){return it({},e)},(le||(le={})).filterSensitiveLog=function(e){return it({},e)},(de||(de={})).filterSensitiveLog=function(e){return it({},e)},(fe||(fe={})).filterSensitiveLog=function(e){return it({},e)},(pe||(pe={})).filterSensitiveLog=function(e){return it({},e)},(he||(he={})).filterSensitiveLog=function(e){return it({},e)},(ve||(ve={})).filterSensitiveLog=function(e){return it({},e)},(ge||(ge={})).filterSensitiveLog=function(e){return it({},e)},(ye||(ye={})).filterSensitiveLog=function(e){return it({},e)},(me||(me={})).filterSensitiveLog=function(e){return it({},e)},(be||(be={})).filterSensitiveLog=function(e){return it({},e)},(we||(we={})).filterSensitiveLog=function(e){return it({},e)},(_e||(_e={})).filterSensitiveLog=function(e){return it({},e)},(Se||(Se={})).filterSensitiveLog=function(e){return it({},e)},(Ee||(Ee={})).filterSensitiveLog=function(e){return it({},e)},(Ce||(Ce={})).filterSensitiveLog=function(e){return it({},e)},(Ae||(Ae={})).filterSensitiveLog=function(e){return it({},e)},(Oe||(Oe={})).filterSensitiveLog=function(e){return it({},e)},(Ie||(Ie={})).filterSensitiveLog=function(e){return it({},e)},(xe||(xe={})).filterSensitiveLog=function(e){return it({},e)},(Te||(Te={})).filterSensitiveLog=function(e){return it({},e)},(Pe||(Pe={})).filterSensitiveLog=function(e){return it({},e)},(ke||(ke={})).filterSensitiveLog=function(e){return it({},e)},(De||(De={})).filterSensitiveLog=function(e){return it({},e)},(Ne||(Ne={})).filterSensitiveLog=function(e){return it({},e)},(Me||(Me={})).filterSensitiveLog=function(e){return it({},e)},(Le||(Le={})).filterSensitiveLog=function(e){return it({},e)},(je||(je={})).filterSensitiveLog=function(e){return it({},e)},(Re||(Re={})).filterSensitiveLog=function(e){return it({},e)},(Ue||(Ue={})).filterSensitiveLog=function(e){return it({},e)},(Fe||(Fe={})).filterSensitiveLog=function(e){return it({},e)},(Be||(Be={})).filterSensitiveLog=function(e){return it({},e)},(ze||(ze={})).filterSensitiveLog=function(e){return it({},e)},(qe||(qe={})).filterSensitiveLog=function(e){return it({},e)},(Ke||(Ke={})).filterSensitiveLog=function(e){return it({},e)},($e||($e={})).filterSensitiveLog=function(e){return it({},e)},(Ve||(Ve={})).filterSensitiveLog=function(e){return it({},e)},(Ge||(Ge={})).filterSensitiveLog=function(e){return it({},e)},(We||(We={})).filterSensitiveLog=function(e){return it({},e)},(He||(He={})).filterSensitiveLog=function(e){return it({},e)},(Je||(Je={})).filterSensitiveLog=function(e){return it({},e)},(Ye||(Ye={})).filterSensitiveLog=function(e){return it({},e)},(Ze||(Ze={})).filterSensitiveLog=function(e){return it({},e)},(Xe||(Xe={})).filterSensitiveLog=function(e){return it({},e)},(Qe||(Qe={})).filterSensitiveLog=function(e){return it({},e)},(et||(et={})).filterSensitiveLog=function(e){return it({},e)},(tt||(tt={})).filterSensitiveLog=function(e){return it({},e)},(nt||(nt={})).filterSensitiveLog=function(e){return it({},e)};var ot=n(3),st=function(e,t){return i(void 0,void 0,void 0,function(){var n,r,i,s,a,u,c,l,d,f,p,h;return o(this,function(o){switch(o.label){case 0:return r=[it({},e)],h={},[4,Jt(e.body,t)];case 1:switch(n=it.apply(void 0,r.concat([(h.body=o.sent(),h)])),s="UnknownError",s=Yt(e,n.body)){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,2];case"LimitExceededException":case"com.amazonaws.cloudwatchlogs#LimitExceededException":return[3,4];case"OperationAbortedException":case"com.amazonaws.cloudwatchlogs#OperationAbortedException":return[3,6];case"ResourceAlreadyExistsException":case"com.amazonaws.cloudwatchlogs#ResourceAlreadyExistsException":return[3,8];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,10]}return[3,12];case 2:return a=[{}],[4,pt(n,t)];case 3:return i=it.apply(void 0,[it.apply(void 0,a.concat([o.sent()])),{name:s,$metadata:Gt(e)}]),[3,13];case 4:return u=[{}],[4,vt(n,t)];case 5:return i=it.apply(void 0,[it.apply(void 0,u.concat([o.sent()])),{name:s,$metadata:Gt(e)}]),[3,13];case 6:return c=[{}],[4,gt(n,t)];case 7:return i=it.apply(void 0,[it.apply(void 0,c.concat([o.sent()])),{name:s,$metadata:Gt(e)}]),[3,13];case 8:return l=[{}],[4,yt(n,t)];case 9:return i=it.apply(void 0,[it.apply(void 0,l.concat([o.sent()])),{name:s,$metadata:Gt(e)}]),[3,13];case 10:return d=[{}],[4,bt(n,t)];case 11:return i=it.apply(void 0,[it.apply(void 0,d.concat([o.sent()])),{name:s,$metadata:Gt(e)}]),[3,13];case 12:f=n.body,s=f.code||f.Code||s,i=it(it({},f),{name:""+s,message:f.message||f.Message||s,$fault:"client",$metadata:Gt(e)}),o.label=13;case 13:return p=i.message||i.Message||s,i.message=p,delete i.Message,[2,Promise.reject(Object.assign(new Error(p),i))]}})})},at=function(e,t){return i(void 0,void 0,void 0,function(){var n,r,i,s,a,u,c,l,d,f,p;return o(this,function(o){switch(o.label){case 0:return r=[it({},e)],p={},[4,Jt(e.body,t)];case 1:switch(n=it.apply(void 0,r.concat([(p.body=o.sent(),p)])),s="UnknownError",s=Yt(e,n.body)){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,2];case"ResourceAlreadyExistsException":case"com.amazonaws.cloudwatchlogs#ResourceAlreadyExistsException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.cloudwatchlogs#ResourceNotFoundException":return[3,6];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,8]}return[3,10];case 2:return a=[{}],[4,pt(n,t)];case 3:return i=it.apply(void 0,[it.apply(void 0,a.concat([o.sent()])),{name:s,$metadata:Gt(e)}]),[3,11];case 4:return u=[{}],[4,yt(n,t)];case 5:return i=it.apply(void 0,[it.apply(void 0,u.concat([o.sent()])),{name:s,$metadata:Gt(e)}]),[3,11];case 6:return c=[{}],[4,mt(n,t)];case 7:return i=it.apply(void 0,[it.apply(void 0,c.concat([o.sent()])),{name:s,$metadata:Gt(e)}]),[3,11];case 8:return l=[{}],[4,bt(n,t)];case 9:return i=it.apply(void 0,[it.apply(void 0,l.concat([o.sent()])),{name:s,$metadata:Gt(e)}]),[3,11];case 10:d=n.body,s=d.code||d.Code||s,i=it(it({},d),{name:""+s,message:d.message||d.Message||s,$fault:"client",$metadata:Gt(e)}),o.label=11;case 11:return f=i.message||i.Message||s,i.message=f,delete i.Message,[2,Promise.reject(Object.assign(new Error(f),i))]}})})},ut=function(e,t){return i(void 0,void 0,void 0,function(){var n,r,i,s,a,u,c,l,d;return o(this,function(o){switch(o.label){case 0:return r=[it({},e)],d={},[4,Jt(e.body,t)];case 1:switch(n=it.apply(void 0,r.concat([(d.body=o.sent(),d)])),s="UnknownError",s=Yt(e,n.body)){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,2];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,4]}return[3,6];case 2:return a=[{}],[4,pt(n,t)];case 3:return i=it.apply(void 0,[it.apply(void 0,a.concat([o.sent()])),{name:s,$metadata:Gt(e)}]),[3,7];case 4:return u=[{}],[4,bt(n,t)];case 5:return i=it.apply(void 0,[it.apply(void 0,u.concat([o.sent()])),{name:s,$metadata:Gt(e)}]),[3,7];case 6:c=n.body,s=c.code||c.Code||s,i=it(it({},c),{name:""+s,message:c.message||c.Message||s,$fault:"client",$metadata:Gt(e)}),o.label=7;case 7:return l=i.message||i.Message||s,i.message=l,delete i.Message,[2,Promise.reject(Object.assign(new Error(l),i))]}})})},ct=function(e,t){return i(void 0,void 0,void 0,function(){var n,r,i,s,a,u,c,l,d,f;return o(this,function(o){switch(o.label){case 0:return r=[it({},e)],f={},[4,Jt(e.body,t)];case 1:switch(n=it.apply(void 0,r.concat([(f.body=o.sent(),f)])),s="UnknownError",s=Yt(e,n.body)){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,2];case"ResourceNotFoundException":case"com.amazonaws.cloudwatchlogs#ResourceNotFoundException":return[3,4];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,6]}return[3,8];case 2:return a=[{}],[4,pt(n,t)];case 3:return i=it.apply(void 0,[it.apply(void 0,a.concat([o.sent()])),{name:s,$metadata:Gt(e)}]),[3,9];case 4:return u=[{}],[4,mt(n,t)];case 5:return i=it.apply(void 0,[it.apply(void 0,u.concat([o.sent()])),{name:s,$metadata:Gt(e)}]),[3,9];case 6:return c=[{}],[4,bt(n,t)];case 7:return i=it.apply(void 0,[it.apply(void 0,c.concat([o.sent()])),{name:s,$metadata:Gt(e)}]),[3,9];case 8:l=n.body,s=l.code||l.Code||s,i=it(it({},l),{name:""+s,message:l.message||l.Message||s,$fault:"client",$metadata:Gt(e)}),o.label=9;case 9:return d=i.message||i.Message||s,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},lt=function(e,t){return i(void 0,void 0,void 0,function(){var n,r,i,s,a,u,c,l,d,f;return o(this,function(o){switch(o.label){case 0:return r=[it({},e)],f={},[4,Jt(e.body,t)];case 1:switch(n=it.apply(void 0,r.concat([(f.body=o.sent(),f)])),s="UnknownError",s=Yt(e,n.body)){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,2];case"ResourceNotFoundException":case"com.amazonaws.cloudwatchlogs#ResourceNotFoundException":return[3,4];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,6]}return[3,8];case 2:return a=[{}],[4,pt(n,t)];case 3:return i=it.apply(void 0,[it.apply(void 0,a.concat([o.sent()])),{name:s,$metadata:Gt(e)}]),[3,9];case 4:return u=[{}],[4,mt(n,t)];case 5:return i=it.apply(void 0,[it.apply(void 0,u.concat([o.sent()])),{name:s,$metadata:Gt(e)}]),[3,9];case 6:return c=[{}],[4,bt(n,t)];case 7:return i=it.apply(void 0,[it.apply(void 0,c.concat([o.sent()])),{name:s,$metadata:Gt(e)}]),[3,9];case 8:l=n.body,s=l.code||l.Code||s,i=it(it({},l),{name:""+s,message:l.message||l.Message||s,$fault:"client",$metadata:Gt(e)}),o.label=9;case 9:return d=i.message||i.Message||s,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},dt=function(e,t){return i(void 0,void 0,void 0,function(){var n,r,i,s,a,u,c,l,d,f,p,h,v;return o(this,function(o){switch(o.label){case 0:return r=[it({},e)],v={},[4,Jt(e.body,t)];case 1:switch(n=it.apply(void 0,r.concat([(v.body=o.sent(),v)])),s="UnknownError",s=Yt(e,n.body)){case"DataAlreadyAcceptedException":case"com.amazonaws.cloudwatchlogs#DataAlreadyAcceptedException":return[3,2];case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,4];case"InvalidSequenceTokenException":case"com.amazonaws.cloudwatchlogs#InvalidSequenceTokenException":return[3,6];case"ResourceNotFoundException":case"com.amazonaws.cloudwatchlogs#ResourceNotFoundException":return[3,8];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,10];case"UnrecognizedClientException":case"com.amazonaws.cloudwatchlogs#UnrecognizedClientException":return[3,12]}return[3,14];case 2:return a=[{}],[4,ft(n,t)];case 3:return i=it.apply(void 0,[it.apply(void 0,a.concat([o.sent()])),{name:s,$metadata:Gt(e)}]),[3,15];case 4:return u=[{}],[4,pt(n,t)];case 5:return i=it.apply(void 0,[it.apply(void 0,u.concat([o.sent()])),{name:s,$metadata:Gt(e)}]),[3,15];case 6:return c=[{}],[4,ht(n,t)];case 7:return i=it.apply(void 0,[it.apply(void 0,c.concat([o.sent()])),{name:s,$metadata:Gt(e)}]),[3,15];case 8:return l=[{}],[4,mt(n,t)];case 9:return i=it.apply(void 0,[it.apply(void 0,l.concat([o.sent()])),{name:s,$metadata:Gt(e)}]),[3,15];case 10:return d=[{}],[4,bt(n,t)];case 11:return i=it.apply(void 0,[it.apply(void 0,d.concat([o.sent()])),{name:s,$metadata:Gt(e)}]),[3,15];case 12:return f=[{}],[4,wt(n,t)];case 13:return i=it.apply(void 0,[it.apply(void 0,f.concat([o.sent()])),{name:s,$metadata:Gt(e)}]),[3,15];case 14:p=n.body,s=p.code||p.Code||s,i=it(it({},p),{name:""+s,message:p.message||p.Message||s,$fault:"client",$metadata:Gt(e)}),o.label=15;case 15:return h=i.message||i.Message||s,i.message=h,delete i.Message,[2,Promise.reject(Object.assign(new Error(h),i))]}})})},ft=function(e,t){return i(void 0,void 0,void 0,function(){var n,r;return o(this,function(i){return n=e.body,r=Tt(n,t),[2,it({name:"DataAlreadyAcceptedException",$fault:"client",$metadata:Gt(e)},r)]})})},pt=function(e,t){return i(void 0,void 0,void 0,function(){var n,r;return o(this,function(i){return n=e.body,r=Nt(n,t),[2,it({name:"InvalidParameterException",$fault:"client",$metadata:Gt(e)},r)]})})},ht=function(e,t){return i(void 0,void 0,void 0,function(){var n,r;return o(this,function(i){return n=e.body,r=Mt(n,t),[2,it({name:"InvalidSequenceTokenException",$fault:"client",$metadata:Gt(e)},r)]})})},vt=function(e,t){return i(void 0,void 0,void 0,function(){var n,r;return o(this,function(i){return n=e.body,r=Lt(n,t),[2,it({name:"LimitExceededException",$fault:"client",$metadata:Gt(e)},r)]})})},gt=function(e,t){return i(void 0,void 0,void 0,function(){var n,r;return o(this,function(i){return n=e.body,r=Ut(n,t),[2,it({name:"OperationAbortedException",$fault:"client",$metadata:Gt(e)},r)]})})},yt=function(e,t){return i(void 0,void 0,void 0,function(){var n,r;return o(this,function(i){return n=e.body,r=qt(n,t),[2,it({name:"ResourceAlreadyExistsException",$fault:"client",$metadata:Gt(e)},r)]})})},mt=function(e,t){return i(void 0,void 0,void 0,function(){var n,r;return o(this,function(i){return n=e.body,r=Kt(n,t),[2,it({name:"ResourceNotFoundException",$fault:"client",$metadata:Gt(e)},r)]})})},bt=function(e,t){return i(void 0,void 0,void 0,function(){var n,r;return o(this,function(i){return n=e.body,r=$t(n,t),[2,it({name:"ServiceUnavailableException",$fault:"server",$metadata:Gt(e)},r)]})})},wt=function(e,t){return i(void 0,void 0,void 0,function(){var n,r;return o(this,function(i){return n=e.body,r=Vt(n,t),[2,it({name:"UnrecognizedClientException",$fault:"client",$metadata:Gt(e)},r)]})})},_t=function(e,t){return it(it(it({},void 0!==e.kmsKeyId&&null!==e.kmsKeyId&&{kmsKeyId:e.kmsKeyId}),void 0!==e.logGroupName&&null!==e.logGroupName&&{logGroupName:e.logGroupName}),void 0!==e.tags&&null!==e.tags&&{tags:xt(e.tags,t)})},St=function(e,t){return it(it({},void 0!==e.logGroupName&&null!==e.logGroupName&&{logGroupName:e.logGroupName}),void 0!==e.logStreamName&&null!==e.logStreamName&&{logStreamName:e.logStreamName})},Et=function(e,t){return it(it(it({},void 0!==e.limit&&null!==e.limit&&{limit:e.limit}),void 0!==e.logGroupNamePrefix&&null!==e.logGroupNamePrefix&&{logGroupNamePrefix:e.logGroupNamePrefix}),void 0!==e.nextToken&&null!==e.nextToken&&{nextToken:e.nextToken})},Ct=function(e,t){return it(it(it(it(it(it({},void 0!==e.descending&&null!==e.descending&&{descending:e.descending}),void 0!==e.limit&&null!==e.limit&&{limit:e.limit}),void 0!==e.logGroupName&&null!==e.logGroupName&&{logGroupName:e.logGroupName}),void 0!==e.logStreamNamePrefix&&null!==e.logStreamNamePrefix&&{logStreamNamePrefix:e.logStreamNamePrefix}),void 0!==e.nextToken&&null!==e.nextToken&&{nextToken:e.nextToken}),void 0!==e.orderBy&&null!==e.orderBy&&{orderBy:e.orderBy})},At=function(e,t){return it(it(it(it(it(it(it({},void 0!==e.endTime&&null!==e.endTime&&{endTime:e.endTime}),void 0!==e.limit&&null!==e.limit&&{limit:e.limit}),void 0!==e.logGroupName&&null!==e.logGroupName&&{logGroupName:e.logGroupName}),void 0!==e.logStreamName&&null!==e.logStreamName&&{logStreamName:e.logStreamName}),void 0!==e.nextToken&&null!==e.nextToken&&{nextToken:e.nextToken}),void 0!==e.startFromHead&&null!==e.startFromHead&&{startFromHead:e.startFromHead}),void 0!==e.startTime&&null!==e.startTime&&{startTime:e.startTime})},Ot=function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:function(e,t){return it(it({},void 0!==e.message&&null!==e.message&&{message:e.message}),void 0!==e.timestamp&&null!==e.timestamp&&{timestamp:e.timestamp})}(e)})},It=function(e,t){return it(it(it(it({},void 0!==e.logEvents&&null!==e.logEvents&&{logEvents:Ot(e.logEvents)}),void 0!==e.logGroupName&&null!==e.logGroupName&&{logGroupName:e.logGroupName}),void 0!==e.logStreamName&&null!==e.logStreamName&&{logStreamName:e.logStreamName}),void 0!==e.sequenceToken&&null!==e.sequenceToken&&{sequenceToken:e.sequenceToken})},xt=function(e,t){return Object.entries(e).reduce(function(e,t){var n,r=s(t,2),i=r[0],o=r[1];return null===o?e:it(it({},e),((n={})[i]=o,n))},{})},Tt=function(e,t){return{expectedSequenceToken:void 0!==e.expectedSequenceToken&&null!==e.expectedSequenceToken?e.expectedSequenceToken:void 0,message:void 0!==e.message&&null!==e.message?e.message:void 0}},Pt=function(e,t){return{logGroups:void 0!==e.logGroups&&null!==e.logGroups?jt(e.logGroups,t):void 0,nextToken:void 0!==e.nextToken&&null!==e.nextToken?e.nextToken:void 0}},kt=function(e,t){return{logStreams:void 0!==e.logStreams&&null!==e.logStreams?Rt(e.logStreams,t):void 0,nextToken:void 0!==e.nextToken&&null!==e.nextToken?e.nextToken:void 0}},Dt=function(e,t){return{events:void 0!==e.events&&null!==e.events?Ft(e.events,t):void 0,nextBackwardToken:void 0!==e.nextBackwardToken&&null!==e.nextBackwardToken?e.nextBackwardToken:void 0,nextForwardToken:void 0!==e.nextForwardToken&&null!==e.nextForwardToken?e.nextForwardToken:void 0}},Nt=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Mt=function(e,t){return{expectedSequenceToken:void 0!==e.expectedSequenceToken&&null!==e.expectedSequenceToken?e.expectedSequenceToken:void 0,message:void 0!==e.message&&null!==e.message?e.message:void 0}},Lt=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},jt=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:function(e,t){return{arn:void 0!==e.arn&&null!==e.arn?e.arn:void 0,creationTime:void 0!==e.creationTime&&null!==e.creationTime?e.creationTime:void 0,kmsKeyId:void 0!==e.kmsKeyId&&null!==e.kmsKeyId?e.kmsKeyId:void 0,logGroupName:void 0!==e.logGroupName&&null!==e.logGroupName?e.logGroupName:void 0,metricFilterCount:void 0!==e.metricFilterCount&&null!==e.metricFilterCount?e.metricFilterCount:void 0,retentionInDays:void 0!==e.retentionInDays&&null!==e.retentionInDays?e.retentionInDays:void 0,storedBytes:void 0!==e.storedBytes&&null!==e.storedBytes?e.storedBytes:void 0}}(e)})},Rt=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:function(e,t){return{arn:void 0!==e.arn&&null!==e.arn?e.arn:void 0,creationTime:void 0!==e.creationTime&&null!==e.creationTime?e.creationTime:void 0,
firstEventTimestamp:void 0!==e.firstEventTimestamp&&null!==e.firstEventTimestamp?e.firstEventTimestamp:void 0,lastEventTimestamp:void 0!==e.lastEventTimestamp&&null!==e.lastEventTimestamp?e.lastEventTimestamp:void 0,lastIngestionTime:void 0!==e.lastIngestionTime&&null!==e.lastIngestionTime?e.lastIngestionTime:void 0,logStreamName:void 0!==e.logStreamName&&null!==e.logStreamName?e.logStreamName:void 0,storedBytes:void 0!==e.storedBytes&&null!==e.storedBytes?e.storedBytes:void 0,uploadSequenceToken:void 0!==e.uploadSequenceToken&&null!==e.uploadSequenceToken?e.uploadSequenceToken:void 0}}(e)})},Ut=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Ft=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:function(e,t){return{ingestionTime:void 0!==e.ingestionTime&&null!==e.ingestionTime?e.ingestionTime:void 0,message:void 0!==e.message&&null!==e.message?e.message:void 0,timestamp:void 0!==e.timestamp&&null!==e.timestamp?e.timestamp:void 0}}(e)})},Bt=function(e,t){return{nextSequenceToken:void 0!==e.nextSequenceToken&&null!==e.nextSequenceToken?e.nextSequenceToken:void 0,rejectedLogEventsInfo:void 0!==e.rejectedLogEventsInfo&&null!==e.rejectedLogEventsInfo?zt(e.rejectedLogEventsInfo,t):void 0}},zt=function(e,t){return{expiredLogEventEndIndex:void 0!==e.expiredLogEventEndIndex&&null!==e.expiredLogEventEndIndex?e.expiredLogEventEndIndex:void 0,tooNewLogEventStartIndex:void 0!==e.tooNewLogEventStartIndex&&null!==e.tooNewLogEventStartIndex?e.tooNewLogEventStartIndex:void 0,tooOldLogEventEndIndex:void 0!==e.tooOldLogEventEndIndex&&null!==e.tooOldLogEventEndIndex?e.tooOldLogEventEndIndex:void 0}},qt=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Kt=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},$t=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Vt=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Gt=function(e){var t;return{httpStatusCode:e.statusCode,requestId:null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},Wt=function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)},Ht=function(e,t,n,r,s){return i(void 0,void 0,void 0,function(){var i,a,u,c,l,d;return o(this,function(o){switch(o.label){case 0:return[4,e.endpoint()];case 1:return i=o.sent(),a=i.hostname,u=i.protocol,c=void 0===u?"https":u,l=i.port,d={protocol:c,hostname:a,port:l,method:"POST",path:n,headers:t},void 0!==r&&(d.hostname=r),void 0!==s&&(d.body=s),[2,new ot.a(d)]}})})},Jt=function(e,t){return function(e,t){return Wt(e,t).then(function(e){return t.utf8Encoder(e)})}(e,t).then(function(e){return e.length?JSON.parse(e):{}})},Yt=function(e,t){var n,r,i=function(e){var t=e;return t.indexOf(":")>=0&&(t=t.split(":")[0]),t.indexOf("#")>=0&&(t=t.split("#")[1]),t},o=(n=e.headers,r="x-amzn-errortype",Object.keys(n).find(function(e){return e.toLowerCase()===r.toLowerCase()}));return void 0!==o?i(e.headers[o]):void 0!==t.code?i(t.code):void 0!==t.__type?i(t.__type):""},Zt=n(10),Xt=n(1),Qt=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return r(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(Zt.a)(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"CreateLogGroupCommand",inputFilterSensitiveLog:m.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},i)},t.prototype.serialize=function(e,t){return function(e,t){return i(void 0,void 0,void 0,function(){var n,r;return o(this,function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.CreateLogGroup"},r=JSON.stringify(_t(e,t)),[2,Ht(t,n,"/",void 0,r)]})})}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return i(void 0,void 0,void 0,function(){var n;return o(this,function(r){switch(r.label){case 0:return e.statusCode>=300?[2,st(e,t)]:[4,Wt(e.body,t)];case 1:return r.sent(),n={$metadata:Gt(e)},[2,Promise.resolve(n)]}})})}(e,t)},t}(Xt.b),en=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return r(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(Zt.a)(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"DescribeLogGroupsCommand",inputFilterSensitiveLog:F.filterSensitiveLog,outputFilterSensitiveLog:z.filterSensitiveLog},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},i)},t.prototype.serialize=function(e,t){return function(e,t){return i(void 0,void 0,void 0,function(){var n,r;return o(this,function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.DescribeLogGroups"},r=JSON.stringify(Et(e,t)),[2,Ht(t,n,"/",void 0,r)]})})}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return i(void 0,void 0,void 0,function(){var n,r,i;return o(this,function(o){switch(o.label){case 0:return e.statusCode>=300?[2,ut(e,t)]:[4,Jt(e.body,t)];case 1:return n=o.sent(),r=Pt(n,t),i=it({$metadata:Gt(e)},r),[2,Promise.resolve(i)]}})})}(e,t)},t}(Xt.b),tn=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return r(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(Zt.a)(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"CreateLogStreamCommand",inputFilterSensitiveLog:b.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},i)},t.prototype.serialize=function(e,t){return function(e,t){return i(void 0,void 0,void 0,function(){var n,r;return o(this,function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.CreateLogStream"},r=JSON.stringify(St(e,t)),[2,Ht(t,n,"/",void 0,r)]})})}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return i(void 0,void 0,void 0,function(){var n;return o(this,function(r){switch(r.label){case 0:return e.statusCode>=300?[2,at(e,t)]:[4,Wt(e.body,t)];case 1:return r.sent(),n={$metadata:Gt(e)},[2,Promise.resolve(n)]}})})}(e,t)},t}(Xt.b),nn=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return r(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(Zt.a)(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"DescribeLogStreamsCommand",inputFilterSensitiveLog:K.filterSensitiveLog,outputFilterSensitiveLog:V.filterSensitiveLog},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},i)},t.prototype.serialize=function(e,t){return function(e,t){return i(void 0,void 0,void 0,function(){var n,r;return o(this,function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.DescribeLogStreams"},r=JSON.stringify(Ct(e,t)),[2,Ht(t,n,"/",void 0,r)]})})}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return i(void 0,void 0,void 0,function(){var n,r,i;return o(this,function(o){switch(o.label){case 0:return e.statusCode>=300?[2,ct(e,t)]:[4,Jt(e.body,t)];case 1:return n=o.sent(),r=kt(n,t),i=it({$metadata:Gt(e)},r),[2,Promise.resolve(i)]}})})}(e,t)},t}(Xt.b),rn=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return r(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(Zt.a)(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"GetLogEventsCommand",inputFilterSensitiveLog:ve.filterSensitiveLog,outputFilterSensitiveLog:ye.filterSensitiveLog},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},i)},t.prototype.serialize=function(e,t){return function(e,t){return i(void 0,void 0,void 0,function(){var n,r;return o(this,function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.GetLogEvents"},r=JSON.stringify(At(e,t)),[2,Ht(t,n,"/",void 0,r)]})})}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return i(void 0,void 0,void 0,function(){var n,r,i;return o(this,function(o){switch(o.label){case 0:return e.statusCode>=300?[2,lt(e,t)]:[4,Jt(e.body,t)];case 1:return n=o.sent(),r=Dt(n,t),i=it({$metadata:Gt(e)},r),[2,Promise.resolve(i)]}})})}(e,t)},t}(Xt.b),on=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return r(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(Zt.a)(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"PutLogEventsCommand",inputFilterSensitiveLog:Me.filterSensitiveLog,outputFilterSensitiveLog:je.filterSensitiveLog},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},i)},t.prototype.serialize=function(e,t){return function(e,t){return i(void 0,void 0,void 0,function(){var n,r;return o(this,function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.PutLogEvents"},r=JSON.stringify(It(e,t)),[2,Ht(t,n,"/",void 0,r)]})})}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return i(void 0,void 0,void 0,function(){var n,r,i;return o(this,function(o){switch(o.label){case 0:return e.statusCode>=300?[2,dt(e,t)]:[4,Jt(e.body,t)];case 1:return n=o.sent(),r=Bt(n,t),i=it({$metadata:Gt(e)},r),[2,Promise.resolve(i)]}})})}(e,t)},t}(Xt.b),sn=n(192),an=n(42),un=n(22),cn=n(45),ln=n(14),dn=n(18),fn=n(43),pn=n(44),hn=n(16),vn=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),gn=new Set(["cn-north-1","cn-northwest-1"]),yn=new Set(["us-iso-east-1"]),mn=new Set(["us-isob-east-1"]),bn=new Set(["us-gov-east-1","us-gov-west-1"]),wn={apiVersion:"2014-03-28",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,t){var n=void 0;switch(e){case"af-south-1":n={hostname:"logs.af-south-1.amazonaws.com",partition:"aws"};break;case"ap-east-1":n={hostname:"logs.ap-east-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-1":n={hostname:"logs.ap-northeast-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-2":n={hostname:"logs.ap-northeast-2.amazonaws.com",partition:"aws"};break;case"ap-south-1":n={hostname:"logs.ap-south-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-1":n={hostname:"logs.ap-southeast-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-2":n={hostname:"logs.ap-southeast-2.amazonaws.com",partition:"aws"};break;case"ca-central-1":n={hostname:"logs.ca-central-1.amazonaws.com",partition:"aws"};break;case"cn-north-1":n={hostname:"logs.cn-north-1.amazonaws.com.cn",partition:"aws-cn"};break;case"cn-northwest-1":n={hostname:"logs.cn-northwest-1.amazonaws.com.cn",partition:"aws-cn"};break;case"eu-central-1":n={hostname:"logs.eu-central-1.amazonaws.com",partition:"aws"};break;case"eu-north-1":n={hostname:"logs.eu-north-1.amazonaws.com",partition:"aws"};break;case"eu-south-1":n={hostname:"logs.eu-south-1.amazonaws.com",partition:"aws"};break;case"eu-west-1":n={hostname:"logs.eu-west-1.amazonaws.com",partition:"aws"};break;case"eu-west-2":n={hostname:"logs.eu-west-2.amazonaws.com",partition:"aws"};break;case"eu-west-3":n={hostname:"logs.eu-west-3.amazonaws.com",partition:"aws"};break;case"fips-us-east-1":n={hostname:"logs-fips.us-east-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"fips-us-east-2":n={hostname:"logs-fips.us-east-2.amazonaws.com",partition:"aws",signingRegion:"us-east-2"};break;case"fips-us-west-1":n={hostname:"logs-fips.us-west-1.amazonaws.com",partition:"aws",signingRegion:"us-west-1"};break;case"fips-us-west-2":n={hostname:"logs-fips.us-west-2.amazonaws.com",partition:"aws",signingRegion:"us-west-2"};break;case"me-south-1":n={hostname:"logs.me-south-1.amazonaws.com",partition:"aws"};break;case"sa-east-1":n={hostname:"logs.sa-east-1.amazonaws.com",partition:"aws"};break;case"us-east-1":n={hostname:"logs.us-east-1.amazonaws.com",partition:"aws"};break;case"us-east-2":n={hostname:"logs.us-east-2.amazonaws.com",partition:"aws"};break;case"us-gov-east-1":n={hostname:"logs.us-gov-east-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-east-1"};break;case"us-gov-west-1":n={hostname:"logs.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"us-iso-east-1":n={hostname:"logs.us-iso-east-1.c2s.ic.gov",partition:"aws-iso"};break;case"us-isob-east-1":n={hostname:"logs.us-isob-east-1.sc2s.sgov.gov",partition:"aws-iso-b"};break;case"us-west-1":n={hostname:"logs.us-west-1.amazonaws.com",partition:"aws"};break;case"us-west-2":n={hostname:"logs.us-west-2.amazonaws.com",partition:"aws"};break;default:vn.has(e)&&(n={hostname:"logs.{region}.amazonaws.com".replace("{region}",e),partition:"aws"}),gn.has(e)&&(n={hostname:"logs.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),yn.has(e)&&(n={hostname:"logs.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),mn.has(e)&&(n={hostname:"logs.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),bn.has(e)&&(n={hostname:"logs.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}),void 0===n&&(n={hostname:"logs.{region}.amazonaws.com".replace("{region}",e),partition:"aws"})}return Promise.resolve(it({signingService:"logs"},n))},serviceId:"CloudWatch Logs",urlParser:n(47).a},_n=it(it({},wn),{runtime:"browser",base64Decoder:dn.a,base64Encoder:dn.b,bodyLengthChecker:fn.a,credentialDefaultProvider:function(e){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:Object(pn.a)({serviceId:wn.serviceId,clientVersion:sn.version}),maxAttempts:ln.a,region:Object(cn.a)("Region is missing"),requestHandler:new un.a,sha256:an.Sha256,streamCollector:un.b,utf8Decoder:hn.a,utf8Encoder:hn.b}),Sn=n(24),En=n(41),Cn=n(21),An=n(46),On=n(27),In=n(23),xn=function(e){function t(t){var n=this,r=it(it({},_n),t),i=Object(Sn.b)(r),o=Object(Sn.a)(i),s=Object(On.b)(o),a=Object(ln.c)(s),u=Object(Cn.b)(a),c=Object(In.b)(u);return(n=e.call(this,c)||this).config=c,n.middlewareStack.use(Object(On.a)(n.config)),n.middlewareStack.use(Object(ln.b)(n.config)),n.middlewareStack.use(Object(En.a)(n.config)),n.middlewareStack.use(Object(Cn.a)(n.config)),n.middlewareStack.use(Object(An.a)(n.config)),n.middlewareStack.use(Object(In.a)(n.config)),n}return r(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(Xt.a),Tn=n(80),Pn=n(48),kn=n(49),Dn=n(92),Nn=n(35),Mn=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},Ln=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},jn=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},Rn=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(jn(arguments[t]));return e},Un=new Pn.a("AWSCloudWatch"),Fn=function(){function e(e){this.configure(e),this._dataTracker={eventUploadInProgress:!1,logEvents:[]},this._currentLogBatch=[],this._initiateLogPushInterval()}return e.prototype.getProviderName=function(){return e.PROVIDER_NAME},e.prototype.getCategoryName=function(){return e.CATEGORY},e.prototype.getLogQueue=function(){return this._dataTracker.logEvents},e.prototype.configure=function(e){if(!e)return this._config||{};var t=Object.assign({},this._config,Object(Dn.b)(e).Logging,e);return this._config=t,this._config},e.prototype.createLogGroup=function(e){return Mn(this,void 0,void 0,function(){var t,n;return Ln(this,function(r){switch(r.label){case 0:Un.debug("creating new log group in CloudWatch - ",e.logGroupName),t=new Qt(e),r.label=1;case 1:return r.trys.push([1,4,,5]),[4,this._ensureCredentials()];case 2:if(!r.sent())throw new Error(Nn.f);return[4,this._initCloudWatchLogs().send(t)];case 3:return[2,r.sent()];case 4:throw n=r.sent(),Un.error("error creating log group - "+n),n;case 5:return[2]}})})},e.prototype.getLogGroups=function(e){return Mn(this,void 0,void 0,function(){var t,n;return Ln(this,function(r){switch(r.label){case 0:Un.debug("getting list of log groups"),t=new en(e),r.label=1;case 1:return r.trys.push([1,4,,5]),[4,this._ensureCredentials()];case 2:if(!r.sent())throw new Error(Nn.f);return[4,this._initCloudWatchLogs().send(t)];case 3:return[2,r.sent()];case 4:throw n=r.sent(),Un.error("error getting log group - "+n),n;case 5:return[2]}})})},e.prototype.createLogStream=function(e){return Mn(this,void 0,void 0,function(){var t,n;return Ln(this,function(r){switch(r.label){case 0:Un.debug("creating new log stream in CloudWatch - ",e.logStreamName),t=new tn(e),r.label=1;case 1:return r.trys.push([1,4,,5]),[4,this._ensureCredentials()];case 2:if(!r.sent())throw new Error(Nn.f);return[4,this._initCloudWatchLogs().send(t)];case 3:return[2,r.sent()];case 4:throw n=r.sent(),Un.error("error creating log stream - "+n),n;case 5:return[2]}})})},e.prototype.getLogStreams=function(e){return Mn(this,void 0,void 0,function(){var t,n;return Ln(this,function(r){switch(r.label){case 0:Un.debug("getting list of log streams"),t=new nn(e),r.label=1;case 1:return r.trys.push([1,4,,5]),[4,this._ensureCredentials()];case 2:if(!r.sent())throw new Error(Nn.f);return[4,this._initCloudWatchLogs().send(t)];case 3:return[2,r.sent()];case 4:throw n=r.sent(),Un.error("error getting log stream - "+n),n;case 5:return[2]}})})},e.prototype.getLogEvents=function(e){return Mn(this,void 0,void 0,function(){var t,n;return Ln(this,function(r){switch(r.label){case 0:Un.debug("getting log events from stream - ",e.logStreamName),t=new rn(e),r.label=1;case 1:return r.trys.push([1,4,,5]),[4,this._ensureCredentials()];case 2:if(!r.sent())throw new Error(Nn.f);return[4,this._initCloudWatchLogs().send(t)];case 3:return[2,r.sent()];case 4:throw n=r.sent(),Un.error("error getting log events - "+n),n;case 5:return[2]}})})},e.prototype.pushLogs=function(e){Un.debug("pushing log events to Cloudwatch..."),this._dataTracker.logEvents=Rn(this._dataTracker.logEvents,e)},e.prototype._validateLogGroupExistsAndCreate=function(e){return Mn(this,void 0,void 0,function(){var t,n,r,i;return Ln(this,function(o){switch(o.label){case 0:if(this._dataTracker.verifiedLogGroup)return[2,this._dataTracker.verifiedLogGroup];o.label=1;case 1:return o.trys.push([1,5,,6]),[4,this._ensureCredentials()];case 2:if(!o.sent())throw new Error(Nn.f);return[4,this.getLogGroups({logGroupNamePrefix:e})];case 3:return"string"!=typeof(t=o.sent())&&t.logGroups&&(n=t.logGroups.filter(function(t){return t.logGroupName===e})).length>0?(this._dataTracker.verifiedLogGroup=n[0],[2,n[0]]):[4,this.createLogGroup({logGroupName:e})];case 4:return o.sent(),[2,null];case 5:throw r=o.sent(),i="failure during log group search: "+r,Un.error(i),r;case 6:return[2]}})})},e.prototype._validateLogStreamExists=function(e,t){return Mn(this,void 0,void 0,function(){var n,r,i,o;return Ln(this,function(s){switch(s.label){case 0:return s.trys.push([0,4,,5]),[4,this._ensureCredentials()];case 1:if(!s.sent())throw new Error(Nn.f);return[4,this.getLogStreams({logGroupName:e,logStreamNamePrefix:t})];case 2:return(n=s.sent()).logStreams&&(r=n.logStreams.filter(function(e){return e.logStreamName===t})).length>0?(this._nextSequenceToken=r[0].uploadSequenceToken,[2,r[0]]):[4,this.createLogStream({logGroupName:e,logStreamName:t})];case 3:return s.sent(),[2,null];case 4:throw i=s.sent(),o="failure during log stream search: "+i,Un.error(o),i;case 5:return[2]}})})},e.prototype._sendLogEvents=function(e){return Mn(this,void 0,void 0,function(){var t,n,r;return Ln(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),[4,this._ensureCredentials()];case 1:if(!i.sent())throw new Error(Nn.f);return Un.debug("sending log events to stream - ",e.logStreamName),t=new on(e),[4,this._initCloudWatchLogs().send(t)];case 2:return[2,i.sent()];case 3:return n=i.sent(),r="failure during log push: "+n,Un.error(r),[3,4];case 4:return[2]}})})},e.prototype._initCloudWatchLogs=function(){return new xn({region:this._config.region,credentials:this._config.credentials,customUserAgent:Object(kn.b)(),endpoint:this._config.endpoint})},e.prototype._ensureCredentials=function(){return Mn(this,void 0,void 0,function(){var e=this;return Ln(this,function(t){switch(t.label){case 0:return[4,Tn.a.get().then(function(t){if(!t)return!1;var n=Tn.a.shear(t);return Un.debug("set credentials for logging",n),e._config.credentials=n,!0}).catch(function(e){return Un.warn("ensure credentials error",e),!1})];case 1:return[2,t.sent()]}})})},e.prototype._getNextSequenceToken=function(){return Mn(this,void 0,void 0,function(){var e,t;return Ln(this,function(n){switch(n.label){case 0:if(this._nextSequenceToken&&this._nextSequenceToken.length>0)return[2,this._nextSequenceToken];n.label=1;case 1:return n.trys.push([1,4,,5]),[4,this._validateLogGroupExistsAndCreate(this._config.logGroupName)];case 2:return n.sent(),this._nextSequenceToken=void 0,[4,this._validateLogStreamExists(this._config.logGroupName,this._config.logStreamName)];case 3:return(e=n.sent())&&(this._nextSequenceToken=e.uploadSequenceToken),[2,this._nextSequenceToken];case 4:throw t=n.sent(),Un.error("failure while getting next sequence token: "+t),t;case 5:return[2]}})})},e.prototype._safeUploadLogEvents=function(){return Mn(this,void 0,void 0,function(){var e,t,n,r,i;return Ln(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,this._getNextSequenceToken()];case 1:return e=o.sent(),t=0===this._currentLogBatch.length?this._getBufferedBatchOfLogs():this._currentLogBatch,n={logGroupName:this._config.logGroupName,logStreamName:this._config.logStreamName,logEvents:t,sequenceToken:e},this._dataTracker.eventUploadInProgress=!0,[4,this._sendLogEvents(n)];case 2:return r=o.sent(),this._nextSequenceToken=r.nextSequenceToken,this._dataTracker.eventUploadInProgress=!1,this._currentLogBatch=[],[2,r];case 3:if(i=o.sent(),Un.error("error during _safeUploadLogEvents: "+i),!Nn.g.includes(i.name))throw this._dataTracker.eventUploadInProgress=!1,i;return this._getNewSequenceTokenAndSubmit({logEvents:this._currentLogBatch,logGroupName:this._config.logGroupName,logStreamName:this._config.logStreamName}),[3,4];case 4:return[2]}})})},e.prototype._getBufferedBatchOfLogs=function(){for(var e=0,t=0;e<this._dataTracker.logEvents.length;){var n=this._dataTracker.logEvents[e],r=n?(new TextEncoder).encode(n.message).length+Nn.a:0;if(r>Nn.d){var i="Log entry exceeds maximum size for CloudWatch logs. Log size: "+r+". Truncating log message.";Un.warn(i),n.message=n.message.substring(0,r)}if(t+r>Nn.c)break;t+=r,e++}return this._currentLogBatch=this._dataTracker.logEvents.splice(0,e),this._currentLogBatch},e.prototype._getNewSequenceTokenAndSubmit=function(e){return Mn(this,void 0,void 0,function(){var t,n,r;return Ln(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),this._nextSequenceToken=void 0,this._dataTracker.eventUploadInProgress=!0,[4,this._getNextSequenceToken()];case 1:return t=i.sent(),e.sequenceToken=t,[4,this._sendLogEvents(e)];case 2:return n=i.sent(),this._dataTracker.eventUploadInProgress=!1,this._currentLogBatch=[],[2,n];case 3:throw r=i.sent(),Un.error("error when retrying log submission with new sequence token: "+r),this._dataTracker.eventUploadInProgress=!1,r;case 4:return[2]}})})},e.prototype._initiateLogPushInterval=function(){var e=this;this._timer&&clearInterval(this._timer),this._timer=setInterval(function(){return Mn(e,void 0,void 0,function(){var e;return Ln(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),this._getDocUploadPermissibility()?[4,this._safeUploadLogEvents()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[3,4];case 3:return e=t.sent(),Un.error("error when calling _safeUploadLogEvents in the timer interval - "+e),[3,4];case 4:return[2]}})})},2e3)},e.prototype._getDocUploadPermissibility=function(){return(0!==this._dataTracker.logEvents.length||0!==this._currentLogBatch.length)&&!this._dataTracker.eventUploadInProgress},e.PROVIDER_NAME=Nn.e,e.CATEGORY=Nn.b,e}()},function(e,t,n){"use strict";function r(e,t){function n(){this.constructor=e}if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");m(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function i(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})}function o(e,t){function n(n){return function(u){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,n[0]&&(a=0)),a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,u])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s}n.d(t,"a",function(){return me});var s,a,u,c,l,d,f,p,h=n(48),v=n(34),g=n(49),y=n(80),m=function(e,t){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},b=function(){return(b=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.create,Object.create,(s||(s={})).filterSensitiveLog=function(e){return b({},e)},(a||(a={})).filterSensitiveLog=function(e){return b({},e)},(u||(u={})).filterSensitiveLog=function(e){return b({},e)},(c||(c={})).filterSensitiveLog=function(e){return b({},e)},(l||(l={})).filterSensitiveLog=function(e){return b({},e)},(d||(d={})).filterSensitiveLog=function(e){return b({},e)},(f||(f={})).filterSensitiveLog=function(e){return b({},e)},(p||(p={})).filterSensitiveLog=function(e){return b({},e)};var w,_,S,E=n(3),C=n(1),A=function(e,t){return i(void 0,void 0,void 0,function(){var n,r,i,s,a,u,c,l;return o(this,function(o){switch(o.label){case 0:return r=[b({},e)],l={},[4,k(e.body,t)];case 1:switch(n=b.apply(void 0,r.concat([(l.body=o.sent(),l)])),s="UnknownError",s=D(e,n.body)){case"InvalidInputException":case"com.amazonaws.personalizeevents#InvalidInputException":return[3,2]}return[3,4];case 2:return a=[{}],[4,O(n,t)];case 3:return i=b.apply(void 0,[b.apply(void 0,a.concat([o.sent()])),{name:s,$metadata:T(e)}]),[3,5];case 4:u=n.body,s=u.code||u.Code||s,i=b(b({},u),{name:""+s,message:u.message||u.Message||s,$fault:"client",$metadata:T(e)}),o.label=5;case 5:return c=i.message||i.Message||s,i.message=c,delete i.Message,[2,Promise.reject(Object.assign(new Error(c),i))]}})})},O=function(e,t){return i(void 0,void 0,void 0,function(){var t,n;return o(this,function(r){return t={name:"InvalidInputException",$fault:"client",$metadata:T(e),message:void 0},void 0!==(n=e.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},I=function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:function(e,t){return b(b(b(b(b(b(b(b({},void 0!==e.eventId&&null!==e.eventId&&{eventId:e.eventId}),void 0!==e.eventType&&null!==e.eventType&&{eventType:e.eventType}),void 0!==e.eventValue&&null!==e.eventValue&&{eventValue:e.eventValue}),void 0!==e.impression&&null!==e.impression&&{impression:x(e.impression,t)}),void 0!==e.itemId&&null!==e.itemId&&{itemId:e.itemId}),void 0!==e.properties&&null!==e.properties&&{properties:C.c.fromObject(e.properties)}),void 0!==e.recommendationId&&null!==e.recommendationId&&{recommendationId:e.recommendationId}),void 0!==e.sentAt&&null!==e.sentAt&&{sentAt:Math.round(e.sentAt.getTime()/1e3)})}(e,t)})},x=function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:e})},T=function(e){var t;return{httpStatusCode:e.statusCode,requestId:null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},P=function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)},k=function(e,t){return function(e,t){return P(e,t).then(function(e){return t.utf8Encoder(e)})}(e,t).then(function(e){return e.length?JSON.parse(e):{}})},D=function(e,t){var n,r,i=function(e){var t=e;return t.indexOf(":")>=0&&(t=t.split(":")[0]),t.indexOf("#")>=0&&(t=t.split("#")[1]),t},o=(n=e.headers,r="x-amzn-errortype",Object.keys(n).find(function(e){return e.toLowerCase()===r.toLowerCase()}));return void 0!==o?i(e.headers[o]):void 0!==t.code?i(t.code):void 0!==t.__type?i(t.__type):""},N=n(10),M=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return r(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(N.a)(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"PersonalizeEventsClient",commandName:"PutEventsCommand",inputFilterSensitiveLog:u.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler
;return r.resolve(function(e){return o.handle(e.request,n||{})},i)},t.prototype.serialize=function(e,t){return function(e,t){return i(void 0,void 0,void 0,function(){var n,r,i,s,a,u,c,l;return o(this,function(o){switch(o.label){case 0:return n={"content-type":"application/json"},r="/events",i=JSON.stringify(b(b(b(b({},void 0!==e.eventList&&null!==e.eventList&&{eventList:I(e.eventList,t)}),void 0!==e.sessionId&&null!==e.sessionId&&{sessionId:e.sessionId}),void 0!==e.trackingId&&null!==e.trackingId&&{trackingId:e.trackingId}),void 0!==e.userId&&null!==e.userId&&{userId:e.userId})),[4,t.endpoint()];case 1:return s=o.sent(),a=s.hostname,u=s.protocol,c=void 0===u?"https":u,l=s.port,[2,new E.a({protocol:c,hostname:a,port:l,method:"POST",headers:n,path:r,body:i})]}})})}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return i(void 0,void 0,void 0,function(){var n;return o(this,function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,A(e,t)]:(n={$metadata:T(e)},[4,P(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}})})}(e,t)},t}(C.b),L=n(183),j=n(42),R=n(22),U=n(45),F=n(14),B=n(18),z=n(43),q=n(44),K=n(16),$="personalize-events.{region}.amazonaws.com",V=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),G=new Set(["cn-north-1","cn-northwest-1"]),W=new Set(["us-iso-east-1"]),H=new Set(["us-isob-east-1"]),J=new Set(["us-gov-east-1","us-gov-west-1"]),Y={apiVersion:"2018-03-22",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,t){var n=void 0;return V.has(e)&&(n={hostname:$.replace("{region}",e),partition:"aws"}),G.has(e)&&(n={hostname:"personalize-events.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),W.has(e)&&(n={hostname:"personalize-events.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),H.has(e)&&(n={hostname:"personalize-events.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),J.has(e)&&(n={hostname:"personalize-events.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}),void 0===n&&(n={hostname:$.replace("{region}",e),partition:"aws"}),Promise.resolve(b({signingService:"personalize"},n))},serviceId:"Personalize Events",urlParser:n(47).a},Z=b(b({},Y),{runtime:"browser",base64Decoder:B.a,base64Encoder:B.b,bodyLengthChecker:z.a,credentialDefaultProvider:function(e){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:Object(q.a)({serviceId:Y.serviceId,clientVersion:L.version}),maxAttempts:F.a,region:Object(U.a)("Region is missing"),requestHandler:new R.a,sha256:j.Sha256,streamCollector:R.b,utf8Decoder:K.a,utf8Encoder:K.b}),X=n(24),Q=n(41),ee=n(21),te=n(46),ne=n(27),re=n(23),ie=function(e){function t(t){var n=this,r=b(b({},Z),t),i=Object(X.b)(r),o=Object(X.a)(i),s=Object(ne.b)(o),a=Object(F.c)(s),u=Object(ee.b)(a),c=Object(re.b)(u);return(n=e.call(this,c)||this).config=c,n.middlewareStack.use(Object(ne.a)(n.config)),n.middlewareStack.use(Object(F.b)(n.config)),n.middlewareStack.use(Object(Q.a)(n.config)),n.middlewareStack.use(Object(ee.a)(n.config)),n.middlewareStack.use(Object(te.a)(n.config)),n.middlewareStack.use(Object(re.a)(n.config)),n}return r(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(C.a),oe=n(39),se=n.n(oe),ae=n(94),ue=n.n(ae),ce=n(30),le=n(26),de=(new h.a("AmazonPersonalizeProvider"),function(){function e(e){void 0===e&&(e=""),this._isBrowser=v.a.browserOrNode().isBrowser,this._timerKey=Object(ce.v1)().substr(0,15),this._refreshTimer()}return e.prototype._refreshTimer=function(){this._timer&&clearInterval(this._timer);var e=this;this._timer=setInterval(function(){e._timerKey=Object(ce.v1)().substr(0,15)},3e4)},e.prototype.storeValue=function(e,t){var n=new Date,r=new Date;r.setTime(n.getTime()+6048e5),le.b.setItem(this._getCachePrefix(e),t,{expires:r.getTime()})},e.prototype.retrieveValue=function(e){return le.b.getItem(this._getCachePrefix(e))},e.prototype._getCachePrefix=function(e){return this._isBrowser?e+"."+window.location.host:"peronslize"},e.prototype.getTimerKey=function(){return this._timerKey},e.prototype.updateSessionInfo=function(e,t){var n=t.userId,r=t.sessionId;if(this._isRequireNewSession(e,n,r)){var i=Object(ce.v1)();this.storeValue("_awsct_uid",e),this.storeValue("_awsct_sid",i),t.sessionId=i}else this._isRequireUpdateSessionInfo(e,n,r)&&this.storeValue("_awsct_uid",e);t.userId=e},e.prototype._isRequireUpdateSessionInfo=function(e,t,n){return!se()(n)&&se()(t)&&!se()(e)},e.prototype.retrieveSessionInfo=function(e){var t={};return t.trackingId=e,t.sessionId=this.retrieveValue("_awsct_sid"),t.userId=this.retrieveValue("_awsct_uid"),se()(t.sessionId)&&(t.sessionId=Object(ce.v1)(),this.storeValue("_awsct_sid",t.sessionId)),this.storeValue("_awsct",e),t},e.prototype._isRequireNewSession=function(e,t,n){var r=se()(n),i=se()(e)&&!se()(t),o=!se()(e)&&!se()(t)&&!ue()(e,t);return r||i||o},e}());!function(e){e.PLAY="play",e.PAUSE="pause",e.ENDED="Ended"}(w||(w={})),function(e){e.IFRAME="IFRAME",e.VIDEO="VIDEO",e.AUDIO="AUDIO"}(_||(_={})),function(e){e.PLAY="Play",e.ENDED="Ended",e.PAUSE="Pause",e.TIME_WATCHED="TimeWatched"}(S||(S={}));var fe=function(){function e(e,t){var n;this.eventActionMapping=((n={})[S.ENDED]=this.endedEventAction.bind(this),n[S.PLAY]=this.playEventAction.bind(this),n[S.PAUSE]=this.pauseEventAction.bind(this),n);var r=e.eventData;this._params=e,this._mediaElement=document.getElementById(r.properties.domElementId),this._started=!1,this._provider=t,{IFRAME:this._iframeMediaTracker,VIDEO:this._html5MediaTracker,AUDIO:this._html5MediaTracker}[this._mediaElement.tagName].bind(this)(),this._initYoutubeFrame()}return e.prototype._initYoutubeFrame=function(){this._youTubeIframeLoader={src:"https://www.youtube.com/iframe_api",loading:!1,loaded:!1,listeners:[],load:function(e){var t=this;if(this.listeners.push(e),this.loaded)setTimeout(function(){t.done()});else if(!this.loading){this.loading=!0,window.onYouTubeIframeAPIReady=function(){t.loaded=!0,t.done()};var n=document.createElement("script");n.type="text/javascript",n.src=this.src,document.body.appendChild(n)}},done:function(){for(delete window.onYouTubeIframeAPIReady;this.listeners.length;)this.listeners.pop()(window.YT)}}},e.prototype._iframeMediaTracker=function(){var e=this;setInterval(function(){e._started&&e.recordEvent(_.IFRAME,S.TIME_WATCHED)},3e3),this._youTubeIframeLoader.load(function(t){e._iframePlayer=new t.Player(e._mediaElement.id,{events:{onStateChange:e._onPlayerStateChange.bind(e)}})})},e.prototype._onPlayerStateChange=function(e){var t={0:S.ENDED,1:S.PLAY,2:S.PAUSE}[e.data];t&&this.eventActionMapping[t](_.IFRAME)},e.prototype._html5MediaTracker=function(){var e=this;setInterval(function(){e._started&&e.recordEvent(_.VIDEO,S.TIME_WATCHED)},3e3),this._mediaElement.addEventListener(w.PLAY,function(){e.eventActionMapping[S.PLAY](_.VIDEO)},!1),this._mediaElement.addEventListener(w.PAUSE,function(){e.eventActionMapping[S.PAUSE](_.VIDEO)},!1),this._mediaElement.addEventListener(w.ENDED,function(){e.eventActionMapping[S.ENDED](_.VIDEO)},!1)},e.prototype.playEventAction=function(e){this._started=!0,this.recordEvent(e,S.PLAY)},e.prototype.pauseEventAction=function(e){this._started=!1,this.recordEvent(e,S.PAUSE)},e.prototype.endedEventAction=function(e){this._started=!1,this.recordEvent(e,S.ENDED)},e.prototype.recordEvent=function(e,t){var n=Object.assign({},this._params),r=n.eventData;r.eventType=t,e===_.VIDEO?(r.properties.timestamp=this._mediaElement.currentTime,r.properties.duration=this._mediaElement.duration):(r.properties.timestamp=this._financial(this._iframePlayer.getCurrentTime()),r.properties.duration=this._financial(this._iframePlayer.getDuration()));var i=parseFloat(r.properties.timestamp)/parseFloat(r.properties.duration);r.properties.eventValue=Number(i.toFixed(4)),delete r.properties.domElementId,this._provider.putToBuffer(n)},e.prototype._financial=function(e){return Number.parseFloat(e).toFixed(4)},e}(),pe=n(182),he=n.n(pe),ve=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},ge=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},ye=new h.a("AmazonPersonalizeProvider"),me=function(){function e(e){this._buffer=[],this._config=e||{},this._config.flushSize=this._config.flushSize>0&&this._config.flushSize<=10?this._config.flushSize:5,this._config.flushInterval=this._config.flushInterval||5e3,this._sessionManager=new de,se()(this._config.trackingId)||(this._sessionInfo=this._sessionManager.retrieveSessionInfo(this._config.trackingId)),this._isBrowser=v.a.browserOrNode().isBrowser,this._setupTimer()}return e.prototype._setupTimer=function(){this._timer&&clearInterval(this._timer);var e=this._config.flushInterval,t=this;this._timer=setInterval(function(){t._sendFromBuffer()},e)},e.prototype.record=function(e){return ve(this,void 0,void 0,function(){var t,n,r,i,o;return ge(this,function(s){switch(s.label){case 0:return[4,this._getCredentials()];case 1:return(t=s.sent())?(Object.assign(e,{config:this._config,credentials:t,sentAt:new Date}),n=e.event,r=n.eventType,i=n.properties,"Identify"===r?(this._sessionManager.updateSessionInfo(i&&i.userId?i.userId:"",this._sessionInfo),[2]):(se()(e.event.userId)||this._sessionManager.updateSessionInfo(e.event.userId,this._sessionInfo),o=this.generateRequestParams(e,this._sessionInfo),"MediaAutoTrack"!==r?[3,7]:this._isBrowser?se()(he()(o,"eventData.properties.domElementId",null))?[3,3]:[4,this.isElementFullyLoaded(this.loadElement,o.eventData.properties.domElementId,500,5)]:[3,5])):[2,Promise.resolve(!1)];case 2:return s.sent()?new fe(o,this):ye.debug("Cannot find the media element."),[3,4];case 3:ye.debug("Missing domElementId field in 'properties' for MediaAutoTrack event type."),s.label=4;case 4:return[3,6];case 5:ye.debug("MediaAutoTrack only for browser"),s.label=6;case 6:return[2];case 7:return[2,this.putToBuffer(o)]}})})},e.prototype.loadElement=function(e){return new Promise(function(t,n){return document.getElementById(e)&&document.getElementById(e).clientHeight?t(!0):n(!0)})},e.prototype.isElementFullyLoaded=function(e,t,n,r){var i=this;return new Promise(function(o,s){return e(t).then(o).catch(function(a){return r-1>0?(u=n,new Promise(function(e){return setTimeout(e,u)})).then(i.isElementFullyLoaded.bind(null,e,t,n,r-1)).then(o).catch(s):s(a);var u})})},e.prototype.getCategory=function(){return"Analytics"},e.prototype.getProviderName=function(){return"AmazonPersonalize"},e.prototype.configure=function(e){ye.debug("configure Analytics",e);var t=e||{};return this._config=Object.assign({},this._config,t),se()(this._config.trackingId)||(this._sessionInfo=this._sessionManager.retrieveSessionInfo(this._config.trackingId)),this._setupTimer(),this._config},e.prototype.generateRequestParams=function(e,t){var n={},r=e.event,i=r.eventType,o=r.properties;return n.eventData={eventType:i,properties:o},n.sessionInfo=t,n.sentAt=e.sentAt,n.credentials=e.credentials,n.config=e.config,n},e.prototype._sendEvents=function(e){var t=e.length;if(0!==t){var n=e[0],r=n.config,i=n.credentials,o=n.sessionInfo;if(!this._init(r,i))return!1;if(t>0){for(var s=[],a=0;a<t;a+=1){var u=e.shift(),c=this._generateSingleRecordPayload(u,o);s.push(c)}var l={};l.trackingId=o.trackingId,l.sessionId=o.sessionId,l.userId=o.userId,l.eventList=[],s.forEach(function(e){l.eventList.push(e)});var d=new M(l);this._personalize.send(d,function(e){e?ye.debug("Failed to call putEvents in Personalize",e):ye.debug("Put events")})}}else ye.debug("events array is empty, directly return")},e.prototype.putToBuffer=function(e){return this._buffer.length<this._config.flushSize?this._buffer.push(e):(this._buffer.push(e),this._sendFromBuffer()),Promise.resolve(!0)},e.prototype._sendFromBuffer=function(){var e=this,t=this._buffer.length;if(!(t<=0)){for(var n=[],r=null,i=[],o=0;o<t;o+=1){var s=this._buffer.shift(),a=s.credentials,u=s.sessionInfo;0===o?(i.push(s),r=a):ue()(u,this._sessionInfo)&&a.sessionToken===r.sessionToken&&a.identityId===r.identityId?(ye.debug("no change for cred, put event in the same group"),i.push(s)):(n.push(i),(i=[]).push(s),r=a,this._sessionInfo=u)}n.push(i),n.map(function(t){e._sendEvents(t)})}},e.prototype._generateSingleRecordPayload=function(e,t){var n=e.eventData,r=e.sentAt,i={};return i.sentAt=r,i.properties=n.properties&&JSON.stringify(n.properties),i.eventId=this._sessionManager.getTimerKey()+t.sessionId,i.eventType=n.eventType,i},e.prototype._init=function(e,t){if(ye.debug("init clients"),this._personalize&&this._config.credentials&&this._config.credentials.sessionToken===t.sessionToken&&this._config.credentials.identityId===t.identityId)return ye.debug("no change for analytics config, directly return from init"),!0;this._config.credentials=t;var n=e.region;return ye.debug("initialize personalize with credentials",t),this._personalize=new ie({region:n,credentials:t,customUserAgent:Object(g.b)()}),!0},e.prototype._getCredentials=function(){var e=this;return y.a.get().then(function(t){return t?(ye.debug("set credentials for analytics",e._config.credentials),y.a.shear(t)):null}).catch(function(e){return ye.debug("ensure credentials error",e),null})},e}()},function(e,t,n){"use strict";function r(e,t){var n=h.filter(function(n){return n.context===e&&n.methodName===t})[0];return n||(n=new v(e,t),h.push(n)),n}function i(e,t){if(e&&1===e.nodeType&&t){if("string"==typeof t||1===t.nodeType)return e===t||o(e,t);if("length"in t)for(var n=0,r=void 0;r=t[n];n++)if(e===r||o(e,r))return!0}return!1}function o(e,t){if("string"!=typeof t)return!1;if(C)return C.call(e,t);for(var n=e.parentNode.querySelectorAll(t),r=0,i=void 0;i=n[r];r++)if(i===e)return!0;return!1}function s(e,t,n,r,o){void 0===o&&(o={});var s=function(e){var t;if(o.composed&&"function"==typeof e.composedPath)for(var s=e.composedPath(),a=0,u=void 0;u=s[a];a++)1===u.nodeType&&i(u,n)&&(t=u);else t=function(e,t,n){if(void 0===n&&(n=!1),e&&1===e.nodeType&&t)for(var r,o=(n?[e]:[]).concat(function(e){for(var t=[],n=e;n&&n.parentNode&&1===n.parentNode.nodeType;)n=n.parentNode,t.push(n);return t}(e)),s=0;r=o[s];s++)if(i(r,t))return r}(e.target,n,!0);t&&r.call(t,e,t)};return e.addEventListener(t,s,o.useCapture),{destroy:function(){e.removeEventListener(t,s,o.useCapture)}}}n.d(t,"a",function(){return X});var a=n(48),u=n(78),c=n(92),l=n(20),d=n(117),f=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},p=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(f(arguments[t]));return e},h=[],v=function(){function e(e,t){this.context=e,this.methodName=t,this._originalMethod=e[t].bind(e)}return e.add=function(e,t,n){r(e,t).set(n)},e.remove=function(e,t){r(e,t).remove()},e.prototype.set=function(e){var t=this;this.context[this.methodName]=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e(t._originalMethod.apply(t,p(n)))}},e.prototype.remove=function(){this.context[this.methodName]=this._originalMethod},e}(),g=n(34),y=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},m=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},b=new a.a("PageViewTracker"),w="aws-amplify-analytics-prevUrl",_={enable:!1,provider:"AWSPinpoint",getUrl:function(){return g.a.browserOrNode().isBrowser?window.location.origin+window.location.pathname:""}},S=function(){function e(e,t){b.debug("initialize pageview tracker with opts",t),this._config=Object.assign({},_,t),this._tracker=e,this._hasEnabled=!1,this._trackFunc=this._trackFunc.bind(this),"SPA"===this._config.type?this._pageViewTrackSPA():this._pageViewTrackDefault()}return e.prototype.configure=function(e){return Object.assign(this._config,e),"SPA"===this._config.type&&this._pageViewTrackSPA(),this._config},e.prototype._isSameUrl=function(){return sessionStorage.getItem(w)===this._config.getUrl()&&(b.debug("the url is same"),!0)},e.prototype._pageViewTrackDefault=function(){return y(this,void 0,void 0,function(){var e,t,n,r;return m(this,function(i){switch(i.label){case 0:return g.a.browserOrNode().isBrowser&&window.addEventListener&&window.sessionStorage?(e=this._config.getUrl(),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]):(b.debug("not in the supported web enviroment"),[2]);case 1:return n=i.sent(),[3,3];case 2:n=this._config.attributes,i.label=3;case 3:return t=n,r=Object.assign({url:e},t),this._config.enable&&!this._isSameUrl()&&(this._tracker({name:this._config.eventName||"pageView",attributes:r},this._config.provider).catch(function(e){b.debug("Failed to record the page view event",e)}),sessionStorage.setItem(w,e)),[2]}})})},e.prototype._trackFunc=function(){return y(this,void 0,void 0,function(){var e,t,n,r;return m(this,function(i){switch(i.label){case 0:return g.a.browserOrNode().isBrowser&&window.addEventListener&&history.pushState&&window.sessionStorage?(e=this._config.getUrl(),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]):(b.debug("not in the supported web enviroment"),[2]);case 1:return n=i.sent(),[3,3];case 2:n=this._config.attributes,i.label=3;case 3:return t=n,r=Object.assign({url:e},t),this._isSameUrl()||(this._tracker({name:this._config.eventName||"pageView",attributes:r},this._config.provider).catch(function(e){b.debug("Failed to record the page view event",e)}),sessionStorage.setItem(w,e)),[2]}})})},e.prototype._pageViewTrackSPA=function(){g.a.browserOrNode().isBrowser&&window.addEventListener&&history.pushState?this._config.enable&&!this._hasEnabled?(v.add(history,"pushState",this._trackFunc),v.add(history,"replaceState",this._trackFunc),window.addEventListener("popstate",this._trackFunc),this._trackFunc(),this._hasEnabled=!0):(v.remove(history,"pushState"),v.remove(history,"replaceState"),window.removeEventListener("popstate",this._trackFunc),this._hasEnabled=!1):b.debug("not in the supported web enviroment")},e}(),E=g.a.browserOrNode().isBrowser&&window.Element?window.Element.prototype:null,C=E?E.matches||E.matchesSelector||E.webkitMatchesSelector||E.mozMatchesSelector||E.msMatchesSelector||E.oMatchesSelector:null,A=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},O=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},I=new a.a("EventTracker"),x={enable:!1,events:["click"],selectorPrefix:"data-amplify-analytics-",provider:"AWSPinpoint"},T=function(){function e(e,t){g.a.browserOrNode().isBrowser&&window.addEventListener?(this._config=Object.assign({},x,t),this._tracker=e,this._delegates={},this._trackFunc=this._trackFunc.bind(this),I.debug("initialize pageview tracker with opts",this._config),this.configure(this._config)):I.debug("not in the supported web environment")}return e.prototype.configure=function(e){var t=this;if(Object.assign(this._config,e),this._config.enable){if(this._config.enable&&0===Object.keys(this._delegates).length){var n="["+this._config.selectorPrefix+"on]";this._config.events.forEach(function(e){t._delegates[e]=s(document,e,n,t._trackFunc,{composed:!0,useCapture:!0})})}}else Object.keys(this._delegates).forEach(function(e){"function"==typeof t._delegates[e].destroy&&t._delegates[e].destroy()}),this._delegates={};return this._config},e.prototype._trackFunc=function(e,t){return A(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return O(this,function(c){switch(c.label){case 0:return n={},r=t.getAttribute(this._config.selectorPrefix+"on").split(/\s*,\s*/),i=t.getAttribute(this._config.selectorPrefix+"name"),(o=t.getAttribute(this._config.selectorPrefix+"attrs"))&&o.split(/\s*,\s*/).forEach(function(e){var t=e.trim().split(/\s*:\s*/);n[t[0]]=t[1]}),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()];case 1:return a=c.sent(),[3,3];case 2:a=this._config.attributes,c.label=3;case 3:return s=a,u=Object.assign({type:e.type,target:e.target.localName+" with id "+e.target.id},s,n),I.debug("events needed to be recorded",r),I.debug("attributes needed to be attached",n),r.indexOf(e.type)<0?(I.debug("event "+e.type+" is not selected to be recorded"),[2]):(this._tracker({name:i||"event",attributes:u},this._config.provider).catch(function(t){I.debug("Failed to record the "+e.type+" event', "+t)}),[2])}})})},e}(),P=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},k=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},D=new a.a("SessionTracker"),N={enable:!1,provider:"AWSPinpoint"},M=!1,L=function(){function e(e,t){this._config=Object.assign({},N,t),this._tracker=e,this._hasEnabled=!1,this._trackFunc=this._trackFunc.bind(this),this._trackBeforeUnload=this._trackBeforeUnload.bind(this),this.configure(this._config)}return e.prototype._envCheck=function(){if(!g.a.browserOrNode().isBrowser)return!1;if(!document||!document.addEventListener)return D.debug("not in the supported web environment"),!1;if(void 0!==document.hidden)this._hidden="hidden",this._visibilityChange="visibilitychange";else if(void 0!==document.msHidden)this._hidden="msHidden",this._visibilityChange="msvisibilitychange";else{if(void 0===document.webkitHidden)return D.debug("not in the supported web environment"),!1;this._hidden="webkitHidden",this._visibilityChange="webkitvisibilitychange"}return!0},e.prototype._trackFunc=function(){return P(this,void 0,void 0,function(){var e,t,n;return k(this,function(r){switch(r.label){case 0:return"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()];case 1:return t=r.sent(),[3,3];case 2:t=this._config.attributes,r.label=3;case 3:return e=t,n=Object.assign({},e),document.visibilityState===this._hidden?this._tracker({name:"_session.stop",attributes:n},this._config.provider).catch(function(e){D.debug("record session stop event failed.",e)}):this._tracker({name:"_session.start",attributes:n},this._config.provider).catch(function(e){D.debug("record session start event failed.",e)}),[2]}})})},e.prototype._trackBeforeUnload=function(e){var t=this;("function"==typeof this._config.attributes?Promise.resolve(this._config.attributes()):Promise.resolve(this._config.attributes)).then(function(e){var n=Object.assign({},e);t._tracker({name:"_session.stop",attributes:n,immediate:!0},t._config.provider).catch(function(e){D.debug("record session stop event failed.",e)})})},e.prototype._sendInitialEvent=function(){return P(this,void 0,void 0,function(){var e,t,n;return k(this,function(r){switch(r.label){case 0:return M?(D.debug("the start session has been sent when the page is loaded"),[2]):(M=!0,"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]);case 1:return t=r.sent(),[3,3];case 2:t=this._config.attributes,r.label=3;case 3:return e=t,n=Object.assign({},e),this._tracker({name:"_session.start",attributes:n},this._config.provider).catch(function(e){D.debug("record session start event failed.",e)}),[2]}})})},e.prototype.configure=function(e){return this._envCheck()?(Object.assign(this._config,e),this._config.enable&&!this._hasEnabled?(this._sendInitialEvent(),document.addEventListener(this._visibilityChange,this._trackFunc,!1),window.addEventListener("beforeunload",this._trackBeforeUnload,!1),this._hasEnabled=!0):!this._config.enable&&this._hasEnabled&&(document.removeEventListener(this._visibilityChange,this._trackFunc,!1),window.removeEventListener("beforeunload",this._trackBeforeUnload,!1),this._hasEnabled=!1),this._config):this._config},e}(),j=function(){return(j=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},R=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},U=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},F=new a.a("AnalyticsClass"),B="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",z={pageView:S,event:T,session:L},q=null,K=function(){function e(){this._config={},this._pluggables=[],this._disabled=!1,this._trackers={},q=this,this.record=this.record.bind(this),u.a.listen("auth",W),u.a.listen("storage",W),u.a.listen("analytics",W)}return e.prototype.getModuleName=function(){return"Analytics"},e.prototype.configure=function(e){var t=this;if(!e)return this._config;F.debug("configure Analytics",e);var n,r,i,o=c.a.parseMobilehubConfig(e);return this._config=Object.assign({},this._config,o.Analytics,e),this._config.disabled&&(this._disabled=!0),void 0===this._config.autoSessionRecord&&(this._config.autoSessionRecord=!0),this._pluggables.forEach(function(e){var n="AWSPinpoint"!==e.getProviderName()||t._config.AWSPinpoint?t._config[e.getProviderName()]:t._config;e.configure(j({disabled:t._config.disabled,autoSessionRecord:t._config.autoSessionRecord},n))}),0===this._pluggables.length&&this.addPluggable(new d.a),n="configured",r=null,i="The Analytics category has been configured successfully",u.a.dispatch("analytics",{event:n,data:r,message:i},"Analytics",B),F.debug("current configuration",this._config),this._config},e.prototype.addPluggable=function(e){if(e&&"Analytics"===e.getCategory()){this._pluggables.push(e);var t="AWSPinpoint"!==e.getProviderName()||this._config.AWSPinpoint?this._config[e.getProviderName()]:this._config,n=j({disabled:this._config.disabled},t);return e.configure(n),n}},e.prototype.getPluggable=function(e){for(var t=0;t<this._pluggables.length;t+=1){var n=this._pluggables[t];if(n.getProviderName()===e)return n}return F.debug("No plugin found with providerName",e),null},e.prototype.removePluggable=function(e){
for(var t=0;t<this._pluggables.length&&this._pluggables[t].getProviderName()!==e;)t+=1;return t===this._pluggables.length?void F.debug("No plugin found with providerName",e):void this._pluggables.splice(t,t+1)},e.prototype.disable=function(){this._disabled=!0},e.prototype.enable=function(){this._disabled=!1},e.prototype.startSession=function(e){return R(this,void 0,void 0,function(){var t;return U(this,function(n){return t={event:{name:"_session.start"},provider:e},[2,this._sendEvent(t)]})})},e.prototype.stopSession=function(e){return R(this,void 0,void 0,function(){var t;return U(this,function(n){return t={event:{name:"_session.stop"},provider:e},[2,this._sendEvent(t)]})})},e.prototype.record=function(e,t,n){return R(this,void 0,void 0,function(){var r;return U(this,function(i){return r=null,r="string"==typeof e?{event:{name:e,attributes:t,metrics:n},provider:"AWSPinpoint"}:{event:e,provider:t},[2,this._sendEvent(r)]})})},e.prototype.updateEndpoint=function(e,t){return R(this,void 0,void 0,function(){var n;return U(this,function(r){return n=j(j({},e),{name:"_update_endpoint"}),[2,this.record(n,t)]})})},e.prototype._sendEvent=function(e){var t=this;if(this._disabled)return F.debug("Analytics has been disabled"),Promise.resolve();var n=e.provider?e.provider:"AWSPinpoint";return new Promise(function(r,i){t._pluggables.forEach(function(t){t.getProviderName()===n&&t.record(e,{resolve:r,reject:i})})})},e.prototype.autoTrack=function(e,t){if(z[e]){"session"===e&&(this._config.autoSessionRecord=t.enable);var n=this._trackers[e];n?n.configure(t):this._trackers[e]=new z[e](this.record,t)}else F.debug("invalid tracker type")},e}(),$=!1,V=!1,G=!1,W=function(e){var t=e.channel,n=e.payload;switch(F.debug("on hub capsule "+t,n),t){case"auth":J(n);break;case"storage":H(n);break;case"analytics":Y(n)}},H=function(e){var t=e.data,n=t.attrs,r=t.metrics;n&&G&&q.record({name:"Storage",attributes:n,metrics:r}).catch(function(e){F.debug("Failed to send the storage event automatically",e)})},J=function(e){var t=e.event;if(t){var n=function(e){return R(void 0,void 0,void 0,function(){var t;return U(this,function(n){switch(n.label){case 0:if(!V||!G)return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,q.record({name:"_userauth."+e})];case 2:return[2,n.sent()];case 3:return t=n.sent(),F.debug("Failed to send the "+e+" event automatically",t),[3,4];case 4:return[2]}})})};switch(t){case"signIn":return n("sign_in");case"signUp":return n("sign_up");case"signOut":return n("sign_out");case"signIn_failure":return n("auth_fail");case"configured":(V=!0)&&G&&Z()}}},Y=function(e){var t=e.event;t&&"pinpointProvider_configured"===t&&(G=!0,V&&G&&Z())},Z=function(){var e=q.configure();!$&&e.autoSessionRecord&&(q.updateEndpoint({immediate:!0}).catch(function(e){F.debug("Failed to update the endpoint",e)}),$=!0),q.autoTrack("session",{enable:e.autoSessionRecord})},X=new K;l.a.register(X)},function(e,t,n){"use strict";function r(e,t){function n(){this.constructor=e}if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");u(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function i(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})}function o(e,t){function n(n){return function(u){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,n[0]&&(a=0)),a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,u])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s}n.d(t,"a",function(){return Xt});var s=n(48),a=n(118),u=function(e,t){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.create,Object.create;var l,d,f,p,h,v,g,y,m,b,w,_,S,E,C,A,O,I,x,T,P,k,D,N,M,L,j,R,U,F,B,z,q,K,$,V,G,W,H,J,Y,Z,X,Q,ee,te,ne,re,ie,oe,se,ae,ue,ce,le,de,fe,pe,he,ve,ge,ye,me,be,we,_e,Se,Ee,Ce,Ae,Oe,Ie,xe,Te,Pe,ke,De,Ne,Me,Le,je,Re,Ue,Fe,Be,ze,qe,Ke,$e,Ve,Ge,We,He,Je,Ye,Ze,Xe,Qe,et,tt,nt,rt=n(1);(l||(l={})).filterSensitiveLog=function(e){return c({},e)},(d||(d={})).filterSensitiveLog=function(e){return c({},e)},function(e){e.GZIP="GZIP",e.HADOOP_SNAPPY="HADOOP_SNAPPY",e.SNAPPY="Snappy",e.UNCOMPRESSED="UNCOMPRESSED",e.ZIP="ZIP"}(f||(f={})),(p||(p={})).filterSensitiveLog=function(e){return c({},e)},function(e){e.GZIP="GZIP",e.NONE="NONE"}(h||(h={})),(v||(v={})).filterSensitiveLog=function(e){return c({},e)},function(e){e.AWS_OWNED_CMK="AWS_OWNED_CMK",e.CUSTOMER_MANAGED_CMK="CUSTOMER_MANAGED_CMK"}(g||(g={})),(y||(y={})).filterSensitiveLog=function(e){return c({},e)},(m||(m={})).filterSensitiveLog=function(e){return c({},e)},function(e){e.BUFFER_INTERVAL_IN_SECONDS="BufferIntervalInSeconds",e.BUFFER_SIZE_IN_MB="BufferSizeInMBs",e.LAMBDA_ARN="LambdaArn",e.LAMBDA_NUMBER_OF_RETRIES="NumberOfRetries",e.ROLE_ARN="RoleArn"}(b||(b={})),(w||(w={})).filterSensitiveLog=function(e){return c({},e)},(_||(_={})).filterSensitiveLog=function(e){return c({},e)},(S||(S={})).filterSensitiveLog=function(e){return c({},e)},(E||(E={})).filterSensitiveLog=function(e){return c({},e)},(C||(C={})).filterSensitiveLog=function(e){return c({},e)},(A||(A={})).filterSensitiveLog=function(e){return c({},e)},(O||(O={})).filterSensitiveLog=function(e){return c({},e)},(I||(I={})).filterSensitiveLog=function(e){return c({},e)},(x||(x={})).filterSensitiveLog=function(e){return c({},e)},(T||(T={})).filterSensitiveLog=function(e){return c({},e)},(P||(P={})).filterSensitiveLog=function(e){return c({},e)},(k||(k={})).filterSensitiveLog=function(e){return c({},e)},(D||(D={})).filterSensitiveLog=function(e){return c({},e)},function(e){e.NONE="NONE",e.SNAPPY="SNAPPY",e.ZLIB="ZLIB"}(N||(N={})),function(e){e.V0_11="V0_11",e.V0_12="V0_12"}(M||(M={})),(L||(L={})).filterSensitiveLog=function(e){return c({},e)},function(e){e.GZIP="GZIP",e.SNAPPY="SNAPPY",e.UNCOMPRESSED="UNCOMPRESSED"}(j||(j={})),function(e){e.V1="V1",e.V2="V2"}(R||(R={})),(U||(U={})).filterSensitiveLog=function(e){return c({},e)},(F||(F={})).filterSensitiveLog=function(e){return c({},e)},(B||(B={})).filterSensitiveLog=function(e){return c({},e)},(z||(z={})).filterSensitiveLog=function(e){return c({},e)},(q||(q={})).filterSensitiveLog=function(e){return c({},e)},(K||(K={})).filterSensitiveLog=function(e){return c({},e)},($||($={})).filterSensitiveLog=function(e){return c({},e)},(V||(V={})).filterSensitiveLog=function(e){return c(c(c({},e),e.Url&&{Url:rt.d}),e.AccessKey&&{AccessKey:rt.d})},(G||(G={})).filterSensitiveLog=function(e){return c(c(c({},e),e.AttributeName&&{AttributeName:rt.d}),e.AttributeValue&&{AttributeValue:rt.d})},(W||(W={})).filterSensitiveLog=function(e){return c(c({},e),e.CommonAttributes&&{CommonAttributes:e.CommonAttributes.map(function(e){return G.filterSensitiveLog(e)})})},(H||(H={})).filterSensitiveLog=function(e){return c({},e)},(J||(J={})).filterSensitiveLog=function(e){return c(c(c({},e),e.EndpointConfiguration&&{EndpointConfiguration:V.filterSensitiveLog(e.EndpointConfiguration)}),e.RequestConfiguration&&{RequestConfiguration:W.filterSensitiveLog(e.RequestConfiguration)})},(Y||(Y={})).filterSensitiveLog=function(e){return c({},e)},(Z||(Z={})).filterSensitiveLog=function(e){return c({},e)},(X||(X={})).filterSensitiveLog=function(e){return c(c(c({},e),e.Username&&{Username:rt.d}),e.Password&&{Password:rt.d})},(Q||(Q={})).filterSensitiveLog=function(e){return c({},e)},(ee||(ee={})).filterSensitiveLog=function(e){return c({},e)},(te||(te={})).filterSensitiveLog=function(e){return c({},e)},(ne||(ne={})).filterSensitiveLog=function(e){return c(c(c({},e),e.RedshiftDestinationConfiguration&&{RedshiftDestinationConfiguration:X.filterSensitiveLog(e.RedshiftDestinationConfiguration)}),e.HttpEndpointDestinationConfiguration&&{HttpEndpointDestinationConfiguration:J.filterSensitiveLog(e.HttpEndpointDestinationConfiguration)})},(re||(re={})).filterSensitiveLog=function(e){return c({},e)},(ie||(ie={})).filterSensitiveLog=function(e){return c({},e)},(oe||(oe={})).filterSensitiveLog=function(e){return c({},e)},(se||(se={})).filterSensitiveLog=function(e){return c({},e)},(ae||(ae={})).filterSensitiveLog=function(e){return c({},e)},(ue||(ue={})).filterSensitiveLog=function(e){return c({},e)},(ce||(ce={})).filterSensitiveLog=function(e){return c({},e)},(le||(le={})).filterSensitiveLog=function(e){return c({},e)},function(e){e.CREATE_ENI_FAILED="CREATE_ENI_FAILED",e.CREATE_KMS_GRANT_FAILED="CREATE_KMS_GRANT_FAILED",e.DELETE_ENI_FAILED="DELETE_ENI_FAILED",e.DISABLED_KMS_KEY="DISABLED_KMS_KEY",e.ENI_ACCESS_DENIED="ENI_ACCESS_DENIED",e.INVALID_KMS_KEY="INVALID_KMS_KEY",e.KMS_ACCESS_DENIED="KMS_ACCESS_DENIED",e.KMS_KEY_NOT_FOUND="KMS_KEY_NOT_FOUND",e.KMS_OPT_IN_REQUIRED="KMS_OPT_IN_REQUIRED",e.RETIRE_KMS_GRANT_FAILED="RETIRE_KMS_GRANT_FAILED",e.SECURITY_GROUP_ACCESS_DENIED="SECURITY_GROUP_ACCESS_DENIED",e.SECURITY_GROUP_NOT_FOUND="SECURITY_GROUP_NOT_FOUND",e.SUBNET_ACCESS_DENIED="SUBNET_ACCESS_DENIED",e.SUBNET_NOT_FOUND="SUBNET_NOT_FOUND",e.UNKNOWN_ERROR="UNKNOWN_ERROR"}(de||(de={})),(fe||(fe={})).filterSensitiveLog=function(e){return c({},e)},function(e){e.DISABLED="DISABLED",e.DISABLING="DISABLING",e.DISABLING_FAILED="DISABLING_FAILED",e.ENABLED="ENABLED",e.ENABLING="ENABLING",e.ENABLING_FAILED="ENABLING_FAILED"}(pe||(pe={})),(he||(he={})).filterSensitiveLog=function(e){return c({},e)},function(e){e.ACTIVE="ACTIVE",e.CREATING="CREATING",e.CREATING_FAILED="CREATING_FAILED",e.DELETING="DELETING",e.DELETING_FAILED="DELETING_FAILED"}(ve||(ve={})),(ge||(ge={})).filterSensitiveLog=function(e){return c({},e)},(ye||(ye={})).filterSensitiveLog=function(e){return c({},e)},(me||(me={})).filterSensitiveLog=function(e){return c({},e)},(be||(be={})).filterSensitiveLog=function(e){return c({},e)},(we||(we={})).filterSensitiveLog=function(e){return c(c({},e),e.Url&&{Url:rt.d})},(_e||(_e={})).filterSensitiveLog=function(e){return c(c(c({},e),e.EndpointConfiguration&&{EndpointConfiguration:we.filterSensitiveLog(e.EndpointConfiguration)}),e.RequestConfiguration&&{RequestConfiguration:W.filterSensitiveLog(e.RequestConfiguration)})},(Se||(Se={})).filterSensitiveLog=function(e){return c(c({},e),e.Username&&{Username:rt.d})},(Ee||(Ee={})).filterSensitiveLog=function(e){return c({},e)},(Ce||(Ce={})).filterSensitiveLog=function(e){return c(c(c({},e),e.RedshiftDestinationDescription&&{RedshiftDestinationDescription:Se.filterSensitiveLog(e.RedshiftDestinationDescription)}),e.HttpEndpointDestinationDescription&&{HttpEndpointDestinationDescription:_e.filterSensitiveLog(e.HttpEndpointDestinationDescription)})},(Ae||(Ae={})).filterSensitiveLog=function(e){return c({},e)},(Oe||(Oe={})).filterSensitiveLog=function(e){return c({},e)},(Ie||(Ie={})).filterSensitiveLog=function(e){return c(c({},e),e.Destinations&&{Destinations:e.Destinations.map(function(e){return Ce.filterSensitiveLog(e)})})},(xe||(xe={})).filterSensitiveLog=function(e){return c({},e)},(Te||(Te={})).filterSensitiveLog=function(e){return c(c({},e),e.DeliveryStreamDescription&&{DeliveryStreamDescription:Ie.filterSensitiveLog(e.DeliveryStreamDescription)})},(Pe||(Pe={})).filterSensitiveLog=function(e){return c({},e)},(ke||(ke={})).filterSensitiveLog=function(e){return c({},e)},(De||(De={})).filterSensitiveLog=function(e){return c({},e)},(Ne||(Ne={})).filterSensitiveLog=function(e){return c({},e)},(Me||(Me={})).filterSensitiveLog=function(e){return c({},e)},(Le||(Le={})).filterSensitiveLog=function(e){return c({},e)},(je||(je={})).filterSensitiveLog=function(e){return c({},e)},(Re||(Re={})).filterSensitiveLog=function(e){return c({},e)},(Ue||(Ue={})).filterSensitiveLog=function(e){return c({},e)},(Fe||(Fe={})).filterSensitiveLog=function(e){return c({},e)},(Be||(Be={})).filterSensitiveLog=function(e){return c({},e)},(ze||(ze={})).filterSensitiveLog=function(e){return c({},e)},(qe||(qe={})).filterSensitiveLog=function(e){return c({},e)},(Ke||(Ke={})).filterSensitiveLog=function(e){return c({},e)},($e||($e={})).filterSensitiveLog=function(e){return c({},e)},(Ve||(Ve={})).filterSensitiveLog=function(e){return c({},e)},(Ge||(Ge={})).filterSensitiveLog=function(e){return c({},e)},(We||(We={})).filterSensitiveLog=function(e){return c({},e)},(He||(He={})).filterSensitiveLog=function(e){return c({},e)},(Je||(Je={})).filterSensitiveLog=function(e){return c({},e)},(Ye||(Ye={})).filterSensitiveLog=function(e){return c({},e)},(Ze||(Ze={})).filterSensitiveLog=function(e){return c({},e)},(Xe||(Xe={})).filterSensitiveLog=function(e){return c(c(c({},e),e.EndpointConfiguration&&{EndpointConfiguration:V.filterSensitiveLog(e.EndpointConfiguration)}),e.RequestConfiguration&&{RequestConfiguration:W.filterSensitiveLog(e.RequestConfiguration)})},(Qe||(Qe={})).filterSensitiveLog=function(e){return c(c(c({},e),e.Username&&{Username:rt.d}),e.Password&&{Password:rt.d})},(et||(et={})).filterSensitiveLog=function(e){return c({},e)},(tt||(tt={})).filterSensitiveLog=function(e){return c(c(c({},e),e.RedshiftDestinationUpdate&&{RedshiftDestinationUpdate:Qe.filterSensitiveLog(e.RedshiftDestinationUpdate)}),e.HttpEndpointDestinationUpdate&&{HttpEndpointDestinationUpdate:Xe.filterSensitiveLog(e.HttpEndpointDestinationUpdate)})},(nt||(nt={})).filterSensitiveLog=function(e){return c({},e)};var it,ot=n(3),st=function(e,t){return i(void 0,void 0,void 0,function(){var n,r,i,s,a,u,l,d,f,p,h;return o(this,function(o){switch(o.label){case 0:return r=[c({},e)],h={},[4,Et(e.body,t)];case 1:switch(n=c.apply(void 0,r.concat([(h.body=o.sent(),h)])),s="UnknownError",s=Ct(e,n.body)){case"InvalidArgumentException":case"com.amazonaws.firehose#InvalidArgumentException":return[3,2];case"InvalidKMSResourceException":case"com.amazonaws.firehose#InvalidKMSResourceException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.firehose#ResourceNotFoundException":return[3,6];case"ServiceUnavailableException":case"com.amazonaws.firehose#ServiceUnavailableException":return[3,8]}return[3,10];case 2:return a=[{}],[4,at(n,t)];case 3:return i=c.apply(void 0,[c.apply(void 0,a.concat([o.sent()])),{name:s,$metadata:wt(e)}]),[3,11];case 4:return u=[{}],[4,ut(n,t)];case 5:return i=c.apply(void 0,[c.apply(void 0,u.concat([o.sent()])),{name:s,$metadata:wt(e)}]),[3,11];case 6:return l=[{}],[4,ct(n,t)];case 7:return i=c.apply(void 0,[c.apply(void 0,l.concat([o.sent()])),{name:s,$metadata:wt(e)}]),[3,11];case 8:return d=[{}],[4,lt(n,t)];case 9:return i=c.apply(void 0,[c.apply(void 0,d.concat([o.sent()])),{name:s,$metadata:wt(e)}]),[3,11];case 10:f=n.body,s=f.code||f.Code||s,i=c(c({},f),{name:""+s,message:f.message||f.Message||s,$fault:"client",$metadata:wt(e)}),o.label=11;case 11:return p=i.message||i.Message||s,i.message=p,delete i.Message,[2,Promise.reject(Object.assign(new Error(p),i))]}})})},at=function(e,t){return i(void 0,void 0,void 0,function(){var n,r;return o(this,function(i){return n=e.body,r=ht(n,t),[2,c({name:"InvalidArgumentException",$fault:"client",$metadata:wt(e)},r)]})})},ut=function(e,t){return i(void 0,void 0,void 0,function(){var n,r;return o(this,function(i){return n=e.body,r=vt(n,t),[2,c({name:"InvalidKMSResourceException",$fault:"client",$metadata:wt(e)},r)]})})},ct=function(e,t){return i(void 0,void 0,void 0,function(){var n,r;return o(this,function(i){return n=e.body,r=mt(n,t),[2,c({name:"ResourceNotFoundException",$fault:"client",$metadata:wt(e)},r)]})})},lt=function(e,t){return i(void 0,void 0,void 0,function(){var n,r;return o(this,function(i){return n=e.body,r=bt(n,t),[2,c({name:"ServiceUnavailableException",$fault:"server",$metadata:wt(e)},r)]})})},dt=function(e,t){return c(c({},void 0!==e.DeliveryStreamName&&null!==e.DeliveryStreamName&&{DeliveryStreamName:e.DeliveryStreamName}),void 0!==e.Records&&null!==e.Records&&{Records:ft(e.Records,t)})},ft=function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:pt(e,t)})},pt=function(e,t){return c({},void 0!==e.Data&&null!==e.Data&&{Data:t.base64Encoder(e.Data)})},ht=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},vt=function(e,t){return{code:void 0!==e.code&&null!==e.code?e.code:void 0,message:void 0!==e.message&&null!==e.message?e.message:void 0}},gt=function(e,t){return{Encrypted:void 0!==e.Encrypted&&null!==e.Encrypted?e.Encrypted:void 0,FailedPutCount:void 0!==e.FailedPutCount&&null!==e.FailedPutCount?e.FailedPutCount:void 0,RequestResponses:void 0!==e.RequestResponses&&null!==e.RequestResponses?yt(e.RequestResponses,t):void 0}},yt=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:function(e,t){return{ErrorCode:void 0!==e.ErrorCode&&null!==e.ErrorCode?e.ErrorCode:void 0,ErrorMessage:void 0!==e.ErrorMessage&&null!==e.ErrorMessage?e.ErrorMessage:void 0,RecordId:void 0!==e.RecordId&&null!==e.RecordId?e.RecordId:void 0}}(e)})},mt=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},bt=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},wt=function(e){var t;return{httpStatusCode:e.statusCode,requestId:null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},_t=function(e,t){return function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)}(e,t).then(function(e){return t.utf8Encoder(e)})},St=function(e,t,n,r,s){return i(void 0,void 0,void 0,function(){var i,a,u,c,l,d;return o(this,function(o){switch(o.label){case 0:return[4,e.endpoint()];case 1:return i=o.sent(),a=i.hostname,u=i.protocol,c=void 0===u?"https":u,l=i.port,d={protocol:c,hostname:a,port:l,method:"POST",path:n,headers:t},void 0!==r&&(d.hostname=r),void 0!==s&&(d.body=s),[2,new ot.a(d)]}})})},Et=function(e,t){return _t(e,t).then(function(e){return e.length?JSON.parse(e):{}})},Ct=function(e,t){var n,r,i=function(e){var t=e;return t.indexOf(":")>=0&&(t=t.split(":")[0]),t.indexOf("#")>=0&&(t=t.split("#")[1]),t},o=(n=e.headers,r="x-amzn-errortype",Object.keys(n).find(function(e){return e.toLowerCase()===r.toLowerCase()}));return void 0!==o?i(e.headers[o]):void 0!==t.code?i(t.code):void 0!==t.__type?i(t.__type):""},At=n(10),Ot=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return r(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(At.a)(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"FirehoseClient",commandName:"PutRecordBatchCommand",inputFilterSensitiveLog:ze.filterSensitiveLog,outputFilterSensitiveLog:Ke.filterSensitiveLog},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},i)},t.prototype.serialize=function(e,t){return function(e,t){return i(void 0,void 0,void 0,function(){var n,r;return o(this,function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Firehose_20150804.PutRecordBatch"},r=JSON.stringify(dt(e,t)),[2,St(t,n,"/",void 0,r)]})})}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return i(void 0,void 0,void 0,function(){var n,r,i;return o(this,function(o){switch(o.label){case 0:return e.statusCode>=300?[2,st(e,t)]:[4,Et(e.body,t)];case 1:return n=o.sent(),r=gt(n,t),i=c({$metadata:wt(e)},r),[2,Promise.resolve(i)]}})})}(e,t)},t}(rt.b),It=n(181),xt=n(42),Tt=n(22),Pt=n(45),kt=n(14),Dt=n(18),Nt=n(43),Mt=n(44),Lt=n(16),jt=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),Rt=new Set(["cn-north-1","cn-northwest-1"]),Ut=new Set(["us-iso-east-1"]),Ft=new Set(["us-isob-east-1"]),Bt=new Set(["us-gov-east-1","us-gov-west-1"]),zt={apiVersion:"2015-08-04",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,t){var n=void 0;switch(e){case"af-south-1":n={hostname:"firehose.af-south-1.amazonaws.com",partition:"aws"};break;case"ap-east-1":n={hostname:"firehose.ap-east-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-1":n={hostname:"firehose.ap-northeast-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-2":n={hostname:"firehose.ap-northeast-2.amazonaws.com",partition:"aws"};break;case"ap-south-1":n={hostname:"firehose.ap-south-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-1":n={hostname:"firehose.ap-southeast-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-2":n={hostname:"firehose.ap-southeast-2.amazonaws.com",partition:"aws"};break;case"ca-central-1":n={hostname:"firehose.ca-central-1.amazonaws.com",partition:"aws"};break;case"cn-north-1":n={hostname:"firehose.cn-north-1.amazonaws.com.cn",partition:"aws-cn"};break;case"cn-northwest-1":n={hostname:"firehose.cn-northwest-1.amazonaws.com.cn",partition:"aws-cn"};break;case"eu-central-1":n={hostname:"firehose.eu-central-1.amazonaws.com",partition:"aws"};break;case"eu-north-1":n={hostname:"firehose.eu-north-1.amazonaws.com",partition:"aws"};break;case"eu-south-1":n={hostname:"firehose.eu-south-1.amazonaws.com",partition:"aws"};break;case"eu-west-1":n={hostname:"firehose.eu-west-1.amazonaws.com",partition:"aws"};break;case"eu-west-2":n={hostname:"firehose.eu-west-2.amazonaws.com",partition:"aws"};break;case"eu-west-3":n={hostname:"firehose.eu-west-3.amazonaws.com",partition:"aws"};break;case"fips-us-east-1":n={hostname:"firehose-fips.us-east-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"fips-us-east-2":n={hostname:"firehose-fips.us-east-2.amazonaws.com",partition:"aws",signingRegion:"us-east-2"};break;case"fips-us-gov-east-1":n={hostname:"firehose-fips.us-gov-east-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-east-1"};break;case"fips-us-gov-west-1":n={hostname:"firehose-fips.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"fips-us-west-1":n={hostname:"firehose-fips.us-west-1.amazonaws.com",partition:"aws",signingRegion:"us-west-1"};break;case"fips-us-west-2":n={hostname:"firehose-fips.us-west-2.amazonaws.com",partition:"aws",signingRegion:"us-west-2"};break;case"me-south-1":n={hostname:"firehose.me-south-1.amazonaws.com",partition:"aws"};break;case"sa-east-1":n={hostname:"firehose.sa-east-1.amazonaws.com",partition:"aws"};break;case"us-east-1":n={hostname:"firehose.us-east-1.amazonaws.com",partition:"aws"};break;case"us-east-2":n={hostname:"firehose.us-east-2.amazonaws.com",partition:"aws"};break;case"us-gov-east-1":n={hostname:"firehose.us-gov-east-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-gov-west-1":n={hostname:"firehose.us-gov-west-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-west-1":n={hostname:"firehose.us-west-1.amazonaws.com",partition:"aws"};break;case"us-west-2":n={hostname:"firehose.us-west-2.amazonaws.com",partition:"aws"};break;default:jt.has(e)&&(n={hostname:"firehose.{region}.amazonaws.com".replace("{region}",e),partition:"aws"}),Rt.has(e)&&(n={hostname:"firehose.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),Ut.has(e)&&(n={hostname:"firehose.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),Ft.has(e)&&(n={hostname:"firehose.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),Bt.has(e)&&(n={hostname:"firehose.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}),void 0===n&&(n={hostname:"firehose.{region}.amazonaws.com".replace("{region}",e),partition:"aws"})}return Promise.resolve(c({signingService:"firehose"},n))},serviceId:"Firehose",urlParser:n(47).a},qt=c(c({},zt),{runtime:"browser",base64Decoder:Dt.a,base64Encoder:Dt.b,bodyLengthChecker:Nt.a,credentialDefaultProvider:function(e){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:Object(Mt.a)({serviceId:zt.serviceId,clientVersion:It.version}),maxAttempts:kt.a,region:Object(Pt.a)("Region is missing"),requestHandler:new Tt.a,sha256:xt.Sha256,streamCollector:Tt.b,utf8Decoder:Lt.a,utf8Encoder:Lt.b}),Kt=n(24),$t=n(41),Vt=n(21),Gt=n(46),Wt=n(27),Ht=n(23),Jt=function(e){function t(t){var n=this,r=c(c({},qt),t),i=Object(Kt.b)(r),o=Object(Kt.a)(i),s=Object(Wt.b)(o),a=Object(kt.c)(s),u=Object(Vt.b)(a),l=Object(Ht.b)(u);return(n=e.call(this,l)||this).config=l,n.middlewareStack.use(Object(Wt.a)(n.config)),n.middlewareStack.use(Object(kt.b)(n.config)),n.middlewareStack.use(Object($t.a)(n.config)),n.middlewareStack.use(Object(Vt.a)(n.config)),n.middlewareStack.use(Object(Gt.a)(n.config)),n.middlewareStack.use(Object(Ht.a)(n.config)),n}return r(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(rt.a),Yt=(it=function(e,t){return(it=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}it(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Zt=new s.a("AWSKineisFirehoseProvider"),Xt=function(e){function t(t){return e.call(this,t)||this}return Yt(t,e),t.prototype.getProviderName=function(){return"AWSKinesisFirehose"},t.prototype._sendEvents=function(e){var t=this;if(0!==e.length){var n=e[0],r=n.config,i=n.credentials;if(!this._init(r,i))return!1;var o={};e.map(function(e){var t=e.event,n=t.streamName,r=t.data;void 0===o[n]&&(o[n]=[]);var i=r&&"string"!=typeof r?JSON.stringify(r):r,s={Data:Object(Lt.a)(i)};o[n].push(s)}),Object.keys(o).map(function(e){Zt.debug("putting records to kinesis",e,"with records",o[e]),t._kinesisFirehose.send(new Ot({Records:o[e],DeliveryStreamName:e})).then(function(t){return Zt.debug("Upload records to stream",e)}).catch(function(e){return Zt.debug("Failed to upload records to Kinesis",e)})})}},t.prototype._init=function(e,t){if(Zt.debug("init clients"),this._kinesisFirehose&&this._config.credentials&&this._config.credentials.sessionToken===t.sessionToken&&this._config.credentials.identityId===t.identityId)return Zt.debug("no change for analytics config, directly return from init"),!0;this._config.credentials=t;var n=e.region;return this._initFirehose(n,t)},t.prototype._initFirehose=function(e,t){return Zt.debug("initialize kinesis firehose with credentials",t),this._kinesisFirehose=new Jt({apiVersion:"2015-08-04",region:e,credentials:t}),!0},t}(a.a)},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",function(){return fe});var i,o,s,a=n(15),u=n(34),c=n(48),l=n(90),d=n(20),f=n(188),p=n(30),h=function(){return(h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},v=new c.a("AbstractPubSubProvider"),g=function(){function e(e){void 0===e&&(e={}),this._config=e}return e.prototype.configure=function(e){return void 0===e&&(e={}),this._config=h(h({},e),this._config),v.debug("configure "+this.getProviderName(),this._config),this.options},e.prototype.getCategory=function(){return"PubSub"},Object.defineProperty(e.prototype,"options",{get:function(){return h({},this._config)},enumerable:!0,configurable:!0}),e}(),y=n(78),m=n(29),b=n(430),w=function(){return(w=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},_={KEEP_ALIVE_MISSED:{keepAliveState:"unhealthy"},KEEP_ALIVE:{keepAliveState:"healthy"},CONNECTION_ESTABLISHED:{connectionState:"connected"},CONNECTION_FAILED:{intendedConnectionState:"disconnected",connectionState:"disconnected"},CLOSING_CONNECTION:{intendedConnectionState:"disconnected"},OPENING_CONNECTION:{intendedConnectionState:"connected",connectionState:"connecting"},CLOSED:{connectionState:"disconnected"},ONLINE:{networkState:"connected"},OFFLINE:{networkState:"disconnected"}},S=function(){function e(){var e=this;this._networkMonitoringSubscription=void 0,this._linkedConnectionState={networkState:"connected",connectionState:"disconnected",intendedConnectionState:"disconnected",keepAliveState:"healthy"},this._linkedConnectionStateObservable=new a.a(function(t){t.next(e._linkedConnectionState),e._linkedConnectionStateObserver=t})}return e.prototype.enableNetworkMonitoring=function(){var e=this;void 0===this._networkMonitoringSubscription&&(this._networkMonitoringSubscription=(new b.a).networkMonitor().subscribe(function(t){var n=t.online;e.record(n?_.ONLINE:_.OFFLINE)}))},e.prototype.disableNetworkMonitoring=function(){var e;null===(e=this._networkMonitoringSubscription)||void 0===e||e.unsubscribe(),this._networkMonitoringSubscription=void 0},Object.defineProperty(e.prototype,"connectionStateObservable",{get:function(){var e,t=this;return this._linkedConnectionStateObservable.map(function(e){return t.connectionStatesTranslator(e)}).filter(function(t){var n=t!==e;return e=t,n})},enumerable:!0,configurable:!0}),e.prototype.record=function(e){"connected"===e.intendedConnectionState?this.enableNetworkMonitoring():"disconnected"===e.intendedConnectionState&&this.disableNetworkMonitoring();var t=w(w({},this._linkedConnectionState),e);this._linkedConnectionState=w({},t),this._linkedConnectionStateObserver.next(this._linkedConnectionState)},e.prototype.connectionStatesTranslator=function(e){var t=e.connectionState,n=e.networkState,r=e.intendedConnectionState,i=e.keepAliveState;return"connected"===t&&"disconnected"===n?m.b.ConnectedPendingNetwork:"connected"===t&&"disconnected"===r?m.b.ConnectedPendingDisconnect:"disconnected"===t&&"connected"===r&&"disconnected"===n?m.b.ConnectionDisruptedPendingNetwork:"disconnected"===t&&"connected"===r?m.b.ConnectionDisrupted:"connected"===t&&"unhealthy"===i?m.b.ConnectedPendingKeepAlive:"connecting"===t?m.b.Connecting:"disconnected"===t?m.b.Disconnected:m.b.Connected},e}(),E=[400,401,403];!function(e){e.GQL_CONNECTION_INIT="connection_init",e.GQL_CONNECTION_ERROR="connection_error",e.GQL_CONNECTION_ACK="connection_ack",e.GQL_START="start",e.GQL_START_ACK="start_ack",e.GQL_DATA="data",e.GQL_CONNECTION_KEEP_ALIVE="ka",e.GQL_STOP="stop",e.GQL_COMPLETE="complete",e.GQL_ERROR="error"}(i||(i={})),function(e){e[e.PENDING=0]="PENDING",e[e.CONNECTED=1]="CONNECTED",e[e.FAILED=2]="FAILED"}(o||(o={})),function(e){e[e.CLOSED=0]="CLOSED",e[e.READY=1]="READY",e[e.CONNECTING=2]="CONNECTING"}(s||(s={}))
;var C,A="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",O={accept:"application/json, text/javascript","content-encoding":"amz-1.0","content-type":"application/json; charset=UTF-8"},I=(C=function(e,t){return(C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}C(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),x=function(){return(x=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},T=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},P=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},k=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},D=new c.a("MqttOverWSProvider"),N=function(){function e(){this.promises=new Map}return e.prototype.get=function(e,t){return T(this,void 0,void 0,function(){var n,r;return P(this,function(i){return(n=this.promises.get(e))?[2,n]:t?(r=t(e),this.promises.set(e,r),[2,r]):[2,void 0]})})},Object.defineProperty(e.prototype,"allClients",{get:function(){return Array.from(this.promises.keys())},enumerable:!0,configurable:!0}),e.prototype.remove=function(e){this.promises.delete(e)},e}(),M="undefined"!=typeof Symbol?Symbol("topic"):"@@topic",L=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,x(x({},t),{clientId:t.clientId||Object(p.v4)()}))||this;return n._clientsQueue=new N,n.connectionStateMonitor=new S,n._topicObservers=new Map,n._clientIdObservers=new Map,n.connectionStateMonitor.connectionStateObservable.subscribe(function(e){var t,r,i;t="ConnectionStateChange",r={provider:n,connectionState:e},i="Connection state is "+e,y.a.dispatch("pubsub",{event:t,data:r,message:i},"PubSub",A)}),n}return I(t,e),Object.defineProperty(t.prototype,"clientId",{get:function(){return this.options.clientId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endpoint",{get:function(){return this.options.aws_pubsub_endpoint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clientsQueue",{get:function(){return this._clientsQueue},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSSLEnabled",{get:function(){return!this.options.aws_appsync_dangerously_connect_to_http_endpoint_for_testing},enumerable:!0,configurable:!0}),t.prototype.getTopicForValue=function(e){return"object"===r(e)&&e[M]},t.prototype.getProviderName=function(){return"MqttOverWSProvider"},t.prototype.onDisconnect=function(e){var t=this,n=e.clientId,r=e.errorCode,i=k(e,["clientId","errorCode"]);if(0!==r){D.warn(n,JSON.stringify(x({errorCode:r},i),null,2));var o=[];if(!n)return;var s=this._clientIdObservers.get(n);if(!s)return;s.forEach(function(e){e.error("Disconnected, error code: "+r),t._topicObservers.forEach(function(t,n){t.delete(e),0===t.size&&o.push(n)})}),this._clientIdObservers.delete(n),o.forEach(function(e){t._topicObservers.delete(e)})}},t.prototype.newClient=function(e){var t=e.url,n=e.clientId;return T(this,void 0,void 0,function(){var e,r=this;return P(this,function(i){switch(i.label){case 0:return D.debug("Creating new MQTT client",n),this.connectionStateMonitor.record(_.OPENING_CONNECTION),(e=new f.Client(t,n)).onMessageArrived=function(e){var t=e.destinationName,n=e.payloadString;r._onMessage(t,n)},e.onConnectionLost=function(e){var t=e.errorCode,i=k(e,["errorCode"]);r.onDisconnect(x({clientId:n,errorCode:t},i)),r.connectionStateMonitor.record(_.CLOSED)},[4,new Promise(function(t,n){e.connect({useSSL:r.isSSLEnabled,mqttVersion:3,onSuccess:function(){return t(e)},onFailure:function(){n(),r.connectionStateMonitor.record(_.CONNECTION_FAILED)}})})];case 1:return i.sent(),this.connectionStateMonitor.record(_.CONNECTION_ESTABLISHED),[2,e]}})})},t.prototype.connect=function(e,t){return void 0===t&&(t={}),T(this,void 0,void 0,function(){var n=this;return P(this,function(r){switch(r.label){case 0:return[4,this.clientsQueue.get(e,function(e){return n.newClient(x(x({},t),{clientId:e}))})];case 1:return[2,r.sent()]}})})},t.prototype.disconnect=function(e){return T(this,void 0,void 0,function(){var t;return P(this,function(n){switch(n.label){case 0:return[4,this.clientsQueue.get(e)];case 1:return(t=n.sent())&&t.isConnected()&&(t.disconnect(),this.connectionStateMonitor.record(_.CLOSED)),this.clientsQueue.remove(e),[2]}})})},t.prototype.publish=function(e,t){return T(this,void 0,void 0,function(){var n,r,i,o;return P(this,function(s){switch(s.label){case 0:return n=[].concat(e),r=JSON.stringify(t),[4,this.endpoint];case 1:return i=s.sent(),[4,this.connect(this.clientId,{url:i})];case 2:return o=s.sent(),D.debug("Publishing to topic(s)",n.join(","),r),n.forEach(function(e){return o.send(e,r)}),[2]}})})},t.prototype._onMessage=function(e,t){try{var n=[];this._topicObservers.forEach(function(t,r){(function(e,t){for(var n=e.split("/"),r=n.length,i=t.split("/"),o=0;o<r;++o){var s=n[o],a=i[o];if("#"===s)return i.length>=r;if("+"!==s&&s!==a)return!1}return r===i.length})(r,e)&&n.push(t)});var i=JSON.parse(t);"object"===r(i)&&(i[M]=e),n.forEach(function(e){e.forEach(function(e){return e.next(i)})})}catch(e){D.warn("Error handling message",e,t)}},t.prototype.subscribe=function(e,t){var n=this;void 0===t&&(t={});var r=[].concat(e);return D.debug("Subscribing to topic(s)",r.join(",")),new a.a(function(e){var i;r.forEach(function(t){var r=n._topicObservers.get(t);r||(r=new Set,n._topicObservers.set(t,r)),r.add(e)});var o=t.clientId,s=void 0===o?n.clientId:o,a=n._clientIdObservers.get(s);return a||(a=new Set),a.add(e),n._clientIdObservers.set(s,a),T(n,void 0,void 0,function(){var n,o,a,u;return P(this,function(c){switch(c.label){case 0:return void 0!==(n=t.url)?[3,2]:[4,this.endpoint];case 1:return a=c.sent(),[3,3];case 2:a=n,c.label=3;case 3:o=a,c.label=4;case 4:return c.trys.push([4,6,,7]),[4,this.connect(s,{url:o})];case 5:return i=c.sent(),r.forEach(function(e){i.subscribe(e)}),[3,7];case 6:return u=c.sent(),e.error(u),[3,7];case 7:return[2]}})}),function(){var t,o;return D.debug("Unsubscribing from topic(s)",r.join(",")),i&&(null===(t=n._clientIdObservers.get(s))||void 0===t||t.delete(e),0===(null===(o=n._clientIdObservers.get(s))||void 0===o?void 0:o.size)&&(n.connectionStateMonitor.record(_.CLOSING_CONNECTION),n.disconnect(s),n._clientIdObservers.delete(s)),r.forEach(function(t){var r=n._topicObservers.get(t)||new Set;r.delete(e),0===r.size&&(n._topicObservers.delete(t),i.isConnected()&&i.unsubscribe(t))})),null}})},t}(g),j=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),R=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},U=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},F=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},B=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},z=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(B(arguments[t]));return e},q=new c.a("AWSAppSyncProvider"),K=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._topicClient=new Map,t._topicAlias=new Map,t}return j(t,e),Object.defineProperty(t.prototype,"endpoint",{get:function(){throw new Error("Not supported")},enumerable:!0,configurable:!0}),t.prototype.getProviderName=function(){return"AWSAppSyncProvider"},t.prototype.publish=function(e,t,n){return R(this,void 0,void 0,function(){return U(this,function(e){throw new Error("Operation not supported")})})},t.prototype._cleanUp=function(e){var t=this;Array.from(this._topicClient.entries()).filter(function(t){return B(t,2)[1].clientId===e}).map(function(e){return B(e,1)[0]}).forEach(function(e){return t._cleanUpForTopic(e)})},t.prototype._cleanUpForTopic=function(e){this._topicClient.delete(e),this._topicAlias.delete(e)},t.prototype.onDisconnect=function(e){var t=this,n=e.clientId,r=e.errorCode,i=F(e,["clientId","errorCode"]);0!==r&&(Array.from(this._topicClient.entries()).filter(function(e){return B(e,2)[1].clientId===n}).map(function(e){return B(e,1)[0]}).forEach(function(e){t._topicObservers.has(e)&&(t._topicObservers.get(e).forEach(function(e){e.closed||e.error(i)}),t._topicObservers.delete(e))}),this._cleanUp(n))},t.prototype.disconnect=function(t){return R(this,void 0,void 0,function(){return U(this,function(n){switch(n.label){case 0:return[4,this.clientsQueue.get(t,function(){return null})];case 1:return n.sent(),[4,e.prototype.disconnect.call(this,t)];case 2:return n.sent(),this._cleanUp(t),[2]}})})},t.prototype.subscribe=function(e,t){var n=this;void 0===t&&(t={});var r=new a.a(function(r){var i=[].concat(e);return q.debug("Subscribing to topic(s)",i.join(",")),R(n,void 0,void 0,function(){var e,n,o,s,a,u=this;return U(this,function(c){switch(c.label){case 0:return i.forEach(function(e){u._topicObservers.has(e)||u._topicObservers.set(e,new Set),u._topicObservers.get(e).add(r)}),e=t.mqttConnections,n=void 0===e?[]:e,o=t.newSubscriptions,s=Object.entries(o).map(function(e){var t=B(e,2),n=t[0];return[t[1].topic,n]}),this._topicAlias=new Map(z(Array.from(this._topicAlias.entries()),s)),a=Object.entries(i.reduce(function(e,t){var r=n.find(function(e){return e.topics.indexOf(t)>-1});if(r){var i=r.client,o=r.url;e[i]||(e[i]={url:o,topics:new Set}),e[i].topics.add(t)}return e},{})),[4,Promise.all(a.map(function(e){var t=B(e,2),n=t[0],i=t[1],o=i.url,s=i.topics;return R(u,void 0,void 0,function(){var e,t,i=this;return U(this,function(a){switch(a.label){case 0:e=null,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.connect(n,{clientId:n,url:o})];case 2:return e=a.sent(),[3,4];case 3:return t=a.sent(),r.error({message:"Failed to connect",error:t}),r.complete(),[2,void 0];case 4:return s.forEach(function(t){e.isConnected()&&(e.subscribe(t),i._topicClient.set(t,e))}),[2,e]}})})}))];case 1:return c.sent(),[2]}})}),function(){q.debug("Unsubscribing from topic(s)",i.join(",")),i.forEach(function(e){var t=n._topicClient.get(e);t&&t.isConnected()&&(t.unsubscribe(e),n._topicClient.delete(e),Array.from(n._topicClient.values()).some(function(e){return e===t})||n.disconnect(t.clientId)),n._topicObservers.delete(e)})}});return a.a.from(r).map(function(e){var t=n.getTopicForValue(e),r=n._topicAlias.get(t);return e.data=Object.entries(e.data).reduce(function(e,t){var n=B(t,2),i=n[0],o=n[1];return e[r||i]=o,e},{}),e})},t}(L),$=n(197),V=n(19),G=n(12),W=n(7),H=n(429),J=n(80),Y=n(93),Z=n(26),X=n(37),Q=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ee=function(){return(ee=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},te=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},ne=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},re=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},ie=new c.a("AWSAppSyncRealTimeProvider"),oe=function(e,t,n){y.a.dispatch("api",{event:e,data:t,message:n},"PubSub",A)},se=/^https:\/\/\w{26}\.appsync\-api\.\w{2}(?:(?:\-\w{2,})+)\-\d\.amazonaws.com\/graphql$/i,ae=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,t)||this;return n.socketStatus=s.CLOSED,n.keepAliveTimeout=3e5,n.subscriptionObserverMap=new Map,n.promiseArray=[],n.connectionStateMonitor=new S,n.connectionStateMonitor.connectionStateObservable.subscribe(function(e){oe("ConnectionStateChange",{provider:n,connectionState:e},"Connection state is "+e)}),n}return Q(t,e),t.prototype.getNewWebSocket=function(e,t){return new WebSocket(e,t)},t.prototype.getProviderName=function(){return"AWSAppSyncRealTimeProvider"},t.prototype.newClient=function(){throw new Error("Not used here")},t.prototype.publish=function(e,t,n){return te(this,void 0,void 0,function(){return ne(this,function(e){throw new Error("Operation not supported")})})},t.prototype.isCustomDomain=function(e){return null===e.match(se)},t.prototype.subscribe=function(e,t){var n=this,r=null==t?void 0:t.appSyncGraphqlEndpoint;return new a.a(function(e){if(t&&r){var i=Object(p.v4)();return n._startSubscriptionWithAWSAppSyncRealTime({options:t,observer:e,subscriptionId:i}).catch(function(t){e.error({errors:[ee({},new $.a(m.a.REALTIME_SUBSCRIPTION_INIT_ERROR+": "+t))]}),n.connectionStateMonitor.record(_.CLOSED),e.complete()}),function(){return te(n,void 0,void 0,function(){var e,t;return ne(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,3,4]),[4,this._waitForSubscriptionToBeConnected(i)];case 1:if(n.sent(),!(e=(this.subscriptionObserverMap.get(i)||{}).subscriptionState))return[2];if(e!==o.CONNECTED)throw new Error("Subscription never connected");return this._sendUnsubscriptionMessage(i),[3,4];case 2:return t=n.sent(),ie.debug("Error while unsubscribing "+t),[3,4];case 3:return this._removeSubscriptionObserver(i),[7];case 4:return[2]}})})}}e.error({errors:[ee({},new $.a("Subscribe only available for AWS AppSync endpoint"))]}),e.complete()})},Object.defineProperty(t.prototype,"isSSLEnabled",{get:function(){return!this.options.aws_appsync_dangerously_connect_to_http_endpoint_for_testing},enumerable:!0,configurable:!0}),t.prototype._startSubscriptionWithAWSAppSyncRealTime=function(e){var t,n,r=e.options,s=e.observer,a=e.subscriptionId;return te(this,void 0,void 0,function(){var e,u,c,d,f,p,h,v,g,y,b,w,S,E,C,A,O,I,x,T,P,k,D,N,M,L=this;return ne(this,function(j){switch(j.label){case 0:return e=r.appSyncGraphqlEndpoint,u=r.authenticationType,c=r.query,d=r.variables,f=r.apiKey,p=r.region,h=r.graphql_headers,v=void 0===h?function(){return{}}:h,g=r.additionalHeaders,y=void 0===g?{}:g,b=o.PENDING,w={query:c,variables:d},this.subscriptionObserverMap.set(a,{observer:s,query:null!=c?c:"",variables:null!=d?d:{},subscriptionState:b,startAckTimeoutId:void 0}),S=JSON.stringify(w),C=[{}],[4,this._awsRealTimeHeaderBasedAuth({apiKey:f,appSyncGraphqlEndpoint:e,authenticationType:u,payload:S,canonicalUri:"",region:p,additionalHeaders:y})];case 1:return A=[ee.apply(void 0,C.concat([j.sent()]))],[4,v()];case 2:E=ee.apply(void 0,[ee.apply(void 0,[ee.apply(void 0,A.concat([j.sent()])),y]),(M={},M[l.c]=W.a.userAgent,M)]),O={id:a,payload:{data:S,extensions:{authorization:ee({},E)}},type:i.GQL_START},I=JSON.stringify(O),j.label=3;case 3:return j.trys.push([3,5,,6]),this.connectionStateMonitor.record(_.OPENING_CONNECTION),[4,this._initializeWebSocketConnection({apiKey:f,appSyncGraphqlEndpoint:e,authenticationType:u,region:p,additionalHeaders:y})];case 4:return j.sent(),[3,6];case 5:return x=j.sent(),ie.debug({err:x}),T=null!==(t=x.message)&&void 0!==t?t:"",this.connectionStateMonitor.record(_.CLOSED),s.error({errors:[ee({},new $.a(m.a.CONNECTION_FAILED+": "+T))]}),s.complete(),"function"==typeof(P=(this.subscriptionObserverMap.get(a)||{}).subscriptionFailedCallback)&&P(),[2];case 6:return k=null!==(n=this.subscriptionObserverMap.get(a))&&void 0!==n?n:{},D=k.subscriptionFailedCallback,N=k.subscriptionReadyCallback,this.subscriptionObserverMap.set(a,{observer:s,subscriptionState:b,query:null!=c?c:"",variables:null!=d?d:{},subscriptionReadyCallback:N,subscriptionFailedCallback:D,startAckTimeoutId:setTimeout(function(){L._timeoutStartSubscriptionAck.call(L,a)},15e3)}),this.awsRealTimeSocket&&this.awsRealTimeSocket.send(I),[2]}})})},t.prototype._waitForSubscriptionToBeConnected=function(e){return te(this,void 0,void 0,function(){var t,n=this;return ne(this,function(r){return(t=this.subscriptionObserverMap.get(e))&&t.subscriptionState===o.PENDING?[2,new Promise(function(r,i){var o=t.observer,s=t.subscriptionState,a=t.variables,u=t.query;n.subscriptionObserverMap.set(e,{observer:o,subscriptionState:s,variables:a,query:u,subscriptionReadyCallback:r,subscriptionFailedCallback:i})})]:[2]})})},t.prototype._sendUnsubscriptionMessage=function(e){try{if(this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.socketStatus===s.READY){var t={id:e,type:i.GQL_STOP},n=JSON.stringify(t);this.awsRealTimeSocket.send(n)}}catch(e){ie.debug({err:e})}},t.prototype._removeSubscriptionObserver=function(e){this.subscriptionObserverMap.delete(e),setTimeout(this._closeSocketIfRequired.bind(this),1e3)},t.prototype._closeSocketIfRequired=function(){if(!(this.subscriptionObserverMap.size>0))if(this.awsRealTimeSocket)if(this.connectionStateMonitor.record(_.CLOSING_CONNECTION),this.awsRealTimeSocket.bufferedAmount>0)setTimeout(this._closeSocketIfRequired.bind(this),1e3);else{ie.debug("closing WebSocket..."),this.keepAliveTimeoutId&&clearTimeout(this.keepAliveTimeoutId),this.keepAliveAlertTimeoutId&&clearTimeout(this.keepAliveAlertTimeoutId);var e=this.awsRealTimeSocket;e.onclose=null,e.onerror=null,e.close(1e3),this.awsRealTimeSocket=void 0,this.socketStatus=s.CLOSED,this.connectionStateMonitor.record(_.CLOSED)}else this.socketStatus=s.CLOSED},t.prototype._handleIncomingSubscriptionMessage=function(e){var t=this;ie.debug("subscription message from AWS AppSync RealTime: "+e.data);var n=JSON.parse(e.data),r=n.id,s=void 0===r?"":r,a=n.payload,u=n.type,c=this.subscriptionObserverMap.get(s)||{},l=c.observer,d=void 0===l?null:l,f=c.query,p=void 0===f?"":f,h=c.variables,v=void 0===h?{}:h,g=c.startAckTimeoutId,y=c.subscriptionReadyCallback,b=c.subscriptionFailedCallback;if(ie.debug({id:s,observer:d,query:p,variables:v}),u===i.GQL_DATA&&a&&a.data)d?d.next(a):ie.debug("observer not found for id: "+s);else{if(u===i.GQL_START_ACK){ie.debug("subscription ready for "+JSON.stringify({query:p,variables:v})),"function"==typeof y&&y(),g&&clearTimeout(g),oe(m.a.SUBSCRIPTION_ACK,{query:p,variables:v},"Connection established for subscription");var w=o.CONNECTED;return d&&this.subscriptionObserverMap.set(s,{observer:d,query:p,variables:v,startAckTimeoutId:void 0,subscriptionState:w,subscriptionReadyCallback:y,subscriptionFailedCallback:b}),void this.connectionStateMonitor.record(_.CONNECTION_ESTABLISHED)}if(u===i.GQL_CONNECTION_KEEP_ALIVE)return this.keepAliveTimeoutId&&clearTimeout(this.keepAliveTimeoutId),this.keepAliveAlertTimeoutId&&clearTimeout(this.keepAliveAlertTimeoutId),this.keepAliveTimeoutId=setTimeout(function(){return t._errorDisconnect(m.a.TIMEOUT_DISCONNECT)},this.keepAliveTimeout),this.keepAliveAlertTimeoutId=setTimeout(function(){t.connectionStateMonitor.record(_.KEEP_ALIVE_MISSED)},65e3),void this.connectionStateMonitor.record(_.KEEP_ALIVE);u===i.GQL_ERROR&&(w=o.FAILED,d&&(this.subscriptionObserverMap.set(s,{observer:d,query:p,variables:v,startAckTimeoutId:g,subscriptionReadyCallback:y,subscriptionFailedCallback:b,subscriptionState:w}),d.error({errors:[ee({},new $.a(m.a.CONNECTION_FAILED+": "+JSON.stringify(a)))]}),g&&clearTimeout(g),d.complete(),"function"==typeof b&&b()))}},t.prototype._errorDisconnect=function(e){ie.debug("Disconnect error: "+e),this.subscriptionObserverMap.forEach(function(t){var n=t.observer;n&&!n.closed&&n.error({errors:[ee({},new $.a(e))]})}),this.subscriptionObserverMap.clear(),this.awsRealTimeSocket&&(this.connectionStateMonitor.record(_.CLOSED),this.awsRealTimeSocket.close()),this.socketStatus=s.CLOSED},t.prototype._timeoutStartSubscriptionAck=function(e){var t=this.subscriptionObserverMap.get(e);if(t){var n=t.observer,r=t.query,i=t.variables;if(!n)return;this.subscriptionObserverMap.set(e,{observer:n,query:r,variables:i,subscriptionState:o.FAILED}),n&&!n.closed&&(n.error({errors:[ee({},new $.a("Subscription timeout "+JSON.stringify({query:r,variables:i})))]}),n.complete()),ie.debug("timeoutStartSubscription",JSON.stringify({query:r,variables:i}))}},t.prototype._initializeWebSocketConnection=function(e){var t=this,n=e.appSyncGraphqlEndpoint,r=e.authenticationType,i=e.apiKey,o=e.region,a=e.additionalHeaders;if(this.socketStatus!==s.READY)return new Promise(function(e,u){return te(t,void 0,void 0,function(){var t,c,l,d,f,p,h,v,g,y;return ne(this,function(m){switch(m.label){case 0:if(this.promiseArray.push({res:e,rej:u}),this.socketStatus!==s.CLOSED)return[3,5];m.label=1;case 1:return m.trys.push([1,4,,5]),this.socketStatus=s.CONNECTING,t="{}",d=(l=JSON).stringify,[4,this._awsRealTimeHeaderBasedAuth({authenticationType:r,payload:t,canonicalUri:"/connect",apiKey:i,appSyncGraphqlEndpoint:n,region:o,additionalHeaders:a})];case 2:return c=d.apply(l,[m.sent()]),f=G.Buffer.from(c).toString("base64"),p=G.Buffer.from(t).toString("base64"),h=null!=n?n:"",h=this.isCustomDomain(h)?h.concat("/realtime"):h.replace("appsync-api","appsync-realtime-api").replace("gogi-beta","grt-beta"),v=this.isSSLEnabled?"wss://":"ws://",h=h.replace("https://",v).replace("http://",v),g=h+"?header="+f+"&payload="+p,[4,this._initializeRetryableHandshake(g)];case 3:return m.sent(),this.promiseArray.forEach(function(e){var t=e.res;ie.debug("Notifying connection successful"),t()}),this.socketStatus=s.READY,this.promiseArray=[],[3,5];case 4:return y=m.sent(),this.promiseArray.forEach(function(e){return(0,e.rej)(y)}),this.promiseArray=[],this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.awsRealTimeSocket.close(3001),this.awsRealTimeSocket=void 0,this.socketStatus=s.CLOSED,[3,5];case 5:return[2]}})})})},t.prototype._initializeRetryableHandshake=function(e){return te(this,void 0,void 0,function(){return ne(this,function(t){switch(t.label){case 0:return ie.debug("Initializaling retryable Handshake"),[4,Object(H.c)(this._initializeHandshake.bind(this),[e],5e3)];case 1:return t.sent(),[2]}})})},t.prototype._initializeHandshake=function(e){return te(this,void 0,void 0,function(){var t,n,r,o,s=this;return ne(this,function(a){switch(a.label){case 0:ie.debug("Initializing handshake "+e),a.label=1;case 1:return a.trys.push([1,4,,5]),[4,new Promise(function(t,n){var r=s.getNewWebSocket(e,"graphql-ws");r.onerror=function(){ie.debug("WebSocket connection error")},r.onclose=function(){s.connectionStateMonitor.record(_.CONNECTION_FAILED),n(new Error("Connection handshake error"))},r.onopen=function(){return s.awsRealTimeSocket=r,t()}})];case 2:return a.sent(),[4,new Promise(function(e,t){if(s.awsRealTimeSocket){var n=!1;s.awsRealTimeSocket.onerror=function(e){ie.debug("WebSocket error "+JSON.stringify(e))},s.awsRealTimeSocket.onclose=function(e){ie.debug("WebSocket closed "+e.reason),t(new Error(JSON.stringify(e)))},s.awsRealTimeSocket.onmessage=function(r){ie.debug("subscription message from AWS AppSyncRealTime: "+r.data+" ");var o=JSON.parse(r.data),a=o.type,u=o.payload,c=(void 0===u?{}:u).connectionTimeoutMs,l=void 0===c?3e5:c;if(a===i.GQL_CONNECTION_ACK)return n=!0,s.awsRealTimeSocket&&(s.keepAliveTimeout=l,s.awsRealTimeSocket.onmessage=s._handleIncomingSubscriptionMessage.bind(s),s.awsRealTimeSocket.onerror=function(e){ie.debug(e),s._errorDisconnect(m.a.CONNECTION_CLOSED)},s.awsRealTimeSocket.onclose=function(e){ie.debug("WebSocket closed "+e.reason),s._errorDisconnect(m.a.CONNECTION_CLOSED)}),void e("Cool, connected to AWS AppSyncRealTime");if(a===i.GQL_CONNECTION_ERROR){var d=o.payload,f=(void 0===d?{}:d).errors,p=re(void 0===f?[]:f,1)[0],h=void 0===p?{}:p,v=h.errorType,g=void 0===v?"":v,y=h.errorCode;t({errorType:g,errorCode:void 0===y?0:y})}};var r={type:i.GQL_CONNECTION_INIT};s.awsRealTimeSocket.send(JSON.stringify(r)),setTimeout(function(){n||(s.connectionStateMonitor.record(_.CONNECTION_FAILED),t(new Error("Connection timeout: ack from AWSAppSyncRealTime was not received after 15000 ms")))},15e3)}})];case 3:return a.sent(),[3,5];case 4:throw t=a.sent(),r=(n=t).errorType,o=n.errorCode,E.includes(o)?new H.a(r):r?new Error(r):t;case 5:return[2]}})})},t.prototype._awsRealTimeHeaderBasedAuth=function(e){var t=e.authenticationType,n=e.payload,r=e.canonicalUri,i=e.appSyncGraphqlEndpoint,o=e.apiKey,s=e.region,a=e.additionalHeaders;return te(this,void 0,void 0,function(){var e,u,c;return ne(this,function(l){switch(l.label){case 0:return e={API_KEY:this._awsRealTimeApiKeyHeader.bind(this),AWS_IAM:this._awsRealTimeIAMHeader.bind(this),OPENID_CONNECT:this._awsRealTimeOPENIDHeader.bind(this),AMAZON_COGNITO_USER_POOLS:this._awsRealTimeCUPHeader.bind(this),AWS_LAMBDA:this._customAuthHeader},t&&e[t]?[3,1]:(ie.debug("Authentication type "+t+" not supported"),[2,""]);case 1:return u=e[t],c=V.parse(null!=i?i:"").host,ie.debug("Authenticating with "+t),[4,u({payload:n,canonicalUri:r,appSyncGraphqlEndpoint:i,apiKey:o,region:s,host:c,additionalHeaders:a})];case 2:return[2,l.sent()]}})})},t.prototype._awsRealTimeCUPHeader=function(e){var t=e.host;return te(this,void 0,void 0,function(){return ne(this,function(e){switch(e.label){case 0:return[4,X.a.currentSession()];case 1:return[2,{Authorization:e.sent().getAccessToken().getJwtToken(),host:t}]}})})},t.prototype._awsRealTimeOPENIDHeader=function(e){var t=e.host;return te(this,void 0,void 0,function(){var e,n,r;return ne(this,function(i){switch(i.label){case 0:return[4,Z.b.getItem("federatedInfo")];case 1:return(n=i.sent())?(e=n.token,[3,4]):[3,2];case 2:return[4,X.a.currentAuthenticatedUser()];case 3:(r=i.sent())&&(e=r.token),i.label=4;case 4:if(!e)throw new Error("No federated jwt");return[2,{Authorization:e,host:t}]}})})},t.prototype._awsRealTimeApiKeyHeader=function(e){var t=e.apiKey,n=e.host;return te(this,void 0,void 0,function(){var e,r;return ne(this,function(i){return e=new Date,r=e.toISOString().replace(/[:\-]|\.\d{3}/g,""),[2,{host:n,"x-amz-date":r,"x-api-key":t}]})})},t.prototype._awsRealTimeIAMHeader=function(e){var t=e.payload,n=e.canonicalUri,r=e.appSyncGraphqlEndpoint,i=e.region;return te(this,void 0,void 0,function(){var e,o,s;return ne(this,function(a){switch(a.label){case 0:return e={region:i,service:"appsync"},[4,this._ensureCredentials()];case 1:if(!a.sent())throw new Error("No credentials");return[4,J.a.get().then(function(e){var t=e;return{secret_key:t.secretAccessKey,access_key:t.accessKeyId,session_token:t.sessionToken}})];case 2:return o=a.sent(),s={url:""+r+n,data:t,method:"POST",headers:ee({},O)},[2,Y.a.sign(s,o,e).headers]}})})},t.prototype._customAuthHeader=function(e){var t=e.host,n=e.additionalHeaders;if(!n||!n.Authorization)throw new Error("No auth token specified");return{Authorization:n.Authorization,host:t}},t.prototype._ensureCredentials=function(){return J.a.get().then(function(e){if(!e)return!1;var t=J.a.shear(e);return ie.debug("set credentials for AWSAppSyncRealTimeProvider",t),!0}).catch(function(e){return ie.warn("ensure credentials error",e),!1})},t}(g),ue=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},ce=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,
i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},le=Object(u.b)().isNode,de=new c.a("PubSub"),fe=new(function(){function e(e){this._options=null!=e?e:{},de.debug("PubSub Options",this._options),this._pluggables=[],this.subscribe=this.subscribe.bind(this)}return Object.defineProperty(e.prototype,"awsAppSyncProvider",{get:function(){return this._awsAppSyncProvider||(this._awsAppSyncProvider=new K(this._options)),this._awsAppSyncProvider},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"awsAppSyncRealTimeProvider",{get:function(){return this._awsAppSyncRealTimeProvider||(this._awsAppSyncRealTimeProvider=new ae(this._options)),this._awsAppSyncRealTimeProvider},enumerable:!0,configurable:!0}),e.prototype.getModuleName=function(){return"PubSub"},e.prototype.configure=function(e){var t=this,n=e?e.PubSub||e:{};return de.debug("configure PubSub",{opt:n}),this._options=Object.assign({},this._options,n),this._pluggables.map(function(e){return e.configure(t._options)}),this._options},e.prototype.addPluggable=function(e){return ue(this,void 0,void 0,function(){return ce(this,function(t){return e&&"PubSub"===e.getCategory()?(this._pluggables.push(e),[2,e.configure(this._options)]):[2]})})},e.prototype.removePluggable=function(e){this._pluggables=this._pluggables.filter(function(t){return t.getProviderName()!==e})},e.prototype.getProviderByName=function(e){return e===l.a?this.awsAppSyncProvider:e===l.b?this.awsAppSyncRealTimeProvider:this._pluggables.find(function(t){return t.getProviderName()===e})},e.prototype.getProviders=function(e){void 0===e&&(e={});var t=e.provider;if(!t)return this._pluggables;var n=this.getProviderByName(t);if(!n)throw new Error("Could not find provider named "+t);return[n]},e.prototype.publish=function(e,t,n){return ue(this,void 0,void 0,function(){return ce(this,function(r){return[2,Promise.all(this.getProviders(n).map(function(r){return r.publish(e,t,n)}))]})})},e.prototype.subscribe=function(e,t){if(le&&this._options&&this._options.ssr)throw new Error("Subscriptions are not supported for Server-Side Rendering (SSR)");de.debug("subscribe options",t);var n=this.getProviders(t);return new a.a(function(r){var i=n.map(function(n){return{provider:n,observable:n.subscribe(e,t)}}).map(function(e){var t=e.provider;return e.observable.subscribe({start:console.error,next:function(e){return r.next({provider:t,value:e})},error:function(e){return r.error({provider:t,error:e})}})});return function(){return i.forEach(function(e){return e.unsubscribe()})}})},e}());d.a.register(fe)},function(e,t,n){"use strict";n.d(t,"a",function(){return k});var r,i=n(48),o=n(20),s=n(7),a=n(80),u=n(93),c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},l=new i.a("AbstractXRProvider"),d=function(){function e(e){void 0===e&&(e={}),this._config=e}return e.prototype.configure=function(e){return void 0===e&&(e={}),this._config=c(c({},e),this._config),l.debug("configure "+this.getProviderName(),this._config),this.options},e.prototype.getCategory=function(){return"XR"},Object.defineProperty(e.prototype,"options",{get:function(){return c({},this._config)},enumerable:!0,configurable:!0}),e}(),f=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t}(Error),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t}(p),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t}(p),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t}(p),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t}(p),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t}(p),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t}(p),w=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_=function(){return(_=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},S=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},E=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},C=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},A=new i.a("SumerianProvider"),O=function(e){function t(t){return void 0===t&&(t={}),e.call(this,t)||this}return w(t,e),t.prototype.getProviderName=function(){return"SumerianProvider"},t.prototype.loadScript=function(e){return S(this,void 0,void 0,function(){return E(this,function(t){return[2,new Promise(function(t,n){var r=document.createElement("script");r.src=e,r.addEventListener("load",function(e){t()}),r.addEventListener("error",function(t){n(new Error("Failed to load script: "+e))}),document.head.appendChild(r)})]})})},t.prototype.loadScene=function(e,t,n){return S(this,void 0,void 0,function(){var r,i,o,c,l,d,f,p,h,v,g,b,w,S,O,I,x,T,P,k,D,N,M,L,j,R,U;return E(this,function(E){switch(E.label){case 0:if(!e)throw d="No scene name passed into loadScene",A.error(d),new m(d);if(!t)throw d="No dom element id passed into loadScene",A.error(d),new y(d);if(!(r=document.getElementById(t)))throw d="DOM element id, "+t+" not found",A.error(d),new y(d);if(!(i=this.getScene(e)).sceneConfig)throw d="No scene config configured for scene: "+e,A.error(d),new m(d);if(o=i.sceneConfig.url,c=i.sceneConfig.sceneId,i.sceneConfig.hasOwnProperty("region"))l=i.sceneConfig.region;else{if(!this.options.hasOwnProperty("region"))throw d="No region configured for scene: "+e,A.error(d),new m(d);l=this.options.region}f={region:l,customUserAgent:s.a.userAgent+"-SumerianScene"},p={headers:{"X-Amz-User-Agent":s.a.userAgent}},h=o,E.label=1;case 1:return E.trys.push([1,3,,4]),[4,a.a.get()];case 2:return v=E.sent(),f.credentials=v,g={secret_key:v.secretAccessKey,access_key:v.accessKeyId,session_token:v.sessionToken},b={region:l,service:"sumerian"},w=u.a.sign({method:"GET",url:o},g,b),p.headers=_(_({},p.headers),w.headers),h=w.url,[3,4];case 3:return E.sent(),A.debug("No credentials available, the request will be unsigned"),[3,4];case 4:return[4,fetch(h,p)];case 5:return[4,(S=E.sent()).json()];case 6:if(O=E.sent(),403===S.status)throw O.message?(A.error("Failure to authenticate user: "+O.message),new m("Failure to authenticate user: "+O.message)):(A.error("Failure to authenticate user"),new m("Failure to authenticate user"));return I=O.bundleData[c],[4,fetch(I.url,{headers:I.headers})];case 7:return[4,E.sent().json()];case 8:x=E.sent(),E.label=9;case 9:return E.trys.push([9,11,,12]),[4,this.loadScript(x[c].bootstrapperUrl)];case 10:return E.sent(),[3,12];case 11:throw T=E.sent(),A.error(T),new m(T);case 12:return P=n.progressCallback?n.progressCallback:void 0,k=i.publishParamOverrides?i.publishParamOverrides:void 0,D={element:r,sceneId:c,sceneBundle:x,apiResponse:O,progressCallback:P,publishParamOverrides:k,awsSDKConfigOverride:f},[4,window.SumerianBootstrapper.loadScene(D)];case 13:N=E.sent(),i.sceneController=N,i.isLoaded=!0;try{for(M=C(N.sceneLoadWarnings),L=M.next();!L.done;L=M.next())j=L.value,A.warn("loadScene warning: "+j)}catch(e){R={error:e}}finally{try{L&&!L.done&&(U=M.return)&&U.call(M)}finally{if(R)throw R.error}}return[2]}})})},t.prototype.isSceneLoaded=function(e){return this.getScene(e).isLoaded||!1},t.prototype.getScene=function(e){if(!this.options.scenes){var t="No scenes were defined in the configuration";throw A.error(t),new h(t)}if(!e)throw t="No scene name was passed",A.error(t),new v(t);if(!this.options.scenes[e])throw t="Scene '"+e+"' is not configured",A.error(t),new v(t);return this.options.scenes[e]},t.prototype.getSceneController=function(e){if(!this.options.scenes){var t="No scenes were defined in the configuration";throw A.error(t),new h(t)}var n=this.options.scenes[e];if(!n)throw t="Scene '"+e+"' is not configured",A.error(t),new v(t);var r=n.sceneController;if(!r)throw t="Scene controller for '"+e+"' has not been loaded",A.error(t),new g(t);return r},t.prototype.isVRCapable=function(e){return this.getSceneController(e).vrCapable},t.prototype.isVRPresentationActive=function(e){return this.getSceneController(e).vrPresentationActive},t.prototype.start=function(e){this.getSceneController(e).start()},t.prototype.enterVR=function(e){this.getSceneController(e).enterVR()},t.prototype.exitVR=function(e){this.getSceneController(e).exitVR()},t.prototype.isMuted=function(e){return this.getSceneController(e).muted},t.prototype.setMuted=function(e,t){this.getSceneController(e).muted=t},t.prototype.onSceneEvent=function(e,t,n){this.getSceneController(e).on(t,n)},t.prototype.enableAudio=function(e){this.getSceneController(e).enableAudio()},t}(d),I=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},x=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},T=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},P=new i.a("XR"),k=new(function(){function e(e){this._options=e,P.debug("XR Options",this._options),this._defaultProvider="SumerianProvider",this._pluggables={},this.addPluggable(new O)}return e.prototype.configure=function(e){var t=this,n=e?e.XR||e:{};return P.debug("configure XR",{opt:n}),this._options=Object.assign({},this._options,n),Object.entries(this._pluggables).map(function(e){var r=T(e,2),i=r[0],o=r[1];i!==t._defaultProvider||n[t._defaultProvider]?o.configure(t._options[i]):o.configure(t._options)}),this._options},e.prototype.addPluggable=function(e){return I(this,void 0,void 0,function(){return x(this,function(t){return e&&"XR"===e.getCategory()?(this._pluggables[e.getProviderName()]=e,[2,e.configure(this._options)]):[2]})})},e.prototype.loadScene=function(e,t,n,r){return void 0===n&&(n={}),void 0===r&&(r=this._defaultProvider),I(this,void 0,void 0,function(){return x(this,function(i){switch(i.label){case 0:if(!this._pluggables[r])throw new b("Provider '"+r+"' not configured");return[4,this._pluggables[r].loadScene(e,t,n)];case 1:return[2,i.sent()]}})})},e.prototype.isSceneLoaded=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new b("Provider '"+t+"' not configured");return this._pluggables[t].isSceneLoaded(e)},e.prototype.getSceneController=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new b("Provider '"+t+"' not configured");return this._pluggables[t].getSceneController(e)},e.prototype.isVRCapable=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new b("Provider '"+t+"' not configured");return this._pluggables[t].isVRCapable(e)},e.prototype.isVRPresentationActive=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new b("Provider '"+t+"' not configured");return this._pluggables[t].isVRPresentationActive(e)},e.prototype.start=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new b("Provider '"+t+"' not configured");return this._pluggables[t].start(e)},e.prototype.enterVR=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new b("Provider '"+t+"' not configured");return this._pluggables[t].enterVR(e)},e.prototype.exitVR=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new b("Provider '"+t+"' not configured");return this._pluggables[t].exitVR(e)},e.prototype.isMuted=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new b("Provider '"+t+"' not configured");return this._pluggables[t].isMuted(e)},e.prototype.setMuted=function(e,t,n){if(void 0===n&&(n=this._defaultProvider),!this._pluggables[n])throw new b("Provider '"+n+"' not configured");return this._pluggables[n].setMuted(e,t)},e.prototype.onSceneEvent=function(e,t,n,r){if(void 0===r&&(r=this._defaultProvider),!this._pluggables[r])throw new b("Provider '"+r+"' not configured");return this._pluggables[r].onSceneEvent(e,t,n)},e.prototype.enableAudio=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new b("Provider '"+t+"' not configured");return this._pluggables[t].enableAudio(e)},e}())(null);o.a.register(k)},function(e,t,n){"use strict";n.r(t),n.d(t,"fromUtf8",function(){return r}),n.d(t,"toUtf8",function(){return i});var r=function(e){return"function"==typeof TextEncoder?function(e){return(new TextEncoder).encode(e)}(e):function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e.charCodeAt(n);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192,63&i|128);else if(n+1<e.length&&55296==(64512&i)&&56320==(64512&e.charCodeAt(n+1))){var o=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n));t.push(o>>18|240,o>>12&63|128,o>>6&63|128,63&o|128)}else t.push(i>>12|224,i>>6&63|128,63&i|128)}return Uint8Array.from(t)}(e)},i=function(e){return"function"==typeof TextDecoder?function(e){return new TextDecoder("utf-8").decode(e)}(e):function(e){for(var t="",n=0,r=e.length;n<r;n++){var i=e[n];if(i<128)t+=String.fromCharCode(i);else if(192<=i&&i<224){var o=e[++n];t+=String.fromCharCode((31&i)<<6|63&o)}else if(240<=i&&i<365){var s="%"+[i,e[++n],e[++n],e[++n]].map(function(e){return e.toString(16)}).join("%");t+=decodeURIComponent(s)}else t+=String.fromCharCode((15&i)<<12|(63&e[++n])<<6|63&e[++n])}return t}(e)}},function(e,t,n){"use strict";n.r(t),n.d(t,"fromUtf8",function(){return r}),n.d(t,"toUtf8",function(){return i});const r=e=>"function"==typeof TextEncoder?function(e){return(new TextEncoder).encode(e)}(e):(e=>{const t=[];for(let n=0,r=e.length;n<r;n++){const r=e.charCodeAt(n);if(r<128)t.push(r);else if(r<2048)t.push(r>>6|192,63&r|128);else if(n+1<e.length&&55296==(64512&r)&&56320==(64512&e.charCodeAt(n+1))){const i=65536+((1023&r)<<10)+(1023&e.charCodeAt(++n));t.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}else t.push(r>>12|224,r>>6&63|128,63&r|128)}return Uint8Array.from(t)})(e),i=e=>"function"==typeof TextDecoder?function(e){return new TextDecoder("utf-8").decode(e)}(e):(e=>{let t="";for(let n=0,r=e.length;n<r;n++){const r=e[n];if(r<128)t+=String.fromCharCode(r);else if(192<=r&&r<224){const i=e[++n];t+=String.fromCharCode((31&r)<<6|63&i)}else if(240<=r&&r<365){const i="%"+[r,e[++n],e[++n],e[++n]].map(e=>e.toString(16)).join("%");t+=decodeURIComponent(i)}else t+=String.fromCharCode((15&r)<<12|(63&e[++n])<<6|63&e[++n])}return t})(e)},function(e,t,n){"use strict";n.r(t),n.d(t,"fromUtf8",function(){return r}),n.d(t,"toUtf8",function(){return i});const r=e=>"function"==typeof TextEncoder?function(e){return(new TextEncoder).encode(e)}(e):(e=>{const t=[];for(let n=0,r=e.length;n<r;n++){const r=e.charCodeAt(n);if(r<128)t.push(r);else if(r<2048)t.push(r>>6|192,63&r|128);else if(n+1<e.length&&55296==(64512&r)&&56320==(64512&e.charCodeAt(n+1))){const i=65536+((1023&r)<<10)+(1023&e.charCodeAt(++n));t.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}else t.push(r>>12|224,r>>6&63|128,63&r|128)}return Uint8Array.from(t)})(e),i=e=>"function"==typeof TextDecoder?function(e){return new TextDecoder("utf-8").decode(e)}(e):(e=>{let t="";for(let n=0,r=e.length;n<r;n++){const r=e[n];if(r<128)t+=String.fromCharCode(r);else if(192<=r&&r<224){const i=e[++n];t+=String.fromCharCode((31&r)<<6|63&i)}else if(240<=r&&r<365){const i="%"+[r,e[++n],e[++n],e[++n]].map(e=>e.toString(16)).join("%");t+=decodeURIComponent(i)}else t+=String.fromCharCode((15&r)<<12|(63&e[++n])<<6|63&e[++n])}return t})(e)},function(e,t,n){"use strict";n.r(t),n.d(t,"fromUtf8",function(){return r}),n.d(t,"toUtf8",function(){return i});const r=e=>"function"==typeof TextEncoder?function(e){return(new TextEncoder).encode(e)}(e):(e=>{const t=[];for(let n=0,r=e.length;n<r;n++){const r=e.charCodeAt(n);if(r<128)t.push(r);else if(r<2048)t.push(r>>6|192,63&r|128);else if(n+1<e.length&&55296==(64512&r)&&56320==(64512&e.charCodeAt(n+1))){const i=65536+((1023&r)<<10)+(1023&e.charCodeAt(++n));t.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}else t.push(r>>12|224,r>>6&63|128,63&r|128)}return Uint8Array.from(t)})(e),i=e=>"function"==typeof TextDecoder?function(e){return new TextDecoder("utf-8").decode(e)}(e):(e=>{let t="";for(let n=0,r=e.length;n<r;n++){const r=e[n];if(r<128)t+=String.fromCharCode(r);else if(192<=r&&r<224){const i=e[++n];t+=String.fromCharCode((31&r)<<6|63&i)}else if(240<=r&&r<365){const i="%"+[r,e[++n],e[++n],e[++n]].map(e=>e.toString(16)).join("%");t+=decodeURIComponent(i)}else t+=String.fromCharCode((15&r)<<12|(63&e[++n])<<6|63&e[++n])}return t})(e)},function(e,t,n){"use strict";n.r(t),n.d(t,"fromUtf8",function(){return r}),n.d(t,"toUtf8",function(){return i});const r=e=>"function"==typeof TextEncoder?function(e){return(new TextEncoder).encode(e)}(e):(e=>{const t=[];for(let n=0,r=e.length;n<r;n++){const r=e.charCodeAt(n);if(r<128)t.push(r);else if(r<2048)t.push(r>>6|192,63&r|128);else if(n+1<e.length&&55296==(64512&r)&&56320==(64512&e.charCodeAt(n+1))){const i=65536+((1023&r)<<10)+(1023&e.charCodeAt(++n));t.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}else t.push(r>>12|224,r>>6&63|128,63&r|128)}return Uint8Array.from(t)})(e),i=e=>"function"==typeof TextDecoder?function(e){return new TextDecoder("utf-8").decode(e)}(e):(e=>{let t="";for(let n=0,r=e.length;n<r;n++){const r=e[n];if(r<128)t+=String.fromCharCode(r);else if(192<=r&&r<224){const i=e[++n];t+=String.fromCharCode((31&r)<<6|63&i)}else if(240<=r&&r<365){const i="%"+[r,e[++n],e[++n],e[++n]].map(e=>e.toString(16)).join("%");t+=decodeURIComponent(i)}else t+=String.fromCharCode((15&r)<<12|(63&e[++n])<<6|63&e[++n])}return t})(e)},function(e,t,n){"use strict";n.r(t),n.d(t,"fromUtf8",function(){return r}),n.d(t,"toUtf8",function(){return i});const r=e=>"function"==typeof TextEncoder?function(e){return(new TextEncoder).encode(e)}(e):(e=>{const t=[];for(let n=0,r=e.length;n<r;n++){const r=e.charCodeAt(n);if(r<128)t.push(r);else if(r<2048)t.push(r>>6|192,63&r|128);else if(n+1<e.length&&55296==(64512&r)&&56320==(64512&e.charCodeAt(n+1))){const i=65536+((1023&r)<<10)+(1023&e.charCodeAt(++n));t.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}else t.push(r>>12|224,r>>6&63|128,63&r|128)}return Uint8Array.from(t)})(e),i=e=>"function"==typeof TextDecoder?function(e){return new TextDecoder("utf-8").decode(e)}(e):(e=>{let t="";for(let n=0,r=e.length;n<r;n++){const r=e[n];if(r<128)t+=String.fromCharCode(r);else if(192<=r&&r<224){const i=e[++n];t+=String.fromCharCode((31&r)<<6|63&i)}else if(240<=r&&r<365){const i="%"+[r,e[++n],e[++n],e[++n]].map(e=>e.toString(16)).join("%");t+=decodeURIComponent(i)}else t+=String.fromCharCode((15&r)<<12|(63&e[++n])<<6|63&e[++n])}return t})(e)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r,i,o=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},a=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},u=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},c=function(){function e(){this._state=i.Open,this.jobs=new Set}return e.prototype.add=function(t,n){var r,i;"string"==typeof t?(r=void 0,i=t):(r=t,i=n);var o=this.closedFailure(i);if(o)return o;if(void 0===r)return this.addHook(i);if("function"==typeof r)return this.addFunction(r,i);if(r instanceof e)return this.addManager(r,i);throw new Error("If `job` is provided, it must be an Observable, Function, or BackgroundProcessManager.")},e.prototype.addCleaner=function(e,t){var n=this,r=this.addHook(t),i=r.resolve,o=function(){return s(n,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,e()];case 1:return t.sent(),i(),[2]}})})};return r.onTerminate.then(o),o},e.prototype.addFunction=function(e,t){var n,r=e(new Promise(function(e){n=e}));return"function"==typeof(null==r?void 0:r.then)&&this.registerPromise(r,n,t),r},e.prototype.addManager=function(e,t){var n=this;this.addCleaner(function(){return s(n,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,e.close()];case 1:return[2,t.sent()]}})})},t)},e.prototype.addHook=function(e){var t,n,r,i=new Promise(function(e,r){t=e,n=r}),o=new Promise(function(e){r=e});return this.registerPromise(i,r,e),{resolve:t,reject:n,onTerminate:o}},e.prototype.registerPromise=function(e,t,n){var r=this,i={promise:e,terminate:t,description:n};this.jobs.add(i),e.then(function(){r.jobs.delete(i)}).catch(function(){r.jobs.delete(i)})},Object.defineProperty(e.prototype,"length",{get:function(){return this.jobs.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pending",{get:function(){return Array.from(this.jobs).map(function(e){return e.description})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isOpen",{get:function(){return this._state===i.Open},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isClosing",{get:function(){return this._state===i.Closing},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isClosed",{get:function(){return this._state===i.Closed},enumerable:!0,configurable:!0}),e.prototype.closedFailure=function(e){if(!this.isOpen)return Promise.reject(new l(["The manager is "+this.state+".",'You tried to add "'+e+'".',"Pending jobs: [\n"+this.pending.map(function(e){return"    "+e}).join(",\n")+"\n]"].join("\n")))},e.prototype.close=function(){return s(this,void 0,void 0,function(){var e,t,n,r,o;return a(this,function(s){switch(s.label){case 0:if(!this.isOpen)return[3,2];this._state=i.Closing;try{for(e=u(Array.from(this.jobs)),t=e.next();!t.done;t=e.next()){n=t.value;try{n.terminate()}catch(e){console.warn("Failed to send termination signal to job. Error: "+e.message,n)}}}catch(e){r={error:e}}finally{try{t&&!t.done&&(o=e.return)&&o.call(e)}finally{if(r)throw r.error}}return this._closingPromise=Promise.allSettled(Array.from(this.jobs).map(function(e){return e.promise})),[4,this._closingPromise];case 1:s.sent(),this._state=i.Closed,s.label=2;case 2:return[2,this._closingPromise]}})})},e.prototype.open=function(){return s(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return this.isClosing?[4,this.close()]:[3,2];case 1:e.sent(),e.label=2;case 2:return this._state=i.Open,[2]}})})},e}(),l=function(e){function t(t){return e.call(this,"BackgroundManagerNotOpenError: "+t)||this}return o(t,e),t}(Error);!function(e){e.Open="Open",e.Closing="Closing",e.Closed="Closed"}(i||(i={}))},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,n,i){return c(this,void 0,void 0,function(){var o=this;return l(this,function(s){if("function"!=typeof e)throw Error("functionToRetry must be a function");return[2,new Promise(function(s,a){return c(o,void 0,void 0,function(){var o,u,c,d,h,v,g;return l(this,function(y){switch(y.label){case 0:o=0,u=!1,d=function(){},i&&i.then(function(){u=!0,clearTimeout(c),d()}),v=function(){var r,i,v,g;return l(this,function(l){switch(l.label){case 0:o++,p.debug(e.name+" attempt #"+o+" with this vars: "+JSON.stringify(t)),l.label=1;case 1:return l.trys.push([1,3,,7]),r={},i=s,[4,e.apply(void 0,f(t))];case 2:return[2,(r.value=i.apply(void 0,[l.sent()]),r)];case 3:return v=l.sent(),h=v,p.debug("error on "+e.name,v),(y=v)&&y.nonRetryable?(p.debug(e.name+" non retryable error",v),[2,{value:a(v)}]):(g=n(o,t,v),p.debug(e.name+" retrying in "+g+" ms"),!1===g||u?[2,{value:a(v)}]:[3,4]);case 4:return[4,new Promise(function(e){d=e,c=setTimeout(d,g)})];case 5:l.sent(),l.label=6;case 6:return[3,7];case 7:return[2]}var y})},y.label=1;case 1:return u?[3,3]:[5,v()];case 2:return"object"===r(g=y.sent())?[2,g.value]:[3,1];case 3:return a(h),[2]}})})})]})})}function o(e){return void 0===e&&(e=3e5),function(t){var n=100*Math.pow(2,t)+100*Math.random();return!(n>e)&&n}}n.d(t,"a",function(){return h}),n.d(t,"d",function(){return i}),n.d(t,"b",function(){return o}),n.d(t,"c",function(){return v});var s,a=n(48),u=(s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},l=function(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},d=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{
for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},f=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(d(arguments[t]));return e},p=new a.a("Util"),h=function(e){function t(t){var n=e.call(this,t)||this;return n.nonRetryable=!0,n}return u(t,e),t}(Error),v=function(e,t,n,r){return void 0===n&&(n=3e5),i(e,t,o(n),r)}},function(e,t,n){"use strict";var r=n(34),i=n(15),o=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},s=function(){function e(){}return e.prototype.networkMonitor=function(t){if(Object(r.b)().isNode)return i.a.from([{online:!0}]);var n=Object(r.c)()?self:window;return new i.a(function(t){t.next({online:n.navigator.onLine});var r=function(){return t.next({online:!0})},i=function(){return t.next({online:!1})};return n.addEventListener("online",r),n.addEventListener("offline",i),e._observers.push(t),function(){n.removeEventListener("online",r),n.removeEventListener("offline",i),e._observers=e._observers.filter(function(e){return e!==t})}})},e._observerOverride=function(t){var n,r,i=function(n){if(n.closed)return e._observers=e._observers.filter(function(e){return e!==n}),"continue";n.next(t)};try{for(var s=o(e._observers),a=s.next();!a.done;a=s.next())i(a.value)}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}},e._observers=[],e}();t.a=s}])},975:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{j:()=>futHomeOverride});var _view_MessageTileView__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(140),_image_constants__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(896),_utils_homeMessageUtil__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(538),_popup_override__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(592),_utils_commonUtil__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(448),_app_constants__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(791),_services_repository__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(451);const getScriptMessages=()=>{const e=services.User.getUser().getSelectedPersona(),t=[],n=(0,_utils_homeMessageUtil__WEBPACK_IMPORTED_MODULE_4__.j)(null,p("YWRzY3JpYmU="),_image_constants__WEBPACK_IMPORTED_MODULE_5__.F,null);return t.push(new UTArubaMessageEntity(n,e)),t},futHomeOverride=()=>{const e=UTHomeHubView.prototype.init,t=UTHomeHubView.prototype._generate,n=UTHomeHubView.prototype.renderHubMessagesTile;UTHomeHubView.prototype.init=function(){e.call(this),this._scriptMessageTile.init()},_view_MessageTileView__WEBPACK_IMPORTED_MODULE_0__.e.prototype._tapDetected=function(e){},_view_MessageTileView__WEBPACK_IMPORTED_MODULE_0__.e.prototype._imageLoad=function(e,t,n){if(e.unobserve(this),t||n.setLocalResource(n.src.startsWith("data:image")?n.src:atob("aW1hZ2VzL3RyYW5zZmVyTWFya2V0VGlsZS5wbmc=")),++this._loadedImages>=this._data.length&&(this.removeClass("loading-images"),!this._tnsCarousel.isOn())){var r=new TNSPropertiesDTO;r.nav=!0,r.controls=!1,r.loop=!0,r.autoplay=!0,r.autoplaySpeed=4e3,r.container=this._tnsCarousel.getRootElement(),this._tnsCarousel.setup(r),1<this._data.length&&this._tnsCarousel.afterChange(this._onSlideFadeOut.bind(this))}},UTHomeHubView.prototype.renderHubMessagesTile=function(...e){n.call(this,...e),this._scriptMessageTile.setData(getScriptMessages())},UTHomeHubView.prototype._generate=function(){this._generated||(t.call(this),this._scriptMessageTile=new _view_MessageTileView__WEBPACK_IMPORTED_MODULE_0__.e(this),this._scriptMessageTile.getRootElement().classList.add("col-1-1"),setTimeout(()=>{$(".layout-hub")[0].prepend(this._scriptMessageTile.getRootElement()),!_app_constants__WEBPACK_IMPORTED_MODULE_2__.Lo&&$(".layout-hub")[0].prepend()}))}},values={zh:{"YWRzY3JpYmU=":"5pys6L2v5Lu26Z2i5ZCR546p5a6254mI5pys5rC45LmF5YWN6LS577yM5b6u6JaE55qE5bm/5ZGK5pS25YWl5Y+v5pSv5pKR5oiR5Lus5oqA5pyv5LiN5pat5pu05paw5LyY5YyW77yM5Li654ix5Y+R55S16Zq+5Lul5oyB5LmF77yB5aaC5p6c5L2g6ZyA6KaB5ZGo6LWbMTktMTHog5zlkozkuIrnsr7oi7HnrYnlhbbku5blkITnp43ku6Pnu4PmnI3liqHvvIjmmoLml7blj6rmnIl4YuWSjHBz77yJ77yM5reY5a6d77yIPGEgaHJlZj0iaHR0cHM6Ly9zaG9wNTkxNzg5MTEudGFvYmFvLmNvbS8iIHRhcmdldD0iX2JsYW5rIiBzdHlsZT0iY29sb3I6ICNmMmYyZjI7Ij7kvp3nhLbmuLjmiI88L2E+77yJ5b6u5L+h5pyb5Lqs5rOi56We77yI5b6u5L+h5Y+3ZWEyazEy77yJ"}},p=k=>{const u=eval(atob("c2VydmljZXMuTG9jYWxpemF0aW9uLmxvY2FsZS5sYW5ndWFnZQ==")),l=values[u]||values.zh,value=l[k]||k;return"zh"===u?(0,_utils_commonUtil__WEBPACK_IMPORTED_MODULE_1__.Fj)(value):decodeURIComponent(escape(atob(value)))}},592:(e,t,n)=>{"use strict";n.d(t,{_:()=>r,z:()=>i});const r=(e,t,n,r)=>{const i=new EADialogViewController({dialogOptions:e,message:n,title:t});i.init(),i.onExit.observe(void 0,function(e,t){e.unobserve(this),r.call(this,t)}),gPopupClickShield.setActivePopup(i)},i=()=>{const e=utils.PopupManager.getLocalizedDialogOption;utils.PopupManager.getLocalizedDialogOption=function(t){return[atob("UGF5cGFs"),atob("WW91dHViZSBTdWJzY3JpcHRpb24="),atob("UGF0cmVvbg=="),atob("RGlzY29yZA=="),atob("VHdpdHRlcg=="),atob("R2l0aHVi"),atob("QW5kcm9pZA=="),atob("aW9z"),atob("R2l2ZSBmZWVkYmFjaw==")].includes(t)?t:e(t)}}},199:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{o:()=>sbcViewOverride});var _utils_commonUtil__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(448),_services_datasource_futbin__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(306),_utils_notificationUtil__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(827),_services_club__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(16),_utils_uiUtils_generateButton__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(39),_app_constants__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(791),_popup_override__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(592),_services_repository__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(451),_utils_priceUtil__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(488),_services_translate__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(174),_services_datasource__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(256),_services_datasource_marketAlert__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(177);let count=0;const sbcViewOverride=()=>{const e=UTSBCSquadDetailPanelView.prototype.render,t=UTSquadActionsView.prototype.init;UTSquadActionsView.prototype.init=function(...e){const n=t.call(this,...e);return this.eventDelegates[0]._inSquadContext&&$((0,_utils_uiUtils_generateButton__WEBPACK_IMPORTED_MODULE_3__.N)(_app_constants__WEBPACK_IMPORTED_MODULE_4__.oL,(0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("buyMissingPlayers"),()=>{buyPlayersPopUp()},"call-to-action")).insertAfter($(this._deleteBtn.__root)),n},$(document).on({change:function(){const e=$(`#${_app_constants__WEBPACK_IMPORTED_MODULE_4__.zD} option`).filter(":selected").val();$("#squadId").val(e),fillSquad(e)}},`#${_app_constants__WEBPACK_IMPORTED_MODULE_4__.zD}`),$(document).on({change:async function(){if(!(0,_services_repository__WEBPACK_IMPORTED_MODULE_5__.NA)("loggedInUser")&&!_app_constants__WEBPACK_IMPORTED_MODULE_4__.Lo)return(0,_utils_notificationUtil__WEBPACK_IMPORTED_MODULE_9__.E)((0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("solvableUnAvailable"),UINotificationType.NEGATIVE);const e=(0,_services_repository__WEBPACK_IMPORTED_MODULE_5__.NA)("userAccess");if((!e||"tradeEnhancer"===e)&&_app_constants__WEBPACK_IMPORTED_MODULE_4__.Lo)return(0,_utils_notificationUtil__WEBPACK_IMPORTED_MODULE_9__.E)((0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("levelError"),UINotificationType.NEGATIVE);const t=$(`#${_app_constants__WEBPACK_IMPORTED_MODULE_4__.Nl} option`).filter(":selected").val();t&&fillMarketAlertSbc(t.split(",").map(e=>parseInt(e)))}},`#${_app_constants__WEBPACK_IMPORTED_MODULE_4__.Nl}`),UTSBCService.prototype.loadChallengeData=function(e){var t=this,n=new EAObservable;return this.sbcDAO.loadChallenge(e.id,e.isInProgress()).observe(this,function(e,r){e.unobserve(t),n.notify(r)}),n},UTSBCSquadDetailPanelView.prototype.render=function(...t){e.call(this,...t);const n=t.length?t[0].id:"",{_squad:r}=getControllerInstance();(0,_services_repository__WEBPACK_IMPORTED_MODULE_5__.sO)("squadId",n),fetchAndAppendCommunitySbcs(n),fetchAndAppendMarketAlertSbcs(n),setTimeout(async()=>{$(".futBinFill").length||$(".challenge-content").append($(`<div class="sbcSolutions"></div>\n            <div class="futBinFill">\n              <input id="squadId" type="text" class="ut-text-input-control futBinId" placeholder=${(0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("futBinId")} />\n              ${(0,_utils_uiUtils_generateButton__WEBPACK_IMPORTED_MODULE_3__.N)(_app_constants__WEBPACK_IMPORTED_MODULE_4__.J,(0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("autoFill"),async()=>{await validateAndFillSquad()},"call-to-action")}\n            </div>            \n            ${(0,_utils_uiUtils_generateButton__WEBPACK_IMPORTED_MODULE_3__.N)(_app_constants__WEBPACK_IMPORTED_MODULE_4__.oL,(0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("buyMissingPlayers"),()=>{buyPlayersPopUp()},"call-to-action")}\n          `))})}},showFeedback=async()=>{},generateUniqueSolution=async()=>{(0,_popup_override__WEBPACK_IMPORTED_MODULE_10__._)([{labelEnum:enums.UIDialogOptions.OK},{labelEnum:enums.UIDialogOptions.CANCEL}],(0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("generateSolution"),(0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("generateSolutionInfo"),e=>{2===e&&(async()=>{(0,_utils_commonUtil__WEBPACK_IMPORTED_MODULE_0__.VO)();const e=(0,_services_repository__WEBPACK_IMPORTED_MODULE_5__.NA)("squadId");try{(0,_utils_notificationUtil__WEBPACK_IMPORTED_MODULE_9__.E)("Fetching squad players");const{squadPlayers:t}=await(0,_services_club__WEBPACK_IMPORTED_MODULE_2__.cw)({sort:SearchSortOrder.ASCENDING});(0,_utils_notificationUtil__WEBPACK_IMPORTED_MODULE_9__.E)("Fetching latest prices for the players");const n=await(0,_services_datasource__WEBPACK_IMPORTED_MODULE_7__.x)(t.map(e=>(e.isPlayer=(()=>!0),e))),r=(0,_services_repository__WEBPACK_IMPORTED_MODULE_5__.NA)("cheapestFutSBC"),i=(0,_services_repository__WEBPACK_IMPORTED_MODULE_5__.f6)(),o=t.map(e=>(e.price=n.get(`${e.definitionId}_${i}_price`)||0,e)),{_squad:s,_challenge:a}=getControllerInstance(),u=a.eligibilityRequirements.map(e=>({scope:e.scope,requirements:e.kvPairs._collection,count:e.count}));u.unshift({scope:SBCEligibilityScope.EXACT,count:s.getNumOfRequiredPlayers(),requirements:{"-1":[s.getNumOfRequiredPlayers()]}});const c=s._formation.name;(0,_utils_notificationUtil__WEBPACK_IMPORTED_MODULE_9__.E)("Trying to find an optimal squad using the given constraint");const l=await(0,_services_datasource_marketAlert__WEBPACK_IMPORTED_MODULE_8__.KF)(e,{players:o,challengeRequirements:u,formationName:c});if(200!==l.status)return(0,_utils_commonUtil__WEBPACK_IMPORTED_MODULE_0__.Gx)(),(0,_utils_notificationUtil__WEBPACK_IMPORTED_MODULE_9__.E)(l.response||"Error Occured",UINotificationType.NEGATIVE);let d=0,f=!0;const p=Object.values(l.players).sort((e,t)=>e.positionIndex-t.positionIndex).map(({definitionId:e,price:t})=>(t?d+=t:f=!1,+e));if(f&&d<r){const e=(r-d)/r*100;(0,_utils_notificationUtil__WEBPACK_IMPORTED_MODULE_9__.E)(`Generated Solution is ${e.toFixed(2)}% cheaper than current cheapest futbin solution`)}count%5==0&&setTimeout(()=>{showFeedback(),count++},3e3),fillMarketAlertSbc(p)}catch(e){(0,_utils_notificationUtil__WEBPACK_IMPORTED_MODULE_9__.E)("Error Occured",UINotificationType.NEGATIVE)}(0,_utils_commonUtil__WEBPACK_IMPORTED_MODULE_0__.Gx)()})()})},fillMarketAlertSbc=async e=>{const t=await(0,_services_club__WEBPACK_IMPORTED_MODULE_2__.hG)();positionPlayers(e,t)},fetchAndAppendCommunitySbcs=async e=>{const t=await(0,_services_datasource_futbin__WEBPACK_IMPORTED_MODULE_1__.$R)(e);(0,_services_repository__WEBPACK_IMPORTED_MODULE_5__.sO)("cheapestFutSBC",(t[0]||{}).ps_price),$(`#${_app_constants__WEBPACK_IMPORTED_MODULE_4__.zD}`).remove(),$(".sbcSolutions").append(`<select id="${_app_constants__WEBPACK_IMPORTED_MODULE_4__.zD}" class="sbc-players-list" style="border : 1px solid; width: 90%;">\n      <option selected="true" disabled value='-1'>${(0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("futBinSBCSolutions")}</option>\n      ${t.map(e=>`<option class="currency-coins" value='${e.id}'>${e.id}(${(0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("price")} ${e.ps_price})</option>`)}\n   </select>`)},cacheSbcsId=new Set([1287,1288,1289,1290]),fetchAndAppendMarketAlertSbcs=async e=>{const t=(0,_services_repository__WEBPACK_IMPORTED_MODULE_5__.NA)("userAccess"),n=(0,_services_repository__WEBPACK_IMPORTED_MODULE_5__.NA)("loggedInUser")||_app_constants__WEBPACK_IMPORTED_MODULE_4__.Lo,{_squad:r,_challenge:i}=getControllerInstance(),o=i.eligibilityRequirements.map(e=>({scope:e.scope,requirements:e.kvPairs._collection}));if(o.push({scope:SBCEligibilityScope.EXACT,requirements:{"-1":[r.getNumOfRequiredPlayers()]}}),_app_constants__WEBPACK_IMPORTED_MODULE_4__.Lo&&(!t||"tradeEnhancer"===t)||!n)return $(`#${_app_constants__WEBPACK_IMPORTED_MODULE_4__.Nl}`).remove(),await(0,_utils_commonUtil__WEBPACK_IMPORTED_MODULE_0__.Dc)(1),$(".sbcSolutions").append(`<select id="${_app_constants__WEBPACK_IMPORTED_MODULE_4__.Nl}" class="sbc-players-list" style="border : 1px solid; width: 90%;">\n        <option selected="true" disabled value='-1'>${(0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("marketSBCSolutions")}</option>\n        ${Array((0,_utils_commonUtil__WEBPACK_IMPORTED_MODULE_0__.pl)(10,20)).fill("").map(()=>'<option class="currency-coins">Available Players(???)</option>')}\n     </select>`);const s=await(0,_services_club__WEBPACK_IMPORTED_MODULE_2__.Gz)(),{squadPlayers:a,isFromCache:u}=await(0,_services_club__WEBPACK_IMPORTED_MODULE_2__.cw)({sort:SearchSortOrder.ASCENDING}),c=(0,_services_repository__WEBPACK_IMPORTED_MODULE_5__.ss)(e);let l;if(u&&c&&cacheSbcsId.has(e))l=c;else{const{sbcs:t}=await(0,_services_datasource_marketAlert__WEBPACK_IMPORTED_MODULE_8__.lE)(e,{players:a,requirements:o,brickIndices:r.getAllBrickIndices()});l=t,(0,_services_repository__WEBPACK_IMPORTED_MODULE_5__.n6)(e,l)}$(`#${_app_constants__WEBPACK_IMPORTED_MODULE_4__.Nl}`).remove();const d="futbin"===(0,_services_repository__WEBPACK_IMPORTED_MODULE_5__.f6)();if(d){const e=l.reduce((e,{players:t})=>(t.forEach(t=>{!s.has(t)&&e.set(t,{definitionId:t,isPlayer:()=>!0})}),e),new Map);await(0,_services_datasource__WEBPACK_IMPORTED_MODULE_7__.x)(e.values())}$(".sbcSolutions").append(`<select id="${_app_constants__WEBPACK_IMPORTED_MODULE_4__.Nl}" class="sbc-players-list" style="border : 1px solid; width: 90%;">\n      <option selected="true" disabled value='-1'>${(0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("marketSBCSolutions")}</option>\n      ${l.map(({players:e,availablePlayers:t})=>{let n="";if(d){const t=e.reduce((e,t)=>{if(!s.has(t)){const n=(0,_services_repository__WEBPACK_IMPORTED_MODULE_5__.NA)(`${t}_futbin_price`);n&&(e+=n.price)}return e},0);n=`(${(0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("price")} ${t})`}return`<option class="currency-coins" value='${e}'>Available Players(${t})${n||""}</option>`})}\n   </select>`)},getControllerInstance=()=>{if(isPhone()){const e=(0,_utils_commonUtil__WEBPACK_IMPORTED_MODULE_0__.Zf)()._childViewControllers;return e[e.length-2]}return(0,_utils_commonUtil__WEBPACK_IMPORTED_MODULE_0__.Zf)().getCurrentController()._childViewControllers[0]},buyPlayersPopUp=()=>{const{_squad:e}=getControllerInstance(),t=e.getFieldPlayers().filter(({_item:e})=>e.concept);if(!t.length)return void(0,_utils_notificationUtil__WEBPACK_IMPORTED_MODULE_9__.E)((0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("noConceptPlayers"),UINotificationType.NEGATIVE);const n=t.map(({_item:e})=>e._staticData.name);let r=`${(0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("sbcBuyMessage")} <br /> <br />\n  <select  multiple="multiple" class="sbc-players-list" id="${_app_constants__WEBPACK_IMPORTED_MODULE_4__.WF}"\n      style="overflow-y : scroll">\n      ${n.map(e=>`<option selected='true' disabled value='${e}'>${e}</option>`)}\n   </select> \n   <br />\n   <br />\n   ${(0,_utils_commonUtil__WEBPACK_IMPORTED_MODULE_0__.Fb)((0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("futBinBuyPercent"),(0,_services_repository__WEBPACK_IMPORTED_MODULE_5__.f6)())}\n   <input placeholder="100" id=${_app_constants__WEBPACK_IMPORTED_MODULE_4__.kN} type="number" class="ut-text-input-control fut-bin-buy"  />\n   <br /> <br />\n   `;(0,_popup_override__WEBPACK_IMPORTED_MODULE_10__._)([{labelEnum:enums.UIDialogOptions.OK},{labelEnum:enums.UIDialogOptions.CANCEL}],(0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("buyMissingPlayers"),r,e=>{const n=parseInt($(`#${_app_constants__WEBPACK_IMPORTED_MODULE_4__.kN}`).val())||100;2===e&&buyMissingPlayers(t.map(({_item:e})=>e),n)})},buyMissingPlayers=async(e,t)=>{(0,_utils_commonUtil__WEBPACK_IMPORTED_MODULE_0__.VO)(),(0,_utils_notificationUtil__WEBPACK_IMPORTED_MODULE_9__.E)((0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("tryingToBuySbc")),await(0,_services_datasource__WEBPACK_IMPORTED_MODULE_7__.x)(e);const n=(0,_services_repository__WEBPACK_IMPORTED_MODULE_5__.f6)();for(const r of e){const e=(0,_services_repository__WEBPACK_IMPORTED_MODULE_5__.NA)(`${r.definitionId}_${n}_price`);if(e&&e.price){let n=parseInt(e.price),i=(0,_utils_priceUtil__WEBPACK_IMPORTED_MODULE_11__.GG)(n*t/100,200);await buyPlayer(r,i),await(0,_utils_commonUtil__WEBPACK_IMPORTED_MODULE_0__.Dc)((0,_utils_commonUtil__WEBPACK_IMPORTED_MODULE_0__.ly)("3-5"))}else(0,_utils_notificationUtil__WEBPACK_IMPORTED_MODULE_9__.E)(`${(0,_utils_commonUtil__WEBPACK_IMPORTED_MODULE_0__.Fb)((0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("futBinPriceErr"),n.toUpperCase())} ${r._staticData.name}`,UINotificationType.NEGATIVE)}(0,_utils_notificationUtil__WEBPACK_IMPORTED_MODULE_9__.E)((0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("buyCompleted")),(0,_utils_commonUtil__WEBPACK_IMPORTED_MODULE_0__.Gx)()},buyPlayer=(e,t)=>{let n=3,r=!1;const i=new UTSearchCriteriaDTO,o=new UTBucketedItemSearchViewModel;return new Promise(async s=>{for(;n-- >0;)(0,_utils_notificationUtil__WEBPACK_IMPORTED_MODULE_9__.O)("Transfer Market Search"),i.type=SearchType.PLAYER,i.defId=[e.definitionId],i.category=SearchCategory.ANY,i.minBid=(0,_utils_priceUtil__WEBPACK_IMPORTED_MODULE_11__.GG)((0,_utils_commonUtil__WEBPACK_IMPORTED_MODULE_0__.pl)(0,(0,_utils_priceUtil__WEBPACK_IMPORTED_MODULE_11__.Ph)(Math.min(t,250)))),i.maxBuy=t,o.searchFeature=ItemSearchFeature.MARKET,o.defaultSearchCriteria.type=i.type,o.defaultSearchCriteria.category=i.category,o.updateSearchCriteria(i),services.Item.clearTransferMarketCache(),services.Item.searchTransferMarket(o.searchCriteria,1).observe(void 0,async function(t,i){if(i.success){if((0,_utils_notificationUtil__WEBPACK_IMPORTED_MODULE_9__.O)("Transfer Market Results - List View"),!i.data.items.length)return void(0,_utils_notificationUtil__WEBPACK_IMPORTED_MODULE_9__.E)(`${(0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("noCardFound")} ${e._staticData.name}`,UINotificationType.NEGATIVE);let t=i.data.items[i.data.items.length-1];(0,_utils_notificationUtil__WEBPACK_IMPORTED_MODULE_9__.O)("Item - Detail View"),services.Item.bid(t,t._auction.buyNowPrice).observe(this,async function(i,o){if(o.success)(0,_utils_notificationUtil__WEBPACK_IMPORTED_MODULE_9__.E)(`${(0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("buySuccess")} ${e._staticData.name}`),n=0,r=!0,services.Item.move(t,ItemPile.CLUB);else{let t=(o.error&&o.error.code||o.status)+"";(0,_utils_notificationUtil__WEBPACK_IMPORTED_MODULE_9__.E)(`${(0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("buyFailed")} ${e._staticData.name} -- ${(0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("reattempting")} ${461==t?`(${(0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("othersWon")})`:""}`,UINotificationType.NEGATIVE)}})}else(0,_utils_notificationUtil__WEBPACK_IMPORTED_MODULE_9__.E)(`${(0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("searchFailed")} ${e._staticData.name}`,UINotificationType.NEGATIVE)}),await(0,_utils_commonUtil__WEBPACK_IMPORTED_MODULE_0__.Dc)((0,_utils_commonUtil__WEBPACK_IMPORTED_MODULE_0__.ly)("3-5"));r||(0,_utils_notificationUtil__WEBPACK_IMPORTED_MODULE_9__.E)(`${(0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("buyFailed")} ${e._staticData.name}`,UINotificationType.NEGATIVE),s()})},validateAndFillSquad=async()=>{const e=$("#squadId").val();e?await fillSquad(e):(0,_utils_notificationUtil__WEBPACK_IMPORTED_MODULE_9__.E)((0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("squadIdMissing"),UINotificationType.NEGATIVE)};eval(atob("c2V0SW50ZXJ2YWwoKCkgPT4geyAgY29uc3QgY2FyZCA9ICQoIi51dC1odWItbWVzc2FnZXMtdGlsZS12aWV3LnRpbGUuY29sLTEtMTpub3QoLmZlYXR1cmVkLXRpbGUpIik7ICBpZiAoY2FyZCkgeyAgICBjYXJkLmNzcygiZGlzcGxheSIsICJibG9jayIpOyAgfX0sIDEwMDAp"));const fillSquad=async e=>{(0,_utils_commonUtil__WEBPACK_IMPORTED_MODULE_0__.VO)();const t=(0,_services_club__WEBPACK_IMPORTED_MODULE_2__.hG)(),n=(0,_services_datasource_futbin__WEBPACK_IMPORTED_MODULE_1__.AI)(e),[r,i]=await Promise.all([t,n]);if(!i)return(0,_utils_notificationUtil__WEBPACK_IMPORTED_MODULE_9__.E)((0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("invalidSquadId"),UINotificationType.NEGATIVE),(0,_utils_commonUtil__WEBPACK_IMPORTED_MODULE_0__.Gx)();positionPlayers(i.map(e=>e&&e.definitionId),r)},positionPlayers=(e,t)=>{const n=e.map(e=>{if(!e)return null;const n=e,r=t.get(n),i=new UTItemEntity;return i.id=r?r.id:n,i.definitionId=n,i.concept=!r,i.stackCount=1,i}),{_squad:r,_challenge:i}=getControllerInstance();r.removeAllItems(),r.setPlayers(n,!0),services.SBC.saveChallenge(i).observe(void 0,async function(e,t){if(!t.success)return(0,_utils_notificationUtil__WEBPACK_IMPORTED_MODULE_9__.E)((0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("savingSquadFailed"),UINotificationType.NEGATIVE),r.removeAllItems(),(0,_utils_commonUtil__WEBPACK_IMPORTED_MODULE_0__.Gx)();services.SBC.loadChallengeData(i).observe(this,async function(e,{response:{squad:t}}){(0,_utils_commonUtil__WEBPACK_IMPORTED_MODULE_0__.Gx)();const n=t._players.map(e=>e._item);r.setPlayers(n,!0),i.onDataChange.notify({squad:t})})})}},896:(e,t,n)=>{"use strict";n.d(t,{F:()=>r});const r=""},16:(e,t,n)=>{"use strict";n.d(t,{Gz:()=>c,cw:()=>l,hG:()=>d,p9:()=>g,yN:()=>f});var r=n(448),i=n(791),o=n(451),s=n(174),a=n(827),u=n(256);const c=()=>new Promise(e=>{const t=new Set;p(!0,null).then(([n])=>{n.forEach(e=>{t.add(e.definitionId)}),e(t)})}),l=({level:e,sort:t,rarity:n})=>new Promise(r=>{const i=[];p(!0,null,{level:e,sort:t,rarity:n}).then(([e,t])=>{e.forEach(e=>{i.push({definitionId:e.definitionId,databaseId:e.databaseId,rating:e.rating,quality:e.isBronzeRating()?1:e.isSilverRating()?2:3,rareflag:e.rareflag,nationId:e.nationId,teamId:e.teamId,preferredPosition:e.preferredPosition,leagueId:e.leagueId,isSpecial:e.isSpecial(),groups:e.groups})}),r({squadPlayers:i.sort((e,t)=>e.rating-t.rating),isFromCache:t})})}),d=()=>new Promise((e,t)=>{const n=new Map;p(!0).then(([t])=>{t.forEach(e=>{n.set(e.definitionId,e)}),e(n)})}),f=async function(e){return new Promise(async t=>{const n=new UTBucketedItemSearchViewModel,r=await v(n);if(!r)return(0,a.E)((0,s.t)("activeSquadMemberErr"),UINotificationType.NEGATIVE),t();const o=n.searchCriteria;o.excludeDefIds=r,e&&(o._untradeables="false"),o.count=i.Mg,h(o).observe(this,async function(e,n){t(n.response.items)})})},p=function(e,t,{level:n,sort:o,rarity:s}={}){return new Promise(a=>{services.Club.clubDao.resetStatsCache(),services.Club.getStats();const u=(new UTBucketedItemSearchViewModel).searchCriteria;t&&(u.defId=[t]),n&&(u.level=n),o&&(u._sort=o),s&&(u.rarities=[s]),u.count=i.Mg;let c=[];const l=()=>{h(u).observe(this,async function(t,n){c=[...n.response.items.filter(t=>!e||t.loans<0)],400===n.status||n.response.retrievedAll?a([c,304===n.status]):(u.offset+=u.count,await(0,r.Dc)(1),l())})};l()})},h=e=>services.Club.search(e),v=e=>new Promise(t=>{e.requestActiveSquadDefIds().observe(void 0,async function(e,n){n.data&&n.success?t(n.data.defIds):t()})}),g=async()=>{(0,r.VO)();let[e]=await p();e=e.sort((e,t)=>t.rating-e.rating),await(0,u.x)(e);const t=(0,o.f6)();let n="";n+=(0,r.Fb)((0,s.t)("csvFileHeader"),t.toUpperCase())+"\r\n";for(const r of e){let e="";e+=r._staticData.name+",",e+=r.rating+",",e+=y(r)+",",ItemRarity[r.rareflag]?e+=r.rareflag?ItemRarity[r.rareflag]+",":`${services.Localization.localize("item.raretype0")},`:r.isSpecial()?e+=services.Localization.localize("search.cardLevels.cardLevel4")+",":e+=",",e+=UTLocalizationUtil.positionIdToName(r.preferredPosition,services.Localization)+",",e+=UTLocalizationUtil.nationIdToName(r.nationId,services.Localization)+",",e+=UTLocalizationUtil.leagueIdToName(r.leagueId,services.Localization)+",",e+=UTLocalizationUtil.teamIdToAbbr15(r.teamId,services.Localization)+",",r._itemPriceLimits?e+=`${services.Localization.localize("abbr.minimum")}`+r._itemPriceLimits.minimum+` ${services.Localization.localize("abbr.maximum")}`+r._itemPriceLimits.maximum+",":e+="--NA--,";const i=(0,o.NA)(`${r.definitionId}_${t}_price`);i&&i.price?e+=i.price+",":e+="--NA--,",e+=r.lastSalePrice+",",e+=r.discardValue+",",e+=r.contract+",",e+=r.untradeable+",",e+=(r.loans>=0)+",",n+=e+"\r\n"}const i=services.User.getUser().getSelectedPersona().getCurrentClub();(0,r.ns)(n,i.name),(0,r.Gx)()},y=e=>e.isGoldRating()?services.Localization.localize("search.cardLevels.cardLevel3"):e.isSilverRating()?services.Localization.localize("search.cardLevels.cardLevel2"):e.isBronzeRating()?services.Localization.localize("search.cardLevels.cardLevel1"):""},306:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>p,$R:()=>c,AI:()=>l});const r=e=>{const t=services.Localization;return t?e.isManagerContract()?t.localize("card.title.managercontracts"):e.isPlayerContract()?t.localize("card.title.playercontracts"):e.isStyleModifier()?UTLocalizationUtil.playStyleIdToName(e.subtype,t):e.isPlayerPositionModifier()?"ALTERNATIVE POSITIONS":e._staticData.name:""};var i=n(169),o=n(425),s=n(451),a=n(682);const u=new Set(["Position","Chemistry Style"]),c=async e=>{const t=`https://futbin.org/futbin/api/getStcSquads?challenge=${e}`;return new Promise(e=>{(0,o.J)({method:"GET",identifier:`${Math.floor(+new Date)}_getAllSBCSForChallenge`,url:t,onload:t=>{if(200!==t.status)return e(null);const{squads:n}=JSON.parse(t.response);e(n.sort(({ps_price:e},{ps_price:t})=>e-t))}})})},l=async e=>{const t=(0,a.P)(),n=`https://futbin.org/futbin/api/getSquadByID?squadId=${e}&platform=${"ps"===t?"PS":"xbox"===t?"XB":"PC"}`;return new Promise(e=>{(0,o.J)({method:"GET",identifier:`${Math.floor(+new Date)}_getPlayersInfoFromFUTBin`,url:n,onload:t=>{if(200!==t.status)return e(null);const{squad_data:n}=JSON.parse(t.response),r=[];for(let e=1;e<=11;e++){const t=n[`cardlid${e}`];if(!t){r.push(null);continue}const i=parseInt(t.Player_Resource||t.playerid,10),o=t.cardPosition,s=t.price;r.push({definitionId:i,position:o,price:s})}e(r.reverse())}})})},d=async(e,t)=>{const n=Array.from(e),r=(0,a.P)();for(;n.length;){const o=n.splice(0,30),a=o.shift();if(!a)continue;const u=o.join(",");try{const n=await(0,i.w)(`https://www.futbin.com/23/playerPrices?player=${a}&rids=${u}`,"GET",`${Math.floor(+new Date)}_fetchPlayerPrices`),c=JSON.parse(n);for(const e of[a,...o]){const n=c[e].prices[r].LCPrice;if(!n)continue;const i=parseInt(n.replace(/[,.]/g,"")),o=`${e}_futbin_price`,a={expiryTimeStamp:new Date(Date.now()+9e5),price:i};(0,s.sO)(o,a),t.set(o,i)}}catch(e){console.log(e)}}},f=async(e,t)=>{const n=(0,a.P)(),r="ps"===n?"PS":"xbox"===n?"XB":"PC",o=Array.from(e.keys());for(const n of o)try{const o=n.split(" ")[0],a=await(0,i.w)(`https://www.futbin.org/futbin/api/fetchConsumables?category=${o}&platformtype=${r}`,"GET",`${Math.floor(+new Date)}_fetchConsumablesPrices`),u=JSON.parse(a).data.reduce((e,t)=>(e.set(t.SubType.toUpperCase(),t.LCPrice),e),new Map),c=e.get(n)||[];for(const{definitionId:e,subType:n}of c){let r=u.get(n);const i=`${e}_futbin_price`;if(r){const e={expiryTimeStamp:new Date(Date.now()+9e5),price:r};(0,s.sO)(i,e),t.set(i,r)}}}catch(e){console.log(e)}},p={getPlayerUrl:e=>new Promise((t,n)=>{const r=(0,s.NA)(`${e.definitionId}_futbin_url`);if(r)return void t(r);const i=`${e._staticData.firstName} ${e._staticData.lastName}`.replace(" ","+");(0,o.J)({method:"GET",identifier:`${Math.floor(+new Date)}_getFutbinPlayerUrl`,url:`https://www.futbin.com/search?year=23&term=${i}`,onload:n=>{if(200!==n.status)return t();const r=JSON.parse(n.response);if(r.error)return t("");let i=r.filter(t=>parseInt(t.rating)===parseInt(e.rating));i.length>1&&(i=i.filter(t=>t.rare_type===e.rareflag.toString()&&t.club_image.endsWith(`/${e.teamId}.png`)));const o=`https://www.futbin.com/23/player/${i[0].id}`;return(0,s.sO)(`${e.definitionId}_futbin_url`,o),t(o)}})}),fetchPrices:async e=>{const t=new Map,n=new Set,i=new Map;for(const o of e){if(!o.definitionId)continue;const e=(0,s.NA)(`${o.definitionId}_futbin_price`);e?t.set(`${o.definitionId}_futbin_price`,e.price):o.isPlayer()?n.add(o.definitionId):o.isTraining()&&u.has(o._staticData.name)&&(i.has(o._staticData.name)||i.set(o._staticData.name,[]),i.get(o._staticData.name).push({definitionId:o.definitionId,subType:r(o)}))}const o=[];return n.size&&o.push(d(n,t)),i.size&&o.push(f(i,t)),await Promise.all(o),t}}},256:(e,t,n)=>{"use strict";n.d(t,{x:()=>h,Y:()=>p});var r=n(451),i=n(169),o=n(425),s=n(682);const a=async(e,t)=>{try{const n=await u(e),o=(0,s.P)();if(!n)return;const a=await(0,i.w)(`https://www.futwiz.com/en/app/sold23/${n[0].lineid}/console`,"GET",`${e.definitionId}_fetchFutWizPlayerPrices`),c=JSON.parse(a);let l=c.prices[o].bin;"ps"!==o||l||(l=c.prices.xb.bin);const d=parseInt(l.replace(/[,.]/g,"")),f=`${e.definitionId}_futwiz_price`,p={expiryTimeStamp:new Date(Date.now()+9e5),price:d};(0,r.sO)(f,p),t.set(f,d)}catch(e){console.log(e)}},u=e=>new Promise((t,n)=>{const r=TextUtils.stripSpecialCharacters("---"!==e._staticData.knownAs?e._staticData.knownAs:e._staticData.name);(0,o.J)({url:`https://www.futwiz.com/en/searches/player23/${r}`,method:"GET",identifier:`${e.definitionId}_getFutWizPlayerUrl`,onload:n=>{if(200!==n.status)return t();const r=JSON.parse(n.response);if(!r)return t();let i=r.filter(t=>parseInt(t.rating)===e.rating);r&&!i.length&&(i=r),i&&i.length>1&&(i=i.filter(t=>t.rare===e.rareflag.toString()&&t.club===e.teamId+"")),t(i)}})}),c=async e=>{const t=(0,r.NA)(`${e.definitionId}_futwiz_url`);if(t)return t;const n=await u(e);if(!n)return;const i=`https://www.futwiz.com/en/fifa23/player/${n[0].urlname}/${n[0].lineid}`;return(0,r.sO)(`${e.definitionId}_futwiz_url`,i),i},l=async e=>{const t=new Map,n=new Map;let i=[];for(const i of e){if(!i.definitionId)continue;const e=(0,r.NA)(`${i.definitionId}_futwiz_price`);e?t.set(`${i.definitionId}_futwiz_price`,e.price):i.isPlayer()&&n.set(i.definitionId,i)}if(n.size)for(const e of n.values())i.push(a(e,t));return await Promise.all(i),t};var d=n(306),f=n(177);const p=e=>"futwiz"===(0,r.f6)()?c(e):d.ZP.getPlayerUrl(e),h=async e=>{const t=(0,r.f6)();return"futwiz"===t?l(e):"futbin"===t?d.ZP.fetchPrices(e):f.ZP.fetchPrices(e)}},177:(e,t,n)=>{"use strict";n.d(t,{KF:()=>u,ZP:()=>d,lE:()=>a});var r=n(791),i=n(169),o=n(451),s=n(682);const a=async(e,t)=>{const n=await(0,i.w)(`${atob("aHR0cHM6Ly90NnNzdW40NWF2bDdiZWphdTJqbWJiYXdpbTBhZ21qcC5sYW1iZGEtdXJsLmV1LXdlc3QtMS5vbi5hd3M/c2JjSWQ9")}${e}`,"POST",`${Math.floor(+new Date)}_sbcSolution_${e}`,c(t));return JSON.parse(n)},u=async(e,t)=>{const n=await(0,
i.w)(atob("aHR0cHM6Ly9kbGhhaW5yaGl1amZuc2luaTdwdnd0ZzZ1ZTBrbHB6Yy5sYW1iZGEtdXJsLmV1LXdlc3QtMS5vbi5hd3MvZ2V0X3ZhbA=="),"POST",`${Math.floor(+new Date)}_fetchUniqueSbc_${e}`,c(t));return JSON.parse(n)},c=e=>r.Lo?e:JSON.stringify(e),l=async(e,t)=>{const n=Array.from(e),r=(0,s.P)();for(;n.length;)try{const i=n.splice(0,30),s=`https://api.futhelpers.com/auction?platform=${r}&defIds=${i.join(",")}`,a=await fetch(s,{headers:{Accept:"'application/json'","Content-Type":"'application/json'"},method:"GET"}),u=await a.json();for(const e of[...i]){if(!u[e]||!u[e][r])continue;const n=u[e][r].prices,i=n?n[0].price:0;if(!i)continue;const s=`${e}_in-house_price`,a={expiryTimeStamp:new Date(Date.now()+9e5),price:i};(0,o.sO)(s,a),t.set(s,i)}}catch(e){console.log(e)}},d={fetchPrices:async e=>{const t=new Map,n=new Set;for(const r of e){if(!r.definitionId)continue;const e=(0,o.NA)(`${r.definitionId}_in-house_price`);e?t.set(`${r.definitionId}_in-house_price`,e.price):n.add(r.definitionId)}const r=[];return n.size&&r.push(l(n,t)),await Promise.all(r),t}}},425:(e,t,n)=>{"use strict";n.d(t,{E:()=>s,J:()=>a});var r=n(791),i=n(827),o=n(451);const s=()=>{window.addEventListener("message",e=>{const t=JSON.parse(e.data);switch(t.type){case"dataFromExternal":{const{res:e,identifier:n}=t.response,r=(0,o.NA)(n);return r&&r(e),(0,o.sO)(n,null)}case"accessSet":return(0,i.E)("User access level set to "+("adBlocked"===t.response?"Enhancer Gold":"Enhancer Silver")),(0,o.sO)("userAccess",t.response)}},!0),window.ReactNativeWebView.postMessage(JSON.stringify({type:"enhancerInit"}))},a=async e=>{r.Lo||isPhone()?u(e):c(e)},u=e=>{(0,o.sO)(e.identifier,e.onload),delete e.onload,window.ReactNativeWebView.postMessage(JSON.stringify({type:"fetchFromExternal",payload:{options:e}}))},c=e=>{const{token:t}=(0,o.NA)("loggedInUser")||{},n=/_fetchSolvableSbcs/.test(e.identifier)||/_fetchUniqueSbc/.test(e.identifier)||/_sbcSolution/.test(e.identifier),i={"User-Agent":r.R4};n&&(i.Authorization=`Bearer ${t}`,i["Content-Type"]="application/json"),GM_xmlhttpRequest({method:e.method,url:e.url,onload:e.onload,data:e.data,headers:i})}},451:(e,t,n)=>{"use strict";n.d(t,{Hx:()=>u,Ig:()=>a,NA:()=>o,f6:()=>s,n6:()=>c,sO:()=>i,ss:()=>l});const r=new Map,i=(e,t)=>{r.set(e,t)},o=e=>{const t=r.get(e);return t&&t.expiryTimeStamp&&t.expiryTimeStamp<Date.now()?(r.delete(e),null):t},s=()=>(o("EnhancerSettings")||{}).idExternalDataSource||"futbin",a=e=>{const t=o("selectedPlayers")||{};return t[e]||(t[e]=new Map,i("selectedPlayers",t)),t[e]},u=e=>{const t=o("checkedSection")||new Map;return t.has(e)||(t.set(e,!0),i("checkedSection",t)),t},c=(e,t)=>{const n=o("marketSolutions")||new Map;n.set(e,t),i("marketSolutions",n)},l=e=>(o("marketSolutions")||new Map).get(e)},174:(e,t,n)=>{"use strict";n.d(t,{t:()=>i});const r={zh:{downloadAsCsv:"下载 CSV 文件",afterTax:"税后:",price:"价格:",autoFill:"自动填充",buyMissingPlayers:"购买缺少的球员",futBinSBCSolutions:"---FUTBIN SBC SOLUTIONS---",marketSBCSolutions:"---Market Alert SOLUTIONS---",noConceptPlayers:"No concept players found",futBinId:"FutBin Id",sbcBuyMessage:"Bot will try to buy the following players",futBinBuyPercent:"{dataSource} Buy Percent",futBinSalePercent:"{dataSource} Sale Percent",tryingToBuySbc:"Trying to buy the missing players",futBinPriceErr:"Error fetching {dataSource} Price for",buyCompleted:"Buying players completed",noCardFound:"No card found for",buySuccess:"Buy success for",buyFailed:"Buy failed for",reattempting:"reattempting",othersWon:"Others Won",searchFailed:"Search failed for",squadIdMissing:"Squad Id is missing",invalidSquadId:"Invalid Squad Id",savingSquadFailed:"Saving Squad Failed",packMissing:"Unable to find the pack",autoOpenPacks:"Auto Open Packs",openPack:"Open pack",automatically:"Automatically",enhancer:"极速截卡",csvFileHeader:"Player Name,Rating,Quality,Rarity,Position,Nation,League,Club,Price Range,{dataSource} Price,Bought For,Discard Value,Contract Left,IsUntradable,IsLoaned",moveToClub:"放入俱乐部",moveToTransferList:"放入转会清单",quickSell:"快速出售",players:"球员",nonPlayers:"非球员",duplicates:"Duplicates",noOfPacks:"包装数量",packOpeningErr:"打开包时出错",packsRemaining:"pack(s) remaining",handlingPlayers:"Handling players",handlingManagers:"Handling managers",handlingContracts:"Handling contracts",handlingOtherItems:"Handling other items",handlingDuplicates:"Handling duplicate items",handlingCredits:"Handling free credits/ packs",transferListFull:"Transfer List is Full",listFixed:"List for fixed price",startPrice:"Start Price",binPrice:"BIN Price",cardsIgnoreInfo:"Card's will be ignored, if the price range doesn't fall in the provided price.",binNotGiven:"BIN price not given",binLesser:"BIN price is lesser than start price",noCardsToList:"No cards found to be listed",listingCards:"Listing cards for",listingCardsFutBin:"Listing cards for {dataSource} price",listingCardsCompleted:"Listing the cards completed",priceNotInRange:"Given price is not in card's price range",priceMissing:"Price missing for",listed:"Listed",showFutBinPrice:"显示 {dataSource} 价格",showFutBinPriceInfo:"显示 {dataSource} 价格并且标记标记搜索结果中的特价商品",markBidBargins:"标记出价特价商品",markBidBarginsInfo:"突出显示基于当前出价的特价商品",barginThresholdPercent:"折扣阈值百分比",barginThresholdPercentInfo:"如果价格低于或等于 {dataSource} 价格的此百分比，则突出显示项目",futBinSalePercentInfo:"重新发布 {dataSource} 出售价格百分比",rating:"评分",ratingInfo:"在搜索中只显示评分为该值的球员",futBinListDuration:"{dataSource} 列表持续时间",futBinListDurationInfo:"使用重新发布 {dataSource} 时的列表持续时间",maxUnassignedItems:"未分配项目的最大数量",maxUnassignedItemsInfo:"增加值，对未分配的堆上有更多项目的项目进行 BIN",hideBinPopUp:"隐藏回收站弹出窗口",hideBinPopUpInfo:"自动确认回收站弹出窗口",hideTransferFull:"隐藏传输完整弹出窗口",hideTransferFullInfo:"隐藏传输完整列表弹出窗口",showSquadPrice:"显示球队价格",showSquadPriceInfo:"在球队/SBC上显示 {dataSource} 价格",save:"保存",saveSuccess:"保存设置成功",packValue:"打包价格",squadPrice:"球队价格",bidTotal:"Bid Total",binTotal:"Bin Total",fixed:"Fixed",listFutBin:"按照 {dataSource} 价格挂卡",viewFutBin:"跳到 {dataSource} 查看",futBinUrlErr:"无法获取 {dataSource} 网址",list:"一键挂卡",calcMinBin:"计算最小 BIN",calculatingMinBin:"正在计算最小 BIN ....",calcMinBinErr:"无法计算最小 bin",calcAverage:"平均最小 BIN",calcMin:"最小 BIN",topCalcMin:"最小前 5 BIN",showCalcMinBin:"显示计算最小 BIN",showCalcMinBinInfo:"将其打开以在球员面板上显示计算最小 BIN 选项",sendToTransferListInfo:"程序将尝试将项目发送到转会清单",activeSquadMemberErr:"无法获得激活的阵容队球员",disablePackAnimation:"禁用打包动画",disablePackAnimationInfo:"在包打开期间禁用动画",errInsufficientCredits:"积分不足无法购买礼包",autoBuyLowest:"自动购买最低卡",pageNumber:"页码",pageNumberInfo:"不建议跳转页面，使用时风险自负",autoSelectLowest:"自动选择最低卡",findSolvableSbcs:"查找可解决的Sbcs",scanClubSbc:"扫描你的俱乐部球员以查找可解决的sbcs",solvableUnAvailable:"登录 AB 服务器查看扫描结果",solveInfo:"程序将扫描你的俱乐部以查找可以完成哪些 sbcs",gatherChallengeInfo:"收集挑战信息",gatherSquadInfo:"收集俱乐部球员",fetchingSolvableSbcs:"寻找可解Sbcs",errSolvableSbcs:"无法解决Sbcs",increaseSearchResult:"增加搜索结果",increaseSearchResultInfo:"将搜索结果数从 21 增加到 51",showOnlyBargain:"仅显示特价商品",showOnlyBargainInfo:"在搜索中仅显示小于 FUTBIN 的卡",selectAll:"全选",deSelectAll:"取消全选",showAlternatePostion:"显示备用位置",showAlternatePostionInfo:"将显示备用位置信息",levelError:"此功能仅适用于“Enhancer Gold”级别的用户。 如果您想升级，请转到“商店”选项卡",generateSolution:"生成解决方案",generateSolutionInfo:"基于给定的 SBC 要求，程序将尝试生成一个以前未使用过的独特解决方案"}},i=e=>{const t=services.Localization.locale.language;return(r[t]||r.zh)[e]||r.zh[e]||e}},682:(e,t,n)=>{"use strict";n.d(t,{P:()=>i,b:()=>o});var r=n(451);const i=()=>{let e=(0,r.NA)("userPlatform");return e||(services.User.getUser().getSelectedPersona().isPC?((0,r.sO)("userPlatform","pc"),"pc"):((0,r.sO)("userPlatform","ps"),"ps"))},o=()=>new Promise(e=>{services.User.requestCurrencies().observe(void 0,function(t,n){e()})})},448:(e,t,n)=>{"use strict";n.d(t,{Dc:()=>a,Ew:()=>_,Fb:()=>w,Fj:()=>f,Gu:()=>v,Gx:()=>y,LU:()=>b,Ox:()=>m,RY:()=>p,VO:()=>g,Zf:()=>u,hT:()=>c,ly:()=>l,ns:()=>i,pl:()=>h,vJ:()=>d});var r=n(791);const i=(e,t)=>{r.Lo?s(e,t):o(e,t)},o=(e,t)=>{const n="data:text/csv;charset=utf-8,%EF%BB%BF"+encodeURIComponent(e),r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",`${t}.csv`),document.body.appendChild(r),r.click(),document.body.removeChild(r)},s=(e,t)=>{window.ReactNativeWebView.postMessage(JSON.stringify({type:"downloadFile",payload:{data:e,fileName:`${t}.csv`}}))},a=async(e=1)=>{const t=Math.floor(Math.random());await new Promise(n=>setTimeout(n,1e3*(t+e)))},u=()=>getAppMain().getRootViewController().getPresentedViewController().getCurrentViewController(),c=()=>u().getCurrentController().getNavigationController(),l=e=>{if(e){const[t,n]=e.split("-").map(e=>parseInt(e));return Math.round(Math.random()*(n-t)+t)}return 0},d=e=>{if(e){let t=e[e.length-1].toUpperCase(),n=parseInt(e.substring(0,e.length-1)),r="M"===t?60:"H"===t?3600:1;return n&&(n*=r),n}return 0},f=e=>decodeURIComponent(escape(atob(e))),p=e=>{const t=v(e);return t.length>=2?h(t[0],t[1]):t[0]||0},h=(e,t)=>Math.round(Math.random()*(t-e)+e),v=e=>e?(e+"").split("-").map(e=>parseInt(e)):[],g=()=>{$(".ut-click-shield").addClass("showing"),$(".loaderIcon ").css("display","block")},y=()=>{$(".ut-click-shield").removeClass("showing"),$(".loaderIcon ").css("display","none")},m=e=>{let t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=n.length;for(var i=0;i<e;i++)t+=n.charAt(Math.floor(Math.random()*r));return t},b=e=>{var t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild},w=function(e){var t=arguments;return e.replace(/{dataSource}/g,(t[1]||"").toUpperCase())},_=(e,t)=>(e-t)/((e+t)/2)*100},538:(e,t,n)=>{"use strict";n.d(t,{j:()=>r});const r=(e,t,n,r="webfuthub")=>({displayTime:60,doNotDisplay:"0",priority:1,promotions:[],renders:[{attributes:{alignment:"",colour:"6542329",countdownTime:"",highlightColour:"",renderType:"",size:"",style:""},name:"titleText",type:"TEXT",value:e},{attributes:{alignment:"",colour:"6542329",countdownTime:"",highlightColour:"",renderType:"",size:"",style:""},name:"bodyText",type:"TEXT",value:t},{attributes:{alignment:"",colour:"6542329",countdownTime:"",highlightColour:"",renderType:"",size:"",style:""},name:"bodyImage",type:"IMAGE",value:n}],screen:r,tmtLink:"gotosbc",subtype:"FIFA_BANNER_MESSAGE",trackurls:{}})},169:(e,t,n)=>{"use strict";n.d(t,{w:()=>i});var r=n(425);n(448);const i=(e,t,n,i)=>new Promise((o,s)=>{(0,r.J)({method:t,identifier:n,url:e,data:i,onload:e=>200!==e.status&&201!==e.status?s(e.status):o(e.response)})})},827:(e,t,n)=>{"use strict";n.d(t,{E:()=>r,O:()=>i});const r=function(e,t){t=t||UINotificationType.POSITIVE,services.Notification.queue([e,t])},i=e=>{services.PIN.sendData(PINEventType.PAGE_VIEW,{type:PIN_PAGEVIEW_EVT_TYPE,pgid:e})}},488:(e,t,n)=>{"use strict";n.d(t,{ES:()=>i,GG:()=>o,Ph:()=>r});const r=e=>e<=1e3?e-50:e>1e3&&e<=1e4?e-100:e>1e4&&e<=5e4?e-250:e>5e4&&e<=1e5?e-500:e-1e3,i=e=>e<1e3?e+50:e>=1e3&&e<1e4?e+100:e>=1e4&&e<5e4?e+250:e>=5e4&&e<1e5?e+500:e+1e3,o=(e,t=0)=>{let n=JSUtils.find(UTCurrencyInputControl.PRICE_TIERS,function(t){return e>=t.min});var r=Math.round(e/n.inc)*n.inc;return Math.max(Math.min(r,14999e3),t)}},39:(e,t,n)=>{"use strict";n.d(t,{N:()=>i});let r=new Set;const i=(e,t,n,i,s)=>(r.has(e)||(o(e,n),r.add(e)),`<button class="btn-standard ${i}" id="${e}" style="${s}">\n      <span class="button__text">${t}</span>\n  </button>`),o=(e,t)=>{$(document).on({mouseenter:function(){$(this).addClass("hover")},mouseleave:function(){$(this).removeClass("hover")},click:function(){t()},touchenter:function(){$(this).addClass("hover")},touchleave:function(){$(this).removeClass("hover")},touchend:function(){t()}},`#${e}`)}},140:(e,t,n)=>{"use strict";n.d(t,{e:()=>r});const r=function(){UTHubMessagesTileView.call(this)};JSUtils.inherits(r,UTHubMessagesTileView)}},__webpack_module_cache__={};__webpack_require__.n=(e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t}),__webpack_require__.d=((e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}),__webpack_require__.o=((e,t)=>Object.prototype.hasOwnProperty.call(e,t));var __webpack_exports__={};(()=>{"use strict";var e=__webpack_require__(791),n=__webpack_require__(16),r=__webpack_require__(174),i=__webpack_require__(448),o=__webpack_require__(827),s=__webpack_require__(592);const a=e=>{const t=repositories.Item.getPileSize(ItemPile.TRANSFER)-repositories.Item.numItemsInCache(ItemPile.TRANSFER);(e=e.slice(0,t+1)).length&&services.Item.move(e,ItemPile.TRANSFER).observe(void 0,function(t,n){(0,o.E)(services.Localization.localize("notification.item.allToTradePile",[e.length]),UINotificationType.NEUTRAL)})},u=e=>{(0,s._)([{labelEnum:enums.UIDialogOptions.OK},{labelEnum:enums.UIDialogOptions.CANCEL}],services.Localization.localize("infopanel.label.sendTradePile"),(0,r.t)("sendToTransferListInfo"),t=>{2===t&&e()})};var c=__webpack_require__(256),l=__webpack_require__(451);const d=function(e,t,n){const r=new UTStandardButtonControl;if(r.init(),r.addTarget(r,t.bind(r),EventType.TAP),r.setText(e),n){const e=n.split(" ").filter(Boolean);for(let t of e)r.getRootElement().classList.add(t)}return r};var f=__webpack_require__(488);const p=(e,t)=>((e=(0,f.GG)(Math.min(t._itemPriceLimits.maximum,Math.max(t._itemPriceLimits.minimum,e))))===t._itemPriceLimits.minimum&&(e=(0,f.ES)(e)),e),h=async e=>new Promise(t=>{e.hasPriceLimits()?t():services.Item.requestMarketData(e).observe(void 0,async function(e,n){t()})}),v=e=>{(e=e.filter(e=>!e.isDuplicate())).length&&services.Item.move(e,ItemPile.CLUB).observe(void 0,function(t,n){(0,o.E)(services.Localization.localize("notification.item.allToClub",[e.length]),UINotificationType.NEUTRAL)})},g=function(e,t,n){[services.Localization.localize("infopanel.label.alltoclub"),services.Localization.localize("infopanel.label.storeAllInClub")].indexOf(e)>=0?m(e,t,n):b(e,t,n)},y=e=>{const t=(0,l.Ig)(e)||new Map,n=new Set;for(const[e,r]of t)r&&n.add(e);return n},m=(e,t,n)=>{const r=y(e),i=services.Localization.localize("infopanel.label.alltoclub")===e;services.Item[i?"requestWatchedItems":"requestUnassignedItems"]().observe(void 0,async function(e,o){let s=o.response.items;s=s.filter(function(e){return r.has(e.id)}),i&&(s=s.filter(function(e){return e.getAuctionData().isWon()})),w(s,t,n,!1)})},b=(e,t,n,r)=>{const i=y(e);services.Item.requestTransferItems().observe(void 0,async function(o,s){if(e===services.Localization.localize("tradepile.button.relistall")){let e=s.response.items.filter(function(e){var t=e.getAuctionData();return i.has(e.id)&&(t.isExpired()||t.isValid()&&t.isInactive())});r?v(e):w(e,t,n,!0)}else if(e===services.Localization.localize("infopanel.label.addplayer")){const e=s.response.items.filter(function(e){return i.has(e.id)&&!e.getAuctionData().isValid()});r?v(e):w(e,t,n,!0)}})},w=async(e,t,n,s)=>{e=e.filter(e=>!e.untradeable);const a=(0,l.f6)();e.length?((0,i.VO)(),t?((0,o.E)(`${(0,i.Fb)((0,r.t)("listingCards"),a)} ${t}`),await _(e,t,n,s)):((0,o.E)((0,i.Fb)((0,r.t)("listingCardsFutBin"),a)),await S(e,s)),(0,i.Gx)(),(0,o.E)((0,r.t)("listingCardsCompleted"))):(0,o.E)((0,r.t)("noCardsToList"),UINotificationType.NEGATIVE)},_=async(e,t,n,r)=>{for(const r of e)await E(t,r,!0,n)},S=async(e,t)=>{const n=(0,l.f6)();await(0,c.x)(e);for(const t of e){const e=(0,l.NA)(`${t.definitionId}_${n}_price`);e&&e.price?await E(C(e.price),t):(0,o.E)(`${(0,r.t)("priceMissing")} ${t._staticData.name}`,UINotificationType.NEGATIVE)}},E=async(e,t,n,s)=>{const[a,u]=await(async(e,t,n,r)=>{if(await h(t),e){const o=(0,l.NA)("EnhancerSettings").idFutBinDuration||"1H";if(t.hasPriceLimits())if(n){if(e<t._itemPriceLimits.minimum||e>t._itemPriceLimits.maximum)return[!1]}else e=p(e,t);e=(0,f.GG)(e,200),services.Item.list(t,r||(0,f.Ph)(e),e,(0,i.vJ)(o)||3600),await(0,i.Dc)((0,i.ly)("3-8"))}return[!0,e]})(e,t,n,s);if(!a)return(0,o.E)((0,r.t)("priceNotInRange"),UINotificationType.NEGATIVE);(0,o.E)(`${(0,r.t)("listed")} ${t._staticData.name} - ${u}`)},C=e=>e*((0,i.RY)((0,l.NA)("EnhancerSettings").idFutBinPercent)||100)/100,A=function(e){return new Promise((t,n)=>{services.Item.searchTransferMarket(e,1).observe(this,function(e,n){n.success?((0,o.O)("Transfer Market Results - List View"),(0,o.O)("Item - Detail View"),t(n.data.items)):t([])})})},O=()=>d((0,r.t)("calcMinBin"),async function(){const e=(0,l.NA)("selectedPlayer")||(0,l.NA)("selectedNonPlayer");if(!e)return;const t=$(this.getRootElement());t.prop("disabled",!0),t.text((0,r.t)("calcMinBin")),(0,o.E)((0,r.t)("calculatingMinBin"));const n=await(async e=>{const t=new UTSearchCriteriaDTO,n=new UTBucketedItemSearchViewModel;t.type=e.getSearchType()||SearchType.PLAYER,t.defId=[e.definitionId],t.category=SearchCategory.ANY,n.searchFeature=ItemSearchFeature.MARKET,n.defaultSearchCriteria.type=t.type,n.defaultSearchCriteria.category=t.category;let r=[],s=!1,a=0;for(;!s;)if(10==++a)s=!0;else{(0,o.O)("Transfer Market Search"),n.updateSearchCriteria(t),services.Item.clearTransferMarketCache();let e=await A(n.searchCriteria);if(e.length){r=r.concat(e.map(e=>e._auction.buyNowPrice));const n=Math.min(...e.map(e=>e._auction.buyNowPrice));e.length<5&&(s=!0),(0,f.GG)((0,f.Ph)(n))===t.maxBuy?s=!0:t.maxBuy=(0,f.GG)((0,f.Ph)(n)),await(0,i.Dc)((0,i.ly)("3-5"))}else s=!0}if(r=r.sort((e,t)=>e-t).slice(0,5),r.length){const e=(0,f.GG)(r.reduce((e,t)=>e+t,0)/r.length);return{min:r[0],avgMin:e,allPrices:r}}return null})(e);t.prop("disabled",!1),n?(t.addClass("btnAverage"),t.html(`<span class="btn-text">\n          <ol>\n            <li>${(0,r.t)("calcMin")}</li>\n            <li>${(0,r.t)("calcAverage")}</li>\n            <li>${(0,r.t)("topCalcMin")}</li>\n          </ol>\n        </span>\n        <span class="btn-subtext">\n          <ol>\n            <li>${n.min}</li>\n            <li>${n.avgMin}</li>\n            ${n.allPrices.reduce((e,t)=>e+=`<li>${t}</li>`,"")}\n          </ol>\n        </span>`)):(0,o.E)((0,r.t)("calcMinBinErr"),UINotificationType.NEGATIVE)},"accordian"),I=(e,t)=>d(`${(0,r.t)("list")} ${t}`,t===(0,r.t)("fixed")?e:()=>{(0,s._)([{labelEnum:enums.UIDialogOptions.YES},{labelEnum:enums.UIDialogOptions.CANCEL}],`${(0,r.t)("list")} ${t}`,`${(0,r.t)("list")} ${t}`,t=>{0===t&&e()})},"relist call-to-action mini"),x=(e,t)=>d(services.Localization.localize("infopanel.label.sendTradePile"),e,`btn-standard mini call-to-action ${t||""}`),T=()=>{const e=UTClubItemSearchHeaderView.prototype._generate,t=async function(){if(repositories.Item.isPileFull(ItemPile.TRANSFER))return(0,o.E)((0,r.t)("transferListFull"),UINotificationType.NEGATIVE);(0,i.VO)();let e=await(0,n.yN)(!0);e&&a(e),(0,i.Gx)()};UTClubItemSearchHeaderView.prototype._generate=function(...i){if(!this._generated){e.call(this,...i);const o=d(`${(0,r.t)("downloadAsCsv")}`,n.p9,"btn-standard mini downloadClub clubAction"),s=x(()=>u(t),"clubAction transferpile");this.__searchContainer.prepend(o.__root),this.__searchContainer.prepend(s.__root)}}},P=()=>{const e=UTTransfersHubViewController.prototype._requestTransferTargetData;UTTransfersHubViewController.prototype._requestTransferTargetData=function(){e.call(this),(0,n.Gz)().then(e=>{(0,l.sO)("squadMemberIds",e)})}};var k=__webpack_require__(169),D=__webpack_require__(682);const N=e=>{const{id:t}=services.User.getUser(),n=(e=>{const t=(0,D.P)();return e.map(e=>{const n=new Date;return n.setSeconds(n.getSeconds()+e._auction.expires),{assetId:e._assetId||e._metaData&&e._metaData.id||e.definitionId,resourceId:e.definitionId,auction:{buyNowPrice:e._auction.buyNowPrice,currentBid:e._auction.currentBid,resourceId:e.definitionId,expiresOn:n,platform:t.toUpperCase(),playStyle:e.playStyle,startingBid:e._auction.startingBid,tradeId:parseInt(e._auction.tradeId),tradeState:e._auction._tradeState}}})})(e);return(0,k.w)("https://wxls53nz2plegcvsjhco3yqyke0hqrps.lambda-url.eu-west-1.on.aws/","POST",`${Math.floor(+new Date)}_trackMarketPrices`,JSON.stringify({userId:t,marketData:n}))};let M=new Set;const L=e=>{const t=(0,l.NA)("EnhancerSettings")||{};t[e]=!1,(0,l.sO)("EnhancerSettings",t)},j=(e,t,n,r,i="settings-field")=>{const o=Object.keys(t)[0];return r&&(L(o),setTimeout(()=>{$(`#${t[o]}`).click()})),M.has(o)||($(document).on("click touchend",`#${t[o]}`,e=>{((e,t)=>{const n=(0,l.NA)("EnhancerSettings")||{};n[e]?(n[e]=!1,$(t.currentTarget).removeClass("toggled")):(n[e]=!0,$(t.currentTarget).addClass("toggled")),(0,l.sO)("EnhancerSettings",n)})(o,e)}),M.add(o)),`\n    <div class="price-filter  ${i}">\n        <div class="ut-toggle-cell-view">\n           <span class="ut-toggle-cell-view--label">${e} <br/><small>${n}</small></span>\n             <div id='${t[o]}' class="ut-toggle-control">\n               <div class="ut-toggle-control--track">\n              </div>\n              <div class= "ut-toggle-control--grip" >\n          </div> \n           </div> \n       </div>\n    </div> `},R=()=>{const t=services.Item.searchTransferMarket;services.Item.searchTransferMarket=function(...n){((e,t)=>{if(1===t&&"player"===e.type){const t=(0,l.NA)("PlayersRatingRange")||[];if(t.length){const{nation:n,league:r,club:o}=e,s=t.filter(e=>!(-1!==n&&n!==e.nationid||-1!==r&&r!==e.leagueid||-1!==o&&o!==e.teamid)).map(e=>e.id);s.length&&(e.maskedDefId=s[(0,i.pl)(0,s.length-1)])}}else 1==t&&(e.maskedDefId=0)})(...n);const{idAutoBuyMin:r,idIncreaseSearchResult:o}=(0,l.NA)("EnhancerSettings");L("idAutoBuyMin"),getAppMain().getConfigRepository().configs.itemsPerPage={club:e.Mg,transferMarket:o?49:e.er};const s=t.call(this,...n);return s.observe(this,function(e,t){if(t.success){const e=[...t.data.items||[]];if(e.length){e.sort((e,t)=>e._auction.buyNowPrice-t._auction.buyNowPrice);const t=e[0];r&&services.Item.bid(t,t._auction.buyNowPrice)}N(e)}}),s}},U=()=>{const e=UTItemDomainRepository.prototype.setUnassignedItems;UTItemDomainRepository.prototype.setUnassignedItems=function(...t){e.call(this,...t)},UTHomeHubViewController.prototype._onUnassignedItemsRequested=function(e,n){if(e.unobserve(this),n.success){let e=n.response.items.length;50===e&&(e=(0,l.NA)("unassigned")||50),this.getView().renderUnassignedTile(e)}else NetworkErrorManager.checkCriticalStatus(t.status)&&NetworkErrorManager.handleStatus(t.status)}},F=()=>{const e=UTQuickListPanelView.prototype.onBuyPriceChanged,t=UTQuickListPanelView.prototype._generate,n=UTDefaultActionPanelView.prototype._generate,a=UTAuctionActionPanelView.prototype._generate,u=UTQuickListPanelViewController.prototype.renderView;UTQuickListPanelView.prototype.onBuyPriceChanged=function(t,n,i){e.call(this,t,n,i),(e=>{const t=(.95*e).toLocaleString();$("#saleAfterTax").html(`${(0,r.t)("price")} ${t}`)})(this._buyNowNumericStepper.getValue())},UTQuickListPanelView.prototype.initFutBinEvent=function(e){if("player"!==e.type)return $(this._futbinListFor.__root).css("display","none"),setTimeout(()=>{$(".viewon").css("display","none")}),(0,l.sO)("selectedPlayer",void 0),void(0,l.sO)("selectedNonPlayer",e);$(this._futbinListFor.__root).css("display",""),setTimeout(()=>{$(".viewon").css("display","")}),(0,l.sO)("selectedPlayer",e),(0,l.sO)("selectedNonPlayer",void 0)},UTQuickListPanelView.prototype._generate=function(...e){this._generated||(t.call(this,...e),this._futbinListFor=d((0,i.Fb)((0,r.t)("listFutBin"),(0,l.f6)()),()=>{const e=(0,l.NA)("selectedPlayer");(0,s._)([{labelEnum:enums.UIDialogOptions.YES},{labelEnum:enums.UIDialogOptions.CANCEL}],(0,i.Fb)((0,r.t)("listFutBin"),(0,l.f6)()),(0,i.Fb)((0,r.t)("listFutBin"),(0,l.f6)()),t=>{0===t&&e&&w([e])})},"accordian"),this.__root.children[0].appendChild(this._futbinListFor.__root),$(`<div  class="buttonInfoLabel hasPriceBanding">\n  <span class="spinnerLabel">${(0,r.t)("afterTax")}</span>\n  <span id="saleAfterTax" class="currency-coins bandingLabel">${(0,r.t)("price")} 10,000</span>\n</div>`).insertAfter($(this._buyNowNumericStepper.__root)))},UTQuickListPanelViewController.prototype.renderView=function(){u.call(this),this.getView().initFutBinEvent(this.item)},UTDefaultActionPanelView.prototype._generate=function(...e){this._generated||(n.call(this,...e),f.call(this))},UTAuctionActionPanelView.prototype._generate=function(...e){this._generated||(a.call(this,...e),f.call(this))};const f=function(){if($(d((0,i.Fb)((0,r.t)("viewFutBin"),(0,l.f6)()),async()=>{const e=(0,l.NA)("selectedPlayer");if(!e)return;const t=await(0,c.Y)(e);t||(0,o.E)((0,i.Fb)((0,r.t)("futBinUrlErr"),(0,l.f6)()),UINotificationType.NEGATIVE),window.open(t,"_blank")},"accordian viewon").__root).insertAfter($(this._playerBioButton.__root)),(0,l.NA)("EnhancerSettings").idShowCalcMinBin){this._calcMinBin=O();const e=this.__root.children.length;this.__root.children[e-1].appendChild(this._calcMinBin.__root)}}};var B=__webpack_require__(199);const z=()=>{let e=window.XMLHttpRequest.prototype.open;window.XMLHttpRequest.prototype.open=function(t,n,r){this.addEventListener("readystatechange",function(){if(4===this.readyState)if(this.responseURL.includes("/ut/game/fifa21/usermassinfo")){let e=JSON.parse(this.responseText);if(e){const t=parseInt(e.userInfo.unassignedPileSize.replace(/[,.]/g,""));(0,l.sO)("unassigned",isNaN(t)?void 0:t)}}else if(this.responseURL.includes("https://gateway.ea.com/proxy/identity/pids/me")){let e=JSON.parse(this.responseText);e&&e.pid&&!(0,l.NA)("useremail")&&(0,l.sO)("useremail",e.pid.email)}},!1),e.call(this,t,n,r)}};var q=__webpack_require__(975);const K=()=>{const e=utils.PopupManager.showConfirmation,t=utils.PopupManager.showAlert;utils.PopupManager.showConfirmation=function(t,n,r,i){const o=(0,l.NA)("EnhancerSettings").idHideBinPop;t.title===utils.PopupManager.Confirmations.CONFIRM_BUY_NOW.title&&o?r():e.call(this,t,n,r,i)},utils.PopupManager.showAlert=function(e,n,r){const i=(0,l.NA)("EnhancerSettings").idTransferFullPop;e.title===utils.PopupManager.Alerts.TRANSFER_LIST_FULL.title&&i||t.call(this,e,n,r)}},V=(e,t,n,r)=>{let o;const s=$("<div class='futbinprice auctionValue priceholder'></div>");t.find(".futbinprice").remove(),r&&(o=(0,i.Ew)(.95*n,r),Y(services.Localization.localize("infopanel.label.prevBoughtPrice"),s,r,"boughtFor")),Y(e,s,n,"futbinpricesel",o),t.prepend(s)},G=(e,t)=>{e.prepend(`\n    <div style="position: absolute;top: -10px;width: 100%;">\n      <span class="currency-coins value squad-fut-bin">${t?t.toLocaleString():"---"}</span>\n    </div>`)};$(document).on("click touchend",".player-select-check",function(e){const t=parseInt(e.currentTarget.id),n=e.currentTarget.dataset.section,r=(0,l.Ig)(n);((e,t,n)=>{t.set(n,e),$(`#${n}_check`).prop("checked",e)})(!r.get(t),r,t)}),$(document).on("click touchend",".section-select-check",function(e){const t=e.currentTarget;if("true"!==t.dataset.issupported)return;const n=`#${e.currentTarget.id}`.replace("wrapper","check"),i=t.dataset.header,o=(0,l.Hx)(i),a=!o.get(i);(0,s._)([{labelEnum:enums.UIDialogOptions.OK},{labelEnum:enums.UIDialogOptions.CANCEL}],a?(0,r.t)("selectAll"):(0,r.t)("deSelectAll"),a?(0,r.t)("selectAll"):(0,r.t)("deSelectAll"),e=>{2===e?(()=>{o.set(i,a);const e=(0,l.Ig)(i)||new Map;for(const[t]of e)e.set(t,a),$(`#${t}_check`).prop("checked",a);$(n).prop("checked",a)})():$(n).prop("checked",!a)})});const W=(e,t,n)=>{const r=(0,l.Ig)(t);void 0===r.get(n.id)&&r.set(n.id,!0),e.find(".player-select").remove();const i=$(`<div id='${n.id}' data-section='${t}' class="price-filter player-select player-select-check">\n      <input type='checkbox' id='${n.id}_check' class="player-select" />\n    </div>`);r.get(n.id)&&i.find("input").prop("checked",!0),e.prepend(i)},H=e=>{e.find(".rowContent").find(".show-duplicate")[0]||e.find(".rowContent").append('<div class="show-duplicate ut-list-tag-view ut-list-active-tag-view">\n            <div class="label-container">\n              <span class="fut_icon icon_squad">\n              </span>\n              <span class="label">\n              </span>\n            </div>\n        </div>')},J=(e,t)=>{e.find(".ut-item-player-status--loan").text(t)},Y=(e,t,n,r,i)=>{const o=i<0?"orangered":i>0?"lime":"darksalmon";t.prepend(`<div class="auctionValue ${r} futbinprice">\n              <span class="label">${e} ${void 0!==i?`<info style='color: ${o}'>(${i.toFixed(2)}%)</info>`:""}</span>\n              <span class="currency-coins value">${n?n.toLocaleString():"---"}</span>             \n            </div>`)},Z=async()=>{if(repositories.Item.isPileFull(ItemPile.TRANSFER))return(0,o.E)((0,r.t)("transferListFull"),UINotificationType.NEGATIVE);(0,i.VO)();let e=await X();e&&a(e),(0,i.Gx)()},X=()=>new Promise(e=>{services.Item.requestUnassignedItems().observe(void 0,function(t,{response:{items:n}}){e(n)})}),Q=async(e,t)=>{const n=(0,l.NA)("EnhancerSettings")||{};if(!e.length||!1===n.idFutBinPrice)return;const i=[],o="packs"===t,s=e[0].data.getAuctionData(),a=!(o||"club"===t||s.isSold()||s.isActiveTrade()||s.isOutbid());for(const{data:t}of e)i.push(t);const u=(0,l.f6)(),d=await(0,c.x)(i);let f=0,p=0,h=0;const v=(0,l.NA)("squadMemberIds")||new Set;for(const{__auction:n,data:r,__root:i}of e){const e=$(n),o=$(i),{definitionId:s,contract:c,_auction:l,lastSalePrice:g}=r,y=d.get(`${s}_${u}_price`);if(J(o,c),a&&W(o,t,r),v.has(s)&&H(o),void 0===y)continue;e.attr("style")&&(e.removeAttr("style"),e.addClass("hideauction"));const m=l.currentBid||l.startingBid;p+=m,h+=l.buyNowPrice,f+=y||0,V(u.toUpperCase(),e,y,"inactive"!==l._tradeState||o.hasClass("has-action")?0:g),ee(o,l.buyNowPrice,m,y)}var g;return o&&(g=f,$(".ut-store-reveal-modal-list-view--wallet").append(`<span class="ut-store-reveal-modal-list-view--coins">${(0,r.t)("packValue")} ${g}</span>`)),{totalBid:p,totalBin:h,totalExternalPrice:f}},ee=(e,t,n,r)=>{const i=(0,l.NA)("EnhancerSettings")||{},o=i.idBidBargain;r*=(i.idBarginThreshold||95)/100,t&&r>t||o&&n&&r>n?e.addClass("futbinLessPrice"):i.idOnlyBargain&&e.addClass("hideResult")},te=async e=>{if(!e.length)return;const t=[];for(const{item:n}of e)t.push(n);const n=(0,l.f6)(),i=await(0,c.x)(t);let o=0;for(const{rootElement:t,item:r}of e){const e=i.get(`${r.definitionId}_${n}_price`);if(o+=e||0,e){const n=$(t);G(n,e)}}((e,t)=>{$(".squadTotal").length?$(".squadTotal").text(t):$(`<div class="rating">\n          <span class="ut-squad-summary-label">${e} ${(0,r.t)("squadPrice")}</span>\n          <div>\n            <span class="ratingValue squadTotal currency-coins">${t}</span>\n          </div> \n        </div>\n        `).insertAfter($(".chemistry"))})(n.toUpperCase(),o)},ne=async t=>{const n=(0,l.f6)();if(t.listRows.length){if(services.Localization.localize("infopanel.label.storeAllInClub")===t.sectionHeader&&t.headerElement.append(x(()=>u(Z),"relist").__root),t.isRelistSupported){const[e,o]=((e,t,n,r,i)=>{const o=t.find(".relistwrapper");if(!o.length){t.addClass("relistsection");const e=$("<div class='relistwrapper'></div>");return e.append(I(r,n).__root),t.append(e),[e,!0]}return[o[0],!1]})(t.sectionHeader,t.headerElement,n.toUpperCase(),()=>{g(t.sectionHeader)});[services.Localization.localize("tradepile.button.relistall"),services.Localization.localize("infopanel.label.addplayer")].indexOf(t.sectionHeader)>=0&&o&&e&&e.append((r=(()=>{return e=t.sectionHeader,void([services.Localization.localize("tradepile.button.relistall"),services.Localization.localize("infopanel.label.addplayer")].indexOf(e)>=0&&b(e,void 0,void 0,!0));var e}),i="relist",d(services.Localization.localize("infopanel.label.club"),()=>{(0,s._)([{labelEnum:enums.UIDialogOptions.YES},{labelEnum:enums.UIDialogOptions.CANCEL}],services.Localization.localize("infopanel.label.club"),services.Localization.localize("infopanel.label.club"),e=>{0===e&&r()})},`btn-standard mini call-to-action ${i||""}`)).__root)}Q(t.listRows,t.sectionHeader).then(r=>{setTimeout(()=>{((t,n,{totalBid:r,totalBin:i,totalExternalPrice:o},s,a)=>{t.parent().find(`#${e.Dq}`).remove();const u=a.replace(/\s/g,"");let c=(0,l.Hx)(a).get(a)
;$(`<div id=${e.Dq} style="position:relative" class="ut-button-group">\n   ${s?`<div id='${u}_wrapper' data-issupported='${s}' data-header='${a}' class="price-filter player-select section-select-check">\n      <input id='${u}_check' ${c&&"checked"} type='checkbox' class="player-select" />\n    </div>`:""}\n    <h3 class="ut-group-button cta price-totals ut-store-reveal-modal-list-view--wallet">\n    <span class="ut-store-reveal-modal-list-view--coins">${n} ${o} </span>\n    </h3>\n  </div>`).insertAfter(t)})(t.headerElement,n.toUpperCase(),r,t.isRelistSupported,t.sectionHeader)},100)})}var r,i},re=()=>{const e=UTStoreRevealModalListView.prototype.render;UTStoreRevealModalListView.prototype.render=function(...t){e.call(this,...t),Q(this.listRows.map(({__root:e,__auction:t,data:n})=>({__root:e,__auction:t,data:n})),"packs")}};let ie;const oe=()=>new Promise(e=>{let t=(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB||window.shimIndexedDB).open("userSettings",1);t.onupgradeneeded=function(){ie=t.result,ie.createObjectStore("UserSettings",{keyPath:"settingName"}),ie.createObjectStore("Players",{keyPath:"id"})},t.onsuccess=function(){ie=t.result,e()}}),se=()=>new Promise((e,t)=>{const n=ie.transaction("Players","readonly").objectStore("Players").getAll();n.onsuccess=function(){let t=[];if(n.result.length)for(let e of n.result)t.push(e);e(t)},n.onerror=function(){t()}}),ae=()=>new Promise((e,t)=>{const n=ie.transaction("UserSettings","readonly").objectStore("UserSettings").getAll();n.onsuccess=function(){let t=null;n.result.length&&(t=n.result[0].jsonData),e(t)},n.onerror=function(){t()}});__webpack_require__(39);let ue=new Set;const ce=(e,t,n)=>{const r=(0,l.NA)("EnhancerSettings")||{};"number"===n&&(t=parseInt(t)),r[e]=t||null,(0,l.sO)("EnhancerSettings",r)},le=(e,t,n,r,i=null,o="number",s="settings-field",a=".*")=>{const u=Object.keys(n)[0];return ce(u,i||t,o),i&&setTimeout(()=>{$(`#${n[u]}`).val(i)}),ue.has(u)||($(document).on("input",`#${n[u]}`,({target:{value:e}})=>{ce(u,e||t,o)}),ue.add(u)),`<div class="price-filter ${s}">\n       <div class="info">\n           <span class="secondary label"><button id='${n[u]}_tooltip' style="font-size:16px" class="flat camel-case">${e}</button> :<br/><small>${r}</small></span>\n       </div>\n       <div class="buttonInfo">\n           <div class="inputBox">\n               <input pattern="${a}" type="${o}" class="numericInput" id='${n[u]}' placeholder=${t}>\n           </div>\n       </div>\n    </div>`},de=()=>{const e=(0,l.NA)("EnhancerSettings")||{};e.idUnassignedPileSize&&(MAX_NEW_ITEMS=e.idUnassignedPileSize)},fe=function(e){UTView.call(this)};JSUtils.inherits(fe,UTView),$(document).on({change:function(){const t=$(`#${e.lr} option`).filter(":selected").val(),n=(0,l.NA)("EnhancerSettings")||{};n.idExternalDataSource=t,(0,l.sO)("EnhancerSettings",n)}},`#${e.lr}`),fe.prototype._generate=function(){if(!this._generated){let t=document.createElement("div");t.classList.add("ut-market-search-filters-view"),t.classList.add("floating"),t.style["overflow-y"]="scroll",t.style.display="flex",t.style["align-items"]="center";let n=document.createElement("div");n.style.height="100%";const r=(0,l.f6)(),i=(0,l.NA)("EnhancerSettings")||{};i.idMinRating;r&&setTimeout(()=>{$(`#${e.lr}`).find(`option[value=${r}]`).attr("selected","selected")}),n.appendChild($(' <div class=\'enhancer-settings-wrapper ut-pinned-list\'>\n          <div class="enhancer-settings-header"> \n          <h1 class="secondary">内部使用 暂不开放</h1>\n          </div>\n    </div>')[0]),t.appendChild(n),this.__root=t,this._generated=!0}};const pe=function(e){UTViewController.call(this)};JSUtils.inherits(pe,UTViewController),pe.prototype._getViewInstanceFromData=function(){return new fe},pe.prototype.viewDidAppear=function(){this.getNavigationController().setNavigationVisibility(!0,!0)},pe.prototype.getNavigationTitle=function(){return(0,r.t)("enhancer")};const he=()=>{const e=UTGameTabBarController.prototype.initWithViewControllers;UTGameTabBarController.prototype.initWithViewControllers=function(t){const n=new UTGameFlowNavigationController;n.initWithRootController(new pe),n.tabBarItem=ve(),t.push(n),e.call(this,t)}},ve=()=>{const e=new UTTabBarItemView;return e.init(),e.setTag(6),e.setText((0,r.t)("enhancer")),e.addClass("icon-transfer"),e},ge=()=>`\n${(()=>{const t=[{value:"moveClub",label:(0,r.t)("moveToClub")},{value:"moveTransfers",label:(0,r.t)("moveToTransferList")},{value:"quickSell",label:(0,r.t)("quickSell")},{value:"listExternal",label:(0,i.Fb)((0,r.t)("listFutBin"),(0,l.f6)())}];return[{id:e.i8,label:services.Localization.localize("search.filters.players"),actions:t},{id:e.tK,label:services.Localization.localize("roles.manager"),actions:t.slice(0,3)},{id:e.dj,label:services.Localization.localize("card.title.contract"),actions:t.slice(0,3)},{id:e.MF,label:(0,r.t)("nonPlayers"),actions:t.slice(0,3)},{id:e.iT,label:(0,r.t)("duplicates"),actions:t.slice(1)}]})().map(({id:e,label:t,actions:n})=>`\n${t}\n<select class="sbc-players-list" id="${e}"\n    style="overflow-y : scroll">\n    ${n.map(({value:e,label:t})=>`<option value='${e}'>${t}</option>`)}\n </select> \n <br />\n <br />\n`).join("")}\n <br />\n <br />\n ${(0,r.t)("noOfPacks")}\n <input placeholder="3" id=${e.XE} type="number" class="ut-text-input-control fut-bin-buy" />\n <br /> <br />\n ${GameCurrency.COINS}/${GameCurrency.POINTS}\n <select class="sbc-players-list" id="${e.am}"\n    style="overflow-y : scroll">\n    <option value=${GameCurrency.COINS}>${services.Localization.localize("currency.coins")}</option>\n    <option value=${GameCurrency.POINTS}>${services.Localization.localize("currency.points")}</option>\n </select>\n <br /> <br />\n `,ye=()=>{const t=parseInt($(`#${e.XE}`).val())||3,n=$(`#${e.am}`).val()||GameCurrency.COINS;return{noOfPacks:t,playersHandler:$(`#${e.i8}`).val(),managersHandler:$(`#${e.tK}`).val(),contractsHandler:$(`#${e.dj}`).val(),otherItemsHandler:$(`#${e.MF}`).val(),duplicateHandler:$(`#${e.iT}`).val(),credits:n}},me=async(e,t)=>{for((0,i.VO)();t.noOfPacks>0;){const n=await we(e,t);if(!n.success)return(0,i.Gx)(),(0,o.E)(n.message||(0,r.t)("packOpeningErr"),UINotificationType.NEGATIVE);await(0,i.Dc)(3),t.noOfPacks--,(0,o.E)(`${t.noOfPacks} ${(0,r.t)("packsRemaining")}`)}(0,i.Gx)()},be=(e,t)=>new Promise(async n=>{if(e.length||n(""),"moveTransfers"===t||"listExternal"===t){if(repositories.Item.isPileFull(ItemPile.TRANSFER))return n((0,r.t)("transferListFull"));"listExternal"===t?(await w(e),(0,i.VO)(),n("")):services.Item.move(e,ItemPile.TRANSFER).observe(void 0,function(e,t){n("")})}else"moveClub"===t?services.Item.move(e,ItemPile.CLUB).observe(void 0,function(e,t){n("")}):"quickSell"===t&&services.Item.discard(e).observe(void 0,function(e,t){n("")})}),we=(e,t)=>repositories.Item.numItemsInCache(ItemPile.PURCHASED)?{success:!1,message:services.Localization.localize("popup.error.unassignedItemsEntitlementTitle")}:!e.prices._collection[t.credits]||e.prices._collection[t.credits].amount>services.User.getUser()[t.credits.toLowerCase()].amount?{success:!1,message:(0,r.t)("errInsufficientCredits")}:new Promise(n=>{e.purchase(t.credits).observe(void 0,function(e,s){s.success?(repositories.Item.setDirty(ItemPile.PURCHASED),(0,o.O)("Unassigned Items - List View"),services.Item.requestUnassignedItems().observe(this,async function(e,{response:{items:s}}){let a="";a+=await((e,t)=>{const n=e.filter(e=>!e.isDuplicate()&&e.isPlayer());return(0,o.E)((0,r.t)("handlingPlayers")),be(n,t)})(s,t.playersHandler),await(0,i.Dc)(2),a+=await((e,t)=>{const n=e.filter(e=>!e.isDuplicate()&&e.isManager());return(0,o.E)((0,r.t)("handlingManagers")),be(n,t)})(s,t.managersHandler),await(0,i.Dc)(2),a+=await((e,t)=>{const n=e.filter(e=>!e.isDuplicate()&&(e.isPlayerContract()||e.isManagerContract()));return(0,o.E)((0,r.t)("handlingContracts")),be(n,t)})(s,t.contractsHandler),await(0,i.Dc)(2),a+=await((e,t)=>{const n=e.filter(e=>!(e.isDuplicate()||e.isPlayer()||e.isManager()||e.isPlayerContract()||e.isManagerContract()));return(0,o.E)((0,r.t)("handlingOtherItems")),be(n,t)})(s,t.otherItemsHandler),await(0,i.Dc)(2),a+=await((e,t)=>{const n=e.filter(e=>e.isDuplicate());return(0,o.E)((0,r.t)("handlingDuplicates")),be(n,t)})(s,t.duplicateHandler),await(0,i.Dc)(2),a+=await(e=>new Promise(async t=>{const n=e.filter(e=>e.isMiscItem());n.length?((0,o.E)((0,r.t)("handlingCredits")),await Promise.all(n.map(async e=>{services.Item.redeem(e),await(0,i.Dc)(2)})),t("")):t("")}))(s),await(0,i.Dc)(1),await(0,D.b)(),n({success:!a.length,message:a})})):n({success:!1})})}),_e=()=>{const e=UTStorePackDetailsView.prototype.setupBuyCoinsButton,t=function(){let e=!1;services.Store.getPacks().observe(this,function(t,n){if(e)return;e=!0;const i=n.response.packs.find(e=>e.id===this.articleId);i?(0,s._)([{labelEnum:enums.UIDialogOptions.OK},{labelEnum:enums.UIDialogOptions.CANCEL}],(0,r.t)("autoOpenPacks"),ge(),e=>{2===e&&(async e=>{const t=ye();await me(e,t)})(i)}):(0,o.E)((0,r.t)("packMissing"),UINotificationType.NEGATIVE)})};UTStorePackDetailsView.prototype.setupBuyCoinsButton=function(...n){e.call(this,...n),this._btnOpenPacks&&this.removeActionButton(this._btnOpenPacks),this._btnOpenPacks=new UTCurrencyButtonControl,this._btnOpenPacks.init(),this._btnOpenPacks.setText((0,r.t)("openPack")),this._btnOpenPacks.setSubText((0,r.t)("automatically")),this._btnOpenPacks.addClass("call-to-action packOpen"),this._btnOpenPacks.addTarget(this,t,EventType.TAP),this.appendActionButton(this._btnOpenPacks)}},Se=()=>{const e=UTSquadPitchView.prototype.setSlots;UTSquadPitchView.prototype.setSlots=async function(...t){const n=e.call(this,...t);if(!((0,l.NA)("EnhancerSettings")||{}).idShowSquadPrice)return;const r=this.getSlotViews(),i=[];return r.forEach((e,n)=>{const r=t[0][n];i.push({item:r._item,rootElement:e.getRootElement()})}),te(i),n}},Ee=new Set([5001001,5001004,5001008,5001011,5001002,5001005,5001009,5001012,5001003,5001006,5001010,5001013]),Ce=()=>{const e=UTItemSearchView.prototype.setFilters,t=UTItemSearchViewModel.prototype.updateFromFilterChange,n=UTItemSearchView.prototype.getFilterTitle,r=UTItemSearchView.prototype.generateFilterImage;UTItemSearchView.prototype.generateFilterImage=function(e,t,n){return"contract.type"===e?`${fut_resourceRoot}${fut_resourceBase}${fut_guid}/${fut_year}/fut/items/images/mobile/type/list/3/5.png`:r.call(this,e,t,n)},UTItemSearchView.prototype.getFilterTitle=function(e){return"contract.type"===e?"CONTRACT TYPE":n.call(this,e)},UTItemSearchViewModel.prototype.updateFromFilterChange=function(...e){return"contract.type"===(e.length?e[0]:null)&&(this.searchCriteria.defId=-1!=e[1]?[e[1]]:[]),t.call(this,...e)},UTItemSearchView.prototype.setFilters=function(t,n){if(e.call(this,t,n),t.searchCriteria.category===SearchCategory.MANAGER_LEAGUE)this.setFilterLock(enums.UISearchFilters.LEAGUE,!1);else if(t.searchCriteria.category===SearchCategory.CONTRACT){this.generateFilter("contract.type",[{id:-1,label:"Any",value:"any"},{id:5001001,label:"Player Bronze Common",value:5001001},{id:5001004,label:"Player Bronze Rare",value:5001004},{id:5001008,label:"Manager Bronze Common",value:5001008},{id:5001011,label:"Manager Bronze Rare",value:5001011},{id:5001002,label:"Player Silver Common",value:5001002},{id:5001005,label:"Player Silver Rare",value:5001005},{id:5001009,label:"Manager Silver Common",value:5001009},{id:5001012,label:"Manager Silver Rare",value:5001012},{id:5001003,label:"Player Gold Common",value:5001003},{id:5001006,label:"Player Gold Rare",value:5001006},{id:5001010,label:"Manager Gold Common",value:5001010},{id:5001013,label:"Manager Gold Rare",value:5001013}],t.searchCriteria.defId.some(e=>Ee.has(e))?t.searchCriteria.defId[0]:"any");const e=this.filters[this.filters.length-1];this.getRootElement().appendChild(e.getRootElement())}else t.searchCriteria.defId.length&&Ee.has(t.searchCriteria.defId[0])&&(t.searchCriteria.defId=[])}},Ae=()=>{const e=UTPaginatedItemListView.prototype._renderItems,t=UTSectionedItemListView.prototype.setHeader,n=new Set;UTPaginatedItemListView.prototype._renderItems=function(...t){const n=e.call(this,t);return Q(this.listRows.map(({__root:e,__auction:t,data:n})=>({__root:e,__auction:t,data:n})),"club"),n},UTSectionedItemListView.prototype.setHeader=function(e,i,...o){const s=t.call(this,e,i,...o);return n.size||r(),ne({listRows:this.listRows.map(({__root:e,__auction:t,data:n})=>({__root:e,__auction:t,data:n})),headerElement:$(this._header.__root),isRelistSupported:n.has(i),sectionHeader:i}),s};const r=()=>{[services.Localization.localize("infopanel.label.addplayer"),services.Localization.localize("tradepile.button.relistall"),services.Localization.localize("infopanel.label.alltoclub"),services.Localization.localize("infopanel.label.storeAllInClub")].forEach(e=>n.add(e))}},Oe=()=>{const e=UTItemDomainRepository.prototype.isPileFull;UTItemDomainRepository.prototype.isPileFull=function(...t){const n=(0,l.NA)("EnhancerSettings")||{};return n.idUnassignedPileSize&&(MAX_NEW_ITEMS=n.idUnassignedPileSize,this.pileSizes.set(ItemPile.PURCHASED,n.idUnassignedPileSize)),e.call(this,...t)}},Ie=()=>{const e=UTQuickListPanelViewController.prototype._onOpen;UTQuickListPanelViewController.prototype._onOpen=function(...t){return e.call(this,...t)}};var xe=__webpack_require__(793),Te=__webpack_require__.n(xe);const Pe=()=>{const t=UTCurrencyNavigationBarView.prototype._tapDetected,n=UTCurrencyNavigationBarView.prototype._generate,r=UTCurrencyNavigationBarView.prototype.setClubInfo;UTCurrencyNavigationBarView.prototype.setClubInfo=function(e,t){const n=r.call(this,e,t),i=(0,l.NA)("loggedInUser");return i&&(this.__clubInfoEst.textContent=i.userName),n},UTCurrencyNavigationBarView.prototype._tapDetected=function(e){const n=t.call(this,e);return this.__currencyCoins.contains(e.target)&&(0,D.b)(),n},UTCurrencyNavigationBarView.prototype._generate=function(){const t=(0,l.NA)("loggedInUser"),r=n.call(this);return e.Lo||(this.__loginWrapper=document.createElement("div"),this.__loginWrapper.classList.add("view-navbar-clubinfo"),this.__loginWrapper.style.marginRight="10px",this.__loginWrapperBtn=document.createElement("button"),this.__loginWrapperBtn.innerHTML=t?"Logout":"Login To AB Server",this.__loginWrapperBtn.classList.add("btn-standard","section-header-btn","call-to-action","btn-sign"),t&&(this.__loginWrapperBtn.style.backgroundColor="#ff3434",this.__loginWrapperBtn.style.color="#f6f6fe"),this.__loginWrapperBtn.onclick=function(){t?xe.Auth.signOut():xe.Auth.federatedSignIn()},this.__loginWrapper.appendChild(this.__loginWrapperBtn),this.__currencies.parentNode.insertBefore(this.__loginWrapper,this.__currencies)),r}},ke=()=>{const e=UTPackAnimationViewController.prototype.runAnimation,t=UTPresentationController.prototype.present;UTPackAnimationViewController.prototype.runAnimation=function(...t){return((0,l.NA)("EnhancerSettings")||{}).idDisablePackAnimation?this.runCallback():e.call(this,...t)},UTPresentationController.prototype.present=function(e,...n){return((0,l.NA)("EnhancerSettings")||{}).idDisablePackAnimation&&this.presentedViewController instanceof UTPackAnimationViewController&&(e=!1),t.call(this,e,...n)}},De=()=>{const t=UTMarketSearchFiltersViewController.prototype.viewDidAppear,n=UTTransferMarketPaginationViewModel.prototype.getCurrentPageIndex,i=UTMarketSearchFiltersViewController.prototype.dealloc;JSUtils.inherits(UTMarketSearchFiltersViewController,UTMarketSearchFiltersViewController);const o=e=>{const t=(0,l.NA)("EnhancerSettings")||{};e&&(t.idAutoBuyMin=!1),t.idPageNumber=1,(0,l.sO)("EnhancerSettings",t)};UTTransferMarketPaginationViewModel.prototype.getCurrentPageIndex=function(...e){const{idPageNumber:t}=(0,l.NA)("EnhancerSettings");return 1!==t&&1===this.pageIndex&&(this.pageIndex=t,o()),n.call(this,...e)},UTMarketSearchFiltersViewController.prototype.dealloc=function(...e){return o(!0),i.call(this,...e)},UTMarketSearchFiltersViewController.prototype.viewDidAppear=function(...n){const i=t.call(this,...n);L("idAutoBuyMin");const o=(0,l.NA)("EnhancerSettings")||{};let s=this.getView(),a=$(s.__root);return a.find(".settings-field").remove(),a.find(".ut-item-search-view").first().prepend(`${j((0,r.t)("autoBuyLowest"),{idAutoBuyMin:e.WV},"",o.idAutoBuyMinGlobal||!1,"settings-field autoBuyMin")}`),a.find(".search-prices").first().append(),i}},Ne=()=>{const e=UTItemTableCellView.prototype._tapDetected;UTItemTableCellView.prototype._tapDetected=function(t){if(!$(t.target).hasClass("player-select"))return e.call(this,t)}},Me=()=>{const e=services.SBC.submitChallenge;services.SBC.submitChallenge=function(t,n,r){const i=t.squad.getFieldPlayers().map(function(e){return e.item.definitionId}),o=t.eligibilityRequirements.map(e=>({scope:e.scope,requirements:e.kvPairs._collection}));var s;return s={sbcId:t.id,players:i,expiresOn:t.endTime,challengeName:t.name,setName:n.name,requirements:o},(0,k.w)(atob("aHR0cHM6Ly9pamVwZ2pwNnUzM3dobDd2N3dkd2RjbWM1cTBuendjdy5sYW1iZGEtdXJsLmV1LXdlc3QtMS5vbi5hd3Mv"),"POST",`${Math.floor(+new Date)}_saveSolution`,JSON.stringify({squad:s})),e.call(this,t,n,r)}},Le=()=>{const e=UTSBCHubView.prototype._generate,t=UTSBCHubView.prototype.populateTiles,n=UTSBCHubView.prototype.dealloc;UTSBCHubView.prototype.dealloc=function(...e){this.searchInput&&this.searchInput.dealloc(),n.call(this,...e)},UTSBCHubView.prototype.populateTiles=function(...e){if(t.call(this,...e),this.searchInput){const e=this.searchInput.getValue();e&&je(e,$(this.__sbcSetTiles).children())}},UTSBCHubView.prototype._generate=function(...t){const n=e.call(this,...t),r=this.__root.children[1],i=document.createElement("div");return i.classList.add("layout-hub","grid"),this.searchInput=new UTTextInputControl,this.searchInput.init(),this.searchInput.setPlaceholder(services.Localization.localize("button.search")),this.searchInput.addTarget(this,(e,t,{value:n})=>{je(n.toLowerCase(),$(this.__sbcSetTiles).children())},EventType.INPUT),i.appendChild(this.searchInput.getRootElement()),r.prepend(i),n}},je=(e,t)=>{for(const n of t)e.length&&$(n).find(".tileHeader").text().toLowerCase().indexOf(e)<0?n.classList.add("hide"):n.classList.remove("hide")},Re=()=>{const t=UTMarketSearchResultsSplitViewController.prototype._eListDataChanged;UTMarketSearchResultsSplitViewController.prototype._eListDataChanged=function(n,r){const i=t.call(this,n,r),{idAutoSelectMin:o}=(0,l.NA)("EnhancerSettings")||{},s=r.items;if(!s||e.Lo||!o)return i;let a=0,u=Number.MAX_VALUE;for(let e=0;e<s.length;e++){const{buyNowPrice:t}=s[e]._auction;t<u&&(a=e,u=t)}return a&&(this._itemDetailController.setIndex(a),this._listController&&this._listController.getView().selectListRow(s[a].id),this._itemDetailController._childViewControllers[0]._viewmodel.setIndex(a),this._itemDetailController._childViewControllers[0]._renderView()),i}},Ue=()=>{const e=UTPlayerItemView.prototype.renderItem;UTPlayerItemView.prototype.renderItem=function(t,n){const r=e.call(this,t,n),{idShowAlternatePosition:i}=(0,l.NA)("EnhancerSettings")||{};return i&&setTimeout(()=>{const e=$(this.__mainViewDiv).find(".playerOverview");if($(this.__mainViewDiv).find(".preferredPositionWrapper")[0])return;const n=t.possiblePositions||[];$(`<div class='playerOverview preferredPositionWrapper' style="color: rgb(70, 57, 12);right:0;left:unset">${n.reduce((e,n)=>(t.preferredPosition!==n&&(e+=`<div class='preferredPosition'>${PlayerPosition[n]}</div>`),e),"")}</div>`).insertBefore(e)},10),r}},Fe=()=>{const t=UTSquadBuilderView.prototype._generate,n=UTSquadBuilderViewController.prototype.onClubSearchComplete,r=UTSquadBuilderViewModel.prototype.generatePlayerCollection;UTSquadBuilderView.prototype._generate=function(){const n=(0,l.NA)("EnhancerSettings")||{},r=t.call(this);return this.__sortContainer.append((0,i.LU)(`<div>\n        ${le("Rating","10-99",{idSquadBuildPlayerRating:e.Pn},"(Filter players by rating range)",n.idSquadBuildPlayerRating,"text","sb-setting","\\d+-\\d+$")}\n        ${j("Ignore Position",{idSquadBuildIgnorePosition:e.FT},"",n.idSquadBuildIgnorePosition,"sb-setting")}\n        </div>`)),r},UTSquadBuilderViewModel.prototype.generatePlayerCollection=function(e,t,n){if(!((0,l.NA)("EnhancerSettings")||{}).idSquadBuildIgnorePosition)return r.call(this,e,t,n);let i=0;return e.map(function(e,r){var o=n?n.getSlot(r):null;return o&&(o.isValid()||o.isBrick())?o.getItem():t[i++]})},UTSquadBuilderViewController.prototype.onClubSearchComplete=function(e,t){const r=(0,l.NA)("EnhancerSettings")||{},o=(0,i.Gu)(r.idSquadBuildPlayerRating||"");2===o.length&&(t.response.items=t.response.items.filter(e=>!(e.rating<o[0]||e.rating>o[1]))),n.call(this,e,t)}},Be=()=>{z(),U(),T(),P(),R(),F(),(0,B.o)(),(0,q.j)(),re(),(0,s.z)(),K(),he(),_e(),Se(),Ce(),Ae(),Oe(),Ie(),Pe(),ke(),De(),Ne(),Me(),Le(),Re(),Ue(),Fe(),(()=>{const e=document.createElement("style");e.innerText='\n    .player-stats-data-component ul { \n      display: grid;   \n      grid-template-columns: 1fr 1fr 1fr; \n      grid-template-rows: 1fr; \n      width: 78px; \n    }\n    .SearchResults.ui-layout-left>.paginated-item-list>ul{\n      display: grid;\n      grid-template-columns: 1fr 1fr;\n      grid-template-rows: repeat(25,1fr);\n    }\n    .SearchResults.ui-layout-left .player .ut-item-player-status--loan,\n    .phone .SearchResults .player .ut-item-player-status--loan{\n      display: block;\n      background: #4d42f5;\n    }\n    .ut-split-view {\n      padding: 0;\n    }\n    .ui-layout-left .listFUTItem .auction{\n      top: 3% !important;      \n      width: 37% !important;\n      right: .5rem;\n    }\n    .auction.show {\n      display: block !important;\n    }\n    .auction.show .auctionValue,\n    .auction.show .auction-state{\n      display: none !important;\n    }\n    .auction.show .futbinprice{\n      display: block !important;\n    }\n    .SearchResults.ui-layout-left .listFUTItem.futbinLessPrice .rowContent,\n    .phone .SearchResults .listFUTItem.futbinLessPrice .rowContent{\n      background-color: blue;\n      animation: 4s infinite glow;\n    }\n    .SearchResults.ui-layout-left .listFUTItem.hideResult,\n    .phone .SearchResults .listFUTItem.hideResult{\n     display :none;\n    }\n    .SearchResults.ui-layout-left .listFUTItem.expired .rowContent, \n    .phone .SearchResults .listFUTItem.expired .rowContent,\n    .SearchResults.ui-layout-left .listFUTItem.highest-bid .rowContent, \n    .phone .SearchResults .listFUTItem.highest-bid .rowContent,\n    .SearchResults.ui-layout-left .listFUTItem.outbid .rowContent, \n    .phone .SearchResults .listFUTItem.outbid .rowContent,\n    .SearchResults.ui-layout-left .listFUTItem.won .rowContent\n    .phone .SearchResults .listFUTItem.won .rowContent{\n      background-color: #0d0f26;\n      animation: none !important;\n    }\n    @keyframes glow {\n      33% {\n        background-color: red;\n      }\n      66% {\n        background-color: blue;\n      }\n      100% {\n        background-color: purple;\n      }\n    }\n    @media (min-width: 1281px) {\n      .ut-split-view .ut-content {\n        max-width: 100%;\n        max-height: 100%;\n      }\n    }\n    @media (min-width: 1600px) {\n      .SearchResults.ui-layout-left>.paginated-item-list>ul {\n        display: grid;\n        grid-template-columns: 1fr 1fr 1fr;\n        grid-template-rows: repeat(17,1fr);\n      }\n    }\n    .downloadClub {\n      background-color: #7e42f5;\n      border-color: transparent;\n      color: #29ffc9;\n      margin-right: 10px;      \n      margin-left: 10px;\n    }\n    .ut-list-header-action {\n      display: flex\n    }\n    .SearchResults.ui-layout-left .listFUTItem .show-duplicate,\n    .phone .SearchResults .listFUTItem .show-duplicate {\n      right: auto !important;\n      left: 15px!important;\n      display: block;\n    }\n    .ui-layout-right .futbinprice{\n      display:none;\n    }\n    .futBinFill { \n      display: flex; \n      justify-content: space-evenly;\n    }\n    .futBinId {\n      flex-basis: 50%;\n    }\n    .phone .listFUTItem .auction>.auction-state, \n    .phone .listFUTItem .auction>.auctionStartPrice, \n    .phone .listFUTItem .auction>.auctionValue {\n      flex: 1 1 28%;\n      overflow: hidden;\n    }\n    html[dir=ltr]\n    .phone .listFUTItem .auction {\n      right: 0px;\n    }\n    html[dir=ltr] \n    .listFUTItem .auction.show {\n      left: auto\n    }\n    .phone .auction.show {\n      right: 2rem !important;\n    }\n    .enhancer-option-header {\n      display: flex;\n      justify-content: center;\n      margin-top: 20px;\n    } \n    .phone .settings-field  {\n      width: 100% !important;\n      padding: 0px 10px;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      flex-direction: column;\n    }\n    .settings-field .ut-toggle-cell-view {\n      justify-content: space-between;\n      margin: 0px 10px;\n    }\n    .hide {\n      display: none;\n    }\n    .hideauction .auctionValue,\n    .hideauction .auction-state {\n      display: none;\n    } \n    .hideauction .futbinprice,\n    .auction.hideauction,\n    .show {\n      display: unset !important;\n      float: right;\n    }\n    .relistFut {\n      margin-right: 10px;\n      display: none;\n    }\n    .button--loading .button__text {\n      visibility: hidden;\n      opacity: 0;\n    }\n    .button-spinner {\n      position: relative;\n    }\n    .button--loading::after {\n      content: "";\n      position: absolute;\n      width: 16px;\n      height: 16px;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      margin: auto;\n      border: 4px solid transparent;\n      border-top-color: #29ffc9;\n      border-radius: 50%;\n      animation: button-loading-spinner 1s ease infinite;\n    }\n    .ui-layout-right .enhancer-option-header,\n    .ui-layout-right .settings-field {\n      display: none;\n    }\n    \n    @keyframes button-loading-spinner {\n      from {\n        transform: rotate(0turn);\n      }\n    \n      to {\n        transform: rotate(1turn);\n      }\n    }\n    .enhancer-settings-wrapper {\n      display: flex; \n      flex-wrap: wrap; \n      margin-top: 20px;\n      box-shadow: 0 1rem 3em rgb(0 0 0 / 40%);\n      background-color: #2a323d;\n      max-width: 1200px;\n    }\n    .enhancer-settings-header {\n      display: flex;\n      justify-content: center;\n      margin: 20px;\n      width: 100%;\n    }\n    .enhancer-save-btn {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      flex: 1;\n      margin: 15px;\n    }\n    .flex-half{\n      flex: 0.5;\n    }\n    .settings-field {\n      margin-top: 15px;\n      margin-bottom: 15px;\n      width: 50% !important;\n      padding: 10px;\n    }\n    .settings-field .info{\n      text-align: center;\n    }\n    .phone .settings-field .info,\n    .phone .settings-field .buttonInfo{ \n      width:85%\n    }\n    .numericInput:invalid {\n      color: red;\n      border: 1px solid;\n    }\n    .phone .ut-store-reveal-modal-list-view--wallet {\n      flex: unset;\n    }\n    .price-totals {\n      border-top: 1px solid #4ee6eb;\n      display: flex;\n      justify-content: flex-end;\n      height: 35px;\n      align-items: center;\n    }\n    .phone .hideauction .futbinprice{\n      float: right; \n      margin-right: 2rem;\n    }\n    .fut-bin-buy {\n      margin-top: 15px;\n      margin-bottom: 15px;\n    }\n    .sbc-players-list {\n      width: 100%;\n      padding: 10px;\n      font-family: UltimateTeamCondensed, sans-serif;\n      font-size: 1.6em;\n      color: #e2dde2;\n      text-transform: uppercase;\n      background-color: #171826;\n    }\n    .packOpen {\n      margin-left: 0.5rem;\n      flex-basis: 50% !important;\n    }\n    .phone .packOpen {\n      flex-basis: 100% !important;\n    }\n    .squad-fut-bin {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n    }\n    .sbcSolutions {\n      margin-bottom: 10px;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      flex-direction: column;\n      gap: 10px;\n    }\n    .relist {\n      margin-left: 10px;\n    }\n    .phone .clubAction {\n      font-family: UltimateTeam-Icons,sans-serif;\n      padding: 0 0.5rem 0 1rem;\n      font-size: 0;\n    }\n    .phone .downloadClub::before {\n      font-size: 1.3rem;\n      content: \'\\E001\'\n    }    \n    .transferpile::before {\n      font-size: 1.3rem;\n      content: \'\\E07C\' !important\n    }\n    small {\n      white-space: break-spaces;\n    }\n    .ut-navigation-bar-view .view-navbar-currency-coins {\n      cursor: pointer;\n      position: relative;\n    }\n    .ut-navigation-bar-view .view-navbar-currency-coins::before {\n      font-family: UltimateTeam-Icons,sans-serif;\n      font-style: normal;\n      font-variant: normal;\n      font-weight: 400;\n      text-decoration: none;\n      text-transform: none;\n      background-color: #f8eede;\n      color: #243962;\n      display: block;\n      font-size: .5rem;\n      line-height: .5rem;\n      padding: 0.2rem;\n      order: 1;\n    }\n    .ut-navigation-bar-view .view-navbar-currency-coins:before {\n      margin-left: 3px;\n      content: "\\E06A";\n    }\n    .price-filter .ut-toggle-cell-view--label{\n      font-size: 19px;\n    }\n    .autoBuyMin {\n      width: 100% !important;\n    }\n    .autoBuyMin .ut-toggle-cell-view {\n      justify-content: flex-start;\n    }\n    .player-select {\n     position: absolute;\n      z-index: 20;\n    }\n    div.player-select {\n      width:75px;\n      height:75px;\n     }\n     .boughtFor.futbinprice{\n      margin-right: 15px;\n     }\n     .phone .priceholder{\n       display: flex !important;\n       flex-direction: column-reverse;\n    }\n    .phone .ut-section-header-view.relistsection {\n      flex-direction: row;\n      flex-wrap: wrap;\n    }\n    .relistwrapper{\n      display: flex;\n    }\n    .phone .relistwrapper{\n      width: 100%;\n      justify-content: flex-end;\n      margin-top: 8px;\n    }\n    .btnAverage {\n      height: unset !important;\n      align-items: flex-start !important;\n      line-height: unset !important;\n    }\n    .follow {\n      background: #000000;\n      text-transform: uppercase;\n      letter-spacing: 3px;\n      padding: 4px;\n      width: 190px;\n      position: fixed;\n      right: -160px;\n      z-index: 1000;\n      font: normal normal 10px Arial;\n      -webkit-transition: all .25s ease;\n      -moz-transition: all .25s ease;\n      -ms-transition: all .25s ease;\n      -o-transition: all .25s ease;\n      transition: all .25s ease;\n    }   \n    .follow:hover {\n      right: 0;\n    }\n    .playerOverview .preferredPosition{\n      font-size:9px;\n      border-radius:50%;\n      margin-bottom:5px;\n      background: cornflowerblue;\n    }\n    .btn-sign{\n      background: linear-gradient(90deg,rgba(163,168,240,.6),rgba(105,111,221,.6)); \n      font-size: 12px;\n      height: 45px;\n      letter-spacing: 2px;\n      text-transform: uppercase; \n      border: none;\n      border-radius: 10px;\n      cursor: pointer;\n    }    \n    .follow a {\n      color: #fff !important;\n      text-decoration: none;\n      text-align: center;\n      line-height: 43px!important;\n      vertical-align: top!important;\n    }\n    .sb-setting{\n      margin-top: 15px;\n    }\n    .sb-setting button{\n      margin: 0px;\n    }\n    input[type="text"],\n    input[type="number"] {\n      padding: 0 0.5em;\n      border-radius: 0;\n      background-color: #262c38;\n      border: 1px solid #556c95;\n      box-sizing: border-box;\n      color: #f8eede;\n      font-family: UltimateTeam,sans-serif;\n      font-size: 1em;\n      height: 2.8em;\n      opacity: 1;\n      width: 100%;\n    }\n    input[type="text"],\n    input[type=number] {\n      -moz-appearance: textfield;\n    }\n    ',document.head.appendChild(e)})()};var ze=__webpack_require__(425);const qe=async()=>{const e=await Ke();if(e){const t=Ve(await $e());t.token=e,(0,
l.sO)("loggedInUser",t)}return e},Ke=async()=>{try{const e=await xe.Auth.currentSession();return e.getAccessToken().getJwtToken()}catch(e){return null}},$e=async()=>xe.Auth.currentAuthenticatedUser(),Ve=e=>({userName:Ge(e),email:e.attributes?e.attributes.email:""}),Ge=e=>{let t="";return e.attributes&&(t=e.attributes.preferred_username||e.attributes.name),t||(t=e.username),/signinwith/.test(t)&&e.attributes.email&&(t=e.attributes.email),t};e.Lo||(Te().configure(JSON.parse(atob("eyJBdXRoIjp7InJlZ2lvbiI6InVzLWVhc3QtMSIsInVzZXJQb29sSWQiOiJldS13ZXN0LTFfS1RUY2VPaDRGIiwidXNlclBvb2xXZWJDbGllbnRJZCI6IjVpbHVmMGdkZ3IwdDUzcXYyZGhydWFoOTg1IiwibWFuZGF0b3J5U2lnbkluIjpmYWxzZSwiY29va2llU3RvcmFnZSI6eyJkb21haW4iOiJlYS5jb20iLCJwYXRoIjoiLyIsImV4cGlyZXMiOjM2NSwic2VjdXJlIjp0cnVlfSwicmVkaXJlY3RTaWduSW4iOiJodHRwczovL3d3dy5lYS5jb20vZmlmYS91bHRpbWF0ZS10ZWFtL3dlYi1hcHAvIiwicmVkaXJlY3RTaWduT3V0IjoiaHR0cHM6Ly93d3cuZWEuY29tL2ZpZmEvdWx0aW1hdGUtdGVhbS93ZWItYXBwLyJ9fQ=="))),xe.Auth.configure({oauth:JSON.parse(atob("eyJkb21haW4iOiJsb2dpbi5mdXRoZWxwZXJzLmNvbSIsInNjb3BlIjpbInBob25lIiwiZW1haWwiLCJwcm9maWxlIiwib3BlbmlkIiwiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iXSwicmVkaXJlY3RTaWduSW4iOiJodHRwczovL3d3dy5lYS5jb20vZmlmYS91bHRpbWF0ZS10ZWFtL3dlYi1hcHAvIiwicmVkaXJlY3RTaWduT3V0IjoiaHR0cHM6Ly93d3cuZWEuY29tL2ZpZmEvdWx0aW1hdGUtdGVhbS93ZWItYXBwLyIsInJlc3BvbnNlVHlwZSI6ImNvZGUifQ=="))}));const We=function(){let t=!1;services.Localization&&(oe().then(()=>{ae().then(e=>{e&&((0,l.sO)("EnhancerSettings",JSON.parse(e)),de())}),se().then(e=>{e&&(0,l.sO)("PlayersRatingRange",e)})}),(0,l.sO)("EnhancerSettings",{}),(0,l.sO)("PlayersRatingRange",[]),e.Lo||(async()=>{await qe()})(),t=!0),t?(Be(),e.Lo&&(0,ze.E)()):setTimeout(We,1e3)};We()})()})(),(()=>{function e(r){var i=n[r];if(void 0!==i)return i.exports;var o=n[r]={exports:{}};return t[r](o,o.exports,e),o.exports}var t={665:()=>{const e=window.fetch;window.fetch=function(t,n){return!t||!/discordapp/.test(t)&&!/exp.host/.test(t)||"POST"!==n.method&&"DELETE"!==n.method?e.call(this,t,n):new Promise((e,r)=>{const i=Object.assign({},n.headers,{"User-Agent":"From Node"});GM_xmlhttpRequest({method:n.method,headers:i,url:t,data:n.body,onload:t=>{200===t.status||204===t.status?(t.text=(()=>new Promise(e=>e(t.responseText))),t.headers=t.responseHeaders.split("\r\n").reduce(function(e,t){var n=t.split(": ");return e.set(n[0],n[1]),e},new Map),e(t)):r(t)}})})}}},n={};e.d=((t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})}),e.o=((e,t)=>Object.prototype.hasOwnProperty.call(e,t)),e.r=(e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}),(()=>{"use strict";var t={};e.r(t),e.d(t,{idAbActiveTransfers:()=>Be,idAbAddBuyDelay:()=>ae,idAbAddFilterBC:()=>Ft,idAbAddFilterGK:()=>ce,idAbAvailableItems:()=>Fe,idAbBidExact:()=>G,idAbBidFutBin:()=>bt,idAbBuyPrice:()=>B,idAbCardCount:()=>z,idAbCloseTabToggle:()=>le,idAbCoins:()=>Le,idAbCountDown:()=>Et,idAbCustomDiscordNameNotificationToggle:()=>fe,idAbCycleAmount:()=>Z,idAbDelayToAdd:()=>ue,idAbDontMoveWon:()=>wt,idAbDownloadFilter:()=>rt,idAbDownloadStats:()=>Ct,idAbFiltersFileToUpload:()=>ft,idAbFiltersToUpload:()=>it,idAbIgnoreAllowToggle:()=>vt,idAbItemExpiring:()=>V,idAbMaxBid:()=>q,idAbMaxPurchases:()=>jt,idAbMaxRating:()=>te,idAbMaxSearchPage:()=>se,idAbMessageNotificationToggle:()=>de,idAbMinDeleteCount:()=>H,idAbMinRating:()=>ee,idAbNumberFilterSearch:()=>ze,idAbOverSearchWarning:()=>Lt,idAbPauseFor:()=>X,idAbProfit:()=>ot,idAbQuickSell:()=>Ut,idAbRandMinBidInput:()=>ne,idAbRandMinBidToggle:()=>oe,idAbRandMinBuyInput:()=>re,idAbRandMinBuyToggle:()=>ie,idAbReportProblem:()=>St,idAbRequestCount:()=>Me,idAbResumeAfterErrorOccured:()=>_t,idAbSearchProgress:()=>De,idAbSearchResult:()=>K,idAbSellPrice:()=>W,idAbSellToggle:()=>J,idAbSendListingNotificationToggle:()=>pe,idAbShouldSort:()=>It,idAbSoldItems:()=>Re,idAbSolveCaptcha:()=>Pe,idAbSortBy:()=>At,idAbSortOrder:()=>Ot,idAbSoundToggle:()=>he,idAbStatisticsProgress:()=>Ne,idAbStatus:()=>je,idAbStopAfter:()=>Q,idAbStopErrorCode:()=>qe,idAbStopErrorCodeCount:()=>Ke,idAbToggleRunner:()=>mt,idAbUnsoldItems:()=>Ue,idAbUploadBtn:()=>pt,idAbUploadFilter:()=>nt,idAbUseFutWiz:()=>Rt,idAbWaitTime:()=>Y,idAddIgnorePlayers:()=>ut,idAddIgnorePlayersList:()=>lt,idAntiCaptchKey:()=>Ye,idAutoClearExpired:()=>ht,idAutoClearLog:()=>Xe,idBtnActions:()=>xt,idBtnReport:()=>Tt,idBuyFutBinPercent:()=>yt,idBuyFutBinPrice:()=>gt,idCalcBinPrice:()=>Oe,idCapatchaMp3:()=>Ge,idClearLogButton:()=>Ae,idDeleteFilter:()=>Te,idDiscordChannelId:()=>be,idDiscordToken:()=>me,idFUTMarketAlertToken:()=>we,idFilterDropdown:()=>R,idFilterDropdownHeader:()=>U,idFinishMp3:()=>Nt,idFutBinDuration:()=>dt,idInfoWrapper:()=>Ee,idLog:()=>Mt,idNotificationType:()=>ye,idPreserveChanges:()=>Ce,idProgressAutobuyer:()=>_e,idProxyAddress:()=>We,idProxyLogin:()=>Je,idProxyPassword:()=>Ze,idProxyPort:()=>He,idRemoveIgnorePlayers:()=>ct,idRunFilterSequential:()=>at,idSearchCancelButton:()=>Se,idSearchWrapper:()=>$e,idSelectFilterCount:()=>xe,idSelectedFilter:()=>F,idSellAfterTax:()=>ke,idSellCheckBuyPrice:()=>st,idSellFutBinPercent:()=>tt,idSellFutBinPrice:()=>et,idSellRatingThreshold:()=>Qe,idSession:()=>kt,idTelegramBotToken:()=>ve,idTelegramChatId:()=>ge,idTestNotification:()=>Ie,idTooltip:()=>Pt,idWebHookUrl:()=>Dt,idWinMp3:()=>Ve});var n={};e.r(n),e.d(n,{startAutoBuyer:()=>zr,stopAutoBuyer:()=>qr});const r="暂停",i="停止",o={521:"请求被拒绝",512:"请求被拒绝",429:"当前用户请求过多",426:"其他用户中标(卡/出价)",461:"其他用户中标(卡/出价)"},s={idBuyFutBinPercent:95,idAbCardCount:1e3,idAbCardCountisDefaultValue:!0,idAbItemExpiring:"1H",idAbItemExpiringisDefaultValue:!0,idAbSearchResult:21,idAbSearchResultisDefaultValue:!0,idSellFutBinPercent:"105-110",idFutBinDuration:"1H",idFutBinDurationisDefaultValue:!0,idAbMinDeleteCount:10,idSellRatingThreshold:100,idSellRatingThresholdisDefaultValue:!0,idAbMinRating:10,idAbMinRatingisDefaultValue:!0,idAbMaxRating:100,idAbMaxRatingisDefaultValue:!0,idAbMaxSearchPage:5,idAbMaxSearchPageisDefaultValue:!0,idAbRandMinBidInput:1e3,idAbRandMinBidInputisDefaultValue:!0,idAbRandMinBuyInput:1e3,idAbRandMinBuyInputisDefaultValue:!0,idBuyFutBinPrice:!0,idSellFutBinPrice:!0,idSellCheckBuyPrice:!0,idAbSellToggle:!1,idAbRandMinBidToggle:!0},a={idAbAddBuyDelay:!0,idAbCycleAmount:"15-20",idAbDelayToAdd:"3S",idAbMaxPurchases:1,idAbNumberFilterSearch:3,idAbNumberFilterSearchisDefaultValue:!0,idAbPauseFor:"15-30S",idAbSoundToggle:!0,idAbStopAfter:"1-2H",idAbStopErrorCodeCount:3,idAbWaitTime:"5-8",idAbWaitTimeisDefaultValue:!1,idAutoClearExpired:!0,idAutoClearLog:!0},u=!!window.ReactNativeWebView;let c;const l=()=>{let e=(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB||window.shimIndexedDB).open("userDatasAB",2);e.onupgradeneeded=function(t){c=e.result;try{t.oldVersion<1&&c.createObjectStore("Filters",{keyPath:"filterName"}),t.oldVersion<2&&c.createObjectStore("CommonSettings",{keyPath:"filterName"})}catch(t){}},e.onsuccess=function(){c=e.result}},d=e=>new Promise((t,n)=>{const r=c.transaction("Filters","readwrite");r.objectStore("Filters").delete(e),r.oncomplete=function(){t()},r.onerror=function(){n()}}),f=(e,t,n="Filters")=>new Promise((r,i)=>{const o=c.transaction(n,"readwrite");o.objectStore(n).put({filterName:e,jsonData:t}),o.oncomplete=function(){r()},o.onerror=function(){i()}}),p=(e="Filters")=>new Promise((t,n)=>{const r=c.transaction(e,"readonly").objectStore(e).getAll();r.onsuccess=function(){const e={};if(r.result.length)for(let t=0;t<r.result.length;t++)e[r.result[t].filterName]=r.result[t].jsonData;t(e)},r.onerror=function(){n()}}),h=(e="Filters")=>p(e),v=(e,t,n="Filters")=>f(e,t,n),g=new Map,y=(e,t)=>{g.set(e,t)},m=e=>{const t=g.get(e);return t&&t.expiryTimeStamp&&t.expiryTimeStamp<Date.now()?(g.delete(e),null):t},b=(e=!1)=>{const t=m("BuyerSettings")||{};if(e)return t;const n=m("CommonSettings")||{};return Object.assign({},t,n)},w=e=>{let t=m(e)||0;return t++,y(e,t),t},_=()=>((m("CommonSettings")||{}).idAbUseFutWiz?"futwiz":"futbin").toUpperCase(),S=()=>{let e=window.XMLHttpRequest.prototype.open;window.XMLHttpRequest.prototype.open=function(t,n,r){this.addEventListener("readystatechange",function(){if(4===this.readyState)if(u&&this.responseURL.includes("/ut/game/fifa23/usermassinfo")){let e=JSON.parse(this.responseText);if(e){const{personaId:t,personaName:n}=e.userInfo,r=m("useremail");window.ReactNativeWebView.postMessage(JSON.stringify({payload:{personaId:t,personaName:n,userEmail:r,language:services.Localization.locale.language},type:"initUser"}))}}else if(u&&this.responseURL.includes("/ut/game/fifa23/tradepile")){let e=JSON.parse(this.responseText);if(e){const t=e.auctionInfo.filter(e=>e.itemData.assetId).map(({itemData:e})=>{const{id:t,assetId:n,definitionId:r,rareflag:i,rating:o}=e;return{id:t,assetId:n,definitionId:r,rareflag:i,rating:o}});window.ReactNativeWebView.postMessage(JSON.stringify({payload:t,type:"transferList"}))}}else if(this.responseURL.includes("https://gateway.ea.com/proxy/identity/pids/me")){let e=JSON.parse(this.responseText);e&&e.pid&&!m("useremail")&&y("useremail",e.pid.email)}},!1),e.call(this,t,n,r)}},E=e=>{let t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=n.length;for(var i=0;i<e;i++)t+=n.charAt(Math.floor(Math.random()*r));return t},C=async(e=1)=>{const t=Math.floor(Math.random());await new Promise(n=>setTimeout(n,1e3*(t+e)))},A=(e,t)=>{window.ReactNativeWebView.postMessage(JSON.stringify({type:"downloadFile",payload:{data:e,fileName:t}}))},O=(e,t)=>{const n="data:text/csv;charset=utf-8,%EF%BB%BF"+encodeURIComponent(e),r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",`${t}.csv`),document.body.appendChild(r),r.click(),document.body.removeChild(r)},I=e=>{if(e){let t=(e+="")[e.length-1].toUpperCase(),n=T(e.substring(0,e.length-1))/1e3,r="M"===t?60:"H"===t?3600:1;return n&&(n*=r),n}return 0},x=e=>{const t=D(e);return t.length>=2?k(t[0],t[1]):t[0]||0},T=e=>{if(e){const[t,n]=e.split("-").map(e=>parseInt(e));return 1e3*Math.round(Math.random()*(n-t)+t)}return 0},P=e=>{if(e){let t=e[e.length-1].toUpperCase(),n=parseInt(e.substring(0,e.length-1)),r="M"===t?60:"H"===t?3600:1;return n&&(n*=r),n}return 0},k=(e,t)=>Math.round(Math.random()*(t-e)+e),D=e=>e?(e+"").split("-").map(e=>parseInt(e)):[],N=(e,t)=>(e.length<=t&&(e+=" ".repeat(t-e.length)),e),M=function(e){const t=b();if(!u&&t.idAbSoundToggle){let t=document.getElementById(Ve);"capatcha"==e?t=document.getElementById(Ge):"finish"==e?t=document.getElementById(Nt):"cardWon"==e&&(t=document.getElementById(Ve)),t.currentTime=0,t.play()}},L=function(e){if(!e)return 0;var t=(new Date).getTime();return Math.max(0,e.end-t)/(e.end-e.start)*100},j=function(e){for(let n of Object.keys(e)){const r=e[n];if(e[n+"isDefaultValue"])continue;const i=`#${t[n]}`;if("boolean"==typeof r){if(r){$(i).addClass("toggled");continue}$(i).removeClass("toggled")}else $(i).val(r)}},R="elem_"+E(15),U="elem_"+E(15),F="elem_"+E(15),B="elem_"+E(15),z="elem_"+E(15),q="elem_"+E(15),K="elem_"+E(15),V="elem_"+E(15),G="elem_"+E(15),W="elem_"+E(15),H="elem_"+E(15),J="elem_"+E(15),Y="elem_"+E(15),Z="elem_"+E(15),X="elem_"+E(15),Q="elem_"+E(15),ee="elem_"+E(15),te="elem_"+E(15),ne="elem_"+E(15),re="elem_"+E(15),ie="elem_"+E(15),oe="elem_"+E(15),se="elem_"+E(15),ae="elem_"+E(15),ue="elem_"+E(15),ce="elem_"+E(15),le="elem_"+E(15),de="elem_"+E(15),fe="elem_"+E(15),pe="elem_"+E(15),he="elem_"+E(15),ve="elem_"+E(15),ge="elem_"+E(15),ye="elem_"+E(15),me="elem_"+E(15),be="elem_"+E(15),we="elem_"+E(15),_e="elem_"+E(15),Se="elem_"+E(15),Ee="elem_"+E(15),Ce="elem_"+E(15),Ae="elem_"+E(15),Oe="elem_"+E(15),Ie="elem_"+E(15),xe="elem_"+E(15),Te="elem_"+E(15),Pe="elem_"+E(15),ke="elem_"+E(15),De="elem_"+E(15),Ne="elem_"+E(15),Me="elem_"+E(15),Le="elem_"+E(15),je="elem_"+E(15),Re="elem_"+E(15),Ue="elem_"+E(15),Fe="elem_"+E(15),Be="elem_"+E(15),ze="elem_"+E(15),qe="elem_"+E(15),Ke="elem_"+E(15),$e="elem_"+E(15),Ve="elem_"+E(15),Ge="elem_"+E(15),We="elem_"+E(15),He="elem_"+E(15),Je="elem_"+E(15),Ye="elem_"+E(15),Ze="elem_"+E(15),Xe="elem_"+E(15),Qe="elem_"+E(15),et="elem_"+E(15),tt="elem_"+E(15),nt="elem_"+E(15),rt="elem_"+E(15),it="elem_"+E(15),ot="elem_"+E(15),st="elem_"+E(15),at="elem_"+E(15),ut="elem_"+E(15),ct="elem_"+E(15),lt="elem_"+E(15),dt="elem_"+E(15),ft="elem_"+E(15),pt="elem_"+E(15),ht="elem_"+E(15),vt="elem_"+E(15),gt="elem_"+E(15),yt="elem_"+E(15),mt="elem_"+E(15),bt="elem_"+E(15),wt="elem_"+E(15),_t="elem_"+E(15),St="elem_"+E(15),Et="elem_"+E(15),Ct="elem_"+E(15),At="elem_"+E(15),Ot="elem_"+E(15),It="elem_"+E(15),xt="elem_"+E(15),Tt="elem_"+E(15),Pt="elem_"+E(15),kt=E(15),Dt="elem_"+E(15),Nt="elem_"+E(15),Mt="elem_"+E(15),Lt="elem_"+E(15),jt="elem_"+E(15),Rt="elem_"+E(15),Ut="elem_"+E(15),Ft="elem_"+E(15);y("sessionStats",{soldItems:"-",unsoldItems:"-",activeTransfers:"-",availableItems:"-",coins:"-",coinsNumber:0,previousPause:0,searchCount:0,profit:0,transactions:[],searchPerMinuteCount:0});const Bt=()=>{const e=L(m("searchInterval")),t=m("sessionStats");$("#"+Me).html(t.searchCount),$("#"+ot).html(t.profit),$("#"+Le).html(t.coins),$("#"+De).css("width",e),qt()},zt=()=>{const e=L(m("searchInterval")),t=m("sessionStats");$("#"+De).css("width",e),$("#"+Ne).css("width",e),$("#"+Le).html(t.coins),$("#"+Me).html(t.searchCount),$("#"+Re).html(t.soldItems),$("#"+Ue).html(t.unsoldItems),$("#"+Fe).html(t.availableItems),$("#"+Be).html(t.activeTransfers),$("#"+ot).html(t.profit),qt(),t.unsoldItems?$("#"+Ue).css("color","red"):$("#"+Ue).css("color",""),t.availableItems?$("#"+Fe).css("color","orange"):$("#"+Fe).css("color","")},qt=()=>{const e=m("botStartTime");if(e&&m("autoBuyerActive")){const t=Math.abs(new Date-e)/1e3,n=Math.floor(t/60/60%24),r=Math.floor(t/60%60),i=Math.floor(t%60),o=(n<10?"0":"")+n+":"+(r<10?"0":"")+r+":"+(i<10?"0":"")+i;$("#"+Et).html(o),Kt("runningTime",o)}},Kt=(e,t)=>{const n=m("sessionStats");n[e]=t,y("sessionStats",n)},$t=e=>m("sessionStats")[e]||0,Vt=function(e,t,n){const r=new UTStandardButtonControl;if(r.init(),r.addTarget(r,t,EventType.TAP),r.setText(e),n){const e=n.split(" ");for(let t of e)r.getRootElement().classList.add(t)}return r},Gt=()=>{const e=$("#"+_e);let t=`自动秒卡 准备就绪 ${"["+(new Date).toLocaleTimeString()+"] "}\n`;e.val(t)};let Wt=new Set;const Ht=(e,t,n,r,i=!1)=>{const o=m(t)||{};"number"===r&&(n=parseInt(n)),o[e]=n||null,o[e+"isDefaultValue"]=i,y(t,o)},Jt=(e,t,n,r,i,o="number",s=".*",a="buyer-settings-field",u=null)=>{const c=Object.keys(n)[0];return t&&(u&&u(t),Ht(c,i,t,o,!0)),Wt.has(c)||($(document).on("input",`#${n[c]}`,({target:{value:e}})=>{u&&u(e),Ht(c,i,e||t,o,!e)}),Wt.add(c)),`<div class="price-filter ${a}">\n       <div class="info">\n           <span class="secondary label">${e} :<br/><small>${r}</small></span>\n       </div>\n       <div class="buttonInfo">\n           <div class="inputBox">\n               <input pattern="${s}" type="${o}" class="numericInput" id='${n[c]}' placeholder=${t}>\n           </div>\n       </div>\n    </div>`};let Yt=new Set;const Zt=(e,t,n,r,i="buyer-settings-field",o=null)=>{const s=Object.keys(t)[0];return Yt.has(s)||($(document).on("click touchend",`#${t[s]}`,e=>{!o&&((e,t,n)=>{const r=m(t)||{};r[e]?(r[e]=!1,$(n.currentTarget).removeClass("toggled")):(r[e]=!0,$(n.currentTarget).addClass("toggled")),y(t,r)})(s,r,e),o&&o(e)}),Yt.add(s)),`\n    <div class="price-filter  ${i}">\n        <div class="ut-toggle-cell-view">\n           <span class="ut-toggle-cell-view--label">${e} <br/><small>${n}</small></span>\n             <div id='${t[s]}' class="ut-toggle-control">\n               <div class="ut-toggle-control--track">\n              </div>\n              <div class= "ut-toggle-control--grip" >\n          </div> \n           </div> \n       </div>\n    </div> `},Xt=function(){_();return`<div class='buyer-settings-wrapper buy-settings-view'>\n      ${Jt('购买价格<font color="red">（必须填写）</font>',"",{idAbBuyPrice:B},"<br/>","BuyerSettings")}\n     </div>\n    `};$(document).on("keyup","#"+W,function({target:{value:e}}){Qt(e)});const Qt=e=>{const t=parseInt(e);if(isNaN(t))return void $("#"+ke).html(0);const n=(e-e/100*5).toLocaleString();$("#"+ke).html(n)},en=function(){_();return""},tn=function(){return""},nn=function(){return""};let rn=new Set;const on=(e,t,n,r)=>(rn.has(e)||(sn(e,n),rn.add(e)),`<button class="btn-standard ${r}" id="${e}">${t}</button>`),sn=(e,t)=>{$(document).on({mouseenter:function(){$(this).addClass("hover")},mouseleave:function(){$(this).removeClass("hover")},click:function(){t()},touchenter:function(){$(this).addClass("hover")},touchleave:function(){$(this).removeClass("hover")},touchend:function(){t()}},`#${e}`)},an=function(){return`<div style='display : none' class='buyer-settings-wrapper notification-settings-view'> \n ${u?"":`${Jt("Discord Bot 令牌","",{idDiscordToken:me},"你的 Discord Bot 令牌","CommonSettings","text")}\n  ${Jt("Discord 频道 ID","",{idDiscordChannelId:be},"你的 Discord 频道 ID","CommonSettings","text")}\n  ${Jt("Discord WebHook 网址","",{idWebHookUrl:Dt},"你的 Discord 频道 Webhook 网址","CommonSettings","text")}\n  ${Jt("Fut 市场警报通知令牌","",{idFUTMarketAlertToken:we},"你的 FUT 市场警报程序令牌","CommonSettings","text")}\n  ${Zt("发送清单通知",{idAbSendListingNotificationToggle:pe},"","CommonSettings")}`}\n  ${Jt("通知类型","",{idNotificationType:ye},"A表示所有通知，B表示购买通知，L表示丢失通知","CommonSettings","text")}\n  ${Zt("发送通知",{idAbMessageNotificationToggle:de},"","CommonSettings")}\n   ${u?"":`${Zt("声音通知",{idAbSoundToggle:he},"","CommonSettings")}\n  <audio id='${Ve}' hidden>\n    <source src="https://notificationsounds.com/storage/sounds/file-sounds-869-coins.ogg" type="audio/ogg">\n    <source src="https://notificationsounds.com/storage/sounds/file-sounds-869-coins.mp3" type="audio/mpeg">\n      "Your browser does not support the audio element"\n  </audio>\n  <audio id='${Ge}' hidden>\n    <source src="https://notificationsounds.com/storage/sounds/file-sounds-897-alarm-frenzy.ogg" type="audio/ogg">\n    <source src="https://notificationsounds.com/storage/sounds/file-sounds-897-alarm-frenzy.mp3" type="audio/mpeg">\n      "Your browser does not support the audio element"\n  </audio>\n  <audio id='${Nt}' hidden>\n    <source src="https://freesound.org/data/previews/220/220763_4104696-lq.ogg" type="audio/ogg">\n    <source src="https://freesound.org/data/previews/220/220763_4104696-lq.mp3" type="audio/mpeg">\n      "Your browser does not support the audio element"\n  </audio> `}\n     ${Zt("使用自定义 Discord Webhook 名称",{idAbCustomDiscordNameNotificationToggle:fe},"","CommonSettings")}\n   <div class="btn-test-notification buyer-settings-field">\n   ${on(Ie,"测试通知",()=>Fn("Test Notification Message",!0,void 0,!0),"call-to-action")}\n   </div>\n  `},un=function(){return`<div style='display : none' class='buyer-settings-wrapper common-settings-view'>\n  ${Jt("用于停止程序的错误码 (csv)","",{idAbStopErrorCode:qe},"(例如: 412,421,521)","CommonSettings","text","^\\d+(,\\d+)*$")}\n  ${Jt("错误码将出现的次数",3,{idAbStopErrorCodeCount:Ke},"<br />","CommonSettings")}\n  ${Jt("在以下之后恢复程序","",{idAbResumeAfterErrorOccured:_t},"(S 表示秒, M 表示分钟, H 表示小时 例如: 0-0S)","CommonSettings","text","\\d+-\\d+[H|M|S|h|m|s]$")}\n  ${Zt("自动清除日志",{idAutoClearLog:Xe},"(每2分钟自动清除日志)","CommonSettings")}\n  ${Zt("自动清除过期项目",{idAutoClearExpired:ht},"(自动清除转移目标中的过期项目)","CommonSettings")}\n  ${Zt("使用 Futwiz 价格",{idAbUseFutWiz:Rt},"(使用 Futwiz 价格 购买/出售 卡片)","CommonSettings")}\n  </div>`},cn=function(e,t){let n=!1;return $(`${e} option`).each(function(){if(this.value===t)return n=!0,!1}),n||$(e).append($("<option></option>").attr("value",t).text(t)),n},ln=function(){const e=$(`#${F}`).val()||[];e.length?y("selectedFilters",e):y("selectedFilters",[])};let dn;$(document).on({change:()=>{const e=$(`#${At}`).val()||"buy",t=m("BuyerSettings")||{};t.idAbSortBy=e,y("BuyerSettings",t)}},`#${At}`);const fn=function(){const e=$(`<div style='display : none' class='buyer-settings-wrapper results-filter-view'>\n    <div class="place-holder">\n    </div>\n    ${Jt("随机最小出价的最大值",1e3,{idAbRandMinBidInput:ne},"","BuyerSettings")}\n    ${Zt("确认使用",{idAbRandMinBidToggle:oe},"","BuyerSettings")}\n    ${Jt("随机最小购买的最大值",1e3,{idAbRandMinBuyInput:re},"","BuyerSettings")}\n    ${Zt("确认使用",{idAbRandMinBuyToggle:ie},"","BuyerSettings")}\n    </div>`),t=e.find(".place-holder");return function(){dn=new UTPlayerSearchControl;const e=`#${lt}`,t=$(`\n            <div style="display: none;" class="price-filter buyer-settings-field">\n              <div class="info">\n               <span class="secondary label">\n                  <button id=${Pt} style="font-size:16px" class="flat camel-case">Players List</button><br/>\n                </span>\n              </div>\n              <div class="ignore-players displayCenterFlx">\n                ${on(ut,"+",()=>{const t=`${dn._playerNameInput.value}(${dn.selected.rating})`,n=cn(e,t);if($(`${e} option[value="${t}"]`).attr("selected",!0),!n){const e=m("BuyerSettings")||{},n=e.idAddIgnorePlayersList||[];n.push({id:dn.selected.id,displayName:t}),e.idAddIgnorePlayersList=n,y("BuyerSettings",e)}},"btn-standard filterSync action-icons")}                \n                </div>\n              </div>\n              <div style="display: none;" class="price-filter buyer-settings-field">\n                <div class="info">\n                <span class="secondary label">\n                  <button id=${Pt} style="font-size:16px" class="flat camel-case">Remove from Players List</button><br/>\n                </span>\n                </div>\n                <div class="displayCenterFlx">\n                  <select style="width:90%;height: 3rem;font-size: 1.5rem;" class="filter-header-settings" id=${lt}>\n                    <option selected="true" disabled>Players List</option>                            \n                  </select>\n                  ${on(ct,"❌",()=>{const t=$(`${e} option`).filter(":selected").val();if("Ignored Players List"!=t){$(`${e} option[value="${t}"]`).remove(),$(`${e}`).prop("selectedIndex",0);const n=m("BuyerSettings")||{};let r=n.idAddIgnorePlayersList||[];r=r.filter(({displayName:e})=>e!=t),n.idAddIgnorePlayersList=r,y("BuyerSettings",n)}},"btn-standard filterSync font15 action-icons")}\n                </div>\n              </div>              \n              `);return $(dn.__root).insertBefore(t.find(`#${ut}`)),dn.init(),dn._playerNameInput.setPlaceholder("Search Players"),t}().insertAfter(t),e};$(document).on({touchend:function(){$(`#${ft}`).trigger("click")}},`#${ft}`);const pn=async()=>{m("filters")||y("filters",await h()||{});let e=m("filters");return e=Object.keys(e).sort().reduce((t,n)=>(t[n]=e[n],t),{}),e};$(document).on({change:ln,click:ln,touchend:ln},`#${F}`);const hn=(e,t)=>{let n=m(t);return n?(n=!1,$(e.currentTarget).removeClass("toggled")):(n=!0,$(e.currentTarget).addClass("toggled")),y(t,n),n},vn=async function(){return m("runSequentially")&&(y("runSequentially",!1),setTimeout(()=>{$(`#${at}`).click()})),""},gn=async function(e){const t=this,n=e?"transfer":"";$(document).off("change",`#${R}${n}`),$(document).on({change:function(){const r=$(`#${R}${n} option`).filter(":selected").val();Mn.call(t,r,e)}},`#${R}${n}`);const r=$(`<div style="width:100%;display: flex;flex-direction: column;">\n            ${isPhone()&&!e?Zt("Runner Mode",{idAbToggleRunner:mt},"","MisSettings","runner",e=>{const t=hn(e,"runnerToggle");$(".auto-buyer").toggleClass("displayNone"),t?$(".filter-place").append($(`#${F}`)):$(".teleporter").append($(`#${F}`))}):""}\n            ${e?"":`<div id=${Tt} class="btn-report"></div>`}         \n            <div class="price-filter buyer-settings-field multiple-filter filter-place">\n            </div> \n            <div class="button-container btn-filters">\n                 <select class="filter-header-settings" id='${R}${n}'>\n                    <option selected="true" disabled>选择筛选器加载</option>\n                    ${e?"":'<option value="_default">_DEFAULT</option>'}  \n                    ${Object.keys(await pn()).map(e=>`<option value="${e}">${e}</option>`)}                    \n                 </select>                 \n             </div> \n               ${e?"":`<div id=${xt} style="margin-top: 1%;" class="button-container btn-filters"></div>`}\n             </div>`);return!e&&yn.call(this,r,t),r},yn=function(e,t){const n=e.find(`#${xt}`);e.find(`#${Tt}`);n.append(Vt("删除筛选器",()=>Ln.call(t),"call-to-action btn-delete-filter").__root),n.append(Vt("保存筛选器",function(){Dn.call(this,t)},"call-to-action btn-save-filter").__root)},mn=new Map;let bn,wn;mn.set(0,{label:"购买设置",selector:".buy-settings-view"});const _n=function(){return wn=new EAFilterBarView,mn.forEach((e,t)=>{wn.addTab(t,e.label)}),wn.setActiveTab(0),wn.layoutSubviews(),wn.addTarget(this,On,EventType.TAP),wn.__root.style="margin-top: 20px;",bn=$(wn.__root),bn.find(".menu-container").css("overflow-x","auto"),Cn(!0),wn},Sn=async function(){An(),xn(),await Cn();const e=m("AutoBuyerInstance");UTMarketSearchFiltersViewController.prototype._eResetSelected.call(e)},En=async e=>{let t=await h("CommonSettings");if(t=JSON.parse(t.CommonSettings||"{}"),!$.isEmptyObject(t)){const n=e?m("CommonSettings"):{};y("CommonSettings",Object.assign({},n,t))}},Cn=async function(e){wn.setActiveTab(0),bn.append(Xt.call(this)),bn.append(en.call(this)),bn.append(fn.call(this)),bn.append(tn.call(this));const t=await vn.call(this);bn.append(t),bn.append(nn.call(this)),bn.append(an.call(this)),bn.append(un.call(this)),$(".menu-container").animate({scrollLeft:0}),setTimeout(async()=>{const t=m("selectedFilters")||[],{idAbSortBy:n}=m("BuyerSettings")||{};n&&$(`${At} option[value='${n}']`).prop("selected","selected"),$.each(t,function(e,t){$(".multiselect-filter option[value='"+t+"']").prop("selected","selected")}),e&&await En()})},An=()=>{mn.forEach((e,t)=>{$(e.selector).remove()}),dn.destroy(),dn=null},On=function(e,t,n){In();const r=mn.get(n.index).selector;$(r).css("display","")},In=()=>{mn.forEach((e,t)=>{$(e.selector).css("display","none")})},xn=()=>{y("currentFilter",null),y("BuyerSettings",{}),y("currentFilter",{})},Tn=()=>{document.querySelectorAll(":invalid").length&&Rn("发现具有无效值的设置，请修复这些值，以便按预期工作",UINotificationType.NEGATIVE)},Pn=`#${R}`,kn=`#${F}`,Dn=function(e){const t=this;$(t).addClass("active");let n=b(!0),r=m("CommonSettings");setTimeout(function(){let i={};const o=e._viewmodel;i.searchCriteria={criteria:o.searchCriteria,playerData:o.playerData,buyerSettings:n};let s=$(`${Pn} option`).filter(":selected").val();"选择筛选器加载"===s&&(s=void 0);let a=prompt("输入此筛选器的名称",s);if(Tn(),a){if("_DEFAULT"===a.toLocaleUpperCase())return Rn("不能覆盖 _DEFAULT 筛选器",UINotificationType.NEGATIVE);Nn(a,i),v("CommonSettings",JSON.stringify(r),"CommonSettings"),y("currentFilter",a),$(t).removeClass("active"),Rn("更改保存成功")}else $(t).removeClass("active"),Rn("需要筛选器名称",UINotificationType.NEGATIVE)},200)},Nn=(e,t)=>{e=e.toUpperCase(),cn(Pn,e),cn(`#${F}`,e),$(`${Pn} option[value="${e}"]`).attr("selected",!0),m("filters")[e]=JSON.stringify(t),v(e,m("filters")[e])},Mn=async function(e,t){if("_default"===e)return(()=>{y("BuyerSettings",Object.assign({},s)),y("CommonSettings",Object.assign({},a));const e=b();j(e)})(),!1;m("runnerToggle")||t||await Sn();const n=m("filters")[e];if(!n)return!1;let{searchCriteria:{criteria:r,playerData:i,buyerSettings:o}}=JSON.parse(n);if(this._viewmodel.resetSearch(),this.viewDidAppear(),this._viewmodel.playerData={},Object.assign(this._viewmodel.searchCriteria,r),Object.assign(this._viewmodel.playerData,i),$.isEmptyObject(this._viewmodel.playerData)&&(this._viewmodel.playerData=null),this.viewDidAppear(),t)return;await En();const u=m("CommonSettings")||{};if(y("BuyerSettings",o),y("currentFilter",e),o=Object.assign({},o,u),j(o),o.idAddIgnorePlayersList&&o.idAddIgnorePlayersList.length)for(let{displayName:e}of o.idAddIgnorePlayersList)cn(`#${lt}`,e);return Tn(),!0},Ln=async function(){const e=$(`${Pn} option`).filter(":selected").val();if("_DEFAULT"===e.toLocaleUpperCase())return Rn("不能删除 _DEFAULT 筛选器",UINotificationType.NEGATIVE);"选择筛选器加载"!=e&&($(`${Pn} option[value="${e}"]`).remove(),$(`${Pn}`).prop("selectedIndex",0),await Sn(),this.viewDidAppear(),delete m("filters")[e],$(`${kn} option[value="${e}"]`).remove(),ln(),(e=>{d(e)})(e),Rn("更改保存成功"))};let jn=null;const Rn=function(e,t){t=t||UINotificationType.POSITIVE,services.Notification.queue([e,t])},Un=e=>{services.PIN.sendData(PINEventType.PAGE_VIEW,{type:PIN_PAGEVIEW_EVT_TYPE,pgid:e})},Fn=(e,t,n,r)=>{const i=b();(i.idAbMessageNotificationToggle||r)&&(u?Bn(e):Kn(i,t,e,n),r&&Rn("测试通知发送"))},Bn=e=>{window.ReactNativeWebView.postMessage(JSON.stringify({type:"Notification",message:e}))},zn=(e,t,n,r)=>{let i={embeds:[{description:e,color:r||(t?2555648:16711680),footer:{text:`Auto Buyer Alert - ${(new Date).toLocaleTimeString()} - Balance: ${services.User.getUser().coins.amount}`,icon_url:"https://cdn.discordapp.com/icons/768336764447621122/9de9ea0a7c6239e2f2fbfbd716189e79.webp"}}],avatar_url:"https://cdn.discordapp.com/icons/768336764447621122/9de9ea0a7c6239e2f2fbfbd716189e79.webp",username:"Fut Market Alert"};return n&&delete i.username,i},qn=e=>{const{embeds:[t]}=e;return(new Discord.RichEmbed).setColor(t.color).setDescription(t.description).setFooter(t.footer.text,t.footer.icon_url)},Kn=(e,t,n,r)=>{const i=e.idTelegramBotToken,o=e.idTelegramChatId,s=e.idWebHookUrl,a=e.idDiscordChannelId,u=e.idFUTMarketAlertToken,c=e.idAbCustomDiscordNameNotificationToggle;$n(i,o,n),Gn(a,t,n,c,r),Vn(s,t,n,c,r),Hn(u,n)},$n=(e,t,n)=>{if(e&&t){const r=`https://api.telegram.org/bot${e}/sendMessage?chat_id=${t}&parse_mode=Markdown&text=${n}`,i=new XMLHttpRequest;i.open("GET",r,!0),i.send()}},Vn=(e,t,n,r,i)=>{e&&fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(zn(n,t,r,i))})},Gn=(e,t,n,r,i)=>{if(e)if(jn){const o=jn.channels.get(e);o&&o.send(qn(zn(n,t,r,i)))}else jn=Wn(()=>{setTimeout(()=>{if(jn){const o=jn.channels.get(e);o&&o.send(qn(zn(n,t,r,i)))}},200)})},Wn=e=>{const t=b(),n=new Discord.Client;let r=t.idDiscordToken;if(!r)return null;try{n.login(r),n.on("ready",function(){e&&e()}),n.on("message",async function(e){if(e.author.id!=n.user.id)if(/start/i.test(e.content)){const t=m("AutoBuyerInstance");zr.call(t),e.channel.send(qn(zn("程序启动成功",!0)))}else if(/stop/i.test(e.content))qr(),e.channel.send(qn(zn("程序停止成功",!0)));else if(/runfilter/i.test(e.content)){let t=e.content.split("-")[1];if(t){t=t.toUpperCase(),qr(),y("selectedFilters",[]);const n=m("AutoBuyerInstance");if(!await Mn.call(n,t))return void e.channel.send(qn(zn(`unable to find filter${t}`,!1)));zr.call(n),e.channel.send(qn(zn(`${t} started successfully`,!0)))}else e.channel.send(qn(zn("Unable to find filter name",!1)))}})}catch(e){}return n},Hn=(e,t)=>{e&&fetch("https://exp.host/--/api/v2/push/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify([{to:`ExponentPushToken[${e}]`,title:t,body:t}])})},Jn=function(e){Fn("验证码，请解决这个问题以便程序再次运行.",!1),e?window.location.href="about:blank":Yn("[!!!] 验证码被触发，程序自动停止",_e)},Yn=function(e,t){setTimeout(()=>{var n=$("#"+t);e="["+(new Date).toLocaleTimeString()+"] "+e+"\n",n.val(n.val()+e),n[0]&&n.scrollTop(n[0].scrollHeight)},50)},Zn=()=>{$("#"+_e).val(""),Gt()};setInterval(()=>{const e=b();e&&e.idAutoClearLog&&Zn()},12e4);const Xn=()=>{let e=m("userPlatform");return e||(services.User.getUser().getSelectedPersona().isPC?(y("userPlatform","pc"),"pc"):(y("userPlatform","ps"),"ps"))},Qn=()=>new Promise(e=>{services.User.requestCurrencies().observe(void 0,function(t,n){e()})});let er,tr;const nr=function(e){if(!m("autoBuyerActive"))return;const t=1e3*I(e.idAbPauseFor);tr=tr||x(e.idAbCycleAmount);const{searchCount:n,previousPause:r}=m("sessionStats");return!n||(n-r)%tr?void 0:(Kt("previousPause",n),Qn(),qr(!0),setTimeout(()=>{tr=x(e.idAbCycleAmount),zr.call(this,!0)},t))},rr=async function(){const e=m("selectedFilters"),t=m("fiterSearchCount"),n=m("currentFilterCount");if(!e||!e.length||t>n)return w("currentFilterCount"),!1
;y("currentFilterCount",1),y("currentPage",1);const r=m("currentFilterIndex")||0;let i=m("runSequentially")?r%e.length:k(0,e.length-1);y("currentFilterIndex",i+1);let o=e[i];return await Mn.call(this,o),Yn(`运行筛选器 ${o}`,_e),!0},ir=async e=>{u?or(e):sr(e)},or=e=>{y(e.identifier,e.onload),delete e.onload,window.ReactNativeWebView.postMessage(JSON.stringify({type:"fetchFromExternalAB",payload:{options:e}}))},sr=e=>{GM_xmlhttpRequest({method:e.method,url:e.url,onload:e.onload,headers:{"User-Agent":kt}})},ar=(e,t,n)=>new Promise((r,i)=>{ir({method:t,identifier:n,url:e,onload:e=>200!==e.status?i():r(e.response)})}),ur=async(e,t)=>{try{const n=await cr(e),r=Xn();if(!n)return;const i=await ar(`https://www.futwiz.com/en/app/sold23/${n[0].lineid}/console`,"GET",`${e.definitionId}_fetchFutWizPlayerPrices`),o=JSON.parse(i);let s=o.prices[r].bin;"ps"!==r||s||(s=o.prices.xb.bin);const a=parseInt(s.replace(/[,.]/g,"")),u=`${e.definitionId}_futwiz_price`,c={expiryTimeStamp:new Date(Date.now()+9e5),price:a};y(u,c),t.set(u,a)}catch(e){console.log(e)}},cr=e=>new Promise((t,n)=>{const r=TextUtils.stripSpecialCharacters("---"!==e._staticData.knownAs?e._staticData.knownAs:e._staticData.name);ir({url:`https://www.futwiz.com/en/searches/player23/${r}`,method:"GET",identifier:`${e.definitionId}_getFutWizPlayerUrl`,onload:n=>{if(200!==n.status)return t();const r=JSON.parse(n.response);if(!r)return t();let i=r.filter(t=>parseInt(t.rating)===e.rating);r&&!i.length&&(i=r),i&&i.length>1&&(i=i.filter(t=>t.rare===e.rareflag.toString()&&t.club===e.teamId+"")),t(i)}})}),lr=async e=>{const t=new Map,n=new Map;let r=[];for(const r of e){if(!r.definitionId)continue;const e=m(`${r.definitionId}_futwiz_price`);e?t.set(`${r.definitionId}_futwiz_price`,e.price):r.isPlayer()&&n.set(r.definitionId,r)}if(n.size)for(const e of n.values())r.push(ur(e,t));return await Promise.all(r),t},dr=e=>{const t=services.Localization;return t?e.isManagerContract()?t.localize("card.title.managercontracts"):e.isPlayerContract()?t.localize("card.title.playercontracts"):e.isStyleModifier()?UTLocalizationUtil.playStyleIdToName(e.subtype,t):e.isPlayerPositionModifier()?t.localize("card.desc.training.pos."+e._staticData.trainPosFrom+"_"+e._staticData.trainPosTo).replace(" >> ","->"):e._staticData.name:""},fr=new Set(["Position","Chemistry Style"]),pr=async(e,t)=>{const n=Array.from(e),r=Xn();for(;n.length;){const i=n.splice(0,30),o=i.shift();if(!o)continue;const s=i.join(",");try{const n=await ar(`https://www.futbin.com/23/playerPrices?player=${o}&rids=${s}`,"GET",`${Math.floor(+new Date)}_fetchPlayerPrices`),a=JSON.parse(n);for(const e of[o,...i]){const n=a[e].prices[r].LCPrice;if(!n)continue;const i=parseInt(n.replace(/[,.]/g,"")),o=`${e}_futbin_price`,s={expiryTimeStamp:new Date(Date.now()+9e5),price:i};y(o,s),t.set(o,i)}}catch(e){console.log(e)}}},hr=async(e,t)=>{const n=Xn(),r="ps"===n?"PS":"xbox"===n?"XB":"PC",i=Array.from(e.keys());for(const n of i)try{const i=n.split(" ")[0],o=await ar(`https://www.futbin.org/futbin/api/fetchConsumables?category=${i}&platformtype=${r}`,"GET",`${Math.floor(+new Date)}_fetchConsumablesPrices`),s=JSON.parse(o).data.reduce((e,t)=>(e.set(t.SubType.toUpperCase(),t.LCPrice),e),new Map),a=e.get(n)||[];for(const{definitionId:e,subType:n}of a){let r=s.get(n);const i=`${e}_futbin_price`;if(r){const e={expiryTimeStamp:new Date(Date.now()+9e5),price:r};y(i,e),t.set(i,r)}}}catch(e){console.log(e)}},vr=async e=>{const t=new Map,n=new Set,r=new Map;for(const i of e){if(!i.definitionId)continue;const e=m(`${i.definitionId}_futbin_price`);e?t.set(`${i.definitionId}_futbin_price`,e.price):i.isPlayer()?n.add(i.definitionId):i.isTraining()&&fr.has(i._staticData.name)&&(r.has(i._staticData.name)||r.set(i._staticData.name,[]),r.get(i._staticData.name).push({definitionId:i.definitionId,subType:dr(i)}))}const i=[];return n.size&&i.push(pr(n,t)),r.size&&i.push(hr(r,t)),await Promise.all(i),t},gr=async e=>{const t=_();return"FUTWIZ"===t?lr(e):"FUTBIN"===t?vr(e):void 0},yr=e=>{let t=JSUtils.find(UTCurrencyInputControl.PRICE_TIERS,function(t){return e>=t.min});var n=Math.round(e/t.inc)*t.inc;return Math.max(Math.min(n,14999e3),0)},mr=e=>e<=1e3?e-50:e>1e3&&e<=1e4?e-100:e>1e4&&e<=5e4?e-250:e>5e4&&e<=1e5?e-500:e-1e3,br=e=>e<1e3?e+50:e>=1e3&&e<1e4?e+100:e>=1e4&&e<5e4?e+250:e>=5e4&&e<1e5?e+500:e+1e3,wr=async(e,t,n)=>{let r;try{const i=n.definitionId,o=_();if("player"!==n.type)return r;await gr([n]);const s=m(`${i}_${o.toLowerCase()}_price`);if(s&&s.price){r=s.price;const i=x(e.idSellFutBinPercent)||100;let a=r*i/100;await _r(n),n.hasPriceLimits()&&(a=yr(Math.min(n._itemPriceLimits.maximum,Math.max(n._itemPriceLimits.minimum,a))),a===n._itemPriceLimits.minimum&&(a=br(a))),a=yr(a),Yn(`= ${o} price for ${t}: ${r}: ${i}% of sale price: ${a}`,_e),r=a}else r=null,Yn(`= Unable to get ${o} price for ${t}`,_e)}catch(e){e=e.statusText||e.status||e,r=null,Yn(`= Unable to get Futbin price for ${t}, err: ${e||"error occured"}`,_e)}return r},_r=async e=>new Promise(t=>{e.hasPriceLimits()?t():services.Item.requestMarketData(e).observe(void 0,async function(e,n){t()})}),Sr=e=>{const t=m("sessionStats");t.profit+=e,y("sessionStats",t)},Er=e=>{const t=m("sessionStats");t.transactions=t.transactions||[],t.transactions.push(e),y("sessionStats",t)},Cr=()=>{const{coinsNumber:e,searchCount:t,profit:n,runningTime:r,transactions:i}=m("sessionStats");let o="Available Coins,Search Count,Profit,Running Time,BIN Won Count,BID Won Count,Loss Count\n";o+=`${e||""},${t||""},${n||0},${r||""},${m("winCount")||0},${m("bidCount")||0},${m("lossCount")||0}\n\n`,o+="Transactions\n",o+=i.map(e=>`${e}\n`).join(""),((e,t)=>{u?A(e,t):O(e,t)})(o,"Stats")};setInterval(()=>{const e=m("sessionStats");e.searchPerMinuteCount=0,y("sessionStats",e)},55e3);const Ar=new Map,Or=(e,t,n,r,i,s)=>{const a=b();return new Promise(u=>{services.Item.bid(e,n).observe(void 0,async function(c,l){let d=N(n.toString(),6);const f=a.idNotificationType||"";if(l.success){i&&(w("purchasedCardCount"),M("cardWon"));const o=a.idSellRatingThreshold;let u=parseInt(e.rating);const c=!o||u<=o,l=a.idSellFutBinPrice;c&&l&&i&&(r=await wr(a,t,e)),a.idSellCheckBuyPrice&&n>95*r/100&&(r=-1);const p=r&&!isNaN(r)&&c,h=(a.idAbQuickSell?e.discardValue:.95*r)-n;if(i){const i=w("winCount");if(Er(`[${(new Date).toLocaleTimeString()}] ${t.trim()} buy success - Price : ${n}`),Yn(`W: ${i} ${t} 购买成功添加到出售队列`,_e),!a.idAbDontMoveWon){const n=m("sellQueue")||[];n.push({player:e,playerName:t,sellPrice:r,shouldList:p,profit:h}),y("sellQueue",n)}}else{const e=w("bidCount");Er(`[${(new Date).toLocaleTimeString()}] ${t.trim()} 出价成功 - 价格 : ${n}`),Yn(`B:${e} ${t} 出价成功`,_e);const r=m("currentFilter")||"default";if(r){const e=m("filterBidItems")||new Map;e.has(r)?e.get(r).add(s):e.set(r,new Set([s])),y("filterBidItems",e)}}(f.includes("B")||"A"===f)&&Fn("| "+t.trim()+" | "+d.trim()+` | ${i?"buy":"bid"} |`,!0)}else{let e=w("lossCount");Er(`[${(new Date).toLocaleTimeString()}] ${t.trim()} 购买失败 - 价格 : ${n}`);let r=(l.error&&l.error.code||l.status)+"";if(Yn(`L: ${e} ${t} ${i?"购买":"出价"} 失败 错误: (${o[r]+"("+r+")"||0})`,_e),(f.includes("L")||"A"===f)&&Fn("| "+t.trim()+" | "+d.trim()+" | failure |",!1),a.idAbStopErrorCode){const e=new Set(a.idAbStopErrorCode.split(","));if(Ar.has(r)||Ar.set(r,{currentVal:0}),Ar.get(r).currentVal++,e.has(r)&&Ar.get(r).currentVal>=a.idAbStopErrorCodeCount&&(Yn(`[!!!] 自动停止程序 错误码 ${r} 已经出现 ${Ar.get(r).currentVal} 次\n`,_e),Ar.clear(),qr(),a.idAbResumeAfterErrorOccured)){const e=I(a.idAbResumeAfterErrorOccured);Yn(`程序将会恢复在 ${e}(s) 之后`,_e),setTimeout(()=>{zr.call(m("AutoBuyerInstance"))},1e3*e)}}}a.idAbAddBuyDelay&&await C(P(a.idAbDelayToAdd)),u()})})},Ir=new Set,xr=function(e){return Un("Transfer Targets - List View"),new Promise(t=>{services.Item.clearTransferMarketCache(),services.Item.requestWatchedItems().observe(this,function(n,r){let i=e.idAbMaxBid,o=e.idAbSellPrice,s=r.response.items.filter(function(e){return!!e._auction});if(!s.length)return t();services.Item.refreshAuctions(s).observe(this,function(n,r){services.Item.requestWatchedItems().observe(this,async function(n,r){const s=m("autoBuyerActive"),a=m("currentFilter")||"default",u=(m("filterBidItems")||new Map).get(a)||new Set,c=m("userWatchItems");if(s&&i){let t=r.response.items.filter(function(e){return"outbid"===e._auction._bidState&&(!a||u.has(e._auction.tradeId))&&!c.has(e._auction.tradeId)&&"active"===e._auction._tradeState});if(t.length){const n=t[k(0,t.length-1)];await Tr(n,i,o,e)}}const l=e.idSellFutBinPrice;if(s&&!e.idAbDontMoveWon&&(o&&!isNaN(o)||l)){let t=r.response.items.filter(function(e){return e.getAuctionData().isWon()&&(!a||u.has(e._auction.tradeId))&&!c.has(e._auction.tradeId)&&!Ir.has(e._auction.tradeId)});for(var d=0;d<t.length;d++){const n=t[d],r=e.idSellRatingThreshold;let i=parseInt(n.rating);const s=!r||i<=r;let a=N(n._staticData.name,15),u=n._auction.currentBid;s&&l&&(o=await wr(e,a,n)),e.idSellCheckBuyPrice&&u>95*o/100&&(o=-1);const c=o&&!isNaN(o)&&s;if(c&&Ir.add(n._auction.tradeId),!e.idAbDontMoveWon){const t=m("sellQueue")||[],r=(e.idAbQuickSell?n.discardValue:.95*o)-u;t.push({player:n,sellPrice:o,playerName:a,shouldList:c,profit:r}),y("sellQueue",t)}}}let f=r.response.items.filter(e=>{var t=e.getAuctionData();return t.isExpired()||t.isClosedTrade()&&!t.isWon()});e.idAutoClearExpired&&f.length&&(services.Item.untarget(f),Yn(`Found ${f.length} expired items and removed from watchlist`,_e)),services.Item.clearTransferMarketCache(),t()})})})})},Tr=async(e,t,n,r)=>{let i=e._auction,o=i.currentBid,s=i.currentBid||i.startingBid,a=N(e._staticData.name,15);const u=m("autoBuyerActive");let c=r.idAbBidExact?t:o?mr(t):t,l=r.idAbBidExact?t:o?br(s):s;u&&s<=c&&(Yn("Bidding on outbidded item -> Bidding Price :"+l,_e),await Or(e,a,l,n),r.idAbAddBuyDelay&&await C(1))},Pr=()=>{function e(t){let r={clientKey:n,taskId:t};var i=new XMLHttpRequest;i.open("POST","https://api.anti-captcha.com/getTaskResult",!0),i.setRequestHeader("Content-Type","application/json"),i.onreadystatechange=function(){if(4===i.readyState&&200===i.status){var n=JSON.parse(i.responseText);0==n.errorId?"ready"==n.status?new UTCaptchaViewModel(accessobjects.Captcha).validateToken(n.solution.token).observe(this,function(e,t){if(t.success){Yn("Captcha Solved",_e);const e=m("AutoBuyerInstance");zr.call(e)}}):setTimeout(()=>e(t),1e3):Yn("Error occured when checking captcha result : "+n.errorCode+", "+n.errorDescription,_e)}};var o=JSON.stringify(r);i.send(o)}const t=b();let n=t.idAntiCaptchKey,r=t.idProxyAddress,i=t.idProxyPort,o=t.idProxyLogin,s=t.idProxyPassword;if(!r||!i||!n)return Yn("Proxy info not filled properly",_e),void Jn(t.idAbCloseTabToggle);!function(){accessobjects.Captcha.getCaptchaData().observe(this,function(t,a){if(a.success){if(!(c=a.response.blob))return!1;let t={clientKey:n,task:{type:"FunCaptchaTask",websiteURL:"https://www.ea.com/fifa/ultimate-team/web-app/",websitePublicKey:"A4EECF77-AC87-8C8D-5754-BF882F72063B",funcaptchaApiJSSubdomain:"ea-api.arkoselabs.com",data:a.response,proxyType:"http",proxyAddress:r,proxyPort:i,proxyLogin:o,proxyPassword:s,userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/52.0.2743.116 Safari/537.36"}};var u=new XMLHttpRequest;u.open("POST","https://api.anti-captcha.com/createTask",!0),u.setRequestHeader("Content-Type","application/json"),u.onreadystatechange=function(){if(4===u.readyState&&200===u.status){var t=JSON.parse(u.responseText);0==t.errorId?e(t.taskId):Yn("Got error from Captcha API: "+t.errorCode+", "+t.errorDescription,_e)}};var c=JSON.stringify(t);return u.send(c),!0}})}()},kr=new Set,Dr=function(e){return new Promise(t=>{const n=P(e.idAbItemExpiring),r=!0,i=!0,o=e.idBuyFutBinPercent||100;let s=m("currentPage")||1;$t("searchPerMinuteCount")>15&&(e.idAbOverSearchWarning||void 0===e.idAbOverSearchWarning)&&(Yn("--------------------",_e),Yn("!!! 在最后一分钟内执行了超过15次搜索，增加了你的等待时间",_e),Yn("--------------------",_e));const a=new Set((e.idAddIgnorePlayersList||[]).map(({id:e})=>e)),u=_();let c=e.idAbMaxBid,l=e.idAbBuyPrice,d=e.idBuyFutBinPrice||e.idAbBidFutBin;if(!l&&!c&&!d)return Yn("跳过搜索 >>> (没有给购买价或出价)",_e),t();Un("Transfer Market Search"),(()=>{const e=m("sessionStats");e.searchCount++,e.searchPerMinuteCount++,y("sessionStats",e)})();let f=this._viewmodel.searchCriteria;r&&(f.minBid=yr(k(0,e.idAbRandMinBidInput))),i&&(f.minBuy=yr(k(0,e.idAbRandMinBuyInput))),services.Item.clearTransferMarketCache(),services.Item.searchTransferMarket(f,s).observe(this,async function(r,i){if(i.success){y("searchFailedCount",0);let t=!0;Yn(`找到 ${i.data.items.length} 结果, 页码 - ${s} => (最小出价: ${f.minBid} 最小购买:${f.minBuy})`,_e),i.data.items.length>0&&(Yn("--------------------",_e),1===s&&Un("转会市场结果 - 列表显示"),d&&"player"===i.data.items[0].type&&await gr(i.data.items)),i.data.items.length>e.idAbSearchResult&&(t=!1);let r=e.idAbMaxPurchases||1;e.idAbShouldSort&&(i.data.items=((e,t,n)=>{let r=e=>e._auction.buyNowPrice;return"bid"===t?r=(e=>e._auction.currentBid||e._auction.startingBid):"rating"===t?r=(e=>parseInt(e.rating)):"expires"===t&&(r=(e=>parseInt(e._auction.expires))),e.sort((e,t)=>{const i=r(e),o=r(t);return n?i-o:o-i}),e})(i.data.items,e.idAbSortBy||"buy",e.idAbSortOrder));for(let s=i.data.items.length-1;s>=0&&m("autoBuyerActive");s--){let f=i.data.items[s],v=f._auction,g=services.Localization.localizeAuctionTimeRemaining(v.expires),y=f.type,{id:b}=f._metaData||{},w=parseInt(f.rating);if(d&&"player"===y){const t=m(`${f.definitionId}_${u.toLowerCase()}_price`);if(!t||!t.price){Yn(`价格不可用 ${f._staticData.name}`,_e);continue}{const n=yr(t.price*o/100);l=n,e.idAbBidFutBin&&(c=n)}}let _=v.buyNowPrice,S=v.currentBid||v.startingBid,E=v.currentBid,C=e.idAbBidExact?c:E?mr(c):c,A=e.idAbBidExact?C:E?br(S):S,O=e.idAbSellPrice,I=e.idAbMinRating,x=e.idAbMaxRating,T=f._staticData.name;const P=!(I||x)||(h=x,(p=w)>=I&&p<=h),k=Nr(`${T}(${w}) 价格: ${_} 时间: ${g}`);if(!e.idAbIgnoreAllowToggle&&a.has(b)||e.idAbIgnoreAllowToggle&&!a.has(b)){k("(被忽略的球员)");continue}if(!t){k("(超过搜索结果阈值)");continue}if(r<1)break;if(!f.preferredPosition&&e.idAbAddFilterGK){k("(是守门员)");continue}if((f.playStyle===DEFAULT_PLAYSTYLE_ID||f.playStyle===ItemSubType.TRAINING_PLAYERSTYLE_GOALKEEPER_5)&&e.idAbAddFilterBC){k("(is a Basic Chemistry)");continue}if(!P){k("(评级不符合标准)");continue}if(kr.has(v.tradeId)){k("(缓存项目)");continue}const D=services.User.getUser().coins.amount;if(!c&&D<_||c&&D<A)k("(金币不足无法购买/出价)");else if(_<=l)k("尝试购买: "+_),r--,kr.add(v.tradeId),await Or(f,T,_,O,!0,v.tradeId);else if(c&&S<=C){if(v.expires>n){k("(等待指定的到期时间)");continue}k("尝试出价: "+A),kr.add(v.tradeId),r--,await Or(f,T,A,O,A===_,v.tradeId)}else k(l&&_>l||c&&S>C?`购买价格: ${l||C} (高于指定购买价/出价)`:"(无需任何操作)")}}else((e,t,n)=>{let r=!1;if(e.status===UtasErrorCode.CAPTCHA_REQUIRED||e.error&&e.error.code==UtasErrorCode.CAPTCHA_REQUIRED)r=!0,t?(Yn("[!!!] 验证码被触发，试图解决它",_e),Pr()):Jn(n);else{const t=w("searchFailedCount");t>=3?(r=!0,Yn(`[!!!] 由于搜索连续 ${t} 次失败，自动停止程序，请检查您是否有权限在Web应用程序中访问转会市场 ${e.status}`,_e)):Yn(`[!!!] 搜索失败 - ${e.status}`,_e)}r&&(M("capatcha"),"A"===b().idNotificationType&&Fn("自动秒卡已停止",!1),qr())})(i,e.idAbSolveCaptcha,e.idAbCloseTabToggle);var p,h;Un("Transfer Market Search"),s<e.idAbMaxSearchPage&&21===i.data.items.length?w("currentPage"):y("currentPage",1),t()})})},Nr=e=>t=>{Yn(e+" "+t,_e)},Mr=function(e,t,n){return Un("Transfer List - List View"),new Promise(r=>{n||repositories.Item.isDirty(ItemPile.TRANSFER)?services.Item.requestTransferItems().observe(this,async function(n,i){let o=i.response.items.filter(function(e){return e.getAuctionData().isSold()}).length;$t("soldItems")<o&&await Qn(),Kt("soldItems",o);const s=i.response.items.filter(function(e){return!e.getAuctionData().isSold()&&e.getAuctionData().isExpired()}).length;Kt("unsoldItems",s);const a=o>=t;s&&e&&services.Item.relistExpiredAuctions().observe(this,function(e,t){!a&&UTTransferListViewController.prototype.refreshList()});const u=i.response.items.filter(function(e){return e.getAuctionData().isSelling()}).length;Kt("activeTransfers",u);const c=i.response.items.filter(function(e){return e.getAuctionData().isInactive()}).length;Kt("availableItems",c);const l=services.User.getUser().coins.amount;Kt("coinsNumber",l),Kt("coins",l.toLocaleString()),a&&(Yn("[TRANSFER-LIST] > "+o+" item(s) sold\n",_e),UTTransferListViewController.prototype._clearSold()),r()}):r()})},Lr=function(){return{switchFilterWithContext:rr.bind(this),srchTmWithContext:Dr.bind(this),watchListWithContext:xr.bind(this),transferListWithContext:Mr.bind(this),pauseBotWithContext:nr.bind(this)}},jr=async()=>{const e=m("sellQueue")||[],t=b(),n=t.idAbSendListingNotificationToggle,r=e.length;for(r&&Yn("--------------------",_e);e.length;){const{player:r,sellPrice:i,shouldList:o,playerName:s,profit:a}=e.pop(),u=await Ur(r,i,a,o,t);Rr(i,o,a,t,s,u,n,r.discardValue),e.length&&await C(2)}r&&Yn("--------------------",_e)},Rr=(e,t,n,r,i,o,s,a)=>{const u=`${i.trim()}, ${o||(e<0?"已放入转会清单":t?"listed for: "+e+", Profit: "+n:r.idAbDontMoveWon?"":r.idAbQuickSell?"quick sold for:"+a:"已放入俱乐部")} `;Yn(u,_e),s&&Fn(u,!0)},Ur=(e,t,n,r,i)=>new Promise(o=>{if(t<0)services.Item.move(e,ItemPile.TRANSFER).observe(void 0,async function(){o()});else if(r){if(repositories.Item.isPileFull(ItemPile.TRANSFER))return o("Unable to list, transfer List if Full");Sr(n),services.Item.list(e,mr(t),t,P(i.idFutBinDuration||"1H")||3600).observe(void 0,async function(e,t){o()})}else i.idAbQuickSell?(services.Item.discard([e]),Sr(n),o()):services.Item.move(e,ItemPile.CLUB).observe(void 0,async function(e,t){o()})});let Fr=null,Br=null;const zr=async function(e){if($("#"+je).css("color","#2cbe2d").html("运行中"),m("autoBuyerActive"))return;(e=>{Rn(e?"自动秒卡已恢复":"自动秒卡已启动"),y("autoBuyerActive",!0),y("autoBuyerState","Active"),isPhone()&&$(".ut-tab-bar-item").attr("disabled",!0),e||(y("botStartTime",new Date),y("purchasedCardCount",0),y("searchFailedCount",0),y("currentPage",1))})(e);const{switchFilterWithContext:t,srchTmWithContext:n,watchListWithContext:r,transferListWithContext:i,pauseBotWithContext:o}=Lr.call(this);await t();let s=b();e&&"A"===s.idNotificationType&&Fn("自动秒卡已启动",!0),!e&&await new Promise((e,t)=>{services.Item.requestWatchedItems().observe(void 0,function(t,n){if(n.success){const e=m("filterBidItems")||new Map,t=new Set(Array.from(e.values()).flat(1).reduce((e,t)=>e.concat([...t]),[])),r=n.response.items.filter(e=>e._auction&&!t.has(e._auction.tradeId)).map(e=>e._auction.tradeId)||[];y("userWatchItems",new Set(r)),r.length&&Yn(`Found ${r.length} items in users watch list and ignored from selling`,_e)}e()})}),Un("Hub - Transfers"),await n(s),Un("Hub - Transfers"),await i(s.idAbSellToggle,s.idAbMinDeleteCount,!0);let a=!1;m("autoBuyerActive")&&(Fr=((e,t,n)=>{let r,i=!1;const o=()=>{if(i)return;const s={start:Date.now()},a=1e3*parseFloat((Math.random()*(n-t)+t).toFixed(1));s.end=s.start+a,y("searchInterval",s),r=setTimeout(()=>{e(),o()},a)};return o(),{clear(){i=!0,clearTimeout(r)}}})(async()=>{Br=o(s),(e=>{const t=m("purchasedCardCount"),n=e.idAbCardCount,r=m("botStartTime").getTime();let i=er||I(e.idAbStopAfter);er||(er=i);let o=((new Date).getTime()-r)/1e3>=i;if(o||n&&t>=n){const t=o?"时间过去":"已达到最大购买次数";Yn(`自动秒卡已停止 | ${t}`,_e),er=null,tr=null,"A"===e.idNotificationType&&Fn(`自动秒卡已停止 - ${t}`),qr()}})(s),m("autoBuyerActive")&&!a&&(a=!0,await jr(),await t(),s=b(),Un("Hub - Transfers"),await n(s),Un("Hub - Transfers"),await r(s),Un("Hub - Transfers"),await i(s.idAbSellToggle,s.idAbMinDeleteCount)),a=!1},...D(s.idAbWaitTime)))},qr=e=>{Fr&&Fr.clear(),!e&&Br&&clearTimeout(Br);const t=m("autoBuyerState");if(e&&t===r||!e&&t===i)return;y("autoBuyerActive",!1);const n=m("searchInterval")||{};y("searchInterval",{start:n.start,end:Date.now()}),e||M("finish"),isPhone()&&$(".ut-tab-bar-item").removeAttr("disabled"),y("autoBuyerState",e?r:i);const o=b();e&&"A"===o.idNotificationType&&Fn("自动秒卡已暂停",e,16705372),Rn(e?"自动秒卡已暂停":"自动秒卡已停止"),e||jr(),$("#"+je).css("color","red").html(e?"暂停":"空闲")},Kr=()=>`<div class="view-navbar-currency">\n            <span id=${Et} style="font-weight: bold;\n            margin: auto 2px;">00:00:00</span>\n            <div style="margin: auto 2px;">搜索:</div> \n            <div class="stats-progress">\n              <div id=${De} class="stats-fill"></div>\n            </div>\n            <div class="view-navbar-currency-coins ab coins">Coins: <span id=${Le}></span></div>\n            <div class="view-navbar-currency-coins ab profit">Profit: <span id=${ot}></span></div>\n            ${on(Ct,"⇩",()=>{Cr()},"filterSync download-stats")} \n          </div>`,$r=()=>`\n  <div class="view-navbar-clubinfo-data">\n    <div class="view-navbar-clubinfo-name">\n    ${on(Ct,"⇩",()=>{Cr()},"filterSync")}\n    </div>\n  </div>\n  <div class="view-navbar-clubinfo">\n    <div class="view-navbar-clubinfo-data">\n      <div class="view-navbar-clubinfo-name">\n        <span id=${Et} style="font-weight: bold;">00:00:00</span>\n      </div>\n    </div>\n  </div>\n  <div class="view-navbar-clubinfo">\n    <div class="view-navbar-clubinfo-data">\n       <div class="view-navbar-clubinfo-name">\n          <div style="float: left;">Search:</div>\n          <div class="stats-progress">\n             <div id=${De} class="stats-fill"></div>\n          </div>\n       </div>\n       <div class="view-navbar-clubinfo-name">\n          <div style="float: left;">Statistics:</div>\n          <div class="stats-progress">\n             <div id=${Ne} class="stats-fill"></div>\n          </div>     \n       </div>\n    </div>\n  </div>\n  <div class="view-navbar-currency" style="margin-left: 10px;">\n    <div class="view-navbar-currency-coins ab coins">Coins: <span  id=${Le}></span></div>\n    <div class="view-navbar-currency-coins ab profit">Profit: <span  id=${ot}></span></div>\n  </div>\n  <div class="view-navbar-clubinfo">\n    <div class="view-navbar-clubinfo-data">\n       <span class="view-navbar-clubinfo-name">Sold Items: <span id=${Re}></span></span>\n       <span class="view-navbar-clubinfo-name">Unsold Items: <span id=${Ue}></span></span>\n    </div>\n  </div>\n  <div class="view-navbar-clubinfo" style="border: none;">\n    <div class="view-navbar-clubinfo-data">\n       <span class="view-navbar-clubinfo-name">Available Items: <span id=${Fe}></span></span>\n       <span class="view-navbar-clubinfo-name">Active transfers: <span id=${Be}></span></span>\n    </div>\n  </div>`,{startAutoBuyer:Vr,stopAutoBuyer:Gr}=n,Wr=function(e){UTMarketSearchFiltersViewController.call(this)},Hr=UTMarketSearchFiltersViewController.prototype.init,Jr=UTMarketSearchFiltersViewController.prototype.viewDidAppear;JSUtils.inherits(Wr,UTMarketSearchFiltersViewController),JSUtils.inherits(UTMarketSearchFiltersViewController,UTMarketSearchFiltersViewController),Wr.prototype.init=function(){Hr.call(this);let e=this.getView();isPhone()||(e.__root.style="width: 52%; float: left;"),y("AutoBuyerInstance",this);const t=_n.call(this);let n=$(e.__root);const r=Vt.bind(this),i=r("停止",()=>Gr.call(this)),o=r("清除日志",()=>Zn.call(this),"btn-other"),s=r("开始",()=>{Vr.call(this),$(".ut-navigation-container-view--content").animate({scrollTop:$(".ut-navigation-container-view--content").prop("scrollHeight")},400)},"call-to-action");setInterval(()=>{isPhone()?Bt():zt()},1e3),n.addClass("auto-buyer");const a=n.find(".button-container");a.addClass("buyer-actions"),a.find(".call-to-action").remove();const u=a.find('button:contains("Reset")');u.on("click touchend",async function(){$(`#${R}`).prop("selectedIndex",0),await Sn()}),u.addClass("btn-other"),a.append($(s.__root)),a.append($(i.__root)),a.append($(o.__root)),$(t.__root).find(".menu-container").addClass("settings-menu"),n.find(".search-prices").append(t.__root)},Wr.prototype.viewDidAppear=function(){this.getNavigationController().setNavigationVisibility(!0,!0),Yr.call(this,!1)},UTMarketSearchFiltersViewController.prototype.viewDidAppear=function(){Yr.call(this,!0)};const Yr=function(e){Jr.call(this);let t=this.getView(),n=$(t.__root);n.find(".filter-place").length||gn.call(this,e).then(e=>{n.find(".ut-item-search-view").first().prepend(e)})};Wr.prototype.getNavigationTitle=function(){return setTimeout(()=>{var e=$(".ut-navigation-container-view--content .search-prices > div:nth-child(6) > div.info > span");e.html(e.text()+'<font color="red">（必须填写）</font>');const t=$(".title");isPhone()&&t.addClass("buyer-header"),$(".view-navbar-currency").remove(),$(".view-navbar-clubinfo").remove(),$(".menu-container:not(.settings-menu) .ea-filter-bar-item-view:eq(2)").remove(),$(".menu-container:not(.settings-menu) .ea-filter-bar-item-view:eq(2)").remove(),$(".button-container.btn-filters .btn-standard.filterSync").remove(),$(".ut-navigation-container-view--content .search-prices .price-filter:eq(3) "),t.append(`<span style='color:red' id="${je}"> 空闲 </span> | 请求次数: <span id="${Me}">0</span> \n  `),$(isPhone()?Kr():$r()).insertAfter(t),$(".ut-navigation-container-view--content").find(`#${Mt}`).remove(),$(".ut-navigation-container-view--content").append((()=>{const e=$(`<div style=${isPhone()?"height: 90%;display: flex;flex-direction: column;padding: 7px;":"width:48%"} id=${Mt}>\n            <div class="logs-container">\n              <label>日志:</label>\n              <div data-title="Clear logs" class="button-clear">\n              </div>\n            </div>\n            <br/>\n            <div class="logWrapper">\n              <textarea wrap="off"  style="height: 100%;overflow-x: auto;resize: none; width: 100%;" readonly id=${_e} class="autoBuyerLog"></textarea>\n              <br/>\n        </div>`);return e.find(".button-clear").append(Vt("⎚",()=>Zn()).__root),e})()),Gt(),j(m("CommonSettings")||{})}),"自动秒卡 "};const Zr=()=>{const e=UTGameTabBarController.prototype.initWithViewControllers;UTGameTabBarController.prototype.initWithViewControllers=function(t){const n=new UTGameFlowNavigationController;n.initWithRootController(new Wr),n.tabBarItem=Qr("自动秒卡"),(t=Xr(t)).push(n),e.call(this,t)}},Xr=e=>{if(!isPhone())return e;const t=[];return t.push(e[0]),t.push(e[2]),t.push(e[3]),t.push(e[4]),t},Qr=e=>{const t=new UTTabBarItemView;return t.init(),t.setTag(8),t.setText(e),t.addClass("icon-transfer"),t},ei=()=>{function e(){const e=new UTNavigationButtonControl;return e.init(),e.addClass("menu-btn"),e.setInteractionState(!0),e.addTarget(this,()=>{window.ReactNativeWebView.postMessage(JSON.stringify({type:"OpenDrawer"}))},EventType.TAP),e}const t=UTNavigationBarView.prototype.layoutSubviews;UTNavigationBarView.prototype.layoutSubviews=function(...n){const r=t.call(this,...n);if(this.primaryButton&&this.__clubInfo){this._menuBtn&&this._menuBtn.removeFromSuperview(),this._menuBtn=e.call(this);const t=$(this.primaryButton.getRootElement()),n=$(this._menuBtn.getRootElement());$(".top-nav").remove(),t.wrap('<div class="top-nav"></div>'),n.insertBefore(t)}return r}};e(665);const ti=()=>{const e=UTCurrencyNavigationBarView.prototype._tapDetected;UTCurrencyNavigationBarView.prototype._tapDetected=function(t){const n=e.call(this,t);return t.target.classList.contains("coins")?(Qn(),n):(t.target.classList.contains("profit")&&(()=>{const e=m("sessionStats");e.profit=0,y("sessionStats",e)})(),n)}},ni=()=>{l(),Zr(),isPhone()&&ei(),S(),ti()},ri=()=>"\n  ::-webkit-scrollbar {\n    -webkit-appearance: none;\n  }\n  ::-webkit-scrollbar:vertical {\n      width: 12px;\n  }\n  ::-webkit-scrollbar:horizontal {\n      height: 12px;\n  }\n  ::-webkit-scrollbar-thumb {\n      background-color: rgba(0, 0, 0, .5);\n      border-radius: 10px;\n      border: 2px solid #ffffff;\n  }\n  ::-webkit-scrollbar-track {\n      border-radius: 10px;\n      background-color: #ffffff;\n  }",ii=function(){let e=!1;isPhone()&&$("body").removeClass("landscape").addClass("phone"),$(".ui-orientation-warning").attr("style","display: none !important"),$(".ut-fifa-header-view").attr("style","display: none !important"),services.Localization&&$("h1.title").html()===services.Localization.localize("navbar.label.home")&&(e=!0),e?(()=>{const e=document.createElement("style");$(".ui-orientation-warning").css("display","none"),$(".ut-fifa-header-view").css("display","none"),
e.innerText=`\n  .buyer-header {\n      font-size: 20px !important;\n  }\n  .with-fifa-header .ut-root-view {\n    height: 100%;\n  }\n  .buyer-settings {\n      width: 100%;\n  }\n  .buyer-settings-field {\n    margin-top: 15px;\n    margin-bottom: 15px;\n  }\n  .phone .buyer-settings-field{\n    margin-top: auto;\n    margin-bottom: auto;\n    width: 100%;\n    padding: 10px;\n  }\n  .buyer-settings-wrapper {\n    display: flex; \n    flex-wrap: wrap; \n    margin-top: 20px;\n  }\n  .buyer-settings-field .ut-toggle-cell-view{\n    justify-content: center;\n  }\n  .buyer-settings-field input:disabled {\n    background-color: #c3c6ce;\n    cursor: not-allowed;\n  }\n  .btn-test-notification\n  {\n    width: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n  input[type="number"]{\n    padding: 0 .5em;\n    border-radius: 0;\n    background-color: #262c38;\n    border: 1px solid #4ee6eb;\n    box-sizing: border-box;\n    color: #4ee6eb;\n    font-family: UltimateTeam,sans-serif;\n    font-size: 1em;\n    height: 2.8em;\n    opacity: 1;\n    width: 100%;\n  }\n  .autoBuyerLog {\n    font-size: ${isPhone()?"13px":"15px"}; \n    height: 50%;\n    background-color:#141414;\n    color:#e2dde2;\n  }\n  .searchLog {\n    font-size: 10px; \n    height: 50%;\n  }\n  input::-webkit-outer-spin-button,\n  input::-webkit-inner-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n  input[type=number] {\n    -moz-appearance: textfield;\n  }\n  .captcha-settings-view input,\n  .notification-settings-view input {\n    text-transform: none;\n  }\n  .phone .buyer-header{\n    font-size: 1.2em !important;\n  }\n  .phone .buyer-actions .btn-standard{\n    padding: 0;\n    font-size: 1.2em;\n    text-overflow: unset;\n  }\n  .filter-header-settings {\n    width: 100%;\n    padding: 10px;\n    font-family: UltimateTeamCondensed, sans-serif;\n    font-size: 1.6em;\n    color: #e2dde2;\n    text-transform: uppercase;\n    background-color: #171826;\n  }\n  .btn-save-filter {\n    width:100%\n  }\n  .btn-delete-filter {\n    width:50%\n  }\n  .multiple-filter {\n    width: 100%  !important;\n    display: flex  !important;\n    justify-content: center;\n    align-items: center;\n  }\n  .logs-container {\n    display: flex;\n    justify-content: space-between;\n    font-size: 20px;\n    align-items: center;\n  }\n  .button-clear button {\n    color: #fff;\n    background-color: unset;\n    height: unset;\n    line-height: unset;\n  }\n  .top-nav{\n    display:flex; \n  }\n  .ut-navigation-button-control.menu-btn:before {\n    content: "≡";\n    transform: unset;\n  }\n  .menu-btn {\n    min-width: 0px;\n    margin-left: 5px;\n  }\n  .filterSync {\n    background: transparent;\n    color: #c4f750;\n    text-overflow: clip;\n  }\n  .filterSync:hover {\n    background: transparent !important;\n  }\n  .stats-progress {\n    float: right; \n    height: 10px; \n    width: 100px; \n    background: #888; \n    margin: ${isPhone()?"auto 5px":"5px 0px 5px 5px"};\n  }\n  .stats-fill {\n    background: #000; \n    height: 10px; \n    width: 0%\n  }\n  .numericInput:invalid {\n    color: red;\n    border: 1px solid;\n  }\n  .ignore-players{\n    width: 100%;\n    display: flex;\n    background: transparent;\n  }\n  .ignore-players .ut-player-search-control{\n    width: 90% !important;\n  }\n  .ignore-players filterSync{\n    flex: unset;\n  }\n  .font15 {\n    font-size: 15px;\n  }  \n  .action-icons {\n    display: unset !important;\n    width: 10%\n  }\n  .displayCenterFlx {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n  .displayNone {\n    height: 275px;\n  }\n  .displayNone .inline-list-select,\n  .displayNone .search-prices,\n  .displayNone .btn-actions,\n  .displayNone .btn-filters,\n  .displayNone .btn-report,\n  .displayNone .buyer-actions .btn-other {\n    display: none !important;\n  }\n  .mrg10 {\n    margin: 10px;\n  }\n  .ut-toggle-cell-view--label{\n    overflow: unset;\n  }\n  .download-stats {\n    line-height: 1;\n    display: flex;\n  }\n  .btn-report {\n    display: flex;\n    justify-content: center;\n  }\n  small{\n    white-space: break-spaces;\n  }  \n  .joinServer {\n    position: absolute;\n    right: 25px;\n    top: 50%;\n    color: wheat\n  }\n  .phone .joinServer{\n    display: none;\n  }\n  textarea {\n    resize: none;\n  }  \n  .logWrapper {\n    position: relative;\n    height: 100%\n  } \n \n  .auto-buyer .autoBuyMin{\n    display: none;\n  }\n  .auto-buyer .search-prices .settings-field{\n    display: none;\n  }\n  .ut-section-header-view button{\n    max-width: 100%;\n  }\n  `,e.innerText+=ri(),document.head.appendChild(e)})():setTimeout(ii,1e3)},oi=function(){let e=!1;services.Localization&&(e=!0),e?(ni(),ii(),u&&window.addEventListener("message",e=>{const t=JSON.parse(e.data);if("dataFromExternalAB"===t.type){const{res:e,identifier:n}=t.response,r=m(n);return r&&r(e),y(n,null)}},!0)):setTimeout(oi,1e3)};oi()})()})();
