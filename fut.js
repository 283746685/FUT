// ==UserScript==
// @name        BallFut免费版
// @version     1.0.6
// @author      JayQ
// @description BallFut免费版
// @match       https://www.ea.com/*/fifa/ultimate-team/web-app/*
// @match       https://www.ea.com/fifa/ultimate-team/web-app/*
// @match       https://www.easports.com/*/fifa/ultimate-team/web-app/*
// @namespace   JayQ
// @require     https://code.jquery.com/jquery-3.6.1.min.js
// @require     https://raw.githubusercontent.com/283746685/FUT/main/discord.js
// @require     https://greasyfork.org/scripts/47911-font-awesome-all-js/code/Font-awesome%20AllJs.js?version=275337
// @grant       GM_xmlhttpRequest
// @grant       GM_download
// @grant       unsafeWindow
// @grant       GM_addStyle
// @grant       GM_openInTab
// @grant       GM_getValue
// @grant       GM_setValue
// @connect     ea.com
// @connect     ea2.com
// @connect     futwiz.com
// @connect     futbin.com
// @connect     amazonaws.com
// @connect     futbin.org
// @connect     futhelpers.com
// @connect     on.aws
// @connect     discordapp.com
// @connect     exp.host
// @connect     futcd.com
// @updateURL    https://raw.githubusercontent.com/283746685/FUT/main/fut.js
// @downloadURL  https://raw.githubusercontent.com/283746685/FUT/main/fut.js
// ==/UserScript==

(()=>{var __webpack_modules__={791:(e,t,n)=>{"use strict";n.d(t,{DP:()=>s,Dq:()=>T,FT:()=>H,GC:()=>a,J:()=>g,Jl:()=>c,L1:()=>b,Lo:()=>z,MF:()=>E,Mg:()=>i,Mx:()=>$,Nl:()=>F,Pn:()=>G,Pq:()=>R,Qt:()=>D,R4:()=>N,SS:()=>u,VY:()=>B,WF:()=>m,WV:()=>j,XE:()=>A,Y:()=>O,YG:()=>P,YX:()=>p,ZH:()=>d,_:()=>l,am:()=>M,b8:()=>x,bo:()=>h,dj:()=>S,e7:()=>U,er:()=>o,i8:()=>w,iT:()=>C,jf:()=>f,kN:()=>y,lr:()=>L,oL:()=>v,oy:()=>k,pg:()=>q,tK:()=>_,x7:()=>K,y5:()=>V,zD:()=>I});var r=n(448);const i=90,o=20,s="elem_"+(0,r.Ox)(15),a="elem_"+(0,r.Ox)(15),u="elem_"+(0,r.Ox)(15),c="elem_"+(0,r.Ox)(15),l=((0,r.Ox)(15),(0,r.Ox)(15),(0,r.Ox)(15),"elem_"+(0,r.Ox)(15)),d="elem_"+(0,r.Ox)(15),f=((0,r.Ox)(15),"elem_"+(0,r.Ox)(15)),p="elem_"+(0,r.Ox)(15),h=((0,r.Ox)(15),(0,r.Ox)(15),(0,r.Ox)(15),(0,r.Ox)(15),"elem_"+(0,r.Ox)(15)),v="elem_"+(0,r.Ox)(15),g="elem_"+(0,r.Ox)(15),m="elem_"+(0,r.Ox)(15),y="elem_"+(0,r.Ox)(15),b="elem_"+(0,r.Ox)(15),w="elem_"+(0,r.Ox)(15),_="elem_"+(0,r.Ox)(15),S="elem_"+(0,r.Ox)(15),E="elem_"+(0,r.Ox)(15),C="elem_"+(0,r.Ox)(15),A="elem_"+(0,r.Ox)(15),O="elem_"+(0,r.Ox)(15),I="elem_"+(0,r.Ox)(15),T=((0,r.Ox)(15),"elem_"+(0,r.Ox)(15)),x="elem_"+(0,r.Ox)(15),P="elem_"+(0,r.Ox)(15),k="elem_"+(0,r.Ox)(15),D="elem_"+(0,r.Ox)(15),N=(0,r.Ox)(15),L=(0,r.Ox)(15),M="elem_"+(0,r.Ox)(15),j="elem_"+(0,r.Ox)(15),R="elem_"+(0,r.Ox)(15),U="elem_"+(0,r.Ox)(15),B="elem_"+(0,r.Ox)(15),F="elem_"+(0,r.Ox)(15),z=!!window.ReactNativeWebView,q="elem_"+(0,r.Ox)(15),$="elem_"+(0,r.Ox)(15),K="elem_"+(0,r.Ox)(15),V="elem_"+(0,r.Ox)(15),G="elem_"+(0,r.Ox)(15),H="elem_"+(0,r.Ox)(15)},793:function(e){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=123)}([function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"f",(function(){return s})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return u})),n.d(t,"h",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"g",(function(){return d}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function s(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function a(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function u(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}function c(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function l(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function d(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create,Object.create},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return u})),n.d(t,"f",(function(){return c})),n.d(t,"g",(function(){return l})),n.d(t,"h",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"e",(function(){return g})),n.d(t,"d",(function(){return m}));var r=n(2),i=function(){var e=[],t=[],n=new Set,a=function(n){return e.forEach((function(e){n.add(e.middleware,Object(r.__assign)({},e))})),t.forEach((function(e){n.addRelativeTo(e.middleware,Object(r.__assign)({},e))})),n},u=function(e){var t=[];return e.before.forEach((function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,Object(r.__spread)(u(e)))})),t.push(e),e.after.reverse().forEach((function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,Object(r.__spread)(u(e)))})),t},c=function(){var n,i=[],a=[],c={};return e.forEach((function(e){var t=Object(r.__assign)(Object(r.__assign)({},e),{before:[],after:[]});t.name&&(c[t.name]=t),i.push(t)})),t.forEach((function(e){var t=Object(r.__assign)(Object(r.__assign)({},e),{before:[],after:[]});t.name&&(c[t.name]=t),a.push(t)})),a.forEach((function(e){if(e.toMiddleware){var t=c[e.toMiddleware];if(void 0===t)throw new Error(e.toMiddleware+" is not found when adding "+(e.name||"anonymous")+" middleware "+e.relation+" "+e.toMiddleware);"after"===e.relation&&t.after.push(e),"before"===e.relation&&t.before.push(e)}})),(n=i,n.sort((function(e,t){return o[t.step]-o[e.step]||s[t.priority||"normal"]-s[e.priority||"normal"]}))).map(u).reduce((function(e,t){return e.push.apply(e,Object(r.__spread)(t)),e}),[]).map((function(e){return e.middleware}))},l={add:function(t,i){void 0===i&&(i={});var o=i.name,s=i.override,a=Object(r.__assign)({step:"initialize",priority:"normal",middleware:t},i);if(o){if(n.has(o)){if(!s)throw new Error("Duplicate middleware name '"+o+"'");var u=e.findIndex((function(e){return e.name===o})),c=e[u];if(c.step!==a.step||c.priority!==a.priority)throw new Error('"'+o+'" middleware with '+c.priority+" priority in "+c.step+" step cannot be overridden by same-name middleware with "+a.priority+" priority in "+a.step+" step.");e.splice(u,1)}n.add(o)}e.push(a)},addRelativeTo:function(e,i){var o=i.name,s=i.override,a=Object(r.__assign)({middleware:e},i);if(o){if(n.has(o)){if(!s)throw new Error("Duplicate middleware name '"+o+"'");var u=t.findIndex((function(e){return e.name===o})),c=t[u];if(c.toMiddleware!==a.toMiddleware||c.relation!==a.relation)throw new Error('"'+o+'" middleware '+c.relation+' "'+c.toMiddleware+'" middleware cannot be overridden by same-name middleware '+a.relation+' "'+a.toMiddleware+'" middleware.');t.splice(u,1)}n.add(o)}t.push(a)},clone:function(){return a(i())},use:function(e){e.applyToStack(l)},remove:function(r){return"string"==typeof r?function(r){var i=!1,o=function(e){return!e.name||e.name!==r||(i=!0,n.delete(r),!1)};return e=e.filter(o),t=t.filter(o),i}(r):function(r){var i=!1,o=function(e){return e.middleware!==r||(i=!0,e.name&&n.delete(e.name),!1)};return e=e.filter(o),t=t.filter(o),i}(r)},removeByTag:function(r){var i=!1,o=function(e){var t=e.tags,o=e.name;return!t||!t.includes(r)||(o&&n.delete(o),i=!0,!1)};return e=e.filter(o),t=t.filter(o),i},concat:function(e){var t=a(i());return t.use(e),t},applyToStack:a,resolve:function(e,t){var n,i;try{for(var o=Object(r.__values)(c().reverse()),s=o.next();!s.done;s=o.next())e=(0,s.value)(e,t)}catch(e){n={error:e}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return e}};return l},o={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},s={high:3,normal:2,low:1},a=function(){function e(e){this.middlewareStack=i(),this.config=e}return e.prototype.send=function(e,t,n){var r="function"!=typeof t?t:void 0,i="function"==typeof t?t:n,o=e.resolveMiddleware(this.middlewareStack,this.config,r);if(!i)return o(e).then((function(e){return e.output}));o(e).then((function(e){return i(null,e.output)}),(function(e){return i(e)})).catch((function(){}))},e.prototype.destroy=function(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()},e}(),u=function(){this.middlewareStack=i()};function c(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16)}))}var l=function(e){return Array.isArray(e)?e:[e]},d=function(e){for(var t in e)e.hasOwnProperty(t)&&void 0!==e[t]["#text"]?e[t]=e[t]["#text"]:"object"==typeof e[t]&&null!==e[t]&&(e[t]=d(e[t]));return e},f=function(){var e=Object.getPrototypeOf(this).constructor,t=new(Function.bind.apply(String,Object(r.__spread)([null],arguments)));return Object.setPrototypeOf(t,e.prototype),t};f.prototype=Object.create(String.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(f,String);var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.deserializeJSON=function(){return JSON.parse(e.prototype.toString.call(this))},t.prototype.toJSON=function(){return e.prototype.toString.call(this)},t.fromObject=function(e){return e instanceof t?e:new t(e instanceof String||"string"==typeof e?e:JSON.stringify(e))},t}(f),h=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],v=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function g(e){var t=e.getUTCFullYear(),n=e.getUTCMonth(),r=e.getUTCDay(),i=e.getUTCDate(),o=e.getUTCHours(),s=e.getUTCMinutes(),a=e.getUTCSeconds();return h[r]+", "+(i<10?"0"+i:""+i)+" "+v[n]+" "+t+" "+(o<10?"0"+o:""+o)+":"+(s<10?"0"+s:""+s)+":"+(a<10?"0"+a:""+a)+" GMT"}var m="***SensitiveInformation***"},function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return i})),n.d(t,"__assign",(function(){return o})),n.d(t,"__rest",(function(){return s})),n.d(t,"__decorate",(function(){return a})),n.d(t,"__param",(function(){return u})),n.d(t,"__metadata",(function(){return c})),n.d(t,"__awaiter",(function(){return l})),n.d(t,"__generator",(function(){return d})),n.d(t,"__createBinding",(function(){return f})),n.d(t,"__exportStar",(function(){return p})),n.d(t,"__values",(function(){return h})),n.d(t,"__read",(function(){return v})),n.d(t,"__spread",(function(){return g})),n.d(t,"__spreadArrays",(function(){return m})),n.d(t,"__await",(function(){return y})),n.d(t,"__asyncGenerator",(function(){return b})),n.d(t,"__asyncDelegator",(function(){return w})),n.d(t,"__asyncValues",(function(){return _})),n.d(t,"__makeTemplateObject",(function(){return S})),n.d(t,"__importStar",(function(){return E})),n.d(t,"__importDefault",(function(){return C})),n.d(t,"__classPrivateFieldGet",(function(){return A})),n.d(t,"__classPrivateFieldSet",(function(){return O}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function s(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function a(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function u(e,t){return function(n,r){t(n,r,e)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function d(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function f(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}function p(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function h(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(v(arguments[t]));return e}function m(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function y(e){return this instanceof y?(this.v=e,this):new y(e)}function b(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||a(e,t)}))})}function a(e,t){try{(n=i[e](t)).value instanceof y?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(e){l(o[0][3],e)}var n}function u(e){a("next",e)}function c(e){a("throw",e)}function l(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function w(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:y(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function _(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=h(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,i,(t=e[n](t)).done,t.value)}))}}}function S(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function C(e){return e&&e.__esModule?e:{default:e}}function A(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function O(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}));var r=function(){function e(e){this.statusCode=e.statusCode,this.headers=e.headers||{},this.body=e.body}return e.isInstance=function(e){if(!e)return!1;var t=e;return"number"==typeof t.statusCode&&"object"==typeof t.headers},e}(),i=n(2),o=function(){function e(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?":"!==e.protocol.substr(-1)?e.protocol+":":e.protocol:"https:",this.path=e.path?"/"!==e.path.charAt(0)?"/"+e.path:e.path:"/"}return e.isInstance=function(e){if(!e)return!1;var t=e;return"method"in t&&"protocol"in t&&"hostname"in t&&"path"in t&&"object"==typeof t.query&&"object"==typeof t.headers},e.prototype.clone=function(){var t,n=new e(Object(i.__assign)(Object(i.__assign)({},this),{headers:Object(i.__assign)({},this.headers)}));return n.query&&(n.query=(t=n.query,Object.keys(t).reduce((function(e,n){var r,o=t[n];return Object(i.__assign)(Object(i.__assign)({},e),((r={})[n]=Array.isArray(o)?Object(i.__spread)(o):o,r))}),{}))),n},e}()},function(e,t,n){"use strict";n.d(t,"d",(function(){return A})),n.d(t,"b",(function(){return O})),n.d(t,"e",(function(){return I})),n.d(t,"j",(function(){return T})),n.d(t,"h",(function(){return P})),n.d(t,"g",(function(){return k})),n.d(t,"f",(function(){return D})),n.d(t,"a",(function(){return x})),n.d(t,"i",(function(){return N})),n.d(t,"l",(function(){return L})),n.d(t,"I",(function(){return M})),n.d(t,"R",(function(){return j})),n.d(t,"H",(function(){return U})),n.d(t,"O",(function(){return F})),n.d(t,"Q",(function(){return K})),n.d(t,"J",(function(){return V})),n.d(t,"K",(function(){return G})),n.d(t,"N",(function(){return W})),n.d(t,"t",(function(){return J})),n.d(t,"P",(function(){return Y})),n.d(t,"S",(function(){return Z})),n.d(t,"w",(function(){return Q})),n.d(t,"C",(function(){return X})),n.d(t,"x",(function(){return ee})),n.d(t,"D",(function(){return te})),n.d(t,"y",(function(){return ne})),n.d(t,"A",(function(){return re})),n.d(t,"E",(function(){return ie})),n.d(t,"B",(function(){return oe})),n.d(t,"z",(function(){return se})),n.d(t,"c",(function(){return ue})),n.d(t,"M",(function(){return ce})),n.d(t,"u",(function(){return le})),n.d(t,"m",(function(){return fe})),n.d(t,"n",(function(){return pe})),n.d(t,"o",(function(){return he})),n.d(t,"F",(function(){return ve})),n.d(t,"G",(function(){return ge})),n.d(t,"k",(function(){return me})),n.d(t,"q",(function(){return ye})),n.d(t,"r",(function(){return be})),n.d(t,"p",(function(){return we})),n.d(t,"v",(function(){return _e})),n.d(t,"L",(function(){return Se})),n.d(t,"s",(function(){return Ee}));var r=n(12);function i(e){var t=new Error(e);return t.source="ulid",t}var o="0123456789ABCDEFGHJKMNPQRSTVWXYZ",s=o.length,a=Math.pow(2,48)-1;function u(e,t,n){return t>e.length-1?e:e.substr(0,t)+n+e.substr(t+1)}function c(e){var t=Math.floor(e()*s);return t===s&&(t=s-1),o.charAt(t)}function l(e,t){if(isNaN(e))throw new Error(e+" must be a number");if(e>a)throw i("cannot encode time greater than "+a);if(e<0)throw i("time must be positive");if(!1===Number.isInteger(e))throw i("time must be an integer");for(var n=void 0,r="";t>0;t--)r=o.charAt(n=e%s)+r,e=(e-n)/s;return r}function d(e,t){for(var n="";e>0;e--)n=c(t)+n;return n}function f(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments[1];t||(t="undefined"!=typeof window?window:null);var r=t&&(t.crypto||t.msCrypto);if(r)return function(){var e=new Uint8Array(1);return r.getRandomValues(e),e[0]/255};try{var o=n(350);return function(){return o.randomBytes(1).readUInt8()/255}}catch(e){}if(e){try{}catch(e){}return function(){return Math.random()}}throw i("secure crypto unusable, insecure Math.random not allowed")}p||(p=f());var p,h=n(69),v=n(53),g=n(6),m=n(25);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var b,w=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},_=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},S=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},E=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},C=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(S(arguments[t]));return e},A="id",O="#",I="-",T={idEmptyString:"An index field cannot contain an empty string value",queryByPkWithCompositeKeyPresent:"Models with composite primary keys cannot be queried by a single key value. Use object literal syntax for composite keys instead: https://docs.amplify.aws/lib/datastore/advanced-workflows/q/platform/js/#querying-records-with-custom-primary-keys",deleteByPkWithCompositeKeyPresent:"Models with composite primary keys cannot be deleted by a single key value, unless using a predicate. Use object literal syntax for composite keys instead: https://docs.amplify.aws/lib/datastore/advanced-workflows/q/platform/js/#querying-records-with-custom-primary-keys",observeWithObjectLiteral:"Object literal syntax cannot be used with observe. Use a predicate instead: https://docs.amplify.aws/lib/datastore/data-access/q/platform/js/#predicates"};!function(e){e.DATASTORE="datastore",e.USER="user",e.SYNC="sync",e.STORAGE="storage"}(b||(b={}));var x=b.DATASTORE,P=b.USER,k=b.SYNC,D=b.STORAGE,N="/DataStore",L=function(e,t){if(void 0===t&&(t=!0),t)throw new Error("Invalid "+e)},M=function(e){return void 0===e||null==e},j=function e(t,n,r){var i,o=!1;if(0===r.length)return!0;switch(n){case"not":i="every",o=!0;break;case"and":i="every";break;case"or":i="some";break;default:L(n)}var s=r[i]((function(n){if(Object(g.u)(n)){var r=n.field,i=n.operator,o=n.operand,s=t[r];return R(s,i,o)}if(Object(g.t)(n)){var a=n.type,u=n.predicates;return e(t,a,u)}throw new Error("Not a predicate or group")}));return o?!s:s},R=function(e,t,n){switch(t){case"ne":return e!==n;case"eq":return e===n;case"le":return e<=n;case"lt":return e<n;case"ge":return e>=n;case"gt":return e>n;case"between":var r=S(n,2),i=r[0],o=r[1];return e>=i&&e<=o;case"beginsWith":return!M(e)&&e.startsWith(n);case"contains":return!M(e)&&e.indexOf(n)>-1;case"notContains":return M(e)||-1===e.indexOf(n);default:return L(t,!1),!1}},U=function(e){return e&&"function"==typeof e.copyOf},B=new WeakSet;function F(e){B.add(e)}var z,q,$=new WeakMap,K=function(e,t,n,r,i){var o=n.relationships,s=i(n.name,e),a=o[e],u=[],c=s.copyOf(t,(function(e){a.relationTypes.forEach((function(o){var s=i(n.name,o.modelName);switch(o.relationType){case"HAS_ONE":if(t[o.fieldName]){var a=void 0;try{a=r(s,t[o.fieldName])}catch(e){}u.push({modelName:o.modelName,item:t[o.fieldName],instance:a}),(c=we(o))?(c.forEach((function(t,r){var i=e[o.fieldName],a=n.keys[s.name].primaryKey,u=i[a&&a[r]];e[t]=u})),delete e[o.fieldName]):e[o.fieldName]=e[o.fieldName].id}break;case"BELONGS_TO":if(t[o.fieldName]){a=void 0;try{a=r(s,t[o.fieldName])}catch(e){}e[o.fieldName]._deleted||u.push({modelName:o.modelName,item:t[o.fieldName],instance:a})}var c;e[o.fieldName]&&(c=we(o))&&(c.forEach((function(t,r){var i=e[o.fieldName],a=n.keys[s.name].primaryKey,u=i[a&&a[r]];e[t]=u})),delete e[o.fieldName]);break;case"HAS_MANY":break;default:L(o.relationType)}}))}));u.unshift({modelName:e,item:c,instance:c}),$.has(n)||$.set(n,Array.from(n.modelTopologicalOrdering.keys()));var l=$.get(n);return u.sort((function(e,t){return l.indexOf(e.modelName)-l.indexOf(t.modelName)})),u},V=function(){return new Promise((function(e){var t,n=Object(h.v4)(),r=function(){z=!1,e(!0)},i=function(){return w(void 0,void 0,void 0,(function(){return _(this,(function(r){switch(r.label){case 0:return t&&t.result&&"function"==typeof t.result.close?[4,t.result.close()]:[3,2];case 1:r.sent(),r.label=2;case 2:return[4,indexedDB.deleteDatabase(n)];case 3:return r.sent(),z=!0,[2,e(!1)]}}))}))};return!0===z?i():!1===z||null===indexedDB?r():((t=indexedDB.open(n)).onerror=r,void(t.onsuccess=i))}))},G=function(){return w(void 0,void 0,void 0,(function(){var e,t,n,r,i,o;return _(this,(function(s){switch(s.label){case 0:return s.trys.push([0,6,,7]),e=Object(h.v4)(),t="indexedDBFeatureProbeStore",n="idx",null===indexedDB?[2,!1]:void 0!==q?[2,q]:[4,new Promise((function(r){var i=indexedDB.open(e);i.onerror=function(){return r(!1)},i.onsuccess=function(){var e=i.result;r(e)},i.onupgradeneeded=function(e){var i,o=null===(i=null==e?void 0:e.target)||void 0===i?void 0:i.result;o.onerror=function(){return r(!1)},o.createObjectStore(t,{autoIncrement:!0}).createIndex(n,["id"])}}))];case 1:if(!(r=s.sent()))throw new Error("Could not open probe DB");return(i=r.transaction(t,"readwrite")).objectStore(t).add({id:1}),i.commit(),[4,new Promise((function(e){var i=r.transaction(t,"readonly").objectStore(t).index(n).get([1]);i.onerror=function(){return e(!1)},i.onsuccess=function(t){var n;e(null===(n=null==t?void 0:t.target)||void 0===n?void 0:n.result)}}))];case 2:return o=s.sent(),r&&"function"==typeof r.close?[4,r.close()]:[3,4];case 3:s.sent(),s.label=4;case 4:return[4,indexedDB.deleteDatabase(e)];case 5:return s.sent(),q=void 0===o,[3,7];case 6:return s.sent(),q=!1,[3,7];case 7:return[2,q]}}))}))},H=function(){return(1,r.Buffer.from((new m.j).random(1).toString(),"hex")).readUInt8(0)/255};function W(e){var t=function(e){e||(e=f());var t=0,n=void 0;return function(r){if(isNaN(r)&&(r=Date.now()),r<=t){var a=n=function(e){for(var t=void 0,n=e.length,r=void 0,a=void 0,c=s-1;!t&&n-- >=0;){if(r=e[n],-1===(a=o.indexOf(r)))throw i("incorrectly encoded string");a!==c?t=u(e,n,o[a+1]):e=u(e,n,o[0])}if("string"==typeof t)return t;throw i("cannot increment this string")}(n);return l(t,10)+a}t=r;var c=n=d(16,e);return l(r,10)+c}}(H);return function(){return t(e)}}function J(){return"undefined"!=typeof performance&&performance&&"function"==typeof performance.now?0|performance.now():Date.now()}function Y(e){return function(t,n){var r,i;try{for(var o=E(e),s=o.next();!s.done;s=o.next()){var a=s.value,u=a.field,c=a.sortDirection===g.k.ASCENDING?1:-1;if(t[u]<n[u])return-1*c;if(t[u]>n[u])return 1*c}}catch(e){r={error:e}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return 0}}function Z(e,t,n){var r,i;void 0===n&&(n=!1);var o,s,a=e,u=t;if(a instanceof Object&&!(u instanceof Object)||!(a instanceof Object)&&u instanceof Object)return!1;if(!(a instanceof Object))return!(!n||(o=a,s=u,null!=o||null!=s))||a===u;if(Array.isArray(a)&&!Array.isArray(u)||Array.isArray(u)&&!Array.isArray(a))return!1;a instanceof Set&&u instanceof Set&&(a=C(a),u=C(u)),a instanceof Map&&u instanceof Map&&(a=Object.fromEntries(a),u=Object.fromEntries(u));var c=Object.keys(a),l=Object.keys(u);if(c.length!==l.length&&(!n||Array.isArray(a)))return!1;var d=c.length>=l.length?c:l;try{for(var f=E(d),p=f.next();!p.done;p=f.next()){var h=p.value;if(!Z(a[h],u[h],n))return!1}}catch(e){r={error:e}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}return!0}var Q=function(e){return!!/^\d{4}-\d{2}-\d{2}(Z|[+-]\d{2}:\d{2}($|:\d{2}))?$/.exec(e)},X=function(e){return!!/^\d{2}:\d{2}(:\d{2}(.\d+)?)?(Z|[+-]\d{2}:\d{2}($|:\d{2}))?$/.exec(e)},ee=function(e){return!!/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}(:\d{2}(.\d+)?)?(Z|[+-]\d{2}:\d{2}($|:\d{2}))?$/.exec(e)},te=function(e){return!!/^\d+$/.exec(String(e))},ne=function(e){return!!/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.exec(e)},re=function(e){try{return JSON.parse(e),!0}catch(e){return!1}},ie=function(e){try{return!!new URL(e)}catch(e){return!1}},oe=function(e){return!!/^\+?\d[\d\s-]+$/.exec(e)},se=function(e){return!!/((^((([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]))$)|(^((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?$))$/.exec(e)},ae=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))},ue=function(){function e(e){this.limitPromise=new ae,this.raceInFlight=!1,this.callback=function(){},this.defaultErrorHandler=function(e){throw void 0===e&&(e="DeferredCallbackResolver error"),new Error(e)},this.callback=e.callback,this.errorHandler=e.errorHandler||this.defaultErrorHandler,this.maxInterval=e.maxInterval||2e3}return e.prototype.startTimer=function(){var e=this;this.timerPromise=new Promise((function(t,n){e.timer=setTimeout((function(){t(g.d.TIMER)}),e.maxInterval)}))},e.prototype.racePromises=function(){return w(this,void 0,void 0,(function(){var e,t;return _(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,3,4]),this.raceInFlight=!0,this.startTimer(),[4,Promise.race([this.timerPromise,this.limitPromise.promise])];case 1:return e=n.sent(),this.callback(),[3,4];case 2:return t=n.sent(),this.errorHandler(t),[3,4];case 3:return this.clear(),this.raceInFlight=!1,this.limitPromise=new ae,[2,e];case 4:return[2]}}))}))},e.prototype.start=function(){this.raceInFlight||this.racePromises()},e.prototype.clear=function(){clearTimeout(this.timer)},e.prototype.resolve=function(){this.limitPromise.resolve(g.d.LIMIT)},e}();function ce(e,t,n){var r,i=t.concat(n);return Object(v.d)(e,(function(e){Object(v.a)(e,i)}),(function(e){r=e})),r}var le=function(e,t){return e+"_"+t},de=function(e){var t;return null===(t=null==e?void 0:e.attributes)||void 0===t?void 0:t.find(g.p)},fe=function(e){var t=de(e);return t&&Object(g.q)(t)?t.properties.fields:[A]},pe=function(e,t){return t.map((function(t){return e[t]}))},he=function(e,t){var n={};return t.forEach((function(t){return n[t]=e[t]})),n},ve=function(e){var t=de(e);return!t||!Object(g.q)(t)},ge=function(e){var t=de(e);return!(!t||!Object(g.q)(t))&&t.properties.fields[0]===A},me=function(e){var t={},n={};return Object.keys(e.models).forEach((function(r){var i,o;t[r]={indexes:[],relationTypes:[]},n[r]={};var s,a,u=e.models[r];if(Object.keys(u.fields).forEach((function(e){var n=u.fields[e];if("object"===y(n.type)&&"model"in n.type){var i=n.association.connectionType;if(t[r].relationTypes.push({fieldName:n.name,modelName:n.type.model,relationType:i,targetName:n.association.targetName,targetNames:n.association.targetNames,associatedWith:n.association.associatedWith}),"BELONGS_TO"===i){var o=we(n.association);if(o){var s=_e(o);t[r].indexes.push([s,o])}}}})),u.attributes){n[r].compositeKeys=(a=(s=function(e){return e.reduce((function(e,t){var n=new Set(t);if(0===e.length)return e.push(n),e;var r=e.findIndex((function(e){return C(e).some((function(e){return n.has(e)}))}));if(r>-1){var i=new Set(C(e[r],n));e[r]=i}else e.push(n);return e}),[])})(u.attributes.filter(g.o).map((function(e){return S(e.properties.fields).slice(1)}))),s(a));var c=function(e){if(!Object(g.p)(e))return"continue";var i=e.properties.fields;if(Object(g.q)(e))return n[r].primaryKey=i,"continue";var o=_e(i);t[r].indexes.find((function(e){return S(e,1)[0]===o}))||t[r].indexes.push([o,i])};try{for(var l=E(u.attributes),d=l.next();!d.done;d=l.next())c(d.value)}catch(e){i={error:e}}finally{try{d&&!d.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}}n[r].primaryKey||(n[r].primaryKey=[A]),t[r].indexes.push(["byPk",n[r].primaryKey,{unique:!0}])})),[t,n]},ye=function(e,t){var n;return e.some((function(e){if(e.modelName===t){var r=we(e);return n=r&&_e(r),!0}})),n},be=function(e,t){var n;n=Array.isArray(t)?_e(t):t;var r=e.find((function(e){return S(e,1)[0]===n}));return r&&r[0]},we=function(e){var t=null==e?void 0:e.targetName,n=null==e?void 0:e.targetNames;return Array.isArray(n)?n:"string"==typeof t?[t]:void 0},_e=function(e){return e.reduce((function(e,t,n){return 0===n?t:""+e+I+t}),"")},Se=function(e,t){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))},Ee=function(e,t){var n;return(null===(n=null==e?void 0:e.keys[t])||void 0===n?void 0:n.primaryKey)||[A]}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return c})),n.d(t,"o",(function(){return E})),n.d(t,"l",(function(){return A})),n.d(t,"e",(function(){return _})),n.d(t,"f",(function(){return S})),n.d(t,"c",(function(){return T})),n.d(t,"m",(function(){return x})),n.d(t,"g",(function(){return d})),n.d(t,"h",(function(){return h})),n.d(t,"i",(function(){return v})),n.d(t,"j",(function(){return g})),n.d(t,"k",(function(){return m})),n.d(t,"n",(function(){return k}));var r=n(0),i=function(){var e=[],t=[],n=new Set,a=function(n){return e.forEach((function(e){n.add(e.middleware,Object(r.a)({},e))})),t.forEach((function(e){n.addRelativeTo(e.middleware,Object(r.a)({},e))})),n},u=function(e){var t=[];return e.before.forEach((function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,Object(r.g)([],Object(r.e)(u(e)),!1))})),t.push(e),e.after.reverse().forEach((function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,Object(r.g)([],Object(r.e)(u(e)),!1))})),t},c=function(n){void 0===n&&(n=!1);var i,a=[],c=[],l={};return e.forEach((function(e){var t=Object(r.a)(Object(r.a)({},e),{before:[],after:[]});t.name&&(l[t.name]=t),a.push(t)})),t.forEach((function(e){var t=Object(r.a)(Object(r.a)({},e),{before:[],after:[]});t.name&&(l[t.name]=t),c.push(t)})),c.forEach((function(e){if(e.toMiddleware){var t=l[e.toMiddleware];if(void 0===t){if(n)return;throw new Error("".concat(e.toMiddleware," is not found when adding ").concat(e.name||"anonymous"," middleware ").concat(e.relation," ").concat(e.toMiddleware))}"after"===e.relation&&t.after.push(e),"before"===e.relation&&t.before.push(e)}})),(i=a,i.sort((function(e,t){return o[t.step]-o[e.step]||s[t.priority||"normal"]-s[e.priority||"normal"]}))).map(u).reduce((function(e,t){return e.push.apply(e,Object(r.g)([],Object(r.e)(t),!1)),e}),[])},l={add:function(t,i){void 0===i&&(i={});var o=i.name,s=i.override,a=Object(r.a)({step:"initialize",priority:"normal",middleware:t},i);if(o){if(n.has(o)){if(!s)throw new Error("Duplicate middleware name '".concat(o,"'"));var u=e.findIndex((function(e){return e.name===o})),c=e[u];if(c.step!==a.step||c.priority!==a.priority)throw new Error('"'.concat(o,'" middleware with ').concat(c.priority," priority in ").concat(c.step," step cannot be ")+"overridden by same-name middleware with ".concat(a.priority," priority in ").concat(a.step," step."));e.splice(u,1)}n.add(o)}e.push(a)},addRelativeTo:function(e,i){var o=i.name,s=i.override,a=Object(r.a)({middleware:e},i);if(o){if(n.has(o)){if(!s)throw new Error("Duplicate middleware name '".concat(o,"'"));var u=t.findIndex((function(e){return e.name===o})),c=t[u];if(c.toMiddleware!==a.toMiddleware||c.relation!==a.relation)throw new Error('"'.concat(o,'" middleware ').concat(c.relation,' "').concat(c.toMiddleware,'" middleware cannot be overridden ')+"by same-name middleware ".concat(a.relation,' "').concat(a.toMiddleware,'" middleware.'));t.splice(u,1)}n.add(o)}t.push(a)},clone:function(){return a(i())},use:function(e){e.applyToStack(l)},remove:function(r){return"string"==typeof r?function(r){var i=!1,o=function(e){return!e.name||e.name!==r||(i=!0,n.delete(r),!1)};return e=e.filter(o),t=t.filter(o),i}(r):function(r){var i=!1,o=function(e){return e.middleware!==r||(i=!0,e.name&&n.delete(e.name),!1)};return e=e.filter(o),t=t.filter(o),i}(r)},removeByTag:function(r){var i=!1,o=function(e){var t=e.tags,o=e.name;return!t||!t.includes(r)||(o&&n.delete(o),i=!0,!1)};return e=e.filter(o),t=t.filter(o),i},concat:function(e){var t=a(i());return t.use(e),t},applyToStack:a,identify:function(){return c(!0).map((function(e){return e.name+": "+(e.tags||[]).join(",")}))},resolve:function(e,t){var n,i;try{for(var o=Object(r.h)(c().map((function(e){return e.middleware})).reverse()),s=o.next();!s.done;s=o.next())e=(0,s.value)(e,t)}catch(e){n={error:e}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return e}};return l},o={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},s={high:3,normal:2,low:1},a=function(){function e(e){this.middlewareStack=i(),this.config=e}return e.prototype.send=function(e,t,n){var r="function"!=typeof t?t:void 0,i="function"==typeof t?t:n,o=e.resolveMiddleware(this.middlewareStack,this.config,r);if(!i)return o(e).then((function(e){return e.output}));o(e).then((function(e){return i(null,e.output)}),(function(e){return i(e)})).catch((function(){}))},e.prototype.destroy=function(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()},e}(),u=function(){this.middlewareStack=i()},c="***SensitiveInformation***",l=(Math.ceil(Math.pow(2,127)*(2-Math.pow(2,-23))),function(e){if(null!=e){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError("Expected integer, got ".concat(typeof e,": ").concat(e))}}),d=function(e){return f(e,32)},f=function(e,t){var n=l(e);if(void 0!==n&&p(n,t)!==n)throw new TypeError("Expected ".concat(t,"-bit integer, got ").concat(e));return n},p=function(e,t){switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},h=function(e,t){if(null==e){if(t)throw new TypeError("Expected a non-null value for ".concat(t));throw new TypeError("Expected a non-null value")}return e},v=function(e){if(null!=e){if("object"==typeof e&&!Array.isArray(e))return e;var t=Array.isArray(e)?"array":typeof e;throw new TypeError("Expected object, got ".concat(t,": ").concat(e))}},g=function(e){if(null!=e){if("string"==typeof e)return e;if(["boolean","number","bigint"].includes(typeof e))return w.warn(b("Expected string, got ".concat(typeof e,": ").concat(e))),String(e);throw new TypeError("Expected string, got ".concat(typeof e,": ").concat(e))}},m=function(e){return"string"==typeof e?y(e):function(e){if(null!=e){if("string"==typeof e){var t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&w.warn(b("Expected number but observed string: ".concat(e))),t}if("number"==typeof e)return e;throw new TypeError("Expected number, got ".concat(typeof e,": ").concat(e))}}(e)},y=function(e){switch(e){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error("Unable to parse float value: ".concat(e))}},b=function(e){return String(new TypeError(e).stack||e).split("\n").slice(0,5).filter((function(e){return!e.includes("stackTraceWarning")})).join("\n")},w={warn:console.warn};new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/);var _=function(e){function t(n){var r=e.call(this,n.message)||this;return Object.setPrototypeOf(r,t.prototype),r.name=n.name,r.$fault=n.$fault,r.$metadata=n.$metadata,r}return Object(r.c)(t,e),t}(Error),S=function(e,t){void 0===t&&(t={}),Object.entries(t).filter((function(e){return void 0!==Object(r.e)(e,2)[1]})).forEach((function(t){var n=Object(r.e)(t,2),i=n[0],o=n[1];null!=e[i]&&""!==e[i]||(e[i]=o)}));var n=e.message||e.Message||"UnknownError";return e.message=n,delete e.Message,e},E=function(e){var t=e.output,n=e.parsedBody,r=e.exceptionCtor,i=e.errorCode,o=C(t),s=o.httpStatusCode?o.httpStatusCode+"":void 0,a=new r({name:n.code||n.Code||i||s||"UnknowError",$fault:"client",$metadata:o});throw S(a,n)},C=function(e){var t;return{httpStatusCode:e.statusCode,requestId:null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},A=function(e){switch(e){case"standard":case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}};function O(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}n(159);var I=function(){var e=Object.getPrototypeOf(this).constructor,t=new(Function.bind.apply(String,Object(r.g)([null],Object(r.e)(arguments),!1)));return Object.setPrototypeOf(t,e.prototype),t};I.prototype=Object.create(String.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(I,String);var T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.c)(t,e),t.prototype.deserializeJSON=function(){return JSON.parse(e.prototype.toString.call(this))},t.prototype.toJSON=function(){return e.prototype.toString.call(this)},t.fromObject=function(e){return e instanceof t?e:new t(e instanceof String||"string"==typeof e?e:JSON.stringify(e))},t}(I);function x(e,t,n){var i,o,s,a;if(void 0===t&&void 0===n)s={},a=e;else{if(s=e,"function"==typeof t)return P(s,t,a=n);a=t}try{for(var u=Object(r.h)(Object.keys(a)),c=u.next();!c.done;c=u.next()){var l=c.value;if(Array.isArray(a[l])){var d=Object(r.e)(a[l],2),f=d[0],p=d[1];if("function"==typeof p){var h=void 0,v=void 0===f&&null!=(h=p()),g="function"==typeof f&&!!f(void 0)||"function"!=typeof f&&!!f;v?s[l]=h:g&&(s[l]=p())}else v=void 0===f&&null!=p,g="function"==typeof f&&!!f(p)||"function"!=typeof f&&!!f,(v||g)&&(s[l]=p)}else s[l]=a[l]}}catch(e){i={error:e}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}return s}var P=function(e,t,n){return x(e,Object.entries(n).reduce((function(e,n){var i=Object(r.e)(n,2),o=i[0],s=i[1];return Array.isArray(s)?e[o]=s:e[o]="function"==typeof s?[t,s()]:[t,s],e}),{}))},k=function(e,t,n,r,i,o){if(null==t||void 0===t[n])throw new Error("No value provided for input HTTP label: "+n+".");var s=r();if(s.length<=0)throw new Error("Empty value provided for input HTTP label: "+n+".");return e.replace(i,o?s.split("/").map((function(e){return O(e)})).join("/"):O(s))}},function(e,t,n){"use strict";n.d(t,"v",(function(){return h})),n.d(t,"w",(function(){return v})),n.d(t,"x",(function(){return g})),n.d(t,"p",(function(){return m})),n.d(t,"q",(function(){return y})),n.d(t,"o",(function(){return b})),n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return s})),n.d(t,"c",(function(){return a})),n.d(t,"m",(function(){return w})),n.d(t,"r",(function(){return _})),n.d(t,"s",(function(){return S})),n.d(t,"l",(function(){return E})),n.d(t,"n",(function(){return C})),n.d(t,"h",(function(){return u})),n.d(t,"u",(function(){return A})),n.d(t,"t",(function(){return O})),n.d(t,"j",(function(){return c})),n.d(t,"k",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"g",(function(){return f})),n.d(t,"y",(function(){return I})),n.d(t,"i",(function(){return p})),n.d(t,"b",(function(){return x})),n.d(t,"d",(function(){return T}));var r=n(4);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o,s,a,u,c,l,d,f,p;function h(e){return e&&void 0!==e.pluralName}function v(e){return h(e)&&void 0!==e.attributes}function g(e){return(null==e?void 0:e.targetName)||(null==e?void 0:e.targetNames)}function m(e){return"key"===e.type&&e.properties&&e.properties.fields&&e.properties.fields.length>0}function y(e){return m(e)&&void 0===e.properties.name}function b(e){return m(e)&&void 0!==e.properties.name&&e.properties.fields.length>2}function w(e){return e&&void 0!==a[e]}function _(e){return!(!e||!e.model)}function S(e){return!(!e||!e.nonModel)}function E(e){return!(!e||!e.enum)}function C(e,t){var n=Object(r.m)(t);return"object"===i(e)&&e&&n.every((function(t){return void 0!==e[t]}))}function A(e){return e&&void 0!==e.field}function O(e){return e&&void 0!==e.type}function I(e,t){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(n){return[2,{modelConstructor:e,conditionProducer:t}]}))}))}!function(e){e.CUSTOM="custom",e.OWNER="owner",e.GROUPS="groups",e.PRIVATE="private",e.PUBLIC="public"}(o||(o={})),function(e){e.FUNCTION="function",e.USER_POOLS="userPools",e.OIDC="oidc",e.IAM="iam",e.API_KEY="apiKey"}(s||(s={})),function(e){e[e.ID=0]="ID",e[e.String=1]="String",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Boolean=4]="Boolean",e[e.AWSDate=5]="AWSDate",e[e.AWSTime=6]="AWSTime",e[e.AWSDateTime=7]="AWSDateTime",e[e.AWSTimestamp=8]="AWSTimestamp",e[e.AWSEmail=9]="AWSEmail",e[e.AWSJSON=10]="AWSJSON",e[e.AWSURL=11]="AWSURL",e[e.AWSPhone=12]="AWSPhone",e[e.AWSIPAddress=13]="AWSIPAddress"}(a||(a={})),function(e){e.getJSType=function(e){switch(e){case"Boolean":return"boolean";case"ID":case"String":case"AWSDate":case"AWSTime":case"AWSDateTime":case"AWSEmail":case"AWSURL":case"AWSPhone":case"AWSIPAddress":return"string";case"Int":case"Float":case"AWSTimestamp":return"number";case"AWSJSON":return"object";default:Object(r.l)(e)}},e.getValidationFunction=function(e){switch(e){case"AWSDate":return r.w;case"AWSTime":return r.C;case"AWSDateTime":return r.x;case"AWSTimestamp":return r.D;case"AWSEmail":return r.y;case"AWSJSON":return r.A;case"AWSURL":return r.E;case"AWSPhone":return r.B;case"AWSIPAddress":return r.z;default:return}}}(a||(a={})),function(e){e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(u||(u={})),function(e){e[e.FIRST=0]="FIRST",e[e.LAST=1]="LAST"}(c||(c={})),function(e){e.ASCENDING="ASCENDING",e.DESCENDING="DESCENDING"}(l||(l={})),function(e){e.DEFAULT="DEFAULT",e.MULTI_AUTH="MULTI_AUTH"}(d||(d={})),function(e){e.CREATE="CREATE",e.READ="READ",e.UPDATE="UPDATE",e.DELETE="DELETE"}(f||(f={})),function(e){e.sync="sync",e.mutate="mutate",e.subscribe="subscribe"}(p||(p={}));var T,x=Symbol("DISCARD");!function(e){e.LIMIT="LIMIT",e.TIMER="TIMER"}(T||(T={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(20),i=n(49),o=(n(114),n(80),{userAgent:i.a.userAgent});r.a},function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"e",(function(){return b})),n.d(t,"c",(function(){return w})),n.d(t,"b",(function(){return _})),n.d(t,"d",(function(){return S})),n.d(t,"l",(function(){return E})),n.d(t,"m",(function(){return C})),n.d(t,"k",(function(){return A})),n.d(t,"i",(function(){return O})),n.d(t,"g",(function(){return I})),n.d(t,"f",(function(){return T})),n.d(t,"j",(function(){return x})),n.d(t,"h",(function(){return P}));var r=n(9),i=n(57),o=n(48),s=n(6),a=n(4);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c,l,d=function(){return(d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},f=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},p=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},h=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},v=new o.a("DataStore");!function(e){e.LIST="query",e.CREATE="mutation",e.UPDATE="mutation",e.DELETE="mutation",e.GET="query"}(c||(c={})),function(e){e.CREATE="Create",e.UPDATE="Update",e.DELETE="Delete",e.GET="Get"}(l||(l={}));var g=Object.keys({_version:void 0,_lastChangedAt:void 0,_deleted:void 0});function m(e,t){var n=y(t),r=function(e,t){var n=[];return Object.values(t.fields).forEach((function(t){var r=t.name,i=t.type;if(Object(s.s)(i)){var o=e.nonModels[i.nonModel],a=Object.values(y(o)).map((function(e){return e.name})),u=[];Object.values(o.fields).forEach((function(t){var n=t.type,r=t.name;if(Object(s.s)(n)){var i=e.nonModels[n.nonModel];u.push(r+" { "+m(e,i)+" }")}})),n.push(r+" { "+a.join(" ")+" "+u.join(" ")+" }")}})),n}(e,t),i=function(e,t){var n=function(e){var t=[];return Object(s.w)(e)&&e.attributes.forEach((function(e){if(e.properties&&e.properties.rules){var n=e.properties.rules.find((function(e){return"owner"===e.allow}));n&&n.ownerField&&t.push(n.ownerField)}})),t}(e);return!t.owner&&n.includes("owner")?["owner"]:[]}(t,n),o=Object.values(n).map((function(e){return e.name})).concat(i).concat(r);return Object(s.v)(t)&&(o=o.concat(g).concat(function(e,t){var n=[];return Object.values(e.fields).filter((function(e){var t=e.association;return t&&Object.keys(t).length})).forEach((function(r){var i=r.name,o=r.association,u=o.connectionType;switch(u){case"HAS_ONE":case"HAS_MANY":break;case"BELONGS_TO":if(Object(s.x)(o))if(o.targetNames&&o.targetNames.length>0){var c=h(Object(a.k)(t),1)[0][e.fields[i].type.model].indexes.find((function(e){return"byPk"===h(e,1)[0]})),l=c&&c[1],d=null==l?void 0:l.join(" ");n.push(i+" { "+d+" _deleted }")}else n.push(i+" { id _deleted }");break;default:Object(a.l)(u)}})),n}(t,e))),o.join("\n")}function y(e){var t=e.fields;return Object.values(t).filter((function(e){return!(!Object(s.m)(e.type)&&!Object(s.l)(e.type))})).reduce((function(e,t){return e[t.name]=t,e}),{})}function b(e){var t=([].concat(e.attributes).find((function(e){return e&&"auth"===e.type}))||{}).properties,n=(void 0===t?{}:t).rules,r=[];return(void 0===n?[]:n).forEach((function(t){var n=t.identityClaim,i=void 0===n?"cognito:username":n,o=t.ownerField,s=void 0===o?"owner":o,a=t.operations,u=void 0===a?["create","update","delete","read"]:a,c=t.provider,l=void 0===c?"userPools":c,d=t.groupClaim,f=void 0===d?"cognito:groups":d,p=t.allow,h=void 0===p?"iam":p,v=t.groups,g=void 0===v?[]:v,m="owner"===h;if(u.includes("read")||m){var y={identityClaim:i,ownerField:s,provider:l,groupClaim:f,authStrategy:h,groups:g,areSubscriptionsPublic:!1};if(m){var b=([].concat(e.attributes).find((function(e){return e&&"model"===e.type}))||{}).properties,w=(void 0===b?{}:b).subscriptions,_=(void 0===w?{}:w).level,S=void 0===_?"on":_;y.areSubscriptionsPublic=!u.includes("read")||"public"===S}m?r.push(y):r.unshift(y)}})),r}function w(e,t,n,r,i){var o=m(e,t),s=t.name,a=(t.pluralName,"on"+n+s),u="",c="";return r&&(u="($"+i+": String!)",c="("+i+": $"+i+")"),[n,a,"subscription operation"+u+"{\n\t\t\t"+a+c+"{\n\t\t\t\t"+o+"\n\t\t\t}\n\t\t}"]}function _(e,t,n){var r,i,o=m(e,t),s=t.name,u=t.pluralName,d=" ",f=" ";switch(n){case"LIST":r="sync"+u,d="($limit: Int, $nextToken: String, $lastSync: AWSTimestamp, $filter: Model"+s+"FilterInput)",f="(limit: $limit, nextToken: $nextToken, lastSync: $lastSync, filter: $filter)",o="items {\n\t\t\t\t\t\t\t"+o+"\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnextToken\n\t\t\t\t\t\tstartedAt";break;case"CREATE":r="create"+s,d="($input: Create"+s+"Input!)",f="(input: $input)",i=l.CREATE;break;case"UPDATE":r="update"+s,d="($input: Update"+s+"Input!, $condition: Model"+s+"ConditionInput)",f="(input: $input, condition: $condition)",i=l.UPDATE;break;case"DELETE":r="delete"+s,d="($input: Delete"+s+"Input!, $condition: Model"+s+"ConditionInput)",f="(input: $input, condition: $condition)",i=l.DELETE;break;case"GET":r="get"+s,d="($id: ID!)",f="(id: $id)",i=l.GET;break;default:Object(a.l)(n)}return[[i,r,c[n]+" operation"+d+"{\n\t\t"+r+f+"{\n\t\t\t"+o+"\n\t\t}\n\t}"]]}function S(e,t,n,r,i,o,c,f,p){var h;switch(n){case s.h.INSERT:h=l.CREATE;break;case s.h.UPDATE:h=l.UPDATE;break;case s.h.DELETE:h=l.DELETE;break;default:Object(a.l)(n)}var v=P(t,i),g=s.h.INSERT&&p?{id:p}:{};return f(c,d(d({},g),{data:JSON.stringify(i,(function(e,n){return e&&null!==n&&"object"===u(n)&&t.fields[e]&&"AWSJSON"===t.fields[e].type?JSON.stringify(n):n})),modelId:v,model:r.name,operation:h,condition:JSON.stringify(o)}))}function E(e,t){var n={};if(!e||!Array.isArray(e.predicates))return n;var r=Object(a.m)(t);return e.predicates.forEach((function(e){var i;if(Object(s.u)(e)){var o=e.field,a=e.operator,u=e.operand;if(r.includes(o))return;n[o]=((i={})[a]=u,i)}else n[e.type]=E(e,t)})),n}function C(e){var t={};if(!e||!Array.isArray(e.predicates))return t;var n=e.type,r=e.predicates,i="and"===n||"or"===n;t[n]=i?[]:{};var o=function(e){return i?t[n].push(e):t[n]=e};return r.forEach((function(e){var t,n;if(Object(s.u)(e)){var r=e.field,i=e.operator,a=e.operand,u=((t={})[r]=((n={})[i]=a,n),t);o(u)}else o(C(e))})),t}function A(e,t){var n=e[t.groupClaim]||[];if("string"==typeof n){var r=void 0;try{r=JSON.parse(n)}catch(e){r=n}n=[].concat(r)}return n}function O(e){var t=e.authModeStrategy,n=e.defaultAuthMode,r=e.modelName,i=e.schema;return f(this,void 0,void 0,(function(){var e,o,a,u=this;return p(this,(function(c){switch(c.label){case 0:e=Object.values(s.g),o={CREATE:[],READ:[],UPDATE:[],DELETE:[]},c.label=1;case 1:return c.trys.push([1,3,,4]),[4,Promise.all(e.map((function(e){return f(u,void 0,void 0,(function(){var s;return p(this,(function(a){switch(a.label){case 0:return[4,t({schema:i,modelName:r,operation:e})];case 1:return"string"==typeof(s=a.sent())?o[e]=[s]:Array.isArray(s)&&s.length?o[e]=s:o[e]=[n],[2]}}))}))})))];case 2:return c.sent(),[3,4];case 3:return a=c.sent(),v.debug("Error getting auth modes for model: "+r,a),[3,4];case 4:return[2,o]}}))}))}function I(e){var t,n=["Request failed with status code 401","Request failed with status code 403"];return e&&e.errors?t=e.errors.find((function(e){return n.includes(e.message)})):e&&e.message&&(t=e),t?t.message:null}function T(e){var t=Object.values(i.a);return e&&e.message&&t.find((function(t){return e.message.includes(t)}))||null}function x(e,t){return void 0===t&&(t={}),f(this,void 0,void 0,(function(){var n,i,o;return p(this,(function(s){switch(s.label){case 0:if(e!==r.c.AWS_LAMBDA)return[3,6];if(n=t.authProviders,!(i=(void 0===n?{functionAuthProvider:null}:n).functionAuthProvider)||"function"!=typeof i)return[3,5];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,i()];case 2:return[2,s.sent().token];case 3:throw o=s.sent(),new Error("Error retrieving token from `functionAuthProvider`: "+o);case 4:return[3,6];case 5:throw new Error("You must provide a `functionAuthProvider` function to `DataStore.configure` when using "+r.c.AWS_LAMBDA);case 6:return[2]}}))}))}function P(e,t){return Object(a.m)(e).map((function(e){return t[e]})).join(a.e)}},function(e,t,n){"use strict";var r,i,o;function s(e){return e&&!!["provider"].find((function(t){return e.hasOwnProperty(t)}))}function a(e){return e&&!!["customProvider"].find((function(t){return e.hasOwnProperty(t)}))}function u(e){return e&&!!["customState"].find((function(t){return e.hasOwnProperty(t)}))}function c(e){return void 0!==e.redirectSignIn}function l(e){return!!e.username}n.d(t,"b",(function(){return r})),n.d(t,"f",(function(){return s})),n.d(t,"g",(function(){return a})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return c})),n.d(t,"a",(function(){return i})),n.d(t,"h",(function(){return l})),n.d(t,"c",(function(){return o})),function(e){e.Cognito="COGNITO",e.Google="Google",e.Facebook="Facebook",e.Amazon="LoginWithAmazon",e.Apple="SignInWithApple"}(r||(r={})),function(e){e.NoConfig="noConfig",e.MissingAuthConfig="missingAuthConfig",e.EmptyUsername="emptyUsername",e.InvalidUsername="invalidUsername",e.EmptyPassword="emptyPassword",e.EmptyCode="emptyCode",e.SignUpError="signUpError",e.NoMFA="noMFA",e.InvalidMFA="invalidMFA",e.EmptyChallengeResponse="emptyChallengeResponse",e.NoUserSession="noUserSession",e.Default="default",e.DeviceConfig="deviceConfig",e.NetworkError="networkError",e.AutoSignInError="autoSignInError"}(i||(i={})),function(e){e.API_KEY="API_KEY",e.AWS_IAM="AWS_IAM",e.OPENID_CONNECT="OPENID_CONNECT",e.AMAZON_COGNITO_USER_POOLS="AMAZON_COGNITO_USER_POOLS",e.AWS_LAMBDA="AWS_LAMBDA"}(o||(o={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(2),i={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},o={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function s(e,t,n){return{applyToStack:function(s){s.add(function(e,t){return function(n,i){return function(i){return Object(r.__awaiter)(void 0,void 0,void 0,(function(){var o,s;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return[4,n(i)];case 1:return o=r.sent().response,[4,t(o,e)];case 2:return s=r.sent(),[2,{response:o,output:s}]}}))}))}}}(e,n),i),s.add(function(e,t){return function(n,i){return function(i){return Object(r.__awaiter)(void 0,void 0,void 0,(function(){var o;return Object(r.__generator)(this,(function(s){switch(s.label){case 0:return[4,t(i.input,e)];case 1:return o=s.sent(),[2,n(Object(r.__assign)(Object(r.__assign)({},i),{request:o}))]}}))}))}}}(e,t),o)}}}},function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return a}));var r=n(4),i=new WeakSet;function o(e){return i.has(e)}Symbol("A predicate that matches all records");var s=function(){function e(){}return Object.defineProperty(e,"ALL",{get:function(){var e=function(e){return e};return i.add(e),e},enumerable:!0,configurable:!0}),e}(),a=function(){function e(){}return e.createPredicateBuilder=function(t){var n,i=t.name,o=new Set(Object.keys(t.fields)),s=new Proxy({},n={get:function(t,s,a){var u=s;switch(u){case"and":case"or":case"not":return function(t){var r={type:u,predicates:[]},i=new Proxy({},n);return e.predicateGroupsMap.set(i,r),t(i),e.predicateGroupsMap.get(a).predicates.push(r),a};default:Object(r.l)(u,!1)}var c=s;if(!o.has(c))throw new Error("Invalid field for model. field: "+c+", model: "+i);return function(t,n){return e.predicateGroupsMap.get(a).predicates.push({field:c,operator:t,operand:n}),a}}});return e.predicateGroupsMap.set(s,{type:"and",predicates:[]}),s},e.isValidPredicate=function(t){return e.predicateGroupsMap.has(t)},e.getPredicates=function(t,n){if(void 0===n&&(n=!0),n&&!e.isValidPredicate(t))throw new Error("The predicate is not valid");return e.predicateGroupsMap.get(t)},e.createFromExisting=function(t,n){if(n&&t)return n(e.createPredicateBuilder(t))},e.createForSingleField=function(t,n,r){return e.createPredicateBuilder(t)[n]("eq",r)},e.createForPk=function(t,n){var i=Object(r.m)(t),o=Object(r.n)(n,i),s=e.createPredicateBuilder(t);return i.forEach((function(e,t){var n=o[t];s=s[e]("eq",n)})),s},e.predicateGroupsMap=new WeakMap,e}()},function(e,t,n){"use strict";(function(e){var r=n(208),i=n(209),o=n(210);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return c(this,e,t,n)}function c(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=f(e,t),e}(e,t,n,r):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|h(t,n),i=(e=a(e,r)).write(t,n);return i!==r&&(e=e.slice(0,i)),e}(e,t,n):function(e,t){if(u.isBuffer(t)){var n=0|p(t.length);return 0===(e=a(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?a(e,0):f(e,t);if("Buffer"===t.type&&o(t.data))return f(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(l(t),e=a(e,t<0?0:0|p(t)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function f(e,t){var n=t.length<0?0:0|p(t.length);e=a(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function p(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function h(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return F(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return z(e).length;default:if(r)return F(e).length;t=(""+t).toLowerCase(),r=!0}}function v(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return x(this,t,n);case"utf8":case"utf-8":return O(this,t,n);case"ascii":return I(this,t,n);case"latin1":case"binary":return T(this,t,n);case"base64":return A(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function g(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function m(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=u.from(t,r)),u.isBuffer(t))return 0===t.length?-1:y(e,t,n,r,i);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):y(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function y(e,t,n,r,i){var o,s=1,a=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,n/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var l=-1;for(o=n;o<a;o++)if(c(e,o)===c(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(n+u>a&&(n=a-u),o=n;o>=0;o--){for(var d=!0,f=0;f<u;f++)if(c(e,o+f)!==c(t,f)){d=!1;break}if(d)return o}return-1}function b(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function w(e,t,n,r){return q(F(t,e.length-n),e,n,r)}function _(e,t,n,r){return q(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function S(e,t,n,r){return _(e,t,n,r)}function E(e,t,n,r){return q(z(t),e,n,r)}function C(e,t,n,r){return q(function(e,t){for(var n,r,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)r=(n=e.charCodeAt(s))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function A(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function O(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,s,a,u,c=e[i],l=null,d=c>239?4:c>223?3:c>191?2:1;if(i+d<=n)switch(d){case 1:c<128&&(l=c);break;case 2:128==(192&(o=e[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&(u=(15&c)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(l=u)}null===l?(l=65533,d=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=d}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return n}(r)}function I(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function T(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function x(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=B(e[o]);return i}function P(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function k(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function D(e,t,n,r,i,o){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function N(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function L(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function M(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function j(e,t,n,r,o){return o||M(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function R(e,t,n,r,o){return o||M(e,0,n,8),i.write(e,t,n,r,52,8),n+8}t.Buffer=u,t.SlowBuffer=function(e){return+e!=e&&(e=0),u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,n){return c(null,e,t,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,n){return function(e,t,n,r){return l(t),t<=0?a(e,t):void 0!==n?"string"==typeof r?a(e,t).fill(n,r):a(e,t).fill(n):a(e,t)}(null,e,t,n)},u.allocUnsafe=function(e){return d(null,e)},u.allocUnsafeSlow=function(e){return d(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=u.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var s=e[n];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},u.byteLength=h,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?O(this,0,e):v.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,n,r,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(o,s),c=this.slice(r,i),l=e.slice(t,n),d=0;d<a;++d)if(c[d]!==l[d]){o=c[d],s=l[d];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return m(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return m(this,e,t,n,!1)},u.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":return _(this,e,t,n);case"latin1":case"binary":return S(this,e,t,n);case"base64":return E(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},u.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=u.prototype;else{var i=t-e;n=new u(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},u.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||k(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},u.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||k(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},u.prototype.readUInt8=function(e,t){return t||k(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||k(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||k(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||k(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||k(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||k(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},u.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||k(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},u.prototype.readInt8=function(e,t){return t||k(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||k(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(e,t){t||k(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(e,t){return t||k(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||k(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||k(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||k(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||k(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||k(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||D(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},u.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||D(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},u.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):L(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);D(this,e,t,n,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},u.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);D(this,e,t,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):L(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,n){return j(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return j(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return R(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return R(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},u.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=u.isBuffer(e)?e:F(new u(e,r).toString()),a=s.length;for(o=0;o<n-t;++o)this[o+t]=s[o%a]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function B(e){return e<16?"0"+e.toString(16):e.toString(16)}function F(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function z(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(U,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function q(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(60))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){if("function"==typeof e)return e;var t=Promise.resolve(e);return function(){return t}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return v})),n.d(t,"c",(function(){return m}));var r=n(2),i={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},o=function(e){return{applyToStack:function(t){t.add(function(e){return function(t,n){return function(i){return Object(r.__awaiter)(void 0,void 0,void 0,(function(){var o;return Object(r.__generator)(this,(function(s){return(null===(o=null==e?void 0:e.retryStrategy)||void 0===o?void 0:o.mode)&&(n.userAgent=Object(r.__spread)(n.userAgent||[],[["cfg/retry-mode",e.retryStrategy.mode]])),[2,e.retryStrategy.retry(t,i)]}))}))}}}(e),i)}}},s=n(3),a=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],u=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],c=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],l=[500,502,503,504],d=function(e){var t,n;return 429===(null===(t=e.$metadata)||void 0===t?void 0:t.httpStatusCode)||u.includes(e.name)||1==(null===(n=e.$retryable)||void 0===n?void 0:n.throttling)},f=n(30),p=function(e,t){return Math.floor(Math.min(2e4,Math.random()*Math.pow(2,t)*e))},h=function(e){return!!e&&(function(e){return void 0!==e.$retryable}(e)||function(e){return a.includes(e.name)}(e)||d(e)||function(e){var t;return c.includes(e.name)||l.includes((null===(t=e.$metadata)||void 0===t?void 0:t.httpStatusCode)||0)}(e))},v=3,g=function(){function e(e,t){var n,r,i,o,s,a,u;this.maxAttemptsProvider=e,this.mode="standard",this.retryDecider=null!==(n=null==t?void 0:t.retryDecider)&&void 0!==n?n:h,this.delayDecider=null!==(r=null==t?void 0:t.delayDecider)&&void 0!==r?r:p,this.retryQuota=null!==(i=null==t?void 0:t.retryQuota)&&void 0!==i?i:(o=500,s=500,a=function(e){return"TimeoutError"===e.name?10:5},u=function(e){return a(e)<=s},Object.freeze({hasRetryTokens:u,retrieveRetryTokens:function(e){if(!u(e))throw new Error("No retry token available");var t=a(e);return s-=t,t},releaseRetryTokens:function(e){s+=null!=e?e:1,s=Math.min(s,o)}}))}return e.prototype.shouldRetry=function(e,t,n){return t<n&&this.retryDecider(e)&&this.retryQuota.hasRetryTokens(e)},e.prototype.getMaxAttempts=function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){var e;return Object(r.__generator)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.maxAttemptsProvider()];case 1:return e=t.sent(),[3,3];case 2:return t.sent(),e=v,[3,3];case 3:return[2,e]}}))}))},e.prototype.retry=function(e,t){return Object(r.__awaiter)(this,void 0,void 0,(function(){var n,i,o,a,u,c,l,p;return Object(r.__generator)(this,(function(h){switch(h.label){case 0:return i=0,o=0,[4,this.getMaxAttempts()];case 1:a=h.sent(),u=t.request,s.a.isInstance(u)&&(u.headers["amz-sdk-invocation-id"]=Object(f.v4)()),c=function(){var c,f,p,h,v;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,5]),s.a.isInstance(u)&&(u.headers["amz-sdk-request"]="attempt="+(i+1)+"; max="+a),[4,e(t)];case 1:return c=r.sent(),f=c.response,p=c.output,l.retryQuota.releaseRetryTokens(n),p.$metadata.attempts=i+1,p.$metadata.totalRetryDelay=o,[2,{value:{response:f,output:p}}];case 2:return h=r.sent(),i++,l.shouldRetry(h,i,a)?(n=l.retryQuota.retrieveRetryTokens(h),v=l.delayDecider(d(h)?500:100,i),o+=v,[4,new Promise((function(e){return setTimeout(e,v)}))]):[3,4];case 3:return r.sent(),[2,"continue"];case 4:throw h.$metadata||(h.$metadata={}),h.$metadata.attempts=i,h.$metadata.totalRetryDelay=o,h;case 5:return[2]}}))},l=this,h.label=2;case 2:return[5,c()];case 3:return"object"==typeof(p=h.sent())?[2,p.value]:[3,2];case 4:return[2]}}))}))},e}(),m=function(e){var t=y(e.maxAttempts);return Object(r.__assign)(Object(r.__assign)({},e),{maxAttempts:t,retryStrategy:e.retryStrategy||new g(t)})},y=function(e){if(void 0===e&&(e=v),"number"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e}},function(e,t,n){"use strict";var r=n(187),i=n.n(r).a;t.a=i},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var r=function(e){return"function"==typeof TextEncoder?function(e){return(new TextEncoder).encode(e)}(e):function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e.charCodeAt(n);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192,63&i|128);else if(n+1<e.length&&55296==(64512&i)&&56320==(64512&e.charCodeAt(n+1))){var o=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n));t.push(o>>18|240,o>>12&63|128,o>>6&63|128,63&o|128)}else t.push(i>>12|224,i>>6&63|128,63&i|128)}return Uint8Array.from(t)}(e)},i=function(e){return"function"==typeof TextDecoder?function(e){return new TextDecoder("utf-8").decode(e)}(e):function(e){for(var t="",n=0,r=e.length;n<r;n++){var i=e[n];if(i<128)t+=String.fromCharCode(i);else if(192<=i&&i<224){var o=e[++n];t+=String.fromCharCode((31&i)<<6|63&o)}else if(240<=i&&i<365){var s="%"+[i,e[++n],e[++n],e[++n]].map((function(e){return e.toString(16)})).join("%");t+=decodeURIComponent(s)}else t+=String.fromCharCode((15&i)<<12|(63&e[++n])<<6|63&e[++n])}return t}(e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var r=n(0),i=function(){function e(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?":"!==e.protocol.slice(-1)?"".concat(e.protocol,":"):e.protocol:"https:",this.path=e.path?"/"!==e.path.charAt(0)?"/".concat(e.path):e.path:"/"}return e.isInstance=function(e){if(!e)return!1;var t=e;return"method"in t&&"protocol"in t&&"hostname"in t&&"path"in t&&"object"==typeof t.query&&"object"==typeof t.headers},e.prototype.clone=function(){var t,n=new e(Object(r.a)(Object(r.a)({},this),{headers:Object(r.a)({},this.headers)}));return n.query&&(n.query=(t=n.query,Object.keys(t).reduce((function(e,n){var i,o=t[n];return Object(r.a)(Object(r.a)({},e),((i={})[n]=Array.isArray(o)?Object(r.g)([],Object(r.e)(o),!1):o,i))}),{}))),n},e}(),o=function(){function e(e){this.statusCode=e.statusCode,this.headers=e.headers||{},this.body=e.body}return e.isInstance=function(e){if(!e)return!1;var t=e;return"number"==typeof t.statusCode&&"object"==typeof t.headers},e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d}));for(var r={},i=new Array(64),o=0,s="A".charCodeAt(0),a="Z".charCodeAt(0);o+s<=a;o++){var u=String.fromCharCode(o+s);r[u]=o,i[o]=u}for(o=0,s="a".charCodeAt(0),a="z".charCodeAt(0);o+s<=a;o++){u=String.fromCharCode(o+s);var c=o+26;r[u]=c,i[c]=u}for(o=0;o<10;o++)r[o.toString(10)]=o+52,u=o.toString(10),c=o+52,r[u]=c,i[c]=u;function l(e){var t=e.length/4*3;"=="===e.substr(-2)?t-=2:"="===e.substr(-1)&&t--;for(var n=new ArrayBuffer(t),i=new DataView(n),o=0;o<e.length;o+=4){for(var s=0,a=0,u=o,c=o+3;u<=c;u++)"="!==e[u]?(s|=r[e[u]]<<6*(c-u),a+=6):s>>=6;var l=o/4*3;s>>=a%8;for(var d=Math.floor(a/8),f=0;f<d;f++){var p=8*(d-f-1);i.setUint8(l+f,(s&255<<p)>>p)}}return new Uint8Array(n)}function d(e){for(var t="",n=0;n<e.length;n+=3){for(var r=0,o=0,s=n,a=Math.min(n+3,e.length);s<a;s++)r|=e[s]<<8*(a-s-1),o+=8;var u=Math.ceil(o/6);r<<=6*u-o;for(var c=1;c<=u;c++){var l=6*(u-c);t+=i[(r&63<<l)>>l]}t+="==".slice(0,4-u)}return t}r["+"]=62,i[62]="+",r["/"]=63,i[63]="/"},function(e,t,n){"use strict";var r=n(215),i=n(216);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=b,t.resolve=function(e,t){return b(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?b(e,!1,!0).resolveObject(t):t},t.format=function(e){return i.isString(e)&&(e=b(e)),e instanceof o?e.format():o.prototype.format.call(e)},t.Url=o;var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(c),d=["%","/","?",";","#"].concat(l),f=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,h=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},m={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=n(217);function b(e,t,n){if(e&&i.isObject(e)&&e instanceof o)return e;var r=new o;return r.parse(e,t,n),r}o.prototype.parse=function(e,t,n){if(!i.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var o=e.indexOf("?"),a=-1!==o&&o<e.indexOf("#")?"?":"#",c=e.split(a);c[0]=c[0].replace(/\\/g,"/");var b=e=c.join(a);if(b=b.trim(),!n&&1===e.split("#").length){var w=u.exec(b);if(w)return this.path=b,this.href=b,this.pathname=w[1],w[2]?(this.search=w[2],this.query=t?y.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var _=s.exec(b);if(_){var S=(_=_[0]).toLowerCase();this.protocol=S,b=b.substr(_.length)}if(n||_||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var E="//"===b.substr(0,2);!E||_&&g[_]||(b=b.substr(2),this.slashes=!0)}if(!g[_]&&(E||_&&!m[_])){for(var C,A,O=-1,I=0;I<f.length;I++)-1!==(T=b.indexOf(f[I]))&&(-1===O||T<O)&&(O=T);for(-1!==(A=-1===O?b.lastIndexOf("@"):b.lastIndexOf("@",O))&&(C=b.slice(0,A),b=b.slice(A+1),this.auth=decodeURIComponent(C)),O=-1,I=0;I<d.length;I++){var T;-1!==(T=b.indexOf(d[I]))&&(-1===O||T<O)&&(O=T)}-1===O&&(O=b.length),this.host=b.slice(0,O),b=b.slice(O),this.parseHost(),this.hostname=this.hostname||"";var x="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!x)for(var P=this.hostname.split(/\./),k=(I=0,P.length);I<k;I++){var D=P[I];if(D&&!D.match(p)){for(var N="",L=0,M=D.length;L<M;L++)D.charCodeAt(L)>127?N+="x":N+=D[L];if(!N.match(p)){var j=P.slice(0,I),R=P.slice(I+1),U=D.match(h);U&&(j.push(U[1]),R.unshift(U[2])),R.length&&(b="/"+R.join(".")+b),this.hostname=j.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),x||(this.hostname=r.toASCII(this.hostname));var B=this.port?":"+this.port:"",F=this.hostname||"";this.host=F+B,this.href+=this.host,x&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!v[S])for(I=0,k=l.length;I<k;I++){var z=l[I];if(-1!==b.indexOf(z)){var q=encodeURIComponent(z);q===z&&(q=escape(z)),b=b.split(z).join(q)}}var $=b.indexOf("#");-1!==$&&(this.hash=b.substr($),b=b.slice(0,$));var K=b.indexOf("?");if(-1!==K?(this.search=b.substr(K),this.query=b.substr(K+1),t&&(this.query=y.parse(this.query)),b=b.slice(0,K)):t&&(this.search="",this.query={}),b&&(this.pathname=b),m[S]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){B=this.pathname||"";var V=this.search||"";this.path=B+V}return this.href=this.format(),this},o.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,s="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(s=y.stringify(this.query));var a=this.search||s&&"?"+s||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||m[t])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),t+o+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(a=a.replace("#","%23"))+r},o.prototype.resolve=function(e){return this.resolveObject(b(e,!1,!0)).format()},o.prototype.resolveObject=function(e){if(i.isString(e)){var t=new o;t.parse(e,!1,!0),e=t}for(var n=new o,r=Object.keys(this),s=0;s<r.length;s++){var a=r[s];n[a]=this[a]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var u=Object.keys(e),c=0;c<u.length;c++){var l=u[c];"protocol"!==l&&(n[l]=e[l])}return m[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!m[e.protocol]){for(var d=Object.keys(e),f=0;f<d.length;f++){var p=d[f];n[p]=e[p]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||g[e.protocol])n.pathname=e.pathname;else{for(var h=(e.pathname||"").split("/");h.length&&!(e.host=h.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),n.pathname=h.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var v=n.pathname||"",y=n.search||"";n.path=v+y}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var b=n.pathname&&"/"===n.pathname.charAt(0),w=e.host||e.pathname&&"/"===e.pathname.charAt(0),_=w||b||n.host&&e.pathname,S=_,E=n.pathname&&n.pathname.split("/")||[],C=(h=e.pathname&&e.pathname.split("/")||[],n.protocol&&!m[n.protocol]);if(C&&(n.hostname="",n.port=null,n.host&&(""===E[0]?E[0]=n.host:E.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===h[0]?h[0]=e.host:h.unshift(e.host)),e.host=null),_=_&&(""===h[0]||""===E[0])),w)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,E=h;else if(h.length)E||(E=[]),E.pop(),E=E.concat(h),n.search=e.search,n.query=e.query;else if(!i.isNullOrUndefined(e.search))return C&&(n.hostname=n.host=E.shift(),(x=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=x.shift(),n.host=n.hostname=x.shift())),n.search=e.search,n.query=e.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!E.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var A=E.slice(-1)[0],O=(n.host||e.host||E.length>1)&&("."===A||".."===A)||""===A,I=0,T=E.length;T>=0;T--)"."===(A=E[T])?E.splice(T,1):".."===A?(E.splice(T,1),I++):I&&(E.splice(T,1),I--);if(!_&&!S)for(;I--;I)E.unshift("..");!_||""===E[0]||E[0]&&"/"===E[0].charAt(0)||E.unshift(""),O&&"/"!==E.join("/").substr(-1)&&E.push("");var x,P=""===E[0]||E[0]&&"/"===E[0].charAt(0);return C&&(n.hostname=n.host=P?"":E.length?E.shift():"",(x=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=x.shift(),n.host=n.hostname=x.shift())),(_=_||n.host&&E.length)&&!P&&E.unshift(""),E.length?n.pathname=E.join("/"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var e=this.host,t=a.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s}));var r=n(48),i=new r.a("Amplify"),o=function(){function e(){this._components=[],this._config={},this._modules={},this.Auth=null,this.Analytics=null,this.API=null,this.Credentials=null,this.Storage=null,this.I18n=null,this.Cache=null,this.PubSub=null,this.Interactions=null,this.Pushnotification=null,this.UI=null,this.XR=null,this.Predictions=null,this.DataStore=null,this.Geo=null,this.Logger=r.a,this.ServiceWorker=null}return e.prototype.register=function(e){i.debug("component registered in amplify",e),this._components.push(e),"function"==typeof e.getModuleName?(this._modules[e.getModuleName()]=e,this[e.getModuleName()]=e):i.debug("no getModuleName method for component",e),e.configure(this._config)},e.prototype.configure=function(e){var t=this;return e?(this._config=Object.assign(this._config,e),i.debug("amplify config",this._config),Object.entries(this._modules).forEach((function(e){var n=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}(e,2),r=(n[0],n[1]);Object.keys(r).forEach((function(e){t._modules[e]&&(r[e]=t._modules[e])}))})),this._components.map((function(e){e.configure(t._config)})),this._config):this._config},e.prototype.addPluggable=function(e){e&&e.getCategory&&"function"==typeof e.getCategory&&this._components.map((function(t){t.addPluggable&&"function"==typeof t.addPluggable&&t.addPluggable(e)}))},e}(),s=new o},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return a}));var r=n(2),i=n(3);function o(e){return e}var s={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},a=function(e){return{applyToStack:function(t){t.add(function(e){return function(t){return function(n){return Object(r.__awaiter)(void 0,void 0,void 0,(function(){var o,s;return Object(r.__generator)(this,(function(r){return i.a.isInstance(n.request)?(o=n.request,(void 0===(s=(e.requestHandler.metadata||{}).handlerProtocol)?"":s).indexOf("h2")>=0&&!o.headers[":authority"]?(delete o.headers.host,o.headers[":authority"]=""):o.headers.host||(o.headers.host=o.hostname),[2,t(n)]):[2,t(n)]}))}))}}}(e),s)}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c}));var r=n(2),i=n(3),o=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,s)},s=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()},a=function(){function e(e){var t=(void 0===e?{}:e).requestTimeout;this.requestTimeout=t}return e.prototype.destroy=function(){},e.prototype.handle=function(e,t){var n=(void 0===t?{}:t).abortSignal,s=this.requestTimeout;if(null==n?void 0:n.aborted){var a=new Error("Request aborted");return a.name="AbortError",Promise.reject(a)}var u=e.path;if(e.query){var c=function(e){var t,n,i=[];try{for(var s=Object(r.__values)(Object.keys(e).sort()),a=s.next();!a.done;a=s.next()){var u=a.value,c=e[u];if(u=o(u),Array.isArray(c))for(var l=0,d=c.length;l<d;l++)i.push(u+"="+o(c[l]));else{var f=u;(c||"string"==typeof c)&&(f+="="+o(c)),i.push(f)}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return i.join("&")}(e.query);c&&(u+="?"+c)}var l=e.port,d=e.method,f=e.protocol+"//"+e.hostname+(l?":"+l:"")+u,p={body:"GET"===d||"HEAD"===d?void 0:e.body,headers:new Headers(e.headers),method:d};"undefined"!=typeof AbortController&&(p.signal=n);var h,v=new Request(f,p),g=[fetch(v).then((function(e){var t,n,o=e.headers,s={};try{for(var a=Object(r.__values)(o.entries()),u=a.next();!u.done;u=a.next()){var c=u.value;s[c[0]]=c[1]}}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return void 0!==e.body?{response:new i.b({headers:s,statusCode:e.status,body:e.body})}:e.blob().then((function(t){return{response:new i.b({headers:s,statusCode:e.status,body:t})}}))})),(h=s,void 0===h&&(h=0),new Promise((function(e,t){h&&setTimeout((function(){var e=new Error("Request did not complete within "+h+" ms");e.name="TimeoutError",t(e)}),h)})))];return n&&g.push(new Promise((function(e,t){n.onabort=function(){var e=new Error("Request aborted");e.name="AbortError",t(e)}}))),Promise.race(g)},e}(),u=n(18),c=function(e){return"function"==typeof Blob&&e instanceof Blob?function(e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var t,n;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return[4,l(e)];case 1:return t=r.sent(),n=Object(u.a)(t),[2,new Uint8Array(n)]}}))}))}(e):function(e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var t,n,i,o,s,a,u;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:t=new Uint8Array(0),n=e.getReader(),i=!1,r.label=1;case 1:return i?[3,3]:[4,n.read()];case 2:return o=r.sent(),s=o.done,(a=o.value)&&(u=t,(t=new Uint8Array(u.length+a.length)).set(u),t.set(a,u.length)),i=s,[3,1];case 3:return[2,t]}}))}))}(e)};function l(e){return new Promise((function(t,n){var r=new FileReader;r.onloadend=function(){var e;if(2!==r.readyState)return n(new Error("Reader aborted too early"));var i=null!==(e=r.result)&&void 0!==e?e:"",o=i.indexOf(","),s=o>-1?o+1:i.length;t(i.substring(s))},r.onabort=function(){return n(new Error("Read aborted"))},r.onerror=function(){return n(r.error)},r.readAsDataURL(e)}))}},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return c}));var r=n(2);function i(e){return Object(r.__assign)(Object(r.__assign)({},e),{customUserAgent:"string"==typeof e.customUserAgent?[[e.customUserAgent]]:e.customUserAgent})}var o=n(3),s=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,a=function(e){var t=Object(r.__read)(e,2),n=t[0],i=t[1],o=n.indexOf("/"),a=n.substring(0,o),u=n.substring(o+1);return"api"===a&&(u=u.toLowerCase()),[a,u,i].filter((function(e){return e&&e.length>0})).map((function(e){return null==e?void 0:e.replace(s,"_")})).join("/")},u={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},c=function(e){return{applyToStack:function(t){var n;t.add((n=e,function(e,t){return function(i){return Object(r.__awaiter)(void 0,void 0,void 0,(function(){var s,u,c,l,d,f,p,h;return Object(r.__generator)(this,(function(v){switch(v.label){case 0:return s=i.request,o.a.isInstance(s)?(u=s.headers,c=(null===(p=null==t?void 0:t.userAgent)||void 0===p?void 0:p.map(a))||[],[4,n.defaultUserAgentProvider()]):[2,e(i)];case 1:return l=v.sent().map(a),d=(null===(h=null==n?void 0:n.customUserAgent)||void 0===h?void 0:h.map(a))||[],u["x-amz-user-agent"]=Object(r.__spread)(l,c,d).join(" "),f=Object(r.__spread)(l.filter((function(e){return e.startsWith("aws-sdk-")})),d).join(" "),"browser"!==n.runtime&&f&&(u["user-agent"]=u["user-agent"]?u["user-agent"]+" "+f:f),[2,e(Object(r.__assign)(Object(r.__assign)({},i),{request:s}))]}}))}))}}),u)}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var r=n(2),i=function(e){var t;return Object(r.__assign)(Object(r.__assign)({},e),{tls:null===(t=e.tls)||void 0===t||t,endpoint:e.endpoint?o(e):function(){return s(e)},isCustomEndpoint:!!e.endpoint})},o=function(e){var t=e.endpoint,n=e.urlParser;if("string"==typeof t){var r=Promise.resolve(n(t));return function(){return r}}if("object"==typeof t){var i=Promise.resolve(t);return function(){return i}}return t},s=function(e){return Object(r.__awaiter)(void 0,void 0,void 0,(function(){var t,n,i,o,s;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return t=e.tls,n=void 0===t||t,[4,e.region()];case 1:if(i=r.sent(),!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(i))throw new Error("Invalid region in client config");return[4,e.regionInfoProvider(i)];case 2:if(!(o=(null!==(s=r.sent())&&void 0!==s?s:{}).hostname))throw new Error("Cannot resolve hostname from client config");return[2,e.urlParser((n?"https:":"http:")+"//"+o)]}}))}))},a=function(e){if(!e.region)throw new Error("Region is missing");return Object(r.__assign)(Object(r.__assign)({},e),{region:u(e.region)})},u=function(e){if("string"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return k})),n.d(t,"c",(function(){return N})),n.d(t,"d",(function(){return L})),n.d(t,"e",(function(){return G})),n.d(t,"f",(function(){return z})),n.d(t,"g",(function(){return ie})),n.d(t,"h",(function(){return R})),n.d(t,"i",(function(){return se})),n.d(t,"j",(function(){return p}));var r,i=function(){function e(e){var t=e||{},n=t.ValidationData,r=t.Username,i=t.Password,o=t.AuthParameters,s=t.ClientMetadata;this.validationData=n||{},this.authParameters=o||{},this.clientMetadata=s||{},this.username=r,this.password=i}var t=e.prototype;return t.getUsername=function(){return this.username},t.getPassword=function(){return this.password},t.getValidationData=function(){return this.validationData},t.getAuthParameters=function(){return this.authParameters},t.getClientMetadata=function(){return this.clientMetadata},e}(),o=n(12),s=n(38),a=n.n(s),u=(n(125),n(115)),c=n.n(u),l=n(67),d=n.n(l),f=n(175),p=function(){function e(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length}var t=e.prototype;return t.random=function(t){for(var n=[],r=0;r<t;r+=4)n.push(Object(f.a)());return new e(n,t)},t.toString=function(){return function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")}(this)},e}(),h=v;function v(e,t){null!=e&&this.fromString(e,t)}function g(){return new v(null)}var m="undefined"!=typeof navigator;m&&"Microsoft Internet Explorer"==navigator.appName?(v.prototype.am=function(e,t,n,r,i,o){for(var s=32767&t,a=t>>15;--o>=0;){var u=32767&this[e],c=this[e++]>>15,l=a*u+c*s;i=((u=s*u+((32767&l)<<15)+n[r]+(1073741823&i))>>>30)+(l>>>15)+a*c+(i>>>30),n[r++]=1073741823&u}return i},r=30):m&&"Netscape"!=navigator.appName?(v.prototype.am=function(e,t,n,r,i,o){for(;--o>=0;){var s=t*this[e++]+n[r]+i;i=Math.floor(s/67108864),n[r++]=67108863&s}return i},r=26):(v.prototype.am=function(e,t,n,r,i,o){for(var s=16383&t,a=t>>14;--o>=0;){var u=16383&this[e],c=this[e++]>>14,l=a*u+c*s;i=((u=s*u+((16383&l)<<14)+n[r]+i)>>28)+(l>>14)+a*c,n[r++]=268435455&u}return i},r=28),v.prototype.DB=r,v.prototype.DM=(1<<r)-1,v.prototype.DV=1<<r,v.prototype.FV=Math.pow(2,52),v.prototype.F1=52-r,v.prototype.F2=2*r-52;var y,b,w=new Array;for(y="0".charCodeAt(0),b=0;b<=9;++b)w[y++]=b;for(y="a".charCodeAt(0),b=10;b<36;++b)w[y++]=b;for(y="A".charCodeAt(0),b=10;b<36;++b)w[y++]=b;function _(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function S(e,t){var n=w[e.charCodeAt(t)];return null==n?-1:n}function E(e){var t=g();return t.fromInt(e),t}function C(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function A(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function O(e){return o.Buffer.from((new p).random(e).toString(),"hex")}A.prototype.convert=function(e){var t=g();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(v.ZERO)>0&&this.m.subTo(t,t),t},A.prototype.revert=function(e){var t=g();return e.copyTo(t),this.reduce(t),t},A.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],r=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[n=t+this.m.t]+=this.m.am(0,r,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},A.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},A.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},v.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},v.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},v.prototype.fromString=function(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");n=2}this.t=0,this.s=0;for(var r=e.length,i=!1,o=0;--r>=0;){var s=S(e,r);s<0?"-"==e.charAt(r)&&(i=!0):(i=!1,0==o?this[this.t++]=s:o+n>this.DB?(this[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this[this.t++]=s>>this.DB-o):this[this.t-1]|=s<<o,(o+=n)>=this.DB&&(o-=this.DB))}this.clamp(),i&&v.ZERO.subTo(this,this)},v.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},v.prototype.dlShiftTo=function(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s},v.prototype.drShiftTo=function(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},v.prototype.lShiftTo=function(e,t){var n,r=e%this.DB,i=this.DB-r,o=(1<<i)-1,s=Math.floor(e/this.DB),a=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)t[n+s+1]=this[n]>>i|a,a=(this[n]&o)<<r;for(n=s-1;n>=0;--n)t[n]=0;t[s]=a,t.t=this.t+s+1,t.s=this.s,t.clamp()},v.prototype.rShiftTo=function(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var r=e%this.DB,i=this.DB-r,o=(1<<r)-1;t[0]=this[n]>>r;for(var s=n+1;s<this.t;++s)t[s-n-1]|=(this[s]&o)<<i,t[s-n]=this[s]>>r;r>0&&(t[this.t-n-1]|=(this.s&o)<<i),t.t=this.t-n,t.clamp()}},v.prototype.subTo=function(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]-e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r-=e[n],t[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t[n++]=this.DV+r:r>0&&(t[n++]=r),t.t=n,t.clamp()},v.prototype.multiplyTo=function(e,t){var n=this.abs(),r=e.abs(),i=n.t;for(t.t=i+r.t;--i>=0;)t[i]=0;for(i=0;i<r.t;++i)t[i+n.t]=n.am(0,r[i],t,i,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&v.ZERO.subTo(t,t)},v.prototype.squareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},v.prototype.divRemTo=function(e,t,n){var r=e.abs();if(!(r.t<=0)){var i=this.abs();if(i.t<r.t)return null!=t&&t.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=g());var o=g(),s=this.s,a=e.s,u=this.DB-C(r[r.t-1]);u>0?(r.lShiftTo(u,o),i.lShiftTo(u,n)):(r.copyTo(o),i.copyTo(n));var c=o.t,l=o[c-1];if(0!=l){var d=l*(1<<this.F1)+(c>1?o[c-2]>>this.F2:0),f=this.FV/d,p=(1<<this.F1)/d,h=1<<this.F2,m=n.t,y=m-c,b=null==t?g():t;for(o.dlShiftTo(y,b),n.compareTo(b)>=0&&(n[n.t++]=1,n.subTo(b,n)),v.ONE.dlShiftTo(c,b),b.subTo(o,o);o.t<c;)o[o.t++]=0;for(;--y>=0;){var w=n[--m]==l?this.DM:Math.floor(n[m]*f+(n[m-1]+h)*p);if((n[m]+=o.am(0,w,n,y,0,c))<w)for(o.dlShiftTo(y,b),n.subTo(b,n);n[m]<--w;)n.subTo(b,n)}null!=t&&(n.drShiftTo(c,t),s!=a&&v.ZERO.subTo(t,t)),n.t=c,n.clamp(),u>0&&n.rShiftTo(u,n),s<0&&v.ZERO.subTo(n,n)}}},v.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},v.prototype.addTo=function(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]+e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r+=e[n],t[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,r>0?t[n++]=r:r<-1&&(t[n++]=this.DV+r),t.t=n,t.clamp()},v.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");t=2}var n,r=(1<<t)-1,i=!1,o="",s=this.t,a=this.DB-s*this.DB%t;if(s-- >0)for(a<this.DB&&(n=this[s]>>a)>0&&(i=!0,o=_(n));s>=0;)a<t?(n=(this[s]&(1<<a)-1)<<t-a,n|=this[--s]>>(a+=this.DB-t)):(n=this[s]>>(a-=t)&r,a<=0&&(a+=this.DB,--s)),n>0&&(i=!0),i&&(o+=_(n));return i?o:"0"},v.prototype.negate=function(){var e=g();return v.ZERO.subTo(this,e),e},v.prototype.abs=function(){return this.s<0?this.negate():this},v.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0},v.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+C(this[this.t-1]^this.s&this.DM)},v.prototype.mod=function(e){var t=g();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(v.ZERO)>0&&e.subTo(t,t),t},v.prototype.equals=function(e){return 0==this.compareTo(e)},v.prototype.add=function(e){var t=g();return this.addTo(e,t),t},v.prototype.subtract=function(e){var t=g();return this.subTo(e,t),t},v.prototype.multiply=function(e){var t=g();return this.multiplyTo(e,t),t},v.prototype.divide=function(e){var t=g();return this.divRemTo(e,t,null),t},v.prototype.modPow=function(e,t,n){var r,i=e.bitLength(),o=E(1),s=new A(t);if(i<=0)return o;r=i<18?1:i<48?3:i<144?4:i<768?5:6;var a=new Array,u=3,c=r-1,l=(1<<r)-1;if(a[1]=s.convert(this),r>1){var d=g();for(s.sqrTo(a[1],d);u<=l;)a[u]=g(),s.mulTo(d,a[u-2],a[u]),u+=2}var f,p,h=e.t-1,v=!0,m=g();for(i=C(e[h])-1;h>=0;){for(i>=c?f=e[h]>>i-c&l:(f=(e[h]&(1<<i+1)-1)<<c-i,h>0&&(f|=e[h-1]>>this.DB+i-c)),u=r;0==(1&f);)f>>=1,--u;if((i-=u)<0&&(i+=this.DB,--h),v)a[f].copyTo(o),v=!1;else{for(;u>1;)s.sqrTo(o,m),s.sqrTo(m,o),u-=2;u>0?s.sqrTo(o,m):(p=o,o=m,m=p),s.mulTo(m,a[f],o)}for(;h>=0&&0==(e[h]&1<<i);)s.sqrTo(o,m),p=o,o=m,m=p,--i<0&&(i=this.DB-1,--h)}var y=s.revert(o);return n(null,y),y},v.ZERO=E(0),v.ONE=E(1);var I=/^[89a-f]/i,T=function(){function e(e){this.N=new h("FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",16),this.g=new h("2",16),this.k=new h(this.hexHash(""+this.padHex(this.N)+this.padHex(this.g)),16),this.smallAValue=this.generateRandomSmallA(),this.getLargeAValue((function(){})),this.infoBits=o.Buffer.from("Caldera Derived Key","utf8"),this.poolName=e}var t=e.prototype;return t.getSmallAValue=function(){return this.smallAValue},t.getLargeAValue=function(e){var t=this;this.largeAValue?e(null,this.largeAValue):this.calculateA(this.smallAValue,(function(n,r){n&&e(n,null),t.largeAValue=r,e(null,t.largeAValue)}))},t.generateRandomSmallA=function(){var e=O(128).toString("hex");return new h(e,16)},t.generateRandomString=function(){return O(40).toString("base64")},t.getRandomPassword=function(){return this.randomPassword},t.getSaltDevices=function(){return this.SaltToHashDevices},t.getVerifierDevices=function(){return this.verifierDevices},t.generateHashDevice=function(e,t,n){var r=this;this.randomPassword=this.generateRandomString();var i=""+e+t+":"+this.randomPassword,o=this.hash(i),s=O(16).toString("hex");this.SaltToHashDevices=this.padHex(new h(s,16)),this.g.modPow(new h(this.hexHash(this.SaltToHashDevices+o),16),this.N,(function(e,t){e&&n(e,null),r.verifierDevices=r.padHex(t),n(null,null)}))},t.calculateA=function(e,t){var n=this;this.g.modPow(e,this.N,(function(e,r){e&&t(e,null),r.mod(n.N).equals(h.ZERO)&&t(new Error("Illegal paramater. A mod N cannot be 0."),null),t(null,r)}))},t.calculateU=function(e,t){return this.UHexHash=this.hexHash(this.padHex(e)+this.padHex(t)),new h(this.UHexHash,16)},t.hash=function(e){var t=e instanceof o.Buffer?a.a.lib.WordArray.create(e):e,n=c()(t).toString();return new Array(64-n.length).join("0")+n},t.hexHash=function(e){return this.hash(o.Buffer.from(e,"hex"))},t.computehkdf=function(e,t){var n=a.a.lib.WordArray.create(o.Buffer.concat([this.infoBits,o.Buffer.from(String.fromCharCode(1),"utf8")])),r=e instanceof o.Buffer?a.a.lib.WordArray.create(e):e,i=t instanceof o.Buffer?a.a.lib.WordArray.create(t):t,s=d()(r,i),u=d()(n,s);return o.Buffer.from(u.toString(),"hex").slice(0,16)},t.getPasswordAuthenticationKey=function(e,t,n,r,i){var s=this;if(n.mod(this.N).equals(h.ZERO))throw new Error("B cannot be zero.");if(this.UValue=this.calculateU(this.largeAValue,n),this.UValue.equals(h.ZERO))throw new Error("U cannot be zero.");var a=""+this.poolName+e+":"+t,u=this.hash(a),c=new h(this.hexHash(this.padHex(r)+u),16);this.calculateS(c,n,(function(e,t){e&&i(e,null);var n=s.computehkdf(o.Buffer.from(s.padHex(t),"hex"),o.Buffer.from(s.padHex(s.UValue),"hex"));i(null,n)}))},t.calculateS=function(e,t,n){var r=this;this.g.modPow(e,this.N,(function(i,o){i&&n(i,null),t.subtract(r.k.multiply(o)).modPow(r.smallAValue.add(r.UValue.multiply(e)),r.N,(function(e,t){e&&n(e,null),n(null,t.mod(r.N))}))}))},t.getNewPasswordRequiredChallengeUserAttributePrefix=function(){return"userAttributes."},t.padHex=function(e){if(!(e instanceof h))throw new Error("Not a BigInteger");var t=e.compareTo(h.ZERO)<0,n=e.abs().toString(16);if(n=n.length%2!=0?"0"+n:n,n=I.test(n)?"00"+n:n,t){var r=n.split("").map((function(e){var t=15&~parseInt(e,16);return"0123456789ABCDEF".charAt(t)})).join("");(n=new h(r,16).add(h.ONE).toString(16)).toUpperCase().startsWith("FF8")&&(n=n.substring(2))}return n},e}(),x=function(){function e(e){this.jwtToken=e||"",this.payload=this.decodePayload()}var t=e.prototype;return t.getJwtToken=function(){return this.jwtToken},t.getExpiration=function(){return this.payload.exp},t.getIssuedAt=function(){return this.payload.iat},t.decodePayload=function(){var e=this.jwtToken.split(".")[1];try{return JSON.parse(o.Buffer.from(e,"base64").toString("utf8"))}catch(e){return{}}},e}();function P(e,t){return(P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var k=function(e){var t,n;function r(t){var n=(void 0===t?{}:t).AccessToken;return e.call(this,n||"")||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,P(t,n),r}(x);function D(e,t){return(D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var N=function(e){var t,n;function r(t){var n=(void 0===t?{}:t).IdToken;return e.call(this,n||"")||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,D(t,n),r}(x),L=function(){function e(e){var t=(void 0===e?{}:e).RefreshToken;this.token=t||""}return e.prototype.getToken=function(){return this.token},e}(),M=n(120),j=n.n(M),R=function(){function e(e){var t=void 0===e?{}:e,n=t.IdToken,r=t.RefreshToken,i=t.AccessToken,o=t.ClockDrift;if(null==i||null==n)throw new Error("Id token and Access Token must be present.");this.idToken=n,this.refreshToken=r,this.accessToken=i,this.clockDrift=void 0===o?this.calculateClockDrift():o}var t=e.prototype;return t.getIdToken=function(){return this.idToken},t.getRefreshToken=function(){return this.refreshToken},t.getAccessToken=function(){return this.accessToken},t.getClockDrift=function(){return this.clockDrift},t.calculateClockDrift=function(){return Math.floor(new Date/1e3)-Math.min(this.accessToken.getIssuedAt(),this.idToken.getIssuedAt())},t.isValid=function(){var e=Math.floor(new Date/1e3)-this.clockDrift;return e<this.accessToken.getExpiration()&&e<this.idToken.getExpiration()},e}(),U=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],B=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],F=function(){function e(){}return e.prototype.getNowString=function(){var e=new Date,t=B[e.getUTCDay()],n=U[e.getUTCMonth()],r=e.getUTCDate(),i=e.getUTCHours();i<10&&(i="0"+i);var o=e.getUTCMinutes();o<10&&(o="0"+o);var s=e.getUTCSeconds();return s<10&&(s="0"+s),t+" "+n+" "+r+" "+i+":"+o+":"+s+" UTC "+e.getUTCFullYear()},e}(),z=function(){function e(e){var t=void 0===e?{}:e,n=t.Name,r=t.Value;this.Name=n||"",this.Value=r||""}var t=e.prototype;return t.getValue=function(){return this.Value},t.setValue=function(e){return this.Value=e,this},t.getName=function(){return this.Name},t.setName=function(e){return this.Name=e,this},t.toString=function(){return JSON.stringify(this)},t.toJSON=function(){return{Name:this.Name,Value:this.Value}},e}(),q={},$=function(){function e(){}return e.setItem=function(e,t){return q[e]=t,q[e]},e.getItem=function(e){return Object.prototype.hasOwnProperty.call(q,e)?q[e]:void 0},e.removeItem=function(e){return delete q[e]},e.clear=function(){return q={}},e}(),K=function(){function e(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.cognito.test-ls",1),this.storageWindow.removeItem("aws.cognito.test-ls")}catch(e){this.storageWindow=$}}return e.prototype.getStorage=function(){return this.storageWindow},e}(),V="undefined"!=typeof navigator?navigator.userAgent:"nodejs",G=function(){function e(e){if(null==e||null==e.Username||null==e.Pool)throw new Error("Username and Pool information are required.");this.username=e.Username||"",this.pool=e.Pool,this.Session=null,this.client=e.Pool.client,this.signInUserSession=null,this.authenticationFlowType="USER_SRP_AUTH",this.storage=e.Storage||(new K).getStorage(),this.keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId(),this.userDataKey=this.keyPrefix+"."+this.username+".userData"}var t=e.prototype;return t.setSignInUserSession=function(e){this.clearCachedUserData(),this.signInUserSession=e,this.cacheTokens()},t.getSignInUserSession=function(){return this.signInUserSession},t.getUsername=function(){return this.username},t.getAuthenticationFlowType=function(){return this.authenticationFlowType},t.setAuthenticationFlowType=function(e){this.authenticationFlowType=e},t.initiateAuth=function(e,t){var n=this,r=e.getAuthParameters();r.USERNAME=this.username;var i=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),o={AuthFlow:"CUSTOM_AUTH",ClientId:this.pool.getClientId(),AuthParameters:r,ClientMetadata:i};this.getUserContextData()&&(o.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",o,(function(e,r){if(e)return t.onFailure(e);var i=r.ChallengeName,o=r.ChallengeParameters;return"CUSTOM_CHALLENGE"===i?(n.Session=r.Session,t.customChallenge(o)):(n.signInUserSession=n.getCognitoUserSession(r.AuthenticationResult),n.cacheTokens(),t.onSuccess(n.signInUserSession))}))},t.authenticateUser=function(e,t){return"USER_PASSWORD_AUTH"===this.authenticationFlowType?this.authenticateUserPlainUsernamePassword(e,t):"USER_SRP_AUTH"===this.authenticationFlowType||"CUSTOM_AUTH"===this.authenticationFlowType?this.authenticateUserDefaultAuth(e,t):t.onFailure(new Error("Authentication flow type is invalid."))},t.authenticateUserDefaultAuth=function(e,t){var n,r,i=this,s=new T(this.pool.getUserPoolName()),u=new F,c={};null!=this.deviceKey&&(c.DEVICE_KEY=this.deviceKey),c.USERNAME=this.username,s.getLargeAValue((function(l,f){l&&t.onFailure(l),c.SRP_A=f.toString(16),"CUSTOM_AUTH"===i.authenticationFlowType&&(c.CHALLENGE_NAME="SRP_A");var p=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),v={AuthFlow:i.authenticationFlowType,ClientId:i.pool.getClientId(),AuthParameters:c,ClientMetadata:p};i.getUserContextData(i.username)&&(v.UserContextData=i.getUserContextData(i.username)),i.client.request("InitiateAuth",v,(function(c,l){if(c)return t.onFailure(c);var f=l.ChallengeParameters;i.username=f.USER_ID_FOR_SRP,i.userDataKey=i.keyPrefix+"."+i.username+".userData",n=new h(f.SRP_B,16),r=new h(f.SALT,16),i.getCachedDeviceKeyAndPassword(),s.getPasswordAuthenticationKey(i.username,e.getPassword(),n,r,(function(e,n){e&&t.onFailure(e);var r=u.getNowString(),c=a.a.lib.WordArray.create(o.Buffer.concat([o.Buffer.from(i.pool.getUserPoolName(),"utf8"),o.Buffer.from(i.username,"utf8"),o.Buffer.from(f.SECRET_BLOCK,"base64"),o.Buffer.from(r,"utf8")])),h=a.a.lib.WordArray.create(n),v=j.a.stringify(d()(c,h)),g={};g.USERNAME=i.username,g.PASSWORD_CLAIM_SECRET_BLOCK=f.SECRET_BLOCK,g.TIMESTAMP=r,g.PASSWORD_CLAIM_SIGNATURE=v,null!=i.deviceKey&&(g.DEVICE_KEY=i.deviceKey);var m={ChallengeName:"PASSWORD_VERIFIER",ClientId:i.pool.getClientId(),ChallengeResponses:g,Session:l.Session,ClientMetadata:p};i.getUserContextData()&&(m.UserContextData=i.getUserContextData()),function e(t,n){return i.client.request("RespondToAuthChallenge",t,(function(r,o){return r&&"ResourceNotFoundException"===r.code&&-1!==r.message.toLowerCase().indexOf("device")?(g.DEVICE_KEY=null,i.deviceKey=null,i.randomPassword=null,i.deviceGroupKey=null,i.clearCachedDeviceKeyAndPassword(),e(t,n)):n(r,o)}))}(m,(function(e,n){return e?t.onFailure(e):i.authenticateUserInternal(n,s,t)}))}))}))}))},t.authenticateUserPlainUsernamePassword=function(e,t){var n=this,r={};if(r.USERNAME=this.username,r.PASSWORD=e.getPassword(),r.PASSWORD){var i=new T(this.pool.getUserPoolName());this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(r.DEVICE_KEY=this.deviceKey);var o=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),s={AuthFlow:"USER_PASSWORD_AUTH",ClientId:this.pool.getClientId(),AuthParameters:r,ClientMetadata:o};this.getUserContextData(this.username)&&(s.UserContextData=this.getUserContextData(this.username)),this.client.request("InitiateAuth",s,(function(e,r){return e?t.onFailure(e):n.authenticateUserInternal(r,i,t)}))}else t.onFailure(new Error("PASSWORD parameter is required"))},t.authenticateUserInternal=function(e,t,n){var r=this,i=e.ChallengeName,s=e.ChallengeParameters;if("SMS_MFA"===i)return this.Session=e.Session,n.mfaRequired(i,s);if("SELECT_MFA_TYPE"===i)return this.Session=e.Session,n.selectMFAType(i,s);if("MFA_SETUP"===i)return this.Session=e.Session,n.mfaSetup(i,s);if("SOFTWARE_TOKEN_MFA"===i)return this.Session=e.Session,n.totpRequired(i,s);if("CUSTOM_CHALLENGE"===i)return this.Session=e.Session,n.customChallenge(s);if("NEW_PASSWORD_REQUIRED"===i){this.Session=e.Session;var a=null,u=null,c=[],l=t.getNewPasswordRequiredChallengeUserAttributePrefix();if(s&&(a=JSON.parse(e.ChallengeParameters.userAttributes),u=JSON.parse(e.ChallengeParameters.requiredAttributes)),u)for(var d=0;d<u.length;d++)c[d]=u[d].substr(l.length);return n.newPasswordRequired(a,c)}if("DEVICE_SRP_AUTH"===i)return this.Session=e.Session,void this.getDeviceResponse(n);this.signInUserSession=this.getCognitoUserSession(e.AuthenticationResult),this.challengeName=i,this.cacheTokens();var f=e.AuthenticationResult.NewDeviceMetadata;if(null==f)return n.onSuccess(this.signInUserSession);t.generateHashDevice(e.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,e.AuthenticationResult.NewDeviceMetadata.DeviceKey,(function(i){if(i)return n.onFailure(i);var s={Salt:o.Buffer.from(t.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:o.Buffer.from(t.getVerifierDevices(),"hex").toString("base64")};r.verifierDevices=s.PasswordVerifier,r.deviceGroupKey=f.DeviceGroupKey,r.randomPassword=t.getRandomPassword(),r.client.request("ConfirmDevice",{DeviceKey:f.DeviceKey,AccessToken:r.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:s,DeviceName:V},(function(t,i){return t?n.onFailure(t):(r.deviceKey=e.AuthenticationResult.NewDeviceMetadata.DeviceKey,r.cacheDeviceKeyAndPassword(),!0===i.UserConfirmationNecessary?n.onSuccess(r.signInUserSession,i.UserConfirmationNecessary):n.onSuccess(r.signInUserSession))}))}))},t.completeNewPasswordChallenge=function(e,t,n,r){var i=this;if(!e)return n.onFailure(new Error("New password is required."));var o=new T(this.pool.getUserPoolName()),s=o.getNewPasswordRequiredChallengeUserAttributePrefix(),a={};t&&Object.keys(t).forEach((function(e){a[s+e]=t[e]})),a.NEW_PASSWORD=e,a.USERNAME=this.username;var u={ChallengeName:"NEW_PASSWORD_REQUIRED",ClientId:this.pool.getClientId(),ChallengeResponses:a,Session:this.Session,ClientMetadata:r};this.getUserContextData()&&(u.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",u,(function(e,t){return e?n.onFailure(e):i.authenticateUserInternal(t,o,n)}))},t.getDeviceResponse=function(e,t){var n=this,r=new T(this.deviceGroupKey),i=new F,s={};s.USERNAME=this.username,s.DEVICE_KEY=this.deviceKey,r.getLargeAValue((function(u,c){u&&e.onFailure(u),s.SRP_A=c.toString(16);var l={ChallengeName:"DEVICE_SRP_AUTH",ClientId:n.pool.getClientId(),ChallengeResponses:s,ClientMetadata:t,Session:n.Session};n.getUserContextData()&&(l.UserContextData=n.getUserContextData()),n.client.request("RespondToAuthChallenge",l,(function(t,s){if(t)return e.onFailure(t);var u=s.ChallengeParameters,c=new h(u.SRP_B,16),l=new h(u.SALT,16);r.getPasswordAuthenticationKey(n.deviceKey,n.randomPassword,c,l,(function(t,r){if(t)return e.onFailure(t);var c=i.getNowString(),l=a.a.lib.WordArray.create(o.Buffer.concat([o.Buffer.from(n.deviceGroupKey,"utf8"),o.Buffer.from(n.deviceKey,"utf8"),o.Buffer.from(u.SECRET_BLOCK,"base64"),o.Buffer.from(c,"utf8")])),f=a.a.lib.WordArray.create(r),p=j.a.stringify(d()(l,f)),h={};h.USERNAME=n.username,h.PASSWORD_CLAIM_SECRET_BLOCK=u.SECRET_BLOCK,h.TIMESTAMP=c,h.PASSWORD_CLAIM_SIGNATURE=p,h.DEVICE_KEY=n.deviceKey;var v={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:n.pool.getClientId(),ChallengeResponses:h,Session:s.Session};n.getUserContextData()&&(v.UserContextData=n.getUserContextData()),n.client.request("RespondToAuthChallenge",v,(function(t,r){return t?e.onFailure(t):(n.signInUserSession=n.getCognitoUserSession(r.AuthenticationResult),n.cacheTokens(),e.onSuccess(n.signInUserSession))}))}))}))}))},t.confirmRegistration=function(e,t,n,r){var i={ClientId:this.pool.getClientId(),ConfirmationCode:e,Username:this.username,ForceAliasCreation:t,ClientMetadata:r};this.getUserContextData()&&(i.UserContextData=this.getUserContextData()),this.client.request("ConfirmSignUp",i,(function(e){return e?n(e,null):n(null,"SUCCESS")}))},t.sendCustomChallengeAnswer=function(e,t,n){var r=this,i={};i.USERNAME=this.username,i.ANSWER=e;var o=new T(this.pool.getUserPoolName());this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(i.DEVICE_KEY=this.deviceKey);var s={ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:i,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:n};this.getUserContextData()&&(s.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",s,(function(e,n){return e?t.onFailure(e):r.authenticateUserInternal(n,o,t)}))},t.sendMFACode=function(e,t,n,r){var i=this,s={};s.USERNAME=this.username,s.SMS_MFA_CODE=e;var a=n||"SMS_MFA";"SOFTWARE_TOKEN_MFA"===a&&(s.SOFTWARE_TOKEN_MFA_CODE=e),null!=this.deviceKey&&(s.DEVICE_KEY=this.deviceKey);var u={ChallengeName:a,ChallengeResponses:s,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:r};this.getUserContextData()&&(u.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",u,(function(e,n){if(e)return t.onFailure(e);if("DEVICE_SRP_AUTH"!==n.ChallengeName){if(i.signInUserSession=i.getCognitoUserSession(n.AuthenticationResult),i.cacheTokens(),null==n.AuthenticationResult.NewDeviceMetadata)return t.onSuccess(i.signInUserSession);var r=new T(i.pool.getUserPoolName());r.generateHashDevice(n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,n.AuthenticationResult.NewDeviceMetadata.DeviceKey,(function(e){if(e)return t.onFailure(e);var s={Salt:o.Buffer.from(r.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:o.Buffer.from(r.getVerifierDevices(),"hex").toString("base64")};i.verifierDevices=s.PasswordVerifier,i.deviceGroupKey=n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,i.randomPassword=r.getRandomPassword(),i.client.request("ConfirmDevice",{DeviceKey:n.AuthenticationResult.NewDeviceMetadata.DeviceKey,AccessToken:i.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:s,DeviceName:V},(function(e,r){return e?t.onFailure(e):(i.deviceKey=n.AuthenticationResult.NewDeviceMetadata.DeviceKey,i.cacheDeviceKeyAndPassword(),!0===r.UserConfirmationNecessary?t.onSuccess(i.signInUserSession,r.UserConfirmationNecessary):t.onSuccess(i.signInUserSession))}))}))}else i.getDeviceResponse(t)}))},t.changePassword=function(e,t,n,r){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("ChangePassword",{PreviousPassword:e,ProposedPassword:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:r},(function(e){return e?n(e,null):n(null,"SUCCESS")}))},t.enableMFA=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);var t=[];t.push({DeliveryMedium:"SMS",AttributeName:"phone_number"}),this.client.request("SetUserSettings",{MFAOptions:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t){return t?e(t,null):e(null,"SUCCESS")}))},t.setUserMfaPreference=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("SetUserMFAPreference",{SMSMfaSettings:e,SoftwareTokenMfaSettings:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(e){return e?n(e,null):n(null,"SUCCESS")}))},t.disableMFA=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("SetUserSettings",{MFAOptions:[],AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t){return t?e(t,null):e(null,"SUCCESS")}))},t.deleteUser=function(e,t){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("DeleteUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:t},(function(t){return t?e(t,null):(n.clearCachedUser(),e(null,"SUCCESS"))}))},t.updateAttributes=function(e,t,n){var r=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("UpdateUserAttributes",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserAttributes:e,ClientMetadata:n},(function(e){return e?t(e,null):r.getUserData((function(){return t(null,"SUCCESS")}),{bypassCache:!0})}))},t.getUserAttributes=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t,n){if(t)return e(t,null);for(var r=[],i=0;i<n.UserAttributes.length;i++){var o={Name:n.UserAttributes[i].Name,Value:n.UserAttributes[i].Value},s=new z(o);r.push(s)}return e(null,r)}))},t.getMFAOptions=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t,n){return t?e(t,null):e(null,n.MFAOptions)}))},t.createGetUserRequest=function(){return this.client.promisifyRequest("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()})},t.refreshSessionIfPossible=function(e){var t=this;return void 0===e&&(e={}),new Promise((function(n){var r=t.signInUserSession.getRefreshToken();r&&r.getToken()?t.refreshSession(r,n,e.clientMetadata):n()}))},t.getUserData=function(e,t){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return this.clearCachedUserData(),e(new Error("User is not authenticated"),null);var r=this.getUserDataFromCache();if(r)if(this.isFetchUserDataAndTokenRequired(t))this.fetchUserData().then((function(e){return n.refreshSessionIfPossible(t).then((function(){return e}))})).then((function(t){return e(null,t)})).catch(e);else try{return void e(null,JSON.parse(r))}catch(t){return this.clearCachedUserData(),void e(t,null)}else this.fetchUserData().then((function(t){e(null,t)})).catch(e)},t.getUserDataFromCache=function(){return this.storage.getItem(this.userDataKey)},t.isFetchUserDataAndTokenRequired=function(e){var t=(e||{}).bypassCache;return void 0!==t&&t},t.fetchUserData=function(){var e=this;return this.createGetUserRequest().then((function(t){return e.cacheUserData(t),t}))},t.deleteAttributes=function(e,t){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("DeleteUserAttributes",{UserAttributeNames:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(e){return e?t(e,null):n.getUserData((function(){return t(null,"SUCCESS")}),{bypassCache:!0})}))},t.resendConfirmationCode=function(e,t){var n={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:t};this.client.request("ResendConfirmationCode",n,(function(t,n){return t?e(t,null):e(null,n)}))},t.getSession=function(e,t){if(void 0===t&&(t={}),null==this.username)return e(new Error("Username is null. Cannot retrieve a new session"),null);if(null!=this.signInUserSession&&this.signInUserSession.isValid())return e(null,this.signInUserSession);var n="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,r=n+".idToken",i=n+".accessToken",o=n+".refreshToken",s=n+".clockDrift";if(this.storage.getItem(r)){var a=new N({IdToken:this.storage.getItem(r)}),u=new k({AccessToken:this.storage.getItem(i)}),c=new L({RefreshToken:this.storage.getItem(o)}),l=parseInt(this.storage.getItem(s),0)||0,d=new R({IdToken:a,AccessToken:u,RefreshToken:c,ClockDrift:l});if(d.isValid())return this.signInUserSession=d,e(null,this.signInUserSession);if(!c.getToken())return e(new Error("Cannot retrieve a new session. Please authenticate."),null);this.refreshSession(c,e,t.clientMetadata)}else e(new Error("Local storage is missing an ID Token, Please authenticate"),null)},t.refreshSession=function(e,t,n){var r=this,i=this.pool.wrapRefreshSessionCallback?this.pool.wrapRefreshSessionCallback(t):t,o={};o.REFRESH_TOKEN=e.getToken();var s="CognitoIdentityServiceProvider."+this.pool.getClientId(),a=s+".LastAuthUser";if(this.storage.getItem(a)){this.username=this.storage.getItem(a);var u=s+"."+this.username+".deviceKey";this.deviceKey=this.storage.getItem(u),o.DEVICE_KEY=this.deviceKey}var c={ClientId:this.pool.getClientId(),AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:o,ClientMetadata:n};this.getUserContextData()&&(c.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",c,(function(t,n){if(t)return"NotAuthorizedException"===t.code&&r.clearCachedUser(),i(t,null);if(n){var o=n.AuthenticationResult;return Object.prototype.hasOwnProperty.call(o,"RefreshToken")||(o.RefreshToken=e.getToken()),r.signInUserSession=r.getCognitoUserSession(o),r.cacheTokens(),i(null,r.signInUserSession)}}))},t.cacheTokens=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId(),t=e+"."+this.username+".idToken",n=e+"."+this.username+".accessToken",r=e+"."+this.username+".refreshToken",i=e+"."+this.username+".clockDrift",o=e+".LastAuthUser";this.storage.setItem(t,this.signInUserSession.getIdToken().getJwtToken()),this.storage.setItem(n,this.signInUserSession.getAccessToken().getJwtToken()),this.storage.setItem(r,this.signInUserSession.getRefreshToken().getToken()),this.storage.setItem(i,""+this.signInUserSession.getClockDrift()),this.storage.setItem(o,this.username)},t.cacheUserData=function(e){this.storage.setItem(this.userDataKey,JSON.stringify(e))},t.clearCachedUserData=function(){this.storage.removeItem(this.userDataKey)},t.clearCachedUser=function(){this.clearCachedTokens(),this.clearCachedUserData()},t.cacheDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".deviceKey",n=e+".randomPasswordKey",r=e+".deviceGroupKey";this.storage.setItem(t,this.deviceKey),this.storage.setItem(n,this.randomPassword),this.storage.setItem(r,this.deviceGroupKey)},t.getCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".deviceKey",n=e+".randomPasswordKey",r=e+".deviceGroupKey";this.storage.getItem(t)&&(this.deviceKey=this.storage.getItem(t),this.randomPassword=this.storage.getItem(n),this.deviceGroupKey=this.storage.getItem(r))},t.clearCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".deviceKey",n=e+".randomPasswordKey",r=e+".deviceGroupKey";this.storage.removeItem(t),this.storage.removeItem(n),this.storage.removeItem(r)},t.clearCachedTokens=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId(),t=e+"."+this.username+".idToken",n=e+"."+this.username+".accessToken",r=e+"."+this.username+".refreshToken",i=e+".LastAuthUser",o=e+"."+this.username+".clockDrift";this.storage.removeItem(t),this.storage.removeItem(n),this.storage.removeItem(r),this.storage.removeItem(i),this.storage.removeItem(o)},t.getCognitoUserSession=function(e){var t=new N(e),n=new k(e),r=new L(e);return new R({IdToken:t,AccessToken:n,RefreshToken:r})},t.forgotPassword=function(e,t){var n={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:t};this.getUserContextData()&&(n.UserContextData=this.getUserContextData()),this.client.request("ForgotPassword",n,(function(t,n){return t?e.onFailure(t):"function"==typeof e.inputVerificationCode?e.inputVerificationCode(n):e.onSuccess(n)}))},t.confirmPassword=function(e,t,n,r){var i={ClientId:this.pool.getClientId(),Username:this.username,ConfirmationCode:e,Password:t,ClientMetadata:r};this.getUserContextData()&&(i.UserContextData=this.getUserContextData()),this.client.request("ConfirmForgotPassword",i,(function(e){return e?n.onFailure(e):n.onSuccess("SUCCESS")}))},t.getAttributeVerificationCode=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("GetUserAttributeVerificationCode",{AttributeName:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:n},(function(e,n){return e?t.onFailure(e):"function"==typeof t.inputVerificationCode?t.inputVerificationCode(n):t.onSuccess("SUCCESS")}))},t.verifyAttribute=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("VerifyUserAttribute",{AttributeName:e,Code:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(e){return e?n.onFailure(e):n.onSuccess("SUCCESS")}))},t.getDevice=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("GetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey},(function(t,n){return t?e.onFailure(t):e.onSuccess(n)}))},t.forgetSpecificDevice=function(e,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("ForgetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:e},(function(e){return e?t.onFailure(e):t.onSuccess("SUCCESS")}))},t.forgetDevice=function(e){var t=this;this.forgetSpecificDevice(this.deviceKey,{onFailure:e.onFailure,onSuccess:function(n){return t.deviceKey=null,t.deviceGroupKey=null,t.randomPassword=null,t.clearCachedDeviceKeyAndPassword(),e.onSuccess(n)}})},t.setDeviceStatusRemembered=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"remembered"},(function(t){return t?e.onFailure(t):e.onSuccess("SUCCESS")}))},t.setDeviceStatusNotRemembered=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"not_remembered"},(function(t){return t?e.onFailure(t):e.onSuccess("SUCCESS")}))},t.listDevices=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));var r={AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),Limit:e};t&&(r.PaginationToken=t),this.client.request("ListDevices",r,(function(e,t){return e?n.onFailure(e):n.onSuccess(t)}))},t.globalSignOut=function(e){var t=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("GlobalSignOut",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(n){return n?e.onFailure(n):(t.clearCachedUser(),e.onSuccess("SUCCESS"))}))},t.signOut=function(e){var t=this;e&&"function"==typeof e?this.getSession((function(n,r){if(n)return e(n);t.revokeTokens((function(n){t.cleanClientData(),e(n)}))})):this.cleanClientData()},t.revokeTokens=function(e){if(void 0===e&&(e=function(){}),"function"!=typeof e)throw new Error("Invalid revokeTokenCallback. It should be a function.");if(!this.signInUserSession)return e(new Error("User is not authenticated"));if(!this.signInUserSession.getAccessToken())return e(new Error("No Access token available"));var t=this.signInUserSession.getRefreshToken().getToken(),n=this.signInUserSession.getAccessToken();if(this.isSessionRevocable(n)&&t)return this.revokeToken({token:t,callback:e});e()},t.isSessionRevocable=function(e){if(e&&"function"==typeof e.decodePayload)try{return!!e.decodePayload().origin_jti}catch(e){}return!1},t.cleanClientData=function(){this.signInUserSession=null,this.clearCachedUser()},t.revokeToken=function(e){var t=e.token,n=e.callback;this.client.requestWithRetry("RevokeToken",{Token:t,ClientId:this.pool.getClientId()},(function(e){if(e)return n(e);n()}))},t.sendMFASelectionAnswer=function(e,t){var n=this,r={};r.USERNAME=this.username,r.ANSWER=e;var i={ChallengeName:"SELECT_MFA_TYPE",ChallengeResponses:r,ClientId:this.pool.getClientId(),Session:this.Session};this.getUserContextData()&&(i.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",i,(function(r,i){return r?t.onFailure(r):(n.Session=i.Session,"SMS_MFA"===e?t.mfaRequired(i.ChallengeName,i.ChallengeParameters):"SOFTWARE_TOKEN_MFA"===e?t.totpRequired(i.ChallengeName,i.ChallengeParameters):void 0)}))},t.getUserContextData=function(){return this.pool.getUserContextData(this.username)},t.associateSoftwareToken=function(e){var t=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("AssociateSoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t,n){return t?e.onFailure(t):e.associateSecretCode(n.SecretCode)})):this.client.request("AssociateSoftwareToken",{Session:this.Session},(function(n,r){return n?e.onFailure(n):(t.Session=r.Session,e.associateSecretCode(r.SecretCode))}))},t.verifySoftwareToken=function(e,t,n){var r=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("VerifySoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserCode:e,FriendlyDeviceName:t},(function(e,t){return e?n.onFailure(e):n.onSuccess(t)})):this.client.request("VerifySoftwareToken",{Session:this.Session,UserCode:e,FriendlyDeviceName:t},(function(e,t){if(e)return n.onFailure(e);r.Session=t.Session;var i={};i.USERNAME=r.username;var o={ChallengeName:"MFA_SETUP",ClientId:r.pool.getClientId(),ChallengeResponses:i,Session:r.Session};r.getUserContextData()&&(o.UserContextData=r.getUserContextData()),r.client.request("RespondToAuthChallenge",o,(function(e,t){return e?n.onFailure(e):(r.signInUserSession=r.getCognitoUserSession(t.AuthenticationResult),r.cacheTokens(),n.onSuccess(r.signInUserSession))}))}))},e}(),H=(n(214),{userAgent:"aws-amplify/5.0.4 js",product:"",navigator:null,isReactNative:!1});function W(){}"undefined"!=typeof navigator&&navigator.product&&("ReactNative"===(H.product=navigator.product||"",H.navigator=navigator||null,navigator.product)?(H.userAgent="aws-amplify/5.0.4 react-native",H.isReactNative=!0):(H.userAgent="aws-amplify/5.0.4 js",H.isReactNative=!1)),W.prototype.userAgent=H.userAgent;var J=W;function Y(e){var t="function"==typeof Map?new Map:void 0;return(Y=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return Z(e,arguments,ee(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),X(r,e)})(e)}function Z(e,t,n){return(Z=Q()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&X(i,n.prototype),i}).apply(null,arguments)}function Q(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function X(e,t){return(X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ee(e){return(ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var te=function(e){function t(t,n,r,i){var o;return(o=e.call(this,t)||this).code=n,o.name=r,o.statusCode=i,o}return function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,X(e,t)}(t,e),t}(Y(Error)),ne=function(){function e(e,t,n){this.endpoint=t||"https://cognito-idp."+e+".amazonaws.com/";var r=(n||{}).credentials;this.fetchOptions=r?{credentials:r}:{}}var t=e.prototype;return t.promisifyRequest=function(e,t){var n=this;return new Promise((function(r,i){n.request(e,t,(function(e,t){e?i(new te(e.message,e.code,e.name,e.statusCode)):r(t)}))}))},t.requestWithRetry=function(e,t,n){var r=this;(function(e,t,n){return void 0===n&&(n=3e5),function e(t,n,r,i){if(void 0===i&&(i=1),"function"!=typeof t)throw Error("functionToRetry must be a function");return re(t.name+" attempt #"+i+" with args: "+JSON.stringify(n)),t.apply(void 0,n).catch((function(o){if(re("error on "+t.name,o),(s=o)&&s.nonRetryable)throw re(t.name+" non retryable error",o),o;var s,a=r(i,n,o);if(re(t.name+" retrying in "+a+" ms"),!1!==a)return new Promise((function(e){return setTimeout(e,a)})).then((function(){return e(t,n,r,i+1)}));throw o}))}(e,t,function(e){return function(t){var n=100*Math.pow(2,t)+100*Math.random();return!(n>e)&&n}}(n))})((function(t){return new Promise((function(n,i){r.request(e,t,(function(e,t){e?i(e):n(t)}))}))}),[t],5e3).then((function(e){return n(null,e)})).catch((function(e){return n(e)}))},t.request=function(e,t,n){var r,i={"Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"AWSCognitoIdentityProviderService."+e,"X-Amz-User-Agent":J.prototype.userAgent},o=Object.assign({},this.fetchOptions,{headers:i,method:"POST",mode:"cors",cache:"no-cache",body:JSON.stringify(t)});fetch(this.endpoint,o).then((function(e){return r=e,e}),(function(e){if(e instanceof TypeError)throw new Error("Network error");throw e})).then((function(e){return e.json().catch((function(){return{}}))})).then((function(e){if(r.ok)return n(null,e);var t=(e.__type||e.code).split("#").pop(),i=new Error(e.message||e.Message||null);return i.name=t,i.code=t,n(i)})).catch((function(e){if(r&&r.headers&&r.headers.get("x-amzn-errortype"))try{var t=r.headers.get("x-amzn-errortype").split(":")[0],i=new Error(r.status?r.status.toString():null);return i.code=t,i.name=t,i.statusCode=r.status,n(i)}catch(t){return n(e)}else e instanceof Error&&"Network error"===e.message&&(e.code="NetworkError");return n(e)}))},e}(),re=function(){};Error;var ie=function(){function e(e,t){var n=e||{},r=n.UserPoolId,i=n.ClientId,o=n.endpoint,s=n.fetchOptions,a=n.AdvancedSecurityDataCollectionFlag;if(!r||!i)throw new Error("Both UserPoolId and ClientId are required.");if(r.length>55||!/^[\w-]+_[0-9a-zA-Z]+$/.test(r))throw new Error("Invalid UserPoolId format.");var u=r.split("_")[0];this.userPoolId=r,this.clientId=i,this.client=new ne(u,o,s),this.advancedSecurityDataCollectionFlag=!1!==a,this.storage=e.Storage||(new K).getStorage(),t&&(this.wrapRefreshSessionCallback=t)}var t=e.prototype;return t.getUserPoolId=function(){return this.userPoolId},t.getUserPoolName=function(){return this.getUserPoolId().split("_")[1]},t.getClientId=function(){return this.clientId},t.signUp=function(e,t,n,r,i,o){var s=this,a={ClientId:this.clientId,Username:e,Password:t,UserAttributes:n,ValidationData:r,ClientMetadata:o};this.getUserContextData(e)&&(a.UserContextData=this.getUserContextData(e)),this.client.request("SignUp",a,(function(t,n){if(t)return i(t,null);var r={Username:e,Pool:s,Storage:s.storage},o={user:new G(r),userConfirmed:n.UserConfirmed,userSub:n.UserSub,codeDeliveryDetails:n.CodeDeliveryDetails};return i(null,o)}))},t.getCurrentUser=function(){var e="CognitoIdentityServiceProvider."+this.clientId+".LastAuthUser",t=this.storage.getItem(e);if(t){var n={Username:t,Pool:this,Storage:this.storage};return new G(n)}return null},t.getUserContextData=function(e){if("undefined"!=typeof AmazonCognitoAdvancedSecurityData){var t=AmazonCognitoAdvancedSecurityData;if(this.advancedSecurityDataCollectionFlag){var n=t.getData(e,this.userPoolId,this.clientId);if(n)return{EncodedData:n}}return{}}},e}(),oe=n(71),se=function(){function e(e){if(!e.domain)throw new Error("The domain of cookieStorage can not be undefined.");if(this.domain=e.domain,e.path?this.path=e.path:this.path="/",Object.prototype.hasOwnProperty.call(e,"expires")?this.expires=e.expires:this.expires=365,Object.prototype.hasOwnProperty.call(e,"secure")?this.secure=e.secure:this.secure=!0,Object.prototype.hasOwnProperty.call(e,"sameSite")){if(!["strict","lax","none"].includes(e.sameSite))throw new Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if("none"===e.sameSite&&!this.secure)throw new Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=e.sameSite}else this.sameSite=null}var t=e.prototype;return t.setItem=function(e,t){var n={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(n.sameSite=this.sameSite),oe.set(e,t,n),oe.get(e)},t.getItem=function(e){return oe.get(e)},t.removeItem=function(e){var t={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(t.sameSite=this.sameSite),oe.remove(e,t)},t.clear=function(){for(var e=oe.get(),t=Object.keys(e).length,n=0;n<t;++n)this.removeItem(Object.keys(e)[n]);return{}},e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(20),i={keyPrefix:"aws-amplify-cache",capacityInBytes:1048576,itemMaxSize:21e4,defaultTTL:2592e5,defaultPriority:5,warningThreshold:.8,storage:(new(n(77).a)).getStorage()};function o(e){var t=0;t=e.length;for(var n=e.length;n>=0;n-=1){var r=e.charCodeAt(n);r>127&&r<=2047?t+=1:r>2047&&r<=65535&&(t+=2),r>=56320&&r<=57343&&(n-=1)}return t}function s(){return(new Date).getTime()}function a(e){return Number.isInteger?Number.isInteger(e):function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}(e)}var u={},c=(function(){function e(){}e.clear=function(){u={}},e.getItem=function(e){return u[e]||null},e.setItem=function(e,t){u[e]=t},e.removeItem=function(e){delete u[e]}}(),n(48));function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d,f=new c.a("StorageCache"),p=function(){function e(e){this.config=Object.assign({},e),this.cacheCurSizeKey=this.config.keyPrefix+"CurSize",this.checkConfig()}return e.prototype.getModuleName=function(){return"Cache"},e.prototype.checkConfig=function(){a(this.config.capacityInBytes)||(f.error("Invalid parameter: capacityInBytes. It should be an Integer. Setting back to default."),this.config.capacityInBytes=i.capacityInBytes),a(this.config.itemMaxSize)||(f.error("Invalid parameter: itemMaxSize. It should be an Integer. Setting back to default."),this.config.itemMaxSize=i.itemMaxSize),a(this.config.defaultTTL)||(f.error("Invalid parameter: defaultTTL. It should be an Integer. Setting back to default."),this.config.defaultTTL=i.defaultTTL),a(this.config.defaultPriority)||(f.error("Invalid parameter: defaultPriority. It should be an Integer. Setting back to default."),this.config.defaultPriority=i.defaultPriority),this.config.itemMaxSize>this.config.capacityInBytes&&(f.error("Invalid parameter: itemMaxSize. It should be smaller than capacityInBytes. Setting back to default."),this.config.itemMaxSize=i.itemMaxSize),(this.config.defaultPriority>5||this.config.defaultPriority<1)&&(f.error("Invalid parameter: defaultPriority. It should be between 1 and 5. Setting back to default."),this.config.defaultPriority=i.defaultPriority),(Number(this.config.warningThreshold)>1||Number(this.config.warningThreshold)<0)&&(f.error("Invalid parameter: warningThreshold. It should be between 0 and 1. Setting back to default."),this.config.warningThreshold=i.warningThreshold),this.config.capacityInBytes>5242880&&(f.error("Cache Capacity should be less than 5MB. Setting back to default. Setting back to default."),this.config.capacityInBytes=i.capacityInBytes)},e.prototype.fillCacheItem=function(e,t,n){var r={key:e,data:t,timestamp:s(),visitedTime:s(),priority:n.priority,expires:n.expires,type:l(t),byteSize:0};return r.byteSize=o(JSON.stringify(r)),r.byteSize=o(JSON.stringify(r)),r},e.prototype.configure=function(e){return e?(e.keyPrefix&&f.warn("Don't try to configure keyPrefix!"),this.config=Object.assign({},this.config,e,e.Cache),this.checkConfig(),this.config):this.config},e}(),h=(d=function(e,t){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}d(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),v=new c.a("Cache"),g=new(function(e){function t(t){var n=this,r=t?Object.assign({},i,t):i;return(n=e.call(this,r)||this).config.storage=r.storage,n.getItem=n.getItem.bind(n),n.setItem=n.setItem.bind(n),n.removeItem=n.removeItem.bind(n),n}return h(t,e),t.prototype._decreaseCurSizeInBytes=function(e){var t=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(t-e).toString())},t.prototype._increaseCurSizeInBytes=function(e){var t=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(t+e).toString())},t.prototype._refreshItem=function(e,t){return e.visitedTime=s(),this.config.storage.setItem(t,JSON.stringify(e)),e},t.prototype._isExpired=function(e){var t=this.config.storage.getItem(e),n=JSON.parse(t);return s()>=n.expires},t.prototype._removeItem=function(e,t){var n=t||JSON.parse(this.config.storage.getItem(e)).byteSize;this._decreaseCurSizeInBytes(n),this.config.storage.removeItem(e)},t.prototype._setItem=function(e,t){this._increaseCurSizeInBytes(t.byteSize);try{this.config.storage.setItem(e,JSON.stringify(t))}catch(e){this._decreaseCurSizeInBytes(t.byteSize),v.error("Failed to set item "+e)}},t.prototype._sizeToPop=function(e){var t=this.getCacheCurSize()+e-this.config.capacityInBytes,n=(1-this.config.warningThreshold)*this.config.capacityInBytes;return t>n?t:n},t.prototype._isCacheFull=function(e){return e+this.getCacheCurSize()>this.config.capacityInBytes},t.prototype._findValidKeys=function(){for(var e=[],t=[],n=0;n<this.config.storage.length;n+=1)t.push(this.config.storage.key(n));for(n=0;n<t.length;n+=1){var r=t[n];0===r.indexOf(this.config.keyPrefix)&&r!==this.cacheCurSizeKey&&(this._isExpired(r)?this._removeItem(r):e.push(r))}return e},t.prototype._popOutItems=function(e,t){for(var n=[],r=t,i=0;i<e.length;i+=1){var o=this.config.storage.getItem(e[i]);if(null!=o){var s=JSON.parse(o);n.push(s)}}for(n.sort((function(e,t){return e.priority>t.priority?-1:e.priority<t.priority?1:e.visitedTime<t.visitedTime?-1:1})),i=0;i<n.length;i+=1)if(this._removeItem(n[i].key,n[i].byteSize),(r-=n[i].byteSize)<=0)return},t.prototype.setItem=function(e,t,n){v.log("Set item: key is "+e+", value is "+t+" with options: "+n);var r=this.config.keyPrefix+e;if(r!==this.config.keyPrefix&&r!==this.cacheCurSizeKey)if(void 0!==t){var i={priority:n&&void 0!==n.priority?n.priority:this.config.defaultPriority,expires:n&&void 0!==n.expires?n.expires:this.config.defaultTTL+s()};if(i.priority<1||i.priority>5)v.warn("Invalid parameter: priority due to out or range. It should be within 1 and 5.");else{var o=this.fillCacheItem(r,t,i);if(o.byteSize>this.config.itemMaxSize)v.warn("Item with key: "+e+" you are trying to put into is too big!");else try{var a=this.config.storage.getItem(r);if(a&&this._removeItem(r,JSON.parse(a).byteSize),this._isCacheFull(o.byteSize)){var u=this._findValidKeys();if(this._isCacheFull(o.byteSize)){var c=this._sizeToPop(o.byteSize);this._popOutItems(u,c)}}this._setItem(r,o)}catch(e){v.warn("setItem failed! "+e)}}}else v.warn("The value of item should not be undefined!");else v.warn("Invalid key: should not be empty or 'CurSize'")},t.prototype.getItem=function(e,t){v.log("Get item: key is "+e+" with options "+t);var n=null,r=this.config.keyPrefix+e;if(r===this.config.keyPrefix||r===this.cacheCurSizeKey)return v.warn("Invalid key: should not be empty or 'CurSize'"),null;try{if(null!=(n=this.config.storage.getItem(r))){if(!this._isExpired(r)){var i=JSON.parse(n);return(i=this._refreshItem(i,r)).data}this._removeItem(r,JSON.parse(n).byteSize),n=null}if(t&&void 0!==t.callback){var o=t.callback();return null!==o&&this.setItem(e,o,t),o}return null}catch(e){return v.warn("getItem failed! "+e),null}},t.prototype.removeItem=function(e){v.log("Remove item: key is "+e);var t=this.config.keyPrefix+e;if(t!==this.config.keyPrefix&&t!==this.cacheCurSizeKey)try{var n=this.config.storage.getItem(t);n&&this._removeItem(t,JSON.parse(n).byteSize)}catch(e){v.warn("removeItem failed! "+e)}},t.prototype.clear=function(){v.log("Clear Cache");for(var e=[],t=0;t<this.config.storage.length;t+=1){var n=this.config.storage.key(t);0===n.indexOf(this.config.keyPrefix)&&e.push(n)}try{for(t=0;t<e.length;t+=1)this.config.storage.removeItem(e[t])}catch(e){v.warn("clear failed! "+e)}},t.prototype.getAllKeys=function(){for(var e=[],t=0;t<this.config.storage.length;t+=1){var n=this.config.storage.key(t);0===n.indexOf(this.config.keyPrefix)&&n!==this.cacheCurSizeKey&&e.push(n.substring(this.config.keyPrefix.length))}return e},t.prototype.getCacheCurSize=function(){var e=this.config.storage.getItem(this.cacheCurSizeKey);return e||(this.config.storage.setItem(this.cacheCurSizeKey,"0"),e="0"),Number(e)},t.prototype.createInstance=function(e){return e.keyPrefix&&e.keyPrefix!==i.keyPrefix||(v.error("invalid keyPrefix, setting keyPrefix with timeStamp"),e.keyPrefix=s.toString()),new t(e)},t}(p));t.b=g,r.a.register(g)},function(e,t,n){"use strict";n.d(t,"b",(function(){return N})),n.d(t,"a",(function(){return U}));for(var r=n(2),i={},o={},s=0;s<256;s++){var a=s.toString(16).toLowerCase();1===a.length&&(a="0"+a),i[s]=a,o[a]=s}function u(e){for(var t="",n=0;n<e.byteLength;n++)t+=i[e[n]];return t}var c="X-Amz-Date".toLowerCase(),l=["authorization",c,"date"],d="X-Amz-Signature".toLowerCase(),f="X-Amz-Security-Token".toLowerCase(),p={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},h=/^proxy-/,v=/^sec-/,g="AWS4-HMAC-SHA256-PAYLOAD",m={},y=[];function b(e,t,n){return e+"/"+t+"/"+n+"/aws4_request"}function w(e,t,n){var r=new e(t);return r.update(n),r.digest()}function _(e,t,n){var i,o,s=e.headers,a={};try{for(var u=Object(r.__values)(Object.keys(s).sort()),c=u.next();!c.done;c=u.next()){var l=c.value,d=l.toLowerCase();(d in p||(null==t?void 0:t.has(d))||h.test(d)||v.test(d))&&(!n||n&&!n.has(d))||(a[d]=s[l].trim().replace(/\s+/g," "))}}catch(e){i={error:e}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}return a}var S=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,E)},E=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()};function C(e,t){var n=e.headers,i=e.body;return Object(r.__awaiter)(this,void 0,void 0,(function(){var e,o,s,a,c,l,d;return Object(r.__generator)(this,(function(f){switch(f.label){case 0:try{for(e=Object(r.__values)(Object.keys(n)),o=e.next();!o.done;o=e.next())if("x-amz-content-sha256"===(s=o.value).toLowerCase())return[2,n[s]]}catch(e){l={error:e}}finally{try{o&&!o.done&&(d=e.return)&&d.call(e)}finally{if(l)throw l.error}}return null!=i?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof i||ArrayBuffer.isView(i)||(p=i,"function"==typeof ArrayBuffer&&p instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(p))?((a=new t).update(i),c=u,[4,a.digest()]):[3,3];case 2:return[2,c.apply(void 0,[f.sent()])];case 3:return[2,"UNSIGNED-PAYLOAD"]}var p}))}))}function A(e){var t=e.headers,n=e.query,i=Object(r.__rest)(e,["headers","query"]);return Object(r.__assign)(Object(r.__assign)({},i),{headers:Object(r.__assign)({},t),query:n?O(n):void 0})}function O(e){return Object.keys(e).reduce((function(t,n){var i,o=e[n];return Object(r.__assign)(Object(r.__assign)({},t),((i={})[n]=Array.isArray(o)?Object(r.__spread)(o):o,i))}),{})}function I(e){var t,n;e="function"==typeof e.clone?e.clone():A(e);try{for(var i=Object(r.__values)(Object.keys(e.headers)),o=i.next();!o.done;o=i.next()){var s=o.value;l.indexOf(s.toLowerCase())>-1&&delete e.headers[s]}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return e}var T=function(){function e(e){var t=e.applyChecksum,n=e.credentials,r=e.region,i=e.service,o=e.sha256,s=e.uriEscapePath,a=void 0===s||s;this.service=i,this.sha256=o,this.uriEscapePath=a,this.applyChecksum="boolean"!=typeof t||t,this.regionProvider=k(r),this.credentialProvider=D(n)}return e.prototype.presign=function(e,t){return void 0===t&&(t={}),Object(r.__awaiter)(this,void 0,void 0,(function(){var n,i,o,s,a,u,c,l,d,f,p,h,v,g,m,y,w,S,E,O,T,k,D,N;return Object(r.__generator)(this,(function(L){switch(L.label){case 0:return n=t.signingDate,i=void 0===n?new Date:n,o=t.expiresIn,s=void 0===o?3600:o,a=t.unsignableHeaders,u=t.unhoistableHeaders,c=t.signableHeaders,l=t.signingRegion,d=t.signingService,[4,this.credentialProvider()];case 1:return f=L.sent(),null==l?[3,2]:(h=l,[3,4]);case 2:return[4,this.regionProvider()];case 3:h=L.sent(),L.label=4;case 4:return p=h,v=x(i),g=v.longDate,m=v.shortDate,s>604800?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(y=b(m,p,null!=d?d:this.service),w=function(e,t){var n,i,o;void 0===t&&(t={});var s="function"==typeof e.clone?e.clone():A(e),a=s.headers,u=s.query,c=void 0===u?{}:u;try{for(var l=Object(r.__values)(Object.keys(a)),d=l.next();!d.done;d=l.next()){var f=d.value,p=f.toLowerCase();"x-amz-"!==p.substr(0,6)||(null===(o=t.unhoistableHeaders)||void 0===o?void 0:o.has(p))||(c[f]=a[f],delete a[f])}}catch(e){n={error:e}}finally{try{d&&!d.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}return Object(r.__assign)(Object(r.__assign)({},e),{headers:a,query:c})}(I(e),{unhoistableHeaders:u}),f.sessionToken&&(w.query["X-Amz-Security-Token"]=f.sessionToken),w.query["X-Amz-Algorithm"]="AWS4-HMAC-SHA256",w.query["X-Amz-Credential"]=f.accessKeyId+"/"+y,w.query["X-Amz-Date"]=g,w.query["X-Amz-Expires"]=s.toString(10),S=_(w,a,c),w.query["X-Amz-SignedHeaders"]=P(S),E=w.query,O="X-Amz-Signature",T=this.getSignature,k=[g,y,this.getSigningKey(f,p,m,d)],D=this.createCanonicalRequest,N=[w,S],[4,C(e,this.sha256)]);case 5:return[4,T.apply(this,k.concat([D.apply(this,N.concat([L.sent()]))]))];case 6:return E[O]=L.sent(),[2,w]}}))}))},e.prototype.sign=function(e,t){return Object(r.__awaiter)(this,void 0,void 0,(function(){return Object(r.__generator)(this,(function(n){return"string"==typeof e?[2,this.signString(e,t)]:e.headers&&e.payload?[2,this.signEvent(e,t)]:[2,this.signRequest(e,t)]}))}))},e.prototype.signEvent=function(e,t){var n=e.headers,i=e.payload,o=t.signingDate,s=void 0===o?new Date:o,a=t.priorSignature,c=t.signingRegion,l=t.signingService;return Object(r.__awaiter)(this,void 0,void 0,(function(){var e,t,o,d,f,p,h,v,m,y,w;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return null==c?[3,1]:(t=c,[3,3]);case 1:return[4,this.regionProvider()];case 2:t=r.sent(),r.label=3;case 3:return e=t,o=x(s),d=o.shortDate,f=o.longDate,p=b(d,e,null!=l?l:this.service),[4,C({headers:{},body:i},this.sha256)];case 4:return h=r.sent(),(v=new this.sha256).update(n),y=u,[4,v.digest()];case 5:return m=y.apply(void 0,[r.sent()]),w=[g,f,p,a,m,h].join("\n"),[2,this.signString(w,{signingDate:s,signingRegion:e,signingService:l})]}}))}))},e.prototype.signString=function(e,t){var n=void 0===t?{}:t,i=n.signingDate,o=void 0===i?new Date:i,s=n.signingRegion,a=n.signingService;return Object(r.__awaiter)(this,void 0,void 0,(function(){var t,n,i,c,l,d,f,p;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return[4,this.credentialProvider()];case 1:return t=r.sent(),null==s?[3,2]:(i=s,[3,4]);case 2:return[4,this.regionProvider()];case 3:i=r.sent(),r.label=4;case 4:return n=i,c=x(o).shortDate,f=(d=this.sha256).bind,[4,this.getSigningKey(t,n,c,a)];case 5:return(l=new(f.apply(d,[void 0,r.sent()]))).update(e),p=u,[4,l.digest()];case 6:return[2,p.apply(void 0,[r.sent()])]}}))}))},e.prototype.signRequest=function(e,t){var n=void 0===t?{}:t,i=n.signingDate,o=void 0===i?new Date:i,s=n.signableHeaders,a=n.unsignableHeaders,u=n.signingRegion,l=n.signingService;return Object(r.__awaiter)(this,void 0,void 0,(function(){var t,n,i,d,p,h,v,g,m,y,w;return Object(r.__generator)(this,(function(S){switch(S.label){case 0:return[4,this.credentialProvider()];case 1:return t=S.sent(),null==u?[3,2]:(i=u,[3,4]);case 2:return[4,this.regionProvider()];case 3:i=S.sent(),S.label=4;case 4:return n=i,d=I(e),p=x(o),h=p.longDate,v=p.shortDate,g=b(v,n,null!=l?l:this.service),d.headers[c]=h,t.sessionToken&&(d.headers[f]=t.sessionToken),[4,C(d,this.sha256)];case 5:return m=S.sent(),!function(e,t){var n,i;e=e.toLowerCase();try{for(var o=Object(r.__values)(Object.keys(t)),s=o.next();!s.done;s=o.next())if(e===s.value.toLowerCase())return!0}catch(e){n={error:e}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return!1}("x-amz-content-sha256",d.headers)&&this.applyChecksum&&(d.headers["x-amz-content-sha256"]=m),y=_(d,a,s),[4,this.getSignature(h,g,this.getSigningKey(t,n,v,l),this.createCanonicalRequest(d,y,m))];case 6:return w=S.sent(),d.headers.authorization="AWS4-HMAC-SHA256 Credential="+t.accessKeyId+"/"+g+", SignedHeaders="+P(y)+", Signature="+w,[2,d]}}))}))},e.prototype.createCanonicalRequest=function(e,t,n){var i=Object.keys(t).sort();return e.method+"\n"+this.getCanonicalPath(e)+"\n"+function(e){var t,n,i=e.query,o=void 0===i?{}:i,s=[],a={},u=function(e){if(e.toLowerCase()===d)return"continue";s.push(e);var t=o[e];"string"==typeof t?a[e]=S(e)+"="+S(t):Array.isArray(t)&&(a[e]=t.slice(0).sort().reduce((function(t,n){return t.concat([S(e)+"="+S(n)])}),[]).join("&"))};try{for(var c=Object(r.__values)(Object.keys(o).sort()),l=c.next();!l.done;l=c.next())u(l.value)}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}return s.map((function(e){return a[e]})).filter((function(e){return e})).join("&")}(e)+"\n"+i.map((function(e){return e+":"+t[e]})).join("\n")+"\n\n"+i.join(";")+"\n"+n},e.prototype.createStringToSign=function(e,t,n){return Object(r.__awaiter)(this,void 0,void 0,(function(){var i,o;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return(i=new this.sha256).update(n),[4,i.digest()];case 1:return o=r.sent(),[2,"AWS4-HMAC-SHA256\n"+e+"\n"+t+"\n"+u(o)]}}))}))},e.prototype.getCanonicalPath=function(e){var t=e.path;return this.uriEscapePath?"/"+encodeURIComponent(t.replace(/^\//,"")).replace(/%2F/g,"/"):t},e.prototype.getSignature=function(e,t,n,i){return Object(r.__awaiter)(this,void 0,void 0,(function(){var o,s,a,c,l;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return[4,this.createStringToSign(e,t,i)];case 1:return o=r.sent(),c=(a=this.sha256).bind,[4,n];case 2:return(s=new(c.apply(a,[void 0,r.sent()]))).update(o),l=u,[4,s.digest()];case 3:return[2,l.apply(void 0,[r.sent()])]}}))}))},e.prototype.getSigningKey=function(e,t,n,i){return function(e,t,n,i,o){return Object(r.__awaiter)(void 0,void 0,void 0,(function(){var s,a,c,l,d,f,p,h,v;return Object(r.__generator)(this,(function(g){switch(g.label){case 0:return[4,w(e,t.secretAccessKey,t.accessKeyId)];case 1:if(s=g.sent(),(a=n+":"+i+":"+o+":"+u(s)+":"+t.sessionToken)in m)return[2,m[a]];for(y.push(a);y.length>50;)delete m[y.shift()];c="AWS4"+t.secretAccessKey,g.label=2;case 2:g.trys.push([2,7,8,9]),l=Object(r.__values)([n,i,o,"aws4_request"]),d=l.next(),g.label=3;case 3:return d.done?[3,6]:(f=d.value,[4,w(e,c,f)]);case 4:c=g.sent(),g.label=5;case 5:return d=l.next(),[3,3];case 6:return[3,9];case 7:return p=g.sent(),h={error:p},[3,9];case 8:try{d&&!d.done&&(v=l.return)&&v.call(l)}finally{if(h)throw h.error}return[7];case 9:return[2,m[a]=c]}}))}))}(this.sha256,e,n,t,i||this.service)},e}(),x=function(e){var t=function(e){return function(e){return"number"==typeof e?new Date(1e3*e):"string"==typeof e?Number(e)?new Date(1e3*Number(e)):new Date(e):e}(e).toISOString().replace(/\.\d{3}Z$/,"Z")}(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.substr(0,8)}},P=function(e){return Object.keys(e).sort().join(";")},k=function(e){if("string"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e},D=function(e){if("object"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e};function N(e){var t,n=this,i=L(e.credentials||e.credentialDefaultProvider(e)),o=e.signingEscapePath,s=void 0===o||o,a=e.systemClockOffset,u=void 0===a?e.systemClockOffset||0:a,c=e.sha256;return t=e.signer?L(e.signer):function(){return L(e.region)().then((function(t){return Object(r.__awaiter)(n,void 0,void 0,(function(){return Object(r.__generator)(this,(function(n){switch(n.label){case 0:return[4,e.regionInfoProvider(t)];case 1:return[2,[n.sent()||{},t]]}}))}))})).then((function(t){var n=Object(r.__read)(t,2),o=n[0],a=n[1],u=o.signingRegion,l=o.signingService;return e.signingRegion=e.signingRegion||u||a,e.signingName=e.signingName||l||e.serviceId,new T({credentials:i,region:e.signingRegion,service:e.signingName,sha256:c,uriEscapePath:s})}))},Object(r.__assign)(Object(r.__assign)({},e),{systemClockOffset:u,signingEscapePath:s,credentials:i,signer:t})}function L(e){if("object"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e}var M=n(3);function j(e){return function(t,n){return function(i){return Object(r.__awaiter)(this,void 0,void 0,(function(){var o,s,a,u,c,l,d,f,p;return Object(r.__generator)(this,(function(h){switch(h.label){case 0:return M.a.isInstance(i.request)?"function"!=typeof e.signer?[3,2]:[4,e.signer()]:[2,t(i)];case 1:return s=h.sent(),[3,3];case 2:s=e.signer,h.label=3;case 3:return o=s,u=t,c=[Object(r.__assign)({},i)],p={},[4,o.sign(i.request,{signingDate:new Date(Date.now()+e.systemClockOffset),signingRegion:n.signing_region,signingService:n.signing_service})];case 4:return[4,u.apply(void 0,[r.__assign.apply(void 0,c.concat([(p.request=h.sent(),p)]))])];case 5:return a=h.sent(),l=a.response.headers,(d=l&&(l.date||l.Date))&&(v=f=Date.parse(d),g=e.systemClockOffset,Math.abs(function(e){return new Date(Date.now()+e)}(g).getTime()-v)>=3e5&&(e.systemClockOffset=f-Date.now())),[2,a]}var v,g}))}))}}}var R={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},U=function(e){return{applyToStack:function(t){t.addRelativeTo(j(e),R)}}}},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),function(e){e.ENV="env",e.CONFIG="shared config entry"}(r||(r={}));var i=function(e,t,n){if(t in e){if("true"===e[t])return!0;if("false"===e[t])return!1;throw new Error("Cannot load ".concat(n,' "').concat(t,'". Expected "true" or "false", got ').concat(e[t],"."))}}},function(e,t,n){"use strict";var r,i;n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),function(e){e.CONNECTION_CLOSED="Connection closed",e.CONNECTION_FAILED="Connection failed",e.REALTIME_SUBSCRIPTION_INIT_ERROR="AppSync Realtime subscription init error",e.SUBSCRIPTION_ACK="Subscription ack",e.TIMEOUT_DISCONNECT="Timeout disconnect"}(r||(r={})),function(e){e.Connected="Connected",e.ConnectedPendingNetwork="ConnectedPendingNetwork",e.ConnectionDisrupted="ConnectionDisrupted",e.ConnectionDisruptedPendingNetwork="ConnectionDisruptedPendingNetwork",e.Connecting="Connecting",e.ConnectedPendingDisconnect="ConnectedPendingDisconnect",e.Disconnected="Disconnected",e.ConnectedPendingKeepAlive="ConnectedPendingKeepAlive"}(i||(i={}))},function(e,t,n){var r=n(220),i=n(221),o=i;o.v1=r,o.v4=i,e.exports=o},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.DEFAULT_MSG="Authentication Error",e.EMPTY_EMAIL="Email cannot be empty",e.EMPTY_PHONE="Phone number cannot be empty",e.EMPTY_USERNAME="Username cannot be empty",e.INVALID_USERNAME="The username should either be a string or one of the sign in types",e.EMPTY_PASSWORD="Password cannot be empty",e.EMPTY_CODE="Confirmation code cannot be empty",e.SIGN_UP_ERROR="Error creating account",e.NO_MFA="No valid MFA method provided",e.INVALID_MFA="Invalid MFA type",e.EMPTY_CHALLENGE="Challenge response cannot be empty",e.NO_USER_SESSION="Failed to get the session because the user is empty",e.NETWORK_ERROR="Network Error",e.DEVICE_CONFIG="Device tracking has not been configured in this User Pool",e.AUTOSIGNIN_ERROR="Please use your credentials to sign in"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"e",(function(){return f})),n.d(t,"f",(function(){return p})),n.d(t,"i",(function(){return h})),n.d(t,"a",(function(){return g})),n.d(t,"d",(function(){return m})),n.d(t,"g",(function(){return y})),n.d(t,"h",(function(){return b})),n.d(t,"n",(function(){return _})),n.d(t,"o",(function(){return S})),n.d(t,"j",(function(){return E})),n.d(t,"k",(function(){return C})),n.d(t,"l",(function(){return A})),n.d(t,"m",(function(){return O}));var r,i,o,s,a=n(0),u=n(5),c=n(33),l=function(e){function t(n){var r=e.call(this,Object(a.a)({name:"BadRequestException",$fault:"client"},n))||this;return r.name="BadRequestException",r.$fault="client",Object.setPrototypeOf(r,t.prototype),r}return Object(a.c)(t,e),t}(c.a),d=function(e){function t(n){var r=e.call(this,Object(a.a)({name:"ConflictException",$fault:"client"},n))||this;return r.name="ConflictException",r.$fault="client",Object.setPrototypeOf(r,t.prototype),r}return Object(a.c)(t,e),t}(c.a),f=function(e){function t(n){var r=e.call(this,Object(a.a)({name:"InternalFailureException",$fault:"server"},n))||this;return r.name="InternalFailureException",r.$fault="server",Object.setPrototypeOf(r,t.prototype),r}return Object(a.c)(t,e),t}(c.a),p=function(e){function t(n){var r=e.call(this,Object(a.a)({name:"LimitExceededException",$fault:"client"},n))||this;return r.name="LimitExceededException",r.$fault="client",Object.setPrototypeOf(r,t.prototype),r.retryAfterSeconds=n.retryAfterSeconds,r}return Object(a.c)(t,e),t}(c.a),h=function(e){function t(n){var r=e.call(this,Object(a.a)({name:"NotFoundException",$fault:"client"},n))||this;return r.name="NotFoundException",r.$fault="client",Object.setPrototypeOf(r,t.prototype),r}return Object(a.c)(t,e),t}(c.a);!function(e){e.FAILED="Failed",e.FULFILLED="Fulfilled",e.READY_FOR_FULFILLMENT="ReadyForFulfillment"}(r||(r={})),function(e){e.COMPOSITE="Composite",e.CUSTOM_PAYLOAD="CustomPayload",e.PLAIN_TEXT="PlainText",e.SSML="SSML"}(i||(i={})),function(e){e.CLOSE="Close",e.CONFIRM_INTENT="ConfirmIntent",e.DELEGATE="Delegate",e.ELICIT_INTENT="ElicitIntent",e.ELICIT_SLOT="ElicitSlot"}(o||(o={})),function(e){e.CONFIRMED="Confirmed",e.DENIED="Denied",e.NONE="None"}(s||(s={}));var v,g=function(e){function t(n){var r=e.call(this,Object(a.a)({name:"BadGatewayException",$fault:"server"},n))||this;return r.name="BadGatewayException",r.$fault="server",Object.setPrototypeOf(r,t.prototype),r.Message=n.Message,r}return Object(a.c)(t,e),t}(c.a),m=function(e){function t(n){var r=e.call(this,Object(a.a)({name:"DependencyFailedException",$fault:"client"},n))||this;return r.name="DependencyFailedException",r.$fault="client",Object.setPrototypeOf(r,t.prototype),r.Message=n.Message,r}return Object(a.c)(t,e),t}(c.a),y=function(e){function t(n){var r=e.call(this,Object(a.a)({name:"LoopDetectedException",$fault:"server"},n))||this;return r.name="LoopDetectedException",r.$fault="server",Object.setPrototypeOf(r,t.prototype),r.Message=n.Message,r}return Object(a.c)(t,e),t}(c.a),b=function(e){function t(n){var r=e.call(this,Object(a.a)({name:"NotAcceptableException",$fault:"client"},n))||this;return r.name="NotAcceptableException",r.$fault="client",Object.setPrototypeOf(r,t.prototype),r}return Object(a.c)(t,e),t}(c.a);!function(e){e.CONFIRM_INTENT="ConfirmIntent",e.ELICIT_INTENT="ElicitIntent",e.ELICIT_SLOT="ElicitSlot",e.FAILED="Failed",e.FULFILLED="Fulfilled",e.READY_FOR_FULFILLMENT="ReadyForFulfillment"}(v||(v={}));var w,_=function(e){function t(n){var r=e.call(this,Object(a.a)({name:"RequestTimeoutException",$fault:"client"},n))||this;return r.name="RequestTimeoutException",r.$fault="client",Object.setPrototypeOf(r,t.prototype),r}return Object(a.c)(t,e),t}(c.a),S=function(e){function t(n){var r=e.call(this,Object(a.a)({name:"UnsupportedMediaTypeException",$fault:"client"},n))||this;return r.name="UnsupportedMediaTypeException",r.$fault="client",Object.setPrototypeOf(r,t.prototype),r}return Object(a.c)(t,e),t}(c.a);!function(e){e.GENERIC="application/vnd.amazonaws.card.generic"}(w||(w={}));var E=function(e){return Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)({},e),e.sessionAttributes&&{sessionAttributes:u.d}),e.requestAttributes&&{requestAttributes:u.d}),e.activeContexts&&{activeContexts:u.d})},C=function(e){return Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)({},e),e.message&&{message:u.d}),e.encodedMessage&&{encodedMessage:u.d}),e.encodedInputTranscript&&{encodedInputTranscript:u.d}),e.activeContexts&&{activeContexts:u.d})},A=function(e){return Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)({},e),e.sessionAttributes&&{sessionAttributes:u.d}),e.requestAttributes&&{requestAttributes:u.d}),e.inputText&&{inputText:u.d}),e.activeContexts&&{activeContexts:u.d})},O=function(e){return Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)({},e),e.alternativeIntents&&{alternativeIntents:e.alternativeIntents.map((function(e){return function(e){return Object(a.a)(Object(a.a)({},e),e.slots&&{slots:u.d})}(e)}))}),e.slots&&{slots:u.d}),e.sessionAttributes&&{sessionAttributes:u.d}),e.message&&{message:u.d}),e.activeContexts&&{activeContexts:u.d})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(0),i=function(e){function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r}return Object(r.c)(t,e),t}(n(5).e)},function(e,t,n){"use strict";(function(e){n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return g}));var r=[{type:"text/plain",ext:"txt"},{type:"text/html",ext:"html"},{type:"text/javascript",ext:"js"},{type:"text/css",ext:"css"},{type:"text/csv",ext:"csv"},{type:"text/yaml",ext:"yml"},{type:"text/yaml",ext:"yaml"},{type:"text/calendar",ext:"ics"},{type:"text/calendar",ext:"ical"},{type:"image/apng",ext:"apng"},{type:"image/bmp",ext:"bmp"},{type:"image/gif",ext:"gif"},{type:"image/x-icon",ext:"ico"},{type:"image/x-icon",ext:"cur"},{type:"image/jpeg",ext:"jpg"},{type:"image/jpeg",ext:"jpeg"},{type:"image/jpeg",ext:"jfif"},{type:"image/jpeg",ext:"pjp"},{type:"image/jpeg",ext:"pjpeg"},{type:"image/png",ext:"png"},{type:"image/svg+xml",ext:"svg"},{type:"image/tiff",ext:"tif"},{type:"image/tiff",ext:"tiff"},{type:"image/webp",ext:"webp"},{type:"application/json",ext:"json"},{type:"application/xml",ext:"xml"},{type:"application/x-sh",ext:"sh"},{type:"application/zip",ext:"zip"},{type:"application/x-rar-compressed",ext:"rar"},{type:"application/x-tar",ext:"tar"},{type:"application/x-bzip",ext:"bz"},{type:"application/x-bzip2",ext:"bz2"},{type:"application/pdf",ext:"pdf"},{type:"application/java-archive",ext:"jar"},{type:"application/msword",ext:"doc"},{type:"application/vnd.ms-excel",ext:"xls"},{type:"application/vnd.ms-excel",ext:"xlsx"},{type:"message/rfc822",ext:"eml"}],i=function(e){return void 0===e&&(e={}),0===Object.keys(e).length},o=function(e,t,n){if(!e||!e.sort)return!1;var r=n&&"desc"===n?-1:1;return e.sort((function(e,n){var i=e[t],o=n[t];return void 0===o?void 0===i?0:1*r:void 0===i||i<o?-1*r:i>o?1*r:0})),!0},s=function(e,t){var n=Object.assign({},e);return t&&("string"==typeof t?delete n[t]:t.forEach((function(e){delete n[e]}))),n},a=function(e,t){void 0===t&&(t="application/octet-stream");var n=e.toLowerCase(),i=r.filter((function(e){return n.endsWith("."+e.ext)}));return i.length>0?i[0].type:t},u=function(e){var t=e.toLowerCase();return!!t.startsWith("text/")||"application/json"===t||"application/xml"===t||"application/sh"===t},c=function(){for(var e="",t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=32;n>0;n-=1)e+=t[Math.floor(Math.random()*t.length)];return e},l=function(e){if(e.isResolved)return e;var t=!0,n=!1,r=!1,i=e.then((function(e){return r=!0,t=!1,e}),(function(e){throw n=!0,t=!1,e}));return i.isFullfilled=function(){return r},i.isPending=function(){return t},i.isRejected=function(){return n},i},d=function(){if("undefined"==typeof self)return!1;var e=self;return void 0!==e.WorkerGlobalScope&&self instanceof e.WorkerGlobalScope},f=function(){return{isBrowser:"undefined"!=typeof window&&void 0!==window.document,isNode:void 0!==e&&null!=e.versions&&null!=e.versions.node}},p=function e(t,n,r){if(void 0===n&&(n=[]),void 0===r&&(r=[]),!v(t))return t;var i={};for(var o in t)t.hasOwnProperty(o)&&(i[n.includes(o)?o:o[0].toLowerCase()+o.slice(1)]=r.includes(o)?t[o]:e(t[o],n,r));return i},h=function e(t,n,r){if(void 0===n&&(n=[]),void 0===r&&(r=[]),!v(t))return t;var i={};for(var o in t)t.hasOwnProperty(o)&&(i[n.includes(o)?o:o[0].toUpperCase()+o.slice(1)]=r.includes(o)?t[o]:e(t[o],n,r));return i},v=function(e){return!(!(e instanceof Object)||e instanceof Array||e instanceof Function||e instanceof Number||e instanceof String||e instanceof Boolean)},g=function(){function e(){}return e.isEmpty=i,e.sortByField=o,e.objectLessAttributes=s,e.filenameToContentType=a,e.isTextFile=u,e.generateRandomString=c,e.makeQuerablePromise=l,e.isWebWorker=d,e.browserOrNode=f,e.transferKeyToLowerCase=p,e.transferKeyToUpperCase=h,e.isStrictObject=v,e}()}).call(this,n(74))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return a})),n.d(t,"f",(function(){return u})),n.d(t,"g",(function(){return c}));var r=26,i=1048576,o=256e3,s="Logging",a="AWSCloudWatch",u="No credentials",c=["ResourceNotFoundException","InvalidSequenceTokenException"]},function(e,t,n){e.exports=n(325)},function(e,t,n){"use strict";var r=n(59);n(25),t.a=r.a},function(e,t,n){(function(t){var r;e.exports=(r=r||function(e,r){var i;if("undefined"!=typeof window&&window.crypto&&(i=window.crypto),"undefined"!=typeof self&&self.crypto&&(i=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(i=globalThis.crypto),!i&&"undefined"!=typeof window&&window.msCrypto&&(i=window.msCrypto),!i&&void 0!==t&&t.crypto&&(i=t.crypto),!i)try{i=n(211)}catch(e){}var o=function(){if(i){if("function"==typeof i.getRandomValues)try{return i.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof i.randomBytes)try{return i.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},s=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),a={},u=a.lib={},c=u.Base={extend:function(e){var t=s(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},l=u.WordArray=c.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||f).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var s=n[o>>>2]>>>24-o%4*8&255;t[r+o>>>2]|=s<<24-(r+o)%4*8}else for(var a=0;a<i;a+=4)t[r+a>>>2]=n[a>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=c.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(o());return new l.init(t,e)}}),d=a.enc={},f=d.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new l.init(n,t/2)}},p=d.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new l.init(n,t)}},h=d.Utf8={stringify:function(e){try{return decodeURIComponent(escape(p.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return p.parse(unescape(encodeURIComponent(e)))}},v=u.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=h.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,r=this._data,i=r.words,o=r.sigBytes,s=this.blockSize,a=o/(4*s),u=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*s,c=e.min(4*u,o);if(u){for(var d=0;d<u;d+=s)this._doProcessBlock(i,d);n=i.splice(0,u),r.sigBytes-=c}return new l.init(n,c)},clone:function(){var e=c.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),g=(u.Hasher=v.extend({cfg:c.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){v.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new g.HMAC.init(e,n).finalize(t)}}}),a.algo={});return a}(Math),r)}).call(this,n(60))},function(e,t,n){var r=n(141),i=n(143),o=n(144),s=n(61),a=n(145),u=n(108),c=n(142),l=n(109),d=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(a(e)&&(s(e)||"string"==typeof e||"function"==typeof e.splice||u(e)||l(e)||o(e)))return!e.length;var t=i(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(c(e))return!r(e).length;for(var n in e)if(d.call(e,n))return!1;return!0}},function(e,t,n){"use strict";var r=n(148),i=Object.prototype.toString;function o(e){return Array.isArray(e)}function s(e){return void 0===e}function a(e){return"[object ArrayBuffer]"===i.call(e)}function u(e){return null!==e&&"object"==typeof e}function c(e){if("[object Object]"!==i.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function l(e){return"[object Function]"===i.call(e)}function d(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),o(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:o,isArrayBuffer:a,isBuffer:function(e){return null!==e&&!s(e)&&null!==e.constructor&&!s(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"[object FormData]"===i.call(e)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&a(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:u,isPlainObject:c,isUndefined:s,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:l,isStream:function(e){return u(e)&&l(e.pipe)},isURLSearchParams:function(e){return"[object URLSearchParams]"===i.call(e)},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:d,merge:function e(){var t={};function n(n,r){c(t[r])&&c(n)?t[r]=e(t[r],n):c(n)?t[r]=e({},n):o(n)?t[r]=n.slice():t[r]=n}for(var r=0,i=arguments.length;r<i;r++)d(arguments[r],n);return t},extend:function(e,t,n){return d(t,(function(t,i){e[i]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(2),i=n(3),o={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},s=function(e){return{applyToStack:function(t){t.add(function(e){var t=this;return function(n){return function(o){return Object(r.__awaiter)(t,void 0,void 0,(function(){var t,s,a,u,c;return Object(r.__generator)(this,(function(l){return t=o.request,i.a.isInstance(t)&&(s=t.body,a=t.headers,s&&-1===Object.keys(a).map((function(e){return e.toLowerCase()})).indexOf("content-length")&&void 0!==(u=e(s))&&(t.headers=Object(r.__assign)(Object(r.__assign)({},t.headers),((c={})["content-length"]=String(u),c)))),[2,n(Object(r.__assign)(Object(r.__assign)({},o),{request:t}))]}))}))}}}(e.bodyLengthChecker),o)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebCryptoSha256=t.Ie11Sha256=void 0,(0,n(2).__exportStar)(n(222),t);var r=n(129);Object.defineProperty(t,"Ie11Sha256",{enumerable:!0,get:function(){return r.Sha256}});var i=n(131);Object.defineProperty(t,"WebCryptoSha256",{enumerable:!0,get:function(){return i.Sha256}})},function(e,t,n){"use strict";function r(e){if("string"==typeof e){for(var t=e.length,n=t-1;n>=0;n--){var r=e.charCodeAt(n);r>127&&r<=2047?t++:r>2047&&r<=65535&&(t+=2)}return t}return"number"==typeof e.byteLength?e.byteLength:"number"==typeof e.size?e.size:void 0}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(2),i=n(58),o=n.n(i),s=function(e){var t=e.serviceId,n=e.clientVersion;return function(){return Object(r.__awaiter)(void 0,void 0,void 0,(function(){var e,i,s,a,u,c,l,d,f;return Object(r.__generator)(this,(function(r){return e=(null===(s=null===window||void 0===window?void 0:window.navigator)||void 0===s?void 0:s.userAgent)?o.a.parse(window.navigator.userAgent):void 0,i=[["aws-sdk-js",n],["os/"+((null===(a=null==e?void 0:e.os)||void 0===a?void 0:a.name)||"other"),null===(u=null==e?void 0:e.os)||void 0===u?void 0:u.version],["lang/js"],["md/browser",(null!==(l=null===(c=null==e?void 0:e.browser)||void 0===c?void 0:c.name)&&void 0!==l?l:"unknown")+"_"+(null!==(f=null===(d=null==e?void 0:e.browser)||void 0===d?void 0:d.version)&&void 0!==f?f:"unknown")]],t&&i.push(["api/"+t,n]),[2,i]}))}))}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){return function(){return Promise.reject(e)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(2),i={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},o=function(e){return{applyToStack:function(e){e.add((function(e,t){return function(n){return Object(r.__awaiter)(void 0,void 0,void 0,(function(){var i,o,s,a,u,c,l,d,f;return Object(r.__generator)(this,(function(p){switch(p.label){case 0:return i=t.clientName,o=t.commandName,s=t.inputFilterSensitiveLog,a=t.logger,u=t.outputFilterSensitiveLog,[4,e(n)];case 1:return c=p.sent(),a?("function"==typeof a.info&&(l=c.output,d=l.$metadata,f=Object(r.__rest)(l,["$metadata"]),a.info({clientName:i,commandName:o,input:s(n.input),output:u(f),metadata:d})),[2,c]):[2,c]}}))}))}}),i)}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(2),i=function(e){var t,n=new URL(e),i=n.hostname,o=n.pathname,s=n.port,a=n.protocol,u=n.search;return u&&(t=function(e){var t,n,i={};if(e=e.replace(/^\?/,""))try{for(var o=Object(r.__values)(e.split("&")),s=o.next();!s.done;s=o.next()){var a=s.value,u=Object(r.__read)(a.split("="),2),c=u[0],l=u[1],d=void 0===l?null:l;c=decodeURIComponent(c),d&&(d=decodeURIComponent(d)),c in i?Array.isArray(i[c])?i[c].push(d):i[c]=[i[c],d]:i[c]=d}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i}(u)),{hostname:i,port:s?parseInt(s):void 0,protocol:a,path:o,query:t}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r,i=n(35),o=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},s=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},a=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(s(arguments[t]));return e},u={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5};!function(e){e.DEBUG="DEBUG",e.ERROR="ERROR",e.INFO="INFO",e.WARN="WARN",e.VERBOSE="VERBOSE"}(r||(r={}));var c=function(){function e(e,t){void 0===t&&(t=r.WARN),this.name=e,this.level=t,this._pluggables=[]}return e.prototype._padding=function(e){return e<10?"0"+e:""+e},e.prototype._ts=function(){var e=new Date;return[this._padding(e.getMinutes()),this._padding(e.getSeconds())].join(":")+"."+e.getMilliseconds()},e.prototype.configure=function(e){return e?(this._config=e,this._config):this._config},e.prototype._log=function(t){for(var n,i,s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];var c=this.level;e.LOG_LEVEL&&(c=e.LOG_LEVEL),"undefined"!=typeof window&&window.LOG_LEVEL&&(c=window.LOG_LEVEL);var l=u[c];if(u[t]>=l){var d=void 0;t===r.ERROR&&console.error&&(d=void 0),t===r.WARN&&console.warn&&(d=void 0);var f="["+t+"] "+this._ts()+" "+this.name,p="";if(1===s.length&&"string"==typeof s[0])d(p=f+" - "+s[0]);else if(1===s.length)p=f+" "+s[0],d(f,s[0]);else if("string"==typeof s[0]){var h=s.slice(1);1===h.length&&(h=h[0]),p=f+" - "+s[0]+" "+h,d(f+" - "+s[0],h)}else p=f+" "+s,d(f,s);try{for(var v=o(this._pluggables),g=v.next();!g.done;g=v.next()){var m=g.value,y={message:p,timestamp:Date.now()};m.pushLogs([y])}}catch(e){n={error:e}}finally{try{g&&!g.done&&(i=v.return)&&i.call(v)}finally{if(n)throw n.error}}}},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,a([r.INFO],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,a([r.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,a([r.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,a([r.ERROR],e))},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,a([r.DEBUG],e))},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,a([r.VERBOSE],e))},e.prototype.addPluggable=function(e){e&&e.getCategoryName()===i.b&&(this._pluggables.push(e),e.configure(this._config))},e.prototype.listPluggables=function(){return this._pluggables},e.LOG_LEVEL=null,e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var r={userAgent:"aws-amplify/4.7.11 js",product:"",navigator:null,isReactNative:!1};"undefined"!=typeof navigator&&navigator.product&&("ReactNative"===(r.product=navigator.product||"",r.navigator=navigator||null,navigator.product)?(r.userAgent="aws-amplify/4.7.11 react-native",r.isReactNative=!0):(r.userAgent="aws-amplify/4.7.11 js",r.isReactNative=!1));var i=function(e){return""+r.userAgent+(e||"")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return a}));var r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function i(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function o(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}function s(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function a(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create,Object.create},,function(e,t,n){"use strict";var r=n(62);t.a=r.a},function(e,t,n){"use strict";function r(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function i(e){return!!e&&!!e[K]}function o(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===V}(e)||Array.isArray(e)||!!e[$]||!!e.constructor[$]||d(e)||f(e))}function s(e,t,n){void 0===n&&(n=!1),0===a(e)?(n?Object.keys:G)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function a(e){var t=e[K];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:d(e)?2:f(e)?3:0}function u(e,t){return 2===a(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function c(e,t){return 2===a(e)?e.get(t):e[t]}function l(e,t,n){var r=a(e);2===r?e.set(t,n):3===r?(e.delete(t),e.add(n)):e[t]=n}function d(e){return B&&e instanceof Map}function f(e){return F&&e instanceof Set}function p(e){return e.o||e.t}function h(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=H(e);delete t[K];for(var n=G(t),r=0;r<n.length;r++){var i=n[r],o=t[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function v(e,t){return void 0===t&&(t=!1),m(e)||i(e)||!o(e)||(a(e)>1&&(e.set=e.add=e.clear=e.delete=g),Object.freeze(e),t&&s(e,(function(e,t){return v(t,!0)}),!0)),e}function g(){r(2)}function m(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function y(e){var t=W[e];return t||r(18,e),t}function b(){return R}function w(e,t){t&&(y("Patches"),e.u=[],e.s=[],e.v=t)}function _(e){S(e),e.p.forEach(C),e.p=null}function S(e){e===R&&(R=e.l)}function E(e){return R={p:[],l:R,h:e,m:!0,_:0}}function C(e){var t=e[K];0===t.i||1===t.i?t.j():t.O=!0}function A(e,t){t._=t.p.length;var n=t.p[0],i=void 0!==e&&e!==n;return t.h.g||y("ES5").S(t,e,i),i?(n[K].P&&(_(t),r(4)),o(e)&&(e=O(t,e),t.l||T(t,e)),t.u&&y("Patches").M(n[K],e,t.u,t.s)):e=O(t,n,[]),_(t),t.u&&t.v(t.u,t.s),e!==q?e:void 0}function O(e,t,n){if(m(t))return t;var r=t[K];if(!r)return s(t,(function(i,o){return I(e,r,t,i,o,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return T(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=h(r.k):r.o;s(3===r.i?new Set(i):i,(function(t,o){return I(e,r,i,t,o,n)})),T(e,i,!1),n&&e.u&&y("Patches").R(r,n,e.u,e.s)}return r.o}function I(e,t,n,r,s,a){if(i(s)){var c=O(e,s,a&&t&&3!==t.i&&!u(t.D,r)?a.concat(r):void 0);if(l(n,r,c),!i(c))return;e.m=!1}if(o(s)&&!m(s)){if(!e.h.F&&e._<1)return;O(e,s),t&&t.A.l||T(e,s)}}function T(e,t,n){void 0===n&&(n=!1),e.h.F&&e.m&&v(t,n)}function x(e,t){var n=e[K];return(n?p(n):e)[t]}function P(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function k(e){e.P||(e.P=!0,e.l&&k(e.l))}function D(e){e.o||(e.o=h(e.t))}function N(e,t,n){var r=d(t)?y("MapSet").N(t,n):f(t)?y("MapSet").T(t,n):e.g?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:b(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,o=J;n&&(i=[r],o=Y);var s=Proxy.revocable(i,o),a=s.revoke,u=s.proxy;return r.k=u,r.j=a,u}(t,n):y("ES5").J(t,n);return(n?n.A:b()).p.push(r),r}function L(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return h(e)}function M(){function e(t){if(!o(t))return t;if(Array.isArray(t))return t.map(e);if(d(t))return new Map(Array.from(t.entries()).map((function(t){return[t[0],e(t[1])]})));if(f(t))return new Set(Array.from(t).map(e));var n=Object.create(Object.getPrototypeOf(t));for(var r in t)n[r]=e(t[r]);return u(t,$)&&(n[$]=t[$]),n}function t(t){return i(t)?e(t):t}var n="add";!function(e,t){W[e]||(W[e]=t)}("Patches",{$:function(t,i){return i.forEach((function(i){for(var o=i.path,s=i.op,u=t,l=0;l<o.length-1;l++){var d=a(u),f=""+o[l];0!==d&&1!==d||"__proto__"!==f&&"constructor"!==f||r(24),"function"==typeof u&&"prototype"===f&&r(24),"object"!=typeof(u=c(u,f))&&r(15,o.join("/"))}var p=a(u),h=e(i.value),v=o[o.length-1];switch(s){case"replace":switch(p){case 2:return u.set(v,h);case 3:r(16);default:return u[v]=h}case n:switch(p){case 1:return u.splice(v,0,h);case 2:return u.set(v,h);case 3:return u.add(h);default:return u[v]=h}case"remove":switch(p){case 1:return u.splice(v,1);case 2:return u.delete(v);case 3:return u.delete(i.value);default:return delete u[v]}default:r(17,s)}})),t},R:function(e,r,i,o){switch(e.i){case 0:case 4:case 2:return function(e,r,i,o){var a=e.t,l=e.o;s(e.D,(function(e,s){var d=c(a,e),f=c(l,e),p=s?u(a,e)?"replace":n:"remove";if(d!==f||"replace"!==p){var h=r.concat(e);i.push("remove"===p?{op:p,path:h}:{op:p,path:h,value:f}),o.push(p===n?{op:"remove",path:h}:"remove"===p?{op:n,path:h,value:t(d)}:{op:"replace",path:h,value:t(d)})}}))}(e,r,i,o);case 5:case 1:return function(e,r,i,o){var s=e.t,a=e.D,u=e.o;if(u.length<s.length){var c=[u,s];s=c[0],u=c[1];var l=[o,i];i=l[0],o=l[1]}for(var d=0;d<s.length;d++)if(a[d]&&u[d]!==s[d]){var f=r.concat([d]);i.push({op:"replace",path:f,value:t(u[d])}),o.push({op:"replace",path:f,value:t(s[d])})}for(var p=s.length;p<u.length;p++){var h=r.concat([p]);i.push({op:n,path:h,value:t(u[p])})}s.length<u.length&&o.push({op:"replace",path:r.concat(["length"]),value:s.length})}(e,r,i,o);case 3:return function(e,t,r,i){var o=e.t,s=e.o,a=0;o.forEach((function(e){if(!s.has(e)){var o=t.concat([a]);r.push({op:"remove",path:o,value:e}),i.unshift({op:n,path:o,value:e})}a++})),a=0,s.forEach((function(e){if(!o.has(e)){var s=t.concat([a]);r.push({op:n,path:s,value:e}),i.unshift({op:"remove",path:s,value:e})}a++}))}(e,r,i,o)}},M:function(e,t,n,r){n.push({op:"replace",path:[],value:t===q?void 0:t}),r.push({op:"replace",path:[],value:e.t})}})}n.d(t,"a",(function(){return ee})),n.d(t,"b",(function(){return M})),n.d(t,"c",(function(){return $})),n.d(t,"d",(function(){return Q})),n.d(t,"e",(function(){return X}));var j,R,U="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),B="undefined"!=typeof Map,F="undefined"!=typeof Set,z="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,q=U?Symbol.for("immer-nothing"):((j={})["immer-nothing"]=!0,j),$=U?Symbol.for("immer-draftable"):"__$immer_draftable",K=U?Symbol.for("immer-state"):"__$immer_state",V=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),G="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,H=Object.getOwnPropertyDescriptors||function(e){var t={};return G(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},W={},J={get:function(e,t){if(t===K)return e;var n=p(e);if(!u(n,t))return function(e,t,n){var r,i=P(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!o(r)?r:r===x(e.t,t)?(D(e),e.o[t]=N(e.A.h,r,e)):r},has:function(e,t){return t in p(e)},ownKeys:function(e){return Reflect.ownKeys(p(e))},set:function(e,t,n){var r=P(p(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=x(p(e),t),o=null==i?void 0:i[K];if(o&&o.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(n,i)&&(void 0!==n||u(e.t,t)))return!0;D(e),k(e)}return e.o[t]===n&&"number"!=typeof n&&(void 0!==n||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==x(e.t,t)||t in e.t?(e.D[t]=!1,D(e),k(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=p(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){r(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){r(12)}},Y={};s(J,(function(e,t){Y[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),Y.deleteProperty=function(e,t){return J.deleteProperty.call(this,e[0],t)},Y.set=function(e,t,n){return J.set.call(this,e[0],t,n,e[0])};var Z=new(function(){function e(e){var t=this;this.g=z,this.F=!0,this.produce=function(e,n,i){if("function"==typeof e&&"function"!=typeof n){var s=n;n=e;var a=t;return function(e){var t=this;void 0===e&&(e=s);for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return a.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(i))}))}}var u;if("function"!=typeof n&&r(6),void 0!==i&&"function"!=typeof i&&r(7),o(e)){var c=E(t),l=N(t,e,void 0),d=!0;try{u=n(l),d=!1}finally{d?_(c):S(c)}return"undefined"!=typeof Promise&&u instanceof Promise?u.then((function(e){return w(c,i),A(e,c)}),(function(e){throw _(c),e})):(w(c,i),A(u,c))}if(!e||"object"!=typeof e){if((u=n(e))===q)return;return void 0===u&&(u=e),t.F&&v(u,!0),u}r(21,e)},this.produceWithPatches=function(e,n){return"function"==typeof e?function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(i))}))}:[t.produce(e,n,(function(e,t){r=e,i=t})),r,i];var r,i},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){o(e)||r(8),i(e)&&(e=function(e){return i(e)||r(22,e),function e(t){if(!o(t))return t;var n,r=t[K],i=a(t);if(r){if(!r.P&&(r.i<4||!y("ES5").K(r)))return r.t;r.I=!0,n=L(t,i),r.I=!1}else n=L(t,i);return s(n,(function(t,i){r&&c(r.t,t)===i||l(n,t,e(i))})),3===i?new Set(n):n}(e)}(e));var t=E(this),n=N(this,e,void 0);return n[K].C=!0,S(t),n},t.finishDraft=function(e,t){var n=(e&&e[K]).A;return w(n,t),A(void 0,n)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!z&&r(20),this.g=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}var o=y("Patches").$;return i(e)?o(e,t):this.produce(e,(function(e){return o(e,t.slice(n+1))}))},e}()),Q=Z.produce,X=(Z.produceWithPatches.bind(Z),Z.setAutoFreeze.bind(Z)),ee=(Z.setUseProxies.bind(Z),Z.applyPatches.bind(Z));Z.createDraft.bind(Z),Z.finishDraft.bind(Z)},function(e,t,n){"use strict";n.r(t),n.d(t,"locateWindow",(function(){return i}));const r={};function i(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:r}},function(e,t,n){var r=n(136),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},function(e,t,n){"use strict";const r="[:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",i=new RegExp("^"+r+"$");t.isExist=function(e){return void 0!==e},t.isEmptyObject=function(e){return 0===Object.keys(e).length},t.merge=function(e,t,n){if(t){const r=Object.keys(t),i=r.length;for(let o=0;o<i;o++)e[r[o]]="strict"===n?[t[r[o]]]:t[r[o]]}},t.getValue=function(e){return t.isExist(e)?e:""},t.buildOptions=function(e,t,n){let r={};if(!e)return t;for(let i=0;i<n.length;i++)void 0!==e[n[i]]?r[n[i]]=e[n[i]]:r[n[i]]=t[n[i]];return r},t.isTagNameInArrayMode=function(e,t,n){return!1!==t&&(t instanceof RegExp?t.test(e):"function"==typeof t?!!t(e,n):"strict"===t)},t.isName=function(e){return!(null==i.exec(e))},t.getAllMatches=function(e,t){const n=[];let r=t.exec(e);for(;r;){const i=[];i.startIndex=t.lastIndex-r[0].length;const o=r.length;for(let e=0;e<o;e++)i.push(r[e]);n.push(i),r=t.exec(e)}return n},t.nameRegexp=r},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.NO_API_KEY="No api-key configured",e.NO_CURRENT_USER="No current user",e.NO_CREDENTIALS="No credentials",e.NO_FEDERATED_JWT="No federated jwt",e.NO_AUTH_TOKEN="No auth token specified"}(r||(r={}))},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=90)}({17:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(18),i=function(){function e(){}return e.getFirstMatch=function(e,t){var n=t.match(e);return n&&n.length>0&&n[1]||""},e.getSecondMatch=function(e,t){var n=t.match(e);return n&&n.length>1&&n[2]||""},e.matchAndReturnConst=function(e,t,n){if(e.test(t))return n},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,n,r){void 0===r&&(r=!1);var i=e.getVersionPrecision(t),o=e.getVersionPrecision(n),s=Math.max(i,o),a=0,u=e.map([t,n],(function(t){var n=s-e.getVersionPrecision(t),r=t+new Array(n+1).join(".0");return e.map(r.split("."),(function(e){return new Array(20-e.length).join("0")+e})).reverse()}));for(r&&(a=s-Math.min(i,o)),s-=1;s>=a;){if(u[0][s]>u[1][s])return 1;if(u[0][s]===u[1][s]){if(s===a)return 0;s-=1}else if(u[0][s]<u[1][s])return-1}},e.map=function(e,t){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n+=1)r.push(t(e[n]));return r},e.find=function(e,t){var n,r;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(n=0,r=e.length;n<r;n+=1){var i=e[n];if(t(i,n))return i}},e.assign=function(e){for(var t,n,r=e,i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];if(Object.assign)return Object.assign.apply(Object,[e].concat(o));var a=function(){var e=o[t];"object"==typeof e&&null!==e&&Object.keys(e).forEach((function(t){r[t]=e[t]}))};for(t=0,n=o.length;t<n;t+=1)a();return e},e.getBrowserAlias=function(e){return r.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return r.BROWSER_MAP[e]||""},e}();t.default=i,e.exports=t.default},18:function(e,t,n){"use strict";t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(91))&&r.__esModule?r:{default:r},o=n(18);var s=function(){function e(){}var t;return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw new Error("UserAgent should be a string");return new i.default(e,t)},e.parse=function(e){return new i.default(e).getResult()},(t=[{key:"BROWSER_MAP",get:function(){return o.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return o.ENGINE_MAP}},{key:"OS_MAP",get:function(){return o.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return o.PLATFORMS_MAP}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e,t),e}();t.default=s,e.exports=t.default},91:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=u(n(92)),i=u(n(93)),o=u(n(94)),s=u(n(95)),a=u(n(17));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=a.default.find(r.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=a.default.find(i.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=a.default.find(o.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=a.default.find(s.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return a.default.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,n={},r=0,i={},o=0;if(Object.keys(e).forEach((function(t){var s=e[t];"string"==typeof s?(i[t]=s,o+=1):"object"==typeof s&&(n[t]=s,r+=1)})),r>0){var s=Object.keys(n),u=a.default.find(s,(function(e){return t.isOS(e)}));if(u){var c=this.satisfies(n[u]);if(void 0!==c)return c}var l=a.default.find(s,(function(e){return t.isPlatform(e)}));if(l){var d=this.satisfies(n[l]);if(void 0!==d)return d}}if(o>0){var f=Object.keys(i),p=a.default.find(f,(function(e){return t.isBrowser(e,!0)}));if(void 0!==p)return this.compareVersion(i[p])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var n=this.getBrowserName().toLowerCase(),r=e.toLowerCase(),i=a.default.getBrowserTypeByAlias(r);return t&&i&&(r=i.toLowerCase()),r===n},t.compareVersion=function(e){var t=[0],n=e,r=!1,i=this.getBrowserVersion();if("string"==typeof i)return">"===e[0]||"<"===e[0]?(n=e.substr(1),"="===e[1]?(r=!0,n=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?n=e.substr(1):"~"===e[0]&&(r=!0,n=e.substr(1)),t.indexOf(a.default.compareVersions(i,n,r))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e,t){return void 0===t&&(t=!1),this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some((function(e){return t.is(e)}))},e}();t.default=c,e.exports=t.default},92:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=/version\/(\d+(\.?_?\d+)+)/i,s=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},n=i.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},n=i.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},n=i.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},n=i.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},n=i.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var t={name:"Opera Touch"},n=i.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},n=i.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},n=i.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},n=i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},n=i.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},n=i.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},n=i.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},n=i.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},n=i.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},n=i.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return n&&(t.version=n),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},n=i.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},n=i.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},n=i.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},n=i.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},n=i.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},n=i.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},n=i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},n=i.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MiuiBrowser/i],describe:function(e){var t={name:"Miui"},n=i.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},n=i.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},n=i.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},n=i.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t={name:"Android Browser"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:i.default.getFirstMatch(t,e),version:i.default.getSecondMatch(t,e)}}}];t.default=s,e.exports=t.default},93:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),s=[{test:[/Roku\/DVP/],describe:function(e){var t=i.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:o.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=i.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=i.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),n=i.default.getWindowsVersionName(t);return{name:o.OS_MAP.Windows,version:t,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var t={name:o.OS_MAP.iOS},n=i.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return n&&(t.version=n),t}},{test:[/macintosh/i],describe:function(e){var t=i.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),n=i.default.getMacOSVersionName(t),r={name:o.OS_MAP.MacOS,version:t};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=i.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:o.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t=i.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),n=i.default.getAndroidVersionName(t),r={name:o.OS_MAP.Android,version:t};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=i.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),n={name:o.OS_MAP.WebOS};return t&&t.length&&(n.version=t),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=i.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||i.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||i.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:o.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=i.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=i.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:o.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:o.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=i.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.PlayStation4,version:t}}}];t.default=s,e.exports=t.default},94:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),s=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=i.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",n={type:o.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(n.model=t),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),n=e.test(/like (ipod|iphone)/i);return t&&!n},describe:function(e){var t=i.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:o.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}}];t.default=s,e.exports=t.default},95:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),s=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:o.ENGINE_MAP.Blink};var t=i.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:o.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:o.ENGINE_MAP.Trident},n=i.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:o.ENGINE_MAP.Presto},n=i.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=e.test(/gecko/i),n=e.test(/like gecko/i);return t&&!n},describe:function(e){var t={name:o.ENGINE_MAP.Gecko},n=i.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:o.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:o.ENGINE_MAP.WebKit},n=i.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}}];t.default=s,e.exports=t.default}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return q}));var r,i=n(9),o=n(48),s=n(78),a=n(80),u=n(92),c=n(119),l=n(77),d=n(34),f=n(20),p=n(25),h=n(19),v=function(e){var t=window.open(e,"_self");return t?Promise.resolve(t):Promise.reject()},g=n(177),m=n.n(g),y=n(178),b=n.n(y),w=function(){return(w=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},_=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},S=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},E=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},C="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",A=function(e,t,n){s.a.dispatch("auth",{event:e,data:t,message:n},"Auth",C)},O=new o.a("OAuth"),I=function(){function e(e){var t=e.config,n=e.cognitoClientId,r=e.scopes,i=void 0===r?[]:r;if(this._urlOpener=t.urlOpener||v,this._config=t,this._cognitoClientId=n,!this.isValidScopes(i))throw Error("scopes must be a String Array");this._scopes=i}return e.prototype.isValidScopes=function(e){return Array.isArray(e)&&e.every((function(e){return"string"==typeof e}))},e.prototype.oauthSignIn=function(e,t,n,r,o,s){void 0===e&&(e="code"),void 0===o&&(o=i.b.Cognito);var a=this._generateState(32),u=s?a+"-"+s.split("").map((function(e){return e.charCodeAt(0).toString(16).padStart(2,"0")})).join(""):a;!function(e){window.sessionStorage.setItem("oauth_state",e)}(u);var c,l=this._generateRandom(128);c=l,window.sessionStorage.setItem("ouath_pkce_key",c);var d=this._generateChallenge(l),f=this._scopes.join(" "),p="https://"+t+"/oauth2/authorize?"+Object.entries(w(w({redirect_uri:n,response_type:e,client_id:r,identity_provider:o,scope:f,state:u},"code"===e?{code_challenge:d}:{}),"code"===e?{code_challenge_method:"S256"}:{})).map((function(e){var t=E(e,2),n=t[0],r=t[1];return encodeURIComponent(n)+"="+encodeURIComponent(r)})).join("&");O.debug("Redirecting to "+p),this._urlOpener(p,n)},e.prototype._handleCodeFlow=function(e){return _(this,void 0,void 0,(function(){var t,n,r,o,s,a,u,c,l,d,f,p,v,g;return S(this,(function(m){switch(m.label){case 0:return t=(Object(h.parse)(e).query||"").split("&").map((function(e){return e.split("=")})).reduce((function(e,t){var n,r=E(t,2),i=r[0],o=r[1];return w(w({},e),((n={})[i]=o,n))}),{code:void 0}).code,n=Object(h.parse)(e).pathname||"/",r=Object(h.parse)(this._config.redirectSignIn).pathname||"/",t&&n===r?(o="https://"+this._config.domain+"/oauth2/token",A("codeFlow",{},"Retrieving tokens from "+o),s=Object(i.e)(this._config)?this._cognitoClientId:this._config.clientID,a=Object(i.e)(this._config)?this._config.redirectSignIn:this._config.redirectUri,y=window.sessionStorage.getItem("ouath_pkce_key"),window.sessionStorage.removeItem("ouath_pkce_key"),c=w({grant_type:"authorization_code",code:t,client_id:s,redirect_uri:a},(u=y)?{code_verifier:u}:{}),O.debug("Calling token endpoint: "+o+" with",c),l=Object.entries(c).map((function(e){var t=E(e,2),n=t[0],r=t[1];return encodeURIComponent(n)+"="+encodeURIComponent(r)})).join("&"),[4,fetch(o,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:l})]):[2];case 1:return[4,m.sent().json()];case 2:if(d=m.sent(),f=d.access_token,p=d.refresh_token,v=d.id_token,g=d.error)throw new Error(g);return[2,{accessToken:f,refreshToken:p,idToken:v}]}var y}))}))},e.prototype._handleImplicitFlow=function(e){return _(this,void 0,void 0,(function(){var t,n,r;return S(this,(function(i){return t=(Object(h.parse)(e).hash||"#").substr(1).split("&").map((function(e){return e.split("=")})).reduce((function(e,t){var n,r=E(t,2),i=r[0],o=r[1];return w(w({},e),((n={})[i]=o,n))}),{id_token:void 0,access_token:void 0}),n=t.id_token,r=t.access_token,A("implicitFlow",{},"Got tokens from "+e),O.debug("Retrieving implicit tokens from "+e+" with"),[2,{accessToken:r,idToken:n,refreshToken:null}]}))}))},e.prototype.handleAuthResponse=function(e){return _(this,void 0,void 0,(function(){var t,n,r,i,o,s,a;return S(this,(function(u){switch(u.label){case 0:if(u.trys.push([0,5,,6]),t=e?w(w({},(Object(h.parse)(e).hash||"#").substr(1).split("&").map((function(e){return e.split("=")})).reduce((function(e,t){var n=E(t,2),r=n[0],i=n[1];return e[r]=i,e}),{})),(Object(h.parse)(e).query||"").split("&").map((function(e){return e.split("=")})).reduce((function(e,t){var n=E(t,2),r=n[0],i=n[1];return e[r]=i,e}),{})):{},n=t.error,r=t.error_description,n)throw new Error(r);return i=this._validateState(t),O.debug("Starting "+this._config.responseType+" flow with "+e),"code"!==this._config.responseType?[3,2]:(o=[{}],[4,this._handleCodeFlow(e)]);case 1:return[2,w.apply(void 0,[w.apply(void 0,o.concat([u.sent()])),{state:i}])];case 2:return s=[{}],[4,this._handleImplicitFlow(e)];case 3:return[2,w.apply(void 0,[w.apply(void 0,s.concat([u.sent()])),{state:i}])];case 4:return[3,6];case 5:throw a=u.sent(),O.error("Error handling auth response.",a),a;case 6:return[2]}}))}))},e.prototype._validateState=function(e){if(e){var t,n=(t=window.sessionStorage.getItem("oauth_state"),window.sessionStorage.removeItem("oauth_state"),t),r=e.state;if(n&&n!==r)throw new Error("Invalid state in OAuth flow");return r}},e.prototype.signOut=function(){return _(this,void 0,void 0,(function(){var e,t,n;return S(this,(function(r){return e="https://"+this._config.domain+"/logout?",t=Object(i.e)(this._config)?this._cognitoClientId:this._config.oauth.clientID,n=Object(i.e)(this._config)?this._config.redirectSignOut:this._config.returnTo,e+=Object.entries({client_id:t,logout_uri:encodeURIComponent(n)}).map((function(e){var t=E(e,2);return t[0]+"="+t[1]})).join("&"),A("oAuthSignOut",{oAuth:"signOut"},"Signing out from "+e),O.debug("Signing out from "+e),[2,this._urlOpener(e,n)]}))}))},e.prototype._generateState=function(e){for(var t="",n=e,r="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";n>0;--n)t+=r[Math.round(Math.random()*(r.length-1))];return t},e.prototype._generateChallenge=function(e){return this._base64URL(m()(e))},e.prototype._base64URL=function(e){return e.toString(b.a).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},e.prototype._generateRandom=function(e){var t=new Uint8Array(e);if("undefined"!=typeof window&&window.crypto)window.crypto.getRandomValues(t);else for(var n=0;n<e;n+=1)t[n]=Math.random()*"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~".length|0;return this._bufferToString(t)},e.prototype._bufferToString=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=[],r=0;r<e.byteLength;r+=1){var i=e[r]%t.length;n.push(t[i])}return n.join("")},e}(),T=n(31),x=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),P=new o.a("AuthError"),k=function(e){function t(n){var r=this,i=N[n],o=i.message,s=i.log;return(r=e.call(this,o)||this).constructor=t,Object.setPrototypeOf(r,t.prototype),r.name="AuthError",r.log=s||o,P.error(r.log),r}return x(t,e),t}(Error),D=function(e){function t(n){var r=e.call(this,n)||this;return r.constructor=t,Object.setPrototypeOf(r,t.prototype),r.name="NoUserPoolError",r}return x(t,e),t}(k),N={noConfig:{message:T.a.DEFAULT_MSG,log:"\n            Error: Amplify has not been configured correctly.\n            This error is typically caused by one of the following scenarios:\n\n            1. Make sure you're passing the awsconfig object to Amplify.configure() in your app's entry point\n                See https://aws-amplify.github.io/docs/js/authentication#configure-your-app for more information\n            \n            2. There might be multiple conflicting versions of amplify packages in your node_modules.\n\t\t\t\tRefer to our docs site for help upgrading Amplify packages (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js)\n        "},missingAuthConfig:{message:T.a.DEFAULT_MSG,log:"\n            Error: Amplify has not been configured correctly. \n            The configuration object is missing required auth properties.\n            This error is typically caused by one of the following scenarios:\n\n            1. Did you run `amplify push` after adding auth via `amplify add auth`?\n                See https://aws-amplify.github.io/docs/js/authentication#amplify-project-setup for more information\n\n            2. This could also be caused by multiple conflicting versions of amplify packages, see (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js) for help upgrading Amplify packages.\n        "},emptyUsername:{message:T.a.EMPTY_USERNAME},invalidUsername:{message:T.a.INVALID_USERNAME},emptyPassword:{message:T.a.EMPTY_PASSWORD},emptyCode:{message:T.a.EMPTY_CODE},signUpError:{message:T.a.SIGN_UP_ERROR,log:"The first parameter should either be non-null string or object"},noMFA:{message:T.a.NO_MFA},invalidMFA:{message:T.a.INVALID_MFA},emptyChallengeResponse:{message:T.a.EMPTY_CHALLENGE},noUserSession:{message:T.a.NO_USER_SESSION},deviceConfig:{message:T.a.DEVICE_CONFIG},networkError:{message:T.a.NETWORK_ERROR},autoSignInError:{message:T.a.AUTOSIGNIN_ERROR},default:{message:T.a.DEFAULT_MSG}};function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var M=function(){return(M=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},j=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},R=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},U=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},B=new o.a("AuthClass"),F="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",z=function(e,t,n){s.a.dispatch("auth",{event:e,data:t,message:n},"Auth",F)},q=new(function(){function e(e){var t=this;this.userPool=null,this.user=null,this.oAuthFlowInProgress=!1,this.autoSignInInitiated=!1,this.Credentials=a.a,this.wrapRefreshSessionCallback=function(e){return function(t,n){return n?z("tokenRefresh",void 0,"New token retrieved"):z("tokenRefresh_failure",t,"Failed to retrieve new token"),e(t,n)}},this.configure(e),this.currentCredentials=this.currentCredentials.bind(this),this.currentUserCredentials=this.currentUserCredentials.bind(this),s.a.listen("auth",(function(e){switch(e.payload.event){case"signIn":t._storage.setItem("amplify-signin-with-hostedUI","false");break;case"signOut":t._storage.removeItem("amplify-signin-with-hostedUI");break;case"cognitoHostedUI":t._storage.setItem("amplify-signin-with-hostedUI","true")}}))}return e.prototype.getModuleName=function(){return"Auth"},e.prototype.configure=function(e){var t=this;if(!e)return this._config||{};B.debug("configure Auth");var n=Object.assign({},this._config,u.a.parseMobilehubConfig(e).Auth,e);this._config=n;var r=this._config,o=r.userPoolId,s=r.userPoolWebClientId,a=r.cookieStorage,f=r.oauth,h=r.region,v=r.identityPoolId,g=r.mandatorySignIn,m=r.refreshHandlers,y=r.identityPoolRegion,b=r.clientMetadata,w=r.endpoint;if(this._config.storage){if(!this._isValidAuthStorage(this._config.storage))throw B.error("The storage in the Auth config is not valid!"),new Error("Empty storage object");this._storage=this._config.storage}else this._storage=a?new p.i(a):e.ssr?new c.a:(new l.a).getStorage();if(this._storageSync=Promise.resolve(),"function"==typeof this._storage.sync&&(this._storageSync=this._storage.sync()),o){var _={UserPoolId:o,ClientId:s,endpoint:w};_.Storage=this._storage,this.userPool=new p.g(_,this.wrapRefreshSessionCallback)}this.Credentials.configure({mandatorySignIn:g,region:y||h,userPoolId:o,identityPoolId:v,refreshHandlers:m,storage:this._storage});var S=f?Object(i.e)(this._config.oauth)?f:f.awsCognito:void 0;if(S){var E=Object.assign({cognitoClientId:s,UserPoolId:o,domain:S.domain,scopes:S.scope,redirectSignIn:S.redirectSignIn,redirectSignOut:S.redirectSignOut,responseType:S.responseType,Storage:this._storage,urlOpener:S.urlOpener,clientMetadata:b},S.options);this._oAuthHandler=new I({scopes:E.scopes,config:E,cognitoClientId:E.cognitoClientId});var C={};!function(e){if(Object(d.b)().isBrowser&&window.location)!function(e){var n=e.url;C[n]||(C[n]=!0,t._handleAuthResponse(n))}({url:window.location.href});else if(!Object(d.b)().isNode)throw new Error("Not supported")}()}return z("configured",null,"The Auth category has been configured successfully"),this.autoSignInInitiated||"function"!=typeof this._storage.getItem||(this.isTrueStorageValue("amplify-polling-started")&&(z("autoSignIn_failure",null,i.a.AutoSignInError),this._storage.removeItem("amplify-auto-sign-in")),this._storage.removeItem("amplify-polling-started")),this._config},e.prototype.signUp=function(e){for(var t,n,r,o=this,s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];if(!this.userPool)return this.rejectNoUserPool();var u,c=null,l=null,d=[],f=null,h={enabled:!1},v={},g={};if(e&&"string"==typeof e){c=e,l=s?s[0]:null;var m=s?s[1]:null,y=s?s[2]:null;m&&d.push(new p.f({Name:"email",Value:m})),y&&d.push(new p.f({Name:"phone_number",Value:y}))}else{if(!e||"object"!==L(e))return this.rejectAuthError(i.a.SignUpError);c=e.username,l=e.password,e&&e.clientMetadata?u=e.clientMetadata:this._config.clientMetadata&&(u=this._config.clientMetadata);var b=e.attributes;b&&Object.keys(b).map((function(e){d.push(new p.f({Name:e,Value:b[e]}))}));var w=e.validationData;w&&(f=[],Object.keys(w).map((function(e){f.push(new p.f({Name:e,Value:w[e]}))}))),(h=null!==(t=e.autoSignIn)&&void 0!==t?t:{enabled:!1}).enabled&&(this._storage.setItem("amplify-auto-sign-in","true"),v=null!==(n=h.validationData)&&void 0!==n?n:{},g=null!==(r=h.clientMetaData)&&void 0!==r?r:{})}return c?l?(B.debug("signUp attrs:",d),B.debug("signUp validation data:",f),new Promise((function(e,t){o.userPool.signUp(c,l,d,f,(function(n,r){n?(z("signUp_failure",n,c+" failed to signup"),t(n)):(z("signUp",r,c+" has signed up successfully"),h.enabled&&o.handleAutoSignIn(c,l,v,g,r),e(r))}),u)}))):this.rejectAuthError(i.a.EmptyPassword):this.rejectAuthError(i.a.EmptyUsername)},e.prototype.handleAutoSignIn=function(e,t,n,r,i){this.autoSignInInitiated=!0;var o=new p.a({Username:e,Password:t,ValidationData:n,ClientMetadata:r});i.userConfirmed?this.signInAfterUserConfirmed(o):"link"===this._config.signUpVerificationMethod?this.handleLinkAutoSignIn(o):this.handleCodeAutoSignIn(o)},e.prototype.handleCodeAutoSignIn=function(e){var t=this;s.a.listen("auth",(function n(r){"confirmSignUp"===r.payload.event&&t.signInAfterUserConfirmed(e,n)}))},e.prototype.handleLinkAutoSignIn=function(e){var t=this;this._storage.setItem("amplify-polling-started","true");var n=Date.now(),r=setInterval((function(){Date.now()-n>18e4?(clearInterval(r),z("autoSignIn_failure",null,"Please confirm your account and use your credentials to sign in."),t._storage.removeItem("amplify-auto-sign-in")):t.signInAfterUserConfirmed(e,null,r)}),5e3)},e.prototype.signInAfterUserConfirmed=function(e,t,n){return j(this,void 0,void 0,(function(){var r,i,o=this;return R(this,(function(a){switch(a.label){case 0:r=this.createCognitoUser(e.getUsername()),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,r.authenticateUser(e,this.authCallbacks(r,(function(r){z("autoSignIn",r,e.getUsername()+" has signed in successfully"),t&&s.a.remove("auth",t),n&&(clearInterval(n),o._storage.removeItem("amplify-polling-started")),o._storage.removeItem("amplify-auto-sign-in")}),(function(e){B.error(e),o._storage.removeItem("amplify-auto-sign-in")})))];case 2:return a.sent(),[3,4];case 3:return i=a.sent(),B.error(i),[3,4];case 4:return[2]}}))}))},e.prototype.confirmSignUp=function(e,t,n){var r=this;if(!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(i.a.EmptyUsername);if(!t)return this.rejectAuthError(i.a.EmptyCode);var o,s=this.createCognitoUser(e),a=!n||"boolean"!=typeof n.forceAliasCreation||n.forceAliasCreation;return n&&n.clientMetadata?o=n.clientMetadata:this._config.clientMetadata&&(o=this._config.clientMetadata),new Promise((function(n,u){s.confirmRegistration(t,a,(function(t,o){t?u(t):(z("confirmSignUp",o,e+" has been confirmed successfully"),r.isTrueStorageValue("amplify-auto-sign-in")&&!r.autoSignInInitiated&&(z("autoSignIn_failure",null,i.a.AutoSignInError),r._storage.removeItem("amplify-auto-sign-in")),n(o))}),o)}))},e.prototype.isTrueStorageValue=function(e){var t=this._storage.getItem(e);return!!t&&"true"===t},e.prototype.resendSignUp=function(e,t){if(void 0===t&&(t=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(i.a.EmptyUsername);var n=this.createCognitoUser(e);return new Promise((function(e,r){n.resendConfirmationCode((function(t,n){t?r(t):e(n)}),t)}))},e.prototype.signIn=function(e,t,n){if(void 0===n&&(n=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();var r=null,o=null,s={};if("string"==typeof e)r=e,o=t;else{if(!Object(i.h)(e))return this.rejectAuthError(i.a.InvalidUsername);void 0!==t&&B.warn("The password should be defined under the first parameter object!"),r=e.username,o=e.password,s=e.validationData}if(!r)return this.rejectAuthError(i.a.EmptyUsername);var a=new p.a({Username:r,Password:o,ValidationData:s,ClientMetadata:n});return o?this.signInWithPassword(a):this.signInWithoutPassword(a)},e.prototype.authCallbacks=function(e,t,n){var r=this,i=this;return{onSuccess:function(o){return j(r,void 0,void 0,(function(){var r,s,a,u;return R(this,(function(c){switch(c.label){case 0:B.debug(o),delete e.challengeName,delete e.challengeParam,c.label=1;case 1:return c.trys.push([1,4,5,9]),[4,this.Credentials.clear()];case 2:return c.sent(),[4,this.Credentials.set(o,"session")];case 3:return r=c.sent(),B.debug("succeed to get cognito credentials",r),[3,9];case 4:return s=c.sent(),B.debug("cannot get cognito credentials",s),[3,9];case 5:return c.trys.push([5,7,,8]),[4,this.currentUserPoolUser()];case 6:return a=c.sent(),i.user=a,z("signIn",a,"A user "+e.getUsername()+" has been signed in"),t(a),[3,8];case 7:return u=c.sent(),B.error("Failed to get the signed in user",u),n(u),[3,8];case 8:return[7];case 9:return[2]}}))}))},onFailure:function(t){B.debug("signIn failure",t),z("signIn_failure",t,e.getUsername()+" failed to signin"),n(t)},customChallenge:function(n){B.debug("signIn custom challenge answer required"),e.challengeName="CUSTOM_CHALLENGE",e.challengeParam=n,t(e)},mfaRequired:function(n,r){B.debug("signIn MFA required"),e.challengeName=n,e.challengeParam=r,t(e)},mfaSetup:function(n,r){B.debug("signIn mfa setup",n),e.challengeName=n,e.challengeParam=r,t(e)},newPasswordRequired:function(n,r){B.debug("signIn new password"),e.challengeName="NEW_PASSWORD_REQUIRED",e.challengeParam={userAttributes:n,requiredAttributes:r},t(e)},totpRequired:function(n,r){B.debug("signIn totpRequired"),e.challengeName=n,e.challengeParam=r,t(e)},selectMFAType:function(n,r){B.debug("signIn selectMFAType",n),e.challengeName=n,e.challengeParam=r,t(e)}}},e.prototype.signInWithPassword=function(e){var t=this;if(this.pendingSignIn)throw new Error("Pending sign-in attempt already in progress");var n=this.createCognitoUser(e.getUsername());return this.pendingSignIn=new Promise((function(r,i){n.authenticateUser(e,t.authCallbacks(n,(function(e){t.pendingSignIn=null,r(e)}),(function(e){t.pendingSignIn=null,i(e)})))})),this.pendingSignIn},e.prototype.signInWithoutPassword=function(e){var t=this,n=this.createCognitoUser(e.getUsername());return n.setAuthenticationFlowType("CUSTOM_AUTH"),new Promise((function(r,i){n.initiateAuth(e,t.authCallbacks(n,r,i))}))},e.prototype.getMFAOptions=function(e){return new Promise((function(t,n){e.getMFAOptions((function(e,r){if(e)return B.debug("get MFA Options failed",e),void n(e);B.debug("get MFA options success",r),t(r)}))}))},e.prototype.getPreferredMFA=function(e,t){var n=this,r=this;return new Promise((function(i,o){var s=n._config.clientMetadata,a=!!t&&t.bypassCache;e.getUserData((function(t,s){return j(n,void 0,void 0,(function(){var n,a;return R(this,(function(u){switch(u.label){case 0:if(!t)return[3,5];if(B.debug("getting preferred mfa failed",t),!this.isSessionInvalid(t))return[3,4];u.label=1;case 1:return u.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(e)];case 2:return u.sent(),[3,4];case 3:return n=u.sent(),o(new Error("Session is invalid due to: "+t.message+" and failed to clean up invalid session: "+n.message)),[2];case 4:return o(t),[2];case 5:return(a=r._getMfaTypeFromUserData(s))?(i(a),[2]):(o("invalid MFA Type"),[2])}}))}))}),{bypassCache:a,clientMetadata:s})}))},e.prototype._getMfaTypeFromUserData=function(e){var t=null,n=e.PreferredMfaSetting;if(n)t=n;else{var r=e.UserMFASettingList;r?0===r.length?t="NOMFA":B.debug("invalid case for getPreferredMFA",e):t=e.MFAOptions?"SMS_MFA":"NOMFA"}return t},e.prototype._getUserData=function(e,t){var n=this;return new Promise((function(r,i){e.getUserData((function(t,o){return j(n,void 0,void 0,(function(){var n;return R(this,(function(s){switch(s.label){case 0:if(!t)return[3,5];if(B.debug("getting user data failed",t),!this.isSessionInvalid(t))return[3,4];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(e)];case 2:return s.sent(),[3,4];case 3:return n=s.sent(),i(new Error("Session is invalid due to: "+t.message+" and failed to clean up invalid session: "+n.message)),[2];case 4:return i(t),[2];case 5:r(o),s.label=6;case 6:return[2]}}))}))}),t)}))},e.prototype.setPreferredMFA=function(e,t){return j(this,void 0,void 0,(function(){var n,r,o,s,a,u,c=this;return R(this,(function(l){switch(l.label){case 0:return n=this._config.clientMetadata,[4,this._getUserData(e,{bypassCache:!0,clientMetadata:n})];case 1:switch(r=l.sent(),o=null,s=null,t){case"TOTP":case"SOFTWARE_TOKEN_MFA":return[3,2];case"SMS":case"SMS_MFA":return[3,3];case"NOMFA":return[3,4]}return[3,6];case 2:return s={PreferredMfa:!0,Enabled:!0},[3,7];case 3:return o={PreferredMfa:!0,Enabled:!0},[3,7];case 4:return a=r.UserMFASettingList,[4,this._getMfaTypeFromUserData(r)];case 5:if("NOMFA"===(u=l.sent()))return[2,Promise.resolve("No change for mfa type")];if("SMS_MFA"===u)o={PreferredMfa:!1,Enabled:!1};else{if("SOFTWARE_TOKEN_MFA"!==u)return[2,this.rejectAuthError(i.a.InvalidMFA)];s={PreferredMfa:!1,Enabled:!1}}return a&&0!==a.length&&a.forEach((function(e){"SMS_MFA"===e?o={PreferredMfa:!1,Enabled:!1}:"SOFTWARE_TOKEN_MFA"===e&&(s={PreferredMfa:!1,Enabled:!1})})),[3,7];case 6:return B.debug("no validmfa method provided"),[2,this.rejectAuthError(i.a.NoMFA)];case 7:return[2,new Promise((function(t,r){e.setUserMfaPreference(o,s,(function(i,o){if(i)return B.debug("Set user mfa preference error",i),r(i);B.debug("Set user mfa success",o),B.debug("Caching the latest user data into local"),e.getUserData((function(n,i){return j(c,void 0,void 0,(function(){var i;return R(this,(function(s){switch(s.label){case 0:if(!n)return[3,5];if(B.debug("getting user data failed",n),!this.isSessionInvalid(n))return[3,4];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(e)];case 2:return s.sent(),[3,4];case 3:return i=s.sent(),r(new Error("Session is invalid due to: "+n.message+" and failed to clean up invalid session: "+i.message)),[2];case 4:return[2,r(n)];case 5:return[2,t(o)]}}))}))}),{bypassCache:!0,clientMetadata:n})}))}))]}}))}))},e.prototype.disableSMS=function(e){return new Promise((function(t,n){e.disableMFA((function(e,r){if(e)return B.debug("disable mfa failed",e),void n(e);B.debug("disable mfa succeed",r),t(r)}))}))},e.prototype.enableSMS=function(e){return new Promise((function(t,n){e.enableMFA((function(e,r){if(e)return B.debug("enable mfa failed",e),void n(e);B.debug("enable mfa succeed",r),t(r)}))}))},e.prototype.setupTOTP=function(e){return new Promise((function(t,n){e.associateSoftwareToken({onFailure:function(e){B.debug("associateSoftwareToken failed",e),n(e)},associateSecretCode:function(e){B.debug("associateSoftwareToken sucess",e),t(e)}})}))},e.prototype.verifyTotpToken=function(e,t){return B.debug("verification totp token",e,t),new Promise((function(n,r){e.verifySoftwareToken(t,"My TOTP device",{onFailure:function(e){B.debug("verifyTotpToken failed",e),r(e)},onSuccess:function(t){z("signIn",e,"A user "+e.getUsername()+" has been signed in"),B.debug("verifyTotpToken success",t),n(t)}})}))},e.prototype.confirmSignIn=function(e,t,n,r){var o=this;if(void 0===r&&(r=this._config.clientMetadata),!t)return this.rejectAuthError(i.a.EmptyCode);var s=this;return new Promise((function(i,a){e.sendMFACode(t,{onSuccess:function(t){return j(o,void 0,void 0,(function(){var n,r;return R(this,(function(o){switch(o.label){case 0:B.debug(t),o.label=1;case 1:return o.trys.push([1,4,5,6]),[4,this.Credentials.clear()];case 2:return o.sent(),[4,this.Credentials.set(t,"session")];case 3:return n=o.sent(),B.debug("succeed to get cognito credentials",n),[3,6];case 4:return r=o.sent(),B.debug("cannot get cognito credentials",r),[3,6];case 5:return s.user=e,z("signIn",e,"A user "+e.getUsername()+" has been signed in"),i(e),[7];case 6:return[2]}}))}))},onFailure:function(e){B.debug("confirm signIn failure",e),a(e)}},n,r)}))},e.prototype.completeNewPassword=function(e,t,n,r){var o=this;if(void 0===n&&(n={}),void 0===r&&(r=this._config.clientMetadata),!t)return this.rejectAuthError(i.a.EmptyPassword);var s=this;return new Promise((function(i,a){e.completeNewPasswordChallenge(t,n,{onSuccess:function(t){return j(o,void 0,void 0,(function(){var n,r;return R(this,(function(o){switch(o.label){case 0:B.debug(t),o.label=1;case 1:return o.trys.push([1,4,5,6]),[4,this.Credentials.clear()];case 2:return o.sent(),[4,this.Credentials.set(t,"session")];case 3:return n=o.sent(),B.debug("succeed to get cognito credentials",n),[3,6];case 4:return r=o.sent(),B.debug("cannot get cognito credentials",r),[3,6];case 5:return s.user=e,z("signIn",e,"A user "+e.getUsername()+" has been signed in"),i(e),[7];case 6:return[2]}}))}))},onFailure:function(e){B.debug("completeNewPassword failure",e),z("completeNewPassword_failure",e,o.user+" failed to complete the new password flow"),a(e)},mfaRequired:function(t,n){B.debug("signIn MFA required"),e.challengeName=t,e.challengeParam=n,i(e)},mfaSetup:function(t,n){B.debug("signIn mfa setup",t),e.challengeName=t,e.challengeParam=n,i(e)},totpRequired:function(t,n){B.debug("signIn mfa setup",t),e.challengeName=t,e.challengeParam=n,i(e)}},r)}))},e.prototype.sendCustomChallengeAnswer=function(e,t,n){var r=this;return void 0===n&&(n=this._config.clientMetadata),this.userPool?t?new Promise((function(i,o){e.sendCustomChallengeAnswer(t,r.authCallbacks(e,i,o),n)})):this.rejectAuthError(i.a.EmptyChallengeResponse):this.rejectNoUserPool()},e.prototype.deleteUserAttributes=function(e,t){var n=this;return new Promise((function(r,i){n.userSession(e).then((function(n){e.deleteAttributes(t,(function(e,t){return e?i(e):r(t)}))}))}))},e.prototype.deleteUser=function(){return j(this,void 0,void 0,(function(){var e,t,n=this;return R(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this._storageSync];case 1:return r.sent(),[3,3];case 2:throw e=r.sent(),B.debug("Failed to sync cache info into memory",e),new Error(e);case 3:return t=this._oAuthHandler&&"true"===this._storage.getItem("amplify-signin-with-hostedUI"),[2,new Promise((function(e,r){return j(n,void 0,void 0,(function(){var n,i=this;return R(this,(function(o){if(this.userPool){if(!(n=this.userPool.getCurrentUser()))return B.debug("Failed to get user from user pool"),[2,r(new Error("No current user."))];n.getSession((function(o,s){return j(i,void 0,void 0,(function(){var i,s=this;return R(this,(function(a){switch(a.label){case 0:if(!o)return[3,5];if(B.debug("Failed to get the user session",o),!this.isSessionInvalid(o))return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(n)];case 2:return a.sent(),[3,4];case 3:return i=a.sent(),r(new Error("Session is invalid due to: "+o.message+" and failed to clean up invalid session: "+i.message)),[2];case 4:return[2,r(o)];case 5:n.deleteUser((function(i,o){if(i)r(i);else{z("userDeleted",o,"The authenticated user has been deleted."),n.signOut(),s.user=null;try{s.cleanCachedItems()}catch(e){B.debug("failed to clear cached items")}t?s.oAuthSignOutRedirect(e,r):(z("signOut",s.user,"A user has been signed out"),e(o))}})),a.label=6;case 6:return[2]}}))}))}))}else B.debug("no Congito User pool"),r(new Error("Cognito User pool does not exist"));return[2]}))}))}))]}}))}))},e.prototype.updateUserAttributes=function(e,t,n){void 0===n&&(n=this._config.clientMetadata);var r=[],i=this;return new Promise((function(o,s){i.userSession(e).then((function(i){for(var a in t)if("sub"!==a&&a.indexOf("_verified")<0){var u={Name:a,Value:t[a]};r.push(u)}e.updateAttributes(r,(function(e,t){return e?s(e):o(t)}),n)}))}))},e.prototype.userAttributes=function(e){var t=this;return new Promise((function(n,r){t.userSession(e).then((function(t){e.getUserAttributes((function(e,t){e?r(e):n(t)}))}))}))},e.prototype.verifiedContact=function(e){var t=this;return this.userAttributes(e).then((function(e){var n=t.attributesToObject(e),r={},i={};return n.email&&(n.email_verified?i.email=n.email:r.email=n.email),n.phone_number&&(n.phone_number_verified?i.phone_number=n.phone_number:r.phone_number=n.phone_number),{verified:i,unverified:r}}))},e.prototype.isErrorWithMessage=function(e){return"object"===L(e)&&Object.prototype.hasOwnProperty.call(e,"message")},e.prototype.isTokenRevokedError=function(e){return this.isErrorWithMessage(e)&&"Access Token has been revoked"===e.message},e.prototype.isRefreshTokenRevokedError=function(e){return this.isErrorWithMessage(e)&&"Refresh Token has been revoked"===e.message},e.prototype.isUserDisabledError=function(e){return this.isErrorWithMessage(e)&&"User is disabled."===e.message},e.prototype.isUserDoesNotExistError=function(e){return this.isErrorWithMessage(e)&&"User does not exist."===e.message},e.prototype.isRefreshTokenExpiredError=function(e){return this.isErrorWithMessage(e)&&"Refresh Token has expired"===e.message},e.prototype.isSignedInHostedUI=function(){return this._oAuthHandler&&"true"===this._storage.getItem("amplify-signin-with-hostedUI")},e.prototype.isSessionInvalid=function(e){return this.isUserDisabledError(e)||this.isUserDoesNotExistError(e)||this.isTokenRevokedError(e)||this.isRefreshTokenRevokedError(e)||this.isRefreshTokenExpiredError(e)},e.prototype.cleanUpInvalidSession=function(e){return j(this,void 0,void 0,(function(){var t=this;return R(this,(function(n){switch(n.label){case 0:e.signOut(),this.user=null,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.cleanCachedItems()];case 2:return n.sent(),[3,4];case 3:return n.sent(),B.debug("failed to clear cached items"),[3,4];case 4:return this.isSignedInHostedUI()?[2,new Promise((function(e,n){t.oAuthSignOutRedirect(e,n)}))]:(z("signOut",this.user,"A user has been signed out"),[2])}}))}))},e.prototype.currentUserPoolUser=function(e){var t=this;return this.userPool?new Promise((function(n,r){t._storageSync.then((function(){return j(t,void 0,void 0,(function(){var t,i,o=this;return R(this,(function(a){switch(a.label){case 0:return this.isOAuthInProgress()?(B.debug("OAuth signIn in progress, waiting for resolution..."),[4,new Promise((function(e){var t=setTimeout((function(){B.debug("OAuth signIn in progress timeout"),s.a.remove("auth",n),e()}),1e4);function n(r){var i=r.payload.event;"cognitoHostedUI"!==i&&"cognitoHostedUI_failure"!==i||(B.debug("OAuth signIn resolved: "+i),clearTimeout(t),s.a.remove("auth",n),e())}s.a.listen("auth",n)}))]):[3,2];case 1:a.sent(),a.label=2;case 2:return(t=this.userPool.getCurrentUser())?(i=this._config.clientMetadata,t.getSession((function(i,s){return j(o,void 0,void 0,(function(){var o,a,u,c,l=this;return R(this,(function(d){switch(d.label){case 0:if(!i)return[3,5];if(B.debug("Failed to get the user session",i),!this.isSessionInvalid(i))return[3,4];d.label=1;case 1:return d.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(t)];case 2:return d.sent(),[3,4];case 3:return o=d.sent(),r(new Error("Session is invalid due to: "+i.message+" and failed to clean up invalid session: "+o.message)),[2];case 4:return r(i),[2];case 5:return(a=!!e&&e.bypassCache)?[4,this.Credentials.clear()]:[3,7];case 6:d.sent(),d.label=7;case 7:return u=this._config.clientMetadata,(void 0===(c=s.getAccessToken().decodePayload().scope)?"":c).split(" ").includes("aws.cognito.signin.user.admin")?(t.getUserData((function(e,i){return j(l,void 0,void 0,(function(){var o,s,a,u,c,l,d;return R(this,(function(f){switch(f.label){case 0:if(!e)return[3,7];if(B.debug("getting user data failed",e),!this.isSessionInvalid(e))return[3,5];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(t)];case 2:return f.sent(),[3,4];case 3:return o=f.sent(),r(new Error("Session is invalid due to: "+e.message+" and failed to clean up invalid session: "+o.message)),[2];case 4:return r(e),[3,6];case 5:n(t),f.label=6;case 6:return[2];case 7:for(s=i.PreferredMfaSetting||"NOMFA",a=[],u=0;u<i.UserAttributes.length;u++)c={Name:i.UserAttributes[u].Name,Value:i.UserAttributes[u].Value},l=new p.f(c),a.push(l);return d=this.attributesToObject(a),Object.assign(t,{attributes:d,preferredMFA:s}),[2,n(t)]}}))}))}),{bypassCache:a,clientMetadata:u}),[2]):(B.debug("Unable to get the user data because the aws.cognito.signin.user.admin is not in the scopes of the access token"),[2,n(t)])}}))}))}),{clientMetadata:i}),[2]):(B.debug("Failed to get user from user pool"),r("No current user"),[2])}}))}))})).catch((function(e){return B.debug("Failed to sync cache info into memory",e),r(e)}))})):this.rejectNoUserPool()},e.prototype.isOAuthInProgress=function(){return this.oAuthFlowInProgress},e.prototype.currentAuthenticatedUser=function(e){return j(this,void 0,void 0,(function(){var t,n,r,i,o;return R(this,(function(s){switch(s.label){case 0:B.debug("getting current authenticated user"),t=null,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this._storageSync];case 2:return s.sent(),[3,4];case 3:throw n=s.sent(),B.debug("Failed to sync cache info into memory",n),n;case 4:try{(r=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")))&&(t=M(M({},r.user),{token:r.token}))}catch(e){B.debug("cannot load federated user from auth storage")}return t?(this.user=t,B.debug("get current authenticated federated user",this.user),[2,this.user]):[3,5];case 5:B.debug("get current authenticated userpool user"),i=null,s.label=6;case 6:return s.trys.push([6,8,,9]),[4,this.currentUserPoolUser(e)];case 7:return i=s.sent(),[3,9];case 8:return"No userPool"===(o=s.sent())&&B.error("Cannot get the current user because the user pool is missing. Please make sure the Auth module is configured with a valid Cognito User Pool ID"),B.debug("The user is not authenticated by the error",o),[2,Promise.reject("The user is not authenticated")];case 9:return this.user=i,[2,this.user]}}))}))},e.prototype.currentSession=function(){var e=this;return B.debug("Getting current session"),this.userPool?new Promise((function(t,n){e.currentUserPoolUser().then((function(r){e.userSession(r).then((function(e){t(e)})).catch((function(e){B.debug("Failed to get the current session",e),n(e)}))})).catch((function(e){B.debug("Failed to get the current user",e),n(e)}))})):Promise.reject(new Error("No User Pool in the configuration."))},e.prototype.userSession=function(e){var t=this;if(!e)return B.debug("the user is null"),this.rejectAuthError(i.a.NoUserSession);var n=this._config.clientMetadata;return new Promise((function(r,i){B.debug("Getting the session from this user:",e),e.getSession((function(n,o){return j(t,void 0,void 0,(function(){var t;return R(this,(function(s){switch(s.label){case 0:if(!n)return[3,5];if(B.debug("Failed to get the session from user",e),!this.isSessionInvalid(n))return[3,4];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(e)];case 2:return s.sent(),[3,4];case 3:return t=s.sent(),i(new Error("Session is invalid due to: "+n.message+" and failed to clean up invalid session: "+t.message)),[2];case 4:return i(n),[2];case 5:return B.debug("Succeed to get the user session",o),r(o),[2]}}))}))}),{clientMetadata:n})}))},e.prototype.currentUserCredentials=function(){return j(this,void 0,void 0,(function(){var e,t,n=this;return R(this,(function(r){switch(r.label){case 0:B.debug("Getting current user credentials"),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this._storageSync];case 2:return r.sent(),[3,4];case 3:throw e=r.sent(),B.debug("Failed to sync cache info into memory",e),e;case 4:t=null;try{t=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo"))}catch(e){B.debug("failed to get or parse item aws-amplify-federatedInfo",e)}return t?[2,this.Credentials.refreshFederatedToken(t)]:[2,this.currentSession().then((function(e){return B.debug("getting session success",e),n.Credentials.set(e,"session")})).catch((function(){return B.debug("getting guest credentials"),n.Credentials.set(null,"guest")}))]}}))}))},e.prototype.currentCredentials=function(){return B.debug("getting current credentials"),this.Credentials.get()},e.prototype.verifyUserAttribute=function(e,t,n){return void 0===n&&(n=this._config.clientMetadata),new Promise((function(r,i){e.getAttributeVerificationCode(t,{onSuccess:function(e){return r(e)},onFailure:function(e){return i(e)}},n)}))},e.prototype.verifyUserAttributeSubmit=function(e,t,n){return n?new Promise((function(r,i){e.verifyAttribute(t,n,{onSuccess:function(e){r(e)},onFailure:function(e){i(e)}})})):this.rejectAuthError(i.a.EmptyCode)},e.prototype.verifyCurrentUserAttribute=function(e){var t=this;return t.currentUserPoolUser().then((function(n){return t.verifyUserAttribute(n,e)}))},e.prototype.verifyCurrentUserAttributeSubmit=function(e,t){var n=this;return n.currentUserPoolUser().then((function(r){return n.verifyUserAttributeSubmit(r,e,t)}))},e.prototype.cognitoIdentitySignOut=function(e,t){return j(this,void 0,void 0,(function(){var n,r,i=this;return R(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this._storageSync];case 1:return o.sent(),[3,3];case 2:throw n=o.sent(),B.debug("Failed to sync cache info into memory",n),n;case 3:return r=this._oAuthHandler&&"true"===this._storage.getItem("amplify-signin-with-hostedUI"),[2,new Promise((function(n,o){if(e&&e.global){B.debug("user global sign out",t);var s=i._config.clientMetadata;t.getSession((function(e,s){return j(i,void 0,void 0,(function(){var i,s=this;return R(this,(function(a){switch(a.label){case 0:if(!e)return[3,5];if(B.debug("failed to get the user session",e),!this.isSessionInvalid(e))return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(t)];case 2:return a.sent(),[3,4];case 3:return i=a.sent(),o(new Error("Session is invalid due to: "+e.message+" and failed to clean up invalid session: "+i.message)),[2];case 4:return[2,o(e)];case 5:return t.globalSignOut({onSuccess:function(e){if(B.debug("global sign out success"),!r)return n();s.oAuthSignOutRedirect(n,o)},onFailure:function(e){return B.debug("global sign out failed",e),o(e)}}),[2]}}))}))}),{clientMetadata:s})}else B.debug("user sign out",t),t.signOut((function(){if(!r)return n();i.oAuthSignOutRedirect(n,o)}))}))]}}))}))},e.prototype.oAuthSignOutRedirect=function(e,t){Object(d.b)().isBrowser?this.oAuthSignOutRedirectOrReject(t):this.oAuthSignOutAndResolve(e)},e.prototype.oAuthSignOutAndResolve=function(e){this._oAuthHandler.signOut(),e()},e.prototype.oAuthSignOutRedirectOrReject=function(e){this._oAuthHandler.signOut(),setTimeout((function(){return e(Error("Signout timeout fail"))}),3e3)},e.prototype.signOut=function(e){return j(this,void 0,void 0,(function(){var t;return R(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.cleanCachedItems()];case 1:return n.sent(),[3,3];case 2:return n.sent(),B.debug("failed to clear cached items"),[3,3];case 3:return this.userPool?(t=this.userPool.getCurrentUser())?[4,this.cognitoIdentitySignOut(e,t)]:[3,5]:[3,7];case 4:return n.sent(),[3,6];case 5:B.debug("no current Cognito user"),n.label=6;case 6:return[3,8];case 7:B.debug("no Cognito User pool"),n.label=8;case 8:return z("signOut",this.user,"A user has been signed out"),this.user=null,[2]}}))}))},e.prototype.cleanCachedItems=function(){return j(this,void 0,void 0,(function(){return R(this,(function(e){switch(e.label){case 0:return[4,this.Credentials.clear()];case 1:return e.sent(),[2]}}))}))},e.prototype.changePassword=function(e,t,n,r){var i=this;return void 0===r&&(r=this._config.clientMetadata),new Promise((function(o,s){i.userSession(e).then((function(i){e.changePassword(t,n,(function(e,t){return e?(B.debug("change password failure",e),s(e)):o(t)}),r)}))}))},e.prototype.forgotPassword=function(e,t){if(void 0===t&&(t=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(i.a.EmptyUsername);var n=this.createCognitoUser(e);return new Promise((function(r,i){n.forgotPassword({onSuccess:function(){r()},onFailure:function(t){B.debug("forgot password failure",t),z("forgotPassword_failure",t,e+" forgotPassword failed"),i(t)},inputVerificationCode:function(t){z("forgotPassword",n,e+" has initiated forgot password flow"),r(t)}},t)}))},e.prototype.forgotPasswordSubmit=function(e,t,n,r){if(void 0===r&&(r=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(i.a.EmptyUsername);if(!t)return this.rejectAuthError(i.a.EmptyCode);if(!n)return this.rejectAuthError(i.a.EmptyPassword);var o=this.createCognitoUser(e);return new Promise((function(i,s){o.confirmPassword(t,n,{onSuccess:function(t){z("forgotPasswordSubmit",o,e+" forgotPasswordSubmit successful"),i(t)},onFailure:function(t){z("forgotPasswordSubmit_failure",t,e+" forgotPasswordSubmit failed"),s(t)}},r)}))},e.prototype.currentUserInfo=function(){return j(this,void 0,void 0,(function(){var e,t,n,r,i,o,s;return R(this,(function(a){switch(a.label){case 0:return(e=this.Credentials.getCredSource())&&"aws"!==e&&"userPool"!==e?[3,9]:[4,this.currentUserPoolUser().catch((function(e){return B.error(e)}))];case 1:if(!(s=a.sent()))return[2,null];a.label=2;case 2:return a.trys.push([2,8,,9]),[4,this.userAttributes(s)];case 3:t=a.sent(),n=this.attributesToObject(t),r=null,a.label=4;case 4:return a.trys.push([4,6,,7]),[4,this.currentCredentials()];case 5:return r=a.sent(),[3,7];case 6:return i=a.sent(),B.debug("Failed to retrieve credentials while getting current user info",i),[3,7];case 7:return[2,{id:r?r.identityId:void 0,username:s.getUsername(),attributes:n}];case 8:return o=a.sent(),B.error("currentUserInfo error",o),[2,{}];case 9:return"federated"===e?[2,(s=this.user)||{}]:[2]}}))}))},e.prototype.federatedSignIn=function(e,t,n){return j(this,void 0,void 0,(function(){var r,o,s,a,u,c,l,d,f,p,h;return R(this,(function(v){switch(v.label){case 0:if(!this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation requires either a User Pool or Identity Pool in config");if(void 0===e&&this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation with Identity Pools requires tokens passed as arguments");return Object(i.f)(e)||Object(i.g)(e)||Object(i.d)(e)||void 0===e?(r=e||{provider:i.b.Cognito},u=Object(i.f)(r)?r.provider:r.customProvider,Object(i.f)(r),o=r.customState,this._config.userPoolId&&(s=Object(i.e)(this._config.oauth)?this._config.userPoolWebClientId:this._config.oauth.clientID,a=Object(i.e)(this._config.oauth)?this._config.oauth.redirectSignIn:this._config.oauth.redirectUri,this._oAuthHandler.oauthSignIn(this._config.oauth.responseType,this._config.oauth.domain,a,s,u,o)),[3,4]):[3,1];case 1:u=e;try{(c=JSON.stringify(JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")).user))&&B.warn("There is already a signed in user: "+c+" in your app.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tYou should not call Auth.federatedSignIn method again as it may cause unexpected behavior.")}catch(e){}return l=t.token,d=t.identity_id,f=t.expires_at,[4,this.Credentials.set({provider:u,token:l,identity_id:d,user:n,expires_at:f},"federation")];case 2:return p=v.sent(),[4,this.currentAuthenticatedUser()];case 3:return h=v.sent(),z("signIn",h,"A user "+h.username+" has been signed in"),B.debug("federated sign in credentials",p),[2,p];case 4:return[2]}}))}))},e.prototype._handleAuthResponse=function(e){return j(this,void 0,void 0,(function(){var t,n,r,i,o,s,a,u,c,l,f,v,g,m;return R(this,(function(y){switch(y.label){case 0:if(this.oAuthFlowInProgress)return B.debug("Skipping URL "+e+" current flow in progress"),[2];y.label=1;case 1:if(y.trys.push([1,,8,9]),this.oAuthFlowInProgress=!0,!this._config.userPoolId)throw new Error("OAuth responses require a User Pool defined in config");if(z("parsingCallbackUrl",{url:e},"The callback url is being parsed"),t=e||(Object(d.b)().isBrowser?window.location.href:""),n=!!(Object(h.parse)(t).query||"").split("&").map((function(e){return e.split("=")})).find((function(e){var t=U(e,1)[0];return"code"===t||"error"===t})),r=!!(Object(h.parse)(t).hash||"#").substr(1).split("&").map((function(e){return e.split("=")})).find((function(e){var t=U(e,1)[0];return"access_token"===t||"error"===t})),!n&&!r)return[3,7];this._storage.setItem("amplify-redirected-from-hosted-ui","true"),y.label=2;case 2:return y.trys.push([2,6,,7]),[4,this._oAuthHandler.handleAuthResponse(t)];case 3:return i=y.sent(),o=i.accessToken,s=i.idToken,a=i.refreshToken,u=i.state,c=new p.h({IdToken:new p.c({IdToken:s}),RefreshToken:new p.d({RefreshToken:a}),AccessToken:new p.b({AccessToken:o})}),l=void 0,this._config.identityPoolId?[4,this.Credentials.set(c,"session")]:[3,5];case 4:l=y.sent(),B.debug("AWS credentials",l),y.label=5;case 5:return f=/-/.test(u),(v=this.createCognitoUser(c.getIdToken().decodePayload()["cognito:username"])).setSignInUserSession(c),window&&void 0!==window.history&&window.history.replaceState({},null,this._config.oauth.redirectSignIn),z("signIn",v,"A user "+v.getUsername()+" has been signed in"),z("cognitoHostedUI",v,"A user "+v.getUsername()+" has been signed in via Cognito Hosted UI"),f&&(g=u.split("-").splice(1).join("-"),z("customOAuthState",g.match(/.{2}/g).map((function(e){return String.fromCharCode(parseInt(e,16))})).join(""),"State for user "+v.getUsername())),[2,l];case 6:return m=y.sent(),B.debug("Error in cognito hosted auth response",m),window&&void 0!==window.history&&window.history.replaceState({},null,this._config.oauth.redirectSignIn),z("signIn_failure",m,"The OAuth response flow failed"),z("cognitoHostedUI_failure",m,"A failure occurred when returning to the Cognito Hosted UI"),z("customState_failure",m,"A failure occurred when returning state"),[3,7];case 7:return[3,9];case 8:return this.oAuthFlowInProgress=!1,[7];case 9:return[2]}}))}))},e.prototype.essentialCredentials=function(e){return{accessKeyId:e.accessKeyId,sessionToken:e.sessionToken,secretAccessKey:e.secretAccessKey,identityId:e.identityId,authenticated:e.authenticated}},e.prototype.attributesToObject=function(e){var t=this,n={};return e&&e.map((function(e){"email_verified"===e.Name||"phone_number_verified"===e.Name?n[e.Name]=t.isTruthyString(e.Value)||!0===e.Value:n[e.Name]=e.Value})),n},e.prototype.isTruthyString=function(e){return"function"==typeof e.toLowerCase&&"true"===e.toLowerCase()},e.prototype.createCognitoUser=function(e){var t={Username:e,Pool:this.userPool};t.Storage=this._storage;var n=this._config.authenticationFlowType,r=new p.e(t);return n&&r.setAuthenticationFlowType(n),r},e.prototype._isValidAuthStorage=function(e){return!!e&&"function"==typeof e.getItem&&"function"==typeof e.setItem&&"function"==typeof e.removeItem&&"function"==typeof e.clear},e.prototype.noUserPoolErrorHandler=function(e){return!e||e.userPoolId&&e.identityPoolId?i.a.NoConfig:i.a.MissingAuthConfig},e.prototype.rejectAuthError=function(e){return Promise.reject(new k(e))},e.prototype.rejectNoUserPool=function(){var e=this.noUserPoolErrorHandler(this._config);return Promise.reject(new D(e))},e.prototype.rememberDevice=function(){return j(this,void 0,void 0,(function(){var e,t;return R(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.currentUserPoolUser()];case 1:return e=n.sent(),[3,3];case 2:return t=n.sent(),B.debug("The user is not authenticated by the error",t),[2,Promise.reject("The user is not authenticated")];case 3:return e.getCachedDeviceKeyAndPassword(),[2,new Promise((function(t,n){e.setDeviceStatusRemembered({onSuccess:function(e){t(e)},onFailure:function(e){"InvalidParameterException"===e.code?n(new k(i.a.DeviceConfig)):"NetworkError"===e.code?n(new k(i.a.NetworkError)):n(e)}})}))]}}))}))},e.prototype.forgetDevice=function(){return j(this,void 0,void 0,(function(){var e,t;return R(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.currentUserPoolUser()];case 1:return e=n.sent(),[3,3];case 2:return t=n.sent(),B.debug("The user is not authenticated by the error",t),[2,Promise.reject("The user is not authenticated")];case 3:return e.getCachedDeviceKeyAndPassword(),[2,new Promise((function(t,n){e.forgetDevice({onSuccess:function(e){t(e)},onFailure:function(e){"InvalidParameterException"===e.code?n(new k(i.a.DeviceConfig)):"NetworkError"===e.code?n(new k(i.a.NetworkError)):n(e)}})}))]}}))}))},e.prototype.fetchDevices=function(){return j(this,void 0,void 0,(function(){var e,t;return R(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.currentUserPoolUser()];case 1:return e=n.sent(),[3,3];case 2:throw t=n.sent(),B.debug("The user is not authenticated by the error",t),new Error("The user is not authenticated");case 3:return e.getCachedDeviceKeyAndPassword(),[2,new Promise((function(t,n){var r={onSuccess:function(e){var n=e.Devices.map((function(e){var t=e.DeviceAttributes.find((function(e){return"device_name"===e.Name}))||{};return{id:e.DeviceKey,name:t.Value}}));t(n)},onFailure:function(e){"InvalidParameterException"===e.code?n(new k(i.a.DeviceConfig)):"NetworkError"===e.code?n(new k(i.a.NetworkError)):n(e)}};e.listDevices(60,null,r)}))]}}))}))},e}())(null);f.a.register(q)},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){"use strict";n.d(t,"b",(function(){return g})),n.d(t,"a",(function(){return m}));var r=n(59),i=n(26),o=n(186),s=n(48),a=n(80),u=n(20),c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},l=new s.a("RestAPI"),d=function(){function e(e){this._api=null,this.Credentials=a.a,this._options=e,l.debug("API Options",this._options)}return e.prototype.getModuleName=function(){return"RestAPI"},e.prototype.configure=function(e){var t=e||{},n=t.API,r=void 0===n?{}:n,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(t,["API"]),o=c(c({},i),r);if(l.debug("configure Rest API",{opt:o}),o.aws_project_region){if(o.aws_cloud_logic_custom){var s=o.aws_cloud_logic_custom;o.endpoints="string"==typeof s?JSON.parse(s):s}o=Object.assign({},o,{region:o.aws_project_region,header:{}})}return Array.isArray(o.endpoints)?o.endpoints.forEach((function(e){void 0!==e.custom_header&&"function"!=typeof e.custom_header&&(l.warn("Rest API "+e.name+", custom_header should be a function"),e.custom_header=void 0)})):this._options&&Array.isArray(this._options.endpoints)?o.endpoints=this._options.endpoints:o.endpoints=[],this._options=Object.assign({},this._options,o),this.createInstance(),this._options},e.prototype.createInstance=function(){return l.debug("create Rest API instance"),this._api=new o.a(this._options),this._api.Credentials=this.Credentials,!0},e.prototype.get=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.get(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(e){return Promise.reject(e.message)}},e.prototype.post=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.post(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(e){return Promise.reject(e.message)}},e.prototype.put=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.put(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(e){return Promise.reject(e.message)}},e.prototype.patch=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.patch(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(e){return Promise.reject(e.message)}},e.prototype.del=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.del(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(e){return Promise.reject(e.message)}},e.prototype.head=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.head(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(e){return Promise.reject(e.message)}},e.prototype.isCancel=function(e){return this._api.isCancel(e)},e.prototype.cancel=function(e,t){return this._api.cancel(e,t)},e.prototype.hasCancelToken=function(e){return this._api.hasCancelToken(e)},e.prototype.endpoint=function(e){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(t){return[2,this._api.endpoint(e)]}))}))},e.prototype.getEndpointInfo=function(e,t){var n=this._options.endpoints;if(!Array.isArray(n))throw new Error("API category not configured");var r=n.find((function(t){return t.name===e}));if(!r)throw new Error("API "+e+" does not exist");var i={endpoint:r.endpoint+t};return"string"==typeof r.region?i.region=r.region:"string"==typeof this._options.region&&(i.region=this._options.region),"string"==typeof r.service?i.service=r.service||"execute-api":i.service="execute-api","function"==typeof r.custom_header?i.custom_header=r.custom_header:i.custom_header=void 0,i},e}(),f=new d(null);u.a.register(f);var p=n(173),h=function(){return(h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},v=new s.a("API"),g=function(){function e(e){this.Auth=r.a,this.Cache=i.b,this.Credentials=a.a,this._options=e,this._restApi=new d(e),this._graphqlApi=new p.a(e),v.debug("API Options",this._options)}return e.prototype.getModuleName=function(){return"API"},e.prototype.configure=function(e){this._options=Object.assign({},this._options,e),this._restApi.Credentials=this.Credentials,this._graphqlApi.Auth=this.Auth,this._graphqlApi.Cache=this.Cache,this._graphqlApi.Credentials=this.Credentials;var t=this._restApi.configure(this._options),n=this._graphqlApi.configure(this._options);return h(h({},t),n)},e.prototype.get=function(e,t,n){return this._restApi.get(e,t,n)},e.prototype.post=function(e,t,n){return this._restApi.post(e,t,n)},e.prototype.put=function(e,t,n){return this._restApi.put(e,t,n)},e.prototype.patch=function(e,t,n){return this._restApi.patch(e,t,n)},e.prototype.del=function(e,t,n){return this._restApi.del(e,t,n)},e.prototype.head=function(e,t,n){return this._restApi.head(e,t,n)},e.prototype.isCancel=function(e){return this._restApi.isCancel(e)},e.prototype.cancel=function(e,t){return this._restApi.hasCancelToken(e)?this._restApi.cancel(e,t):!!this._graphqlApi.hasCancelToken(e)&&this._graphqlApi.cancel(e,t)},e.prototype.endpoint=function(e){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(t){return[2,this._restApi.endpoint(e)]}))}))},e.prototype.getGraphqlOperationType=function(e){return this._graphqlApi.getGraphqlOperationType(e)},e.prototype.graphql=function(e,t){return this._graphqlApi.graphql(e,t)},e}(),m=new g(null);u.a.register(m)},function(e,t,n){var r=n(264),i=n(267);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return p}));var r=n(48),i=n(34),o=n(429),s=new r.a("CognitoCredentials"),a=new Promise((function(e,t){return Object(i.b)().isBrowser?window.gapi&&window.gapi.auth2&&window.gapi.auth2?(s.debug("google api already loaded"),e()):void setTimeout((function(){return e()}),2e3):(s.debug("not in the browser, directly resolved"),e())})),u=function(){function e(){this.initialized=!1,this.refreshGoogleToken=this.refreshGoogleToken.bind(this),this._refreshGoogleTokenImpl=this._refreshGoogleTokenImpl.bind(this)}return e.prototype.refreshGoogleToken=function(){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(e){switch(e.label){case 0:return this.initialized?[3,2]:(s.debug("need to wait for the Google SDK loaded"),[4,a]);case 1:e.sent(),this.initialized=!0,s.debug("finish waiting"),e.label=2;case 2:return[2,this._refreshGoogleTokenImpl()]}}))}))},e.prototype._refreshGoogleTokenImpl=function(){var e=null;return Object(i.b)().isBrowser&&(e=window.gapi&&window.gapi.auth2?window.gapi.auth2:null),e?new Promise((function(t,n){e.getAuthInstance().then((function(e){e||(s.debug("google Auth undefined"),n(new o.a("google Auth undefined")));var r=e.currentUser.get();r.isSignedIn()?(s.debug("refreshing the google access token"),r.reloadAuthResponse().then((function(e){var n=e.id_token,r=e.expires_at;t({token:n,expires_at:r})})).catch((function(e){e&&"network_error"===e.error?n("Network error reloading google auth response"):n(new o.a("Failed to reload google auth response"))}))):n(new o.a("User is not signed in with Google"))})).catch((function(e){s.debug("Failed to refresh google token",e),n(new o.a("Failed to refresh google token"))}))})):(s.debug("no gapi auth2 available"),Promise.reject("no gapi auth2 available"))},e}(),c=new r.a("CognitoCredentials"),l=new Promise((function(e,t){return Object(i.b)().isBrowser?window.FB?(c.debug("FB SDK already loaded"),e()):void setTimeout((function(){return e()}),2e3):(c.debug("not in the browser, directly resolved"),e())})),d=function(){function e(){this.initialized=!1,this.refreshFacebookToken=this.refreshFacebookToken.bind(this),this._refreshFacebookTokenImpl=this._refreshFacebookTokenImpl.bind(this)}return e.prototype.refreshFacebookToken=function(){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(e){switch(e.label){case 0:return this.initialized?[3,2]:(c.debug("need to wait for the Facebook SDK loaded"),[4,l]);case 1:e.sent(),this.initialized=!0,c.debug("finish waiting"),e.label=2;case 2:return[2,this._refreshFacebookTokenImpl()]}}))}))},e.prototype._refreshFacebookTokenImpl=function(){var e=null;return Object(i.b)().isBrowser&&(e=window.FB),e?new Promise((function(t,n){e.getLoginStatus((function(e){if(e&&e.authResponse){var r=e.authResponse,i=r.accessToken,s=1e3*r.expiresIn+(new Date).getTime();i||(a="the jwtToken is undefined",c.debug(a),n(new o.a(a))),t({token:i,expires_at:s})}else{var a="no response from facebook when refreshing the jwt token";c.debug(a),n(new o.a(a))}}),{scope:"public_profile,email"})})):(c.debug("no fb sdk available"),Promise.reject(new o.a("no fb sdk available")))},e}(),f=new u,p=new d},function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return p}));var r=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},i=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e},o=function(e){return/^Connection failed: Connection Timeout/.test(e.message)},s=function(e){return/^Error: Request failed with status code 5\d\d/.test(e.message)},a={BadModel:function(){return!1},BadRecord:function(e){var t=e.message;return/^Cannot return \w+ for [\w-_]+ type/.test(t)||/^Variable '.+' has coerced Null value for NonNull type/.test(t)},ConfigError:function(){return!1},Transient:function(e){return o(e)||s(e)},Unauthorized:function(e){return/^Request failed with status code 401/.test(e.message)}},u={BadModel:function(){return!1},BadRecord:function(){return!1},ConfigError:function(){return!1},Transient:function(e){var t=l(e);return o(t)||s(t)},Unauthorized:function(e){var t=l(e);return/Connection failed.+Unauthorized/.test(t.message)}},c={BadModel:function(){return!1},BadRecord:function(e){return/^Cannot return \w+ for [\w-_]+ type/.test(e.message)},ConfigError:function(){return!1},Transient:function(e){return o(e)||s(e)},Unauthorized:function(){return!1}};function l(e){var t=e.error;return r((void 0===t?{errors:[]}:t).errors,1)[0]}function d(e){return h(a,e)}function f(e){return h(u,e)}function p(e){return h(c,e)}function h(e,t){var n,r,o=i(Object.keys(e));try{for(var s=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(o),a=s.next();!a.done;a=s.next()){var u=a.value;if((0,e[u])(t))return u}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return"Unknown"}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function o(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function s(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}Object.create,Object.create;var a=function(e){function t(n,r){void 0===r&&(r=!0);var i=e.call(this,n)||this;return i.tryNextLink=r,i.name="ProviderError",Object.setPrototypeOf(i,t.prototype),i}return i(t,e),t.from=function(e,t){return void 0===t&&(t=!0),Object.assign(new this(e.message,t),e)},t}(Error);(function(e){i((function t(n,r){void 0===r&&(r=!0);var i=e.call(this,n,r)||this;return i.tryNextLink=r,i.name="CredentialsProviderError",Object.setPrototypeOf(i,t.prototype),i}),e)})(a),function(e){i((function t(n,r){void 0===r&&(r=!0);var i=e.call(this,n,r)||this;return i.tryNextLink=r,i.name="TokenProviderError",Object.setPrototypeOf(i,t.prototype),i}),e)}(a);var u=function(e,t,n){var r,i,a,u=!1,c=function(){return o(void 0,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:i||(i=e()),t.label=1;case 1:return t.trys.push([1,,3,4]),[4,i];case 2:return r=t.sent(),a=!0,u=!1,[3,4];case 3:return i=void 0,[7];case 4:return[2,r]}}))}))};return void 0===t?function(e){return o(void 0,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return a&&!(null==e?void 0:e.forceRefresh)?[3,2]:[4,c()];case 1:r=t.sent(),t.label=2;case 2:return[2,r]}}))}))}:function(e){return o(void 0,void 0,void 0,(function(){return s(this,(function(i){switch(i.label){case 0:return a&&!(null==e?void 0:e.forceRefresh)?[3,2]:[4,c()];case 1:r=i.sent(),i.label=2;case 2:return u?[2,r]:n&&!n(r)?(u=!0,[2,r]):t(r)?[4,c()]:[3,4];case 3:return i.sent(),[2,r];case 4:return[2,r]}}))}))}}},function(e,t,n){var r;e.exports=(r=n(38),n(115),n(212),r.HmacSHA256)},function(e,t,n){"use strict";t.parse=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var n={},i=t||{},o=e.split(";"),a=i.decode||r,u=0;u<o.length;u++){var c=o[u],l=c.indexOf("=");if(!(l<0)){var d=c.substring(0,l).trim();if(null==n[d]){var f=c.substring(l+1,c.length).trim();'"'===f[0]&&(f=f.slice(1,-1)),n[d]=s(f,a)}}}return n},t.serialize=function(e,t,n){var r=n||{},s=r.encode||i;if("function"!=typeof s)throw new TypeError("option encode is invalid");if(!o.test(e))throw new TypeError("argument name is invalid");var a=s(t);if(a&&!o.test(a))throw new TypeError("argument val is invalid");var u=e+"="+a;if(null!=r.maxAge){var c=r.maxAge-0;if(isNaN(c)||!isFinite(c))throw new TypeError("option maxAge is invalid");u+="; Max-Age="+Math.floor(c)}if(r.domain){if(!o.test(r.domain))throw new TypeError("option domain is invalid");u+="; Domain="+r.domain}if(r.path){if(!o.test(r.path))throw new TypeError("option path is invalid");u+="; Path="+r.path}if(r.expires){if("function"!=typeof r.expires.toUTCString)throw new TypeError("option expires is invalid");u+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(u+="; HttpOnly"),r.secure&&(u+="; Secure"),r.sameSite)switch("string"==typeof r.sameSite?r.sameSite.toLowerCase():r.sameSite){case!0:u+="; SameSite=Strict";break;case"lax":u+="; SameSite=Lax";break;case"strict":u+="; SameSite=Strict";break;case"none":u+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return u};var r=decodeURIComponent,i=encodeURIComponent,o=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function s(e,t){try{return t(e)}catch(t){return e}}},function(e,t,n){var r=n(351),i=n(352),o=i;o.v1=r,o.v4=i,e.exports=o},function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return f}));var r=n(0),i=n(17),o=n(5),s=n(33),a=n(32),u=function(t,n){return Object(r.b)(void 0,void 0,void 0,(function(){var s,a,u,c,l,d,f,p,v;return Object(r.d)(this,(function(r){switch(r.label){case 0:return[4,n.endpoint()];case 1:return s=r.sent(),a=s.hostname,u=s.protocol,c=void 0===u?"https":u,l=s.port,d=s.path,f=h({},q,{"x-amz-content-sha256":"UNSIGNED-PAYLOAD","content-type":t.contentType||"application/octet-stream","x-amz-lex-session-attributes":[function(){return q(t.sessionAttributes)},function(){return n.base64Encoder(e.from(o.c.fromObject(t.sessionAttributes)))}],"x-amz-lex-request-attributes":[function(){return q(t.requestAttributes)},function(){return n.base64Encoder(e.from(o.c.fromObject(t.requestAttributes)))}],accept:t.accept,"x-amz-lex-active-contexts":[function(){return q(t.activeContexts)},function(){return n.base64Encoder(e.from(o.c.fromObject(t.activeContexts)))}]}),p="".concat((null==d?void 0:d.endsWith("/"))?d.slice(0,-1):d||"")+"/bot/{botName}/alias/{botAlias}/user/{userId}/content",p=Object(o.n)(p,t,"botName",(function(){return t.botName}),"{botName}",!1),p=Object(o.n)(p,t,"botAlias",(function(){return t.botAlias}),"{botAlias}",!1),p=Object(o.n)(p,t,"userId",(function(){return t.userId}),"{userId}",!1),void 0!==t.inputStream&&(v=t.inputStream),[2,new i.a({protocol:c,hostname:a,port:l,method:"POST",headers:f,path:p,body:v})]}}))}))},c=function(e,t){return Object(r.b)(void 0,void 0,void 0,(function(){var n,s,a,u,c,l,d,f,p;return Object(r.d)(this,(function(h){switch(h.label){case 0:return[4,t.endpoint()];case 1:return n=h.sent(),s=n.hostname,a=n.protocol,u=void 0===a?"https":a,c=n.port,l=n.path,d={"content-type":"application/json"},f="".concat((null==l?void 0:l.endsWith("/"))?l.slice(0,-1):l||"")+"/bot/{botName}/alias/{botAlias}/user/{userId}/text",f=Object(o.n)(f,e,"botName",(function(){return e.botName}),"{botName}",!1),f=Object(o.n)(f,e,"botAlias",(function(){return e.botAlias}),"{botAlias}",!1),f=Object(o.n)(f,e,"userId",(function(){return e.userId}),"{userId}",!1),p=JSON.stringify(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)({},null!=e.activeContexts&&{activeContexts:I(e.activeContexts,t)}),null!=e.inputText&&{inputText:e.inputText}),null!=e.requestAttributes&&{requestAttributes:x(e.requestAttributes,t)}),null!=e.sessionAttributes&&{sessionAttributes:x(e.sessionAttributes,t)})),[2,new i.a({protocol:u,hostname:s,port:c,method:"POST",headers:d,path:f,body:p})]}}))}))},l=function(t,n){return Object(r.b)(void 0,void 0,void 0,(function(){var i,s;return Object(r.d)(this,(function(r){return 200!==t.statusCode&&t.statusCode>=300?[2,d(t,n)]:(i=h({$metadata:z(t),contentType:[,t.headers["content-type"]],intentName:[,t.headers["x-amz-lex-intent-name"]],nluIntentConfidence:[function(){return void 0!==t.headers["x-amz-lex-nlu-intent-confidence"]},function(){return new o.c(e.from(n.base64Decoder(t.headers["x-amz-lex-nlu-intent-confidence"])).toString("utf8"))}],alternativeIntents:[function(){return void 0!==t.headers["x-amz-lex-alternative-intents"]},function(){return new o.c(e.from(n.base64Decoder(t.headers["x-amz-lex-alternative-intents"])).toString("utf8"))}],slots:[function(){return void 0!==t.headers["x-amz-lex-slots"]},function(){return new o.c(e.from(n.base64Decoder(t.headers["x-amz-lex-slots"])).toString("utf8"))}],sessionAttributes:[function(){return void 0!==t.headers["x-amz-lex-session-attributes"]},function(){return new o.c(e.from(n.base64Decoder(t.headers["x-amz-lex-session-attributes"])).toString("utf8"))}],sentimentResponse:[,t.headers["x-amz-lex-sentiment"]],message:[,t.headers["x-amz-lex-message"]],encodedMessage:[,t.headers["x-amz-lex-encoded-message"]],messageFormat:[,t.headers["x-amz-lex-message-format"]],dialogState:[,t.headers["x-amz-lex-dialog-state"]],slotToElicit:[,t.headers["x-amz-lex-slot-to-elicit"]],inputTranscript:[,t.headers["x-amz-lex-input-transcript"]],encodedInputTranscript:[,t.headers["x-amz-lex-encoded-input-transcript"]],botVersion:[,t.headers["x-amz-lex-bot-version"]],sessionId:[,t.headers["x-amz-lex-session-id"]],activeContexts:[function(){return void 0!==t.headers["x-amz-lex-active-contexts"]},function(){return new o.c(e.from(n.base64Decoder(t.headers["x-amz-lex-active-contexts"])).toString("utf8"))}]}),s=t.body,i.audioStream=s,[2,i])}))}))},d=function(e,t){return Object(r.b)(void 0,void 0,void 0,(function(){var n,i,a,u,c;return Object(r.d)(this,(function(l){switch(l.label){case 0:return i=[Object(r.a)({},e)],c={},[4,K(e.body,t)];case 1:switch(n=r.a.apply(void 0,i.concat([(c.body=l.sent(),c)])),a=V(e,n.body)){case"BadGatewayException":case"com.amazonaws.lexruntimeservice#BadGatewayException":return[3,2];case"BadRequestException":case"com.amazonaws.lexruntimeservice#BadRequestException":return[3,4];case"ConflictException":case"com.amazonaws.lexruntimeservice#ConflictException":return[3,6];case"DependencyFailedException":case"com.amazonaws.lexruntimeservice#DependencyFailedException":return[3,8];case"InternalFailureException":case"com.amazonaws.lexruntimeservice#InternalFailureException":return[3,10];case"LimitExceededException":case"com.amazonaws.lexruntimeservice#LimitExceededException":return[3,12];case"LoopDetectedException":case"com.amazonaws.lexruntimeservice#LoopDetectedException":return[3,14];case"NotAcceptableException":case"com.amazonaws.lexruntimeservice#NotAcceptableException":return[3,16];case"NotFoundException":case"com.amazonaws.lexruntimeservice#NotFoundException":return[3,18];case"RequestTimeoutException":case"com.amazonaws.lexruntimeservice#RequestTimeoutException":return[3,20];case"UnsupportedMediaTypeException":case"com.amazonaws.lexruntimeservice#UnsupportedMediaTypeException":return[3,22]}return[3,24];case 2:return[4,v(n,t)];case 3:throw l.sent();case 4:return[4,g(n,t)];case 5:throw l.sent();case 6:return[4,m(n,t)];case 7:throw l.sent();case 8:return[4,y(n,t)];case 9:throw l.sent();case 10:return[4,b(n,t)];case 11:throw l.sent();case 12:return[4,w(n,t)];case 13:throw l.sent();case 14:return[4,_(n,t)];case 15:throw l.sent();case 16:return[4,S(n,t)];case 17:throw l.sent();case 18:return[4,E(n,t)];case 19:throw l.sent();case 20:return[4,C(n,t)];case 21:throw l.sent();case 22:return[4,A(n,t)];case 23:throw l.sent();case 24:u=n.body,Object(o.o)({output:e,parsedBody:u,exceptionCtor:s.a,errorCode:a}),l.label=25;case 25:return[2]}}))}))},f=function(e,t){return Object(r.b)(void 0,void 0,void 0,(function(){var n,i,s,a;return Object(r.d)(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,p(e,t)]:(n=h({$metadata:z(e)}),s=o.h,a=o.i,[4,$(e.body,t)]);case 1:return null!=(i=s.apply(void 0,[a.apply(void 0,[r.sent()]),"body"])).activeContexts&&(n.activeContexts=k(i.activeContexts,t)),null!=i.alternativeIntents&&(n.alternativeIntents=M(i.alternativeIntents,t)),null!=i.botVersion&&(n.botVersion=Object(o.j)(i.botVersion)),null!=i.dialogState&&(n.dialogState=Object(o.j)(i.dialogState)),null!=i.intentName&&(n.intentName=Object(o.j)(i.intentName)),null!=i.message&&(n.message=Object(o.j)(i.message)),null!=i.messageFormat&&(n.messageFormat=Object(o.j)(i.messageFormat)),null!=i.nluIntentConfidence&&(n.nluIntentConfidence=L(i.nluIntentConfidence,t)),null!=i.responseCard&&(n.responseCard=U(i.responseCard,t)),null!=i.sentimentResponse&&(n.sentimentResponse=B(i.sentimentResponse,t)),null!=i.sessionAttributes&&(n.sessionAttributes=F(i.sessionAttributes,t)),null!=i.sessionId&&(n.sessionId=Object(o.j)(i.sessionId)),null!=i.slotToElicit&&(n.slotToElicit=Object(o.j)(i.slotToElicit)),null!=i.slots&&(n.slots=F(i.slots,t)),[2,n]}}))}))},p=function(e,t){return Object(r.b)(void 0,void 0,void 0,(function(){var n,i,a,u,c;return Object(r.d)(this,(function(l){switch(l.label){case 0:return i=[Object(r.a)({},e)],c={},[4,K(e.body,t)];case 1:switch(n=r.a.apply(void 0,i.concat([(c.body=l.sent(),c)])),a=V(e,n.body)){case"BadGatewayException":case"com.amazonaws.lexruntimeservice#BadGatewayException":return[3,2];case"BadRequestException":case"com.amazonaws.lexruntimeservice#BadRequestException":return[3,4];case"ConflictException":case"com.amazonaws.lexruntimeservice#ConflictException":return[3,6];case"DependencyFailedException":case"com.amazonaws.lexruntimeservice#DependencyFailedException":return[3,8];case"InternalFailureException":case"com.amazonaws.lexruntimeservice#InternalFailureException":return[3,10];case"LimitExceededException":case"com.amazonaws.lexruntimeservice#LimitExceededException":return[3,12];case"LoopDetectedException":case"com.amazonaws.lexruntimeservice#LoopDetectedException":return[3,14];case"NotFoundException":case"com.amazonaws.lexruntimeservice#NotFoundException":return[3,16]}return[3,18];case 2:return[4,v(n,t)];case 3:throw l.sent();case 4:return[4,g(n,t)];case 5:throw l.sent();case 6:return[4,m(n,t)];case 7:throw l.sent();case 8:return[4,y(n,t)];case 9:throw l.sent();case 10:return[4,b(n,t)];case 11:throw l.sent();case 12:return[4,w(n,t)];case 13:throw l.sent();case 14:return[4,_(n,t)];case 15:throw l.sent();case 16:return[4,E(n,t)];case 17:throw l.sent();case 18:u=n.body,Object(o.o)({output:e,parsedBody:u,exceptionCtor:s.a,errorCode:a}),l.label=19;case 19:return[2]}}))}))},h=o.m,v=function(e,t){return Object(r.b)(void 0,void 0,void 0,(function(){var t,n,i;return Object(r.d)(this,(function(s){return t=h({}),null!=(n=e.body).Message&&(t.Message=Object(o.j)(n.Message)),i=new a.a(Object(r.a)({$metadata:z(e)},t)),[2,Object(o.f)(i,e.body)]}))}))},g=function(e,t){return Object(r.b)(void 0,void 0,void 0,(function(){var t,n,i;return Object(r.d)(this,(function(s){return t=h({}),null!=(n=e.body).message&&(t.message=Object(o.j)(n.message)),i=new a.b(Object(r.a)({$metadata:z(e)},t)),[2,Object(o.f)(i,e.body)]}))}))},m=function(e,t){return Object(r.b)(void 0,void 0,void 0,(function(){var t,n,i;return Object(r.d)(this,(function(s){return t=h({}),null!=(n=e.body).message&&(t.message=Object(o.j)(n.message)),i=new a.c(Object(r.a)({$metadata:z(e)},t)),[2,Object(o.f)(i,e.body)]}))}))},y=function(e,t){return Object(r.b)(void 0,void 0,void 0,(function(){var t,n,i;return Object(r.d)(this,(function(s){return t=h({}),null!=(n=e.body).Message&&(t.Message=Object(o.j)(n.Message)),i=new a.d(Object(r.a)({$metadata:z(e)},t)),[2,Object(o.f)(i,e.body)]}))}))},b=function(e,t){return Object(r.b)(void 0,void 0,void 0,(function(){var t,n,i;return Object(r.d)(this,(function(s){return t=h({}),null!=(n=e.body).message&&(t.message=Object(o.j)(n.message)),i=new a.e(Object(r.a)({$metadata:z(e)},t)),[2,Object(o.f)(i,e.body)]}))}))},w=function(e,t){return Object(r.b)(void 0,void 0,void 0,(function(){var t,n,i;return Object(r.d)(this,(function(s){return t=h({retryAfterSeconds:[,e.headers["retry-after"]]}),null!=(n=e.body).message&&(t.message=Object(o.j)(n.message)),i=new a.f(Object(r.a)({$metadata:z(e)},t)),[2,Object(o.f)(i,e.body)]}))}))},_=function(e,t){return Object(r.b)(void 0,void 0,void 0,(function(){var t,n,i;return Object(r.d)(this,(function(s){return t=h({}),null!=(n=e.body).Message&&(t.Message=Object(o.j)(n.Message)),i=new a.g(Object(r.a)({$metadata:z(e)},t)),[2,Object(o.f)(i,e.body)]}))}))},S=function(e,t){return Object(r.b)(void 0,void 0,void 0,(function(){var t,n,i;return Object(r.d)(this,(function(s){return t=h({}),null!=(n=e.body).message&&(t.message=Object(o.j)(n.message)),i=new a.h(Object(r.a)({$metadata:z(e)},t)),[2,Object(o.f)(i,e.body)]}))}))},E=function(e,t){return Object(r.b)(void 0,void 0,void 0,(function(){var t,n,i;return Object(r.d)(this,(function(s){return t=h({}),null!=(n=e.body).message&&(t.message=Object(o.j)(n.message)),i=new a.i(Object(r.a)({$metadata:z(e)},t)),[2,Object(o.f)(i,e.body)]}))}))},C=function(e,t){return Object(r.b)(void 0,void 0,void 0,(function(){var t,n,i;return Object(r.d)(this,(function(s){return t=h({}),null!=(n=e.body).message&&(t.message=Object(o.j)(n.message)),i=new a.n(Object(r.a)({$metadata:z(e)},t)),[2,Object(o.f)(i,e.body)]}))}))},A=function(e,t){return Object(r.b)(void 0,void 0,void 0,(function(){var t,n,i;return Object(r.d)(this,(function(s){return t=h({}),null!=(n=e.body).message&&(t.message=Object(o.j)(n.message)),i=new a.o(Object(r.a)({$metadata:z(e)},t)),[2,Object(o.f)(i,e.body)]}))}))},O=function(e,t){return Object.entries(e).reduce((function(e,t){var n,i=Object(r.e)(t,2),o=i[0],s=i[1];return null===s?e:Object(r.a)(Object(r.a)({},e),((n={})[o]=s,n))}),{})},I=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return function(e,t){return Object(r.a)(Object(r.a)(Object(r.a)({},null!=e.name&&{name:e.name}),null!=e.parameters&&{parameters:O(e.parameters)}),null!=e.timeToLive&&{timeToLive:T(e.timeToLive,t)})}(e,t)}))},T=function(e,t){return Object(r.a)(Object(r.a)({},null!=e.timeToLiveInSeconds&&{timeToLiveInSeconds:e.timeToLiveInSeconds}),null!=e.turnsToLive&&{turnsToLive:e.turnsToLive})},x=function(e,t){return Object.entries(e).reduce((function(e,t){var n,i=Object(r.e)(t,2),o=i[0],s=i[1];return null===s?e:Object(r.a)(Object(r.a)({},e),((n={})[o]=s,n))}),{})},P=function(e,t){return Object.entries(e).reduce((function(e,t){var n,i=Object(r.e)(t,2),s=i[0],a=i[1];return null===a?e:Object(r.a)(Object(r.a)({},e),((n={})[s]=Object(o.j)(a),n))}),{})},k=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){return{name:Object(o.j)(e.name),parameters:null!=e.parameters?P(e.parameters):void 0,timeToLive:null!=e.timeToLive?D(e.timeToLive,t):void 0}}(e,t)}))},D=function(e,t){return{timeToLiveInSeconds:Object(o.g)(e.timeToLiveInSeconds),turnsToLive:Object(o.g)(e.turnsToLive)}},N=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){return{attachmentLinkUrl:Object(o.j)(e.attachmentLinkUrl),buttons:null!=e.buttons?j(e.buttons,t):void 0,imageUrl:Object(o.j)(e.imageUrl),subTitle:Object(o.j)(e.subTitle),title:Object(o.j)(e.title)}}(e,t)}))},L=function(e,t){return{score:Object(o.k)(e.score)}},M=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:R(e,t)}))},j=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){return{text:Object(o.j)(e.text),value:Object(o.j)(e.value)}}(e)}))},R=function(e,t){return{intentName:Object(o.j)(e.intentName),nluIntentConfidence:null!=e.nluIntentConfidence?L(e.nluIntentConfidence,t):void 0,slots:null!=e.slots?F(e.slots,t):void 0}},U=function(e,t){return{contentType:Object(o.j)(e.contentType),genericAttachments:null!=e.genericAttachments?N(e.genericAttachments,t):void 0,version:Object(o.j)(e.version)}},B=function(e,t){return{sentimentLabel:Object(o.j)(e.sentimentLabel),sentimentScore:Object(o.j)(e.sentimentScore)}},F=function(e,t){return Object.entries(e).reduce((function(e,t){var n,i=Object(r.e)(t,2),s=i[0],a=i[1];return null===a?e:Object(r.a)(Object(r.a)({},e),((n={})[s]=Object(o.j)(a),n))}),{})},z=function(e){var t,n;return{httpStatusCode:e.statusCode,requestId:null!==(n=null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"])&&void 0!==n?n:e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},q=function(e){return!(null==e||""===e||Object.getOwnPropertyNames(e).includes("length")&&0==e.length||Object.getOwnPropertyNames(e).includes("size")&&0==e.size)},$=function(e,t){return function(e,t){return function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)}(e,t).then((function(e){return t.utf8Encoder(e)}))}(e,t).then((function(e){return e.length?JSON.parse(e):{}}))},K=function(e,t){return Object(r.b)(void 0,void 0,void 0,(function(){var n,i;return Object(r.d)(this,(function(r){switch(r.label){case 0:return[4,$(e,t)];case 1:return(n=r.sent()).message=null!==(i=n.message)&&void 0!==i?i:n.Message,[2,n]}}))}))},V=function(e,t){var n,r=function(e){var t=e;return"number"==typeof t&&(t=t.toString()),t.indexOf(",")>=0&&(t=t.split(",")[0]),t.indexOf(":")>=0&&(t=t.split(":")[0]),t.indexOf("#")>=0&&(t=t.split("#")[1]),t},i=(n=e.headers,"x-amzn-errortype",Object.keys(n).find((function(e){return e.toLowerCase()==="x-amzn-errortype".toLowerCase()})));return void 0!==i?r(e.headers[i]):void 0!==t.code?r(t.code):void 0!==t.__type?r(t.__type):void 0}}).call(this,n(12).Buffer)},function(e,t,n){var r,i,o;o=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function i(){}function o(t,n,o){if("undefined"!=typeof document){"number"==typeof(o=e({path:"/"},i.defaults,o)).expires&&(o.expires=new Date(1*new Date+864e5*o.expires)),o.expires=o.expires?o.expires.toUTCString():"";try{var s=JSON.stringify(n);/^[\{\[]/.test(s)&&(n=s)}catch(e){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var a="";for(var u in o)o[u]&&(a+="; "+u,!0!==o[u]&&(a+="="+o[u].split(";")[0]));return document.cookie=t+"="+n+a}}function s(e,n){if("undefined"!=typeof document){for(var i={},o=document.cookie?document.cookie.split("; "):[],s=0;s<o.length;s++){var a=o[s].split("="),u=a.slice(1).join("=");n||'"'!==u.charAt(0)||(u=u.slice(1,-1));try{var c=t(a[0]);if(u=(r.read||r)(u,c)||t(u),n)try{u=JSON.parse(u)}catch(e){}if(i[c]=u,e===c)break}catch(e){}}return e?i[e]:i}}return i.set=o,i.get=function(e){return s(e,!1)},i.getJSON=function(e){return s(e,!0)},i.remove=function(t,n){o(t,"",e(n,{expires:-1}))},i.defaults={},i.withConverter=n,i}((function(){}))},void 0===(i="function"==typeof(r=o)?r.call(t,n,t,e):r)||(e.exports=i),e.exports=o()},,function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var u,c=[],l=!1,d=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):d=-1,c.length&&p())}function p(){if(!l){var e=a(f);l=!0;for(var t=c.length;t;){for(u=c,c=[];++d<t;)u&&u[d].run();d=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function v(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||l||a(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){var r=n(82),i=n(256),o=n(257),s=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?i(e):o(e)}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r={},i=function(){function e(){}return e.setItem=function(e,t){return r[e]=t,r[e]},e.getItem=function(e){return Object.prototype.hasOwnProperty.call(r,e)?r[e]:void 0},e.removeItem=function(e){return delete r[e]},e.clear=function(){return r={}},e}(),o=function(){function e(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.amplify.test-ls",1),this.storageWindow.removeItem("aws.amplify.test-ls")}catch(e){this.storageWindow=i}}return e.prototype.getStorage=function(){return this.storageWindow},e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(48),i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},o=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},s=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e},a=new r.a("Hub"),u="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",c=new(function(){function e(e){this.listeners=[],this.patterns=[],this.protectedChannels=["core","auth","api","analytics","interactions","pubsub","storage","ui","xr"],this.name=e}return e.prototype.remove=function(e,t){if(e instanceof RegExp){var n=this.patterns.find((function(t){return t.pattern.source===e.source}));if(!n)return void a.warn("No listeners for "+e);this.patterns=s(this.patterns.filter((function(e){return e!==n})))}else{var r=this.listeners[e];if(!r)return void a.warn("No listeners for "+e);this.listeners[e]=s(r.filter((function(e){return e.callback!==t})))}},e.prototype.dispatch=function(e,t,n,r){void 0===n&&(n=""),this.protectedChannels.indexOf(e)>-1&&(r===u||a.warn("WARNING: "+e+" is protected and dispatching on it can have unintended consequences"));var o={channel:e,payload:i({},t),source:n,patternInfo:[]};try{this._toListeners(o)}catch(e){a.error(e)}},e.prototype.listen=function(e,t,n){var r,i=this;if(void 0===n&&(n="noname"),function(e){return void 0!==e.onHubCapsule}(t))a.warn("WARNING onHubCapsule is Deprecated. Please pass in a callback."),r=t.onHubCapsule.bind(t);else{if("function"!=typeof t)throw new Error("No callback supplied to Hub");r=t}if(e instanceof RegExp)this.patterns.push({pattern:e,callback:r});else{var o=this.listeners[e];o||(o=[],this.listeners[e]=o),o.push({name:n,callback:r})}return function(){i.remove(e,r)}},e.prototype._toListeners=function(e){var t=e.channel,n=e.payload,r=this.listeners[t];if(r&&r.forEach((function(r){a.debug("Dispatching to "+t+" with ",n);try{r.callback(e)}catch(e){a.error(e)}})),this.patterns.length>0){if(!n.message)return void a.warn("Cannot perform pattern matching without a message key");var s=n.message;this.patterns.forEach((function(t){var n=s.match(t.pattern);if(n){var r=o(n).slice(1),u=i(i({},e),{patternInfo:r});try{t.callback(u)}catch(e){a.error(e)}}}))}},e}())("__default__")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AwsCrc32=t.Crc32=t.crc32=void 0;var r=n(2),i=n(135);t.crc32=function(e){return(new o).update(e).digest()};var o=function(){function e(){this.checksum=4294967295}return e.prototype.update=function(e){var t,n;try{for(var i=(0,r.__values)(e),o=i.next();!o.done;o=i.next()){var a=o.value;this.checksum=this.checksum>>>8^s[255&(this.checksum^a)]}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return this},e.prototype.digest=function(){return(4294967295^this.checksum)>>>0},e}();t.Crc32=o;var s=(0,i.uint32ArrayFrom)([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]),a=n(252);Object.defineProperty(t,"AwsCrc32",{enumerable:!0,get:function(){return a.AwsCrc32}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return pr}));var r=n(48),i=n(77),o=n(34),s=n(64),a=n(429),u=n(49),c=n(20),l=n(2),d=function(e,t){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}d(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var p,h,v,g,m,y,b,w,_,S,E,C,A,O,I,T,x,P,k,D,N,L,M,j,R,U,B,F,z,q,$,K,V,G,H,W,J,Y,Z,Q,X,ee,te,ne,re,ie,oe,se,ae,ue,ce,le,de,fe,pe,he,ve,ge=function(){return(ge=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function me(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function ye(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}Object.create,Object.create,function(e){e.AUTHENTICATED_ROLE="AuthenticatedRole",e.DENY="Deny"}(p||(p={})),(h||(h={})).filterSensitiveLog=function(e){return ge({},e)},(v||(v={})).filterSensitiveLog=function(e){return ge({},e)},(g||(g={})).filterSensitiveLog=function(e){return ge({},e)},(m||(m={})).filterSensitiveLog=function(e){return ge({},e)},(y||(y={})).filterSensitiveLog=function(e){return ge({},e)},(b||(b={})).filterSensitiveLog=function(e){return ge({},e)},(w||(w={})).filterSensitiveLog=function(e){return ge({},e)},(_||(_={})).filterSensitiveLog=function(e){return ge({},e)},(S||(S={})).filterSensitiveLog=function(e){return ge({},e)},(E||(E={})).filterSensitiveLog=function(e){return ge({},e)},function(e){e.ACCESS_DENIED="AccessDenied",e.INTERNAL_SERVER_ERROR="InternalServerError"}(C||(C={})),(A||(A={})).filterSensitiveLog=function(e){return ge({},e)},(O||(O={})).filterSensitiveLog=function(e){return ge({},e)},(I||(I={})).filterSensitiveLog=function(e){return ge({},e)},(T||(T={})).filterSensitiveLog=function(e){return ge({},e)},(x||(x={})).filterSensitiveLog=function(e){return ge({},e)},(P||(P={})).filterSensitiveLog=function(e){return ge({},e)},(k||(k={})).filterSensitiveLog=function(e){return ge({},e)},(D||(D={})).filterSensitiveLog=function(e){return ge({},e)},(N||(N={})).filterSensitiveLog=function(e){return ge({},e)},(L||(L={})).filterSensitiveLog=function(e){return ge({},e)},(M||(M={})).filterSensitiveLog=function(e){return ge({},e)},(j||(j={})).filterSensitiveLog=function(e){return ge({},e)},(R||(R={})).filterSensitiveLog=function(e){return ge({},e)},(U||(U={})).filterSensitiveLog=function(e){return ge({},e)},(B||(B={})).filterSensitiveLog=function(e){return ge({},e)},function(e){e.CONTAINS="Contains",e.EQUALS="Equals",e.NOT_EQUAL="NotEqual",e.STARTS_WITH="StartsWith"}(F||(F={})),(z||(z={})).filterSensitiveLog=function(e){return ge({},e)},(q||(q={})).filterSensitiveLog=function(e){return ge({},e)},function(e){e.RULES="Rules",e.TOKEN="Token"}($||($={})),(K||(K={})).filterSensitiveLog=function(e){return ge({},e)},(V||(V={})).filterSensitiveLog=function(e){return ge({},e)},(G||(G={})).filterSensitiveLog=function(e){return ge({},e)},(H||(H={})).filterSensitiveLog=function(e){return ge({},e)},(W||(W={})).filterSensitiveLog=function(e){return ge({},e)},(J||(J={})).filterSensitiveLog=function(e){return ge({},e)},(Y||(Y={})).filterSensitiveLog=function(e){return ge({},e)},(Z||(Z={})).filterSensitiveLog=function(e){return ge({},e)},(Q||(Q={})).filterSensitiveLog=function(e){return ge({},e)},(X||(X={})).filterSensitiveLog=function(e){return ge({},e)},(ee||(ee={})).filterSensitiveLog=function(e){return ge({},e)},(te||(te={})).filterSensitiveLog=function(e){return ge({},e)},(ne||(ne={})).filterSensitiveLog=function(e){return ge({},e)},(re||(re={})).filterSensitiveLog=function(e){return ge({},e)},(ie||(ie={})).filterSensitiveLog=function(e){return ge({},e)},(oe||(oe={})).filterSensitiveLog=function(e){return ge({},e)},(se||(se={})).filterSensitiveLog=function(e){return ge({},e)},(ae||(ae={})).filterSensitiveLog=function(e){return ge({},e)},(ue||(ue={})).filterSensitiveLog=function(e){return ge({},e)},(ce||(ce={})).filterSensitiveLog=function(e){return ge({},e)},(le||(le={})).filterSensitiveLog=function(e){return ge({},e)},(de||(de={})).filterSensitiveLog=function(e){return ge({},e)},(fe||(fe={})).filterSensitiveLog=function(e){return ge({},e)},(pe||(pe={})).filterSensitiveLog=function(e){return ge({},e)},(he||(he={})).filterSensitiveLog=function(e){return ge({},e)},(ve||(ve={})).filterSensitiveLog=function(e){return ge({},e)};var be=n(3),we=function(e,t){return me(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,d,f,p,h,v,g;return ye(this,(function(m){switch(m.label){case 0:return r=[ge({},e)],g={},[4,Ke(e.body,t)];case 1:switch(n=ge.apply(void 0,r.concat([(g.body=m.sent(),g)])),o="UnknownError",o=Ve(e,n.body)){case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":return[3,2];case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,4];case"InvalidIdentityPoolConfigurationException":case"com.amazonaws.cognitoidentity#InvalidIdentityPoolConfigurationException":return[3,6];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,8];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,10];case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":return[3,12];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,14];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,16]}return[3,18];case 2:return s=[{}],[4,Se(n,t)];case 3:return i=ge.apply(void 0,[ge.apply(void 0,s.concat([m.sent()])),{name:o,$metadata:qe(e)}]),[3,19];case 4:return a=[{}],[4,Ee(n,t)];case 5:return i=ge.apply(void 0,[ge.apply(void 0,a.concat([m.sent()])),{name:o,$metadata:qe(e)}]),[3,19];case 6:return u=[{}],[4,Ce(n,t)];case 7:return i=ge.apply(void 0,[ge.apply(void 0,u.concat([m.sent()])),{name:o,$metadata:qe(e)}]),[3,19];case 8:return c=[{}],[4,Ae(n,t)];case 9:return i=ge.apply(void 0,[ge.apply(void 0,c.concat([m.sent()])),{name:o,$metadata:qe(e)}]),[3,19];case 10:return l=[{}],[4,Ie(n,t)];case 11:return i=ge.apply(void 0,[ge.apply(void 0,l.concat([m.sent()])),{name:o,$metadata:qe(e)}]),[3,19];case 12:return d=[{}],[4,Te(n,t)];case 13:return i=ge.apply(void 0,[ge.apply(void 0,d.concat([m.sent()])),{name:o,$metadata:qe(e)}]),[3,19];case 14:return f=[{}],[4,xe(n,t)];case 15:return i=ge.apply(void 0,[ge.apply(void 0,f.concat([m.sent()])),{name:o,$metadata:qe(e)}]),[3,19];case 16:return p=[{}],[4,Pe(n,t)];case 17:return i=ge.apply(void 0,[ge.apply(void 0,p.concat([m.sent()])),{name:o,$metadata:qe(e)}]),[3,19];case 18:h=n.body,o=h.code||h.Code||o,i=ge(ge({},h),{name:""+o,message:h.message||h.Message||o,$fault:"client",$metadata:qe(e)}),m.label=19;case 19:return v=i.message||i.Message||o,i.message=v,delete i.Message,[2,Promise.reject(Object.assign(new Error(v),i))]}}))}))},_e=function(e,t){return me(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,d,f,p,h,v,g;return ye(this,(function(m){switch(m.label){case 0:return r=[ge({},e)],g={},[4,Ke(e.body,t)];case 1:switch(n=ge.apply(void 0,r.concat([(g.body=m.sent(),g)])),o="UnknownError",o=Ve(e,n.body)){case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":return[3,2];case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,4];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,6];case"LimitExceededException":case"com.amazonaws.cognitoidentity#LimitExceededException":return[3,8];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,10];case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":return[3,12];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,14];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,16]}return[3,18];case 2:return s=[{}],[4,Se(n,t)];case 3:return i=ge.apply(void 0,[ge.apply(void 0,s.concat([m.sent()])),{name:o,$metadata:qe(e)}]),[3,19];case 4:return a=[{}],[4,Ee(n,t)];case 5:return i=ge.apply(void 0,[ge.apply(void 0,a.concat([m.sent()])),{name:o,$metadata:qe(e)}]),[3,19];case 6:return u=[{}],[4,Ae(n,t)];case 7:return i=ge.apply(void 0,[ge.apply(void 0,u.concat([m.sent()])),{name:o,$metadata:qe(e)}]),[3,19];case 8:return c=[{}],[4,Oe(n,t)];case 9:return i=ge.apply(void 0,[ge.apply(void 0,c.concat([m.sent()])),{name:o,$metadata:qe(e)}]),[3,19];case 10:return l=[{}],[4,Ie(n,t)];case 11:return i=ge.apply(void 0,[ge.apply(void 0,l.concat([m.sent()])),{name:o,$metadata:qe(e)}]),[3,19];case 12:return d=[{}],[4,Te(n,t)];case 13:return i=ge.apply(void 0,[ge.apply(void 0,d.concat([m.sent()])),{name:o,$metadata:qe(e)}]),[3,19];case 14:return f=[{}],[4,xe(n,t)];case 15:return i=ge.apply(void 0,[ge.apply(void 0,f.concat([m.sent()])),{name:o,$metadata:qe(e)}]),[3,19];case 16:return p=[{}],[4,Pe(n,t)];case 17:return i=ge.apply(void 0,[ge.apply(void 0,p.concat([m.sent()])),{name:o,$metadata:qe(e)}]),[3,19];case 18:h=n.body,o=h.code||h.Code||o,i=ge(ge({},h),{name:""+o,message:h.message||h.Message||o,$fault:"client",$metadata:qe(e)}),m.label=19;case 19:return v=i.message||i.Message||o,i.message=v,delete i.Message,[2,Promise.reject(Object.assign(new Error(v),i))]}}))}))},Se=function(e,t){return me(void 0,void 0,void 0,(function(){var n,r;return ye(this,(function(i){return n=e.body,r=Ne(n,t),[2,ge({name:"ExternalServiceException",$fault:"client",$metadata:qe(e)},r)]}))}))},Ee=function(e,t){return me(void 0,void 0,void 0,(function(){var n,r;return ye(this,(function(i){return n=e.body,r=Le(n,t),[2,ge({name:"InternalErrorException",$fault:"server",$metadata:qe(e)},r)]}))}))},Ce=function(e,t){return me(void 0,void 0,void 0,(function(){var n,r;return ye(this,(function(i){return n=e.body,r=Me(n,t),[2,ge({name:"InvalidIdentityPoolConfigurationException",$fault:"client",$metadata:qe(e)},r)]}))}))},Ae=function(e,t){return me(void 0,void 0,void 0,(function(){var n,r;return ye(this,(function(i){return n=e.body,r=je(n,t),[2,ge({name:"InvalidParameterException",$fault:"client",$metadata:qe(e)},r)]}))}))},Oe=function(e,t){return me(void 0,void 0,void 0,(function(){var n,r;return ye(this,(function(i){return n=e.body,r=Re(n,t),[2,ge({name:"LimitExceededException",$fault:"client",$metadata:qe(e)},r)]}))}))},Ie=function(e,t){return me(void 0,void 0,void 0,(function(){var n,r;return ye(this,(function(i){return n=e.body,r=Ue(n,t),[2,ge({name:"NotAuthorizedException",$fault:"client",$metadata:qe(e)},r)]}))}))},Te=function(e,t){return me(void 0,void 0,void 0,(function(){var n,r;return ye(this,(function(i){return n=e.body,r=Be(n,t),[2,ge({name:"ResourceConflictException",$fault:"client",$metadata:qe(e)},r)]}))}))},xe=function(e,t){return me(void 0,void 0,void 0,(function(){var n,r;return ye(this,(function(i){return n=e.body,r=Fe(n,t),[2,ge({name:"ResourceNotFoundException",$fault:"client",$metadata:qe(e)},r)]}))}))},Pe=function(e,t){return me(void 0,void 0,void 0,(function(){var n,r;return ye(this,(function(i){return n=e.body,r=ze(n,t),[2,ge({name:"TooManyRequestsException",$fault:"client",$metadata:qe(e)},r)]}))}))},ke=function(e,t){return Object.entries(e).reduce((function(e,t){var n,r=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}(t,2),i=r[0],o=r[1];return null===o?e:ge(ge({},e),((n={})[i]=o,n))}),{})},De=function(e,t){return{AccessKeyId:void 0!==e.AccessKeyId&&null!==e.AccessKeyId?e.AccessKeyId:void 0,Expiration:void 0!==e.Expiration&&null!==e.Expiration?new Date(Math.round(1e3*e.Expiration)):void 0,SecretKey:void 0!==e.SecretKey&&null!==e.SecretKey?e.SecretKey:void 0,SessionToken:void 0!==e.SessionToken&&null!==e.SessionToken?e.SessionToken:void 0}},Ne=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Le=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Me=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},je=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Re=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Ue=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Be=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Fe=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},ze=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},qe=function(e){var t;return{httpStatusCode:e.statusCode,requestId:null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},$e=function(e,t,n,r,i){return me(void 0,void 0,void 0,(function(){var o,s,a,u,c,l;return ye(this,(function(d){switch(d.label){case 0:return[4,e.endpoint()];case 1:return o=d.sent(),s=o.hostname,a=o.protocol,u=void 0===a?"https":a,c=o.port,l={protocol:u,hostname:s,port:c,method:"POST",path:n,headers:t},void 0!==r&&(l.hostname=r),void 0!==i&&(l.body=i),[2,new be.a(l)]}}))}))},Ke=function(e,t){return function(e,t){return function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)}(e,t).then((function(e){return t.utf8Encoder(e)}))}(e,t).then((function(e){return e.length?JSON.parse(e):{}}))},Ve=function(e,t){var n,r=function(e){var t=e;return t.indexOf(":")>=0&&(t=t.split(":")[0]),t.indexOf("#")>=0&&(t=t.split("#")[1]),t},i=(n=e.headers,"x-amzn-errortype",Object.keys(n).find((function(e){return e.toLowerCase()==="x-amzn-errortype".toLowerCase()})));return void 0!==i?r(e.headers[i]):void 0!==t.code?r(t.code):void 0!==t.__type?r(t.__type):""},Ge=n(10),He=n(1),We=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return f(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(Ge.a)(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CognitoIdentityClient",commandName:"GetCredentialsForIdentityCommand",inputFilterSensitiveLog:N.filterSensitiveLog,outputFilterSensitiveLog:M.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return me(void 0,void 0,void 0,(function(){var n,r;return ye(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.GetCredentialsForIdentity"},r=JSON.stringify(function(e,t){return ge(ge(ge({},void 0!==e.CustomRoleArn&&null!==e.CustomRoleArn&&{CustomRoleArn:e.CustomRoleArn}),void 0!==e.IdentityId&&null!==e.IdentityId&&{IdentityId:e.IdentityId}),void 0!==e.Logins&&null!==e.Logins&&{Logins:ke(e.Logins,t)})}(e,t)),[2,$e(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return me(void 0,void 0,void 0,(function(){var n,r,i;return ye(this,(function(o){switch(o.label){case 0:return e.statusCode>=300?[2,we(e,t)]:[4,Ke(e.body,t)];case 1:return n=o.sent(),r=function(e,t){return{Credentials:void 0!==e.Credentials&&null!==e.Credentials?De(e.Credentials):void 0,IdentityId:void 0!==e.IdentityId&&null!==e.IdentityId?e.IdentityId:void 0}}(n),i=ge({$metadata:qe(e)},r),[2,Promise.resolve(i)]}}))}))}(e,t)},t}(He.b),Je=function(e){function t(t,n){void 0===n&&(n=!0);var r=e.call(this,t)||this;return r.tryNextLink=n,r}return Object(l.__extends)(t,e),t}(Error);function Ye(e){return Promise.all(Object.keys(e).reduce((function(t,n){var r=e[n];return"string"==typeof r?t.push([n,r]):t.push(r().then((function(e){return[n,e]}))),t}),[])).then((function(e){return e.reduce((function(e,t){var n=Object(l.__read)(t,2),r=n[0],i=n[1];return e[r]=i,e}),{})}))}function Ze(e){var t=this;return function(){return Object(l.__awaiter)(t,void 0,void 0,(function(){var t,n,r,i,o,s,a,u,c,d,f,p,h;return Object(l.__generator)(this,(function(l){switch(l.label){case 0:return d=(c=e.client).send,f=We.bind,h={CustomRoleArn:e.customRoleArn,IdentityId:e.identityId},e.logins?[4,Ye(e.logins)]:[3,2];case 1:return p=l.sent(),[3,3];case 2:p=void 0,l.label=3;case 3:return[4,d.apply(c,[new(f.apply(We,[void 0,(h.Logins=p,h)]))])];case 4:return t=l.sent().Credentials,n=void 0===t?function(){throw new Je("Response from Amazon Cognito contained no credentials")}():t,r=n.AccessKeyId,i=void 0===r?function(){throw new Je("Response from Amazon Cognito contained no access key ID")}():r,o=n.Expiration,s=n.SecretKey,a=void 0===s?function(){throw new Je("Response from Amazon Cognito contained no secret key")}():s,u=n.SessionToken,[2,{identityId:e.identityId,accessKeyId:i,secretAccessKey:a,sessionToken:u,expiration:o}]}}))}))}}var Qe=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return f(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(Ge.a)(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CognitoIdentityClient",commandName:"GetIdCommand",inputFilterSensitiveLog:R.filterSensitiveLog,outputFilterSensitiveLog:U.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return me(void 0,void 0,void 0,(function(){var n,r;return ye(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.GetId"},r=JSON.stringify(function(e,t){return ge(ge(ge({},void 0!==e.AccountId&&null!==e.AccountId&&{AccountId:e.AccountId}),void 0!==e.IdentityPoolId&&null!==e.IdentityPoolId&&{IdentityPoolId:e.IdentityPoolId}),void 0!==e.Logins&&null!==e.Logins&&{Logins:ke(e.Logins,t)})}(e,t)),[2,$e(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return me(void 0,void 0,void 0,(function(){var n,r,i;return ye(this,(function(o){switch(o.label){case 0:return e.statusCode>=300?[2,_e(e,t)]:[4,Ke(e.body,t)];case 1:return n=o.sent(),r=function(e,t){return{IdentityId:void 0!==e.IdentityId&&null!==e.IdentityId?e.IdentityId:void 0}}(n),i=ge({$metadata:qe(e)},r),[2,Promise.resolve(i)]}}))}))}(e,t)},t}(He.b),Xe=function(){function e(e){void 0===e&&(e="aws:cognito-identity-ids"),this.dbName=e}return e.prototype.getItem=function(e){return this.withObjectStore("readonly",(function(t){var n=t.get(e);return new Promise((function(e){n.onerror=function(){return e(null)},n.onsuccess=function(){return e(n.result?n.result.value:null)}}))})).catch((function(){return null}))},e.prototype.removeItem=function(e){return this.withObjectStore("readwrite",(function(t){var n=t.delete(e);return new Promise((function(e,t){n.onerror=function(){return t(n.error)},n.onsuccess=function(){return e()}}))}))},e.prototype.setItem=function(e,t){return this.withObjectStore("readwrite",(function(n){var r=n.put({id:e,value:t});return new Promise((function(e,t){r.onerror=function(){return t(r.error)},r.onsuccess=function(){return e()}}))}))},e.prototype.getDb=function(){var e=self.indexedDB.open(this.dbName,1);return new Promise((function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)},e.onblocked=function(){n(new Error("Unable to access DB"))},e.onupgradeneeded=function(){var t=e.result;t.onerror=function(){n(new Error("Failed to create object store"))},t.createObjectStore("IdentityIds",{keyPath:"id"})}}))},e.prototype.withObjectStore=function(e,t){return this.getDb().then((function(n){var r=n.transaction("IdentityIds",e);return r.oncomplete=function(){return n.close()},new Promise((function(e,n){r.onerror=function(){return n(r.error)},e(t(r.objectStore("IdentityIds")))})).catch((function(e){throw n.close(),e}))}))},e}(),et=new(function(){function e(e){void 0===e&&(e={}),this.store=e}return e.prototype.getItem=function(e){return e in this.store?this.store[e]:null},e.prototype.removeItem=function(e){delete this.store[e]},e.prototype.setItem=function(e,t){this.store[e]=t},e}());function tt(e){var t=this,n=e.accountId,r=e.cache,i=void 0===r?"object"==typeof self&&self.indexedDB?new Xe:"object"==typeof window&&window.localStorage?window.localStorage:et:r,o=e.client,s=e.customRoleArn,a=e.identityPoolId,u=e.logins,c=e.userIdentifier,d=void 0===c?u&&0!==Object.keys(u).length?void 0:"ANONYMOUS":c,f=d?"aws:cognito-identity-credentials:"+a+":"+d:void 0,p=function(){return Object(l.__awaiter)(t,void 0,void 0,(function(){var e,t,r,c,d,h,v,g,m;return Object(l.__generator)(this,(function(l){switch(l.label){case 0:return(t=f)?[4,i.getItem(f)]:[3,2];case 1:t=l.sent(),l.label=2;case 2:return(e=t)?[3,7]:(h=(d=o).send,v=Qe.bind,m={AccountId:n,IdentityPoolId:a},u?[4,Ye(u)]:[3,4]);case 3:return g=l.sent(),[3,5];case 4:g=void 0,l.label=5;case 5:return[4,h.apply(d,[new(v.apply(Qe,[void 0,(m.Logins=g,m)]))])];case 6:r=l.sent().IdentityId,c=void 0===r?function(){throw new Je("Response from Amazon Cognito contained no identity ID")}():r,e=c,f&&Promise.resolve(i.setItem(f,e)).catch((function(){})),l.label=7;case 7:return[2,(p=Ze({client:o,customRoleArn:s,logins:u,identityId:e}))()]}}))}))};return function(){return p().catch((function(e){return Object(l.__awaiter)(t,void 0,void 0,(function(){return Object(l.__generator)(this,(function(t){throw f&&Promise.resolve(i.removeItem(f)).catch((function(){})),e}))}))}))}}var nt=function(e,t){return(nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function rt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}nt(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var it=function(){return(it=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function ot(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function st(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}Object.create,Object.create;var at,ut,ct,lt,dt,ft,pt,ht,vt,gt,mt,yt,bt,wt,_t,St,Et,Ct,At,Ot,It,Tt,xt,Pt,kt,Dt,Nt,Lt,Mt,jt,Rt,Ut,Bt,Ft,zt,qt,$t,Kt,Vt,Gt,Ht,Wt,Jt,Yt,Zt,Qt,Xt,en,tn,nn,rn,on,sn,an,un,cn,ln,dn=n(176),fn=n(42),pn=n(22),hn=n(45),vn=n(14),gn=n(18),mn=n(43),yn=n(44),bn=n(16),wn="cognito-identity.{region}.amazonaws.com",_n=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),Sn=new Set(["cn-north-1","cn-northwest-1"]),En=new Set(["us-iso-east-1"]),Cn=new Set(["us-isob-east-1"]),An=new Set(["us-gov-east-1","us-gov-west-1"]),On={apiVersion:"2014-06-30",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,t){var n=void 0;switch(e){case"ap-northeast-1":n={hostname:"cognito-identity.ap-northeast-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-2":n={hostname:"cognito-identity.ap-northeast-2.amazonaws.com",partition:"aws"};break;case"ap-south-1":n={hostname:"cognito-identity.ap-south-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-1":n={hostname:"cognito-identity.ap-southeast-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-2":n={hostname:"cognito-identity.ap-southeast-2.amazonaws.com",partition:"aws"};break;case"ca-central-1":n={hostname:"cognito-identity.ca-central-1.amazonaws.com",partition:"aws"};break;case"cn-north-1":n={hostname:"cognito-identity.cn-north-1.amazonaws.com.cn",partition:"aws-cn"};break;case"eu-central-1":n={hostname:"cognito-identity.eu-central-1.amazonaws.com",partition:"aws"};break;case"eu-north-1":n={hostname:"cognito-identity.eu-north-1.amazonaws.com",partition:"aws"};break;case"eu-west-1":n={hostname:"cognito-identity.eu-west-1.amazonaws.com",partition:"aws"};break;case"eu-west-2":n={hostname:"cognito-identity.eu-west-2.amazonaws.com",partition:"aws"};break;case"eu-west-3":n={hostname:"cognito-identity.eu-west-3.amazonaws.com",partition:"aws"};break;case"fips-us-east-1":n={hostname:"cognito-identity-fips.us-east-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"fips-us-east-2":n={hostname:"cognito-identity-fips.us-east-2.amazonaws.com",partition:"aws",signingRegion:"us-east-2"};break;case"fips-us-gov-west-1":n={hostname:"cognito-identity-fips.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"fips-us-west-2":n={hostname:"cognito-identity-fips.us-west-2.amazonaws.com",partition:"aws",signingRegion:"us-west-2"};break;case"sa-east-1":n={hostname:"cognito-identity.sa-east-1.amazonaws.com",partition:"aws"};break;case"us-east-1":n={hostname:"cognito-identity.us-east-1.amazonaws.com",partition:"aws"};break;case"us-east-2":n={hostname:"cognito-identity.us-east-2.amazonaws.com",partition:"aws"};break;case"us-gov-west-1":n={hostname:"cognito-identity.us-gov-west-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-west-1":n={hostname:"cognito-identity.us-west-1.amazonaws.com",partition:"aws"};break;case"us-west-2":n={hostname:"cognito-identity.us-west-2.amazonaws.com",partition:"aws"};break;default:_n.has(e)&&(n={hostname:wn.replace("{region}",e),partition:"aws"}),Sn.has(e)&&(n={hostname:"cognito-identity.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),En.has(e)&&(n={hostname:"cognito-identity.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),Cn.has(e)&&(n={hostname:"cognito-identity.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),An.has(e)&&(n={hostname:"cognito-identity.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}),void 0===n&&(n={hostname:wn.replace("{region}",e),partition:"aws"})}return Promise.resolve(it({signingService:"cognito-identity"},n))},serviceId:"Cognito Identity",urlParser:n(47).a},In=it(it({},On),{runtime:"browser",base64Decoder:gn.a,base64Encoder:gn.b,bodyLengthChecker:mn.a,credentialDefaultProvider:function(e){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:Object(yn.a)({serviceId:On.serviceId,clientVersion:dn.version}),maxAttempts:vn.a,region:Object(hn.a)("Region is missing"),requestHandler:new pn.a,sha256:fn.Sha256,streamCollector:pn.b,utf8Decoder:bn.a,utf8Encoder:bn.b}),Tn=n(24),xn=n(41),Pn=n(21),kn=n(46),Dn=n(27),Nn=n(23),Ln=function(e){function t(t){var n=this,r=it(it({},In),t),i=Object(Tn.b)(r),o=Object(Tn.a)(i),s=Object(Dn.b)(o),a=Object(vn.c)(s),u=Object(Pn.b)(a),c=Object(Nn.b)(u);return(n=e.call(this,c)||this).config=c,n.middlewareStack.use(Object(vn.b)(n.config)),n.middlewareStack.use(Object(xn.a)(n.config)),n.middlewareStack.use(Object(Pn.a)(n.config)),n.middlewareStack.use(Object(kn.a)(n.config)),n.middlewareStack.use(Object(Nn.a)(n.config)),n}return rt(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(He.a);!function(e){e.AUTHENTICATED_ROLE="AuthenticatedRole",e.DENY="Deny"}(at||(at={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(ut||(ut={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(ct||(ct={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(lt||(lt={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(dt||(dt={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(ft||(ft={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(pt||(pt={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(ht||(ht={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(vt||(vt={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(gt||(gt={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(mt||(mt={})),function(e){e.ACCESS_DENIED="AccessDenied",e.INTERNAL_SERVER_ERROR="InternalServerError"}(yt||(yt={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(bt||(bt={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(wt||(wt={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(_t||(_t={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(St||(St={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(Et||(Et={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(Ct||(Ct={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(At||(At={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(Ot||(Ot={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(It||(It={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(Tt||(Tt={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(xt||(xt={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(Pt||(Pt={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(kt||(kt={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(Dt||(Dt={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(Nt||(Nt={})),function(e){e.CONTAINS="Contains",e.EQUALS="Equals",e.NOT_EQUAL="NotEqual",e.STARTS_WITH="StartsWith"}(Lt||(Lt={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(Mt||(Mt={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(jt||(jt={})),function(e){e.RULES="Rules",e.TOKEN="Token"}(Rt||(Rt={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(Ut||(Ut={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(Bt||(Bt={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(Ft||(Ft={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(zt||(zt={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(qt||(qt={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}($t||($t={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(Kt||(Kt={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(Vt||(Vt={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(Gt||(Gt={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(Ht||(Ht={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(Wt||(Wt={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(Jt||(Jt={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(Yt||(Yt={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(Zt||(Zt={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(Qt||(Qt={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(Xt||(Xt={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(en||(en={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(tn||(tn={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(nn||(nn={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(rn||(rn={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(on||(on={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(sn||(sn={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(an||(an={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(un||(un={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(cn||(cn={})),function(e){e.filterSensitiveLog=function(e){return it({},e)}}(ln||(ln={}));var Mn=function(e,t){return ot(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,d,f,p,h,v,g;return st(this,(function(m){switch(m.label){case 0:return r=[it({},e)],g={},[4,or(e.body,t)];case 1:switch(n=it.apply(void 0,r.concat([(g.body=m.sent(),g)])),o="UnknownError",o=sr(e,n.body)){case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":return[3,2];case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,4];case"InvalidIdentityPoolConfigurationException":case"com.amazonaws.cognitoidentity#InvalidIdentityPoolConfigurationException":return[3,6];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,8];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,10];case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":return[3,12];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,14];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,16]}return[3,18];case 2:return s=[{}],[4,Rn(n,t)];case 3:return i=it.apply(void 0,[it.apply(void 0,s.concat([m.sent()])),{name:o,$metadata:rr(e)}]),[3,19];case 4:return a=[{}],[4,Un(n,t)];case 5:return i=it.apply(void 0,[it.apply(void 0,a.concat([m.sent()])),{name:o,$metadata:rr(e)}]),[3,19];case 6:return u=[{}],[4,Bn(n,t)];case 7:return i=it.apply(void 0,[it.apply(void 0,u.concat([m.sent()])),{name:o,$metadata:rr(e)}]),[3,19];case 8:return c=[{}],[4,Fn(n,t)];case 9:return i=it.apply(void 0,[it.apply(void 0,c.concat([m.sent()])),{name:o,$metadata:rr(e)}]),[3,19];case 10:return l=[{}],[4,qn(n,t)];case 11:return i=it.apply(void 0,[it.apply(void 0,l.concat([m.sent()])),{name:o,$metadata:rr(e)}]),[3,19];case 12:return d=[{}],[4,$n(n,t)];case 13:return i=it.apply(void 0,[it.apply(void 0,d.concat([m.sent()])),{name:o,$metadata:rr(e)}]),[3,19];case 14:return f=[{}],[4,Kn(n,t)];case 15:return i=it.apply(void 0,[it.apply(void 0,f.concat([m.sent()])),{name:o,$metadata:rr(e)}]),[3,19];case 16:return p=[{}],[4,Vn(n,t)];case 17:return i=it.apply(void 0,[it.apply(void 0,p.concat([m.sent()])),{name:o,$metadata:rr(e)}]),[3,19];case 18:h=n.body,o=h.code||h.Code||o,i=it(it({},h),{name:""+o,message:h.message||h.Message||o,$fault:"client",$metadata:rr(e)}),m.label=19;case 19:return v=i.message||i.Message||o,i.message=v,delete i.Message,[2,Promise.reject(Object.assign(new Error(v),i))]}}))}))},jn=function(e,t){return ot(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,d,f,p,h,v,g;return st(this,(function(m){switch(m.label){case 0:return r=[it({},e)],g={},[4,or(e.body,t)];case 1:switch(n=it.apply(void 0,r.concat([(g.body=m.sent(),g)])),o="UnknownError",o=sr(e,n.body)){case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":return[3,2];case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,4];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,6];case"LimitExceededException":case"com.amazonaws.cognitoidentity#LimitExceededException":return[3,8];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,10];case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":return[3,12];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,14];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,16]}return[3,18];case 2:return s=[{}],[4,Rn(n,t)];case 3:return i=it.apply(void 0,[it.apply(void 0,s.concat([m.sent()])),{name:o,$metadata:rr(e)}]),[3,19];case 4:return a=[{}],[4,Un(n,t)];case 5:return i=it.apply(void 0,[it.apply(void 0,a.concat([m.sent()])),{name:o,$metadata:rr(e)}]),[3,19];case 6:return u=[{}],[4,Fn(n,t)];case 7:return i=it.apply(void 0,[it.apply(void 0,u.concat([m.sent()])),{name:o,$metadata:rr(e)}]),[3,19];case 8:return c=[{}],[4,zn(n,t)];case 9:return i=it.apply(void 0,[it.apply(void 0,c.concat([m.sent()])),{name:o,$metadata:rr(e)}]),[3,19];case 10:return l=[{}],[4,qn(n,t)];case 11:return i=it.apply(void 0,[it.apply(void 0,l.concat([m.sent()])),{name:o,$metadata:rr(e)}]),[3,19];case 12:return d=[{}],[4,$n(n,t)];case 13:return i=it.apply(void 0,[it.apply(void 0,d.concat([m.sent()])),{name:o,$metadata:rr(e)}]),[3,19];case 14:return f=[{}],[4,Kn(n,t)];case 15:return i=it.apply(void 0,[it.apply(void 0,f.concat([m.sent()])),{name:o,$metadata:rr(e)}]),[3,19];case 16:return p=[{}],[4,Vn(n,t)];case 17:return i=it.apply(void 0,[it.apply(void 0,p.concat([m.sent()])),{name:o,$metadata:rr(e)}]),[3,19];case 18:h=n.body,o=h.code||h.Code||o,i=it(it({},h),{name:""+o,message:h.message||h.Message||o,$fault:"client",$metadata:rr(e)}),m.label=19;case 19:return v=i.message||i.Message||o,i.message=v,delete i.Message,[2,Promise.reject(Object.assign(new Error(v),i))]}}))}))},Rn=function(e,t){return ot(void 0,void 0,void 0,(function(){var n,r;return st(this,(function(i){return n=e.body,r=Wn(n,t),[2,it({name:"ExternalServiceException",$fault:"client",$metadata:rr(e)},r)]}))}))},Un=function(e,t){return ot(void 0,void 0,void 0,(function(){var n,r;return st(this,(function(i){return n=e.body,r=Jn(n,t),[2,it({name:"InternalErrorException",$fault:"server",$metadata:rr(e)},r)]}))}))},Bn=function(e,t){return ot(void 0,void 0,void 0,(function(){var n,r;return st(this,(function(i){return n=e.body,r=Yn(n,t),[2,it({name:"InvalidIdentityPoolConfigurationException",$fault:"client",$metadata:rr(e)},r)]}))}))},Fn=function(e,t){return ot(void 0,void 0,void 0,(function(){var n,r;return st(this,(function(i){return n=e.body,r=Zn(n,t),[2,it({name:"InvalidParameterException",$fault:"client",$metadata:rr(e)},r)]}))}))},zn=function(e,t){return ot(void 0,void 0,void 0,(function(){var n,r;return st(this,(function(i){return n=e.body,r=Qn(n,t),[2,it({name:"LimitExceededException",$fault:"client",$metadata:rr(e)},r)]}))}))},qn=function(e,t){return ot(void 0,void 0,void 0,(function(){var n,r;return st(this,(function(i){return n=e.body,r=Xn(n,t),[2,it({name:"NotAuthorizedException",$fault:"client",$metadata:rr(e)},r)]}))}))},$n=function(e,t){return ot(void 0,void 0,void 0,(function(){var n,r;return st(this,(function(i){return n=e.body,r=er(n,t),[2,it({name:"ResourceConflictException",$fault:"client",$metadata:rr(e)},r)]}))}))},Kn=function(e,t){return ot(void 0,void 0,void 0,(function(){var n,r;return st(this,(function(i){return n=e.body,r=tr(n,t),[2,it({name:"ResourceNotFoundException",$fault:"client",$metadata:rr(e)},r)]}))}))},Vn=function(e,t){return ot(void 0,void 0,void 0,(function(){var n,r;return st(this,(function(i){return n=e.body,r=nr(n,t),[2,it({name:"TooManyRequestsException",$fault:"client",$metadata:rr(e)},r)]}))}))},Gn=function(e,t){return Object.entries(e).reduce((function(e,t){var n,r=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}(t,2),i=r[0],o=r[1];return null===o?e:it(it({},e),((n={})[i]=o,n))}),{})},Hn=function(e,t){return{AccessKeyId:void 0!==e.AccessKeyId&&null!==e.AccessKeyId?e.AccessKeyId:void 0,Expiration:void 0!==e.Expiration&&null!==e.Expiration?new Date(Math.round(1e3*e.Expiration)):void 0,SecretKey:void 0!==e.SecretKey&&null!==e.SecretKey?e.SecretKey:void 0,SessionToken:void 0!==e.SessionToken&&null!==e.SessionToken?e.SessionToken:void 0}},Wn=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Jn=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Yn=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Zn=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Qn=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Xn=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},er=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},tr=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},nr=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},rr=function(e){var t;return{httpStatusCode:e.statusCode,requestId:null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},ir=function(e,t,n,r,i){return ot(void 0,void 0,void 0,(function(){var o,s,a,u,c,l;return st(this,(function(d){switch(d.label){case 0:return[4,e.endpoint()];case 1:return o=d.sent(),s=o.hostname,a=o.protocol,u=void 0===a?"https":a,c=o.port,l={protocol:u,hostname:s,port:c,method:"POST",path:n,headers:t},void 0!==r&&(l.hostname=r),void 0!==i&&(l.body=i),[2,new be.a(l)]}}))}))},or=function(e,t){return function(e,t){return function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)}(e,t).then((function(e){return t.utf8Encoder(e)}))}(e,t).then((function(e){return e.length?JSON.parse(e):{}}))},sr=function(e,t){var n,r=function(e){var t=e;return t.indexOf(":")>=0&&(t=t.split(":")[0]),t.indexOf("#")>=0&&(t=t.split("#")[1]),t},i=(n=e.headers,"x-amzn-errortype",Object.keys(n).find((function(e){return e.toLowerCase()==="x-amzn-errortype".toLowerCase()})));return void 0!==i?r(e.headers[i]):void 0!==t.code?r(t.code):void 0!==t.__type?r(t.__type):""},ar=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return rt(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(Ge.a)(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CognitoIdentityClient",commandName:"GetIdCommand",inputFilterSensitiveLog:kt.filterSensitiveLog,outputFilterSensitiveLog:Dt.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return ot(void 0,void 0,void 0,(function(){var n,r;return st(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.GetId"},r=JSON.stringify(function(e,t){return it(it(it({},void 0!==e.AccountId&&null!==e.AccountId&&{AccountId:e.AccountId}),void 0!==e.IdentityPoolId&&null!==e.IdentityPoolId&&{IdentityPoolId:e.IdentityPoolId}),void 0!==e.Logins&&null!==e.Logins&&{Logins:Gn(e.Logins,t)})}(e,t)),[2,ir(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return ot(void 0,void 0,void 0,(function(){var n,r,i;return st(this,(function(o){switch(o.label){case 0:return e.statusCode>=300?[2,jn(e,t)]:[4,or(e.body,t)];case 1:return n=o.sent(),r=function(e,t){return{IdentityId:void 0!==e.IdentityId&&null!==e.IdentityId?e.IdentityId:void 0}}(n),i=it({$metadata:rr(e)},r),[2,Promise.resolve(i)]}}))}))}(e,t)},t}(He.b),ur=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return rt(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(Ge.a)(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CognitoIdentityClient",commandName:"GetCredentialsForIdentityCommand",inputFilterSensitiveLog:It.filterSensitiveLog,outputFilterSensitiveLog:xt.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return ot(void 0,void 0,void 0,(function(){var n,r;return st(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.GetCredentialsForIdentity"},r=JSON.stringify(function(e,t){return it(it(it({},void 0!==e.CustomRoleArn&&null!==e.CustomRoleArn&&{CustomRoleArn:e.CustomRoleArn}),void 0!==e.IdentityId&&null!==e.IdentityId&&{IdentityId:e.IdentityId}),void 0!==e.Logins&&null!==e.Logins&&{Logins:Gn(e.Logins,t)})}(e,t)),[2,ir(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return ot(void 0,void 0,void 0,(function(){var n,r,i;return st(this,(function(o){switch(o.label){case 0:return e.statusCode>=300?[2,Mn(e,t)]:[4,or(e.body,t)];case 1:return n=o.sent(),r=function(e,t){return{Credentials:void 0!==e.Credentials&&null!==e.Credentials?Hn(e.Credentials):void 0,IdentityId:void 0!==e.IdentityId&&null!==e.IdentityId?e.IdentityId:void 0}}(n),i=it({$metadata:rr(e)},r),[2,Promise.resolve(i)]}}))}))}(e,t)},t}(He.b),cr=function(){return(cr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},lr=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},dr=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},fr=new r.a("Credentials"),pr=new(function(){function e(e){this._gettingCredPromise=null,this._refreshHandlers={},this.Auth=void 0,this.configure(e),this._refreshHandlers.google=s.b.refreshGoogleToken,this._refreshHandlers.facebook=s.a.refreshFacebookToken}return e.prototype.getModuleName=function(){return"Credentials"},e.prototype.getCredSource=function(){return this._credentials_source},e.prototype.configure=function(e){if(!e)return this._config||{};this._config=Object.assign({},this._config,e);var t=this._config.refreshHandlers;return t&&(this._refreshHandlers=cr(cr({},this._refreshHandlers),t)),this._storage=this._config.storage,this._storage||(this._storage=(new i.a).getStorage()),this._storageSync=Promise.resolve(),"function"==typeof this._storage.sync&&(this._storageSync=this._storage.sync()),this._config},e.prototype.get=function(){return fr.debug("getting credentials"),this._pickupCredentials()},e.prototype._getCognitoIdentityIdStorageKey=function(e){return"CognitoIdentityId-"+e},e.prototype._pickupCredentials=function(){return fr.debug("picking up credentials"),this._gettingCredPromise&&this._gettingCredPromise.isPending()?fr.debug("getting old cred promise"):(fr.debug("getting new cred promise"),this._gettingCredPromise=Object(o.d)(this._keepAlive())),this._gettingCredPromise},e.prototype._keepAlive=function(){return lr(this,void 0,void 0,(function(){var e,t,n,r,i,o,s;return dr(this,(function(a){switch(a.label){case 0:if(fr.debug("checking if credentials exists and not expired"),(e=this._credentials)&&!this._isExpired(e)&&!this._isPastTTL())return fr.debug("credentials not changed and not expired, directly return"),[2,Promise.resolve(e)];if(fr.debug("need to get a new credential or refresh the existing one"),t=this.Auth,!(n=void 0===t?c.a.Auth:t)||"function"!=typeof n.currentUserCredentials)return[2,Promise.reject("No Auth module registered in Amplify")];if(this._isExpired(e)||!this._isPastTTL())return[3,6];fr.debug("ttl has passed but token is not yet expired"),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,n.currentUserPoolUser()];case 2:return r=a.sent(),[4,n.currentSession()];case 3:return i=a.sent(),o=i.refreshToken,[4,new Promise((function(e,t){r.refreshSession(o,(function(n,r){return n?t(n):e(r)}))}))];case 4:return a.sent(),[3,6];case 5:return s=a.sent(),fr.debug("Error attempting to refreshing the session",s),[3,6];case 6:return[2,n.currentUserCredentials()]}}))}))},e.prototype.refreshFederatedToken=function(e){fr.debug("Getting federated credentials");var t=e.provider,n=e.user,r=e.token,i=e.identity_id,o=e.expires_at;return o=1970===new Date(o).getFullYear()?1e3*o:o,fr.debug("checking if federated jwt token expired"),o>(new Date).getTime()?(fr.debug("token not expired"),this._setCredentialsFromFederation({provider:t,token:r,user:n,identity_id:i,expires_at:o})):this._refreshHandlers[t]&&"function"==typeof this._refreshHandlers[t]?(fr.debug("getting refreshed jwt token from federation provider"),this._providerRefreshWithRetry({refreshHandler:this._refreshHandlers[t],provider:t,user:n})):(fr.debug("no refresh handler for provider:",t),this.clear(),Promise.reject("no refresh handler for provider"))},e.prototype._providerRefreshWithRetry=function(e){var t=this,n=e.refreshHandler,r=e.provider,i=e.user;return Object(a.c)(n,[],1e4).then((function(e){return fr.debug("refresh federated token sucessfully",e),t._setCredentialsFromFederation({provider:r,token:e.token,user:i,identity_id:e.identity_id,expires_at:e.expires_at})})).catch((function(e){return"string"==typeof e&&0===e.toLowerCase().lastIndexOf("network error",e.length)||t.clear(),fr.debug("refresh federated token failed",e),Promise.reject("refreshing federation token failed: "+e)}))},e.prototype._isExpired=function(e){if(!e)return fr.debug("no credentials for expiration check"),!0;fr.debug("are these credentials expired?",e);var t=Date.now();return e.expiration.getTime()<=t},e.prototype._isPastTTL=function(){return this._nextCredentialsRefresh<=Date.now()},e.prototype._setCredentialsForGuest=function(){return lr(this,void 0,void 0,(function(){var e,t,n,r,i,o,s,a=this;return dr(this,(function(c){switch(c.label){case 0:return fr.debug("setting credentials for guest"),e=this._config,t=e.identityPoolId,n=e.region,e.mandatorySignIn?[2,Promise.reject("cannot get guest credentials when mandatory signin enabled")]:t?n?(i=this,[4,this._getGuestIdentityId()]):(fr.debug("region is not configured for getting the credentials"),[2,Promise.reject("region is not configured for getting the credentials")]):(fr.debug("No Cognito Identity pool provided for unauthenticated access"),[2,Promise.reject("No Cognito Identity pool provided for unauthenticated access")]);case 1:return r=i._identityId=c.sent(),o=new Ln({region:n,customUserAgent:Object(u.b)()}),s=void 0,s=r?Ze({identityId:r,client:o})():lr(a,void 0,void 0,(function(){var e;return dr(this,(function(n){switch(n.label){case 0:return[4,o.send(new ar({IdentityPoolId:t}))];case 1:return e=n.sent().IdentityId,this._identityId=e,[2,Ze({client:o,identityId:e})()]}}))})).catch((function(e){return lr(a,void 0,void 0,(function(){return dr(this,(function(t){throw e}))}))})),[2,this._loadCredentials(s,"guest",!1,null).then((function(e){return e})).catch((function(e){return lr(a,void 0,void 0,(function(){var n=this;return dr(this,(function(i){switch(i.label){case 0:return"ResourceNotFoundException"!==e.name||e.message!=="Identity '"+r+"' not found."?[3,2]:(fr.debug("Failed to load guest credentials"),[4,this._removeGuestIdentityId()]);case 1:return i.sent(),s=lr(n,void 0,void 0,(function(){var e;return dr(this,(function(n){switch(n.label){case 0:return[4,o.send(new ar({IdentityPoolId:t}))];case 1:return e=n.sent().IdentityId,this._identityId=e,[2,Ze({client:o,identityId:e})()]}}))})).catch((function(e){return lr(n,void 0,void 0,(function(){return dr(this,(function(t){throw e}))}))})),[2,this._loadCredentials(s,"guest",!1,null)];case 2:return[2,e]}}))}))}))]}}))}))},e.prototype._setCredentialsFromFederation=function(e){var t=e.provider,n=e.token,r=e.identity_id,i={google:"accounts.google.com",facebook:"graph.facebook.com",amazon:"www.amazon.com",developer:"cognito-identity.amazonaws.com"}[t]||t;if(!i)return Promise.reject("You must specify a federated provider");var o={};o[i]=n;var s=this._config,a=s.identityPoolId,c=s.region;if(!a)return fr.debug("No Cognito Federated Identity pool provided"),Promise.reject("No Cognito Federated Identity pool provided");if(!c)return fr.debug("region is not configured for getting the credentials"),Promise.reject("region is not configured for getting the credentials");var l,d=new Ln({region:c,customUserAgent:Object(u.b)()});return l=r?Ze({identityId:r,logins:o,client:d})():tt({logins:o,identityPoolId:a,client:d})(),this._loadCredentials(l,"federated",!0,e)},e.prototype._setCredentialsFromSession=function(e){var t=this;fr.debug("set credentials from session");var n=e.getIdToken().getJwtToken(),r=this._config,i=r.region,o=r.userPoolId,s=r.identityPoolId;if(!s)return fr.debug("No Cognito Federated Identity pool provided"),Promise.reject("No Cognito Federated Identity pool provided");if(!i)return fr.debug("region is not configured for getting the credentials"),Promise.reject("region is not configured for getting the credentials");var a={};a["cognito-idp."+i+".amazonaws.com/"+o]=n;var c=new Ln({region:i,customUserAgent:Object(u.b)()}),l=lr(t,void 0,void 0,(function(){var e,t,n,r,i,o,u,l,d,f;return dr(this,(function(p){switch(p.label){case 0:return[4,this._getGuestIdentityId()];case 1:return(e=p.sent())?[3,3]:[4,c.send(new ar({IdentityPoolId:s,Logins:a}))];case 2:n=p.sent().IdentityId,t=n,p.label=3;case 3:return[4,c.send(new ur({IdentityId:e||t,Logins:a}))];case 4:return r=p.sent(),i=r.Credentials,o=i.AccessKeyId,u=i.Expiration,l=i.SecretKey,d=i.SessionToken,f=r.IdentityId,this._identityId=f,e?(fr.debug("The guest identity "+e+" has been successfully linked to the logins"),e===f&&fr.debug("The guest identity "+e+" has become the primary identity"),[4,this._removeGuestIdentityId()]):[3,6];case 5:p.sent(),p.label=6;case 6:return[2,{accessKeyId:o,secretAccessKey:l,sessionToken:d,expiration:u,identityId:f}]}}))})).catch((function(e){return lr(t,void 0,void 0,(function(){return dr(this,(function(t){throw e}))}))}));return this._loadCredentials(l,"userPool",!0,null)},e.prototype._loadCredentials=function(e,t,n,r){var i=this,o=this;return new Promise((function(s,a){e.then((function(e){return lr(i,void 0,void 0,(function(){var i,a,u,c,l;return dr(this,(function(d){switch(d.label){case 0:if(fr.debug("Load credentials successfully",e),this._identityId&&!e.identityId&&(e.identityId=this._identityId),o._credentials=e,o._credentials.authenticated=n,o._credentials_source=t,o._nextCredentialsRefresh=(new Date).getTime()+3e6,"federated"===t){i=Object.assign({id:this._credentials.identityId},r.user),a=r.provider,u=r.token,c=r.expires_at,l=r.identity_id;try{this._storage.setItem("aws-amplify-federatedInfo",JSON.stringify({provider:a,token:u,user:i,expires_at:c,identity_id:l}))}catch(e){fr.debug("Failed to put federated info into auth storage",e)}}return"guest"!==t?[3,2]:[4,this._setGuestIdentityId(e.identityId)];case 1:d.sent(),d.label=2;case 2:return s(o._credentials),[2]}}))}))})).catch((function(t){if(t)return fr.debug("Failed to load credentials",e),fr.debug("Error loading credentials",t),void a(t)}))}))},e.prototype.set=function(e,t){return"session"===t?this._setCredentialsFromSession(e):"federation"===t?this._setCredentialsFromFederation(e):"guest"===t?this._setCredentialsForGuest():(fr.debug("no source specified for setting credentials"),Promise.reject("invalid source"))},e.prototype.clear=function(){return lr(this,void 0,void 0,(function(){return dr(this,(function(e){return this._credentials=null,this._credentials_source=null,fr.debug("removing aws-amplify-federatedInfo from storage"),this._storage.removeItem("aws-amplify-federatedInfo"),[2]}))}))},e.prototype._getGuestIdentityId=function(){return lr(this,void 0,void 0,(function(){var e,t;return dr(this,(function(n){switch(n.label){case 0:e=this._config.identityPoolId,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this._storageSync];case 2:return n.sent(),[2,this._storage.getItem(this._getCognitoIdentityIdStorageKey(e))];case 3:return t=n.sent(),fr.debug("Failed to get the cached guest identityId",t),[3,4];case 4:return[2]}}))}))},e.prototype._setGuestIdentityId=function(e){return lr(this,void 0,void 0,(function(){var t,n;return dr(this,(function(r){switch(r.label){case 0:t=this._config.identityPoolId,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this._storageSync];case 2:return r.sent(),this._storage.setItem(this._getCognitoIdentityIdStorageKey(t),e),[3,4];case 3:return n=r.sent(),fr.debug("Failed to cache guest identityId",n),[3,4];case 4:return[2]}}))}))},e.prototype._removeGuestIdentityId=function(){return lr(this,void 0,void 0,(function(){var e;return dr(this,(function(t){return e=this._config.identityPoolId,fr.debug("removing "+this._getCognitoIdentityIdStorageKey(e)+" from storage"),this._storage.removeItem(this._getCognitoIdentityIdStorageKey(e)),[2]}))}))},e.prototype.shear=function(e){return{accessKeyId:e.accessKeyId,sessionToken:e.sessionToken,secretAccessKey:e.secretAccessKey,identityId:e.identityId,authenticated:e.authenticated}},e}())(null);c.a.register(pr)},function(e,t,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,e.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}m(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&m(e,"error",t,{once:!0})}(e,i)}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var u=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function d(e,t,n,r){var i,o,s;if(c(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]),void 0===s)s=o[t]=n,++e._eventsCount;else if("function"==typeof s?s=o[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(i=l(e))>0&&s.length>i&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=s.length,a,console&&console.warn}return e}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=f.bind(r);return i.listener=n,r.wrapFn=i,i}function h(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):g(i,i.length)}function v(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function g(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function m(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){r.once&&e.removeEventListener(t,i),n(o)}))}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return l(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var u=i[e];if(void 0===u)return!1;if("function"==typeof u)o(u,this,t);else{var c=u.length,l=g(u,c);for(n=0;n<c;++n)o(l[n],this,t)}return!0},a.prototype.addListener=function(e,t){return d(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return d(this,e,t,!0)},a.prototype.once=function(e,t){return c(t),this.on(e,p(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,p(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,r,i,o,s;if(c(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},a.prototype.listeners=function(e){return h(this,e,!0)},a.prototype.rawListeners=function(e){return h(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):v.call(e,t)},a.prototype.listenerCount=v,a.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(e,t,n){var r=n(55).Symbol;e.exports=r},function(e,t,n){var r=n(63)(Object,"create");e.exports=r},function(e,t,n){var r=n(272),i=n(273),o=n(274),s=n(275),a=n(276);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=s,u.prototype.set=a,e.exports=u},function(e,t,n){var r=n(140);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},function(e,t,n){var r=n(278);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},function(e,t,n){"use strict";(function(t){var r=n(40),i=n(330),o=n(150),s={"Content-Type":"application/x-www-form-urlencoded"};function a(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var u,c={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==t&&"[object process]"===Object.prototype.toString.call(t))&&(u=n(151)),u),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(a(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)||t&&"application/json"===t["Content-Type"]?(a(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(0,JSON.parse)(e),r.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||c.transitional,n=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,s=!n&&"json"===this.responseType;if(s||i&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(s){if("SyntaxError"===e.name)throw o(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){c.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){c.headers[e]=r.merge(s)})),e.exports=c}).call(this,n(74))},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,n){"use strict";const r=n(56),i=n(56).buildOptions,o=n(343),s=n(344);"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,r.nameRegexp),!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const a={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!1,arrayMode:!1,trimValues:!0,cdataTagName:!1,cdataPositionChar:"\\c",numParseOptions:{hex:!0,leadingZeros:!0},tagValueProcessor:function(e,t){return e},attrValueProcessor:function(e,t){return e},stopNodes:[],alwaysCreateTextNode:!1};t.defaultOptions=a;const u=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","ignoreNameSpace","allowBooleanAttributes","parseNodeValue","parseAttributeValue","arrayMode","trimValues","cdataTagName","cdataPositionChar","tagValueProcessor","attrValueProcessor","parseTrueNumberOnly","numParseOptions","stopNodes","alwaysCreateTextNode"];function c(e,t,n){return t&&(n.trimValues&&(t=t.trim()),t=d(t=n.tagValueProcessor(t,e),n.parseNodeValue,n.numParseOptions)),t}function l(e,t){if(t.ignoreNameSpace){const t=e.split(":"),n="/"===e.charAt(0)?"/":"";if("xmlns"===t[0])return"";2===t.length&&(e=n+t[1])}return e}function d(e,t,n){if(t&&"string"==typeof e){const t=e.trim();return"true"===t||"false"!==t&&s(e,n)}return r.isExist(e)?e:""}t.props=u;const f=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])(.*?)\\3)?","g");function p(e,t){if(!t.ignoreAttributes&&"string"==typeof e){e=e.replace(/\r?\n/g," ");const n=r.getAllMatches(e,f),i=n.length,o={};for(let e=0;e<i;e++){const r=l(n[e][1],t);r.length&&(void 0!==n[e][4]?(t.trimValues&&(n[e][4]=n[e][4].trim()),n[e][4]=t.attrValueProcessor(n[e][4],r),o[t.attributeNamePrefix+r]=d(n[e][4],t.parseAttributeValue,t.numParseOptions)):t.allowBooleanAttributes&&(o[t.attributeNamePrefix+r]=!0))}if(!Object.keys(o).length)return;if(t.attrNodeName){const e={};return e[t.attrNodeName]=o,e}return o}}function h(e,t){let n,r="";for(let i=t;i<e.length;i++){let t=e[i];if(n)t===n&&(n="");else if('"'===t||"'"===t)n=t;else{if(">"===t)return{data:r,index:i};"\t"===t&&(t=" ")}r+=t}}function v(e,t,n,r){const i=e.indexOf(t,n);if(-1===i)throw new Error(r);return i+t.length-1}t.getTraversalObj=function(e,t){e=e.replace(/\r\n?/g,"\n"),t=i(t,a,u);const n=new o("!xml");let s=n,l="";for(let n=0;n<e.length;n++)if("<"===e[n])if("/"===e[n+1]){const i=v(e,">",n,"Closing Tag is not closed.");let o=e.substring(n+2,i).trim();if(t.ignoreNameSpace){const e=o.indexOf(":");-1!==e&&(o=o.substr(e+1))}s&&(s.val?s.val=r.getValue(s.val)+""+c(o,l,t):s.val=c(o,l,t)),t.stopNodes.length&&t.stopNodes.includes(s.tagname)&&(s.child=[],null==s.attrsMap&&(s.attrsMap={}),s.val=e.substr(s.startIndex+1,n-s.startIndex-1)),s=s.parent,l="",n=i}else if("?"===e[n+1])n=v(e,"?>",n,"Pi Tag is not closed.");else if("!--"===e.substr(n+1,3))n=v(e,"--\x3e",n,"Comment is not closed.");else if("!D"===e.substr(n+1,2)){const t=v(e,">",n,"DOCTYPE is not closed.");n=e.substring(n,t).indexOf("[")>=0?e.indexOf("]>",n)+1:t}else if("!["===e.substr(n+1,2)){const i=v(e,"]]>",n,"CDATA is not closed.")-2,a=e.substring(n+9,i);if(l&&(s.val=r.getValue(s.val)+""+c(s.tagname,l,t),l=""),t.cdataTagName){const e=new o(t.cdataTagName,s,a);s.addChild(e),s.val=r.getValue(s.val)+t.cdataPositionChar,a&&(e.val=a)}else s.val=(s.val||"")+(a||"");n=i+2}else{const i=h(e,n+1);let a=i.data;const u=i.index,d=a.indexOf(" ");let f=a,v=!0;if(-1!==d&&(f=a.substr(0,d).replace(/\s\s*$/,""),a=a.substr(d+1)),t.ignoreNameSpace){const e=f.indexOf(":");-1!==e&&(f=f.substr(e+1),v=f!==i.data.substr(e+1))}if(s&&l&&"!xml"!==s.tagname&&(s.val=r.getValue(s.val)+""+c(s.tagname,l,t)),a.length>0&&a.lastIndexOf("/")===a.length-1){"/"===f[f.length-1]?(f=f.substr(0,f.length-1),a=f):a=a.substr(0,a.length-1);const e=new o(f,s,"");f!==a&&(e.attrsMap=p(a,t)),s.addChild(e)}else{const e=new o(f,s);t.stopNodes.length&&t.stopNodes.includes(e.tagname)&&(e.startIndex=u),f!==a&&v&&(e.attrsMap=p(a,t)),s.addChild(e),s=e}l="",n=u}else l+=e[n];return n}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s}));var r="undefined"!=typeof Symbol&&"function"==typeof Symbol.for,i=r?Symbol.for("INTERNAL_AWS_APPSYNC_PUBSUB_PROVIDER"):"@@INTERNAL_AWS_APPSYNC_PUBSUB_PROVIDER",o=r?Symbol.for("INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER"):"@@INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER",s="x-amz-user-agent"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uint32ArrayFrom=t.numToUint8=t.isEmptyData=t.convertToBuffer=void 0;var r=n(357);Object.defineProperty(t,"convertToBuffer",{enumerable:!0,get:function(){return r.convertToBuffer}});var i=n(358);Object.defineProperty(t,"isEmptyData",{enumerable:!0,get:function(){return i.isEmptyData}});var o=n(359);Object.defineProperty(t,"numToUint8",{enumerable:!0,get:function(){return o.numToUint8}});var s=n(360);Object.defineProperty(t,"uint32ArrayFrom",{enumerable:!0,get:function(){return s.uint32ArrayFrom}})},function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return a}));var r=n(48),i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},o=new r.a("Parser"),s=function(e){var t,n={};if(e.aws_mobile_analytics_app_id){var r={AWSPinpoint:{appId:e.aws_mobile_analytics_app_id,region:e.aws_mobile_analytics_app_region}};n.Analytics=r}return(e.aws_cognito_identity_pool_id||e.aws_user_pools_id)&&(n.Auth={userPoolId:e.aws_user_pools_id,userPoolWebClientId:e.aws_user_pools_web_client_id,region:e.aws_cognito_region,identityPoolId:e.aws_cognito_identity_pool_id,identityPoolRegion:e.aws_cognito_region,mandatorySignIn:"enable"===e.aws_mandatory_sign_in,signUpVerificationMethod:e.aws_cognito_sign_up_verification_method||"code"}),t=e.aws_user_files_s3_bucket?{AWSS3:{bucket:e.aws_user_files_s3_bucket,region:e.aws_user_files_s3_bucket_region,dangerouslyConnectToHttpEndpointForTesting:e.aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing}}:e?e.Storage||e:{},e.Logging&&(n.Logging=i(i({},e.Logging),{region:e.aws_project_region})),e.geo&&(n.Geo=Object.assign({},e.geo),e.geo.amazon_location_service&&(n.Geo={AmazonLocationService:e.geo.amazon_location_service})),n.Analytics=Object.assign({},n.Analytics,e.Analytics),n.Auth=Object.assign({},n.Auth,e.Auth),n.Storage=Object.assign({},t),n.Logging=Object.assign({},n.Logging,e.Logging),o.debug("parse config",e,"to amplifyconfig",n),n},a=function(){function e(){}return e.parseMobilehubConfig=s,e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));for(var r=n(48),i=n(121),o={},s={},a=0;a<256;a++){var u=a.toString(16).toLowerCase();1===u.length&&(u="0"+u),o[a]=u,s[u]=a}function c(e){for(var t="",n=0;n<e.byteLength;n++)t+=o[e[n]];return t}var l=n(19),d=n(101);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p=function(){return(p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},h=new r.a("Signer"),v=function(e,t){var n=new i.Sha256(e);return n.update(t),n.digestSync()},g=function(e){var t=e||"",n=new i.Sha256;return n.update(t),c(n.digestSync())},m=function(e){return Object.keys(e).map((function(e){return e.toLowerCase()})).sort().join(";")},y=function(e){var t,n,r=Object(l.parse)(e.url);return[e.method||"/",encodeURIComponent(r.pathname).replace(/%2F/gi,"/"),(n=r.query,n&&0!==n.length?n.split("&").map((function(e){var t=e.split("=");if(1===t.length)return e;var n=t[1].replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}));return t[0]+"="+n})).sort((function(e,t){var n=e.split("=")[0],r=t.split("=")[0];return n===r?e<t?-1:1:n<r?-1:1})).join("&"):""),(t=e.headers,t&&0!==Object.keys(t).length?Object.keys(t).map((function(e){return{key:e.toLowerCase(),value:t[e]?t[e].trim().replace(/\s+/g," "):""}})).sort((function(e,t){return e.key<t.key?-1:1})).map((function(e){return e.key+":"+e.value})).join("\n")+"\n":""),m(e.headers),g(e.data)].join("\n")},b=function(e){var t=(Object(l.parse)(e.url).host.match(/([^\.]+)\.(?:([^\.]*)\.)?amazonaws\.com$/)||[]).slice(1,3);return"es"===t[1]&&(t=t.reverse()),{service:e.service||t[0],region:e.region||t[1]}},w=function(e,t,n){return[e,t,n,"aws4_request"].join("/")},_=function(e,t,n,r){return[e,n,r,g(t)].join("\n")},S=function(e,t,n){h.debug(n);var r=v("AWS4"+e,t),i=v(r,n.region),o=v(i,n.service);return v(o,"aws4_request")},E=function(e,t){return c(v(e,t))},C=function(){function e(){}return e.sign=function(e,t,n){if(void 0===n&&(n=null),e.headers=e.headers||{},e.body&&!e.data)throw new Error('The attribute "body" was found on the request object. Please use the attribute "data" instead.');var r=d.a.getDateWithClockOffset().toISOString().replace(/[:\-]|\.\d{3}/g,""),i=r.substr(0,8),o=Object(l.parse)(e.url);e.headers.host=o.host,e.headers["x-amz-date"]=r,t.session_token&&(e.headers["X-Amz-Security-Token"]=t.session_token);var s=y(e);h.debug(s);var a=n||b(e),u=w(i,a.region,a.service),c=_("AWS4-HMAC-SHA256",s,r,u),f=S(t.secret_key,i,a),p=E(f,c),v=function(e,t,n,r,i){return["AWS4-HMAC-SHA256 Credential="+t+"/"+n,"SignedHeaders="+r,"Signature="+i].join(", ")}(0,t.access_key,u,m(e.headers),p);return e.headers.Authorization=v,e},e.signUrl=function(e,t,n,r){var i="object"===f(e)?e.url:e,o="object"===f(e)?e.method:"GET",s="object"===f(e)?e.body:void 0,a=d.a.getDateWithClockOffset().toISOString().replace(/[:\-]|\.\d{3}/g,""),u=a.substr(0,8),c=Object(l.parse)(i,!0,!0),h=(c.search,function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(c,["search"])),v={host:h.host},g=n||b({url:Object(l.format)(h)}),m=g.region,C=g.service,A=w(u,m,C),O=t.session_token&&"iotdevicegateway"!==C,I=p(p(p({"X-Amz-Algorithm":"AWS4-HMAC-SHA256","X-Amz-Credential":[t.access_key,A].join("/"),"X-Amz-Date":a.substr(0,16)},O?{"X-Amz-Security-Token":""+t.session_token}:{}),r?{"X-Amz-Expires":""+r}:{}),{"X-Amz-SignedHeaders":Object.keys(v).join(",")}),T=y({method:o,url:Object(l.format)(p(p({},h),{query:p(p({},h.query),I)})),headers:v,data:s}),x=_("AWS4-HMAC-SHA256",T,a,A),P=S(t.secret_key,u,{region:m,service:C}),k=E(P,x),D=p({"X-Amz-Signature":k},t.session_token&&{"X-Amz-Security-Token":t.session_token});return Object(l.format)({protocol:h.protocol,slashes:!0,hostname:h.hostname,port:h.port,pathname:h.pathname,query:p(p(p({},h.query),I),D)})},e}()},function(e,t,n){var r=n(297);e.exports=function(e,t){return r(e,t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),"function"==typeof Symbol&&null!=Symbol.iterator&&Symbol.iterator,"function"==typeof Symbol&&null!=Symbol.asyncIterator&&Symbol.asyncIterator;var r="function"==typeof Symbol&&null!=Symbol.toStringTag?Symbol.toStringTag:"@@toStringTag"},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));var r=n(50),i=n(196),o={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},s=function(t){return{applyToStack:function(n){n.add(function(t){return function(n){return function(o){return Object(r.b)(void 0,void 0,void 0,(function(){var s,a,u,c;return Object(r.c)(this,(function(l){return s=o.request,!i.a.isInstance(s)||"node"!==t.runtime||s.headers.hasOwnProperty("X-Amzn-Trace-Id")?[2,n(o)]:(a=e.env.AWS_LAMBDA_FUNCTION_NAME,u=e.env._X_AMZN_TRACE_ID,(c=function(e){return"string"==typeof e&&e.length>0})(a)&&c(u)&&(s.headers["X-Amzn-Trace-Id"]=u),[2,n(Object(r.a)(Object(r.a)({},o),{request:s}))])}))}))}}}(t),o)}}}}).call(this,n(74))},function(e,t,n){"use strict";n.d(t,"a",(function(){return T}));for(var r=n(79),i=n(2),o={},s={},a=0;a<256;a++){var u=a.toString(16).toLowerCase();1===u.length&&(u="0"+u),o[a]=u,s[u]=a}function c(e){for(var t="",n=0;n<e.byteLength;n++)t+=o[e[n]];return t}var l=function(){function e(e){if(this.bytes=e,8!==e.byteLength)throw new Error("Int64 buffers must be exactly 8 bytes")}return e.fromNumber=function(t){if(t>0x8000000000000000||t<-0x8000000000000000)throw new Error(t+" is too large (or, if negative, too small) to represent as an Int64");for(var n=new Uint8Array(8),r=7,i=Math.abs(Math.round(t));r>-1&&i>0;r--,i/=256)n[r]=i;return t<0&&d(n),new e(n)},e.prototype.valueOf=function(){var e=this.bytes.slice(0),t=128&e[0];return t&&d(e),parseInt(c(e),16)*(t?-1:1)},e.prototype.toString=function(){return String(this.valueOf())},e}();function d(e){for(var t=0;t<8;t++)e[t]^=255;for(t=7;t>-1&&(e[t]++,0===e[t]);t--);}var f,p=function(){function e(e,t){this.toUtf8=e,this.fromUtf8=t}return e.prototype.format=function(e){var t,n,r,o,s=[];try{for(var a=Object(i.__values)(Object.keys(e)),u=a.next();!u.done;u=a.next()){var c=u.value,l=this.fromUtf8(c);s.push(Uint8Array.from([l.byteLength]),l,this.formatHeaderValue(e[c]))}}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}var d=new Uint8Array(s.reduce((function(e,t){return e+t.byteLength}),0)),f=0;try{for(var p=Object(i.__values)(s),h=p.next();!h.done;h=p.next()){var v=h.value;d.set(v,f),f+=v.byteLength}}catch(e){r={error:e}}finally{try{h&&!h.done&&(o=p.return)&&o.call(p)}finally{if(r)throw r.error}}return d},e.prototype.formatHeaderValue=function(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":var t=new DataView(new ArrayBuffer(3));return t.setUint8(0,3),t.setInt16(1,e.value,!1),new Uint8Array(t.buffer);case"integer":var n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,e.value,!1),new Uint8Array(n.buffer);case"long":var r=new Uint8Array(9);return r[0]=5,r.set(e.value.bytes,1),r;case"binary":var i=new DataView(new ArrayBuffer(3+e.value.byteLength));i.setUint8(0,6),i.setUint16(1,e.value.byteLength,!1);var o=new Uint8Array(i.buffer);return o.set(e.value,3),o;case"string":var a=this.fromUtf8(e.value),u=new DataView(new ArrayBuffer(3+a.byteLength));u.setUint8(0,7),u.setUint16(1,a.byteLength,!1);var c=new Uint8Array(u.buffer);return c.set(a,3),c;case"timestamp":var d=new Uint8Array(9);return d[0]=8,d.set(l.fromNumber(e.value.valueOf()).bytes,1),d;case"uuid":if(!E.test(e.value))throw new Error("Invalid UUID received: "+e.value);var f=new Uint8Array(17);return f[0]=9,f.set(function(e){if(e.length%2!=0)throw new Error("Hex encoded strings must have an even number length");for(var t=new Uint8Array(e.length/2),n=0;n<e.length;n+=2){var r=e.substr(n,2).toLowerCase();if(!(r in s))throw new Error("Cannot decode unrecognized sequence "+r+" as hexadecimal");t[n/2]=s[r]}return t}(e.value.replace(/\-/g,"")),1),f}},e.prototype.parse=function(e){for(var t={},n=0;n<e.byteLength;){var r=e.getUint8(n++),i=this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,r));switch(n+=r,e.getUint8(n++)){case 0:t[i]={type:h,value:!0};break;case 1:t[i]={type:h,value:!1};break;case 2:t[i]={type:v,value:e.getInt8(n++)};break;case 3:t[i]={type:g,value:e.getInt16(n,!1)},n+=2;break;case 4:t[i]={type:m,value:e.getInt32(n,!1)},n+=4;break;case 5:t[i]={type:y,value:new l(new Uint8Array(e.buffer,e.byteOffset+n,8))},n+=8;break;case 6:var o=e.getUint16(n,!1);n+=2,t[i]={type:b,value:new Uint8Array(e.buffer,e.byteOffset+n,o)},n+=o;break;case 7:var s=e.getUint16(n,!1);n+=2,t[i]={type:w,value:this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,s))},n+=s;break;case 8:t[i]={type:_,value:new Date(new l(new Uint8Array(e.buffer,e.byteOffset+n,8)).valueOf())},n+=8;break;case 9:var a=new Uint8Array(e.buffer,e.byteOffset+n,16);n+=16,t[i]={type:S,value:c(a.subarray(0,4))+"-"+c(a.subarray(4,6))+"-"+c(a.subarray(6,8))+"-"+c(a.subarray(8,10))+"-"+c(a.subarray(10))};break;default:throw new Error("Unrecognized header type tag")}}return t},e}();!function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"}(f||(f={}));var h="boolean",v="byte",g="short",m="integer",y="long",b="binary",w="string",_="timestamp",S="uuid",E=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,C=function(){function e(e,t){this.headerMarshaller=new p(e,t)}return e.prototype.marshall=function(e){var t=e.headers,n=e.body,i=this.headerMarshaller.format(t),o=i.byteLength+n.byteLength+16,s=new Uint8Array(o),a=new DataView(s.buffer,s.byteOffset,s.byteLength),u=new r.Crc32;return a.setUint32(0,o,!1),a.setUint32(4,i.byteLength,!1),a.setUint32(8,u.update(s.subarray(0,8)).digest(),!1),s.set(i,12),s.set(n,i.byteLength+12),a.setUint32(o-4,u.update(s.subarray(8,o-4)).digest(),!1),s},e.prototype.unmarshall=function(e){var t=function(e){var t=e.byteLength,n=e.byteOffset,i=e.buffer;if(t<16)throw new Error("Provided message too short to accommodate event stream message overhead");var o=new DataView(i,n,t),s=o.getUint32(0,!1);if(t!==s)throw new Error("Reported message length does not match received message length");var a=o.getUint32(4,!1),u=o.getUint32(8,!1),c=o.getUint32(t-4,!1),l=(new r.Crc32).update(new Uint8Array(i,n,8));if(u!==l.digest())throw new Error("The prelude checksum specified in the message ("+u+") does not match the calculated CRC32 checksum ("+l.digest()+")");if(l.update(new Uint8Array(i,n+8,t-12)),c!==l.digest())throw new Error("The message checksum ("+l.digest()+") did not match the expected value of "+c);return{headers:new DataView(i,n+8+4,a),body:new Uint8Array(i,n+8+4+a,s-a-16)}}(e),n=t.headers,i=t.body;return{headers:this.headerMarshaller.parse(n),body:i}},e.prototype.formatHeaders=function(e){return this.headerMarshaller.format(e)},e}(),A=function(){function e(e){var t=e.utf8Encoder,n=e.utf8Decoder;this.eventMarshaller=new C(t,n),this.utfEncoder=t}return e.prototype.deserialize=function(e,t){var n,r,o,s,a,u,c;return function(e,t){var n;return(n={})[Symbol.asyncIterator]=function(){return Object(i.__asyncGenerator)(this,arguments,(function(){var n,r,o,s,a,u,c,l,d,f,p,h,v,g,m,y,b;return Object(i.__generator)(this,(function(w){switch(w.label){case 0:w.trys.push([0,12,13,18]),n=Object(i.__asyncValues)(e),w.label=1;case 1:return[4,Object(i.__await)(n.next())];case 2:if((r=w.sent()).done)return[3,11];if(o=r.value,s=t.eventMarshaller.unmarshall(o),"error"!==(a=s.headers[":message-type"].value))return[3,3];throw(u=new Error(s.headers[":error-message"].value||"UnknownError")).name=s.headers[":error-code"].value,u;case 3:return"exception"!==a?[3,5]:(c=s.headers[":exception-type"].value,(g={})[c]=s,l=g,[4,Object(i.__await)(t.deserializer(l))]);case 4:if((d=w.sent()).$unknown)throw(f=new Error(t.toUtf8(s.body))).name=c,f;throw d[c];case 5:return"event"!==a?[3,9]:((m={})[s.headers[":event-type"].value]=s,p=m,[4,Object(i.__await)(t.deserializer(p))]);case 6:return(h=w.sent()).$unknown?[3,10]:[4,Object(i.__await)(h)];case 7:return[4,w.sent()];case 8:return w.sent(),[3,10];case 9:throw Error("Unrecognizable event type: "+s.headers[":event-type"].value);case 10:return[3,1];case 11:return[3,18];case 12:return v=w.sent(),y={error:v},[3,18];case 13:return w.trys.push([13,,16,17]),r&&!r.done&&(b=n.return)?[4,Object(i.__await)(b.call(n))]:[3,15];case 14:w.sent(),w.label=15;case 15:return[3,17];case 16:if(y)throw y.error;return[7];case 17:return[7];case 18:return[2]}}))}))},n}((n=e,o=0,s=0,a=null,u=null,c=function(e){if("number"!=typeof e)throw new Error("Attempted to allocate an event message where size was not a number: "+e);o=e,s=4,a=new Uint8Array(e),new DataView(a.buffer).setUint32(0,e,!1)},(r={})[Symbol.asyncIterator]=function(){return Object(i.__asyncGenerator)(this,arguments,(function(){var e,t,r,l,d,f,p,h;return Object(i.__generator)(this,(function(v){switch(v.label){case 0:e=n[Symbol.asyncIterator](),v.label=1;case 1:return[4,Object(i.__await)(e.next())];case 2:return t=v.sent(),r=t.value,t.done?o?[3,4]:[4,Object(i.__await)(void 0)]:[3,10];case 3:return[2,v.sent()];case 4:return o!==s?[3,7]:[4,Object(i.__await)(a)];case 5:return[4,v.sent()];case 6:return v.sent(),[3,8];case 7:throw new Error("Truncated event message received.");case 8:return[4,Object(i.__await)(void 0)];case 9:return[2,v.sent()];case 10:l=r.length,d=0,v.label=11;case 11:if(!(d<l))return[3,15];if(!a){if(f=l-d,u||(u=new Uint8Array(4)),p=Math.min(4-s,f),u.set(r.slice(d,d+p),s),d+=p,(s+=p)<4)return[3,15];c(new DataView(u.buffer).getUint32(0,!1)),u=null}return h=Math.min(o-s,l-d),a.set(r.slice(d,d+h),s),s+=h,d+=h,o&&o===s?[4,Object(i.__await)(a)]:[3,14];case 12:return[4,v.sent()];case 13:v.sent(),a=null,o=0,s=0,v.label=14;case 14:return[3,11];case 15:return[3,1];case 16:return[2]}}))}))},r),{eventMarshaller:this.eventMarshaller,deserializer:t,toUtf8:this.utfEncoder})},e.prototype.serialize=function(e,t){var n,r=this;return(n={})[Symbol.asyncIterator]=function(){return Object(i.__asyncGenerator)(this,arguments,(function(){var n,o,s,a,u,c,l;return Object(i.__generator)(this,(function(d){switch(d.label){case 0:d.trys.push([0,7,8,13]),n=Object(i.__asyncValues)(e),d.label=1;case 1:return[4,Object(i.__await)(n.next())];case 2:return(o=d.sent()).done?[3,6]:(s=o.value,a=r.eventMarshaller.marshall(t(s)),[4,Object(i.__await)(a)]);case 3:return[4,d.sent()];case 4:d.sent(),d.label=5;case 5:return[3,1];case 6:return[3,13];case 7:return u=d.sent(),c={error:u},[3,13];case 8:return d.trys.push([8,,11,12]),o&&!o.done&&(l=n.return)?[4,Object(i.__await)(l.call(n))]:[3,10];case 9:d.sent(),d.label=10;case 10:return[3,12];case 11:if(c)throw c.error;return[7];case 12:return[7];case 13:return[4,Object(i.__await)(new Uint8Array(0))];case 14:return[4,d.sent()];case 15:return d.sent(),[2]}}))}))},n},e}(),O=function(){function e(e){var t=e.utf8Encoder,n=e.utf8Decoder;this.eventMarshaller=new C(t,n),this.universalMarshaller=new A({utf8Decoder:n,utf8Encoder:t})}return e.prototype.deserialize=function(e,t){var n,r,o=I(e)?(n=e,(r={})[Symbol.asyncIterator]=function(){return Object(i.__asyncGenerator)(this,arguments,(function(){var e,t,r,o;return Object(i.__generator)(this,(function(s){switch(s.label){case 0:e=n.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,Object(i.__await)(e.read())];case 3:return t=s.sent(),r=t.done,o=t.value,r?[4,Object(i.__await)(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return[4,Object(i.__await)(o)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}}))}))},r):e;return this.universalMarshaller.deserialize(o,t)},e.prototype.serialize=function(e,t){var n,r=this.universalMarshaller.serialize(e,t);return"function"==typeof ReadableStream?(n=r[Symbol.asyncIterator](),new ReadableStream({pull:function(e){return Object(i.__awaiter)(this,void 0,void 0,(function(){var t,r,o;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return[4,n.next()];case 1:return t=i.sent(),r=t.done,o=t.value,r?[2,e.close()]:(e.enqueue(o),[2])}}))}))}})):r},e}(),I=function(e){return"function"==typeof ReadableStream&&e instanceof ReadableStream},T=function(e){return new O(e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),Object.create,Object.create;var r=n(66),i=n(58),o=n.n(i),s=["in-region","cross-region","mobile","standard","legacy"],a=function(e){var t=(void 0===e?{}:e).defaultsMode;return Object(r.a)((function(){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(function(){var e,n;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}(this,(function(r){switch(r.label){case 0:return"function"!=typeof t?[3,2]:[4,t()];case 1:return n=r.sent(),[3,3];case 2:n=t,r.label=3;case 3:switch(null==(e=n)?void 0:e.toLowerCase()){case"auto":return[2,Promise.resolve(u()?"mobile":"standard")];case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return[2,Promise.resolve(null==e?void 0:e.toLocaleLowerCase())];case void 0:return[2,Promise.resolve("legacy")];default:throw new Error('Invalid parameter for "defaultsMode", expect '.concat(s.join(", "),", got ").concat(e))}return[2]}}))}))}))},u=function(){var e,t,n="undefined"!=typeof window&&(null===(e=null===window||void 0===window?void 0:window.navigator)||void 0===e?void 0:e.userAgent)?o.a.parse(window.navigator.userAgent):void 0,r=null===(t=null==n?void 0:n.platform)||void 0===t?void 0:t.type;return"tablet"===r||"mobile"===r}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(2),i=function(e){return Object(r.__assign)(Object(r.__assign)({},e),{eventStreamMarshaller:e.eventStreamSerdeProvider(e)})}},function(e,t,n){"use strict";const r=n(374),i=n(375),o=new(n(376))({maxSize:1e5}),s=e=>!("object"!=typeof e||null===e||e instanceof RegExp||e instanceof Error||e instanceof Date),a=(e,t)=>{if(!s(e))return e;t={deep:!1,pascalCase:!1,...t};const{exclude:n,pascalCase:a,stopPaths:u,deep:c}=t,l=new Set(u),d=e=>(t,u)=>{if(c&&s(u)){const n=void 0===e?t:`${e}.${t}`;l.has(n)||(u=r(u,d(n)))}if(!n||!((e,t)=>e.some((e=>"string"==typeof e?e===t:(e.lastIndex=0,e.test(t)))))(n,t)){const e=a?`${t}_`:t;if(o.has(e))t=o.get(e);else{const n=i(t,{pascalCase:a});t.length<100&&o.set(e,n),t=n}}return[t,u]};return r(e,d(void 0))};e.exports=(e,t)=>Array.isArray(e)?Object.keys(e).map((n=>a(e[n],t))):a(e,t)},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={clockOffset:0,getDateWithClockOffset:function(){return r.clockOffset?new Date((new Date).getTime()+r.clockOffset):new Date},getClockOffset:function(){return r.clockOffset},getHeaderStringFromDate:function(e){return void 0===e&&(e=r.getDateWithClockOffset()),e.toISOString().replace(/[:\-]|\.\d{3}/g,"")},getDateFromHeaderString:function(e){var t=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}(e.match(/^(\d{4})(\d{2})(\d{2})T(\d{2})(\d{2})(\d{2}).+/),7),n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6];return new Date(Date.UTC(Number(n),Number(r)-1,Number(i),Number(o),Number(s),Number(a)))},isClockSkewed:function(e){return Math.abs(e.getTime()-r.getDateWithClockOffset().getTime())>=3e5},isClockSkewError:function(e){if(!e.response||!e.response.headers)return!1;var t=e.response.headers;return Boolean(["BadRequestException","InvalidSignatureException"].includes(t["x-amzn-errortype"])&&(t.date||t.Date))},setClockOffset:function(e){r.clockOffset=e}}},,,,function(e,t,n){var r=n(75),i=n(76);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},function(e,t,n){var r=n(261),i=n(277),o=n(279),s=n(280),a=n(281);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=s,u.prototype.set=a,e.exports=u},function(e,t,n){var r=n(63)(n(55),"Map");e.exports=r},function(e,t,n){(function(e){var r=n(55),i=n(293),o=t&&!t.nodeType&&t,s=o&&"object"==typeof e&&e&&!e.nodeType&&e,a=s&&s.exports===o?r.Buffer:void 0,u=(a?a.isBuffer:void 0)||i;e.exports=u}).call(this,n(73)(e))},function(e,t,n){var r=n(294),i=n(295),o=n(296),s=o&&o.isTypedArray,a=s?i(s):r;e.exports=a},function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return i})),n.d(t,"__assign",(function(){return o})),n.d(t,"__rest",(function(){return s})),n.d(t,"__decorate",(function(){return a})),n.d(t,"__param",(function(){return u})),n.d(t,"__metadata",(function(){return c})),n.d(t,"__awaiter",(function(){return l})),n.d(t,"__generator",(function(){return d})),n.d(t,"__createBinding",(function(){return f})),n.d(t,"__exportStar",(function(){return p})),n.d(t,"__values",(function(){return h})),n.d(t,"__read",(function(){return v})),n.d(t,"__spread",(function(){return g})),n.d(t,"__spreadArrays",(function(){return m})),n.d(t,"__await",(function(){return y})),n.d(t,"__asyncGenerator",(function(){return b})),n.d(t,"__asyncDelegator",(function(){return w})),n.d(t,"__asyncValues",(function(){return _})),n.d(t,"__makeTemplateObject",(function(){return S})),n.d(t,"__importStar",(function(){return E})),n.d(t,"__importDefault",(function(){return C})),n.d(t,"__classPrivateFieldGet",(function(){return A})),n.d(t,"__classPrivateFieldSet",(function(){return O}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function s(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function a(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function u(e,t){return function(n,r){t(n,r,e)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function d(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function f(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}function p(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function h(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(v(arguments[t]));return e}function m(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function y(e){return this instanceof y?(this.v=e,this):new y(e)}function b(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||a(e,t)}))})}function a(e,t){try{(n=i[e](t)).value instanceof y?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(e){l(o[0][3],e)}var n}function u(e){a("next",e)}function c(e){a("throw",e)}function l(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function w(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:y(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function _(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=h(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,i,(t=e[n](t)).done,t.value)}))}}}function S(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function C(e){return e&&e.__esModule?e:{default:e}}function A(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function O(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return i})),n.d(t,"__assign",(function(){return o})),n.d(t,"__rest",(function(){return s})),n.d(t,"__decorate",(function(){return a})),n.d(t,"__param",(function(){return u})),n.d(t,"__metadata",(function(){return c})),n.d(t,"__awaiter",(function(){return l})),n.d(t,"__generator",(function(){return d})),n.d(t,"__createBinding",(function(){return f})),n.d(t,"__exportStar",(function(){return p})),n.d(t,"__values",(function(){return h})),n.d(t,"__read",(function(){return v})),n.d(t,"__spread",(function(){return g})),n.d(t,"__spreadArrays",(function(){return m})),n.d(t,"__await",(function(){return y})),n.d(t,"__asyncGenerator",(function(){return b})),n.d(t,"__asyncDelegator",(function(){return w})),n.d(t,"__asyncValues",(function(){return _})),n.d(t,"__makeTemplateObject",(function(){return S})),n.d(t,"__importStar",(function(){return E})),n.d(t,"__importDefault",(function(){return C})),n.d(t,"__classPrivateFieldGet",(function(){return A})),n.d(t,"__classPrivateFieldSet",(function(){return O}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function s(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function a(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function u(e,t){return function(n,r){t(n,r,e)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function d(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function f(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}function p(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function h(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(v(arguments[t]));return e}function m(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function y(e){return this instanceof y?(this.v=e,this):new y(e)}function b(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||a(e,t)}))})}function a(e,t){try{(n=i[e](t)).value instanceof y?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(e){l(o[0][3],e)}var n}function u(e){a("next",e)}function c(e){a("throw",e)}function l(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function w(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:y(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function _(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=h(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,i,(t=e[n](t)).done,t.value)}))}}}function S(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function C(e){return e&&e.__esModule?e:{default:e}}function A(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function O(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},function(e,t,n){"use strict";n.d(t,"a",(function(){return nu})),n.d(t,"b",(function(){return Za}));var r=n(48),i=n(92),o=n(77),s=n(78),a=n(80),u=function(e,t){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}u(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var l=function(){return(l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function d(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function f(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}Object.create,Object.create;var p,h,v,g,m,y,b,w,_,S,E,C,A,O,I,T,x,P,k,D,N,L,M,j,R,U,B,F,z,q,$,K,V,G,H,W,J,Y,Z,Q,X,ee,te,ne,re,ie,oe,se,ae,ue,ce,le,de,fe,pe,he,ve,ge,me,ye,be,we,_e,Se,Ee,Ce,Ae,Oe,Ie,Te,xe,Pe,ke,De,Ne,Le,Me,je,Re,Ue,Be,Fe,ze,qe,$e,Ke,Ve,Ge,He,We,Je,Ye,Ze,Qe,Xe,et,tt,nt,rt,it,ot,st,at,ut,ct,lt,dt,ft,pt,ht,vt,gt,mt,yt,bt,wt,_t,St,Et,Ct,At,Ot,It,Tt,xt,Pt,kt,Dt,Nt,Lt,Mt,jt,Rt,Ut,Bt,Ft,zt,qt,$t,Kt,Vt,Gt,Ht,Wt,Jt,Yt,Zt,Qt,Xt,en,tn,nn,rn,on,sn,an,un,cn,ln,dn,fn,pn,hn,vn,gn,mn,yn,bn,wn,_n,Sn,En,Cn,An,On,In,Tn,xn,Pn,kn,Dn,Nn,Ln,Mn,jn,Rn,Un,Bn,Fn,zn,qn,$n,Kn,Vn,Gn,Hn,Wn,Jn,Yn,Zn,Qn,Xn,er,tr,nr,rr,ir,or,sr,ar,ur,cr,lr,dr,fr,pr,hr,vr,gr,mr,yr,br,wr,_r,Sr,Er,Cr,Ar,Or,Ir,Tr,xr,Pr,kr,Dr,Nr,Lr,Mr,jr,Rr,Ur,Br,Fr,zr,qr,$r,Kr,Vr,Gr,Hr,Wr,Jr=n(1);(p||(p={})).filterSensitiveLog=function(e){return l({},e)},(h||(h={})).filterSensitiveLog=function(e){return l({},e)},(v||(v={})).filterSensitiveLog=function(e){return l({},e)},(g||(g={})).filterSensitiveLog=function(e){return l({},e)},(m||(m={})).filterSensitiveLog=function(e){return l({},e)},(y||(y={})).filterSensitiveLog=function(e){return l({},e)},(b||(b={})).filterSensitiveLog=function(e){return l({},e)},(w||(w={})).filterSensitiveLog=function(e){return l({},e)},(_||(_={})).filterSensitiveLog=function(e){return l({},e)},(S||(S={})).filterSensitiveLog=function(e){return l({},e)},(E||(E={})).filterSensitiveLog=function(e){return l(l({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:Jr.d})},(C||(C={})).filterSensitiveLog=function(e){return l({},e)},(A||(A={})).filterSensitiveLog=function(e){return l({},e)},(O||(O={})).filterSensitiveLog=function(e){return l({},e)},(I||(I={})).filterSensitiveLog=function(e){return l({},e)},(T||(T={})).filterSensitiveLog=function(e){return l(l(l({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:Jr.d}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Jr.d})},(x||(x={})).filterSensitiveLog=function(e){return l(l(l(l(l({},e),e.SSECustomerKey&&{SSECustomerKey:Jr.d}),e.SSEKMSKeyId&&{SSEKMSKeyId:Jr.d}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Jr.d}),e.CopySourceSSECustomerKey&&{CopySourceSSECustomerKey:Jr.d})},(P||(P={})).filterSensitiveLog=function(e){return l({},e)},(k||(k={})).filterSensitiveLog=function(e){return l({},e)},(D||(D={})).filterSensitiveLog=function(e){return l({},e)},(N||(N={})).filterSensitiveLog=function(e){return l({},e)},(L||(L={})).filterSensitiveLog=function(e){return l({},e)},(M||(M={})).filterSensitiveLog=function(e){return l({},e)},(j||(j={})).filterSensitiveLog=function(e){return l(l(l({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:Jr.d}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Jr.d})},(R||(R={})).filterSensitiveLog=function(e){return l(l(l(l({},e),e.SSECustomerKey&&{SSECustomerKey:Jr.d}),e.SSEKMSKeyId&&{SSEKMSKeyId:Jr.d}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Jr.d})},(U||(U={})).filterSensitiveLog=function(e){return l({},e)},(B||(B={})).filterSensitiveLog=function(e){return l({},e)},(F||(F={})).filterSensitiveLog=function(e){return l({},e)},(z||(z={})).filterSensitiveLog=function(e){return l({},e)},(q||(q={})).filterSensitiveLog=function(e){return l({},e)},($||($={})).filterSensitiveLog=function(e){return l({},e)},(K||(K={})).filterSensitiveLog=function(e){return l({},e)},(V||(V={})).filterSensitiveLog=function(e){return l({},e)},(G||(G={})).filterSensitiveLog=function(e){return l({},e)},(H||(H={})).filterSensitiveLog=function(e){return l({},e)},(W||(W={})).filterSensitiveLog=function(e){return l({},e)},(J||(J={})).filterSensitiveLog=function(e){return l({},e)},(Y||(Y={})).filterSensitiveLog=function(e){return l({},e)},(Z||(Z={})).filterSensitiveLog=function(e){return l({},e)},(Q||(Q={})).filterSensitiveLog=function(e){return l({},e)},(X||(X={})).filterSensitiveLog=function(e){return l({},e)},(ee||(ee={})).filterSensitiveLog=function(e){return l({},e)},(te||(te={})).filterSensitiveLog=function(e){return l({},e)},(ne||(ne={})).filterSensitiveLog=function(e){return l({},e)},(re||(re={})).filterSensitiveLog=function(e){return l({},e)},(ie||(ie={})).filterSensitiveLog=function(e){return l({},e)},(oe||(oe={})).filterSensitiveLog=function(e){return l({},e)},(se||(se={})).filterSensitiveLog=function(e){return l({},e)},(ae||(ae={})).filterSensitiveLog=function(e){return l({},e)},(ue||(ue={})).filterSensitiveLog=function(e){return l({},e)},(ce||(ce={})).filterSensitiveLog=function(e){return l({},e)},(le||(le={})).filterSensitiveLog=function(e){return l({},e)},(de||(de={})).filterSensitiveLog=function(e){return l({},e)},(fe||(fe={})).filterSensitiveLog=function(e){return l({},e)},(pe||(pe={})).filterSensitiveLog=function(e){return l({},e)},function(e){e.visit=function(e,t){return void 0!==e.Prefix?t.Prefix(e.Prefix):void 0!==e.Tag?t.Tag(e.Tag):void 0!==e.And?t.And(e.And):t._(e.$unknown[0],e.$unknown[1])},e.filterSensitiveLog=function(e){var t;return void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:fe.filterSensitiveLog(e.Tag)}:void 0!==e.And?{And:pe.filterSensitiveLog(e.And)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0}}(he||(he={})),(ve||(ve={})).filterSensitiveLog=function(e){return l({},e)},(ge||(ge={})).filterSensitiveLog=function(e){return l({},e)},(me||(me={})).filterSensitiveLog=function(e){return l({},e)},(ye||(ye={})).filterSensitiveLog=function(e){return l({},e)},(be||(be={})).filterSensitiveLog=function(e){return l(l({},e),e.Filter&&{Filter:he.filterSensitiveLog(e.Filter)})},(we||(we={})).filterSensitiveLog=function(e){return l(l({},e),e.AnalyticsConfiguration&&{AnalyticsConfiguration:be.filterSensitiveLog(e.AnalyticsConfiguration)})},(_e||(_e={})).filterSensitiveLog=function(e){return l({},e)},(Se||(Se={})).filterSensitiveLog=function(e){return l({},e)},(Ee||(Ee={})).filterSensitiveLog=function(e){return l({},e)},(Ce||(Ce={})).filterSensitiveLog=function(e){return l({},e)},(Ae||(Ae={})).filterSensitiveLog=function(e){return l(l({},e),e.KMSMasterKeyID&&{KMSMasterKeyID:Jr.d})},(Oe||(Oe={})).filterSensitiveLog=function(e){return l(l({},e),e.ApplyServerSideEncryptionByDefault&&{ApplyServerSideEncryptionByDefault:Ae.filterSensitiveLog(e.ApplyServerSideEncryptionByDefault)})},(Ie||(Ie={})).filterSensitiveLog=function(e){return l(l({},e),e.Rules&&{Rules:e.Rules.map((function(e){return Oe.filterSensitiveLog(e)}))})},(Te||(Te={})).filterSensitiveLog=function(e){return l(l({},e),e.ServerSideEncryptionConfiguration&&{ServerSideEncryptionConfiguration:Ie.filterSensitiveLog(e.ServerSideEncryptionConfiguration)})},(xe||(xe={})).filterSensitiveLog=function(e){return l({},e)},(Pe||(Pe={})).filterSensitiveLog=function(e){return l({},e)},(ke||(ke={})).filterSensitiveLog=function(e){return l({},e)},(De||(De={})).filterSensitiveLog=function(e){return l({},e)},(Ne||(Ne={})).filterSensitiveLog=function(e){return l({},e)},(Le||(Le={})).filterSensitiveLog=function(e){return l({},e)},(Me||(Me={})).filterSensitiveLog=function(e){return l({},e)},(je||(je={})).filterSensitiveLog=function(e){return l(l({},e),e.KeyId&&{KeyId:Jr.d})},(Re||(Re={})).filterSensitiveLog=function(e){return l({},e)},(Ue||(Ue={})).filterSensitiveLog=function(e){return l(l({},e),e.SSEKMS&&{SSEKMS:je.filterSensitiveLog(e.SSEKMS)})},(Be||(Be={})).filterSensitiveLog=function(e){return l(l({},e),e.Encryption&&{Encryption:Ue.filterSensitiveLog(e.Encryption)})},(Fe||(Fe={})).filterSensitiveLog=function(e){return l(l({},e),e.S3BucketDestination&&{S3BucketDestination:Be.filterSensitiveLog(e.S3BucketDestination)})},(ze||(ze={})).filterSensitiveLog=function(e){return l({},e)},(qe||(qe={})).filterSensitiveLog=function(e){return l({},e)},($e||($e={})).filterSensitiveLog=function(e){return l(l({},e),e.Destination&&{Destination:Fe.filterSensitiveLog(e.Destination)})},(Ke||(Ke={})).filterSensitiveLog=function(e){return l(l({},e),e.InventoryConfiguration&&{InventoryConfiguration:$e.filterSensitiveLog(e.InventoryConfiguration)})},(Ve||(Ve={})).filterSensitiveLog=function(e){return l({},e)},(Ge||(Ge={})).filterSensitiveLog=function(e){return l({},e)},(He||(He={})).filterSensitiveLog=function(e){return l({},e)},function(e){e.visit=function(e,t){return void 0!==e.Prefix?t.Prefix(e.Prefix):void 0!==e.Tag?t.Tag(e.Tag):void 0!==e.And?t.And(e.And):t._(e.$unknown[0],e.$unknown[1])},e.filterSensitiveLog=function(e){var t;return void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:fe.filterSensitiveLog(e.Tag)}:void 0!==e.And?{And:He.filterSensitiveLog(e.And)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0}}(We||(We={})),(Je||(Je={})).filterSensitiveLog=function(e){return l({},e)},(Ye||(Ye={})).filterSensitiveLog=function(e){return l({},e)},(Ze||(Ze={})).filterSensitiveLog=function(e){return l({},e)},(Qe||(Qe={})).filterSensitiveLog=function(e){return l(l({},e),e.Filter&&{Filter:We.filterSensitiveLog(e.Filter)})},(Xe||(Xe={})).filterSensitiveLog=function(e){return l(l({},e),e.Rules&&{Rules:e.Rules.map((function(e){return Qe.filterSensitiveLog(e)}))})},(et||(et={})).filterSensitiveLog=function(e){return l({},e)},(tt||(tt={})).filterSensitiveLog=function(e){return l({},e)},(nt||(nt={})).filterSensitiveLog=function(e){return l({},e)},(rt||(rt={})).filterSensitiveLog=function(e){return l({},e)},(it||(it={})).filterSensitiveLog=function(e){return l({},e)},(ot||(ot={})).filterSensitiveLog=function(e){return l({},e)},(st||(st={})).filterSensitiveLog=function(e){return l({},e)},(at||(at={})).filterSensitiveLog=function(e){return l({},e)},function(e){e.visit=function(e,t){return void 0!==e.Prefix?t.Prefix(e.Prefix):void 0!==e.Tag?t.Tag(e.Tag):void 0!==e.And?t.And(e.And):t._(e.$unknown[0],e.$unknown[1])},e.filterSensitiveLog=function(e){var t;return void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:fe.filterSensitiveLog(e.Tag)}:void 0!==e.And?{And:at.filterSensitiveLog(e.And)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0}}(ut||(ut={})),(ct||(ct={})).filterSensitiveLog=function(e){return l(l({},e),e.Filter&&{Filter:ut.filterSensitiveLog(e.Filter)})},(lt||(lt={})).filterSensitiveLog=function(e){return l(l({},e),e.MetricsConfiguration&&{MetricsConfiguration:ct.filterSensitiveLog(e.MetricsConfiguration)})},(dt||(dt={})).filterSensitiveLog=function(e){return l({},e)},(ft||(ft={})).filterSensitiveLog=function(e){return l({},e)},(pt||(pt={})).filterSensitiveLog=function(e){return l({},e)},(ht||(ht={})).filterSensitiveLog=function(e){return l({},e)},(vt||(vt={})).filterSensitiveLog=function(e){return l({},e)},(gt||(gt={})).filterSensitiveLog=function(e){return l({},e)},(mt||(mt={})).filterSensitiveLog=function(e){return l({},e)},(yt||(yt={})).filterSensitiveLog=function(e){return l({},e)},(bt||(bt={})).filterSensitiveLog=function(e){return l({},e)},(wt||(wt={})).filterSensitiveLog=function(e){return l({},e)},(_t||(_t={})).filterSensitiveLog=function(e){return l({},e)},(St||(St={})).filterSensitiveLog=function(e){return l({},e)},(Et||(Et={})).filterSensitiveLog=function(e){return l({},e)},(Ct||(Ct={})).filterSensitiveLog=function(e){return l({},e)},(At||(At={})).filterSensitiveLog=function(e){return l({},e)},(Ot||(Ot={})).filterSensitiveLog=function(e){return l({},e)},(It||(It={})).filterSensitiveLog=function(e){return l({},e)},(Tt||(Tt={})).filterSensitiveLog=function(e){return l({},e)},(xt||(xt={})).filterSensitiveLog=function(e){return l({},e)},(Pt||(Pt={})).filterSensitiveLog=function(e){return l({},e)},(kt||(kt={})).filterSensitiveLog=function(e){return l({},e)},(Dt||(Dt={})).filterSensitiveLog=function(e){return l({},e)},(Nt||(Nt={})).filterSensitiveLog=function(e){return l({},e)},(Lt||(Lt={})).filterSensitiveLog=function(e){return l({},e)},(Mt||(Mt={})).filterSensitiveLog=function(e){return l({},e)},(jt||(jt={})).filterSensitiveLog=function(e){return l({},e)},function(e){e.visit=function(e,t){return void 0!==e.Prefix?t.Prefix(e.Prefix):void 0!==e.Tag?t.Tag(e.Tag):void 0!==e.And?t.And(e.And):t._(e.$unknown[0],e.$unknown[1])},e.filterSensitiveLog=function(e){var t;return void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:fe.filterSensitiveLog(e.Tag)}:void 0!==e.And?{And:jt.filterSensitiveLog(e.And)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0}}(Rt||(Rt={})),(Ut||(Ut={})).filterSensitiveLog=function(e){return l({},e)},(Bt||(Bt={})).filterSensitiveLog=function(e){return l({},e)},(Ft||(Ft={})).filterSensitiveLog=function(e){return l({},e)},(zt||(zt={})).filterSensitiveLog=function(e){return l(l({},e),e.Filter&&{Filter:Rt.filterSensitiveLog(e.Filter)})},(qt||(qt={})).filterSensitiveLog=function(e){return l(l({},e),e.Rules&&{Rules:e.Rules.map((function(e){return zt.filterSensitiveLog(e)}))})},($t||($t={})).filterSensitiveLog=function(e){return l(l({},e),e.ReplicationConfiguration&&{ReplicationConfiguration:qt.filterSensitiveLog(e.ReplicationConfiguration)})},(Kt||(Kt={})).filterSensitiveLog=function(e){return l({},e)},(Vt||(Vt={})).filterSensitiveLog=function(e){return l({},e)},(Gt||(Gt={})).filterSensitiveLog=function(e){return l({},e)},(Ht||(Ht={})).filterSensitiveLog=function(e){return l({},e)},(Wt||(Wt={})).filterSensitiveLog=function(e){return l({},e)},(Jt||(Jt={})).filterSensitiveLog=function(e){return l({},e)},(Yt||(Yt={})).filterSensitiveLog=function(e){return l({},e)},(Zt||(Zt={})).filterSensitiveLog=function(e){return l({},e)},(Qt||(Qt={})).filterSensitiveLog=function(e){return l({},e)},(Xt||(Xt={})).filterSensitiveLog=function(e){return l({},e)},(en||(en={})).filterSensitiveLog=function(e){return l({},e)},(tn||(tn={})).filterSensitiveLog=function(e){return l({},e)},(nn||(nn={})).filterSensitiveLog=function(e){return l({},e)},(rn||(rn={})).filterSensitiveLog=function(e){return l({},e)},(on||(on={})).filterSensitiveLog=function(e){return l({},e)},(sn||(sn={})).filterSensitiveLog=function(e){return l(l({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:Jr.d})},(an||(an={})).filterSensitiveLog=function(e){return l(l({},e),e.SSECustomerKey&&{SSECustomerKey:Jr.d})},(un||(un={})).filterSensitiveLog=function(e){return l({},e)},(cn||(cn={})).filterSensitiveLog=function(e){return l({},e)},(ln||(ln={})).filterSensitiveLog=function(e){return l({},e)},(dn||(dn={})).filterSensitiveLog=function(e){return l({},e)},(fn||(fn={})).filterSensitiveLog=function(e){return l({},e)},(pn||(pn={})).filterSensitiveLog=function(e){return l({},e)},(hn||(hn={})).filterSensitiveLog=function(e){return l({},e)},(vn||(vn={})).filterSensitiveLog=function(e){return l({},e)},(gn||(gn={})).filterSensitiveLog=function(e){return l({},e)},(mn||(mn={})).filterSensitiveLog=function(e){return l({},e)},(yn||(yn={})).filterSensitiveLog=function(e){return l({},e)},(bn||(bn={})).filterSensitiveLog=function(e){return l({},e)},(wn||(wn={})).filterSensitiveLog=function(e){return l({},e)},(_n||(_n={})).filterSensitiveLog=function(e){return l({},e)},(Sn||(Sn={})).filterSensitiveLog=function(e){return l({},e)},(En||(En={})).filterSensitiveLog=function(e){return l({},e)},(Cn||(Cn={})).filterSensitiveLog=function(e){return l({},e)},(An||(An={})).filterSensitiveLog=function(e){return l({},e)},(On||(On={})).filterSensitiveLog=function(e){return l({},e)},(In||(In={})).filterSensitiveLog=function(e){return l({},e)},(Tn||(Tn={})).filterSensitiveLog=function(e){return l({},e)},(xn||(xn={})).filterSensitiveLog=function(e){return l({},e)},(Pn||(Pn={})).filterSensitiveLog=function(e){return l({},e)},(kn||(kn={})).filterSensitiveLog=function(e){return l({},e)},(Dn||(Dn={})).filterSensitiveLog=function(e){return l(l({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:Jr.d})},(Nn||(Nn={})).filterSensitiveLog=function(e){return l(l({},e),e.SSECustomerKey&&{SSECustomerKey:Jr.d})},(Ln||(Ln={})).filterSensitiveLog=function(e){return l(l({},e),e.AnalyticsConfigurationList&&{AnalyticsConfigurationList:e.AnalyticsConfigurationList.map((function(e){return be.filterSensitiveLog(e)}))})},(Mn||(Mn={})).filterSensitiveLog=function(e){return l({},e)},(jn||(jn={})).filterSensitiveLog=function(e){return l({},e)},(Rn||(Rn={})).filterSensitiveLog=function(e){return l({},e)},(Un||(Un={})).filterSensitiveLog=function(e){return l(l({},e),e.InventoryConfigurationList&&{InventoryConfigurationList:e.InventoryConfigurationList.map((function(e){return $e.filterSensitiveLog(e)}))})},(Bn||(Bn={})).filterSensitiveLog=function(e){return l({},e)},(Fn||(Fn={})).filterSensitiveLog=function(e){return l(l({},e),e.MetricsConfigurationList&&{MetricsConfigurationList:e.MetricsConfigurationList.map((function(e){return ct.filterSensitiveLog(e)}))})},(zn||(zn={})).filterSensitiveLog=function(e){return l({},e)},(qn||(qn={})).filterSensitiveLog=function(e){return l({},e)},($n||($n={})).filterSensitiveLog=function(e){return l({},e)},(Kn||(Kn={})).filterSensitiveLog=function(e){return l({},e)},(Vn||(Vn={})).filterSensitiveLog=function(e){return l({},e)},(Gn||(Gn={})).filterSensitiveLog=function(e){return l({},e)},(Hn||(Hn={})).filterSensitiveLog=function(e){return l({},e)},(Wn||(Wn={})).filterSensitiveLog=function(e){return l({},e)},(Jn||(Jn={})).filterSensitiveLog=function(e){return l({},e)},(Yn||(Yn={})).filterSensitiveLog=function(e){return l({},e)},(Zn||(Zn={})).filterSensitiveLog=function(e){return l({},e)},(Qn||(Qn={})).filterSensitiveLog=function(e){return l({},e)},(Xn||(Xn={})).filterSensitiveLog=function(e){return l({},e)},(er||(er={})).filterSensitiveLog=function(e){return l({},e)},(tr||(tr={})).filterSensitiveLog=function(e){return l({},e)},(nr||(nr={})).filterSensitiveLog=function(e){return l({},e)},(rr||(rr={})).filterSensitiveLog=function(e){return l({},e)},(ir||(ir={})).filterSensitiveLog=function(e){return l({},e)},(or||(or={})).filterSensitiveLog=function(e){return l({},e)},(sr||(sr={})).filterSensitiveLog=function(e){return l({},e)},(ar||(ar={})).filterSensitiveLog=function(e){return l({},e)},(ur||(ur={})).filterSensitiveLog=function(e){return l({},e)},(cr||(cr={})).filterSensitiveLog=function(e){return l(l({},e),e.AnalyticsConfiguration&&{AnalyticsConfiguration:be.filterSensitiveLog(e.AnalyticsConfiguration)})},(lr||(lr={})).filterSensitiveLog=function(e){return l({},e)},(dr||(dr={})).filterSensitiveLog=function(e){return l({},e)},(fr||(fr={})).filterSensitiveLog=function(e){return l(l({},e),e.ServerSideEncryptionConfiguration&&{ServerSideEncryptionConfiguration:Ie.filterSensitiveLog(e.ServerSideEncryptionConfiguration)})},(pr||(pr={})).filterSensitiveLog=function(e){return l({},e)},(hr||(hr={})).filterSensitiveLog=function(e){return l(l({},e),e.InventoryConfiguration&&{InventoryConfiguration:$e.filterSensitiveLog(e.InventoryConfiguration)})},(vr||(vr={})).filterSensitiveLog=function(e){return l(l({},e),e.Rules&&{Rules:e.Rules.map((function(e){return Qe.filterSensitiveLog(e)}))})},(gr||(gr={})).filterSensitiveLog=function(e){return l(l({},e),e.LifecycleConfiguration&&{LifecycleConfiguration:vr.filterSensitiveLog(e.LifecycleConfiguration)})},(mr||(mr={})).filterSensitiveLog=function(e){return l({},e)},(yr||(yr={})).filterSensitiveLog=function(e){return l({},e)},(br||(br={})).filterSensitiveLog=function(e){return l(l({},e),e.MetricsConfiguration&&{MetricsConfiguration:ct.filterSensitiveLog(e.MetricsConfiguration)})},(wr||(wr={})).filterSensitiveLog=function(e){return l({},e)},(_r||(_r={})).filterSensitiveLog=function(e){return l({},e)},(Sr||(Sr={})).filterSensitiveLog=function(e){return l({},e)},(Er||(Er={})).filterSensitiveLog=function(e){return l(l({},e),e.ReplicationConfiguration&&{ReplicationConfiguration:qt.filterSensitiveLog(e.ReplicationConfiguration)})},(Cr||(Cr={})).filterSensitiveLog=function(e){return l({},e)},(Ar||(Ar={})).filterSensitiveLog=function(e){return l({},e)},(Or||(Or={})).filterSensitiveLog=function(e){return l({},e)},(Ir||(Ir={})).filterSensitiveLog=function(e){return l({},e)},(Tr||(Tr={})).filterSensitiveLog=function(e){return l({},e)},(xr||(xr={})).filterSensitiveLog=function(e){return l({},e)},(Pr||(Pr={})).filterSensitiveLog=function(e){return l({},e)},(kr||(kr={})).filterSensitiveLog=function(e){return l({},e)},(Dr||(Dr={})).filterSensitiveLog=function(e){return l(l(l({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:Jr.d}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Jr.d})},(Nr||(Nr={})).filterSensitiveLog=function(e){return l(l(l(l({},e),e.SSECustomerKey&&{SSECustomerKey:Jr.d}),e.SSEKMSKeyId&&{SSEKMSKeyId:Jr.d}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Jr.d})},(Lr||(Lr={})).filterSensitiveLog=function(e){return l({},e)},(Mr||(Mr={})).filterSensitiveLog=function(e){return l({},e)},(jr||(jr={})).filterSensitiveLog=function(e){return l({},e)},(Rr||(Rr={})).filterSensitiveLog=function(e){return l({},e)},(Ur||(Ur={})).filterSensitiveLog=function(e){return l({},e)},(Br||(Br={})).filterSensitiveLog=function(e){return l({},e)},(Fr||(Fr={})).filterSensitiveLog=function(e){return l({},e)},(zr||(zr={})).filterSensitiveLog=function(e){return l({},e)},(qr||(qr={})).filterSensitiveLog=function(e){return l({},e)},($r||($r={})).filterSensitiveLog=function(e){return l({},e)},(Kr||(Kr={})).filterSensitiveLog=function(e){return l({},e)},(Vr||(Vr={})).filterSensitiveLog=function(e){return l({},e)},(Gr||(Gr={})).filterSensitiveLog=function(e){return l({},e)},(Hr||(Hr={})).filterSensitiveLog=function(e){return l({},e)},(Wr||(Wr={})).filterSensitiveLog=function(e){return l(l({},e),e.KMSKeyId&&{KMSKeyId:Jr.d})};var Yr=n(3),Zr=n(2),Qr=function(){function e(e,t){void 0===t&&(t=[]),this.name=e,this.children=t,this.attributes={}}return e.prototype.withName=function(e){return this.name=e,this},e.prototype.addAttribute=function(e,t){return this.attributes[e]=t,this},e.prototype.addChildNode=function(e){return this.children.push(e),this},e.prototype.removeAttribute=function(e){return delete this.attributes[e],this},e.prototype.toString=function(){var e,t,n=Boolean(this.children.length),r="<"+this.name,i=this.attributes;try{for(var o=Object(Zr.__values)(Object.keys(i)),s=o.next();!s.done;s=o.next()){var a=s.value,u=i[a];null!=u&&(r+=" "+a+'="'+(""+u).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")+'"')}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return r+(n?">"+this.children.map((function(e){return e.toString()})).join("")+"</"+this.name+">":"/>")},e}(),Xr=function(){function e(e){this.value=e}return e.prototype.toString=function(){return(""+this.value).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},e}(),ei=n(184),ti=function(e,t){return d(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return f(this,(function(d){switch(d.label){case 0:return r=[l({},e)],c={},[4,_i(e.body,t)];case 1:switch(n=l.apply(void 0,r.concat([(c.body=d.sent(),c)])),o="UnknownError",o=Si(e,n.body)){case"NoSuchUpload":case"com.amazonaws.s3#NoSuchUpload":return[3,2]}return[3,4];case 2:return s=[{}],[4,hi(n,t)];case 3:return i=l.apply(void 0,[l.apply(void 0,s.concat([d.sent()])),{name:o,$metadata:yi(e)}]),[3,5];case 4:a=n.body,o=a.code||a.Code||o,i=l(l({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:yi(e)}),d.label=5;case 5:return u=i.message||i.Message||o,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}}))}))},ni=function(e,t){return d(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u;return f(this,(function(c){switch(c.label){case 0:return r=[l({},e)],u={},[4,_i(e.body,t)];case 1:return n=l.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Si(e,n.body),s=n.body,o=s.code||s.Code||o,i=l(l({},s),{name:""+o,message:s.message||s.Message||o,$fault:"client",$metadata:yi(e)}),a=i.message||i.Message||o,i.message=a,delete i.Message,[2,Promise.reject(Object.assign(new Error(a),i))]}}))}))},ri=function(e,t){return d(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return f(this,(function(d){switch(d.label){case 0:return r=[l({},e)],c={},[4,_i(e.body,t)];case 1:switch(n=l.apply(void 0,r.concat([(c.body=d.sent(),c)])),o="UnknownError",o=Si(e,n.body)){case"ObjectNotInActiveTierError":case"com.amazonaws.s3#ObjectNotInActiveTierError":return[3,2]}return[3,4];case 2:return s=[{}],[4,vi(n,t)];case 3:return i=l.apply(void 0,[l.apply(void 0,s.concat([d.sent()])),{name:o,$metadata:yi(e)}]),[3,5];case 4:a=n.body,o=a.code||a.Code||o,i=l(l({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:yi(e)}),d.label=5;case 5:return u=i.message||i.Message||o,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}}))}))},ii=function(e,t){return d(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u;return f(this,(function(c){switch(c.label){case 0:return r=[l({},e)],u={},[4,_i(e.body,t)];case 1:return n=l.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Si(e,n.body),s=n.body,o=s.code||s.Code||o,i=l(l({},s),{name:""+o,message:s.message||s.Message||o,$fault:"client",$metadata:yi(e)}),a=i.message||i.Message||o,i.message=a,delete i.Message,[2,Promise.reject(Object.assign(new Error(a),i))]}}))}))},oi=function(e,t){return d(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u;return f(this,(function(c){switch(c.label){case 0:return r=[l({},e)],u={},[4,_i(e.body,t)];case 1:return n=l.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Si(e,n.body),s=n.body,o=s.code||s.Code||o,i=l(l({},s),{name:""+o,message:s.message||s.Message||o,$fault:"client",$metadata:yi(e)}),a=i.message||i.Message||o,i.message=a,delete i.Message,[2,Promise.reject(Object.assign(new Error(a),i))]}}))}))},si=function(e,t){return d(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,d;return f(this,(function(f){switch(f.label){case 0:return r=[l({},e)],d={},[4,_i(e.body,t)];case 1:switch(n=l.apply(void 0,r.concat([(d.body=f.sent(),d)])),o="UnknownError",o=Si(e,n.body)){case"InvalidObjectState":case"com.amazonaws.s3#InvalidObjectState":return[3,2];case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":return[3,4]}return[3,6];case 2:return s=[{}],[4,di(n,t)];case 3:return i=l.apply(void 0,[l.apply(void 0,s.concat([f.sent()])),{name:o,$metadata:yi(e)}]),[3,7];case 4:return a=[{}],[4,pi(n,t)];case 5:return i=l.apply(void 0,[l.apply(void 0,a.concat([f.sent()])),{name:o,$metadata:yi(e)}]),[3,7];case 6:u=n.body,o=u.code||u.Code||o,i=l(l({},u),{name:""+o,message:u.message||u.Message||o,$fault:"client",$metadata:yi(e)}),f.label=7;case 7:return c=i.message||i.Message||o,i.message=c,delete i.Message,[2,Promise.reject(Object.assign(new Error(c),i))]}}))}))},ai=function(e,t){return d(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return f(this,(function(d){switch(d.label){case 0:return r=[l({},e)],c={},[4,_i(e.body,t)];case 1:switch(n=l.apply(void 0,r.concat([(c.body=d.sent(),c)])),o="UnknownError",o=Si(e,n.body)){case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":return[3,2]}return[3,4];case 2:return s=[{}],[4,fi(n,t)];case 3:return i=l.apply(void 0,[l.apply(void 0,s.concat([d.sent()])),{name:o,$metadata:yi(e)}]),[3,5];case 4:a=n.body,o=a.code||a.Code||o,i=l(l({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:yi(e)}),d.label=5;case 5:return u=i.message||i.Message||o,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}}))}))},ui=function(e,t){return d(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u;return f(this,(function(c){switch(c.label){case 0:return r=[l({},e)],u={},[4,_i(e.body,t)];case 1:return n=l.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Si(e,n.body),s=n.body,o=s.code||s.Code||o,i=l(l({},s),{name:""+o,message:s.message||s.Message||o,$fault:"client",$metadata:yi(e)}),a=i.message||i.Message||o,i.message=a,delete i.Message,[2,Promise.reject(Object.assign(new Error(a),i))]}}))}))},ci=function(e,t){return d(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u;return f(this,(function(c){switch(c.label){case 0:return r=[l({},e)],u={},[4,_i(e.body,t)];case 1:return n=l.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Si(e,n.body),s=n.body,o=s.code||s.Code||o,i=l(l({},s),{name:""+o,message:s.message||s.Message||o,$fault:"client",$metadata:yi(e)}),a=i.message||i.Message||o,i.message=a,delete i.Message,[2,Promise.reject(Object.assign(new Error(a),i))]}}))}))},li=function(e,t){return d(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u;return f(this,(function(c){switch(c.label){case 0:return r=[l({},e)],u={},[4,_i(e.body,t)];case 1:return n=l.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Si(e,n.body),s=n.body,o=s.code||s.Code||o,i=l(l({},s),{name:""+o,message:s.message||s.Message||o,$fault:"client",$metadata:yi(e)}),a=i.message||i.Message||o,i.message=a,delete i.Message,[2,Promise.reject(Object.assign(new Error(a),i))]}}))}))},di=function(e,t){return d(void 0,void 0,void 0,(function(){var t,n;return f(this,(function(r){return t={name:"InvalidObjectState",$fault:"client",$metadata:yi(e),AccessTier:void 0,StorageClass:void 0},void 0!==(n=e.body).AccessTier&&(t.AccessTier=n.AccessTier),void 0!==n.StorageClass&&(t.StorageClass=n.StorageClass),[2,t]}))}))},fi=function(e,t){return d(void 0,void 0,void 0,(function(){var t;return f(this,(function(n){return t={name:"NoSuchBucket",$fault:"client",$metadata:yi(e)},e.body,[2,t]}))}))},pi=function(e,t){return d(void 0,void 0,void 0,(function(){var t;return f(this,(function(n){return t={name:"NoSuchKey",$fault:"client",$metadata:yi(e)},e.body,[2,t]}))}))},hi=function(e,t){return d(void 0,void 0,void 0,(function(){var t;return f(this,(function(n){return t={name:"NoSuchUpload",$fault:"client",$metadata:yi(e)},e.body,[2,t]}))}))},vi=function(e,t){return d(void 0,void 0,void 0,(function(){var t;return f(this,(function(n){return t={name:"ObjectNotInActiveTierError",$fault:"client",$metadata:yi(e)},e.body,[2,t]}))}))},gi=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n=new Qr("CompletedPart");if(void 0!==e.ETag&&null!==e.ETag){var r=new Qr("ETag").addChildNode(new Xr(e.ETag)).withName("ETag");n.addChildNode(r)}return void 0!==e.PartNumber&&null!==e.PartNumber&&(r=new Qr("PartNumber").addChildNode(new Xr(String(e.PartNumber))).withName("PartNumber"),n.addChildNode(r)),n}(e).withName("member")}))},mi=function(e,t){var n={DisplayName:void 0,ID:void 0};return void 0!==e.DisplayName&&(n.DisplayName=e.DisplayName),void 0!==e.ID&&(n.ID=e.ID),n},yi=function(e){var t;return{httpStatusCode:e.statusCode,requestId:null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},bi=function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)},wi=function(e){return!(null==e||""===e||Object.getOwnPropertyNames(e).includes("length")&&0==e.length||Object.getOwnPropertyNames(e).includes("size")&&0==e.size)},_i=function(e,t){return function(e,t){return bi(e,t).then((function(e){return t.utf8Encoder(e)}))}(e,t).then((function(e){if(e.length){var t=Object(ei.parse)(e,{attributeNamePrefix:"",ignoreAttributes:!1,parseNodeValue:!1,tagValueProcessor:function(e,t){return e.replace(/&amp;/g,"&").replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<")}}),n=Object.keys(t)[0],r=t[n];return r["#text"]&&(r[n]=r["#text"],delete r["#text"]),Object(Jr.h)(r)}return{}}))},Si=function(e,t){return void 0!==t.Code?t.Code:404==e.statusCode?"NotFound":""},Ei=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,Ci=/(\d+\.){3}\d+/,Ai=/\.\./,Oi=/\./,Ii=/^(.+\.)?s3[.-]([a-z0-9-]+)\./,Ti=/^s3(-external-1)?\.amazonaws\.com$/,xi=function(e){return ki(e)?e.replace(/fips-|-fips/,""):e},Pi=function(e){var t=e.match(Ii);return[t[2],e.replace(new RegExp("^"+t[0]),"")]},ki=function(e){return e.startsWith("fips-")||e.endsWith("-fips")},Di=function(e,t){return e===t||xi(e)===t||e===xi(t)},Ni=function(e,t){if(void 0===t&&(t={tlsCompatible:!0}),e.length>=64||!/^[a-z0-9][a-z0-9.-]+[a-z0-9]$/.test(e)||/(\d+\.){3}\d+/.test(e)||/[.-]{2}/.test(e)||(null==t?void 0:t.tlsCompatible)&&Oi.test(e))throw new Error("Invalid DNS label "+e)},Li=function(e){var t=e.isCustomEndpoint,n=(e.baseHostname,e.dualstackEndpoint),r=e.accelerateEndpoint;if(t){if(n)throw new Error("Dualstack endpoint is not supported with custom endpoint");if(r)throw new Error("Accelerate endpoint is not supported with custom endpoint")}return function(e){return"string"==typeof e.bucketName}(e)?ji(Object(Zr.__assign)(Object(Zr.__assign)({},e),{isCustomEndpoint:t})):Mi(Object(Zr.__assign)(Object(Zr.__assign)({},e),{isCustomEndpoint:t}))},Mi=function(e){var t,n=e.isCustomEndpoint,r=e.baseHostname,i=Object(Zr.__read)(n?[e.clientRegion,r]:(t=r,Ti.test(t)?[t.replace(".amazonaws.com",""),"amazonaws.com"]:Pi(t)),2),o=i[0],s=i[1],a=e.pathStyleEndpoint,u=e.dualstackEndpoint,c=void 0!==u&&u,l=e.accelerateEndpoint,d=void 0!==l&&l,f=e.tlsCompatible,p=void 0===f||f,h=e.useArnRegion,v=e.bucketName,g=e.clientPartition,m=void 0===g?"aws":g,y=e.clientSigningRegion,b=void 0===y?o:y;!function(e){if(e.pathStyleEndpoint)throw new Error("Path-style S3 endpoint is not supported when bucket is an ARN");if(e.accelerateEndpoint)throw new Error("Accelerate endpoint is not supported when bucket is an ARN");if(!e.tlsCompatible)throw new Error("HTTPS is required when bucket is an ARN")}({pathStyleEndpoint:a,accelerateEndpoint:d,tlsCompatible:p});var w=v.service,_=v.partition,S=v.accountId,E=v.region,C=v.resource;!function(e){if("s3"!==e&&"s3-outposts"!==e)throw new Error("Expect 's3' or 's3-outposts' in ARN service component")}(w),function(e,t){if(e!==t.clientPartition)throw new Error('Partition in ARN is incompatible, got "'+e+'" but expected "'+t.clientPartition+'"')}(_,{clientPartition:m}),function(e){if(!/[0-9]{12}/.exec(e))throw new Error("Access point ARN accountID does not match regex '[0-9]{12}'")}(S),function(e,t){if(""===e)throw new Error("ARN region is empty");if(!t.useArnRegion&&!Di(e,t.clientRegion)&&!Di(e,t.clientSigningRegion))throw new Error("Region in ARN is incompatible, got "+e+" but expected "+t.clientRegion);if(t.useArnRegion&&ki(e))throw new Error("Endpoint does not support FIPS region")}(E,{useArnRegion:h,clientRegion:o,clientSigningRegion:b});var A=function(e){var t=e.includes(":")?":":"/",n=Object(Zr.__read)(e.split(t)),r=n[0],i=n.slice(1);if("accesspoint"===r){if(1!==i.length||""===i[0])throw new Error("Access Point ARN should have one resource accesspoint"+t+"{accesspointname}");return{accesspointName:i[0]}}if("outpost"===r){if(!i[0]||"accesspoint"!==i[1]||!i[2]||3!==i.length)throw new Error("Outpost ARN should have resource outpost"+t+"{outpostId}"+t+"accesspoint"+t+"{accesspointName}");var o=Object(Zr.__read)(i,3),s=o[0];return o[1],{outpostId:s,accesspointName:o[2]}}throw new Error("ARN resource should begin with 'accesspoint"+t+"' or 'outpost"+t+"'")}(C),O=A.accesspointName,I=A.outpostId;Ni(O+"-"+S,{tlsCompatible:p});var T=h?E:o,x=h?E:b;return I?(function(e){if("s3-outposts"!==e)throw new Error("Expect 's3-posts' in Outpost ARN service component")}(w),Ni(I,{tlsCompatible:p}),function(e){if(e)throw new Error("Dualstack endpoint is not supported with Outpost")}(c),function(e){if(ki(null!=e?e:""))throw new Error("FIPS region is not supported with Outpost, got "+e)}(T),{bucketEndpoint:!0,hostname:O+"-"+S+"."+I+(n?"":".s3-outposts."+T)+"."+s,signingRegion:x,signingService:"s3-outposts"}):(function(e){if("s3"!==e)throw new Error("Expect 's3' in Accesspoint ARN service component")}(w),{bucketEndpoint:!0,hostname:O+"-"+S+(n?"":".s3-accesspoint"+(c?".dualstack":"")+"."+T)+"."+s,signingRegion:x})},ji=function(e){var t,n=e.accelerateEndpoint,r=void 0!==n&&n,i=e.clientRegion,o=e.baseHostname,s=e.bucketName,a=e.dualstackEndpoint,u=void 0!==a&&a,c=e.pathStyleEndpoint,l=void 0!==c&&c,d=e.tlsCompatible,f=void 0===d||d,p=e.isCustomEndpoint,h=void 0!==p&&p,v=Object(Zr.__read)(h?[i,o]:(t=o,Ti.test(t)?["us-east-1","amazonaws.com"]:Pi(t)),2),g=v[0],m=v[1];return l||!function(e){return Ei.test(e)&&!Ci.test(e)&&!Ai.test(e)}(s)||f&&Oi.test(s)?{bucketEndpoint:!1,hostname:u?"s3.dualstack."+g+"."+m:o}:(r?o="s3-accelerate"+(u?".dualstack":"")+"."+m:u&&(o="s3.dualstack."+g+"."+m),{bucketEndpoint:!0,hostname:s+"."+o})},Ri={tags:["BUCKET_ENDPOINT"],name:"bucketEndpointMiddleware",relation:"before",toMiddleware:"hostHeaderMiddleware",override:!0},Ui=function(e){return{applyToStack:function(t){t.addRelativeTo(function(e){return function(t,n){return function(r){return Object(Zr.__awaiter)(void 0,void 0,void 0,(function(){var i,o,s,a,u,c,l,d,f,p,h,v,g,m,y,b,w,_;return Object(Zr.__generator)(this,(function(S){switch(S.label){case 0:return i=r.input.Bucket,o=e.bucketEndpoint,s=r.request,Yr.a.isInstance(s)?e.bucketEndpoint?(s.hostname=i,[3,7]):[3,1]:[3,8];case 1:return"string"==typeof(E=i)&&0===E.indexOf("arn:")&&E.split(":").length>=6?(a=function(e){var t=e.split(":");if(t.length<6||"arn"!==t[0])throw new Error("Malformed ARN");var n=Object(Zr.__read)(t);return{partition:n[1],service:n[2],region:n[3],accountId:n[4],resource:n.slice(5).join(":")}}(i),u=xi,[4,e.region()]):[3,5];case 2:return m=u.apply(void 0,[S.sent()]),[4,e.regionInfoProvider(m)];case 3:return c=S.sent()||{},l=c.partition,d=c.signingRegion,f=void 0===d?m:d,[4,e.useArnRegion()];case 4:return p=S.sent(),h=Li({bucketName:a,baseHostname:s.hostname,accelerateEndpoint:e.useAccelerateEndpoint,dualstackEndpoint:e.useDualstackEndpoint,pathStyleEndpoint:e.forcePathStyle,tlsCompatible:"https:"===s.protocol,useArnRegion:p,clientPartition:l,clientSigningRegion:f,clientRegion:m,isCustomEndpoint:e.isCustomEndpoint}),w=h.hostname,_=h.bucketEndpoint,v=h.signingRegion,g=h.signingService,v&&v!==f&&(n.signing_region=v),g&&"s3"!==g&&(n.signing_service=g),s.hostname=w,o=_,[3,7];case 5:return y=xi,[4,e.region()];case 6:m=y.apply(void 0,[S.sent()]),b=Li({bucketName:i,clientRegion:m,baseHostname:s.hostname,accelerateEndpoint:e.useAccelerateEndpoint,dualstackEndpoint:e.useDualstackEndpoint,pathStyleEndpoint:e.forcePathStyle,tlsCompatible:"https:"===s.protocol,isCustomEndpoint:e.isCustomEndpoint}),w=b.hostname,_=b.bucketEndpoint,s.hostname=w,o=_,S.label=7;case 7:o&&(s.path=s.path.replace(/^(\/)?[^\/]+/,""),""===s.path&&(s.path="/")),S.label=8;case 8:return[2,t(Object(Zr.__assign)(Object(Zr.__assign)({},r),{request:s}))]}var E}))}))}}}(e),Ri)}}},Bi={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},Fi={step:"build",tags:["USE_REGIONAL_ENDPOINT","S3"],name:"useRegionalEndpointMiddleware",override:!0},zi=function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)},qi=function(e,t){return zi(e,t).then((function(e){return t.utf8Encoder(e)}))},$i={relation:"after",toMiddleware:"deserializerMiddleware",tags:["THROW_200_EXCEPTIONS","S3"],name:"throw200ExceptionsMiddleware",override:!0},Ki=function(e){return{applyToStack:function(t){t.addRelativeTo(function(e){return function(t){return function(n){return Object(Zr.__awaiter)(void 0,void 0,void 0,(function(){var r,i,o,s,a,u,c;return Object(Zr.__generator)(this,(function(l){switch(l.label){case 0:return[4,t(n)];case 1:return r=l.sent(),i=r.response,Yr.b.isInstance(i)?(o=i.statusCode,s=i.body,o<200&&o>=300?[2,r]:[4,zi(s,e)]):[2,r];case 2:return a=l.sent(),[4,qi(a,e)];case 3:if(u=l.sent(),0===a.length)throw(c=new Error("S3 aborted request")).name="InternalError",c;return u&&u.match("<Error>")&&(i.statusCode=400),i.body=a,[2,r]}}))}))}}}(e),$i)}}},Vi=n(10),Gi={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},Hi=function(e){return{applyToStack:function(t){t.add(function(e){var t=this;return function(n){return function(r){return Object(Zr.__awaiter)(t,void 0,void 0,(function(){var t,i,o,s,a,u,c,l,d,f,p,h,v,g,m,y,b;return Object(Zr.__generator)(this,(function(w){switch(w.label){case 0:t=Object(Zr.__assign)({},r.input),i=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}],w.label=1;case 1:w.trys.push([1,6,7,8]),o=Object(Zr.__values)(i),s=o.next(),w.label=2;case 2:return s.done?[3,5]:(a=s.value,(u=t[a.target])?(c=ArrayBuffer.isView(u)?new Uint8Array(u.buffer,u.byteOffset,u.byteLength):"string"==typeof u?e.utf8Decoder(u):new Uint8Array(u),l=e.base64Encoder(c),(d=new e.md5).update(c),f=[Object(Zr.__assign)({},t)],(b={})[a.target]=l,p=a.hash,v=(h=e).base64Encoder,[4,d.digest()]):[3,4]);case 3:t=Zr.__assign.apply(void 0,f.concat([(b[p]=v.apply(h,[w.sent()]),b)])),w.label=4;case 4:return s=o.next(),[3,2];case 5:return[3,8];case 6:return g=w.sent(),m={error:g},[3,8];case 7:try{s&&!s.done&&(y=o.return)&&y.call(o)}finally{if(m)throw m.error}return[7];case 8:return[2,n(Object(Zr.__assign)(Object(Zr.__assign)({},r),{input:t}))]}}))}))}}}(e),Gi)}}},Wi=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return c(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(Vi.a)(t,this.serialize,this.deserialize)),this.middlewareStack.use(Ki(t)),this.middlewareStack.use(Hi(t)),this.middlewareStack.use(Ui(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"CopyObjectCommand",inputFilterSensitiveLog:x.filterSensitiveLog,outputFilterSensitiveLog:T.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return d(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,d;return f(this,(function(f){switch(f.label){case 0:if(n=l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l({},wi(e.ACL)&&{"x-amz-acl":e.ACL}),wi(e.CacheControl)&&{"cache-control":e.CacheControl}),wi(e.ContentDisposition)&&{"content-disposition":e.ContentDisposition}),wi(e.ContentEncoding)&&{"content-encoding":e.ContentEncoding}),wi(e.ContentLanguage)&&{"content-language":e.ContentLanguage}),wi(e.ContentType)&&{"content-type":e.ContentType}),wi(e.CopySource)&&{"x-amz-copy-source":e.CopySource}),wi(e.CopySourceIfMatch)&&{"x-amz-copy-source-if-match":e.CopySourceIfMatch}),wi(e.CopySourceIfModifiedSince)&&{"x-amz-copy-source-if-modified-since":Object(Jr.e)(e.CopySourceIfModifiedSince).toString()}),wi(e.CopySourceIfNoneMatch)&&{"x-amz-copy-source-if-none-match":e.CopySourceIfNoneMatch}),wi(e.CopySourceIfUnmodifiedSince)&&{"x-amz-copy-source-if-unmodified-since":Object(Jr.e)(e.CopySourceIfUnmodifiedSince).toString()}),wi(e.Expires)&&{expires:Object(Jr.e)(e.Expires).toString()}),wi(e.GrantFullControl)&&{"x-amz-grant-full-control":e.GrantFullControl}),wi(e.GrantRead)&&{"x-amz-grant-read":e.GrantRead}),wi(e.GrantReadACP)&&{"x-amz-grant-read-acp":e.GrantReadACP}),wi(e.GrantWriteACP)&&{"x-amz-grant-write-acp":e.GrantWriteACP}),wi(e.MetadataDirective)&&{"x-amz-metadata-directive":e.MetadataDirective}),wi(e.TaggingDirective)&&{"x-amz-tagging-directive":e.TaggingDirective}),wi(e.ServerSideEncryption)&&{"x-amz-server-side-encryption":e.ServerSideEncryption}),wi(e.StorageClass)&&{"x-amz-storage-class":e.StorageClass}),wi(e.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":e.WebsiteRedirectLocation}),wi(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),wi(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),wi(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),wi(e.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":e.SSEKMSKeyId}),wi(e.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":e.SSEKMSEncryptionContext}),wi(e.BucketKeyEnabled)&&{"x-amz-server-side-encryption-bucket-key-enabled":e.BucketKeyEnabled.toString()}),wi(e.CopySourceSSECustomerAlgorithm)&&{"x-amz-copy-source-server-side-encryption-customer-algorithm":e.CopySourceSSECustomerAlgorithm}),wi(e.CopySourceSSECustomerKey)&&{"x-amz-copy-source-server-side-encryption-customer-key":e.CopySourceSSECustomerKey}),wi(e.CopySourceSSECustomerKeyMD5)&&{"x-amz-copy-source-server-side-encryption-customer-key-md5":e.CopySourceSSECustomerKeyMD5}),wi(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),wi(e.Tagging)&&{"x-amz-tagging":e.Tagging}),wi(e.ObjectLockMode)&&{"x-amz-object-lock-mode":e.ObjectLockMode}),wi(e.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(e.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),wi(e.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":e.ObjectLockLegalHoldStatus}),wi(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),wi(e.ExpectedSourceBucketOwner)&&{"x-amz-source-expected-bucket-owner":e.ExpectedSourceBucketOwner}),void 0!==e.Metadata&&Object.keys(e.Metadata).reduce((function(t,n){var r;return l(l({},t),((r={})["x-amz-meta-"+n.toLowerCase()]=e.Metadata[n],r))}),{})),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Object(Jr.f)(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return Object(Jr.f)(e)})).join("/")),o={"x-id":"CopyObject"},[4,t.endpoint()];case 1:return s=f.sent(),a=s.hostname,u=s.protocol,c=void 0===u?"https":u,d=s.port,[2,new Yr.a({protocol:c,hostname:a,port:d,method:"PUT",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return d(void 0,void 0,void 0,(function(){var n,r;return f(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,ri(e,t)]:(n={$metadata:yi(e),BucketKeyEnabled:void 0,CopyObjectResult:void 0,CopySourceVersionId:void 0,Expiration:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==e.headers["x-amz-expiration"]&&(n.Expiration=e.headers["x-amz-expiration"]),void 0!==e.headers["x-amz-copy-source-version-id"]&&(n.CopySourceVersionId=e.headers["x-amz-copy-source-version-id"]),void 0!==e.headers["x-amz-version-id"]&&(n.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(n.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(n.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-context"]&&(n.SSEKMSEncryptionContext=e.headers["x-amz-server-side-encryption-context"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(n.BucketKeyEnabled="true"===e.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,_i(e.body,t)]);case 1:return r=i.sent(),n.CopyObjectResult=function(e,t){var n={ETag:void 0,LastModified:void 0};return void 0!==e.ETag&&(n.ETag=e.ETag),void 0!==e.LastModified&&(n.LastModified=new Date(e.LastModified)),n}(r),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(Jr.b),Ji=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return c(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(Vi.a)(t,this.serialize,this.deserialize)),this.middlewareStack.use(Hi(t)),this.middlewareStack.use(Ui(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetObjectCommand",inputFilterSensitiveLog:an.filterSensitiveLog,outputFilterSensitiveLog:sn.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return d(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,d;return f(this,(function(f){switch(f.label){case 0:if(n=l(l(l(l(l(l(l(l(l(l({},wi(e.IfMatch)&&{"if-match":e.IfMatch}),wi(e.IfModifiedSince)&&{"if-modified-since":Object(Jr.e)(e.IfModifiedSince).toString()}),wi(e.IfNoneMatch)&&{"if-none-match":e.IfNoneMatch}),wi(e.IfUnmodifiedSince)&&{"if-unmodified-since":Object(Jr.e)(e.IfUnmodifiedSince).toString()}),wi(e.Range)&&{range:e.Range}),wi(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),wi(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),wi(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),wi(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),wi(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Object(Jr.f)(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return Object(Jr.f)(e)})).join("/")),o=l(l(l(l(l(l(l(l({"x-id":"GetObject"},void 0!==e.ResponseCacheControl&&{"response-cache-control":e.ResponseCacheControl}),void 0!==e.ResponseContentDisposition&&{"response-content-disposition":e.ResponseContentDisposition}),void 0!==e.ResponseContentEncoding&&{"response-content-encoding":e.ResponseContentEncoding}),void 0!==e.ResponseContentLanguage&&{"response-content-language":e.ResponseContentLanguage}),void 0!==e.ResponseContentType&&{"response-content-type":e.ResponseContentType}),void 0!==e.ResponseExpires&&{"response-expires":(e.ResponseExpires.toISOString().split(".")[0]+"Z").toString()}),void 0!==e.VersionId&&{versionId:e.VersionId}),void 0!==e.PartNumber&&{partNumber:e.PartNumber.toString()}),[4,t.endpoint()];case 1:return s=f.sent(),a=s.hostname,u=s.protocol,c=void 0===u?"https":u,d=s.port,[2,new Yr.a({protocol:c,hostname:a,port:d,method:"GET",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return d(void 0,void 0,void 0,(function(){var n,r;return f(this,(function(i){return 200!==e.statusCode&&e.statusCode>=300?[2,si(e,t)]:(n={$metadata:yi(e),AcceptRanges:void 0,Body:void 0,BucketKeyEnabled:void 0,CacheControl:void 0,ContentDisposition:void 0,ContentEncoding:void 0,ContentLanguage:void 0,ContentLength:void 0,ContentRange:void 0,ContentType:void 0,DeleteMarker:void 0,ETag:void 0,Expiration:void 0,Expires:void 0,LastModified:void 0,Metadata:void 0,MissingMeta:void 0,ObjectLockLegalHoldStatus:void 0,ObjectLockMode:void 0,ObjectLockRetainUntilDate:void 0,PartsCount:void 0,ReplicationStatus:void 0,RequestCharged:void 0,Restore:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,StorageClass:void 0,TagCount:void 0,VersionId:void 0,WebsiteRedirectLocation:void 0},void 0!==e.headers["x-amz-delete-marker"]&&(n.DeleteMarker="true"===e.headers["x-amz-delete-marker"]),void 0!==e.headers["accept-ranges"]&&(n.AcceptRanges=e.headers["accept-ranges"]),void 0!==e.headers["x-amz-expiration"]&&(n.Expiration=e.headers["x-amz-expiration"]),void 0!==e.headers["x-amz-restore"]&&(n.Restore=e.headers["x-amz-restore"]),void 0!==e.headers["last-modified"]&&(n.LastModified=new Date(e.headers["last-modified"])),void 0!==e.headers["content-length"]&&(n.ContentLength=parseInt(e.headers["content-length"],10)),void 0!==e.headers.etag&&(n.ETag=e.headers.etag),void 0!==e.headers["x-amz-missing-meta"]&&(n.MissingMeta=parseInt(e.headers["x-amz-missing-meta"],10)),void 0!==e.headers["x-amz-version-id"]&&(n.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers["cache-control"]&&(n.CacheControl=e.headers["cache-control"]),void 0!==e.headers["content-disposition"]&&(n.ContentDisposition=e.headers["content-disposition"]),void 0!==e.headers["content-encoding"]&&(n.ContentEncoding=e.headers["content-encoding"]),void 0!==e.headers["content-language"]&&(n.ContentLanguage=e.headers["content-language"]),void 0!==e.headers["content-range"]&&(n.ContentRange=e.headers["content-range"]),void 0!==e.headers["content-type"]&&(n.ContentType=e.headers["content-type"]),void 0!==e.headers.expires&&(n.Expires=new Date(e.headers.expires)),void 0!==e.headers["x-amz-website-redirect-location"]&&(n.WebsiteRedirectLocation=e.headers["x-amz-website-redirect-location"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(n.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(n.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(n.BucketKeyEnabled="true"===e.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==e.headers["x-amz-storage-class"]&&(n.StorageClass=e.headers["x-amz-storage-class"]),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),void 0!==e.headers["x-amz-replication-status"]&&(n.ReplicationStatus=e.headers["x-amz-replication-status"]),void 0!==e.headers["x-amz-mp-parts-count"]&&(n.PartsCount=parseInt(e.headers["x-amz-mp-parts-count"],10)),void 0!==e.headers["x-amz-tagging-count"]&&(n.TagCount=parseInt(e.headers["x-amz-tagging-count"],10)),void 0!==e.headers["x-amz-object-lock-mode"]&&(n.ObjectLockMode=e.headers["x-amz-object-lock-mode"]),void 0!==e.headers["x-amz-object-lock-retain-until-date"]&&(n.ObjectLockRetainUntilDate=new Date(e.headers["x-amz-object-lock-retain-until-date"])),void 0!==e.headers["x-amz-object-lock-legal-hold"]&&(n.ObjectLockLegalHoldStatus=e.headers["x-amz-object-lock-legal-hold"]),Object.keys(e.headers).forEach((function(t){void 0===n.Metadata&&(n.Metadata={}),t.startsWith("x-amz-meta-")&&(n.Metadata[t.substring(11)]=e.headers[t])})),r=e.body,n.Body=r,[2,Promise.resolve(n)])}))}))}(e,t)},t}(Jr.b),Yi=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return c(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(Vi.a)(t,this.serialize,this.deserialize)),this.middlewareStack.use(Ui(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"DeleteObjectCommand",inputFilterSensitiveLog:Q.filterSensitiveLog,outputFilterSensitiveLog:Z.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return d(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,d;return f(this,(function(f){switch(f.label){case 0:if(n=l(l(l(l({},wi(e.MFA)&&{"x-amz-mfa":e.MFA}),wi(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),wi(e.BypassGovernanceRetention)&&{"x-amz-bypass-governance-retention":e.BypassGovernanceRetention.toString()}),wi(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Object(Jr.f)(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return Object(Jr.f)(e)})).join("/")),o=l({"x-id":"DeleteObject"},void 0!==e.VersionId&&{versionId:e.VersionId}),[4,t.endpoint()];case 1:return s=f.sent(),a=s.hostname,u=s.protocol,c=void 0===u?"https":u,d=s.port,[2,new Yr.a({protocol:c,hostname:a,port:d,method:"DELETE",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return d(void 0,void 0,void 0,(function(){var n;return f(this,(function(r){switch(r.label){case 0:return 204!==e.statusCode&&e.statusCode>=300?[2,oi(e,t)]:(n={$metadata:yi(e),DeleteMarker:void 0,RequestCharged:void 0,VersionId:void 0},void 0!==e.headers["x-amz-delete-marker"]&&(n.DeleteMarker="true"===e.headers["x-amz-delete-marker"]),void 0!==e.headers["x-amz-version-id"]&&(n.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,bi(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(Jr.b),Zi=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return c(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(Vi.a)(t,this.serialize,this.deserialize)),this.middlewareStack.use(Ui(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"ListObjectsV2Command",inputFilterSensitiveLog:Xn.filterSensitiveLog,outputFilterSensitiveLog:Qn.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return d(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,d;return f(this,(function(f){switch(f.label){case 0:if(n=l(l({},wi(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),wi(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",Object(Jr.f)(i)),o=l(l(l(l(l(l(l({"list-type":"2"},void 0!==e.Delimiter&&{delimiter:e.Delimiter}),void 0!==e.EncodingType&&{"encoding-type":e.EncodingType}),void 0!==e.MaxKeys&&{"max-keys":e.MaxKeys.toString()}),void 0!==e.Prefix&&{prefix:e.Prefix}),void 0!==e.ContinuationToken&&{"continuation-token":e.ContinuationToken}),void 0!==e.FetchOwner&&{"fetch-owner":e.FetchOwner.toString()}),void 0!==e.StartAfter&&{"start-after":e.StartAfter}),[4,t.endpoint()];case 1:return s=f.sent(),a=s.hostname,u=s.protocol,c=void 0===u?"https":u,d=s.port,[2,new Yr.a({protocol:c,hostname:a,port:d,method:"GET",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return d(void 0,void 0,void 0,(function(){var n,r;return f(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,ai(e,t)]:(n={$metadata:yi(e),CommonPrefixes:void 0,Contents:void 0,ContinuationToken:void 0,Delimiter:void 0,EncodingType:void 0,IsTruncated:void 0,KeyCount:void 0,MaxKeys:void 0,Name:void 0,NextContinuationToken:void 0,Prefix:void 0,StartAfter:void 0},[4,_i(e.body,t)]);case 1:return""===(r=i.sent()).CommonPrefixes&&(n.CommonPrefixes=[]),void 0!==r.CommonPrefixes&&(n.CommonPrefixes=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n={Prefix:void 0};return void 0!==e.Prefix&&(n.Prefix=e.Prefix),n}(e)}))}(Object(Jr.g)(r.CommonPrefixes))),""===r.Contents&&(n.Contents=[]),void 0!==r.Contents&&(n.Contents=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n={Key:void 0,LastModified:void 0,ETag:void 0,Size:void 0,StorageClass:void 0,Owner:void 0};return void 0!==e.Key&&(n.Key=e.Key),void 0!==e.LastModified&&(n.LastModified=new Date(e.LastModified)),void 0!==e.ETag&&(n.ETag=e.ETag),void 0!==e.Size&&(n.Size=parseInt(e.Size)),void 0!==e.StorageClass&&(n.StorageClass=e.StorageClass),void 0!==e.Owner&&(n.Owner=mi(e.Owner,t)),n}(e,t)}))}(Object(Jr.g)(r.Contents),t)),void 0!==r.ContinuationToken&&(n.ContinuationToken=r.ContinuationToken),void 0!==r.Delimiter&&(n.Delimiter=r.Delimiter),void 0!==r.EncodingType&&(n.EncodingType=r.EncodingType),void 0!==r.IsTruncated&&(n.IsTruncated="true"==r.IsTruncated),void 0!==r.KeyCount&&(n.KeyCount=parseInt(r.KeyCount)),void 0!==r.MaxKeys&&(n.MaxKeys=parseInt(r.MaxKeys)),void 0!==r.Name&&(n.Name=r.Name),void 0!==r.NextContinuationToken&&(n.NextContinuationToken=r.NextContinuationToken),void 0!==r.Prefix&&(n.Prefix=r.Prefix),void 0!==r.StartAfter&&(n.StartAfter=r.StartAfter),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(Jr.b),Qi=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,Xi)},Xi=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()};function eo(e){var t,n,r=[];try{for(var i=Object(Zr.__values)(Object.keys(e).sort()),o=i.next();!o.done;o=i.next()){var s=o.value,a=e[s];if(s=Qi(s),Array.isArray(a))for(var u=0,c=a.length;u<c;u++)r.push(s+"="+Qi(a[u]));else{var l=s;(a||"string"==typeof a)&&(l+="="+Qi(a)),r.push(l)}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r.join("&")}function to(e){var t=e.port,n=e.query,r=e.protocol,i=e.path,o=e.hostname;r&&":"!==r.substr(-1)&&(r+=":"),t&&(o+=":"+t),i&&"/"!==i.charAt(0)&&(i="/"+i);var s=n?eo(n):"";return s&&"?"!==s[0]&&(s="?"+s),r+"//"+o+i+s}function no(e,t){return Object(Zr.__awaiter)(this,void 0,void 0,(function(){var n,r,i=this;return Object(Zr.__generator)(this,(function(o){switch(o.label){case 0:return n=function(e){return function(e){return Object(Zr.__awaiter)(i,void 0,void 0,(function(){return Object(Zr.__generator)(this,(function(t){return[2,{output:{request:e.request},response:void 0}]}))}))}},(r=e.middlewareStack.clone()).add(n,{step:"build",priority:"low"}),[4,t.resolveMiddleware(r,e.config,void 0)(t).then((function(e){return e.output.request}))];case 1:return[2,o.sent()]}}))}))}for(var ro={},io={},oo=0;oo<256;oo++){var so=oo.toString(16).toLowerCase();1===so.length&&(so="0"+so),ro[oo]=so,io[so]=oo}function ao(e){for(var t="",n=0;n<e.byteLength;n++)t+=ro[e[n]];return t}var uo="X-Amz-Date".toLowerCase(),co=["authorization",uo,"date"],lo="X-Amz-Signature".toLowerCase(),fo="X-Amz-Security-Token".toLowerCase(),po={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},ho=/^proxy-/,vo=/^sec-/,go="AWS4-HMAC-SHA256-PAYLOAD",mo={},yo=[];function bo(e,t,n){return e+"/"+t+"/"+n+"/aws4_request"}function wo(e,t,n){var r=new e(t);return r.update(n),r.digest()}function _o(e,t,n){var r,i,o=e.headers,s={};try{for(var a=Object(Zr.__values)(Object.keys(o).sort()),u=a.next();!u.done;u=a.next()){var c=u.value,l=c.toLowerCase();(l in po||(null==t?void 0:t.has(l))||ho.test(l)||vo.test(l))&&(!n||n&&!n.has(l))||(s[l]=o[c].trim().replace(/\s+/g," "))}}catch(e){r={error:e}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return s}var So=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,Eo)},Eo=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()};function Co(e,t){var n=e.headers,r=e.body;return Object(Zr.__awaiter)(this,void 0,void 0,(function(){var e,i,o,s,a,u,c;return Object(Zr.__generator)(this,(function(l){switch(l.label){case 0:try{for(e=Object(Zr.__values)(Object.keys(n)),i=e.next();!i.done;i=e.next())if("x-amz-content-sha256"===(o=i.value).toLowerCase())return[2,n[o]]}catch(e){u={error:e}}finally{try{i&&!i.done&&(c=e.return)&&c.call(e)}finally{if(u)throw u.error}}return null!=r?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof r||ArrayBuffer.isView(r)||(d=r,"function"==typeof ArrayBuffer&&d instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(d))?((s=new t).update(r),a=ao,[4,s.digest()]):[3,3];case 2:return[2,a.apply(void 0,[l.sent()])];case 3:return[2,"UNSIGNED-PAYLOAD"]}var d}))}))}function Ao(e){var t=e.headers,n=e.query,r=Object(Zr.__rest)(e,["headers","query"]);return Object(Zr.__assign)(Object(Zr.__assign)({},r),{headers:Object(Zr.__assign)({},t),query:n?Oo(n):void 0})}function Oo(e){return Object.keys(e).reduce((function(t,n){var r,i=e[n];return Object(Zr.__assign)(Object(Zr.__assign)({},t),((r={})[n]=Array.isArray(i)?Object(Zr.__spread)(i):i,r))}),{})}function Io(e){var t,n;e="function"==typeof e.clone?e.clone():Ao(e);try{for(var r=Object(Zr.__values)(Object.keys(e.headers)),i=r.next();!i.done;i=r.next()){var o=i.value;co.indexOf(o.toLowerCase())>-1&&delete e.headers[o]}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return e}var To,xo,Po,ko=function(){function e(e){var t=e.applyChecksum,n=e.credentials,r=e.region,i=e.service,o=e.sha256,s=e.uriEscapePath,a=void 0===s||s;this.service=i,this.sha256=o,this.uriEscapePath=a,this.applyChecksum="boolean"!=typeof t||t,this.regionProvider=Lo(r),this.credentialProvider=Mo(n)}return e.prototype.presign=function(e,t){return void 0===t&&(t={}),Object(Zr.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,d,f,p,h,v,g,m,y,b,w,_,S,E,C,A;return Object(Zr.__generator)(this,(function(O){switch(O.label){case 0:return n=t.signingDate,r=void 0===n?new Date:n,i=t.expiresIn,o=void 0===i?3600:i,s=t.unsignableHeaders,a=t.unhoistableHeaders,u=t.signableHeaders,c=t.signingRegion,l=t.signingService,[4,this.credentialProvider()];case 1:return d=O.sent(),null==c?[3,2]:(p=c,[3,4]);case 2:return[4,this.regionProvider()];case 3:p=O.sent(),O.label=4;case 4:return f=p,h=Do(r),v=h.longDate,g=h.shortDate,o>604800?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(m=bo(g,f,null!=l?l:this.service),y=function(e,t){var n,r,i;void 0===t&&(t={});var o="function"==typeof e.clone?e.clone():Ao(e),s=o.headers,a=o.query,u=void 0===a?{}:a;try{for(var c=Object(Zr.__values)(Object.keys(s)),l=c.next();!l.done;l=c.next()){var d=l.value,f=d.toLowerCase();"x-amz-"!==f.substr(0,6)||(null===(i=t.unhoistableHeaders)||void 0===i?void 0:i.has(f))||(u[d]=s[d],delete s[d])}}catch(e){n={error:e}}finally{try{l&&!l.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}return Object(Zr.__assign)(Object(Zr.__assign)({},e),{headers:s,query:u})}(Io(e),{unhoistableHeaders:a}),d.sessionToken&&(y.query["X-Amz-Security-Token"]=d.sessionToken),y.query["X-Amz-Algorithm"]="AWS4-HMAC-SHA256",y.query["X-Amz-Credential"]=d.accessKeyId+"/"+m,y.query["X-Amz-Date"]=v,y.query["X-Amz-Expires"]=o.toString(10),b=_o(y,s,u),y.query["X-Amz-SignedHeaders"]=No(b),w=y.query,_="X-Amz-Signature",S=this.getSignature,E=[v,m,this.getSigningKey(d,f,g,l)],C=this.createCanonicalRequest,A=[y,b],[4,Co(e,this.sha256)]);case 5:return[4,S.apply(this,E.concat([C.apply(this,A.concat([O.sent()]))]))];case 6:return w[_]=O.sent(),[2,y]}}))}))},e.prototype.sign=function(e,t){return Object(Zr.__awaiter)(this,void 0,void 0,(function(){return Object(Zr.__generator)(this,(function(n){return"string"==typeof e?[2,this.signString(e,t)]:e.headers&&e.payload?[2,this.signEvent(e,t)]:[2,this.signRequest(e,t)]}))}))},e.prototype.signEvent=function(e,t){var n=e.headers,r=e.payload,i=t.signingDate,o=void 0===i?new Date:i,s=t.priorSignature,a=t.signingRegion,u=t.signingService;return Object(Zr.__awaiter)(this,void 0,void 0,(function(){var e,t,i,c,l,d,f,p,h,v,g;return Object(Zr.__generator)(this,(function(m){switch(m.label){case 0:return null==a?[3,1]:(t=a,[3,3]);case 1:return[4,this.regionProvider()];case 2:t=m.sent(),m.label=3;case 3:return e=t,i=Do(o),c=i.shortDate,l=i.longDate,d=bo(c,e,null!=u?u:this.service),[4,Co({headers:{},body:r},this.sha256)];case 4:return f=m.sent(),(p=new this.sha256).update(n),v=ao,[4,p.digest()];case 5:return h=v.apply(void 0,[m.sent()]),g=[go,l,d,s,h,f].join("\n"),[2,this.signString(g,{signingDate:o,signingRegion:e,signingService:u})]}}))}))},e.prototype.signString=function(e,t){var n=void 0===t?{}:t,r=n.signingDate,i=void 0===r?new Date:r,o=n.signingRegion,s=n.signingService;return Object(Zr.__awaiter)(this,void 0,void 0,(function(){var t,n,r,a,u,c,l,d;return Object(Zr.__generator)(this,(function(f){switch(f.label){case 0:return[4,this.credentialProvider()];case 1:return t=f.sent(),null==o?[3,2]:(r=o,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=f.sent(),f.label=4;case 4:return n=r,a=Do(i).shortDate,l=(c=this.sha256).bind,[4,this.getSigningKey(t,n,a,s)];case 5:return(u=new(l.apply(c,[void 0,f.sent()]))).update(e),d=ao,[4,u.digest()];case 6:return[2,d.apply(void 0,[f.sent()])]}}))}))},e.prototype.signRequest=function(e,t){var n=void 0===t?{}:t,r=n.signingDate,i=void 0===r?new Date:r,o=n.signableHeaders,s=n.unsignableHeaders,a=n.signingRegion,u=n.signingService;return Object(Zr.__awaiter)(this,void 0,void 0,(function(){var t,n,r,c,l,d,f,p,h,v,g;return Object(Zr.__generator)(this,(function(m){switch(m.label){case 0:return[4,this.credentialProvider()];case 1:return t=m.sent(),null==a?[3,2]:(r=a,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=m.sent(),m.label=4;case 4:return n=r,c=Io(e),l=Do(i),d=l.longDate,f=l.shortDate,p=bo(f,n,null!=u?u:this.service),c.headers[uo]=d,t.sessionToken&&(c.headers[fo]=t.sessionToken),[4,Co(c,this.sha256)];case 5:return h=m.sent(),!function(e,t){var n,r;e=e.toLowerCase();try{for(var i=Object(Zr.__values)(Object.keys(t)),o=i.next();!o.done;o=i.next())if(e===o.value.toLowerCase())return!0}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return!1}("x-amz-content-sha256",c.headers)&&this.applyChecksum&&(c.headers["x-amz-content-sha256"]=h),v=_o(c,s,o),[4,this.getSignature(d,p,this.getSigningKey(t,n,f,u),this.createCanonicalRequest(c,v,h))];case 6:return g=m.sent(),c.headers.authorization="AWS4-HMAC-SHA256 Credential="+t.accessKeyId+"/"+p+", SignedHeaders="+No(v)+", Signature="+g,[2,c]}}))}))},e.prototype.createCanonicalRequest=function(e,t,n){var r=Object.keys(t).sort();return e.method+"\n"+this.getCanonicalPath(e)+"\n"+function(e){var t,n,r=e.query,i=void 0===r?{}:r,o=[],s={},a=function(e){if(e.toLowerCase()===lo)return"continue";o.push(e);var t=i[e];"string"==typeof t?s[e]=So(e)+"="+So(t):Array.isArray(t)&&(s[e]=t.slice(0).sort().reduce((function(t,n){return t.concat([So(e)+"="+So(n)])}),[]).join("&"))};try{for(var u=Object(Zr.__values)(Object.keys(i).sort()),c=u.next();!c.done;c=u.next())a(c.value)}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return o.map((function(e){return s[e]})).filter((function(e){return e})).join("&")}(e)+"\n"+r.map((function(e){return e+":"+t[e]})).join("\n")+"\n\n"+r.join(";")+"\n"+n},e.prototype.createStringToSign=function(e,t,n){return Object(Zr.__awaiter)(this,void 0,void 0,(function(){var r,i;return Object(Zr.__generator)(this,(function(o){switch(o.label){case 0:return(r=new this.sha256).update(n),[4,r.digest()];case 1:return i=o.sent(),[2,"AWS4-HMAC-SHA256\n"+e+"\n"+t+"\n"+ao(i)]}}))}))},e.prototype.getCanonicalPath=function(e){var t=e.path;return this.uriEscapePath?"/"+encodeURIComponent(t.replace(/^\//,"")).replace(/%2F/g,"/"):t},e.prototype.getSignature=function(e,t,n,r){return Object(Zr.__awaiter)(this,void 0,void 0,(function(){var i,o,s,a,u;return Object(Zr.__generator)(this,(function(c){switch(c.label){case 0:return[4,this.createStringToSign(e,t,r)];case 1:return i=c.sent(),a=(s=this.sha256).bind,[4,n];case 2:return(o=new(a.apply(s,[void 0,c.sent()]))).update(i),u=ao,[4,o.digest()];case 3:return[2,u.apply(void 0,[c.sent()])]}}))}))},e.prototype.getSigningKey=function(e,t,n,r){return function(e,t,n,r,i){return Object(Zr.__awaiter)(void 0,void 0,void 0,(function(){var o,s,a,u,c,l,d,f,p;return Object(Zr.__generator)(this,(function(h){switch(h.label){case 0:return[4,wo(e,t.secretAccessKey,t.accessKeyId)];case 1:if(o=h.sent(),(s=n+":"+r+":"+i+":"+ao(o)+":"+t.sessionToken)in mo)return[2,mo[s]];for(yo.push(s);yo.length>50;)delete mo[yo.shift()];a="AWS4"+t.secretAccessKey,h.label=2;case 2:h.trys.push([2,7,8,9]),u=Object(Zr.__values)([n,r,i,"aws4_request"]),c=u.next(),h.label=3;case 3:return c.done?[3,6]:(l=c.value,[4,wo(e,a,l)]);case 4:a=h.sent(),h.label=5;case 5:return c=u.next(),[3,3];case 6:return[3,9];case 7:return d=h.sent(),f={error:d},[3,9];case 8:try{c&&!c.done&&(p=u.return)&&p.call(u)}finally{if(f)throw f.error}return[7];case 9:return[2,mo[s]=a]}}))}))}(this.sha256,e,n,t,r||this.service)},e}(),Do=function(e){var t=function(e){return function(e){return"number"==typeof e?new Date(1e3*e):"string"==typeof e?Number(e)?new Date(1e3*Number(e)):new Date(e):e}(e).toISOString().replace(/\.\d{3}Z$/,"Z")}(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.substr(0,8)}},No=function(e){return Object.keys(e).sort().join(";")},Lo=function(e){if("string"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e},Mo=function(e){if("object"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e},jo=function(){function e(e){var t=Object(Zr.__assign)({service:e.signingName||e.service||"s3",uriEscapePath:e.uriEscapePath||!1},e);this.signer=new ko(t)}return e.prototype.presign=function(e,t){void 0===t&&(t={});var n=t.unsignableHeaders,r=void 0===n?new Set:n,i=t.unhoistableHeaders,o=void 0===i?new Set:i,s=Object(Zr.__rest)(t,["unsignableHeaders","unhoistableHeaders"]);return Object(Zr.__awaiter)(this,void 0,void 0,(function(){return Object(Zr.__generator)(this,(function(t){return r.add("content-type"),Object.keys(e.headers).map((function(e){return e.toLowerCase()})).filter((function(e){return e.startsWith("x-amz-server-side-encryption")})).forEach((function(e){o.add(e)})),e.headers["X-Amz-Content-Sha256"]="UNSIGNED-PAYLOAD",e.headers.host||(e.headers.host=e.hostname),[2,this.signer.presign(e,Object(Zr.__assign)({expiresIn:900,unsignableHeaders:r,unhoistableHeaders:o},s))]}))}))},e}(),Ro=n(36),Uo=n.n(Ro),Bo=n(49);!function(e){e.NO_CREDENTIALS="No credentials",e.NO_SRC_KEY='source param should be an object with the property "key" with value of type string',e.NO_DEST_KEY='destination param should be an object with the property "key" with value of type string',e.INVALID_BLOB="Object must be an instance of Blob"}(To||(To={})),function(e){e.CLEANUP_FAILED="Multipart copy clean up failed",e.NO_OBJECT_FOUND="Object does not exist",e.INVALID_QUEUESIZE="Queue size must be a positive number",e.NO_COPYSOURCE="You must specify a copy source",e.MAX_NUM_PARTS_EXCEEDED="Only a maximum of 10000 parts are allowed"}(xo||(xo={})),function(e){e.UPLOAD_PAUSED_MESSAGE="paused"}(Po||(Po={}));var Fo=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},zo=new r.a("axios-http-handler"),qo=function(e,t){var n,r;try{for(var i=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(Object.entries(e)),o=i.next();!o.done;o=i.next()){var s=Fo(o.value,2),a=s[0],u=s[1];a!==t&&a.toUpperCase()===t.toUpperCase()&&(e[t]=u,delete e[a])}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},$o=[function(e,t){return"undefined"!=typeof Blob&&e instanceof Blob?(qo(t,"Content-Type"),qo(t,"Accept"),e):Uo.a.defaults.transformRequest[0].call(null,e,t)}],Ko=function(){function e(e,t,n){void 0===e&&(e={}),this.httpOptions=e,this.emitter=t,this.cancelTokenSource=n}return e.prototype.destroy=function(){},e.prototype.handle=function(e,t){var n=this.httpOptions.requestTimeout,r=t.emitter||this.emitter,i=e.path;if(e.query){var o=eo(e.query);o&&(i+="?"+o)}var s=e.port,a=e.protocol+"//"+e.hostname+(s?":"+s:"")+i,u={};u.url=a,u.method=e.method,u.headers=e.headers,delete u.headers.host,e.body?u.data=e.body:u.headers[Object.keys(u.headers).find((function(e){return"content-type"===e.toLowerCase()}))]&&(u.data=null),r&&(u.onUploadProgress=function(e){r.emit("sendUploadProgress",e),zo.debug(e)},u.onDownloadProgress=function(e){r.emit("sendDownloadProgress",e),zo.debug(e)}),this.cancelTokenSource&&(u.cancelToken=this.cancelTokenSource.token),t.cancelTokenSource&&(u.cancelToken=t.cancelTokenSource.token),u.responseType="blob",Bo.a.isReactNative&&(u.transformRequest=$o);var c=[Uo.a.request(u).then((function(e){return{response:new Yr.b({headers:e.headers,statusCode:e.status,body:e.data})}})).catch((function(e){var t,n;if(e.message!==Po.UPLOAD_PAUSED_MESSAGE&&zo.error(e.message),Uo.a.isCancel(e)||!function(e){return void 0!==e&&Object.prototype.hasOwnProperty.call(e,"response")&&void 0!==e.response&&Object.prototype.hasOwnProperty.call(e.response,"status")&&"number"==typeof e.response.status}(e))throw e;return{response:new Yr.b({statusCode:e.response.status,body:null===(t=e.response)||void 0===t?void 0:t.data,headers:null===(n=e.response)||void 0===n?void 0:n.headers})}})),Vo(n)];return Promise.race(c)},e}();function Vo(e){return void 0===e&&(e=0),new Promise((function(t,n){e&&setTimeout((function(){var t=new Error("Request did not complete within "+e+" ms");t.name="TimeoutError",n(t)}),e)}))}var Go="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",Ho=function(e,t,n,r,i){if(e){var o={attrs:n};r&&(o.metrics=r),s.a.dispatch("storage",{event:t,data:o,message:i},"Storage",Go)}},Wo=n(185),Jo=n(42),Yo=n(97),Zo=n(22);function Qo(e,t,n){return void 0===n&&(n=1048576),new Promise((function(r,i){var o=new FileReader;o.addEventListener("error",i),o.addEventListener("abort",i);var s=e.size,a=0;function u(){a>=s?r():o.readAsArrayBuffer(e.slice(a,Math.min(s,a+n)))}o.addEventListener("load",(function(e){var n=e.target.result;t(new Uint8Array(n)),a+=n.byteLength,u()})),u()}))}var Xo=n(45),es=n(16),ts=[1732584193,4023233417,2562383102,271733878],ns=function(){function e(){this.state=Uint32Array.from(ts),this.buffer=new DataView(new ArrayBuffer(64)),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(!function(e){return"string"==typeof e?0===e.length:0===e.byteLength}(e)){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=function(e){return"string"==typeof e?Object(es.a)(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}(e),n=0,r=t.byteLength;for(this.bytesHashed+=r;r>0;)this.buffer.setUint8(this.bufferLength++,t[n++]),r--,64===this.bufferLength&&(this.hashBuffer(),this.bufferLength=0)}},e.prototype.digest=function(){return Object(Zr.__awaiter)(this,void 0,void 0,(function(){var e,t,n,r,i,o,s;return Object(Zr.__generator)(this,(function(a){if(!this.finished){if(t=(e=this).buffer,n=e.bufferLength,r=e.bytesHashed,i=8*r,t.setUint8(this.bufferLength++,128),n%64>=56){for(s=this.bufferLength;s<64;s++)t.setUint8(s,0);this.hashBuffer(),this.bufferLength=0}for(s=this.bufferLength;s<56;s++)t.setUint8(s,0);t.setUint32(56,i>>>0,!0),t.setUint32(60,Math.floor(i/4294967296),!0),this.hashBuffer(),this.finished=!0}for(o=new DataView(new ArrayBuffer(16)),s=0;s<4;s++)o.setUint32(4*s,this.state[s],!0);return[2,new Uint8Array(o.buffer,o.byteOffset,o.byteLength)]}))}))},e.prototype.hashBuffer=function(){var e=this.buffer,t=this.state,n=t[0],r=t[1],i=t[2],o=t[3];n=is(n,r,i,o,e.getUint32(0,!0),7,3614090360),o=is(o,n,r,i,e.getUint32(4,!0),12,3905402710),i=is(i,o,n,r,e.getUint32(8,!0),17,606105819),r=is(r,i,o,n,e.getUint32(12,!0),22,3250441966),n=is(n,r,i,o,e.getUint32(16,!0),7,4118548399),o=is(o,n,r,i,e.getUint32(20,!0),12,1200080426),i=is(i,o,n,r,e.getUint32(24,!0),17,2821735955),r=is(r,i,o,n,e.getUint32(28,!0),22,4249261313),n=is(n,r,i,o,e.getUint32(32,!0),7,1770035416),o=is(o,n,r,i,e.getUint32(36,!0),12,2336552879),i=is(i,o,n,r,e.getUint32(40,!0),17,4294925233),r=is(r,i,o,n,e.getUint32(44,!0),22,2304563134),n=is(n,r,i,o,e.getUint32(48,!0),7,1804603682),o=is(o,n,r,i,e.getUint32(52,!0),12,4254626195),i=is(i,o,n,r,e.getUint32(56,!0),17,2792965006),n=os(n,r=is(r,i,o,n,e.getUint32(60,!0),22,1236535329),i,o,e.getUint32(4,!0),5,4129170786),o=os(o,n,r,i,e.getUint32(24,!0),9,3225465664),i=os(i,o,n,r,e.getUint32(44,!0),14,643717713),r=os(r,i,o,n,e.getUint32(0,!0),20,3921069994),n=os(n,r,i,o,e.getUint32(20,!0),5,3593408605),o=os(o,n,r,i,e.getUint32(40,!0),9,38016083),i=os(i,o,n,r,e.getUint32(60,!0),14,3634488961),r=os(r,i,o,n,e.getUint32(16,!0),20,3889429448),n=os(n,r,i,o,e.getUint32(36,!0),5,568446438),o=os(o,n,r,i,e.getUint32(56,!0),9,3275163606),i=os(i,o,n,r,e.getUint32(12,!0),14,4107603335),r=os(r,i,o,n,e.getUint32(32,!0),20,1163531501),n=os(n,r,i,o,e.getUint32(52,!0),5,2850285829),o=os(o,n,r,i,e.getUint32(8,!0),9,4243563512),i=os(i,o,n,r,e.getUint32(28,!0),14,1735328473),n=ss(n,r=os(r,i,o,n,e.getUint32(48,!0),20,2368359562),i,o,e.getUint32(20,!0),4,4294588738),o=ss(o,n,r,i,e.getUint32(32,!0),11,2272392833),i=ss(i,o,n,r,e.getUint32(44,!0),16,1839030562),r=ss(r,i,o,n,e.getUint32(56,!0),23,4259657740),n=ss(n,r,i,o,e.getUint32(4,!0),4,2763975236),o=ss(o,n,r,i,e.getUint32(16,!0),11,1272893353),i=ss(i,o,n,r,e.getUint32(28,!0),16,4139469664),r=ss(r,i,o,n,e.getUint32(40,!0),23,3200236656),n=ss(n,r,i,o,e.getUint32(52,!0),4,681279174),o=ss(o,n,r,i,e.getUint32(0,!0),11,3936430074),i=ss(i,o,n,r,e.getUint32(12,!0),16,3572445317),r=ss(r,i,o,n,e.getUint32(24,!0),23,76029189),n=ss(n,r,i,o,e.getUint32(36,!0),4,3654602809),o=ss(o,n,r,i,e.getUint32(48,!0),11,3873151461),i=ss(i,o,n,r,e.getUint32(60,!0),16,530742520),n=as(n,r=ss(r,i,o,n,e.getUint32(8,!0),23,3299628645),i,o,e.getUint32(0,!0),6,4096336452),o=as(o,n,r,i,e.getUint32(28,!0),10,1126891415),i=as(i,o,n,r,e.getUint32(56,!0),15,2878612391),r=as(r,i,o,n,e.getUint32(20,!0),21,4237533241),n=as(n,r,i,o,e.getUint32(48,!0),6,1700485571),o=as(o,n,r,i,e.getUint32(12,!0),10,2399980690),i=as(i,o,n,r,e.getUint32(40,!0),15,4293915773),r=as(r,i,o,n,e.getUint32(4,!0),21,2240044497),n=as(n,r,i,o,e.getUint32(32,!0),6,1873313359),o=as(o,n,r,i,e.getUint32(60,!0),10,4264355552),i=as(i,o,n,r,e.getUint32(24,!0),15,2734768916),r=as(r,i,o,n,e.getUint32(52,!0),21,1309151649),n=as(n,r,i,o,e.getUint32(16,!0),6,4149444226),o=as(o,n,r,i,e.getUint32(44,!0),10,3174756917),i=as(i,o,n,r,e.getUint32(8,!0),15,718787259),r=as(r,i,o,n,e.getUint32(36,!0),21,3951481745),t[0]=n+t[0]&4294967295,t[1]=r+t[1]&4294967295,t[2]=i+t[2]&4294967295,t[3]=o+t[3]&4294967295},e}();function rs(e,t,n,r,i,o){return((t=(t+e&4294967295)+(r+o&4294967295)&4294967295)<<i|t>>>32-i)+n&4294967295}function is(e,t,n,r,i,o,s){return rs(t&n|~t&r,e,t,i,o,s)}function os(e,t,n,r,i,o,s){return rs(t&r|n&~r,e,t,i,o,s)}function ss(e,t,n,r,i,o,s){return rs(t^n^r,e,t,i,o,s)}function as(e,t,n,r,i,o,s){return rs(n^(t|~r),e,t,i,o,s)}var us,cs,ls,ds,fs,ps,hs,vs,gs,ms,ys,bs,ws,_s,Ss,Es,Cs,As,Os,Is,Ts,xs,Ps,ks,Ds,Ns,Ls,Ms,js,Rs,Us,Bs,Fs,zs,qs=n(14),$s=n(18),Ks=n(43),Vs=n(44),Gs=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),Hs=new Set(["cn-north-1","cn-northwest-1"]),Ws=new Set(["us-iso-east-1"]),Js=new Set(["us-isob-east-1"]),Ys=new Set(["us-gov-east-1","us-gov-west-1"]),Zs={apiVersion:"2006-03-01",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,t){var n=void 0;switch(e){case"af-south-1":n={hostname:"s3.af-south-1.amazonaws.com",partition:"aws"};break;case"ap-east-1":n={hostname:"s3.ap-east-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-1":n={hostname:"s3.ap-northeast-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-2":n={hostname:"s3.ap-northeast-2.amazonaws.com",partition:"aws"};break;case"ap-south-1":n={hostname:"s3.ap-south-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-1":n={hostname:"s3.ap-southeast-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-2":n={hostname:"s3.ap-southeast-2.amazonaws.com",partition:"aws"};break;case"aws-global":n={hostname:"s3.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"ca-central-1":n={hostname:"s3.ca-central-1.amazonaws.com",partition:"aws"};break;case"cn-north-1":n={hostname:"s3.cn-north-1.amazonaws.com.cn",partition:"aws-cn"};break;case"cn-northwest-1":n={hostname:"s3.cn-northwest-1.amazonaws.com.cn",partition:"aws-cn"};break;case"eu-central-1":n={hostname:"s3.eu-central-1.amazonaws.com",partition:"aws"};break;case"eu-north-1":n={hostname:"s3.eu-north-1.amazonaws.com",partition:"aws"};break;case"eu-south-1":n={hostname:"s3.eu-south-1.amazonaws.com",partition:"aws"};break;case"eu-west-1":n={hostname:"s3.eu-west-1.amazonaws.com",partition:"aws"};break;case"eu-west-2":n={hostname:"s3.eu-west-2.amazonaws.com",partition:"aws"};break;case"eu-west-3":n={hostname:"s3.eu-west-3.amazonaws.com",partition:"aws"};break;case"fips-us-gov-west-1":n={hostname:"s3-fips.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"me-south-1":n={hostname:"s3.me-south-1.amazonaws.com",partition:"aws"};break;case"s3-external-1":n={hostname:"s3-external-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"sa-east-1":n={hostname:"s3.sa-east-1.amazonaws.com",partition:"aws"};break;case"us-east-1":n={hostname:"s3.us-east-1.amazonaws.com",partition:"aws"};break;case"us-east-2":n={hostname:"s3.us-east-2.amazonaws.com",partition:"aws"};break;case"us-gov-east-1":n={hostname:"s3.us-gov-east-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-gov-west-1":n={hostname:"s3.us-gov-west-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-iso-east-1":n={hostname:"s3.us-iso-east-1.c2s.ic.gov",partition:"aws-iso"};break;case"us-isob-east-1":n={hostname:"s3.us-isob-east-1.sc2s.sgov.gov",partition:"aws-iso-b"};break;case"us-west-1":n={hostname:"s3.us-west-1.amazonaws.com",partition:"aws"};break;case"us-west-2":n={hostname:"s3.us-west-2.amazonaws.com",partition:"aws"};break;default:Gs.has(e)&&(n={hostname:"s3.{region}.amazonaws.com".replace("{region}",e),partition:"aws"}),Hs.has(e)&&(n={hostname:"s3.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),Ws.has(e)&&(n={hostname:"s3.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),Js.has(e)&&(n={hostname:"s3.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),Ys.has(e)&&(n={hostname:"s3.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}),void 0===n&&(n={hostname:"s3.{region}.amazonaws.com".replace("{region}",e),partition:"aws"})}return Promise.resolve(l({signingService:"s3"},n))},serviceId:"S3",signingEscapePath:!1,urlParser:n(47).a,useArnRegion:!1},Qs=l(l({},Zs),{runtime:"browser",base64Decoder:$s.a,base64Encoder:$s.b,bodyLengthChecker:Ks.a,credentialDefaultProvider:function(e){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:Object(Vs.a)({serviceId:Zs.serviceId,clientVersion:Wo.version}),eventStreamSerdeProvider:Yo.a,maxAttempts:qs.a,md5:ns,region:Object(Xo.a)("Region is missing"),requestHandler:new Zo.a,sha256:Jo.Sha256,streamCollector:Zo.b,streamHasher:function(e,t){return Object(Zr.__awaiter)(this,void 0,void 0,(function(){var n;return Object(Zr.__generator)(this,(function(r){switch(r.label){case 0:return n=new e,[4,Qo(t,(function(e){n.update(e)}))];case 1:return r.sent(),[2,n.digest()]}}))}))},utf8Decoder:es.a,utf8Encoder:es.b}),Xs=n(24),ea=n(99),ta=n(41),na={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0},ra=n(21),ia=n(46),oa=n(27),sa=n(23),aa=function(e){function t(t){var n,r,i,o,s,a,u,c,d,f,p,h=this,v=l(l({},Qs),t),g=Object(Xs.b)(v),m=Object(Xs.a)(g),y=Object(oa.b)(m),b=Object(qs.c)(y),w=(i=void 0!==(r=(n=Object(ra.b)(b)).bucketEndpoint)&&r,s=void 0!==(o=n.forcePathStyle)&&o,u=void 0!==(a=n.useAccelerateEndpoint)&&a,d=void 0!==(c=n.useDualstackEndpoint)&&c,f=n.useArnRegion,p=void 0!==f&&f,Object(Zr.__assign)(Object(Zr.__assign)({},n),{bucketEndpoint:i,forcePathStyle:s,useAccelerateEndpoint:u,useDualstackEndpoint:d,useArnRegion:"function"==typeof p?p:function(){return Promise.resolve(p)}})),_=Object(sa.b)(w),S=Object(ea.a)(_);return(h=e.call(this,S)||this).config=S,h.middlewareStack.use(Object(oa.a)(h.config)),h.middlewareStack.use(Object(qs.b)(h.config)),h.middlewareStack.use(Object(ta.a)(h.config)),h.middlewareStack.use(Object(ra.a)(h.config)),h.middlewareStack.use(Object(ia.a)(h.config)),h.middlewareStack.use((h.config,{applyToStack:function(e){e.add(function(){var e=this;return function(t){return function(n){return Object(Zr.__awaiter)(e,void 0,void 0,(function(){var e,r;return Object(Zr.__generator)(this,(function(i){if("string"==typeof(e=n.input.Bucket)&&!("string"==typeof(o=e)&&0===o.indexOf("arn:")&&o.split(":").length>=6)&&e.indexOf("/")>=0)throw(r=new Error("Bucket name shouldn't contain '/', received '"+e+"'")).name="InvalidBucketName",r;var o;return[2,t(Object(Zr.__assign)({},n))]}))}))}}}(),Bi)}})),h.middlewareStack.use(function(e){return{applyToStack:function(t){t.add(function(e){return function(t){return function(n){return Object(Zr.__awaiter)(void 0,void 0,void 0,(function(){var r,i;return Object(Zr.__generator)(this,(function(o){switch(o.label){case 0:return r=n.request,!Yr.a.isInstance(r)||e.isCustomEndpoint?[2,t(Object(Zr.__assign)({},n))]:"s3.amazonaws.com"!==r.hostname?[3,1]:(r.hostname="s3.us-east-1.amazonaws.com",[3,3]);case 1:return i="aws-global",[4,e.region()];case 2:i===o.sent()&&(r.hostname="s3.amazonaws.com"),o.label=3;case 3:return[2,t(Object(Zr.__assign)({},n))]}}))}))}}}(e),Fi)}}}(h.config)),h.middlewareStack.use(function(e){return{applyToStack:function(t){t.add(function(e){var t=this;return function(n){return function(r){return Object(Zr.__awaiter)(t,void 0,void 0,(function(){var t;return Object(Zr.__generator)(this,(function(i){return t=r.request,Yr.a.isInstance(t)&&t.body&&"node"===e.runtime&&(t.headers=Object(Zr.__assign)(Object(Zr.__assign)({},t.headers),{Expect:"100-continue"})),[2,n(Object(Zr.__assign)(Object(Zr.__assign)({},r),{request:t}))]}))}))}}}(e),na)}}}(h.config)),h.middlewareStack.use(Object(sa.a)(h.config)),h}return c(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(Jr.a),ua=function(){return(ua=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},ca=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},la=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},da=new r.a("S3ClientUtils"),fa={accessKeyId:"",secretAccessKey:""},pa=function(e){var t=e.credentials,n=e.level,r=e.customPrefix||{},i=e.identityId||t.identityId,o=(void 0!==r.private?r.private:"private/")+i+"/",s=(void 0!==r.protected?r.protected:"protected/")+i+"/",a=void 0!==r.public?r.public:"public/";switch(n){case"private":return o;case"protected":return s;default:return a}},ha=function(e,t){return function(n,r){return function(r){return ca(void 0,void 0,void 0,(function(){var i,o,s,u;return la(this,(function(c){switch(c.label){case 0:return[4,a.a.get()];case 1:return i=c.sent(),o=a.a.shear(i),s=pa(ua(ua({},e),{credentials:o})),u=Object.assign({},r.input),Object.prototype.hasOwnProperty.call(r.input,"Key")?(u.Key=s+t,r.input=u):Object.prototype.hasOwnProperty.call(r.input,"Prefix")&&(u.Prefix=s+t,r.input=u),[2,n(r)]}}))}))}}},va=function(e){return function(t,n){return function(n){return ca(void 0,void 0,void 0,(function(){var r,i;return la(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,t(n)];case 1:return[2,o.sent()];case 2:throw(s=r=o.sent()).ServerTime&&"string"==typeof s.Code&&"RequestTimeTooSkewed"===s.Code&&(i=new Date(r.ServerTime),e.systemClockOffset=i.getTime()-Date.now()),r;case 3:return[2]}var s}))}))}}},ga={step:"finalizeRequest",name:"autoAdjustClockskewMiddleware"},ma={step:"initialize",name:"addPrefixMiddleware"},ya=function(){return ca(void 0,void 0,void 0,(function(){var e,t,n;return la(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,a.a.get()];case 1:return(e=r.sent())?(t=a.a.shear(e),da.debug("credentials provider get credentials",t),[2,t]):[2,fa];case 2:return n=r.sent(),da.warn("credentials provider error",n),[2,fa];case 3:return[2]}}))}))},ba=function(e,t){var n=e.region,r=e.cancelTokenSource,i=e.dangerouslyConnectToHttpEndpointForTesting,o=e.useAccelerateEndpoint,s={};i&&(s={endpoint:"http://localhost:20005",tls:!1,bucketEndpoint:!1,forcePathStyle:!0});var a=new aa(ua(ua({region:n,credentials:ya,customUserAgent:Object(Bo.b)()},s),{requestHandler:new Ko({},t,r),useAccelerateEndpoint:o}));return a.middlewareStack.remove("contentLengthMiddleware"),a},wa=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return c(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(Vi.a)(t,this.serialize,this.deserialize)),this.middlewareStack.use(Hi(t)),this.middlewareStack.use(Ui(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutObjectCommand",inputFilterSensitiveLog:Nr.filterSensitiveLog,outputFilterSensitiveLog:Dr.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return d(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,d,p,h;return f(this,(function(f){switch(f.label){case 0:if(n=l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l({"content-type":"application/octet-stream"},wi(e.ACL)&&{"x-amz-acl":e.ACL}),wi(e.CacheControl)&&{"cache-control":e.CacheControl}),wi(e.ContentDisposition)&&{"content-disposition":e.ContentDisposition}),wi(e.ContentEncoding)&&{"content-encoding":e.ContentEncoding}),wi(e.ContentLanguage)&&{"content-language":e.ContentLanguage}),wi(e.ContentLength)&&{"content-length":e.ContentLength.toString()}),wi(e.ContentMD5)&&{"content-md5":e.ContentMD5}),wi(e.ContentType)&&{"content-type":e.ContentType}),wi(e.Expires)&&{expires:Object(Jr.e)(e.Expires).toString()}),wi(e.GrantFullControl)&&{"x-amz-grant-full-control":e.GrantFullControl}),wi(e.GrantRead)&&{"x-amz-grant-read":e.GrantRead}),wi(e.GrantReadACP)&&{"x-amz-grant-read-acp":e.GrantReadACP}),wi(e.GrantWriteACP)&&{"x-amz-grant-write-acp":e.GrantWriteACP}),wi(e.ServerSideEncryption)&&{"x-amz-server-side-encryption":e.ServerSideEncryption}),wi(e.StorageClass)&&{"x-amz-storage-class":e.StorageClass}),wi(e.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":e.WebsiteRedirectLocation}),wi(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),wi(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),wi(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),wi(e.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":e.SSEKMSKeyId}),wi(e.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":e.SSEKMSEncryptionContext}),wi(e.BucketKeyEnabled)&&{"x-amz-server-side-encryption-bucket-key-enabled":e.BucketKeyEnabled.toString()}),wi(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),wi(e.Tagging)&&{"x-amz-tagging":e.Tagging}),wi(e.ObjectLockMode)&&{"x-amz-object-lock-mode":e.ObjectLockMode}),wi(e.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(e.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),wi(e.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":e.ObjectLockLegalHoldStatus}),wi(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),void 0!==e.Metadata&&Object.keys(e.Metadata).reduce((function(t,n){var r;return l(l({},t),((r={})["x-amz-meta-"+n.toLowerCase()]=e.Metadata[n],r))}),{})),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Object(Jr.f)(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return Object(Jr.f)(e)})).join("/")),o={"x-id":"PutObject"},void 0!==e.Body&&(a=e.Body,s=a),[4,t.endpoint()];case 1:return u=f.sent(),c=u.hostname,d=u.protocol,p=void 0===d?"https":d,h=u.port,[2,new Yr.a({protocol:p,hostname:c,port:h,method:"PUT",headers:n,path:r,query:o,body:s})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return d(void 0,void 0,void 0,(function(){var n;return f(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,ci(e,t)]:(n={$metadata:yi(e),BucketKeyEnabled:void 0,ETag:void 0,Expiration:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==e.headers["x-amz-expiration"]&&(n.Expiration=e.headers["x-amz-expiration"]),void 0!==e.headers.etag&&(n.ETag=e.headers.etag),void 0!==e.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-version-id"]&&(n.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(n.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(n.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-context"]&&(n.SSEKMSEncryptionContext=e.headers["x-amz-server-side-encryption-context"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(n.BucketKeyEnabled="true"===e.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,bi(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(Jr.b),_a=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return c(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(Vi.a)(t,this.serialize,this.deserialize)),this.middlewareStack.use(Hi(t)),this.middlewareStack.use(Ui(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"CreateMultipartUploadCommand",inputFilterSensitiveLog:R.filterSensitiveLog,outputFilterSensitiveLog:j.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return d(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,d;return f(this,(function(f){switch(f.label){case 0:if(n=l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l({},wi(e.ACL)&&{"x-amz-acl":e.ACL}),wi(e.CacheControl)&&{"cache-control":e.CacheControl}),wi(e.ContentDisposition)&&{"content-disposition":e.ContentDisposition}),wi(e.ContentEncoding)&&{"content-encoding":e.ContentEncoding}),wi(e.ContentLanguage)&&{"content-language":e.ContentLanguage}),wi(e.ContentType)&&{"content-type":e.ContentType}),wi(e.Expires)&&{expires:Object(Jr.e)(e.Expires).toString()}),wi(e.GrantFullControl)&&{"x-amz-grant-full-control":e.GrantFullControl}),wi(e.GrantRead)&&{"x-amz-grant-read":e.GrantRead}),wi(e.GrantReadACP)&&{"x-amz-grant-read-acp":e.GrantReadACP}),wi(e.GrantWriteACP)&&{"x-amz-grant-write-acp":e.GrantWriteACP}),wi(e.ServerSideEncryption)&&{"x-amz-server-side-encryption":e.ServerSideEncryption}),wi(e.StorageClass)&&{"x-amz-storage-class":e.StorageClass}),wi(e.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":e.WebsiteRedirectLocation}),wi(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),wi(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),wi(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),wi(e.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":e.SSEKMSKeyId}),wi(e.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":e.SSEKMSEncryptionContext}),wi(e.BucketKeyEnabled)&&{"x-amz-server-side-encryption-bucket-key-enabled":e.BucketKeyEnabled.toString()}),wi(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),wi(e.Tagging)&&{"x-amz-tagging":e.Tagging}),wi(e.ObjectLockMode)&&{"x-amz-object-lock-mode":e.ObjectLockMode}),wi(e.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(e.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),wi(e.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":e.ObjectLockLegalHoldStatus}),wi(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),void 0!==e.Metadata&&Object.keys(e.Metadata).reduce((function(t,n){var r;return l(l({},t),((r={})["x-amz-meta-"+n.toLowerCase()]=e.Metadata[n],r))}),{})),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Object(Jr.f)(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return Object(Jr.f)(e)})).join("/")),o={uploads:""},[4,t.endpoint()];case 1:return s=f.sent(),a=s.hostname,u=s.protocol,c=void 0===u?"https":u,d=s.port,[2,new Yr.a({protocol:c,hostname:a,port:d,method:"POST",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return d(void 0,void 0,void 0,(function(){var n,r;return f(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,ii(e,t)]:(n={$metadata:yi(e),AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,BucketKeyEnabled:void 0,Key:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,UploadId:void 0},void 0!==e.headers["x-amz-abort-date"]&&(n.AbortDate=new Date(e.headers["x-amz-abort-date"])),void 0!==e.headers["x-amz-abort-rule-id"]&&(n.AbortRuleId=e.headers["x-amz-abort-rule-id"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(n.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(n.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-context"]&&(n.SSEKMSEncryptionContext=e.headers["x-amz-server-side-encryption-context"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(n.BucketKeyEnabled="true"===e.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,_i(e.body,t)]);case 1:return void 0!==(r=i.sent()).Bucket&&(n.Bucket=r.Bucket),void 0!==r.Key&&(n.Key=r.Key),void 0!==r.UploadId&&(n.UploadId=r.UploadId),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(Jr.b);(us||(us={})).filterSensitiveLog=function(e){return l({},e)},(cs||(cs={})).filterSensitiveLog=function(e){return l(l({},e),e.Encryption&&{Encryption:Wr.filterSensitiveLog(e.Encryption)})},(ls||(ls={})).filterSensitiveLog=function(e){return l(l({},e),e.S3&&{S3:cs.filterSensitiveLog(e.S3)})},function(e){e.IGNORE="IGNORE",e.NONE="NONE",e.USE="USE"}(ds||(ds={})),(fs||(fs={})).filterSensitiveLog=function(e){return l({},e)},function(e){e.DOCUMENT="DOCUMENT",e.LINES="LINES"}(ps||(ps={})),(hs||(hs={})).filterSensitiveLog=function(e){return l({},e)},(vs||(vs={})).filterSensitiveLog=function(e){return l({},e)},(gs||(gs={})).filterSensitiveLog=function(e){return l({},e)},function(e){e.ALWAYS="ALWAYS",e.ASNEEDED="ASNEEDED"}(ms||(ms={})),(ys||(ys={})).filterSensitiveLog=function(e){return l({},e)},(bs||(bs={})).filterSensitiveLog=function(e){return l({},e)},(ws||(ws={})).filterSensitiveLog=function(e){return l({},e)},(_s||(_s={})).filterSensitiveLog=function(e){return l({},e)},function(e){e.SELECT="SELECT"}(Ss||(Ss={})),(Es||(Es={})).filterSensitiveLog=function(e){return l(l({},e),e.OutputLocation&&{OutputLocation:ls.filterSensitiveLog(e.OutputLocation)})},(Cs||(Cs={})).filterSensitiveLog=function(e){return l(l({},e),e.RestoreRequest&&{RestoreRequest:Es.filterSensitiveLog(e.RestoreRequest)})},(As||(As={})).filterSensitiveLog=function(e){return l({},e)},(Os||(Os={})).filterSensitiveLog=function(e){return l({},e)},(Is||(Is={})).filterSensitiveLog=function(e){return l({},e)},(Ts||(Ts={})).filterSensitiveLog=function(e){return l({},e)},(xs||(xs={})).filterSensitiveLog=function(e){return l({},e)},(Ps||(Ps={})).filterSensitiveLog=function(e){return l({},e)},(ks||(ks={})).filterSensitiveLog=function(e){return l({},e)},function(e){e.visit=function(e,t){return void 0!==e.Records?t.Records(e.Records):void 0!==e.Stats?t.Stats(e.Stats):void 0!==e.Progress?t.Progress(e.Progress):void 0!==e.Cont?t.Cont(e.Cont):void 0!==e.End?t.End(e.End):t._(e.$unknown[0],e.$unknown[1])},e.filterSensitiveLog=function(e){var t;return void 0!==e.Records?{Records:xs.filterSensitiveLog(e.Records)}:void 0!==e.Stats?{Stats:ks.filterSensitiveLog(e.Stats)}:void 0!==e.Progress?{Progress:Ts.filterSensitiveLog(e.Progress)}:void 0!==e.Cont?{Cont:As.filterSensitiveLog(e.Cont)}:void 0!==e.End?{End:Os.filterSensitiveLog(e.End)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0}}(Ds||(Ds={})),(Ns||(Ns={})).filterSensitiveLog=function(e){return l(l({},e),e.Payload&&{Payload:"STREAMING_CONTENT"})},(Ls||(Ls={})).filterSensitiveLog=function(e){return l({},e)},(Ms||(Ms={})).filterSensitiveLog=function(e){return l({},e)},(js||(js={})).filterSensitiveLog=function(e){return l(l({},e),e.SSECustomerKey&&{SSECustomerKey:Jr.d})},(Rs||(Rs={})).filterSensitiveLog=function(e){return l(l({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:Jr.d})},(Us||(Us={})).filterSensitiveLog=function(e){return l(l({},e),e.SSECustomerKey&&{SSECustomerKey:Jr.d})},(Bs||(Bs={})).filterSensitiveLog=function(e){return l({},e)},(Fs||(Fs={})).filterSensitiveLog=function(e){return l(l({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:Jr.d})},(zs||(zs={})).filterSensitiveLog=function(e){return l(l(l({},e),e.SSECustomerKey&&{SSECustomerKey:Jr.d}),e.CopySourceSSECustomerKey&&{CopySourceSSECustomerKey:Jr.d})};var Sa=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return c(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(Vi.a)(t,this.serialize,this.deserialize)),this.middlewareStack.use(Hi(t)),this.middlewareStack.use(Ui(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"UploadPartCommand",inputFilterSensitiveLog:Us.filterSensitiveLog,outputFilterSensitiveLog:Rs.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return d(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,d,p,h;return f(this,(function(f){switch(f.label){case 0:if(n=l(l(l(l(l(l(l({"content-type":"application/octet-stream"},wi(e.ContentLength)&&{"content-length":e.ContentLength.toString()}),wi(e.ContentMD5)&&{"content-md5":e.ContentMD5}),wi(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),wi(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),wi(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),wi(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),wi(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Object(Jr.f)(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return Object(Jr.f)(e)})).join("/")),o=l(l({"x-id":"UploadPart"},void 0!==e.PartNumber&&{partNumber:e.PartNumber.toString()}),void 0!==e.UploadId&&{uploadId:e.UploadId}),void 0!==e.Body&&(a=e.Body,s=a),[4,t.endpoint()];case 1:return u=f.sent(),c=u.hostname,d=u.protocol,p=void 0===d?"https":d,h=u.port,[2,new Yr.a({protocol:p,hostname:c,port:h,method:"PUT",headers:n,path:r,query:o,body:s})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return d(void 0,void 0,void 0,(function(){var n;return f(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,li(e,t)]:(n={$metadata:yi(e),BucketKeyEnabled:void 0,ETag:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0},void 0!==e.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers.etag&&(n.ETag=e.headers.etag),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(n.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(n.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(n.BucketKeyEnabled="true"===e.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,bi(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(Jr.b),Ea=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return c(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(Vi.a)(t,this.serialize,this.deserialize)),this.middlewareStack.use(Ki(t)),this.middlewareStack.use(Ui(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"CompleteMultipartUploadCommand",inputFilterSensitiveLog:O.filterSensitiveLog,outputFilterSensitiveLog:E.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return d(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,d,p,h;return f(this,(function(f){switch(f.label){case 0:if(n=l(l({"content-type":"application/xml"},wi(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),wi(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Object(Jr.f)(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return Object(Jr.f)(e)})).join("/")),o=l({},void 0!==e.UploadId&&{uploadId:e.UploadId}),void 0!==e.MultipartUpload&&(a=function(e,t){var n=new Qr("CompletedMultipartUpload");return void 0!==e.Parts&&null!==e.Parts&&gi(e.Parts,t).map((function(e){e=e.withName("Part"),n.addChildNode(e)})),n}(e.MultipartUpload,t),s='<?xml version="1.0" encoding="UTF-8"?>',a.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),s+=a.toString()),[4,t.endpoint()];case 1:return u=f.sent(),c=u.hostname,d=u.protocol,p=void 0===d?"https":d,h=u.port,[2,new Yr.a({protocol:p,hostname:c,port:h,method:"POST",headers:n,path:r,query:o,body:s})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return d(void 0,void 0,void 0,(function(){var n,r;return f(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,ni(e,t)]:(n={$metadata:yi(e),Bucket:void 0,BucketKeyEnabled:void 0,ETag:void 0,Expiration:void 0,Key:void 0,Location:void 0,RequestCharged:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==e.headers["x-amz-expiration"]&&(n.Expiration=e.headers["x-amz-expiration"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-version-id"]&&(n.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(n.BucketKeyEnabled="true"===e.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,_i(e.body,t)]);case 1:return void 0!==(r=i.sent()).Bucket&&(n.Bucket=r.Bucket),void 0!==r.ETag&&(n.ETag=r.ETag),void 0!==r.Key&&(n.Key=r.Key),void 0!==r.Location&&(n.Location=r.Location),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(Jr.b),Ca=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return c(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(Vi.a)(t,this.serialize,this.deserialize)),this.middlewareStack.use(Ui(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"AbortMultipartUploadCommand",inputFilterSensitiveLog:v.filterSensitiveLog,outputFilterSensitiveLog:h.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return d(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,d;return f(this,(function(f){switch(f.label){case 0:if(n=l(l({},wi(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),wi(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Object(Jr.f)(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return Object(Jr.f)(e)})).join("/")),o=l({"x-id":"AbortMultipartUpload"},void 0!==e.UploadId&&{uploadId:e.UploadId}),[4,t.endpoint()];case 1:return s=f.sent(),a=s.hostname,u=s.protocol,c=void 0===u?"https":u,d=s.port,[2,new Yr.a({protocol:c,hostname:a,port:d,method:"DELETE",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return d(void 0,void 0,void 0,(function(){var n;return f(this,(function(r){switch(r.label){case 0:return 204!==e.statusCode&&e.statusCode>=300?[2,ti(e,t)]:(n={$metadata:yi(e),RequestCharged:void 0},void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,bi(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(Jr.b),Aa=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return c(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(Vi.a)(t,this.serialize,this.deserialize)),this.middlewareStack.use(Ui(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"ListPartsCommand",inputFilterSensitiveLog:sr.filterSensitiveLog,outputFilterSensitiveLog:or.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return d(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,d;return f(this,(function(f){switch(f.label){case 0:if(n=l(l({},wi(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),wi(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Object(Jr.f)(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return Object(Jr.f)(e)})).join("/")),o=l(l(l({"x-id":"ListParts"},void 0!==e.MaxParts&&{"max-parts":e.MaxParts.toString()}),void 0!==e.PartNumberMarker&&{"part-number-marker":e.PartNumberMarker}),void 0!==e.UploadId&&{uploadId:e.UploadId}),[4,t.endpoint()];case 1:return s=f.sent(),a=s.hostname,u=s.protocol,c=void 0===u?"https":u,d=s.port,[2,new Yr.a({protocol:c,hostname:a,port:d,method:"GET",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return d(void 0,void 0,void 0,(function(){var n,r;return f(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,ui(e,t)]:(n={$metadata:yi(e),AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,Initiator:void 0,IsTruncated:void 0,Key:void 0,MaxParts:void 0,NextPartNumberMarker:void 0,Owner:void 0,PartNumberMarker:void 0,Parts:void 0,RequestCharged:void 0,StorageClass:void 0,UploadId:void 0},void 0!==e.headers["x-amz-abort-date"]&&(n.AbortDate=new Date(e.headers["x-amz-abort-date"])),void 0!==e.headers["x-amz-abort-rule-id"]&&(n.AbortRuleId=e.headers["x-amz-abort-rule-id"]),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,_i(e.body,t)]);case 1:return void 0!==(r=i.sent()).Bucket&&(n.Bucket=r.Bucket),void 0!==r.Initiator&&(n.Initiator=function(e,t){var n={ID:void 0,DisplayName:void 0};return void 0!==e.ID&&(n.ID=e.ID),void 0!==e.DisplayName&&(n.DisplayName=e.DisplayName),n}(r.Initiator)),void 0!==r.IsTruncated&&(n.IsTruncated="true"==r.IsTruncated),void 0!==r.Key&&(n.Key=r.Key),void 0!==r.MaxParts&&(n.MaxParts=parseInt(r.MaxParts)),void 0!==r.NextPartNumberMarker&&(n.NextPartNumberMarker=r.NextPartNumberMarker),void 0!==r.Owner&&(n.Owner=mi(r.Owner,t)),void 0!==r.PartNumberMarker&&(n.PartNumberMarker=r.PartNumberMarker),""===r.Part&&(n.Parts=[]),void 0!==r.Part&&(n.Parts=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n={PartNumber:void 0,LastModified:void 0,ETag:void 0,Size:void 0};return void 0!==e.PartNumber&&(n.PartNumber=parseInt(e.PartNumber)),void 0!==e.LastModified&&(n.LastModified=new Date(e.LastModified)),void 0!==e.ETag&&(n.ETag=e.ETag),void 0!==e.Size&&(n.Size=parseInt(e.Size)),n}(e)}))}(Object(Jr.g)(r.Part))),void 0!==r.StorageClass&&(n.StorageClass=r.StorageClass),void 0!==r.UploadId&&(n.UploadId=r.UploadId),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(Jr.b),Oa=n(81);function Ia(e){return(Ia="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ta,xa,Pa=function(){return(Pa=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},ka=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},Da=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Na=new r.a("AWSS3ProviderManagedUpload"),La=function(){function e(e,t,n){this.minPartSize=5242880,this.queueSize=4,this.body=null,this.params=null,this.opts=null,this.completedParts=[],this.uploadId=null,this.bytesUploaded=0,this.totalBytesToUpload=0,this.emitter=null,this.params=e,this.opts=t,this.emitter=n,this.s3client=this._createNewS3Client(t,n)}return e.prototype.upload=function(){return ka(this,void 0,void 0,(function(){var e,t,n,r,i,o,s,a=this;return Da(this,(function(u){switch(u.label){case 0:return u.trys.push([0,10,,12]),e=this,[4,this.validateAndSanitizeBody(this.params.Body)];case 1:return e.body=u.sent(),this.totalBytesToUpload=this.byteLength(this.body),this.totalBytesToUpload<=this.minPartSize?(this.params.Body=this.body,t=new wa(this.params),[2,this.s3client.send(t)]):[3,2];case 2:return n=this,[4,this.createMultiPartUpload()];case 3:n.uploadId=u.sent(),r=Math.ceil(this.totalBytesToUpload/this.minPartSize),i=this.createParts(),o=0,u.label=4;case 4:return o<r?[4,this.uploadParts(this.uploadId,i.slice(o,o+this.queueSize))]:[3,7];case 5:u.sent(),u.label=6;case 6:return o+=this.queueSize,[3,4];case 7:return i.map((function(e){a.removeEventListener(e)})),[4,this.finishMultiPartUpload(this.uploadId)];case 8:return[2,u.sent()];case 9:return[3,12];case 10:return s=u.sent(),[4,this.cleanup(this.uploadId)];case 11:throw u.sent(),Na.error("Error. Cancelling the multipart upload."),s;case 12:return[2]}}))}))},e.prototype.createParts=function(){try{for(var e=[],t=0;t<this.totalBytesToUpload;){var n=Math.min(t+this.minPartSize,this.totalBytesToUpload);e.push({bodyPart:this.body.slice(t,n),partNumber:e.length+1,emitter:new Oa.EventEmitter,_lastUploadedBytes:0}),t+=this.minPartSize}return e}catch(e){throw Na.error(e),e}},e.prototype.createMultiPartUpload=function(){return ka(this,void 0,void 0,(function(){var e,t,n;return Da(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),e=new _a(this.params),[4,this.s3client.send(e)];case 1:return t=r.sent(),Na.debug(t.UploadId),[2,t.UploadId];case 2:throw n=r.sent(),Na.error(n),n;case 3:return[2]}}))}))},e.prototype.uploadParts=function(e,t){return ka(this,void 0,void 0,(function(){var n,r,i,o=this;return Da(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,Promise.all(t.map((function(t){return ka(o,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Da(this,(function(c){switch(c.label){case 0:return this.setupEventListener(t),n={emitter:t.emitter},r=this.params,i=r.Key,o=r.Bucket,s=r.SSECustomerAlgorithm,a=r.SSECustomerKey,u=r.SSECustomerKeyMD5,[4,this.s3client.send(new Sa(Pa(Pa(Pa({PartNumber:t.partNumber,Body:t.bodyPart,UploadId:e,Key:i,Bucket:o},s&&{SSECustomerAlgorithm:s}),a&&{SSECustomerKey:a}),u&&{SSECustomerKeyMD5:u})),n)];case 1:return[2,c.sent()]}}))}))})))];case 1:for(n=s.sent(),r=0;r<n.length;r++)this.completedParts.push({PartNumber:t[r].partNumber,ETag:n[r].ETag});return[3,3];case 2:throw i=s.sent(),Na.error("Error happened while uploading a part. Cancelling the multipart upload"),i;case 3:return[2]}}))}))},e.prototype.finishMultiPartUpload=function(e){return ka(this,void 0,void 0,(function(){var t,n,r;return Da(this,(function(i){switch(i.label){case 0:t={Bucket:this.params.Bucket,Key:this.params.Key,UploadId:e,MultipartUpload:{Parts:this.completedParts}},n=new Ea(t),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.s3client.send(n)];case 2:return[2,i.sent().Key];case 3:throw r=i.sent(),Na.error("Error happened while finishing the upload."),r;case 4:return[2]}}))}))},e.prototype.cleanup=function(e){return ka(this,void 0,void 0,(function(){var t,n;return Da(this,(function(r){switch(r.label){case 0:return this.body=null,this.completedParts=[],this.bytesUploaded=0,this.totalBytesToUpload=0,t={Bucket:this.params.Bucket,Key:this.params.Key,UploadId:e},[4,this.s3client.send(new Ca(t))];case 1:return r.sent(),[4,this.s3client.send(new Aa(t))];case 2:if((n=r.sent())&&n.Parts&&n.Parts.length>0)throw new Error("Multipart upload clean up failed.");return[2]}}))}))},e.prototype.removeEventListener=function(e){e.emitter.removeAllListeners("sendUploadProgress"),e.emitter.removeAllListeners("sendDownloadProgress")},e.prototype.setupEventListener=function(e){var t=this;e.emitter.on("sendUploadProgress",(function(n){t.progressChanged(e.partNumber,n.loaded-e._lastUploadedBytes),e._lastUploadedBytes=n.loaded}))},e.prototype.progressChanged=function(e,t){this.bytesUploaded+=t,this.emitter.emit("sendUploadProgress",{loaded:this.bytesUploaded,total:this.totalBytesToUpload,part:e,key:this.params.Key})},e.prototype.byteLength=function(e){if(null==e)return 0;if("number"==typeof e.byteLength)return e.byteLength;if("number"==typeof e.length)return e.length;if("number"==typeof e.size)return e.size;if("string"!=typeof e.path)throw new Error("Cannot determine length of "+e)},e.prototype.validateAndSanitizeBody=function(e){return ka(this,void 0,void 0,(function(){return Da(this,(function(t){return this.isGenericObject(e)?[2,JSON.stringify(e)]:[2,e]}))}))},e.prototype.isGenericObject=function(e){if(null!==e&&"object"===Ia(e))try{return!(this.byteLength(e)>=0)}catch(e){return!0}return!1},e.prototype._createNewS3Client=function(e,t){var n=ba(e,t);return n.middlewareStack.add(ha(this.opts,this.params.Key),ma),n.middlewareStack.add(va(n.config),ga),n},e}(),Ma=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},ja=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Ra=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},Ua=new r.a("AWSS3UploadTask");function Ba(e,t){return e.PartNumber-t.PartNumber}!function(e){e[e.INIT=0]="INIT",e[e.IN_PROGRESS=1]="IN_PROGRESS",e[e.PAUSED=2]="PAUSED",e[e.CANCELLED=3]="CANCELLED",e[e.COMPLETED=4]="COMPLETED"}(Ta||(Ta={})),function(e){e.CANCEL="cancel",e.UPLOAD_COMPLETE="uploadComplete",e.UPLOAD_PROGRESS="uploadPartProgress",e.ERROR="error"}(xa||(xa={}));var Fa=function(){function e(e){var t=e.s3Client,n=e.file,r=e.emitter,i=e.storage,o=e.params,s=e.level,a=e.prefixPromise;this.partSize=5242880,this.queueSize=4,this.inProgress=[],this.completedParts=[],this.queued=[],this.bytesUploaded=0,this.totalBytes=0,this.state=Ta.INIT,this.prefixPromise=a,this.s3client=t,this.s3client.middlewareStack.remove("contentLengthMiddleware"),this.storage=i,this.storageSync=Promise.resolve(),"function"==typeof this.storage.sync&&(this.storageSync=this.storage.sync()),this.params=o,this.file=n,this.totalBytes=this.file.size,this.bytesUploaded=0,this.emitter=r,this.queued=[],this.fileId=this._getFileId(s),this._validateParams(),this.emitter.on(xa.ERROR,(function(){}))}return Object.defineProperty(e.prototype,"percent",{get:function(){return this.bytesUploaded/this.totalBytes*100},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInProgress",{get:function(){return this.state===Ta.IN_PROGRESS},enumerable:!0,configurable:!0}),e.prototype._listSingleFile=function(e){var t=e.key,n=e.bucket;return Ma(this,void 0,void 0,(function(){var e,r,i,o;return ja(this,(function(s){switch(s.label){case 0:return[4,this.s3client.send(new Zi({Bucket:n,Prefix:t}))];case 1:return e=s.sent(),r=e.Contents,i=void 0===r?[]:r,[4,this.prefixPromise];case 2:return o=s.sent(),[2,i.find((function(e){return e.Key===""+o+t}))]}}))}))},e.prototype._getFileId=function(e){return void 0!==(t=this.file)&&t instanceof File?[this.file.name,this.file.lastModified,this.file.size,this.file.type,this.params.Bucket,e,this.params.Key].join("-"):[this.file.size,this.file.type,this.params.Bucket,e,this.params.Key].join("-");var t},e.prototype._findCachedUploadParts=function(){return Ma(this,void 0,void 0,(function(){var e,t;return ja(this,(function(n){switch(n.label){case 0:return[4,this._listCachedUploadTasks()];case 1:return e=n.sent(),0!==Object.keys(e).length&&Object.prototype.hasOwnProperty.call(e,this.fileId)?((t=e[this.fileId]).lastTouched=Date.now(),this.storage.setItem("__uploadInProgress",JSON.stringify(e)),[4,this.s3client.send(new Aa({Bucket:this.params.Bucket,Key:this.params.Key,UploadId:t.uploadId}))]):[2,{parts:[],uploadId:null}];case 2:return[2,{parts:n.sent().Parts||[],uploadId:t.uploadId}]}}))}))},e.prototype._emitEvent=function(e,t){this.emitter.emit(e,t)},e.prototype._validateParams=function(){if(this.file.size/this.partSize>1e4)throw new Error("Too many parts. Number of parts is "+this.file.size/this.partSize+", maximum is 10000.")},e.prototype._listCachedUploadTasks=function(){return Ma(this,void 0,void 0,(function(){var e;return ja(this,(function(t){switch(t.label){case 0:return[4,this.storageSync];case 1:return t.sent(),e=this.storage.getItem("__uploadInProgress")||"{}",[2,JSON.parse(e)]}}))}))},e.prototype._cache=function(e){return Ma(this,void 0,void 0,(function(){var t;return ja(this,(function(n){switch(n.label){case 0:return[4,this._listCachedUploadTasks()];case 1:return(t=n.sent())[this.fileId]=e,this.storage.setItem("__uploadInProgress",JSON.stringify(t)),[2]}}))}))},e.prototype._isCached=function(){return Ma(this,void 0,void 0,(function(){var e,t;return ja(this,(function(n){switch(n.label){case 0:return t=(e=Object.prototype.hasOwnProperty).call,[4,this._listCachedUploadTasks()];case 1:return[2,t.apply(e,[n.sent(),this.fileId])]}}))}))},e.prototype._removeFromCache=function(){return Ma(this,void 0,void 0,(function(){var e;return ja(this,(function(t){switch(t.label){case 0:return[4,this._listCachedUploadTasks()];case 1:return delete(e=t.sent())[this.fileId],this.storage.setItem("__uploadInProgress",JSON.stringify(e)),[2]}}))}))},e.prototype._onPartUploadCompletion=function(e){var t=e.eTag,n=e.partNumber,r=e.chunk;return Ma(this,void 0,void 0,(function(){return ja(this,(function(e){return this.completedParts.push({ETag:t,PartNumber:n}),this.bytesUploaded+=function(e){if("string"==typeof e)return e.length;if(function(e){return void 0!==e&&e instanceof ArrayBuffer}(e))return e.byteLength;if(function(e){return void 0!==e&&e instanceof Blob}(e))return e.size;throw new Error("Cannot determine byte length of "+e)}(r),this._emitEvent(xa.UPLOAD_PROGRESS,{loaded:this.bytesUploaded,total:this.totalBytes}),this.inProgress=this.inProgress.filter((function(e){return e.uploadPartInput.PartNumber!==n})),this.queued.length&&this.state!==Ta.PAUSED&&this._startNextPart(),this._isDone()&&this._completeUpload(),[2]}))}))},e.prototype._completeUpload=function(){return Ma(this,void 0,void 0,(function(){var e;return ja(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.s3client.send(new Ea({Bucket:this.params.Bucket,Key:this.params.Key,UploadId:this.uploadId,MultipartUpload:{Parts:this.completedParts.sort(Ba)}}))];case 1:return t.sent(),this._verifyFileSize(),this._emitEvent(xa.UPLOAD_COMPLETE,{key:this.params.Bucket+"/"+this.params.Key}),this._removeFromCache(),this.state=Ta.COMPLETED,[3,3];case 2:return e=t.sent(),Ua.error("error completing upload",e),this._emitEvent(xa.ERROR,e),[3,3];case 3:return[2]}}))}))},e.prototype._makeUploadPartRequest=function(e,t){return Ma(this,void 0,void 0,(function(){var n,r;return ja(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),[4,this.s3client.send(new Sa(e),{cancelTokenSource:t})];case 1:return n=i.sent(),[4,this._onPartUploadCompletion({eTag:n.ETag,partNumber:e.PartNumber,chunk:e.Body})];case 2:return i.sent(),[3,4];case 3:return r=i.sent(),this.state===Ta.PAUSED?Ua.log("upload paused"):this.state===Ta.CANCELLED?Ua.log("upload aborted"):Ua.error("error starting next part of upload: ",r),Uo.a.isCancel(r)||r.message===Po.UPLOAD_PAUSED_MESSAGE||(this._emitEvent(xa.ERROR,r),this.pause()),[3,4];case 4:return[2]}}))}))},e.prototype._startNextPart=function(){if(this.queued.length>0&&this.state!==Ta.PAUSED){var e=Uo.a.CancelToken.source(),t=this.queued.shift();this.inProgress.push({uploadPartInput:t,s3Request:this._makeUploadPartRequest(t,e),cancel:e.cancel})}},e.prototype._verifyFileSize=function(){return Ma(this,void 0,void 0,(function(){var e,t;return ja(this,(function(n){switch(n.label){case 0:return[4,this._listSingleFile({key:this.params.Key,bucket:this.params.Bucket})];case 1:if(e=n.sent(),!(t=Boolean(e&&e.Size===this.file.size)))throw new Error("File size does not match between local file and file on s3");return[2,t]}}))}))},e.prototype._isDone=function(){return!this.queued.length&&!this.inProgress.length&&this.bytesUploaded===this.totalBytes},e.prototype._createParts=function(){for(var e=this.file.size,t=[],n=0;n<e;){var r=Math.min(n+this.partSize,e);t.push({Body:this.file.slice(n,r),Key:this.params.Key,Bucket:this.params.Bucket,PartNumber:t.length+1,UploadId:this.uploadId}),n+=this.partSize}return t},e.prototype._initCachedUploadParts=function(e){this.bytesUploaded+=e.reduce((function(e,t){return e+t.Size}),0);var t=new Set(e.map((function(e){return e.PartNumber})));this.queued=this.queued.filter((function(e){return!t.has(e.PartNumber)})),this.completedParts=e.map((function(e){return{PartNumber:e.PartNumber,ETag:e.ETag}})),this._emitEvent(xa.UPLOAD_PROGRESS,{loaded:this.bytesUploaded,total:this.totalBytes})},e.prototype._initMultipartUpload=function(){return Ma(this,void 0,void 0,(function(){var e;return ja(this,(function(t){switch(t.label){case 0:return[4,this.s3client.send(new _a(this.params))];case 1:return e=t.sent(),this._cache({uploadId:e.UploadId,lastTouched:Date.now(),bucket:this.params.Bucket,key:this.params.Key,fileName:this.file instanceof File?this.file.name:""}),[2,e.UploadId]}}))}))},e.prototype._initializeUploadTask=function(){return Ma(this,void 0,void 0,(function(){var e,t,n,r;return ja(this,(function(i){switch(i.label){case 0:this.state=Ta.IN_PROGRESS,i.label=1;case 1:return i.trys.push([1,7,,8]),[4,this._isCached()];case 2:return i.sent()?[4,this._findCachedUploadParts()]:[3,4];case 3:return e=i.sent(),t=e.parts,n=e.uploadId,this.uploadId=n,this.queued=this._createParts(),this._initCachedUploadParts(t),this._startUpload(),[3,6];case 4:return this.uploadId?[3,6]:[4,this._initMultipartUpload()];case 5:n=i.sent(),this.uploadId=n,this.queued=this._createParts(),this._startUpload(),i.label=6;case 6:return[3,8];case 7:return r=i.sent(),Uo.a.isCancel(r)||Ua.error("Error initializing the upload task",r),[3,8];case 8:return[2]}}))}))},e.prototype.resume=function(){this.state===Ta.CANCELLED?Ua.warn("This task has already been cancelled"):this.state===Ta.COMPLETED?Ua.warn("This task has already been completed"):this.state===Ta.IN_PROGRESS?Ua.warn("Upload task already in progress"):this.uploadId?this._startUpload():this._initializeUploadTask()},e.prototype._startUpload=function(){this.state=Ta.IN_PROGRESS;for(var e=0;e<this.queueSize;e++)this._startNextPart()},e.prototype._cancel=function(){return Ma(this,void 0,void 0,(function(){var e;return ja(this,(function(t){switch(t.label){case 0:return this.state!==Ta.CANCELLED?[3,1]:(Ua.warn("This task has already been cancelled"),[2,!1]);case 1:return this.state!==Ta.COMPLETED?[3,2]:(Ua.warn("This task has already been completed"),[2,!1]);case 2:this.pause(),this.queued=[],this.completedParts=[],this.bytesUploaded=0,this.state=Ta.CANCELLED,t.label=3;case 3:return t.trys.push([3,6,,7]),[4,this.s3client.send(new Ca({Bucket:this.params.Bucket,Key:this.params.Key,UploadId:this.uploadId}))];case 4:return t.sent(),[4,this._removeFromCache()];case 5:return t.sent(),[2,!0];case 6:return e=t.sent(),Ua.error("Error cancelling upload task",e),[2,!1];case 7:return[2]}}))}))},e.prototype.pause=function(){var e;this.state===Ta.CANCELLED?Ua.warn("This task has already been cancelled"):this.state===Ta.COMPLETED?Ua.warn("This task has already been completed"):this.state===Ta.PAUSED&&Ua.warn("This task is already paused"),this.state=Ta.PAUSED;var t=this.inProgress.splice(0,this.inProgress.length);t.forEach((function(e){e.cancel(Po.UPLOAD_PAUSED_MESSAGE)})),(e=this.queued).unshift.apply(e,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Ra(arguments[t]));return e}(t.map((function(e){return e.uploadPartInput}))))},e}();function za(e){return(za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var qa=function(){return(qa=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},$a=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},Ka=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Va=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},Ga=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Va(arguments[t]));return e},Ha=new r.a("AWSS3Provider"),Wa=function(){function e(e){var t=this;this._config=e||{},this._storage=(new o.a).getStorage(),s.a.listen("auth",(function(e){var n=e.payload;"signOut"!==n.event&&"signIn"!==n.event||t._storage.removeItem("__uploadInProgress")})),Ha.debug("Storage Options",this._config)}return e.prototype.getCategory=function(){return e.CATEGORY},e.prototype.getProviderName=function(){return e.PROVIDER_NAME},e.prototype.configure=function(e){if(Ha.debug("configure Storage",e),!e)return this._config;var t=i.a.parseMobilehubConfig(e);return this._config=Object.assign({},this._config,t.Storage),this._config.bucket||Ha.debug("Do not have bucket yet"),this._config},e.prototype.startResumableUpload=function(e,t){var n=e.s3Client,r=e.emitter,i=e.key,o=e.file,s=e.params,u=t.progressCallback,c=t.completeCallback,l=t.errorCallback,d=t.track,f=void 0!==d&&d;if(!(o instanceof Blob))throw new Error(To.INVALID_BLOB);r.on(xa.UPLOAD_PROGRESS,(function(e){u&&("function"==typeof u?u(e):Ha.warn("progressCallback should be a function, not a "+za(u)))})),r.on(xa.UPLOAD_COMPLETE,(function(e){c&&("function"==typeof c?c(e):Ha.warn("completeCallback should be a function, not a "+za(c)))})),r.on(xa.ERROR,(function(e){l&&("function"==typeof l?l(e):Ha.warn("errorCallback should be a function, not a "+za(l)))}));var p=a.a.get().then((function(e){var n=a.a.shear(e);return pa(qa(qa({},t),{credentials:n}))})),h=new Fa({s3Client:n,file:o,emitter:r,level:t.level,storage:this._storage,params:s,prefixPromise:p});return Ho(f,"upload",{method:"put",result:"success"},null,"Upload Task created successfully for "+i),h.resume(),h},e.prototype.copy=function(e,t,n){return $a(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,l,d,f,p,h,v,g,m,y,b,w,_,S,E,C,A,O,I;return Ka(this,(function(T){switch(T.label){case 0:return[4,this._ensureCredentials()];case 1:if(!T.sent()||!this._isWithCredentials(this._config))throw new Error(To.NO_CREDENTIALS);if(r=Object.assign({},this._config,n),i=r.acl,o=r.bucket,s=r.cacheControl,a=r.expires,u=r.track,c=r.serverSideEncryption,l=r.SSECustomerAlgorithm,d=r.SSECustomerKey,f=r.SSECustomerKeyMD5,p=r.SSEKMSKeyId,h=e.level,v=void 0===h?"public":h,g=e.identityId,m=e.key,y=t.level,b=void 0===y?"public":y,w=t.key,!m||"string"!=typeof m)throw new Error(To.NO_SRC_KEY);if(!w||"string"!=typeof w)throw new Error(To.NO_DEST_KEY);"protected"!==v&&g&&Ha.warn('You may copy files from another user if the source level is "protected", currently it\'s '+v),_=this._prefix(qa(qa(qa({},r),{level:v}),g&&{identityId:g})),S=this._prefix(qa(qa({},r),{level:b})),E=o+"/"+_+m,C=""+S+w,Ha.debug("copying "+E+" to "+C),A={Bucket:o,CopySource:E,Key:C,MetadataDirective:"COPY"},s&&(A.CacheControl=s),a&&(A.Expires=a),c&&(A.ServerSideEncryption=c),l&&(A.SSECustomerAlgorithm=l),d&&(A.SSECustomerKey=d),f&&(A.SSECustomerKeyMD5=f),p&&(A.SSEKMSKeyId=p),i&&(A.ACL=i),O=this._createNewS3Client(r),T.label=2;case 2:return T.trys.push([2,4,,5]),[4,O.send(new Wi(A))];case 3:return T.sent(),Ho(u,"copy",{method:"copy",result:"success"},null,"Copy success from "+m+" to "+w),[2,{key:w}];case 4:throw I=T.sent(),Ho(u,"copy",{method:"copy",result:"failed"},null,"Copy failed from "+m+" to "+w),I;case 5:return[2]}}))}))},e.prototype.get=function(e,t){return $a(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,d,f,p,h,v,g,m,y,b,w,_,S,E,C,A,O,I,T;return Ka(this,(function(x){switch(x.label){case 0:return[4,this._ensureCredentials()];case 1:if(!x.sent()||!this._isWithCredentials(this._config))throw new Error(To.NO_CREDENTIALS);if(n=Object.assign({},this._config,t),r=n.bucket,i=n.download,o=n.cacheControl,s=n.contentDisposition,a=n.contentEncoding,u=n.contentLanguage,c=n.contentType,l=n.expires,d=n.track,f=n.SSECustomerAlgorithm,p=n.SSECustomerKey,h=n.SSECustomerKeyMD5,v=n.progressCallback,g=this._prefix(n),m=g+e,y=new Oa.EventEmitter,b=this._createNewS3Client(n,y),Ha.debug("get "+e+" from "+m),w={Bucket:r,Key:m},o&&(w.ResponseCacheControl=o),s&&(w.ResponseContentDisposition=s),a&&(w.ResponseContentEncoding=a),u&&(w.ResponseContentLanguage=u),c&&(w.ResponseContentType=c),f&&(w.SSECustomerAlgorithm=f),p&&(w.SSECustomerKey=p),h&&(w.SSECustomerKeyMD5=h),!0!==i)return[3,5];_=new Ji(w),x.label=2;case 2:return x.trys.push([2,4,,5]),v&&("function"==typeof v?y.on("sendDownloadProgress",(function(e){v(e)})):Ha.warn("progressCallback should be a function, not a "+za(v))),[4,b.send(_)];case 3:return S=x.sent(),y.removeAllListeners("sendDownloadProgress"),Ho(d,"download",{method:"get",result:"success"},{fileSize:Number(S.Body.size||S.Body.length)},"Download success for "+e),[2,S];case 4:throw E=x.sent(),Ho(d,"download",{method:"get",result:"failed"},null,"Download failed with "+E.message),E;case 5:return x.trys.push([5,8,,9]),C=new jo(qa({},b.config)),[4,no(b,new Ji(w))];case 6:return A=x.sent(),I=to,[4,C.presign(A,{expiresIn:l||900})];case 7:return O=I.apply(void 0,[x.sent()]),Ho(d,"getSignedUrl",{method:"get",result:"success"},null,"Signed URL: "+O),[2,O];case 8:throw T=x.sent(),Ha.warn("get signed url error",T),Ho(d,"getSignedUrl",{method:"get",result:"failed"},null,"Could not get a signed URL for "+e),T;case 9:return[2]}}))}))},e.prototype.put=function(e,t,n){var r=Object.assign({},this._config,n),i=r.bucket,o=r.track,s=r.progressCallback,a=r.level,u=r.resumable,c=r.contentType,l=r.contentDisposition,d=r.contentEncoding,f=r.cacheControl,p=r.expires,h=r.metadata,v=r.tagging,g=r.acl,m=r.serverSideEncryption,y=r.SSECustomerAlgorithm,b=r.SSECustomerKey,w=r.SSECustomerKeyMD5,_=r.SSEKMSKeyId,S={Bucket:i,Key:e,Body:t,ContentType:c||"binary/octet-stream"};f&&(S.CacheControl=f),l&&(S.ContentDisposition=l),d&&(S.ContentEncoding=d),p&&(S.Expires=p),h&&(S.Metadata=h),v&&(S.Tagging=v),m&&(S.ServerSideEncryption=m),y&&(S.SSECustomerAlgorithm=y),b&&(S.SSECustomerKey=b),w&&(S.SSECustomerKeyMD5=w),_&&(S.SSEKMSKeyId=_);var E=new Oa.EventEmitter,C=new La(S,r,E);if(g&&(S.ACL=g),!0===u){var A=this._createNewS3Client(r);A.middlewareStack.add(ha(r,e),ma);var O={bucket:i,key:e,s3Client:A,file:t,emitter:E,accessLevel:a,params:S};return this.startResumableUpload(O,n)}try{return s&&("function"==typeof s?E.on("sendUploadProgress",(function(e){s(e)})):Ha.warn("progressCallback should be a function, not a "+za(s))),C.upload().then((function(t){return Ha.debug("upload result",t),Ho(o,"upload",{method:"put",result:"success"},null,"Upload success for "+e),{key:e}}))}catch(t){throw Ha.warn("error uploading",t),Ho(o,"upload",{method:"put",result:"failed"},null,"Error uploading "+e),t}},e.prototype.remove=function(e,t){return $a(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l;return Ka(this,(function(d){switch(d.label){case 0:return[4,this._ensureCredentials()];case 1:if(!d.sent()||!this._isWithCredentials(this._config))throw new Error(To.NO_CREDENTIALS);n=Object.assign({},this._config,t),r=n.bucket,i=n.track,o=this._prefix(n),s=o+e,a=this._createNewS3Client(n),Ha.debug("remove "+e+" from "+s),u=new Yi({Bucket:r,Key:s}),d.label=2;case 2:return d.trys.push([2,4,,5]),[4,a.send(u)];case 3:return c=d.sent(),Ho(i,"delete",{method:"remove",result:"success"},null,"Deleted "+e+" successfully"),[2,c];case 4:throw l=d.sent(),Ho(i,"delete",{method:"remove",result:"failed"},null,"Deletion of "+e+" failed with "+l),l;case 5:return[2]}}))}))},e.prototype._list=function(e,t,n){return $a(this,void 0,void 0,(function(){var r,i,o,s;return Ka(this,(function(a){switch(a.label){case 0:return r={contents:[],nextToken:""},i=this._createNewS3Client(t),o=new Zi(qa({},e)),[4,i.send(o)];case 1:return(s=a.sent())&&s.Contents&&(r.contents=s.Contents.map((function(e){return{key:e.Key.substr(n.length),eTag:e.ETag,lastModified:e.LastModified,size:e.Size}})),r.nextToken=s.NextContinuationToken),[2,r]}}))}))},e.prototype.list=function(e,t){return $a(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,d,f;return Ka(this,(function(p){switch(p.label){case 0:return[4,this._ensureCredentials()];case 1:if(!p.sent()||!this._isWithCredentials(this._config))throw new Error(To.NO_CREDENTIALS);n=Object.assign({},this._config,t),r=n.bucket,i=n.track,o=n.maxKeys,s=this._prefix(n),a=s+e,Ha.debug("list "+e+" from "+a),p.label=2;case 2:if(p.trys.push([2,10,,11]),u=[],c=void 0,l=void 0,d={Bucket:r,Prefix:a,MaxKeys:1e3},"ALL"!==o)return[3,7];p.label=3;case 3:return d.ContinuationToken=c,d.MaxKeys=1e3,[4,this._list(d,n,s)];case 4:l=p.sent(),u.push.apply(u,Ga(l.contents)),l.nextToken&&(c=l.nextToken),p.label=5;case 5:if(l.nextToken)return[3,3];p.label=6;case 6:return[3,9];case 7:return d.MaxKeys=o<1e3||"string"==typeof o?o:1e3,[4,this._list(d,n,s)];case 8:l=p.sent(),u.push.apply(u,Ga(l.contents)),o>1e3&&Ha.warn("maxkeys can be from 0 - 1000 or 'ALL'. To list all files you can set maxKeys to 'ALL'."),p.label=9;case 9:return Ho(i,"list",{method:"list",result:"success"},null,u.length+" items returned from list operation"),Ha.debug("list",u),[2,u];case 10:throw f=p.sent(),Ha.warn("list error",f),Ho(i,"list",{method:"list",result:"failed"},null,"Listing items failed: "+f.message),f;case 11:return[2]}}))}))},e.prototype._ensureCredentials=function(){return $a(this,void 0,void 0,(function(){var e,t,n;return Ka(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,a.a.get()];case 1:return(e=r.sent())?(t=a.a.shear(e),Ha.debug("set credentials for storage",t),this._config.credentials=t,[2,!0]):[2,!1];case 2:return n=r.sent(),Ha.warn("ensure credentials error",n),[2,!1];case 3:return[2]}}))}))},e.prototype._isWithCredentials=function(e){return"object"===za(e)&&e.hasOwnProperty("credentials")},e.prototype._prefix=function(e){var t=e.credentials,n=e.level,r=e.customPrefix||{},i=e.identityId||t.identityId,o=(void 0!==r.private?r.private:"private/")+i+"/",s=(void 0!==r.protected?r.protected:"protected/")+i+"/",a=void 0!==r.public?r.public:"public/";switch(n){case"private":return o;case"protected":return s;default:return a}},e.prototype._createNewS3Client=function(e,t){var n=ba(e,t);return n.middlewareStack.add(va(n.config),ga),n},e.CATEGORY="Storage",e.PROVIDER_NAME="AWSS3",e}(),Ja=function(){return(Ja=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Ya=new r.a("StorageClass"),Za=function(){function e(){this._config={},this._pluggables=[],this._cancelTokenSourceMap=new WeakMap,Ya.debug("Storage Options",this._config),this.get=this.get.bind(this),this.put=this.put.bind(this),this.remove=this.remove.bind(this),this.list=this.list.bind(this)}return e.prototype.getModuleName=function(){return"Storage"},e.prototype.addPluggable=function(e){if(e&&"Storage"===e.getCategory())return this._pluggables.push(e),e.configure(this._config[e.getProviderName()])},e.prototype.getPluggable=function(e){var t=this._pluggables.find((function(t){return t.getProviderName()===e}));return void 0===t?(Ya.debug("No plugin found with providerName",e),null):t},e.prototype.removePluggable=function(e){this._pluggables=this._pluggables.filter((function(t){return t.getProviderName()!==e}))},e.prototype.configure=function(e){var t=this;if(Ya.debug("configure Storage"),!e)return this._config;var n=i.a.parseMobilehubConfig(e),r=Object.keys(n.Storage),o=["bucket","region","level","track","customPrefix","serverSideEncryption","SSECustomerAlgorithm","SSECustomerKey","SSECustomerKeyMD5","SSEKMSKeyId"],s=function(e){return o.some((function(t){return t===e}))};return r&&r.find((function(e){return s(e)}))&&!n.Storage.AWSS3&&(n.Storage.AWSS3={}),Object.entries(n.Storage).map((function(e){var t=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}(e,2),r=t[0],i=t[1];r&&s(r)&&void 0!==i&&(n.Storage.AWSS3[r]=i,delete n.Storage[r])})),Object.keys(n.Storage).forEach((function(e){"string"!=typeof n.Storage[e]&&(t._config[e]=Ja(Ja({},t._config[e]),n.Storage[e]))})),this._pluggables.forEach((function(e){e.configure(t._config[e.getProviderName()])})),0===this._pluggables.length&&this.addPluggable(new Wa),this._config},e.prototype.getCancellableTokenSource=function(){return Uo.a.CancelToken.source()},e.prototype.updateRequestToBeCancellable=function(e,t){this._cancelTokenSourceMap.set(e,t)},e.prototype.isUploadTask=function(e){return void 0!==e&&"function"==typeof e.pause&&"function"==typeof e.resume},e.prototype.cancel=function(e,t){if(e instanceof Fa)return e._cancel();var n=this._cancelTokenSourceMap.get(e);n?n.cancel(t):Ya.debug("The request does not map to any cancel token")},e.prototype.copy=function(e,t,n){var r=(null==n?void 0:n.provider)||"AWSS3",i=this._pluggables.find((function(e){return e.getProviderName()===r}));if(void 0===i)return Ya.debug("No plugin found with providerName",r),Promise.reject("No plugin found in Storage for the provider");var o=this.getCancellableTokenSource();if("function"!=typeof i.copy)return Promise.reject(".copy is not implemented on provider "+i.getProviderName());var s=i.copy(e,t,Ja(Ja({},n),{cancelTokenSource:o}));return this.updateRequestToBeCancellable(s,o),s},e.prototype.get=function(e,t){var n=(null==t?void 0:t.provider)||"AWSS3",r=this._pluggables.find((function(e){return e.getProviderName()===n}));if(void 0===r)return Ya.debug("No plugin found with providerName",n),Promise.reject("No plugin found in Storage for the provider");var i=this.getCancellableTokenSource(),o=r.get(e,Ja(Ja({},t),{cancelTokenSource:i}));return this.updateRequestToBeCancellable(o,i),o},e.prototype.isCancelError=function(e){return Uo.a.isCancel(e)},e.prototype.put=function(e,t,n){var r=(null==n?void 0:n.provider)||"AWSS3",i=this._pluggables.find((function(e){return e.getProviderName()===r}));if(void 0===i)return Ya.debug("No plugin found with providerName",r),Promise.reject("No plugin found in Storage for the provider");var o=this.getCancellableTokenSource(),s=i.put(e,t,Ja(Ja({},n),{cancelTokenSource:o}));return this.isUploadTask(s)||this.updateRequestToBeCancellable(s,o),s},e.prototype.remove=function(e,t){var n=(null==t?void 0:t.provider)||"AWSS3",r=this._pluggables.find((function(e){return e.getProviderName()===n}));return void 0===r?(Ya.debug("No plugin found with providerName",n),Promise.reject("No plugin found in Storage for the provider")):r.remove(e,t)},e.prototype.list=function(e,t){var n=(null==t?void 0:t.provider)||"AWSS3",r=this._pluggables.find((function(e){return e.getProviderName()===n}));return void 0===r?(Ya.debug("No plugin found with providerName",n),Promise.reject("No plugin found in Storage for the provider")):r.list(e,t)},e}(),Qa=n(20),Xa=function(){return(Xa=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},eu=new r.a("Storage"),tu=null,nu=function(){if(tu)return tu;eu.debug("Create Storage Instance, debug"),(tu=new Za).vault=new Za;var e=tu.configure;return tu.configure=function(t){eu.debug("storage configure called");var n=Xa({},e.call(tu,t));Object.keys(n).forEach((function(e){"string"!=typeof n[e]&&(n[e]=Xa(Xa({},n[e]),{level:"private"}))})),eu.debug("storage vault configure called"),tu.vault.configure(n)},tu}();Qa.a.register(nu)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=new(n(48).a)("ClientDevice_Browser");var i=function(){function e(){}return e.clientInfo=function(){return"undefined"==typeof window?{}:function(){if("undefined"==typeof window)return r.warn("No window object available to get browser client info"),{};var e=window.navigator;if(!e)return r.warn("No navigator object available to get browser client info"),{};var t,n=e.platform,i=e.product,o=e.vendor,s=e.userAgent,a=e.language,u=function(e){var t=/.+(Opera[\s[A-Z]*|OPR[\sA-Z]*)\/([0-9\.]+).*/i.exec(e);if(t)return{type:t[1],version:t[2]};var n=/.+(Trident|Edge)\/([0-9\.]+).*/i.exec(e);if(n)return{type:n[1],version:n[2]};var r=/.+(Chrome|Firefox|FxiOS)\/([0-9\.]+).*/i.exec(e);if(r)return{type:r[1],version:r[2]};var i=/.+(Safari)\/([0-9\.]+).*/i.exec(e);if(i)return{type:i[1],version:i[2]};var o=/.+(AppleWebKit)\/([0-9\.]+).*/i.exec(e);if(o)return{type:o[1],version:o[2]};var s=/.*([A-Z]+)\/([0-9\.]+).*/i.exec(e);return s?{type:s[1],version:s[2]}:{type:"",version:""}}(s),c=(t=/\(([A-Za-z\s].*)\)/.exec((new Date).toString()))&&t[1]||"";return{platform:n,make:i||o,model:u.type,version:u.version,appVersion:[u.type,u.version].join("/"),language:a,timezone:c}}()},e.dimension=function(){return"undefined"==typeof window?(r.warn("No window object available to get browser client info"),{width:320,height:320}):{width:window.innerWidth,height:window.innerHeight}},e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(48),i=new r.a("I18n"),o=function(){function e(e){this._options=null,this._lang=null,this._dict={},this._options=Object.assign({},e),this._lang=this._options.language,!this._lang&&"undefined"!=typeof window&&window&&window.navigator&&(this._lang=window.navigator.language),i.debug(this._lang)}return e.prototype.setLanguage=function(e){this._lang=e},e.prototype.get=function(e,t){if(void 0===t&&(t=void 0),!this._lang)return void 0!==t?t:e;var n=this._lang,r=this.getByLanguage(e,n);return r||(n.indexOf("-")>0&&(r=this.getByLanguage(e,n.split("-")[0])),r||(void 0!==t?t:e))},e.prototype.getByLanguage=function(e,t,n){if(void 0===n&&(n=null),!t)return n;var r=this._dict[t];return r?r[e]:n},e.prototype.putVocabulariesForLanguage=function(e,t){var n=this._dict[e];n||(n=this._dict[e]={}),Object.assign(n,t)},e.prototype.putVocabularies=function(e){var t=this;Object.keys(e).map((function(n){t.putVocabulariesForLanguage(n,e[n])}))},e}(),s=n(20),a=new r.a("I18n"),u=null,c=null,l=function(){function e(){}return e.configure=function(t){return a.debug("configure I18n"),t?(u=Object.assign({},u,t.I18n||t),e.createInstance(),u):u},e.getModuleName=function(){return"I18n"},e.createInstance=function(){a.debug("create I18n instance"),c||(c=new o(u))},e.setLanguage=function(t){return e.checkConfig(),c.setLanguage(t)},e.get=function(t,n){return e.checkConfig()?c.get(t,n):void 0===n?t:n},e.putVocabulariesForLanguage=function(t,n){return e.checkConfig(),c.putVocabulariesForLanguage(t,n)},e.putVocabularies=function(t){return e.checkConfig(),c.putVocabularies(t)},e.checkConfig=function(){return c||(c=new o(u)),!0},e}();s.a.register(l)},function(e,t,n){var r;e.exports=(r=n(38),function(e){var t=r,n=t.lib,i=n.WordArray,o=n.Hasher,s=t.algo,a=[],u=[];!function(){function t(t){for(var n=e.sqrt(t),r=2;r<=n;r++)if(!(t%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,i=0;i<64;)t(r)&&(i<8&&(a[i]=n(e.pow(r,.5))),u[i]=n(e.pow(r,1/3)),i++),r++}();var c=[],l=s.SHA256=o.extend({_doReset:function(){this._hash=new i.init(a.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],a=n[4],l=n[5],d=n[6],f=n[7],p=0;p<64;p++){if(p<16)c[p]=0|e[t+p];else{var h=c[p-15],v=(h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3,g=c[p-2],m=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;c[p]=v+c[p-7]+m+c[p-16]}var y=r&i^r&o^i&o,b=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),w=f+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&l^~a&d)+u[p]+c[p];f=d,d=l,l=a,a=s+w|0,s=o,o=i,i=r,r=w+(b+y)|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0,n[5]=n[5]+l|0,n[6]=n[6]+d|0,n[7]=n[7]+f|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=e.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=o._createHelper(l),t.HmacSHA256=o._createHmacHelper(l)}(Math),r.SHA256)},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(48),i=n(34),o=n(20);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=function(){function e(){this._logger=new r.a("ServiceWorker")}return Object.defineProperty(e.prototype,"serviceWorker",{get:function(){return this._serviceWorker},enumerable:!0,configurable:!0}),e.prototype.register=function(e,t){var n=this;return void 0===e&&(e="/service-worker.js"),void 0===t&&(t="/"),this._logger.debug("registering "+e),this._logger.debug("registering service worker with scope "+t),new Promise((function(r,i){if(!navigator||!("serviceWorker"in navigator))return i(new Error("Service Worker not available"));navigator.serviceWorker.register(e,{scope:t}).then((function(e){return e.installing?n._serviceWorker=e.installing:e.waiting?n._serviceWorker=e.waiting:e.active&&(n._serviceWorker=e.active),n._registration=e,n._setupListeners(),n._logger.debug("Service Worker Registration Success: "+e),r(e)})).catch((function(e){return n._logger.debug("Service Worker Registration Failed "+e),i(e)}))}))},e.prototype.enablePush=function(e){var t=this;if(!this._registration)throw new Error("Service Worker not registered");return this._publicKey=e,new Promise((function(n,r){if(!Object(i.b)().isBrowser)return r(new Error("Service Worker not available"));t._registration.pushManager.getSubscription().then((function(r){if(!r)return t._logger.debug("User is NOT subscribed to push"),t._registration.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t._urlB64ToUint8Array(e)}).then((function(e){t._subscription=e,t._logger.debug("User subscribed: "+JSON.stringify(e)),n(e)})).catch((function(e){t._logger.error(e)}));t._subscription=r,t._logger.debug("User is subscribed to push: "+JSON.stringify(r)),n(r)}))}))},e.prototype._urlB64ToUint8Array=function(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(t),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r},e.prototype.send=function(e){this._serviceWorker&&this._serviceWorker.postMessage("object"===s(e)?JSON.stringify(e):e)},e.prototype._setupListeners=function(){var e=this;this._serviceWorker.addEventListener("statechange",(function(t){var n=e._serviceWorker.state;e._logger.debug("ServiceWorker statechange: "+n),o.a.Analytics&&"function"==typeof o.a.Analytics.record&&o.a.Analytics.record({name:"ServiceWorker",attributes:{state:n}})})),this._serviceWorker.addEventListener("message",(function(t){e._logger.debug("ServiceWorker message event: "+t)}))},e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return rr}));var r=n(78),i=n(48),o=n(113),s=n(93),a=n(34),u=n(49),c=n(80),l=function(e,t){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var f,p,h,v,g,m,y,b,w,_,S,E,C,A,O,I,T,x,P,k,D,N,L,M,j,R,U,B,F,z,q,$,K,V,G,H,W,J,Y,Z,Q,X,ee,te,ne,re,ie,oe,se,ae,ue,ce,le,de,fe,pe,he,ve,ge,me,ye,be,we,_e,Se,Ee,Ce,Ae,Oe,Ie,Te,xe,Pe,ke,De,Ne,Le,Me,je,Re,Ue,Be,Fe,ze,qe,$e,Ke,Ve,Ge,He,We,Je,Ye,Ze,Qe,Xe,et,tt,nt,rt,it,ot,st,at,ut,ct,lt,dt,ft,pt,ht,vt,gt,mt,yt,bt,wt,_t,St,Et,Ct,At,Ot,It,Tt,xt,Pt,kt,Dt,Nt,Lt,Mt=function(){return(Mt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function jt(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function Rt(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}function Ut(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}Object.create,Object.create,(f||(f={})).filterSensitiveLog=function(e){return Mt({},e)},(p||(p={})).filterSensitiveLog=function(e){return Mt({},e)},(h||(h={})).filterSensitiveLog=function(e){return Mt({},e)},(v||(v={})).filterSensitiveLog=function(e){return Mt({},e)},(g||(g={})).filterSensitiveLog=function(e){return Mt({},e)},(m||(m={})).filterSensitiveLog=function(e){return Mt({},e)},(y||(y={})).filterSensitiveLog=function(e){return Mt({},e)},(b||(b={})).filterSensitiveLog=function(e){return Mt({},e)},(w||(w={})).filterSensitiveLog=function(e){return Mt({},e)},(_||(_={})).filterSensitiveLog=function(e){return Mt({},e)},(S||(S={})).filterSensitiveLog=function(e){return Mt({},e)},(E||(E={})).filterSensitiveLog=function(e){return Mt({},e)},(C||(C={})).filterSensitiveLog=function(e){return Mt({},e)},(A||(A={})).filterSensitiveLog=function(e){return Mt({},e)},(O||(O={})).filterSensitiveLog=function(e){return Mt({},e)},(I||(I={})).filterSensitiveLog=function(e){return Mt({},e)},(T||(T={})).filterSensitiveLog=function(e){return Mt({},e)},(x||(x={})).filterSensitiveLog=function(e){return Mt({},e)},(P||(P={})).filterSensitiveLog=function(e){return Mt({},e)},(k||(k={})).filterSensitiveLog=function(e){return Mt({},e)},(D||(D={})).filterSensitiveLog=function(e){return Mt({},e)},(N||(N={})).filterSensitiveLog=function(e){return Mt({},e)},(L||(L={})).filterSensitiveLog=function(e){return Mt({},e)},(M||(M={})).filterSensitiveLog=function(e){return Mt({},e)},(j||(j={})).filterSensitiveLog=function(e){return Mt({},e)},(R||(R={})).filterSensitiveLog=function(e){return Mt({},e)},(U||(U={})).filterSensitiveLog=function(e){return Mt({},e)},(B||(B={})).filterSensitiveLog=function(e){return Mt({},e)},(F||(F={})).filterSensitiveLog=function(e){return Mt({},e)},(z||(z={})).filterSensitiveLog=function(e){return Mt({},e)},(q||(q={})).filterSensitiveLog=function(e){return Mt({},e)},($||($={})).filterSensitiveLog=function(e){return Mt({},e)},(K||(K={})).filterSensitiveLog=function(e){return Mt({},e)},(V||(V={})).filterSensitiveLog=function(e){return Mt({},e)},(G||(G={})).filterSensitiveLog=function(e){return Mt({},e)},(H||(H={})).filterSensitiveLog=function(e){return Mt({},e)},(W||(W={})).filterSensitiveLog=function(e){return Mt({},e)},(J||(J={})).filterSensitiveLog=function(e){return Mt({},e)},(Y||(Y={})).filterSensitiveLog=function(e){return Mt({},e)},(Z||(Z={})).filterSensitiveLog=function(e){return Mt({},e)},(Q||(Q={})).filterSensitiveLog=function(e){return Mt({},e)},(X||(X={})).filterSensitiveLog=function(e){return Mt({},e)},(ee||(ee={})).filterSensitiveLog=function(e){return Mt({},e)},(te||(te={})).filterSensitiveLog=function(e){return Mt({},e)},(ne||(ne={})).filterSensitiveLog=function(e){return Mt({},e)},(re||(re={})).filterSensitiveLog=function(e){return Mt({},e)},(ie||(ie={})).filterSensitiveLog=function(e){return Mt({},e)},(oe||(oe={})).filterSensitiveLog=function(e){return Mt({},e)},(se||(se={})).filterSensitiveLog=function(e){return Mt({},e)},(ae||(ae={})).filterSensitiveLog=function(e){return Mt({},e)},(ue||(ue={})).filterSensitiveLog=function(e){return Mt({},e)},(ce||(ce={})).filterSensitiveLog=function(e){return Mt({},e)},(le||(le={})).filterSensitiveLog=function(e){return Mt({},e)},(de||(de={})).filterSensitiveLog=function(e){return Mt({},e)},(fe||(fe={})).filterSensitiveLog=function(e){return Mt({},e)},(pe||(pe={})).filterSensitiveLog=function(e){return Mt({},e)},(he||(he={})).filterSensitiveLog=function(e){return Mt({},e)},(ve||(ve={})).filterSensitiveLog=function(e){return Mt({},e)},(ge||(ge={})).filterSensitiveLog=function(e){return Mt({},e)},(me||(me={})).filterSensitiveLog=function(e){return Mt({},e)},(ye||(ye={})).filterSensitiveLog=function(e){return Mt({},e)},(be||(be={})).filterSensitiveLog=function(e){return Mt({},e)},(we||(we={})).filterSensitiveLog=function(e){return Mt({},e)},(_e||(_e={})).filterSensitiveLog=function(e){return Mt({},e)},(Se||(Se={})).filterSensitiveLog=function(e){return Mt({},e)},(Ee||(Ee={})).filterSensitiveLog=function(e){return Mt({},e)},(Ce||(Ce={})).filterSensitiveLog=function(e){return Mt({},e)},(Ae||(Ae={})).filterSensitiveLog=function(e){return Mt({},e)},(Oe||(Oe={})).filterSensitiveLog=function(e){return Mt({},e)},(Ie||(Ie={})).filterSensitiveLog=function(e){return Mt({},e)},(Te||(Te={})).filterSensitiveLog=function(e){return Mt({},e)},(xe||(xe={})).filterSensitiveLog=function(e){return Mt({},e)},(Pe||(Pe={})).filterSensitiveLog=function(e){return Mt({},e)},(ke||(ke={})).filterSensitiveLog=function(e){return Mt({},e)},(De||(De={})).filterSensitiveLog=function(e){return Mt({},e)},(Ne||(Ne={})).filterSensitiveLog=function(e){return Mt({},e)},(Le||(Le={})).filterSensitiveLog=function(e){return Mt({},e)},(Me||(Me={})).filterSensitiveLog=function(e){return Mt({},e)},(je||(je={})).filterSensitiveLog=function(e){return Mt({},e)},(Re||(Re={})).filterSensitiveLog=function(e){return Mt({},e)},(Ue||(Ue={})).filterSensitiveLog=function(e){return Mt({},e)},(Be||(Be={})).filterSensitiveLog=function(e){return Mt({},e)},(Fe||(Fe={})).filterSensitiveLog=function(e){return Mt({},e)},(ze||(ze={})).filterSensitiveLog=function(e){return Mt({},e)},(qe||(qe={})).filterSensitiveLog=function(e){return Mt({},e)},($e||($e={})).filterSensitiveLog=function(e){return Mt({},e)},(Ke||(Ke={})).filterSensitiveLog=function(e){return Mt({},e)},(Ve||(Ve={})).filterSensitiveLog=function(e){return Mt({},e)},(Ge||(Ge={})).filterSensitiveLog=function(e){return Mt({},e)},(He||(He={})).filterSensitiveLog=function(e){return Mt({},e)},(We||(We={})).filterSensitiveLog=function(e){return Mt({},e)},(Je||(Je={})).filterSensitiveLog=function(e){return Mt({},e)},(Ye||(Ye={})).filterSensitiveLog=function(e){return Mt({},e)},(Ze||(Ze={})).filterSensitiveLog=function(e){return Mt({},e)},(Qe||(Qe={})).filterSensitiveLog=function(e){return Mt({},e)},(Xe||(Xe={})).filterSensitiveLog=function(e){return Mt({},e)},(et||(et={})).filterSensitiveLog=function(e){return Mt({},e)},(tt||(tt={})).filterSensitiveLog=function(e){return Mt({},e)},(nt||(nt={})).filterSensitiveLog=function(e){return Mt({},e)},(rt||(rt={})).filterSensitiveLog=function(e){return Mt({},e)},(it||(it={})).filterSensitiveLog=function(e){return Mt({},e)},(ot||(ot={})).filterSensitiveLog=function(e){return Mt({},e)},(st||(st={})).filterSensitiveLog=function(e){return Mt({},e)},(at||(at={})).filterSensitiveLog=function(e){return Mt({},e)},(ut||(ut={})).filterSensitiveLog=function(e){return Mt({},e)},(ct||(ct={})).filterSensitiveLog=function(e){return Mt({},e)},(lt||(lt={})).filterSensitiveLog=function(e){return Mt({},e)},(dt||(dt={})).filterSensitiveLog=function(e){return Mt({},e)},(ft||(ft={})).filterSensitiveLog=function(e){return Mt({},e)},(pt||(pt={})).filterSensitiveLog=function(e){return Mt({},e)},(ht||(ht={})).filterSensitiveLog=function(e){return Mt({},e)},(vt||(vt={})).filterSensitiveLog=function(e){return Mt({},e)},(gt||(gt={})).filterSensitiveLog=function(e){return Mt({},e)},(mt||(mt={})).filterSensitiveLog=function(e){return Mt({},e)},(yt||(yt={})).filterSensitiveLog=function(e){return Mt({},e)},(bt||(bt={})).filterSensitiveLog=function(e){return Mt({},e)},(wt||(wt={})).filterSensitiveLog=function(e){return Mt({},e)},(_t||(_t={})).filterSensitiveLog=function(e){return Mt({},e)},(St||(St={})).filterSensitiveLog=function(e){return Mt({},e)},(Et||(Et={})).filterSensitiveLog=function(e){return Mt({},e)},(Ct||(Ct={})).filterSensitiveLog=function(e){return Mt({},e)},(At||(At={})).filterSensitiveLog=function(e){return Mt({},e)},(Ot||(Ot={})).filterSensitiveLog=function(e){return Mt({},e)},(It||(It={})).filterSensitiveLog=function(e){return Mt({},e)},(Tt||(Tt={})).filterSensitiveLog=function(e){return Mt({},e)},(xt||(xt={})).filterSensitiveLog=function(e){return Mt({},e)},(Pt||(Pt={})).filterSensitiveLog=function(e){return Mt({},e)},(kt||(kt={})).filterSensitiveLog=function(e){return Mt({},e)},(Dt||(Dt={})).filterSensitiveLog=function(e){return Mt({},e)},(Nt||(Nt={})).filterSensitiveLog=function(e){return Mt({},e)},(Lt||(Lt={})).filterSensitiveLog=function(e){return Mt({},e)};var Bt=n(3),Ft=n(1),zt=function(e,t){return jt(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,d,f,p,h,v;return Rt(this,(function(g){switch(g.label){case 0:return r=[Mt({},e)],v={},[4,dn(e.body,t)];case 1:switch(n=Mt.apply(void 0,r.concat([(v.body=g.sent(),v)])),o="UnknownError",o=fn(e,n.body)){case"BadRequestException":case"com.amazonaws.pinpoint#BadRequestException":return[3,2];case"ForbiddenException":case"com.amazonaws.pinpoint#ForbiddenException":return[3,4];case"InternalServerErrorException":case"com.amazonaws.pinpoint#InternalServerErrorException":return[3,6];case"MethodNotAllowedException":case"com.amazonaws.pinpoint#MethodNotAllowedException":return[3,8];case"NotFoundException":case"com.amazonaws.pinpoint#NotFoundException":return[3,10];case"PayloadTooLargeException":case"com.amazonaws.pinpoint#PayloadTooLargeException":return[3,12];case"TooManyRequestsException":case"com.amazonaws.pinpoint#TooManyRequestsException":return[3,14]}return[3,16];case 2:return s=[{}],[4,$t(n,t)];case 3:return i=Mt.apply(void 0,[Mt.apply(void 0,s.concat([g.sent()])),{name:o,$metadata:ln(e)}]),[3,17];case 4:return a=[{}],[4,Kt(n,t)];case 5:return i=Mt.apply(void 0,[Mt.apply(void 0,a.concat([g.sent()])),{name:o,$metadata:ln(e)}]),[3,17];case 6:return u=[{}],[4,Vt(n,t)];case 7:return i=Mt.apply(void 0,[Mt.apply(void 0,u.concat([g.sent()])),{name:o,$metadata:ln(e)}]),[3,17];case 8:return c=[{}],[4,Gt(n,t)];case 9:return i=Mt.apply(void 0,[Mt.apply(void 0,c.concat([g.sent()])),{name:o,$metadata:ln(e)}]),[3,17];case 10:return l=[{}],[4,Ht(n,t)];case 11:return i=Mt.apply(void 0,[Mt.apply(void 0,l.concat([g.sent()])),{name:o,$metadata:ln(e)}]),[3,17];case 12:return d=[{}],[4,Wt(n,t)];case 13:return i=Mt.apply(void 0,[Mt.apply(void 0,d.concat([g.sent()])),{name:o,$metadata:ln(e)}]),[3,17];case 14:return f=[{}],[4,Jt(n,t)];case 15:return i=Mt.apply(void 0,[Mt.apply(void 0,f.concat([g.sent()])),{name:o,$metadata:ln(e)}]),[3,17];case 16:p=n.body,o=p.code||p.Code||o,i=Mt(Mt({},p),{name:""+o,message:p.message||p.Message||o,$fault:"client",$metadata:ln(e)}),g.label=17;case 17:return h=i.message||i.Message||o,i.message=h,delete i.Message,[2,Promise.reject(Object.assign(new Error(h),i))]}}))}))},qt=function(e,t){return jt(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,d,f,p,h,v;return Rt(this,(function(g){switch(g.label){case 0:return r=[Mt({},e)],v={},[4,dn(e.body,t)];case 1:switch(n=Mt.apply(void 0,r.concat([(v.body=g.sent(),v)])),o="UnknownError",o=fn(e,n.body)){case"BadRequestException":case"com.amazonaws.pinpoint#BadRequestException":return[3,2];case"ForbiddenException":case"com.amazonaws.pinpoint#ForbiddenException":return[3,4];case"InternalServerErrorException":case"com.amazonaws.pinpoint#InternalServerErrorException":return[3,6];case"MethodNotAllowedException":case"com.amazonaws.pinpoint#MethodNotAllowedException":return[3,8];case"NotFoundException":case"com.amazonaws.pinpoint#NotFoundException":return[3,10];case"PayloadTooLargeException":case"com.amazonaws.pinpoint#PayloadTooLargeException":return[3,12];case"TooManyRequestsException":case"com.amazonaws.pinpoint#TooManyRequestsException":return[3,14]}return[3,16];case 2:return s=[{}],[4,$t(n,t)];case 3:return i=Mt.apply(void 0,[Mt.apply(void 0,s.concat([g.sent()])),{name:o,$metadata:ln(e)}]),[3,17];case 4:return a=[{}],[4,Kt(n,t)];case 5:return i=Mt.apply(void 0,[Mt.apply(void 0,a.concat([g.sent()])),{name:o,$metadata:ln(e)}]),[3,17];case 6:return u=[{}],[4,Vt(n,t)];case 7:return i=Mt.apply(void 0,[Mt.apply(void 0,u.concat([g.sent()])),{name:o,$metadata:ln(e)}]),[3,17];case 8:return c=[{}],[4,Gt(n,t)];case 9:return i=Mt.apply(void 0,[Mt.apply(void 0,c.concat([g.sent()])),{name:o,$metadata:ln(e)}]),[3,17];case 10:return l=[{}],[4,Ht(n,t)];case 11:return i=Mt.apply(void 0,[Mt.apply(void 0,l.concat([g.sent()])),{name:o,$metadata:ln(e)}]),[3,17];case 12:return d=[{}],[4,Wt(n,t)];case 13:return i=Mt.apply(void 0,[Mt.apply(void 0,d.concat([g.sent()])),{name:o,$metadata:ln(e)}]),[3,17];case 14:return f=[{}],[4,Jt(n,t)];case 15:return i=Mt.apply(void 0,[Mt.apply(void 0,f.concat([g.sent()])),{name:o,$metadata:ln(e)}]),[3,17];case 16:p=n.body,o=p.code||p.Code||o,i=Mt(Mt({},p),{name:""+o,message:p.message||p.Message||o,$fault:"client",$metadata:ln(e)}),g.label=17;case 17:return h=i.message||i.Message||o,i.message=h,delete i.Message,[2,Promise.reject(Object.assign(new Error(h),i))]}}))}))},$t=function(e,t){return jt(void 0,void 0,void 0,(function(){var t,n;return Rt(this,(function(r){return t={name:"BadRequestException",$fault:"client",$metadata:ln(e),Message:void 0,RequestID:void 0},void 0!==(n=e.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]}))}))},Kt=function(e,t){return jt(void 0,void 0,void 0,(function(){var t,n;return Rt(this,(function(r){return t={name:"ForbiddenException",$fault:"client",$metadata:ln(e),Message:void 0,RequestID:void 0},void 0!==(n=e.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]}))}))},Vt=function(e,t){return jt(void 0,void 0,void 0,(function(){var t,n;return Rt(this,(function(r){return t={name:"InternalServerErrorException",$fault:"server",$metadata:ln(e),Message:void 0,RequestID:void 0},void 0!==(n=e.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]}))}))},Gt=function(e,t){return jt(void 0,void 0,void 0,(function(){var t,n;return Rt(this,(function(r){return t={name:"MethodNotAllowedException",$fault:"client",$metadata:ln(e),Message:void 0,RequestID:void 0},void 0!==(n=e.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]}))}))},Ht=function(e,t){return jt(void 0,void 0,void 0,(function(){var t,n;return Rt(this,(function(r){return t={name:"NotFoundException",$fault:"client",$metadata:ln(e),Message:void 0,RequestID:void 0},void 0!==(n=e.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]}))}))},Wt=function(e,t){return jt(void 0,void 0,void 0,(function(){var t,n;return Rt(this,(function(r){return t={name:"PayloadTooLargeException",$fault:"client",$metadata:ln(e),Message:void 0,RequestID:void 0},void 0!==(n=e.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]}))}))},Jt=function(e,t){return jt(void 0,void 0,void 0,(function(){var t,n;return Rt(this,(function(r){return t={name:"TooManyRequestsException",$fault:"client",$metadata:ln(e),Message:void 0,RequestID:void 0},void 0!==(n=e.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]}))}))},Yt=function(e,t){return Mt(Mt(Mt(Mt(Mt(Mt(Mt(Mt({},void 0!==e.AppVersion&&null!==e.AppVersion&&{AppVersion:e.AppVersion}),void 0!==e.Locale&&null!==e.Locale&&{Locale:e.Locale}),void 0!==e.Make&&null!==e.Make&&{Make:e.Make}),void 0!==e.Model&&null!==e.Model&&{Model:e.Model}),void 0!==e.ModelVersion&&null!==e.ModelVersion&&{ModelVersion:e.ModelVersion}),void 0!==e.Platform&&null!==e.Platform&&{Platform:e.Platform}),void 0!==e.PlatformVersion&&null!==e.PlatformVersion&&{PlatformVersion:e.PlatformVersion}),void 0!==e.Timezone&&null!==e.Timezone&&{Timezone:e.Timezone})},Zt=function(e,t){return Mt(Mt(Mt(Mt(Mt(Mt({},void 0!==e.City&&null!==e.City&&{City:e.City}),void 0!==e.Country&&null!==e.Country&&{Country:e.Country}),void 0!==e.Latitude&&null!==e.Latitude&&{Latitude:e.Latitude}),void 0!==e.Longitude&&null!==e.Longitude&&{Longitude:e.Longitude}),void 0!==e.PostalCode&&null!==e.PostalCode&&{PostalCode:e.PostalCode}),void 0!==e.Region&&null!==e.Region&&{Region:e.Region})},Qt=function(e,t){return Mt(Mt({},void 0!==e.UserAttributes&&null!==e.UserAttributes&&{UserAttributes:rn(e.UserAttributes,t)}),void 0!==e.UserId&&null!==e.UserId&&{UserId:e.UserId})},Xt=function(e,t){return Object.entries(e).reduce((function(e,t){var n,r=Ut(t,2),i=r[0],o=r[1];return null===o?e:Mt(Mt({},e),((n={})[i]=o,n))}),{})},en=function(e,t){return Object.entries(e).reduce((function(e,t){var n,r=Ut(t,2),i=r[0],o=r[1];return null===o?e:Mt(Mt({},e),((n={})[i]=o,n))}),{})},tn=function(e,t){return Object.entries(e).reduce((function(e,n){var r,i=Ut(n,2),o=i[0],s=i[1];return null===s?e:Mt(Mt({},e),((r={})[o]=function(e,t){return Mt(Mt(Mt(Mt(Mt(Mt(Mt(Mt(Mt(Mt({},void 0!==e.AppPackageName&&null!==e.AppPackageName&&{AppPackageName:e.AppPackageName}),void 0!==e.AppTitle&&null!==e.AppTitle&&{AppTitle:e.AppTitle}),void 0!==e.AppVersionCode&&null!==e.AppVersionCode&&{AppVersionCode:e.AppVersionCode}),void 0!==e.Attributes&&null!==e.Attributes&&{Attributes:en(e.Attributes)}),void 0!==e.ClientSdkVersion&&null!==e.ClientSdkVersion&&{ClientSdkVersion:e.ClientSdkVersion}),void 0!==e.EventType&&null!==e.EventType&&{EventType:e.EventType}),void 0!==e.Metrics&&null!==e.Metrics&&{Metrics:Xt(e.Metrics,t)}),void 0!==e.SdkName&&null!==e.SdkName&&{SdkName:e.SdkName}),void 0!==e.Session&&null!==e.Session&&{Session:sn(e.Session,t)}),void 0!==e.Timestamp&&null!==e.Timestamp&&{Timestamp:e.Timestamp})}(s,t),r))}),{})},nn=function(e,t){return Object.entries(e).reduce((function(e,n){var r,i=Ut(n,2),o=i[0],s=i[1];return null===s?e:Mt(Mt({},e),((r={})[o]=function(e,t){return Mt(Mt({},void 0!==e.Endpoint&&null!==e.Endpoint&&{Endpoint:on(e.Endpoint,t)}),void 0!==e.Events&&null!==e.Events&&{Events:tn(e.Events,t)})}(s,t),r))}),{})},rn=function(e,t){return Object.entries(e).reduce((function(e,t){var n,r=Ut(t,2),i=r[0],o=r[1];return null===o?e:Mt(Mt({},e),((n={})[i]=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:e}))}(o),n))}),{})},on=function(e,t){return Mt(Mt(Mt(Mt(Mt(Mt(Mt(Mt(Mt(Mt(Mt({},void 0!==e.Address&&null!==e.Address&&{Address:e.Address}),void 0!==e.Attributes&&null!==e.Attributes&&{Attributes:rn(e.Attributes,t)}),void 0!==e.ChannelType&&null!==e.ChannelType&&{ChannelType:e.ChannelType}),void 0!==e.Demographic&&null!==e.Demographic&&{Demographic:Yt(e.Demographic)}),void 0!==e.EffectiveDate&&null!==e.EffectiveDate&&{EffectiveDate:e.EffectiveDate}),void 0!==e.EndpointStatus&&null!==e.EndpointStatus&&{EndpointStatus:e.EndpointStatus}),void 0!==e.Location&&null!==e.Location&&{Location:Zt(e.Location)}),void 0!==e.Metrics&&null!==e.Metrics&&{Metrics:Xt(e.Metrics,t)}),void 0!==e.OptOut&&null!==e.OptOut&&{OptOut:e.OptOut}),void 0!==e.RequestId&&null!==e.RequestId&&{RequestId:e.RequestId}),void 0!==e.User&&null!==e.User&&{User:Qt(e.User,t)})},sn=function(e,t){return Mt(Mt(Mt(Mt({},void 0!==e.Duration&&null!==e.Duration&&{Duration:e.Duration}),void 0!==e.Id&&null!==e.Id&&{Id:e.Id}),void 0!==e.StartTimestamp&&null!==e.StartTimestamp&&{StartTimestamp:e.StartTimestamp}),void 0!==e.StopTimestamp&&null!==e.StopTimestamp&&{StopTimestamp:e.StopTimestamp})},an=function(e,t){return{Message:void 0!==e.Message&&null!==e.Message?e.Message:void 0,StatusCode:void 0!==e.StatusCode&&null!==e.StatusCode?e.StatusCode:void 0}},un=function(e,t){return Object.entries(e).reduce((function(e,t){var n,r=Ut(t,2),i=r[0],o=r[1];return null===o?e:Mt(Mt({},e),((n={})[i]=function(e,t){return{Message:void 0!==e.Message&&null!==e.Message?e.Message:void 0,StatusCode:void 0!==e.StatusCode&&null!==e.StatusCode?e.StatusCode:void 0}}(o),n))}),{})},cn=function(e,t){return Object.entries(e).reduce((function(e,t){var n,r=Ut(t,2),i=r[0],o=r[1];return null===o?e:Mt(Mt({},e),((n={})[i]=function(e,t){return{EndpointItemResponse:void 0!==e.EndpointItemResponse&&null!==e.EndpointItemResponse?an(e.EndpointItemResponse):void 0,EventsItemResponse:void 0!==e.EventsItemResponse&&null!==e.EventsItemResponse?un(e.EventsItemResponse):void 0}}(o),n))}),{})},ln=function(e){var t;return{httpStatusCode:e.statusCode,requestId:null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},dn=function(e,t){return function(e,t){return function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)}(e,t).then((function(e){return t.utf8Encoder(e)}))}(e,t).then((function(e){return e.length?JSON.parse(e):{}}))},fn=function(e,t){var n,r=function(e){var t=e;return t.indexOf(":")>=0&&(t=t.split(":")[0]),t.indexOf("#")>=0&&(t=t.split("#")[1]),t},i=(n=e.headers,"x-amzn-errortype",Object.keys(n).find((function(e){return e.toLowerCase()==="x-amzn-errortype".toLowerCase()})));return void 0!==i?r(e.headers[i]):void 0!==t.code?r(t.code):void 0!==t.__type?r(t.__type):""},pn=n(10),hn=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return d(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(pn.a)(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"PinpointClient",commandName:"PutEventsCommand",inputFilterSensitiveLog:Se.filterSensitiveLog,outputFilterSensitiveLog:Ee.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return jt(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l;return Rt(this,(function(d){switch(d.label){case 0:if(n={"content-type":"application/json"},r="/v1/apps/{ApplicationId}/events",void 0===e.ApplicationId)throw new Error("No value provided for input HTTP label: ApplicationId.");if((i=e.ApplicationId).length<=0)throw new Error("Empty value provided for input HTTP label: ApplicationId.");return r=r.replace("{ApplicationId}",Object(Ft.f)(i)),void 0!==e.EventsRequest&&(o=function(e,t){return Mt({},void 0!==e.BatchItem&&null!==e.BatchItem&&{BatchItem:nn(e.BatchItem,t)})}(e.EventsRequest,t)),void 0===o&&(o={}),o=JSON.stringify(o),[4,t.endpoint()];case 1:return s=d.sent(),a=s.hostname,u=s.protocol,c=void 0===u?"https":u,l=s.port,[2,new Bt.a({protocol:c,hostname:a,port:l,method:"POST",headers:n,path:r,body:o})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return jt(void 0,void 0,void 0,(function(){var n,r;return Rt(this,(function(i){switch(i.label){case 0:return 202!==e.statusCode&&e.statusCode>=300?[2,zt(e,t)]:(n={$metadata:ln(e),EventsResponse:void 0},[4,dn(e.body,t)]);case 1:return r=i.sent(),n.EventsResponse=function(e,t){return{Results:void 0!==e.Results&&null!==e.Results?cn(e.Results,t):void 0}}(r,t),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(Ft.b),vn=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return d(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(pn.a)(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"PinpointClient",commandName:"UpdateEndpointCommand",inputFilterSensitiveLog:ot.filterSensitiveLog,outputFilterSensitiveLog:st.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return jt(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l;return Rt(this,(function(d){switch(d.label){case 0:if(n={"content-type":"application/json"},r="/v1/apps/{ApplicationId}/endpoints/{EndpointId}",void 0===e.ApplicationId)throw new Error("No value provided for input HTTP label: ApplicationId.");if((i=e.ApplicationId).length<=0)throw new Error("Empty value provided for input HTTP label: ApplicationId.");if(r=r.replace("{ApplicationId}",Object(Ft.f)(i)),void 0===e.EndpointId)throw new Error("No value provided for input HTTP label: EndpointId.");if((i=e.EndpointId).length<=0)throw new Error("Empty value provided for input HTTP label: EndpointId.");return r=r.replace("{EndpointId}",Object(Ft.f)(i)),void 0!==e.EndpointRequest&&(o=function(e,t){return Mt(Mt(Mt(Mt(Mt(Mt(Mt(Mt(Mt(Mt(Mt({},void 0!==e.Address&&null!==e.Address&&{Address:e.Address}),void 0!==e.Attributes&&null!==e.Attributes&&{Attributes:rn(e.Attributes,t)}),void 0!==e.ChannelType&&null!==e.ChannelType&&{ChannelType:e.ChannelType}),void 0!==e.Demographic&&null!==e.Demographic&&{Demographic:Yt(e.Demographic)}),void 0!==e.EffectiveDate&&null!==e.EffectiveDate&&{EffectiveDate:e.EffectiveDate}),void 0!==e.EndpointStatus&&null!==e.EndpointStatus&&{EndpointStatus:e.EndpointStatus}),void 0!==e.Location&&null!==e.Location&&{Location:Zt(e.Location)}),void 0!==e.Metrics&&null!==e.Metrics&&{Metrics:Xt(e.Metrics,t)}),void 0!==e.OptOut&&null!==e.OptOut&&{OptOut:e.OptOut}),void 0!==e.RequestId&&null!==e.RequestId&&{RequestId:e.RequestId}),void 0!==e.User&&null!==e.User&&{User:Qt(e.User,t)})}(e.EndpointRequest,t)),void 0===o&&(o={}),o=JSON.stringify(o),[4,t.endpoint()];case 1:return s=d.sent(),a=s.hostname,u=s.protocol,c=void 0===u?"https":u,l=s.port,[2,new Bt.a({protocol:c,hostname:a,port:l,method:"PUT",headers:n,path:r,body:o})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return jt(void 0,void 0,void 0,(function(){var n,r;return Rt(this,(function(i){switch(i.label){case 0:return 202!==e.statusCode&&e.statusCode>=300?[2,qt(e,t)]:(n={$metadata:ln(e),MessageBody:void 0},[4,dn(e.body,t)]);case 1:return r=i.sent(),n.MessageBody=function(e,t){return{Message:void 0!==e.Message&&null!==e.Message?e.Message:void 0,RequestID:void 0!==e.RequestID&&null!==e.RequestID?e.RequestID:void 0}}(r),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(Ft.b),gn=n(179),mn=n(42),yn=n(22),bn=n(45),wn=n(14),_n=n(18),Sn=n(43),En=n(44),Cn=n(16),An=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),On=new Set(["cn-north-1","cn-northwest-1"]),In=new Set(["us-iso-east-1"]),Tn=new Set(["us-isob-east-1"]),xn=new Set(["us-gov-east-1","us-gov-west-1"]),Pn={apiVersion:"2016-12-01",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,t){var n=void 0;switch(e){case"ap-northeast-1":n={hostname:"pinpoint.ap-northeast-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"ap-northeast-2":n={hostname:"pinpoint.ap-northeast-2.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"ap-south-1":n={hostname:"pinpoint.ap-south-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"ap-southeast-1":n={hostname:"pinpoint.ap-southeast-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"ap-southeast-2":n={hostname:"pinpoint.ap-southeast-2.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"ca-central-1":n={hostname:"pinpoint.ca-central-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"eu-central-1":n={hostname:"pinpoint.eu-central-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"eu-west-1":n={hostname:"pinpoint.eu-west-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"eu-west-2":n={hostname:"pinpoint.eu-west-2.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"fips-us-east-1":n={hostname:"pinpoint-fips.us-east-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"fips-us-gov-west-1":n={hostname:"pinpoint-fips.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"fips-us-west-2":n={hostname:"pinpoint-fips.us-west-2.amazonaws.com",partition:"aws",signingRegion:"us-west-2"};break;case"us-east-1":n={hostname:"pinpoint.us-east-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"us-gov-west-1":n={hostname:"pinpoint.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"us-west-2":n={hostname:"pinpoint.us-west-2.amazonaws.com",partition:"aws",signingRegion:"us-west-2"};break;default:An.has(e)&&(n={hostname:"pinpoint.{region}.amazonaws.com".replace("{region}",e),partition:"aws",signingService:"mobiletargeting"}),On.has(e)&&(n={hostname:"pinpoint.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),In.has(e)&&(n={hostname:"pinpoint.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),Tn.has(e)&&(n={hostname:"pinpoint.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),xn.has(e)&&(n={hostname:"pinpoint.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov",signingService:"mobiletargeting"}),void 0===n&&(n={hostname:"pinpoint.{region}.amazonaws.com".replace("{region}",e),partition:"aws",signingService:"mobiletargeting"})}return Promise.resolve(Mt({signingService:"mobiletargeting"},n))},serviceId:"Pinpoint",urlParser:n(47).a},kn=Mt(Mt({},Pn),{runtime:"browser",base64Decoder:_n.a,base64Encoder:_n.b,bodyLengthChecker:Sn.a,credentialDefaultProvider:function(e){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:Object(En.a)({serviceId:Pn.serviceId,clientVersion:gn.version}),maxAttempts:wn.a,region:Object(bn.a)("Region is missing"),requestHandler:new yn.a,sha256:mn.Sha256,streamCollector:yn.b,utf8Decoder:Cn.a,utf8Encoder:Cn.b}),Dn=n(24),Nn=n(41),Ln=n(21),Mn=n(46),jn=n(27),Rn=n(23),Un=function(e){function t(t){var n=this,r=Mt(Mt({},kn),t),i=Object(Dn.b)(r),o=Object(Dn.a)(i),s=Object(jn.b)(o),a=Object(wn.c)(s),u=Object(Ln.b)(a),c=Object(Rn.b)(u);return(n=e.call(this,c)||this).config=c,n.middlewareStack.use(Object(jn.a)(n.config)),n.middlewareStack.use(Object(wn.b)(n.config)),n.middlewareStack.use(Object(Nn.a)(n.config)),n.middlewareStack.use(Object(Ln.a)(n.config)),n.middlewareStack.use(Object(Mn.a)(n.config)),n.middlewareStack.use(Object(Rn.a)(n.config)),n}return d(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(Ft.a),Bn=n(26),Fn=n(30),zn=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},qn=new i.a("EventsBuffer"),$n=[429,500],Kn=[202],Vn=function(){function e(e,t){this._pause=!1,this._flush=!1,qn.debug("Instantiating buffer with config:",t),this._buffer=[],this._client=e,this._config=t,this._sendBatch=this._sendBatch.bind(this),this._startLoop()}return e.prototype.push=function(e){var t;if(this._buffer.length>=this._config.bufferSize)return qn.debug("Exceeded analytics events buffer size"),e.handlers.reject(new Error("Exceeded the size of analytics events buffer"));var n=((t={})[e.params.event.eventId]=e,t);this._buffer.push(n)},e.prototype.pause=function(){this._pause=!0},e.prototype.resume=function(){this._pause=!1},e.prototype.updateClient=function(e){this._client=e},e.prototype.flush=function(){this._flush=!0},e.prototype._startLoop=function(){this._interval&&clearInterval(this._interval);var e=this._config.flushInterval;this._interval=setInterval(this._sendBatch,e)},e.prototype._sendBatch=function(){var e=this._buffer.length;if(this._flush&&!e&&clearInterval(this._interval),!this._pause&&e){var t=this._config.flushSize,n=Math.min(t,e),r=this._buffer.splice(0,n);this._putEvents(r)}},e.prototype._putEvents=function(e){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){var t,n,r,i,o;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(s){switch(s.label){case 0:t=this._bufferToMap(e),n=this._generateBatchEventParams(t),s.label=1;case 1:return s.trys.push([1,3,,4]),r=new hn(n),[4,this._client.send(r)];case 2:return i=s.sent(),this._processPutEventsSuccessResponse(i,t),[3,4];case 3:return o=s.sent(),[2,this._handlePutEventsFailure(o,t)];case 4:return[2]}}))}))},e.prototype._generateBatchEventParams=function(e){var t={ApplicationId:"",EventsRequest:{BatchItem:{}}};return Object.values(e).forEach((function(e){var n=e.params,r=n.event,i=n.timestamp,o=n.config,s=r.name,a=r.attributes,u=r.metrics,c=r.eventId,l=r.session,d=o.appId,f=o.endpointId,p=t.EventsRequest.BatchItem;t.ApplicationId=t.ApplicationId||d,p[f]||(p[f]={Endpoint:{},Events:{}}),p[f].Events[c]={EventType:s,Timestamp:new Date(i).toISOString(),Attributes:a,Metrics:u,Session:l}})),t},e.prototype._handlePutEventsFailure=function(e,t){qn.debug("_putEvents Failed: ",e);var n=e.$metadata&&e.$metadata.httpStatusCode;if($n.includes(n)){var r=Object.values(t);this._retry(r)}},e.prototype._processPutEventsSuccessResponse=function(e,t){var n=e.EventsResponse.Results,r=[];Object.entries(n).forEach((function(e){var n=zn(e,2),i=n[0],o=n[1].EventsItemResponse;Object.entries(o).forEach((function(e){var n,o,s=zn(e,2),a=s[0],u=s[1],c=u.StatusCode,l=u.Message,d=t[a],f={EventsResponse:{Results:(n={},n[i]={EventsItemResponse:(o={},o[a]={StatusCode:c,Message:l},o)},n)}};if(Kn.includes(c))d.handlers.resolve(f);else{if(!$n.includes(c)){var p=d.params.event.name;return qn.error("event "+a+" : "+p+" failed with error: "+l),d.handlers.reject(f)}r.push(d)}}))})),r.length&&this._retry(r)},e.prototype._retry=function(e){var t,n=[];e.forEach((function(e){var t,r=e.params,i=r.event,o=i.eventId,s=i.name;if(r.resendLimit-- >0)return qn.debug("resending event "+o+" : "+s+" with "+r.resendLimit+" retry attempts remaining"),void n.push((t={},t[o]=e,t));qn.debug("no retry attempts remaining for event "+o+" : "+s)})),(t=this._buffer).unshift.apply(t,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(zn(arguments[t]));return e}(n))},e.prototype._bufferToMap=function(e){return e.reduce((function(e,t){var n=zn(Object.entries(t),1),r=zn(n[0],2),i=r[0],o=r[1];return e[i]=o,e}),{})},e}();function Gn(e){return(Gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Hn=function(){return(Hn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Wn=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},Jn=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Yn=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Zn="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",Qn=function(e,t){r.a.dispatch("analytics",{event:e,data:t},"Analytics",Zn)},Xn=new i.a("AWSPinpointProvider"),er=[429,500],tr=[202],nr="undefined"!=typeof navigator&&navigator&&"function"==typeof navigator.sendBeacon,rr=function(){function e(e){this._endpointGenerating=!0,this._endpointUpdateInProgress=!1,this._buffer=null,this._endpointBuffer=[],this._config=e||{},this._config.bufferSize=this._config.bufferSize||1e3,this._config.flushSize=this._config.flushSize||100,this._config.flushInterval=this._config.flushInterval||5e3,this._config.resendLimit=this._config.resendLimit||5,this._clientInfo=o.a.clientInfo()}return e.prototype.getCategory=function(){return e.category},e.prototype.getProviderName=function(){return e.providerName},e.prototype.configure=function(e){var t=this;Xn.debug("configure Analytics",e);var n=e||{};if(this._config=Object.assign({},this._config,n),this._endpointGenerating=!!e.autoSessionRecord,this._config.appId&&!this._config.disabled)if(this._config.endpointId)Qn("pinpointProvider_configured",null);else{var r=this.getProviderName()+"_"+this._config.appId;this._getEndpointId(r).then((function(e){Xn.debug("setting endpoint id from the cache",e),t._config.endpointId=e,Qn("pinpointProvider_configured",null)})).catch((function(e){Xn.debug("Failed to generate endpointId",e)}))}else this._flushBuffer();return this._config},e.prototype.record=function(e,t){return Wn(this,void 0,void 0,(function(){var n,r;return Jn(this,(function(i){switch(i.label){case 0:return Xn.debug("_public record",e),[4,this._getCredentials()];case 1:return(n=i.sent())&&this._config.appId&&this._config.region?(this._initClients(n),r=(new Date).getTime(),this._generateSession(e),e.event.eventId=Object(Fn.v1)(),Object.assign(e,{timestamp:r,config:this._config}),e.event.immediate?[2,this._send(e,t)]:(this._putToBuffer(e,t),[2])):(Xn.debug("cannot send events without credentials, applicationId or region"),[2,t.reject(new Error("No credentials, applicationId or region"))])}}))}))},e.prototype._sendEndpointUpdate=function(e){return Wn(this,void 0,void 0,(function(){var t;return Jn(this,(function(n){switch(n.label){case 0:return this._endpointUpdateInProgress?(this._endpointBuffer.push(e),[2]):(this._endpointUpdateInProgress=!0,[4,this._updateEndpoint(e)]);case 1:return n.sent(),t=this._endpointBuffer.shift(),this._endpointUpdateInProgress=!1,t&&this._sendEndpointUpdate(t),[2]}}))}))},e.prototype._putToBuffer=function(e,t){"_update_endpoint"!==e.event.name?this._buffer&&this._buffer.push({params:e,handlers:t}):this._sendEndpointUpdate({params:e,handlers:t})},e.prototype._generateSession=function(e){this._sessionId=this._sessionId||Object(Fn.v1)();var t=e.event;switch(t.name){case"_session.start":this._sessionStartTimestamp=(new Date).getTime(),this._sessionId=Object(Fn.v1)(),t.session={Id:this._sessionId,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString()};break;case"_session.stop":var n=(new Date).getTime();this._sessionStartTimestamp=this._sessionStartTimestamp||(new Date).getTime(),this._sessionId=this._sessionId||Object(Fn.v1)(),t.session={Id:this._sessionId,Duration:n-this._sessionStartTimestamp,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString(),StopTimestamp:new Date(n).toISOString()},this._sessionId=void 0,this._sessionStartTimestamp=void 0;break;default:this._sessionStartTimestamp=this._sessionStartTimestamp||(new Date).getTime(),this._sessionId=this._sessionId||Object(Fn.v1)(),t.session={Id:this._sessionId,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString()}}},e.prototype._send=function(e,t){return Wn(this,void 0,void 0,(function(){return Jn(this,(function(n){switch(e.event.name){case"_update_endpoint":return[2,this._updateEndpoint({params:e,handlers:t})];case"_session.stop":return[2,this._pinpointSendStopSession(e,t)];default:return[2,this._pinpointPutEvents(e,t)]}return[2]}))}))},e.prototype._generateBatchItemContext=function(e){var t,n=e.event,r=e.timestamp,i=e.config,o=n.name,s=n.attributes,a=n.metrics,u=n.eventId,c=n.session,l=i.appId,d=i.endpointId,f={ApplicationId:l,EventsRequest:{BatchItem:{}}},p={Endpoint:{}};return p.Events=((t={})[u]={EventType:o,Timestamp:new Date(r).toISOString(),Attributes:s,Metrics:a,Session:c},t),f.EventsRequest.BatchItem[d]=p,f},e.prototype._pinpointPutEvents=function(e,t){return Wn(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,d,f;return Jn(this,(function(p){switch(p.label){case 0:n=e.event.eventId,r=e.config.endpointId,i=this._generateBatchItemContext(e),o=new hn(i),p.label=1;case 1:return p.trys.push([1,3,,4]),[4,this.pinpointClient.send(o)];case 2:return s=p.sent(),a=r,u=n,c=s.EventsResponse.Results[a].EventsItemResponse[u],l=c.StatusCode,d=c.Message,tr.includes(l)?(Xn.debug("record event success. ",s),[2,t.resolve(s)]):er.includes(l)?(this._retry(e,t),[3,4]):(Xn.error("Event "+n+" is not accepted, the error is "+d),[2,t.reject(s)]);case 3:return f=p.sent(),this._eventError(f),[2,t.reject(f)];case 4:return[2]}}))}))},e.prototype._pinpointSendStopSession=function(e,t){if(nr){var n=this._generateBatchItemContext(e),r=this._config.region,i=n.ApplicationId,o=n.EventsRequest,a={secret_key:this._config.credentials.secretAccessKey,access_key:this._config.credentials.accessKeyId,session_token:this._config.credentials.sessionToken},u="https://pinpoint."+r+".amazonaws.com/v1/apps/"+i+"/events/legacy",c=JSON.stringify(o),l={url:u,body:c,method:"POST"},d={region:r,service:"mobiletargeting"},f=s.a.signUrl(l,a,d,null);return navigator.sendBeacon(f,c)?t.resolve("sendBeacon success"):t.reject("sendBeacon failure")}this._pinpointPutEvents(e,t)},e.prototype._retry=function(e,t){var n=e.config.resendLimit;e.resendLimit="number"==typeof e.resendLimit?e.resendLimit:n,e.resendLimit-- >0?(Xn.debug("resending event "+e.eventName+" with "+e.resendLimit+" retry times left"),this._pinpointPutEvents(e,t)):Xn.debug("retry times used up for event "+e.eventName)},e.prototype._updateEndpoint=function(e){return Wn(this,void 0,void 0,(function(){var t,n,r,i,o,s,u,c,l,d,f,p;return Jn(this,(function(h){switch(h.label){case 0:t=e.params,n=e.handlers,r=t.config,i=t.event,o=r.appId,s=r.endpointId,u=this._endpointRequest(r,a.a.transferKeyToLowerCase(i,[],["attributes","userAttributes","Attributes","UserAttributes"])),c={ApplicationId:o,EndpointId:s,EndpointRequest:u},h.label=1;case 1:return h.trys.push([1,3,,4]),l=new vn(c),[4,this.pinpointClient.send(l)];case 2:return d=h.sent(),Xn.debug("updateEndpoint success",d),this._endpointGenerating=!1,this._resumeBuffer(),n.resolve(d),[2];case 3:return f=h.sent(),p={err:f,update_params:c,endpointObject:e},[2,this._handleEndpointUpdateFailure(p)];case 4:return[2]}}))}))},e.prototype._handleEndpointUpdateFailure=function(e){return Wn(this,void 0,void 0,(function(){var t,n,r;return Jn(this,(function(i){return 403===(t=e.err,n=e.endpointObject,r=t.$metadata&&t.$metadata.httpStatusCode,Xn.debug("updateEndpoint error",t),r)?[2,this._handleEndpointUpdateForbidden(e)]:er.includes(r)?[2,this._retryEndpointUpdate(n,!0)]:(Xn.error("updateEndpoint failed",t),n.handlers.reject(t),[2])}))}))},e.prototype._handleEndpointUpdateForbidden=function(e){var t=e.err,n=e.endpointObject,r=t.code,i=t.retryable;if("ExpiredTokenException"!==r&&!i)return n.handlers.reject(t);this._retryEndpointUpdate(n)},e.prototype._retryEndpointUpdate=function(e,t){void 0===t&&(t=!1),Xn.debug("_retryEndpointUpdate",e);var n=e.params,r=n.config.resendLimit;if(n.resendLimit="number"==typeof n.resendLimit?n.resendLimit:r,n.resendLimit-- >0)return Xn.debug("resending endpoint update "+n.event.eventId+" with "+n.resendLimit+" retry attempts remaining"),void(this._endpointBuffer.length?this._endpointBuffer.unshift(e):this._updateEndpoint(e));Xn.warn("resending endpoint update "+n.event.eventId+" failed after "+n.config.resendLimit+" attempts"),this._endpointGenerating&&Xn.error("Initial endpoint update failed. ")},e.prototype._initClients=function(e){return Wn(this,void 0,void 0,(function(){var t,n;return Jn(this,(function(r){return Xn.debug("init clients"),this.pinpointClient&&this._config.credentials&&this._config.credentials.sessionToken===e.sessionToken&&this._config.credentials.identityId===e.identityId?(Xn.debug("no change for aws credentials, directly return from init"),[2]):(t=this._config.credentials?this._config.credentials.identityId:null,this._config.credentials=e,n=this._config.region,Xn.debug("init clients with credentials",e),this.pinpointClient=new Un({region:n,credentials:e,customUserAgent:Object(u.b)()}),this.pinpointClient.middlewareStack.addRelativeTo((function(e){return function(t){return delete t.request.headers["amz-sdk-invocation-id"],delete t.request.headers["amz-sdk-request"],e(t)}}),{step:"finalizeRequest",relation:"after",toMiddleware:"retryMiddleware"}),this._bufferExists()&&t===e.identityId?this._updateBufferClient():this._initBuffer(),this._customizePinpointClientReq(),[2])}))}))},e.prototype._bufferExists=function(){return this._buffer&&this._buffer instanceof Vn},e.prototype._initBuffer=function(){this._bufferExists()&&this._flushBuffer(),this._buffer=new Vn(this.pinpointClient,this._config),this._endpointGenerating&&this._buffer.pause()},e.prototype._updateBufferClient=function(){this._bufferExists()&&this._buffer.updateClient(this.pinpointClient)},e.prototype._flushBuffer=function(){this._bufferExists()&&(this._buffer.flush(),this._buffer=null)},e.prototype._resumeBuffer=function(){this._bufferExists()&&this._buffer.resume()},e.prototype._customizePinpointClientReq=function(){},e.prototype._getEndpointId=function(e){return Wn(this,void 0,void 0,(function(){var t,n;return Jn(this,(function(r){switch(r.label){case 0:return[4,Bn.b.getItem(e)];case 1:return t=r.sent(),Xn.debug("endpointId from cache",t,"type",Gn(t)),t||(t=Object(Fn.v1)(),n=(new Date).getTime()+31536e8,Bn.b.setItem(e,t,{expires:n,priority:1})),[2,t]}}))}))},e.prototype._endpointRequest=function(e,t){var n=e.credentials,r=this._clientInfo||{},i=e.clientContext||{},o=e.endpoint||{},s={appVersion:r.appVersion,make:r.make,model:r.model,modelVersion:r.version,platform:r.platform},u=(i.clientId,i.appTitle,i.appVersionName,i.appVersionCode,i.appPackageName,Yn(i,["clientId","appTitle","appVersionName","appVersionCode","appPackageName"])),c=t.address?"android"===r.platform?"GCM":"APNS":void 0,l=Hn(Hn(Hn({channelType:c,requestId:Object(Fn.v1)(),effectiveDate:(new Date).toISOString()},o),t),{attributes:Hn(Hn({},o.attributes),t.attributes),demographic:Hn(Hn(Hn(Hn({},s),u),o.demographic),t.demographic),location:Hn(Hn({},o.location),t.location),metrics:Hn(Hn({},o.metrics),t.metrics),user:{userId:t.userId||o.userId||n.identityId,userAttributes:Hn(Hn({},o.userAttributes),t.userAttributes)}}),d=(l.userId,l.userAttributes,l.name,l.session,l.eventId,l.immediate,Yn(l,["userId","userAttributes","name","session","eventId","immediate"]));return a.a.transferKeyToUpperCase(d,[],["metrics","userAttributes","attributes"])},e.prototype._eventError=function(e){Xn.error("record event failed.",e),Xn.warn('Please ensure you have updated your Pinpoint IAM Policy with the Action: "mobiletargeting:PutEvents" in order to record events')},e.prototype._getCredentials=function(){return Wn(this,void 0,void 0,(function(){var e,t;return Jn(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,c.a.get()];case 1:return(e=n.sent())?(Xn.debug("set credentials for analytics",e),[2,c.a.shear(e)]):[2,null];case 2:return t=n.sent(),Xn.debug("ensure credentials error",t),[2,null];case 3:return[2]}}))}))},e.category="Analytics",e.providerName="AWSPinpoint",e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return qt}));var r=n(48),i=n(49),o=n(80),s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var u,c,l,d,f,p,h,v,g,m,y,b,w,_,S,E,C,A,O,I,T,x,P,k,D,N,L,M,j,R,U,B,F,z,q,$,K,V,G,H,W,J,Y,Z,Q,X,ee,te,ne,re,ie,oe,se,ae,ue,ce,le,de,fe,pe,he,ve,ge,me,ye,be,we,_e,Se,Ee,Ce,Ae,Oe,Ie,Te,xe,Pe,ke,De,Ne,Le,Me,je=function(){return(je=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function Re(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function Ue(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}Object.create,Object.create,(u||(u={})).filterSensitiveLog=function(e){return je({},e)},(c||(c={})).filterSensitiveLog=function(e){return je({},e)},(l||(l={})).filterSensitiveLog=function(e){return je({},e)},(d||(d={})).filterSensitiveLog=function(e){return je({},e)},(f||(f={})).filterSensitiveLog=function(e){return je({},e)},(p||(p={})).filterSensitiveLog=function(e){return je({},e)},(h||(h={})).filterSensitiveLog=function(e){return je({},e)},function(e){e.ACTIVE="ACTIVE",e.CREATING="CREATING",e.DELETING="DELETING"}(v||(v={})),(g||(g={})).filterSensitiveLog=function(e){return je({},e)},(m||(m={})).filterSensitiveLog=function(e){return je({},e)},(y||(y={})).filterSensitiveLog=function(e){return je({},e)},(b||(b={})).filterSensitiveLog=function(e){return je({},e)},(w||(w={})).filterSensitiveLog=function(e){return je({},e)},(_||(_={})).filterSensitiveLog=function(e){return je({},e)},(S||(S={})).filterSensitiveLog=function(e){return je({},e)},(E||(E={})).filterSensitiveLog=function(e){return je({},e)},(C||(C={})).filterSensitiveLog=function(e){return je({},e)},function(e){e.KMS="KMS",e.NONE="NONE"}(A||(A={})),function(e){e.ALL="ALL",e.INCOMING_BYTES="IncomingBytes",e.INCOMING_RECORDS="IncomingRecords",e.ITERATOR_AGE_MILLISECONDS="IteratorAgeMilliseconds",e.OUTGOING_BYTES="OutgoingBytes",e.OUTGOING_RECORDS="OutgoingRecords",e.READ_PROVISIONED_THROUGHPUT_EXCEEDED="ReadProvisionedThroughputExceeded",e.WRITE_PROVISIONED_THROUGHPUT_EXCEEDED="WriteProvisionedThroughputExceeded"}(O||(O={})),(I||(I={})).filterSensitiveLog=function(e){return je({},e)},(T||(T={})).filterSensitiveLog=function(e){return je({},e)},(x||(x={})).filterSensitiveLog=function(e){return je({},e)},function(e){e.ACTIVE="ACTIVE",e.CREATING="CREATING",e.DELETING="DELETING",e.UPDATING="UPDATING"}(P||(P={})),(k||(k={})).filterSensitiveLog=function(e){return je({},e)},(D||(D={})).filterSensitiveLog=function(e){return je({},e)},(N||(N={})).filterSensitiveLog=function(e){return je({},e)},(L||(L={})).filterSensitiveLog=function(e){return je({},e)},(M||(M={})).filterSensitiveLog=function(e){return je({},e)},(j||(j={})).filterSensitiveLog=function(e){return je({},e)},(R||(R={})).filterSensitiveLog=function(e){return je({},e)},(U||(U={})).filterSensitiveLog=function(e){return je({},e)},(B||(B={})).filterSensitiveLog=function(e){return je({},e)},(F||(F={})).filterSensitiveLog=function(e){return je({},e)},(z||(z={})).filterSensitiveLog=function(e){return je({},e)},(q||(q={})).filterSensitiveLog=function(e){return je({},e)},($||($={})).filterSensitiveLog=function(e){return je({},e)},(K||(K={})).filterSensitiveLog=function(e){return je({},e)},(V||(V={})).filterSensitiveLog=function(e){return je({},e)},(G||(G={})).filterSensitiveLog=function(e){return je({},e)},(H||(H={})).filterSensitiveLog=function(e){return je({},e)},(W||(W={})).filterSensitiveLog=function(e){return je({},e)},(J||(J={})).filterSensitiveLog=function(e){return je({},e)},(Y||(Y={})).filterSensitiveLog=function(e){return je({},e)},(Z||(Z={})).filterSensitiveLog=function(e){return je({},e)},(Q||(Q={})).filterSensitiveLog=function(e){return je({},e)},function(e){e.AFTER_SEQUENCE_NUMBER="AFTER_SEQUENCE_NUMBER",e.AT_SEQUENCE_NUMBER="AT_SEQUENCE_NUMBER",e.AT_TIMESTAMP="AT_TIMESTAMP",e.LATEST="LATEST",e.TRIM_HORIZON="TRIM_HORIZON"}(X||(X={})),(ee||(ee={})).filterSensitiveLog=function(e){return je({},e)},(te||(te={})).filterSensitiveLog=function(e){return je({},e)},(ne||(ne={})).filterSensitiveLog=function(e){return je({},e)},(re||(re={})).filterSensitiveLog=function(e){return je({},e)},function(e){e.AFTER_SHARD_ID="AFTER_SHARD_ID",e.AT_LATEST="AT_LATEST",e.AT_TIMESTAMP="AT_TIMESTAMP",e.AT_TRIM_HORIZON="AT_TRIM_HORIZON",e.FROM_TIMESTAMP="FROM_TIMESTAMP",e.FROM_TRIM_HORIZON="FROM_TRIM_HORIZON"}(ie||(ie={})),(oe||(oe={})).filterSensitiveLog=function(e){return je({},e)},(se||(se={})).filterSensitiveLog=function(e){return je({},e)},(ae||(ae={})).filterSensitiveLog=function(e){return je({},e)},(ue||(ue={})).filterSensitiveLog=function(e){return je({},e)},(ce||(ce={})).filterSensitiveLog=function(e){return je({},e)},(le||(le={})).filterSensitiveLog=function(e){return je({},e)},(de||(de={})).filterSensitiveLog=function(e){return je({},e)},(fe||(fe={})).filterSensitiveLog=function(e){return je({},e)},(pe||(pe={})).filterSensitiveLog=function(e){return je({},e)},(he||(he={})).filterSensitiveLog=function(e){return je({},e)},(ve||(ve={})).filterSensitiveLog=function(e){return je({},e)},(ge||(ge={})).filterSensitiveLog=function(e){return je({},e)},(me||(me={})).filterSensitiveLog=function(e){return je({},e)},(ye||(ye={})).filterSensitiveLog=function(e){return je({},e)},(be||(be={})).filterSensitiveLog=function(e){return je({},e)},(we||(we={})).filterSensitiveLog=function(e){return je({},e)},(_e||(_e={})).filterSensitiveLog=function(e){return je({},e)},(Se||(Se={})).filterSensitiveLog=function(e){return je({},e)},(Ee||(Ee={})).filterSensitiveLog=function(e){return je({},e)},(Ce||(Ce={})).filterSensitiveLog=function(e){return je({},e)},(Ae||(Ae={})).filterSensitiveLog=function(e){return je({},e)},(Oe||(Oe={})).filterSensitiveLog=function(e){return je({},e)},(Ie||(Ie={})).filterSensitiveLog=function(e){return je({},e)},(Te||(Te={})).filterSensitiveLog=function(e){return je({},e)},(xe||(xe={})).filterSensitiveLog=function(e){return je({},e)},(Pe||(Pe={})).filterSensitiveLog=function(e){return je({},e)},function(e){e.visit=function(e,t){return void 0!==e.SubscribeToShardEvent?t.SubscribeToShardEvent(e.SubscribeToShardEvent):void 0!==e.ResourceNotFoundException?t.ResourceNotFoundException(e.ResourceNotFoundException):void 0!==e.ResourceInUseException?t.ResourceInUseException(e.ResourceInUseException):void 0!==e.KMSDisabledException?t.KMSDisabledException(e.KMSDisabledException):void 0!==e.KMSInvalidStateException?t.KMSInvalidStateException(e.KMSInvalidStateException):void 0!==e.KMSAccessDeniedException?t.KMSAccessDeniedException(e.KMSAccessDeniedException):void 0!==e.KMSNotFoundException?t.KMSNotFoundException(e.KMSNotFoundException):void 0!==e.KMSOptInRequired?t.KMSOptInRequired(e.KMSOptInRequired):void 0!==e.KMSThrottlingException?t.KMSThrottlingException(e.KMSThrottlingException):void 0!==e.InternalFailureException?t.InternalFailureException(e.InternalFailureException):t._(e.$unknown[0],e.$unknown[1])},e.filterSensitiveLog=function(e){var t;return void 0!==e.SubscribeToShardEvent?{SubscribeToShardEvent:Pe.filterSensitiveLog(e.SubscribeToShardEvent)}:void 0!==e.ResourceNotFoundException?{ResourceNotFoundException:f.filterSensitiveLog(e.ResourceNotFoundException)}:void 0!==e.ResourceInUseException?{ResourceInUseException:d.filterSensitiveLog(e.ResourceInUseException)}:void 0!==e.KMSDisabledException?{KMSDisabledException:H.filterSensitiveLog(e.KMSDisabledException)}:void 0!==e.KMSInvalidStateException?{KMSInvalidStateException:W.filterSensitiveLog(e.KMSInvalidStateException)}:void 0!==e.KMSAccessDeniedException?{KMSAccessDeniedException:G.filterSensitiveLog(e.KMSAccessDeniedException)}:void 0!==e.KMSNotFoundException?{KMSNotFoundException:J.filterSensitiveLog(e.KMSNotFoundException)}:void 0!==e.KMSOptInRequired?{KMSOptInRequired:Y.filterSensitiveLog(e.KMSOptInRequired)}:void 0!==e.KMSThrottlingException?{KMSThrottlingException:Z.filterSensitiveLog(e.KMSThrottlingException)}:void 0!==e.InternalFailureException?{InternalFailureException:re.filterSensitiveLog(e.InternalFailureException)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0}}(ke||(ke={})),(De||(De={})).filterSensitiveLog=function(e){return je(je({},e),e.EventStream&&{EventStream:"STREAMING_CONTENT"})},function(e){e.UNIFORM_SCALING="UNIFORM_SCALING"}(Ne||(Ne={})),(Le||(Le={})).filterSensitiveLog=function(e){return je({},e)},(Me||(Me={})).filterSensitiveLog=function(e){return je({},e)};var Be=n(3),Fe=function(e,t){return Re(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,d,f,p,h,v,g,m;return Ue(this,(function(y){switch(y.label){case 0:return r=[je({},e)],m={},[4,ct(e.body,t)];case 1:switch(n=je.apply(void 0,r.concat([(m.body=y.sent(),m)])),o="UnknownError",o=lt(e,n.body)){case"InvalidArgumentException":case"com.amazonaws.kinesis#InvalidArgumentException":return[3,2];case"KMSAccessDeniedException":case"com.amazonaws.kinesis#KMSAccessDeniedException":return[3,4];case"KMSDisabledException":case"com.amazonaws.kinesis#KMSDisabledException":return[3,6];case"KMSInvalidStateException":case"com.amazonaws.kinesis#KMSInvalidStateException":return[3,8];case"KMSNotFoundException":case"com.amazonaws.kinesis#KMSNotFoundException":return[3,10];case"KMSOptInRequired":case"com.amazonaws.kinesis#KMSOptInRequired":return[3,12];case"KMSThrottlingException":case"com.amazonaws.kinesis#KMSThrottlingException":return[3,14];case"ProvisionedThroughputExceededException":case"com.amazonaws.kinesis#ProvisionedThroughputExceededException":return[3,16];case"ResourceNotFoundException":case"com.amazonaws.kinesis#ResourceNotFoundException":return[3,18]}return[3,20];case 2:return s=[{}],[4,ze(n,t)];case 3:return i=je.apply(void 0,[je.apply(void 0,s.concat([y.sent()])),{name:o,$metadata:at(e)}]),[3,21];case 4:return a=[{}],[4,qe(n,t)];case 5:return i=je.apply(void 0,[je.apply(void 0,a.concat([y.sent()])),{name:o,$metadata:at(e)}]),[3,21];case 6:return u=[{}],[4,$e(n,t)];case 7:return i=je.apply(void 0,[je.apply(void 0,u.concat([y.sent()])),{name:o,$metadata:at(e)}]),[3,21];case 8:return c=[{}],[4,Ke(n,t)];case 9:return i=je.apply(void 0,[je.apply(void 0,c.concat([y.sent()])),{name:o,$metadata:at(e)}]),[3,21];case 10:return l=[{}],[4,Ve(n,t)];case 11:return i=je.apply(void 0,[je.apply(void 0,l.concat([y.sent()])),{name:o,$metadata:at(e)}]),[3,21];case 12:return d=[{}],[4,Ge(n,t)];case 13:return i=je.apply(void 0,[je.apply(void 0,d.concat([y.sent()])),{name:o,$metadata:at(e)}]),[3,21];case 14:return f=[{}],[4,He(n,t)];case 15:return i=je.apply(void 0,[je.apply(void 0,f.concat([y.sent()])),{name:o,$metadata:at(e)}]),[3,21];case 16:return p=[{}],[4,We(n,t)];case 17:return i=je.apply(void 0,[je.apply(void 0,p.concat([y.sent()])),{name:o,$metadata:at(e)}]),[3,21];case 18:return h=[{}],[4,Je(n,t)];case 19:return i=je.apply(void 0,[je.apply(void 0,h.concat([y.sent()])),{name:o,$metadata:at(e)}]),[3,21];case 20:v=n.body,o=v.code||v.Code||o,i=je(je({},v),{name:""+o,message:v.message||v.Message||o,$fault:"client",$metadata:at(e)}),y.label=21;case 21:return g=i.message||i.Message||o,i.message=g,delete i.Message,[2,Promise.reject(Object.assign(new Error(g),i))]}}))}))},ze=function(e,t){return Re(void 0,void 0,void 0,(function(){var n,r;return Ue(this,(function(i){return n=e.body,r=Ze(n,t),[2,je({name:"InvalidArgumentException",$fault:"client",$metadata:at(e)},r)]}))}))},qe=function(e,t){return Re(void 0,void 0,void 0,(function(){var n,r;return Ue(this,(function(i){return n=e.body,r=Qe(n,t),[2,je({name:"KMSAccessDeniedException",$fault:"client",$metadata:at(e)},r)]}))}))},$e=function(e,t){return Re(void 0,void 0,void 0,(function(){var n,r;return Ue(this,(function(i){return n=e.body,r=Xe(n,t),[2,je({name:"KMSDisabledException",$fault:"client",$metadata:at(e)},r)]}))}))},Ke=function(e,t){return Re(void 0,void 0,void 0,(function(){var n,r;return Ue(this,(function(i){return n=e.body,r=et(n,t),[2,je({name:"KMSInvalidStateException",$fault:"client",$metadata:at(e)},r)]}))}))},Ve=function(e,t){return Re(void 0,void 0,void 0,(function(){var n,r;return Ue(this,(function(i){return n=e.body,r=tt(n,t),[2,je({name:"KMSNotFoundException",$fault:"client",$metadata:at(e)},r)]}))}))},Ge=function(e,t){return Re(void 0,void 0,void 0,(function(){var n,r;return Ue(this,(function(i){return n=e.body,r=nt(n,t),[2,je({name:"KMSOptInRequired",$fault:"client",$metadata:at(e)},r)]}))}))},He=function(e,t){return Re(void 0,void 0,void 0,(function(){var n,r;return Ue(this,(function(i){return n=e.body,r=rt(n,t),[2,je({name:"KMSThrottlingException",$fault:"client",$metadata:at(e)},r)]}))}))},We=function(e,t){return Re(void 0,void 0,void 0,(function(){var n,r;return Ue(this,(function(i){return n=e.body,r=it(n,t),[2,je({name:"ProvisionedThroughputExceededException",$fault:"client",$metadata:at(e)},r)]}))}))},Je=function(e,t){return Re(void 0,void 0,void 0,(function(){var n,r;return Ue(this,(function(i){return n=e.body,r=st(n,t),[2,je({name:"ResourceNotFoundException",$fault:"client",$metadata:at(e)},r)]}))}))},Ye=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){return je(je(je({},void 0!==e.Data&&null!==e.Data&&{Data:t.base64Encoder(e.Data)}),void 0!==e.ExplicitHashKey&&null!==e.ExplicitHashKey&&{ExplicitHashKey:e.ExplicitHashKey}),void 0!==e.PartitionKey&&null!==e.PartitionKey&&{PartitionKey:e.PartitionKey})}(e,t)}))},Ze=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Qe=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Xe=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},et=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},tt=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},nt=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},rt=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},it=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},ot=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){return{ErrorCode:void 0!==e.ErrorCode&&null!==e.ErrorCode?e.ErrorCode:void 0,ErrorMessage:void 0!==e.ErrorMessage&&null!==e.ErrorMessage?e.ErrorMessage:void 0,SequenceNumber:void 0!==e.SequenceNumber&&null!==e.SequenceNumber?e.SequenceNumber:void 0,ShardId:void 0!==e.ShardId&&null!==e.ShardId?e.ShardId:void 0}}(e)}))},st=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},at=function(e){var t;return{httpStatusCode:e.statusCode,requestId:null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},ut=function(e,t,n,r,i){return Re(void 0,void 0,void 0,(function(){var o,s,a,u,c,l;return Ue(this,(function(d){switch(d.label){case 0:return[4,e.endpoint()];case 1:return o=d.sent(),s=o.hostname,a=o.protocol,u=void 0===a?"https":a,c=o.port,l={protocol:u,hostname:s,port:c,method:"POST",path:n,headers:t},void 0!==r&&(l.hostname=r),void 0!==i&&(l.body=i),[2,new Be.a(l)]}}))}))},ct=function(e,t){return function(e,t){return function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)}(e,t).then((function(e){return t.utf8Encoder(e)}))}(e,t).then((function(e){return e.length?JSON.parse(e):{}}))},lt=function(e,t){var n,r=function(e){var t=e;return t.indexOf(":")>=0&&(t=t.split(":")[0]),t.indexOf("#")>=0&&(t=t.split("#")[1]),t},i=(n=e.headers,"x-amzn-errortype",Object.keys(n).find((function(e){return e.toLowerCase()==="x-amzn-errortype".toLowerCase()})));return void 0!==i?r(e.headers[i]):void 0!==t.code?r(t.code):void 0!==t.__type?r(t.__type):""},dt=n(10),ft=n(1),pt=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return a(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(dt.a)(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"KinesisClient",commandName:"PutRecordsCommand",inputFilterSensitiveLog:be.filterSensitiveLog,outputFilterSensitiveLog:_e.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Re(void 0,void 0,void 0,(function(){var n,r;return Ue(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Kinesis_20131202.PutRecords"},r=JSON.stringify(function(e,t){return je(je({},void 0!==e.Records&&null!==e.Records&&{Records:Ye(e.Records,t)}),void 0!==e.StreamName&&null!==e.StreamName&&{StreamName:e.StreamName})}(e,t)),[2,ut(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Re(void 0,void 0,void 0,(function(){var n,r,i;return Ue(this,(function(o){switch(o.label){case 0:return e.statusCode>=300?[2,Fe(e,t)]:[4,ct(e.body,t)];case 1:return n=o.sent(),r=function(e,t){return{EncryptionType:void 0!==e.EncryptionType&&null!==e.EncryptionType?e.EncryptionType:void 0,FailedRecordCount:void 0!==e.FailedRecordCount&&null!==e.FailedRecordCount?e.FailedRecordCount:void 0,Records:void 0!==e.Records&&null!==e.Records?ot(e.Records,t):void 0}}(n,t),i=je({$metadata:at(e)},r),[2,Promise.resolve(i)]}}))}))}(e,t)},t}(ft.b),ht=n(180),vt=n(42),gt=n(97),mt=n(22),yt=n(45),bt=n(14),wt=n(18),_t=n(43),St=n(44),Et=n(16),Ct=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),At=new Set(["cn-north-1","cn-northwest-1"]),Ot=new Set(["us-iso-east-1"]),It=new Set(["us-isob-east-1"]),Tt=new Set(["us-gov-east-1","us-gov-west-1"]),xt={apiVersion:"2013-12-02",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,t){var n=void 0;switch(e){case"af-south-1":n={hostname:"kinesis.af-south-1.amazonaws.com",partition:"aws"};break;case"ap-east-1":n={hostname:"kinesis.ap-east-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-1":n={hostname:"kinesis.ap-northeast-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-2":n={hostname:"kinesis.ap-northeast-2.amazonaws.com",partition:"aws"};break;case"ap-south-1":n={hostname:"kinesis.ap-south-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-1":n={hostname:"kinesis.ap-southeast-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-2":n={hostname:"kinesis.ap-southeast-2.amazonaws.com",partition:"aws"};break;case"ca-central-1":n={hostname:"kinesis.ca-central-1.amazonaws.com",partition:"aws"};break;case"cn-north-1":n={hostname:"kinesis.cn-north-1.amazonaws.com.cn",partition:"aws-cn"};break;case"cn-northwest-1":n={hostname:"kinesis.cn-northwest-1.amazonaws.com.cn",partition:"aws-cn"};break;case"eu-central-1":n={hostname:"kinesis.eu-central-1.amazonaws.com",partition:"aws"};break;case"eu-north-1":n={hostname:"kinesis.eu-north-1.amazonaws.com",partition:"aws"};break;case"eu-south-1":n={hostname:"kinesis.eu-south-1.amazonaws.com",partition:"aws"};break;case"eu-west-1":n={hostname:"kinesis.eu-west-1.amazonaws.com",partition:"aws"};break;case"eu-west-2":n={hostname:"kinesis.eu-west-2.amazonaws.com",partition:"aws"};break;case"eu-west-3":n={hostname:"kinesis.eu-west-3.amazonaws.com",partition:"aws"};break;case"fips-us-east-1":n={hostname:"kinesis-fips.us-east-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"fips-us-east-2":n={hostname:"kinesis-fips.us-east-2.amazonaws.com",partition:"aws",signingRegion:"us-east-2"};break;case"fips-us-west-1":n={hostname:"kinesis-fips.us-west-1.amazonaws.com",partition:"aws",signingRegion:"us-west-1"};break;case"fips-us-west-2":n={hostname:"kinesis-fips.us-west-2.amazonaws.com",partition:"aws",signingRegion:"us-west-2"};break;case"me-south-1":n={hostname:"kinesis.me-south-1.amazonaws.com",partition:"aws"};break;case"sa-east-1":n={hostname:"kinesis.sa-east-1.amazonaws.com",partition:"aws"};break;case"us-east-1":n={hostname:"kinesis.us-east-1.amazonaws.com",partition:"aws"};break;case"us-east-2":n={hostname:"kinesis.us-east-2.amazonaws.com",partition:"aws"};break;case"us-gov-east-1":n={hostname:"kinesis.us-gov-east-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-east-1"};break;case"us-gov-west-1":n={hostname:"kinesis.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"us-iso-east-1":n={hostname:"kinesis.us-iso-east-1.c2s.ic.gov",partition:"aws-iso"};break;case"us-isob-east-1":n={hostname:"kinesis.us-isob-east-1.sc2s.sgov.gov",partition:"aws-iso-b"};break;case"us-west-1":n={hostname:"kinesis.us-west-1.amazonaws.com",partition:"aws"};break;case"us-west-2":n={hostname:"kinesis.us-west-2.amazonaws.com",partition:"aws"};break;default:Ct.has(e)&&(n={hostname:"kinesis.{region}.amazonaws.com".replace("{region}",e),partition:"aws"}),At.has(e)&&(n={hostname:"kinesis.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),Ot.has(e)&&(n={hostname:"kinesis.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),It.has(e)&&(n={hostname:"kinesis.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),Tt.has(e)&&(n={hostname:"kinesis.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}),void 0===n&&(n={hostname:"kinesis.{region}.amazonaws.com".replace("{region}",e),partition:"aws"})}return Promise.resolve(je({signingService:"kinesis"},n))},serviceId:"Kinesis",urlParser:n(47).a},Pt=je(je({},xt),{runtime:"browser",base64Decoder:wt.a,base64Encoder:wt.b,bodyLengthChecker:_t.a,credentialDefaultProvider:function(e){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:Object(St.a)({serviceId:xt.serviceId,clientVersion:ht.version}),eventStreamSerdeProvider:gt.a,maxAttempts:bt.a,region:Object(yt.a)("Region is missing"),requestHandler:new mt.a,sha256:vt.Sha256,streamCollector:mt.b,utf8Decoder:Et.a,utf8Encoder:Et.b}),kt=n(24),Dt=n(99),Nt=n(41),Lt=n(21),Mt=n(46),jt=n(27),Rt=n(23),Ut=function(e){function t(t){var n=this,r=je(je({},Pt),t),i=Object(kt.b)(r),o=Object(kt.a)(i),s=Object(jt.b)(o),a=Object(bt.c)(s),u=Object(Lt.b)(a),c=Object(Rt.b)(u),l=Object(Dt.a)(c);return(n=e.call(this,l)||this).config=l,n.middlewareStack.use(Object(jt.a)(n.config)),n.middlewareStack.use(Object(bt.b)(n.config)),n.middlewareStack.use(Object(Nt.a)(n.config)),n.middlewareStack.use(Object(Lt.a)(n.config)),n.middlewareStack.use(Object(Mt.a)(n.config)),n.middlewareStack.use(Object(Rt.a)(n.config)),n}return a(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(ft.a),Bt=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},Ft=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},zt=new r.a("AWSKinesisProvider"),qt=function(){function e(e){this._buffer=[],this._config=e||{},this._config.bufferSize=this._config.bufferSize||1e3,this._config.flushSize=this._config.flushSize||100,this._config.flushInterval=this._config.flushInterval||5e3,this._config.resendLimit=this._config.resendLimit||5,this._setupTimer()}return e.prototype._setupTimer=function(){var e=this;this._timer&&clearInterval(this._timer);var t=this._config,n=t.flushSize,r=t.flushInterval;this._timer=setInterval((function(){for(var t=e._buffer.length<n?e._buffer.length:n,r=[],i=0;i<t;i+=1){var o=e._buffer.shift();r.push(o)}e._sendFromBuffer(r)}),r)},e.prototype.getCategory=function(){return"Analytics"},e.prototype.getProviderName=function(){return"AWSKinesis"},e.prototype.configure=function(e){zt.debug("configure Analytics",e);var t=e||{};return this._config=Object.assign({},this._config,t),this._setupTimer(),this._config},e.prototype.record=function(e){return Bt(this,void 0,void 0,(function(){var t;return Ft(this,(function(n){switch(n.label){case 0:return[4,this._getCredentials()];case 1:return(t=n.sent())?(Object.assign(e,{config:this._config,credentials:t}),[2,this._putToBuffer(e)]):[2,Promise.resolve(!1)]}}))}))},e.prototype.updateEndpoint=function(){return zt.debug("updateEndpoint is not implemented in Kinesis provider"),Promise.resolve(!0)},e.prototype._putToBuffer=function(e){return this._buffer.length<1e3?(this._buffer.push(e),Promise.resolve(!0)):(zt.debug("exceed analytics events buffer size"),Promise.reject(!1))},e.prototype._sendFromBuffer=function(e){for(var t=this,n=[],r=null,i=[],o=0;o<e.length;o+=1){var s=e[o].credentials;0===o?(i.push(e[o]),r=s):s.sessionToken===r.sessionToken&&s.identityId===r.identityId?(zt.debug("no change for cred, put event in the same group"),i.push(e[o])):(n.push(i),(i=[]).push(e[o]),r=s)}n.push(i),n.map((function(e){t._sendEvents(e)}))},e.prototype._sendEvents=function(e){var t=this;if(0!==e.length){var n=e[0],r=n.config,i=n.credentials;if(!this._init(r,i))return!1;var o={};e.map((function(e){var t=e.event,n=t.streamName;void 0===o[n]&&(o[n]=[]);var r=t.data&&"string"!=typeof t.data?JSON.stringify(t.data):t.data,s={Data:Object(Et.a)(r),PartitionKey:t.partitionKey||"partition-"+i.identityId};o[n].push(s)})),Object.keys(o).map((function(e){return Bt(t,void 0,void 0,(function(){var t,n;return Ft(this,(function(r){switch(r.label){case 0:zt.debug("putting records to kinesis with records",o[e]),r.label=1;case 1:return r.trys.push([1,3,,4]),t=new pt({Records:o[e],StreamName:e}),[4,this._kinesis.send(t)];case 2:return r.sent(),zt.debug("Upload records to stream",e),[3,4];case 3:return n=r.sent(),zt.debug("Failed to upload records to Kinesis",n),[3,4];case 4:return[2]}}))}))}))}},e.prototype._init=function(e,t){if(zt.debug("init clients"),this._kinesis&&this._config.credentials&&this._config.credentials.sessionToken===t.sessionToken&&this._config.credentials.identityId===t.identityId)return zt.debug("no change for analytics config, directly return from init"),!0;this._config.credentials=t;var n=e.region,r=e.endpoint;return this._initKinesis(n,r,t)},e.prototype._initKinesis=function(e,t,n){return zt.debug("initialize kinesis with credentials",n),this._kinesis=new Ut({region:e,credentials:n,customUserAgent:Object(i.b)(),endpoint:t}),!0},e.prototype._getCredentials=function(){var e=this;return o.a.get().then((function(t){return t?(zt.debug("set credentials for analytics",e._config.credentials),o.a.shear(t)):null})).catch((function(e){return zt.debug("ensure credentials error",e),null}))},e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(68);function i(e,t){void 0===t&&(t={});var n=function(e){return e&&"j"===e[0]&&":"===e[1]?e.substr(2):e}(e);if(function(e,t){return void 0===t&&(t=!e||"{"!==e[0]&&"["!==e[0]&&'"'!==e[0]),!t}(n,t.doNotParse))try{return JSON.parse(n)}catch(e){}return e}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},s=function(){function e(e,t){var n=this;this.changeListeners=[],this.HAS_DOCUMENT_COOKIE=!1,this.cookies=function(e,t){return"string"==typeof e?r.parse(e,t):"object"==typeof e&&null!==e?e:{}}(e,t),new Promise((function(){n.HAS_DOCUMENT_COOKIE="object"==typeof document&&"string"==typeof document.cookie})).catch((function(){}))}return e.prototype._updateBrowserValues=function(e){this.HAS_DOCUMENT_COOKIE&&(this.cookies=r.parse(document.cookie,e))},e.prototype._emitChange=function(e){for(var t=0;t<this.changeListeners.length;++t)this.changeListeners[t](e)},e.prototype.get=function(e,t,n){return void 0===t&&(t={}),this._updateBrowserValues(n),i(this.cookies[e],t)},e.prototype.getAll=function(e,t){void 0===e&&(e={}),this._updateBrowserValues(t);var n={};for(var r in this.cookies)n[r]=i(this.cookies[r],e);return n},e.prototype.set=function(e,t,n){var i;"object"==typeof t&&(t=JSON.stringify(t)),this.cookies=o(o({},this.cookies),((i={})[e]=t,i)),this.HAS_DOCUMENT_COOKIE&&(document.cookie=r.serialize(e,t,n)),this._emitChange({name:e,value:t,options:n})},e.prototype.remove=function(e,t){var n=t=o(o({},t),{expires:new Date(1970,1,1,0,0,1),maxAge:0});this.cookies=o({},this.cookies),delete this.cookies[e],this.HAS_DOCUMENT_COOKIE&&(document.cookie=r.serialize(e,"",n)),this._emitChange({name:e,value:void 0,options:t})},e.prototype.addChangeListener=function(e){this.changeListeners.push(e)},e.prototype.removeChangeListener=function(e){var t=this.changeListeners.indexOf(e);t>=0&&this.changeListeners.splice(t,1)},e}(),a=n(34),u=Object(a.b)().isBrowser,c=function(){function e(e){void 0===e&&(e={}),this.cookies=new s,this.store=u?window.localStorage:Object.create(null),this.cookies=e.req?new s(e.req.headers.cookie):new s,Object.assign(this.store,this.cookies.getAll())}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.entries(this.store).length},enumerable:!0,configurable:!0}),e.prototype.clear=function(){var e=this;Array.from(new Array(this.length)).map((function(t,n){return e.key(n)})).forEach((function(t){return e.removeItem(t)}))},e.prototype.getItem=function(e){return this.getLocalItem(e)},e.prototype.getLocalItem=function(e){return Object.prototype.hasOwnProperty.call(this.store,e)?this.store[e]:null},e.prototype.getUniversalItem=function(e){return this.cookies.get(e)},e.prototype.key=function(e){return Object.keys(this.store)[e]},e.prototype.removeItem=function(e){this.removeLocalItem(e),this.removeUniversalItem(e)},e.prototype.removeLocalItem=function(e){delete this.store[e]},e.prototype.removeUniversalItem=function(e){this.cookies.remove(e,{path:"/"})},e.prototype.setItem=function(e,t){switch(this.setLocalItem(e,t),e.split(".").pop()){case"LastAuthUser":case"accessToken":case"refreshToken":case"idToken":u?this.setUniversalItem(e,t):this.setLocalItem(e,t)}},e.prototype.setLocalItem=function(e,t){this.store[e]=t},e.prototype.setUniversalItem=function(e,t){this.cookies.set(e,t,{path:"/",sameSite:!0,secure:"localhost"!==window.location.hostname})},e}()},function(e,t,n){var r,i,o;e.exports=(o=n(38),i=(r=o).lib.WordArray,r.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var i=[],o=0;o<n;o+=3)for(var s=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,a=0;a<4&&o+.75*a<n;a++)i.push(r.charAt(s>>>6*(3-a)&63));var u=r.charAt(64);if(u)for(;i.length%4;)i.push(u);return i.join("")},parse:function(e){var t=e.length,n=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var o=0;o<n.length;o++)r[n.charCodeAt(o)]=o}var s=n.charAt(64);if(s){var a=e.indexOf(s);-1!==a&&(t=a)}return function(e,t,n){for(var r=[],o=0,s=0;s<t;s++)if(s%4){var a=n[e.charCodeAt(s-1)]<<s%4*2|n[e.charCodeAt(s)]>>>6-s%4*2;r[o>>>2]|=a<<24-o%4*8,o++}return i.create(r,o)}(e,t,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},o.enc.Base64)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(2).__exportStar(n(246),t)},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return C}));var r,i,o=n(52),s=n(9),a=n(59),u=n(26),c=n(48),l=n(405),d=n(78),f=n(29),p=n(15),h=n(6),v=n(8),g=n(11),m=n(4),y=n(65),b=function(){return(b=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},w=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},_=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},S=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},E=new c.a("DataStore");!function(e){e.CONNECTED="CONNECTED"}(r||(r={})),function(e){e[e.none=0]="none",e[e.unauth=1]="unauth",e[e.auth=2]="auth"}(i||(i={}));var C=function(){function t(e,t,n,r,i,s){void 0===n&&(n={}),void 0===s&&(s={Auth:a.a,API:o.a,Cache:u.b}),this.schema=e,this.syncPredicates=t,this.amplifyConfig=n,this.authModeStrategy=r,this.errorHandler=i,this.amplifyContext=s,this.typeQuery=new WeakMap,this.buffer=[],this.runningProcesses=new l.a}return t.prototype.buildSubscription=function(e,t,n,r,i,o,s){var a=this.amplifyConfig.aws_appsync_authenticationType,u=this.getAuthorizationInfo(t,r,a,i,o,s)||{},c=u.isOwner,l=u.ownerField,d=u.ownerValue,f=S(Object(v.c)(e,t,n,c,l),3);return{authMode:s,opType:f[0],opName:f[1],query:f[2],isOwner:c,ownerField:l,ownerValue:d}},t.prototype.getAuthorizationInfo=function(e,t,n,r,o,a){void 0===r&&(r={}),void 0===o&&(o={});var u=Object(v.e)(e);if(a===s.c.AWS_IAM&&u.find((function(e){return"private"===e.authStrategy&&"iam"===e.provider}))&&t===i.unauth)return null;var c,l=u.filter((function(e){return"groups"===e.authStrategy&&["userPools","oidc"].includes(e.provider)}));return a!==s.c.AMAZON_COGNITO_USER_POOLS&&a!==s.c.OPENID_CONNECT||!l.find((function(e){return function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(S(arguments[t]));return e}(Object(v.k)(r,e),Object(v.k)(o,e)).find((function(t){return e.groups.find((function(e){return e===t}))}))}))?((a===s.c.AMAZON_COGNITO_USER_POOLS?u.filter((function(e){return"owner"===e.authStrategy&&"userPools"===e.provider})):[]).forEach((function(e){var t=r[e.identityClaim];t&&(c={authMode:s.c.AMAZON_COGNITO_USER_POOLS,isOwner:!e.areSubscriptionsPublic,ownerField:e.ownerField,ownerValue:t})})),c||((a===s.c.OPENID_CONNECT?u.filter((function(e){return"owner"===e.authStrategy&&"oidc"===e.provider})):[]).forEach((function(e){var t=o[e.identityClaim];t&&(c={authMode:s.c.OPENID_CONNECT,isOwner:!e.areSubscriptionsPublic,ownerField:e.ownerField,ownerValue:t})})),c||{authMode:a||n,isOwner:!1})):{authMode:a,isOwner:!1}},t.prototype.hubQueryCompletionListener=function(e,t){t.payload.event===f.a.SUBSCRIPTION_ACK&&e()},t.prototype.start=function(){var t=this;return[new p.a((function(n){var o,s,a=[],u={},c=i.none;return t.runningProcesses.add((function(){return w(t,void 0,void 0,(function(){var t,l,p,C,A,O,I,T,x,P,k=this;return _(this,(function(D){switch(D.label){case 0:return D.trys.push([0,2,,3]),[4,this.amplifyContext.Auth.currentCredentials()];case 1:return t=D.sent(),c=t.authenticated?i.auth:i.unauth,[3,3];case 2:return D.sent(),[3,3];case 3:return D.trys.push([3,5,,6]),[4,this.amplifyContext.Auth.currentSession()];case 4:return l=D.sent(),o=l.getIdToken().decodePayload(),[3,6];case 5:return D.sent(),[3,6];case 6:if(D.trys.push([6,11,,12]),p=this.amplifyConfig,C=p.aws_cognito_region,A=p.Auth,!C||A&&!A.region)throw"Auth is not configured";return O=void 0,[4,this.amplifyContext.Cache.getItem("federatedInfo")];case 7:return(I=D.sent())?(O=I.token,[3,10]):[3,8];case 8:return[4,this.amplifyContext.Auth.currentAuthenticatedUser()];case 9:(T=D.sent())&&(O=T.token),D.label=10;case 10:return O&&(x=O.split(".")[1],s=JSON.parse(e.from(x,"base64").toString("utf8"))),[3,12];case 11:return P=D.sent(),E.debug("error getting OIDC JWT",P),[3,12];case 12:return Object.values(this.schema.namespaces).forEach((function(e){Object.values(e.models).filter((function(e){return e.syncable})).forEach((function(t){return k.runningProcesses.isOpen&&k.runningProcesses.add((function(){return w(k,void 0,void 0,(function(){var r,i,l,p,C,A,O,I,T=this;return _(this,(function(x){switch(x.label){case 0:return[4,Object(v.i)({authModeStrategy:this.authModeStrategy,defaultAuthMode:this.amplifyConfig.aws_appsync_authenticationType,modelName:t.name,schema:this.schema})];case 1:return r=x.sent(),i=r.READ,u=b(b({},u),((A={})[t.name]=((O={})[v.a.CREATE]=[],O[v.a.UPDATE]=[],O[v.a.DELETE]=[],O),A)),l=[v.a.CREATE,v.a.UPDATE,v.a.DELETE],(I={})[v.a.CREATE]=0,I[v.a.UPDATE]=0,I[v.a.DELETE]=0,p=I,C=function(r){return w(T,void 0,void 0,(function(){var l,A,O,I,T,x,P,k,D,N,L,M,j,R=this;return _(this,(function(U){switch(U.label){case 0:return l=this.buildSubscription(e,t,r,c,o,s,i[p[r]]),A=l.opType,O=l.opName,I=l.query,T=l.isOwner,x=l.ownerField,P=l.ownerValue,k=l.authMode,[4,Object(v.j)(k,this.amplifyConfig)];case 1:if(D=U.sent(),N={},T){if(!P)return n.error("Owner field required, sign in is needed in order to perform this operation"),[2];N[x]=P}return E.debug("Attempting "+r+" subscription with authMode: "+i[p[r]]),L=m.i,M=this.amplifyContext.API.graphql(b(b({query:I,variables:N},{authMode:k}),{authToken:D,userAgentSuffix:L})),u[t.name][A].push(M.map((function(e){return e.value})).subscribe({next:function(e){var n=e.data,r=e.errors;if(Array.isArray(r)&&r.length>0){var i=r.map((function(e){return e.message}));return E.warn("Skipping incoming subscription. Messages: "+i.join("\n")),void R.drainBuffer()}var o=g.a.getPredicates(R.syncPredicates.get(t),!1),s=n[O];R.passesPredicateValidation(s,o)&&R.pushToBuffer(A,t,s),R.drainBuffer()},error:function(e){return w(R,void 0,void 0,(function(){var o,s,a,c,l,d;return _(this,(function(v){switch(v.label){case 0:if(o=e.error,s=S((void 0===o?{errors:[]}:o).errors,1),a=s[0],c=(void 0===a?{}:a).message,(l=void 0===c?"":c).includes(f.a.REALTIME_SUBSCRIPTION_INIT_ERROR)||l.includes(f.a.CONNECTION_FAILED)){if(u[t.name][A].forEach((function(e){return e.unsubscribe()})),u[t.name][A]=[],p[r]++,!(p[r]>=i.length))return E.debug(r+" subscription failed with authMode: "+i[p[r]-1]+". Retrying with authMode: "+i[p[r]]),C(r),[2];E.debug(r+" subscription failed with authMode: "+i[p[r]-1])}E.warn("subscriptionError",l),v.label=1;case 1:return v.trys.push([1,3,,4]),[4,this.errorHandler({recoverySuggestion:"Ensure app code is up to date, auth directives exist and are correct on each model, and that server-side data has not been invalidated by a schema change. If the problem persists, search for or create an issue: https://github.com/aws-amplify/amplify-js/issues",localModel:null,message:l,model:t.name,operation:r,errorType:Object(y.b)(e),process:h.i.subscribe,remoteModel:null,cause:e})];case 2:return v.sent(),[3,4];case 3:return d=v.sent(),E.error("Subscription error handler failed with:",d),[3,4];case 4:return"function"==typeof j&&j(),l.includes('"errorType":"Unauthorized"')||l.includes('"errorType":"OperationDisabled"')||n.error(l),[2]}}))}))}})),a.push(w(R,void 0,void 0,(function(){var e,t=this;return _(this,(function(n){switch(n.label){case 0:return[4,new Promise((function(n){j=n,e=t.hubQueryCompletionListener.bind(t,n),d.a.listen("api",e)}))];case 1:return n.sent(),d.a.remove("api",e),[2]}}))}))),[2]}}))}))},l.forEach((function(e){return C(e)})),[2]}}))}))}))}))})),this.runningProcesses.isOpen&&this.runningProcesses.add((function(){return Promise.all(a).then((function(){n.next(r.CONNECTED)}))})),[2]}}))}))}),"subscription processor new subscriber"),t.runningProcesses.addCleaner((function(){return w(t,void 0,void 0,(function(){return _(this,(function(e){return Object.keys(u).forEach((function(e){u[e][v.a.CREATE].forEach((function(e){return e.unsubscribe()})),u[e][v.a.UPDATE].forEach((function(e){return e.unsubscribe()})),u[e][v.a.DELETE].forEach((function(e){return e.unsubscribe()}))})),[2]}))}))}))})),new p.a((function(e){return t.dataObserver=e,t.drainBuffer(),t.runningProcesses.addCleaner((function(){return w(t,void 0,void 0,(function(){return _(this,(function(e){return this.dataObserver=null,[2]}))}))}))}))]},t.prototype.stop=function(){return w(this,void 0,void 0,(function(){return _(this,(function(e){switch(e.label){case 0:return[4,this.runningProcesses.close()];case 1:return e.sent(),[4,this.runningProcesses.open()];case 2:return e.sent(),[2]}}))}))},t.prototype.passesPredicateValidation=function(e,t){if(!t)return!0;var n=t.predicates,r=t.type;return Object(m.R)(e,r,n)},t.prototype.pushToBuffer=function(e,t,n){this.buffer.push([e,t,n])},t.prototype.drainBuffer=function(){var e=this;this.dataObserver&&(this.buffer.forEach((function(t){return e.dataObserver.next(t)})),this.buffer=[])},t}()}).call(this,n(12).Buffer)},function(e,t,n){"use strict";n.r(t);var r=n(20),i=n(116);n.d(t,"Amplify",(function(){return r.a}));var o=n(59),s=n(26);n.d(t,"Cache",(function(){return s.a}));var a=n(395);n.d(t,"Analytics",(function(){return a.a}));var u=n(117);n.d(t,"AWSPinpointProvider",(function(){return u.a}));var c=n(118);n.d(t,"AWSKinesisProvider",(function(){return c.a}));var l=n(396);n.d(t,"AWSKinesisFirehoseProvider",(function(){return l.a}));var d=n(394);n.d(t,"AmazonPersonalizeProvider",(function(){return d.a})),n.d(t,"Auth",(function(){return o.a}));var f=n(112);n.d(t,"Storage",(function(){return f.a})),n.d(t,"StorageClass",(function(){return f.b}));var p=n(62);n.d(t,"API",(function(){return p.a})),n.d(t,"APIClass",(function(){return p.b}));var h=n(173);n.d(t,"graphqlOperation",(function(){return h.b}));var v=n(6);n.d(t,"AuthModeStrategyType",(function(){return v.a}));var g=n(195);n.d(t,"DataStore",(function(){return g.a}));var m=n(11);n.d(t,"Predicates",(function(){return m.b})),n.d(t,"SortDirection",(function(){return v.k})),n.d(t,"syncExpression",(function(){return v.y}));var y=n(397);n.d(t,"PubSub",(function(){return y.a}));var b=n(392);n.d(t,"Interactions",(function(){return b.a}));var w=n(165);for(var _ in w)["default","Analytics","AWSPinpointProvider","AWSKinesisProvider","AWSKinesisFirehoseProvider","AmazonPersonalizeProvider","Auth","Storage","StorageClass","API","APIClass","graphqlOperation","AuthModeStrategyType","DataStore","Predicates","SortDirection","syncExpression","PubSub","Interactions","XR","Predictions","Logger","Hub","JS","ClientDevice","Signer","I18n","ServiceWorker","AWSCloudWatchProvider","withSSRContext","Geo","Cache","Amplify"].indexOf(_)<0&&function(e){n.d(t,e,(function(){return w[e]}))}(_);var S=n(398);n.d(t,"XR",(function(){return S.a}));var E=n(373);n.d(t,"Predictions",(function(){return E.a}));var C=n(48);n.d(t,"Logger",(function(){return C.a}));var A=n(78);n.d(t,"Hub",(function(){return A.a}));var O=n(34);n.d(t,"JS",(function(){return O.a}));var I=n(113);n.d(t,"ClientDevice",(function(){return I.a}));var T=n(93);n.d(t,"Signer",(function(){return T.a}));var x=n(114);n.d(t,"I18n",(function(){return x.a})),n.d(t,"ServiceWorker",(function(){return i.a}));var P=n(393);n.d(t,"AWSCloudWatchProvider",(function(){return P.a}));var k=n(166);n.d(t,"withSSRContext",(function(){return k.a}));var D=n(391);n.d(t,"Geo",(function(){return D.a})),r.a.Auth=o.a,r.a.Cache=s.a,r.a.ServiceWorker=i.a,t.default=r.a},,function(e,t,n){var r;e.exports=(r=n(38),function(){if("function"==typeof ArrayBuffer){var e=r.lib.WordArray,t=e.init;(e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var n=e.byteLength,r=[],i=0;i<n;i++)r[i>>>2]|=e[i]<<24-i%4*8;t.call(this,r,n)}else t.apply(this,arguments)}).prototype=e}}(),r.lib.WordArray)},function(e,t,n){"use strict";n.r(t),t.default=function(e,t){return t=t||{},new Promise((function(n,r){var i=new XMLHttpRequest,o=[],s=[],a={},u=function(){return{ok:2==(i.status/100|0),statusText:i.statusText,status:i.status,url:i.responseURL,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},clone:u,headers:{keys:function(){return o},entries:function(){return s},get:function(e){return a[e.toLowerCase()]},has:function(e){return e.toLowerCase()in a}}}};for(var c in i.open(t.method||"get",e,!0),i.onload=function(){i.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(e,t,n){o.push(t=t.toLowerCase()),s.push([t,n]),a[t]=a[t]?a[t]+","+n:n})),n(u())},i.onerror=r,i.withCredentials="include"==t.credentials,t.headers)i.setRequestHeader(c,t.headers[c]);i.send(t.body||null)}))}},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,i=n;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var r=n(223),i=n(130),o=n(174),s=n(54),a=function(){function e(e){e?(this.operation=function(e){return new Promise((function(t,n){var r=(0,s.locateWindow)().msCrypto.subtle.importKey("raw",u(e),i.SHA_256_HMAC_ALGO,!1,["sign"]);r.oncomplete=function(){r.result&&t(r.result),n(new Error("ImportKey completed without importing key."))},r.onerror=function(){n(new Error("ImportKey failed to import key."))}}))}(e).then((function(e){return(0,s.locateWindow)().msCrypto.subtle.sign(i.SHA_256_HMAC_ALGO,e)})),this.operation.catch((function(){}))):this.operation=Promise.resolve((0,s.locateWindow)().msCrypto.subtle.digest("SHA-256"))}return e.prototype.update=function(e){var t=this;(0,r.isEmptyData)(e)||(this.operation=this.operation.then((function(n){return n.onerror=function(){t.operation=Promise.reject(new Error("Error encountered updating hash"))},n.process(u(e)),n})),this.operation.catch((function(){})))},e.prototype.digest=function(){return this.operation.then((function(e){return new Promise((function(t,n){e.onerror=function(){n(new Error("Error encountered finalizing hash"))},e.oncomplete=function(){e.result&&t(new Uint8Array(e.result)),n(new Error("Error encountered finalizing hash"))},e.finish()}))}))},e}();function u(e){return"string"==typeof e?(0,o.fromUtf8)(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}t.Sha256=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EMPTY_DATA_SHA_256=t.SHA_256_HMAC_ALGO=t.SHA_256_HASH=void 0,t.SHA_256_HASH={name:"SHA-256"},t.SHA_256_HMAC_ALGO={name:"HMAC",hash:t.SHA_256_HASH},t.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var r=n(224),i=n(130),o=n(54),s=function(){function e(e){this.toHash=new Uint8Array(0),void 0!==e&&(this.key=new Promise((function(t,n){(0,o.locateWindow)().crypto.subtle.importKey("raw",(0,r.convertToBuffer)(e),i.SHA_256_HMAC_ALGO,!1,["sign"]).then(t,n)})),this.key.catch((function(){})))}return e.prototype.update=function(e){if(!(0,r.isEmptyData)(e)){var t=(0,r.convertToBuffer)(e),n=new Uint8Array(this.toHash.byteLength+t.byteLength);n.set(this.toHash,0),n.set(t,this.toHash.byteLength),this.toHash=n}},e.prototype.digest=function(){var e=this;return this.key?this.key.then((function(t){return(0,o.locateWindow)().crypto.subtle.sign(i.SHA_256_HMAC_ALGO,t,e.toHash).then((function(e){return new Uint8Array(e)}))})):(0,r.isEmptyData)(this.toHash)?Promise.resolve(i.EMPTY_DATA_SHA_256):Promise.resolve().then((function(){return(0,o.locateWindow)().crypto.subtle.digest(i.SHA_256_HASH,e.toHash)})).then((function(e){return Promise.resolve(new Uint8Array(e))}))},e}();t.Sha256=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_HASHABLE_LENGTH=t.INIT=t.KEY=t.DIGEST_LENGTH=t.BLOCK_SIZE=void 0,t.BLOCK_SIZE=64,t.DIGEST_LENGTH=32,t.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),t.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],t.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},function(e,t,n){(function(t){var r;e.exports=(r=r||function(e,r){var i;if("undefined"!=typeof window&&window.crypto&&(i=window.crypto),"undefined"!=typeof self&&self.crypto&&(i=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(i=globalThis.crypto),!i&&"undefined"!=typeof window&&window.msCrypto&&(i=window.msCrypto),!i&&void 0!==t&&t.crypto&&(i=t.crypto),!i)try{i=n(245)}catch(e){}var o=function(){if(i){if("function"==typeof i.getRandomValues)try{return i.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof i.randomBytes)try{return i.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},s=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),a={},u=a.lib={},c=u.Base={extend:function(e){var t=s(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},l=u.WordArray=c.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||f).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var s=n[o>>>2]>>>24-o%4*8&255;t[r+o>>>2]|=s<<24-(r+o)%4*8}else for(var a=0;a<i;a+=4)t[r+a>>>2]=n[a>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=c.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(o());return new l.init(t,e)}}),d=a.enc={},f=d.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new l.init(n,t/2)}},p=d.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new l.init(n,t)}},h=d.Utf8={stringify:function(e){try{return decodeURIComponent(escape(p.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return p.parse(unescape(encodeURIComponent(e)))}},v=u.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=h.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,r=this._data,i=r.words,o=r.sigBytes,s=this.blockSize,a=o/(4*s),u=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*s,c=e.min(4*u,o);if(u){for(var d=0;d<u;d+=s)this._doProcessBlock(i,d);n=i.splice(0,u),r.sigBytes-=c}return new l.init(n,c)},clone:function(){var e=c.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),g=(u.Hasher=v.extend({cfg:c.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){v.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new g.HMAC.init(e,n).finalize(t)}}}),a.algo={});return a}(Math),r)}).call(this,n(60))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BLOCK_SIZE=64,t.DIGEST_LENGTH=32,t.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),t.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],t.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uint32ArrayFrom=t.numToUint8=t.isEmptyData=t.convertToBuffer=void 0;var r=n(248);Object.defineProperty(t,"convertToBuffer",{enumerable:!0,get:function(){return r.convertToBuffer}});var i=n(249);Object.defineProperty(t,"isEmptyData",{enumerable:!0,get:function(){return i.isEmptyData}});var o=n(250);Object.defineProperty(t,"numToUint8",{enumerable:!0,get:function(){return o.numToUint8}});var s=n(251);Object.defineProperty(t,"uint32ArrayFrom",{enumerable:!0,get:function(){return s.uint32ArrayFrom}})},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n(60))},function(e,t,n){var r=n(75),i=n(138);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t){var n=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,n){var r=n(142),i=n(286),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},function(e,t){var n=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},function(e,t,n){var r=n(288),i=n(107),o=n(289),s=n(290),a=n(291),u=n(75),c=n(139),l=c(r),d=c(i),f=c(o),p=c(s),h=c(a),v=u;(r&&"[object DataView]"!=v(new r(new ArrayBuffer(1)))||i&&"[object Map]"!=v(new i)||o&&"[object Promise]"!=v(o.resolve())||s&&"[object Set]"!=v(new s)||a&&"[object WeakMap]"!=v(new a))&&(v=function(e){var t=u(e),n="[object Object]"==t?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case l:return"[object DataView]";case d:return"[object Map]";case f:return"[object Promise]";case p:return"[object Set]";case h:return"[object WeakMap]"}return t}),e.exports=v},function(e,t,n){var r=n(292),i=n(76),o=Object.prototype,s=o.hasOwnProperty,a=o.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(e){return i(e)&&s.call(e,"callee")&&!a.call(e,"callee")};e.exports=u},function(e,t,n){var r=n(137),i=n(146);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},function(e,t){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,t,n){var r=n(305),i=n(308),o=n(309);e.exports=function(e,t,n,s,a,u){var c=1&n,l=e.length,d=t.length;if(l!=d&&!(c&&d>l))return!1;var f=u.get(e),p=u.get(t);if(f&&p)return f==t&&p==e;var h=-1,v=!0,g=2&n?new r:void 0;for(u.set(e,t),u.set(t,e);++h<l;){var m=e[h],y=t[h];if(s)var b=c?s(y,m,h,t,e,u):s(m,y,h,e,t,u);if(void 0!==b){if(b)continue;v=!1;break}if(g){if(!i(t,(function(e,t){if(!o(g,t)&&(m===e||a(m,e,n,s,u)))return g.push(t)}))){v=!1;break}}else if(m!==y&&!a(m,y,n,s,u)){v=!1;break}}return u.delete(e),u.delete(t),v}},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";var r=n(40);function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(r.isURLSearchParams(t))o=t.toString();else{var s=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),s.push(i(t)+"="+i(e))})))})),o=s.join("&")}if(o){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}},function(e,t,n){"use strict";var r=n(40),i=n(331),o=n(332),s=n(149),a=n(333),u=n(336),c=n(337),l=n(152),d=n(87),f=n(88);e.exports=function(e){return new Promise((function(t,n){var p,h=e.data,v=e.headers,g=e.responseType;function m(){e.cancelToken&&e.cancelToken.unsubscribe(p),e.signal&&e.signal.removeEventListener("abort",p)}r.isFormData(h)&&delete v["Content-Type"];var y=new XMLHttpRequest;if(e.auth){var b=e.auth.username||"",w=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";v.Authorization="Basic "+btoa(b+":"+w)}var _=a(e.baseURL,e.url);function S(){if(y){var r="getAllResponseHeaders"in y?u(y.getAllResponseHeaders()):null,o={data:g&&"text"!==g&&"json"!==g?y.response:y.responseText,status:y.status,statusText:y.statusText,headers:r,config:e,request:y};i((function(e){t(e),m()}),(function(e){n(e),m()}),o),y=null}}if(y.open(e.method.toUpperCase(),s(_,e.params,e.paramsSerializer),!0),y.timeout=e.timeout,"onloadend"in y?y.onloadend=S:y.onreadystatechange=function(){y&&4===y.readyState&&(0!==y.status||y.responseURL&&0===y.responseURL.indexOf("file:"))&&setTimeout(S)},y.onabort=function(){y&&(n(l("Request aborted",e,"ECONNABORTED",y)),y=null)},y.onerror=function(){n(l("Network Error",e,null,y)),y=null},y.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||d.transitional;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(l(t,e,r.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",y)),y=null},r.isStandardBrowserEnv()){var E=(e.withCredentials||c(_))&&e.xsrfCookieName?o.read(e.xsrfCookieName):void 0;E&&(v[e.xsrfHeaderName]=E)}"setRequestHeader"in y&&r.forEach(v,(function(e,t){void 0===h&&"content-type"===t.toLowerCase()?delete v[t]:y.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(y.withCredentials=!!e.withCredentials),g&&"json"!==g&&(y.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&y.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&y.upload&&y.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(p=function(e){y&&(n(!e||e&&e.type?new f("canceled"):e),y.abort(),y=null)},e.cancelToken&&e.cancelToken.subscribe(p),e.signal&&(e.signal.aborted?p():e.signal.addEventListener("abort",p))),h||(h=null),y.send(h)}))}},function(e,t,n){"use strict";var r=n(150);e.exports=function(e,t,n,i,o){var s=new Error(e);return r(s,t,n,i,o)}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";var r=n(40);e.exports=function(e,t){t=t||{};var n={};function i(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function o(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(e[n],t[n])}function s(e){if(!r.isUndefined(t[e]))return i(void 0,t[e])}function a(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(void 0,t[n])}function u(n){return n in t?i(e[n],t[n]):n in e?i(void 0,e[n]):void 0}var c={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:u};return r.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=c[e]||o,i=t(e);r.isUndefined(i)&&t!==u||(n[e]=i)})),n}},function(e,t){e.exports={version:"0.26.0"}},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,i=n;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){function e(){}return e.createPredicateBuilder=function(t){var n=t.name,r=new Set(Object.keys(t.fields)),i=new Proxy({},{get:function(t,i,o){var s=i;if(!r.has(s))throw new Error("Invalid field for model. field: "+s+", model: "+n);return function(t){return e.sortPredicateGroupsMap.get(o).push({field:s,sortDirection:t}),o}}});return e.sortPredicateGroupsMap.set(i,[]),i},e.isValidPredicate=function(t){return e.sortPredicateGroupsMap.has(t)},e.getPredicates=function(t,n){if(void 0===n&&(n=!0),n&&!e.isValidPredicate(t))throw new Error("The predicate is not valid");return e.sortPredicateGroupsMap.get(t)},e.createFromExisting=function(t,n){if(n&&t)return n(e.createPredicateBuilder(t))},e.sortPredicateGroupsMap=new WeakMap,e}()},function(e,t,n){"use strict";(function(e){}).call(this,n(74))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var r=n(356),i=n(161),o=n(400),s=n(54),a=function(){function e(e){e?(this.operation=function(e){return new Promise((function(t,n){var r=(0,s.locateWindow)().msCrypto.subtle.importKey("raw",u(e),i.SHA_256_HMAC_ALGO,!1,["sign"]);r.oncomplete=function(){r.result&&t(r.result),n(new Error("ImportKey completed without importing key."))},r.onerror=function(){n(new Error("ImportKey failed to import key."))}}))}(e).then((function(e){return(0,s.locateWindow)().msCrypto.subtle.sign(i.SHA_256_HMAC_ALGO,e)})),this.operation.catch((function(){}))):this.operation=Promise.resolve((0,s.locateWindow)().msCrypto.subtle.digest("SHA-256"))}return e.prototype.update=function(e){var t=this;(0,r.isEmptyData)(e)||(this.operation=this.operation.then((function(n){return n.onerror=function(){t.operation=Promise.reject(new Error("Error encountered updating hash"))},n.process(u(e)),n})),this.operation.catch((function(){})))},e.prototype.digest=function(){return this.operation.then((function(e){return new Promise((function(t,n){e.onerror=function(){n(new Error("Error encountered finalizing hash"))},e.oncomplete=function(){e.result&&t(new Uint8Array(e.result)),n(new Error("Error encountered finalizing hash"))},e.finish()}))}))},e}();function u(e){return"string"==typeof e?(0,o.fromUtf8)(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}t.Sha256=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EMPTY_DATA_SHA_256=t.SHA_256_HMAC_ALGO=t.SHA_256_HASH=void 0,t.SHA_256_HASH={name:"SHA-256"},t.SHA_256_HMAC_ALGO={name:"HMAC",hash:t.SHA_256_HASH},t.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var r=n(91),i=n(161),o=n(54),s=function(){function e(e){this.toHash=new Uint8Array(0),void 0!==e&&(this.key=new Promise((function(t,n){(0,o.locateWindow)().crypto.subtle.importKey("raw",(0,r.convertToBuffer)(e),i.SHA_256_HMAC_ALGO,!1,["sign"]).then(t,n)})),this.key.catch((function(){})))}return e.prototype.update=function(e){if(!(0,r.isEmptyData)(e)){var t=(0,r.convertToBuffer)(e),n=new Uint8Array(this.toHash.byteLength+t.byteLength);n.set(this.toHash,0),n.set(t,this.toHash.byteLength),this.toHash=n}},e.prototype.digest=function(){var e=this;return this.key?this.key.then((function(t){return(0,o.locateWindow)().crypto.subtle.sign(i.SHA_256_HMAC_ALGO,t,e.toHash).then((function(e){return new Uint8Array(e)}))})):(0,r.isEmptyData)(this.toHash)?Promise.resolve(i.EMPTY_DATA_SHA_256):Promise.resolve().then((function(){return(0,o.locateWindow)().crypto.subtle.digest(i.SHA_256_HASH,e.toHash)})).then((function(e){return Promise.resolve(new Uint8Array(e))}))},e}();t.Sha256=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_HASHABLE_LENGTH=t.INIT=t.KEY=t.DIGEST_LENGTH=t.BLOCK_SIZE=void 0,t.BLOCK_SIZE=64,t.DIGEST_LENGTH=32,t.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),t.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],t.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return i})),n.d(t,"__assign",(function(){return o})),n.d(t,"__rest",(function(){return s})),n.d(t,"__decorate",(function(){return a})),n.d(t,"__param",(function(){return u})),n.d(t,"__metadata",(function(){return c})),n.d(t,"__awaiter",(function(){return l})),n.d(t,"__generator",(function(){return d})),n.d(t,"__createBinding",(function(){return f})),n.d(t,"__exportStar",(function(){return p})),n.d(t,"__values",(function(){return h})),n.d(t,"__read",(function(){return v})),n.d(t,"__spread",(function(){return g})),n.d(t,"__spreadArrays",(function(){return m})),n.d(t,"__await",(function(){return y})),n.d(t,"__asyncGenerator",(function(){return b})),n.d(t,"__asyncDelegator",(function(){return w})),n.d(t,"__asyncValues",(function(){return _})),n.d(t,"__makeTemplateObject",(function(){return S})),n.d(t,"__importStar",(function(){return E})),n.d(t,"__importDefault",(function(){return C})),n.d(t,"__classPrivateFieldGet",(function(){return A})),n.d(t,"__classPrivateFieldSet",(function(){return O}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function s(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function a(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function u(e,t){return function(n,r){t(n,r,e)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function d(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function f(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}function p(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function h(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(v(arguments[t]));return e}function m(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function y(e){return this instanceof y?(this.v=e,this):new y(e)}function b(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||a(e,t)}))})}function a(e,t){try{(n=i[e](t)).value instanceof y?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(e){l(o[0][3],e)}var n}function u(e){a("next",e)}function c(e){a("throw",e)}function l(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function w(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:y(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function _(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=h(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,i,(t=e[n](t)).done,t.value)}))}}}function S(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function C(e){return e&&e.__esModule?e:{default:e}}function A(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function O(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},function(e,t,n){(function(e){var n,r,i,o;function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}o=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==s(e)&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(1)),r(n(2)),r(n(3)),r(n(4)),r(n(5)),r(n(6)),r(n(7)),r(n(8)),r(n(9)),r(n(10)),r(n(11)),r(n(12)),r(n(13))},function(e,t,n){e.exports={a:"Anchor__a___1_Iz8"}},function(e,t,n){e.exports={button:"Button__button___vS7Mv",signInButton:"Button__signInButton___3bUH-",googleSignInButton:"Button__googleSignInButton___1YiCu",signInButtonIcon:"Button__signInButtonIcon___ihN75",auth0SignInButton:"Button__auth0SignInButton___znnCj",facebookSignInButton:"Button__facebookSignInButton___34Txh",amazonSignInButton:"Button__amazonSignInButton___2EMtl",oAuthSignInButton:"Button__oAuthSignInButton___3UGOl",signInButtonContent:"Button__signInButtonContent___xqTXJ"}},function(e,t,n){e.exports={formContainer:"Form__formContainer___1GA3x",formSection:"Form__formSection___1PPvW",formField:"Form__formField___38Ikl",formRow:"Form__formRow___2mwRs"}},function(e,t,n){e.exports={hint:"Hint__hint___2XngB"}},function(e,t,n){e.exports={input:"Input__input___3e_bf",inputLabel:"Input__inputLabel___3VF0S",label:"Input__label___23sO8",radio:"Input__radio___2hllK"}},function(e,t,n){e.exports={navBar:"Nav__navBar___xtCFA",navRight:"Nav__navRight___1QG2J",nav:"Nav__nav___2Dx2Y",navItem:"Nav__navItem___1LtFQ"}},function(e,t,n){e.exports={photoPickerButton:"PhotoPicker__photoPickerButton___2XdVn",photoPlaceholder:"PhotoPicker__photoPlaceholder___2JXO4",photoPlaceholderIcon:"PhotoPicker__photoPlaceholderIcon___3Et71"}},function(e,t,n){e.exports={container:"Section__container___3YYTG",actionRow:"Section__actionRow___2LWSU",sectionHeader:"Section__sectionHeader___2djyg",sectionHeaderHint:"Section__sectionHeaderHint___3Wxdc",sectionBody:"Section__sectionBody___ihqqd",sectionHeaderContent:"Section__sectionHeaderContent___1UCqa",sectionFooter:"Section__sectionFooter___1T54C",sectionFooterPrimaryContent:"Section__sectionFooterPrimaryContent___2r9ZX",sectionFooterSecondaryContent:"Section__sectionFooterSecondaryContent___Nj41Q"}},function(e,t,n){e.exports={selectInput:"SelectInput__selectInput___3efO4"}},function(e,t,n){e.exports={strike:"Strike__strike___1XV1b",strikeContent:"Strike__strikeContent___10gLb"}},function(e,t,n){e.exports={toast:"Toast__toast___XXr3v",toastClose:"Toast__toastClose___18lU4"}},function(e,t,n){e.exports={totpQrcode:"Totp__totpQrcode___1crLx"}},function(e,t,n){e.exports={sumerianSceneContainer:"XR__sumerianSceneContainer___3nVMt",sumerianScene:"XR__sumerianScene___2Tt7-",loadingOverlay:"XR__loadingOverlay___IbqcI",loadingContainer:"XR__loadingContainer___2Itxb",loadingLogo:"XR__loadingLogo___Ub7xQ",loadingSceneName:"XR__loadingSceneName___3__ne",loadingBar:"XR__loadingBar___2vcke",loadingBarFill:"XR__loadingBarFill___3M-D9",sceneErrorText:"XR__sceneErrorText___2y0tp",sceneBar:"XR__sceneBar___2ShrP",sceneName:"XR__sceneName___1ApHr",sceneActions:"XR__sceneActions___7plGs",actionButton:"XR__actionButton___2poIM",tooltip:"XR__tooltip___UYyhn",actionIcon:"XR__actionIcon___2qnd2",autoShowTooltip:"XR__autoShowTooltip___V1QH7"}}])},"object"==s(t)&&"object"==s(e)?e.exports=o():(r=[],void 0===(i="function"==typeof(n=o)?n.apply(t,r):n)||(e.exports=i))}).call(this,n(73)(e))},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(52),i=n(59),o=n(80),s=n(20),a=n(119),u=n(195),c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},l=[i.a,o.a],d=[r.a,i.a,u.a];function f(e){void 0===e&&(e={});var t=e.modules,n=void 0===t?d:t,r=e.req,i=s.a.configure(),o=new s.b,u=new a.a({req:r});return l.forEach((function(e){n.includes(e)||o.register(new e.constructor)})),n.forEach((function(e){o.register(new e.constructor)})),o.configure(c(c({},i),{storage:u})),o}},function(e,t,n){"use strict";(function(e){}).call(this,n(74))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var r=n(378),i=n(169),o=n(402),s=n(54),a=function(){function e(e){e?(this.operation=function(e){return new Promise((function(t,n){var r=(0,s.locateWindow)().msCrypto.subtle.importKey("raw",u(e),i.SHA_256_HMAC_ALGO,!1,["sign"]);r.oncomplete=function(){r.result&&t(r.result),n(new Error("ImportKey completed without importing key."))},r.onerror=function(){n(new Error("ImportKey failed to import key."))}}))}(e).then((function(e){return(0,s.locateWindow)().msCrypto.subtle.sign(i.SHA_256_HMAC_ALGO,e)})),this.operation.catch((function(){}))):this.operation=Promise.resolve((0,s.locateWindow)().msCrypto.subtle.digest("SHA-256"))}return e.prototype.update=function(e){var t=this;(0,r.isEmptyData)(e)||(this.operation=this.operation.then((function(n){return n.onerror=function(){t.operation=Promise.reject(new Error("Error encountered updating hash"))},n.process(u(e)),n})),this.operation.catch((function(){})))},e.prototype.digest=function(){return this.operation.then((function(e){return new Promise((function(t,n){e.onerror=function(){n(new Error("Error encountered finalizing hash"))},e.oncomplete=function(){e.result&&t(new Uint8Array(e.result)),n(new Error("Error encountered finalizing hash"))},e.finish()}))}))},e}();function u(e){return"string"==typeof e?(0,o.fromUtf8)(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}t.Sha256=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EMPTY_DATA_SHA_256=t.SHA_256_HMAC_ALGO=t.SHA_256_HASH=void 0,t.SHA_256_HASH={name:"SHA-256"},t.SHA_256_HMAC_ALGO={name:"HMAC",hash:t.SHA_256_HASH},t.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var r=n(91),i=n(169),o=n(54),s=function(){function e(e){this.toHash=new Uint8Array(0),void 0!==e&&(this.key=new Promise((function(t,n){(0,o.locateWindow)().crypto.subtle.importKey("raw",(0,r.convertToBuffer)(e),i.SHA_256_HMAC_ALGO,!1,["sign"]).then(t,n)})),this.key.catch((function(){})))}return e.prototype.update=function(e){if(!(0,r.isEmptyData)(e)){var t=(0,r.convertToBuffer)(e),n=new Uint8Array(this.toHash.byteLength+t.byteLength);n.set(this.toHash,0),n.set(t,this.toHash.byteLength),this.toHash=n}},e.prototype.digest=function(){var e=this;return this.key?this.key.then((function(t){return(0,o.locateWindow)().crypto.subtle.sign(i.SHA_256_HMAC_ALGO,t,e.toHash).then((function(e){return new Uint8Array(e)}))})):(0,r.isEmptyData)(this.toHash)?Promise.resolve(i.EMPTY_DATA_SHA_256):Promise.resolve().then((function(){return(0,o.locateWindow)().crypto.subtle.digest(i.SHA_256_HASH,e.toHash)})).then((function(e){return Promise.resolve(new Uint8Array(e))}))},e}();t.Sha256=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_HASHABLE_LENGTH=t.INIT=t.KEY=t.DIGEST_LENGTH=t.BLOCK_SIZE=void 0,t.BLOCK_SIZE=64,t.DIGEST_LENGTH=32,t.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),t.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],t.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return i})),n.d(t,"__assign",(function(){return o})),n.d(t,"__rest",(function(){return s})),n.d(t,"__decorate",(function(){return a})),n.d(t,"__param",(function(){return u})),n.d(t,"__metadata",(function(){return c})),n.d(t,"__awaiter",(function(){return l})),n.d(t,"__generator",(function(){return d})),n.d(t,"__createBinding",(function(){return f})),n.d(t,"__exportStar",(function(){return p})),n.d(t,"__values",(function(){return h})),n.d(t,"__read",(function(){return v})),n.d(t,"__spread",(function(){return g})),n.d(t,"__spreadArrays",(function(){return m})),n.d(t,"__await",(function(){return y})),n.d(t,"__asyncGenerator",(function(){return b})),n.d(t,"__asyncDelegator",(function(){return w})),n.d(t,"__asyncValues",(function(){return _})),n.d(t,"__makeTemplateObject",(function(){return S})),n.d(t,"__importStar",(function(){return E})),n.d(t,"__importDefault",(function(){return C})),n.d(t,"__classPrivateFieldGet",(function(){return A})),n.d(t,"__classPrivateFieldSet",(function(){return O}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function s(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function a(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function u(e,t){return function(n,r){t(n,r,e)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function d(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function f(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}function p(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function h(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(v(arguments[t]));return e}function m(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function y(e){return this instanceof y?(this.v=e,this):new y(e)}function b(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||a(e,t)}))})}function a(e,t){try{(n=i[e](t)).value instanceof y?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(e){l(o[0][3],e)}var n}function u(e){a("next",e)}function c(e){a("throw",e)}function l(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function w(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:y(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function _(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=h(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,i,(t=e[n](t)).done,t.value)}))}}}function S(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function C(e){return e&&e.__esModule?e:{default:e}}function A(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function O(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},function(e,t,n){"use strict";n.d(t,"b",(function(){return le})),n.d(t,"a",(function(){return de}));var r=n(197);function i(e,t,n){return new r.a("Syntax Error: ".concat(n),void 0,e,[t])}var o=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"}),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):void 0;function a(e){var t=e.prototype.toJSON;"function"==typeof t||function(e,t){if(!Boolean(0))throw new Error("Unexpected invariant triggered.")}(),e.prototype.inspect=t,s&&(e.prototype[s]=t)}var u=function(){function e(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}return e.prototype.toJSON=function(){return{start:this.start,end:this.end}},e}();a(u);var c=function(){function e(e,t,n,r,i,o,s){this.kind=e,this.start=t,this.end=n,this.line=r,this.column=i,this.value=s,this.prev=o,this.next=null}return e.prototype.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},e}();function l(e){return null!=e&&"string"==typeof e.kind}a(c);var d=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"}),f=n(95);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e){return v(e,[])}function v(e,t){switch(p(e)){case"string":return JSON.stringify(e);case"function":return e.name?"[function ".concat(e.name,"]"):"[function]";case"object":return null===e?"null":function(e,t){if(-1!==t.indexOf(e))return"[Circular]";var n=[].concat(t,[e]),r=function(e){var t=e[String(s)];return"function"==typeof t?t:"function"==typeof e.inspect?e.inspect:void 0}(e);if(void 0!==r){var i=r.call(e);if(i!==e)return"string"==typeof i?i:v(i,n)}else if(Array.isArray(e))return function(e,t){if(0===e.length)return"[]";if(t.length>2)return"[Array]";for(var n=Math.min(10,e.length),r=e.length-n,i=[],o=0;o<n;++o)i.push(v(e[o],t));return 1===r?i.push("... 1 more item"):r>1&&i.push("... ".concat(r," more items")),"["+i.join(", ")+"]"}(e,n);return function(e,t){var n=Object.keys(e);return 0===n.length?"{}":t.length>2?"["+function(e){var t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if("Object"===t&&"function"==typeof e.constructor){var n=e.constructor.name;if("string"==typeof n&&""!==n)return n}return t}(e)+"]":"{ "+n.map((function(n){return n+": "+v(e[n],t)})).join(", ")+" }"}(e,n)}(e,t);default:return String(e)}}function g(e,t){if(!Boolean(e))throw new Error(t)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var y=function(){function e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GraphQL request",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{line:1,column:1};"string"==typeof e||g(0,"Body must be a string. Received: ".concat(h(e),".")),this.body=e,this.name=t,this.locationOffset=n,this.locationOffset.line>0||g(0,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||g(0,"column in locationOffset is 1-indexed and must be positive.")}var t,n;return t=e,(n=[{key:f.a,get:function(){return"Source"}}])&&m(t.prototype,n),e}(),b=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function w(e){var t=e.split(/\r\n|[\n\r]/g),n=function(e){for(var t,n=!0,r=!0,i=0,o=null,s=0;s<e.length;++s)switch(e.charCodeAt(s)){case 13:10===e.charCodeAt(s+1)&&++s;case 10:n=!1,r=!0,i=0;break;case 9:case 32:++i;break;default:r&&!n&&(null===o||i<o)&&(o=i),r=!1}return null!==(t=o)&&void 0!==t?t:0}(e);if(0!==n)for(var r=1;r<t.length;r++)t[r]=t[r].slice(n);for(var i=0;i<t.length&&_(t[i]);)++i;for(var o=t.length;o>i&&_(t[o-1]);)--o;return t.slice(i,o).join("\n")}function _(e){for(var t=0;t<e.length;++t)if(" "!==e[t]&&"\t"!==e[t])return!1;return!0}var S=function(){function e(e){var t=new c(d.SOF,0,0,0,0,null);this.source=e,this.lastToken=t,this.token=t,this.line=1,this.lineStart=0}var t=e.prototype;return t.advance=function(){return this.lastToken=this.token,this.token=this.lookahead()},t.lookahead=function(){var e=this.token;if(e.kind!==d.EOF)do{var t;e=null!==(t=e.next)&&void 0!==t?t:e.next=C(this,e)}while(e.kind===d.COMMENT);return e},e}();function E(e){return isNaN(e)?d.EOF:e<127?JSON.stringify(String.fromCharCode(e)):'"\\u'.concat(("00"+e.toString(16).toUpperCase()).slice(-4),'"')}function C(e,t){for(var n=e.source,r=n.body,o=r.length,s=t.end;s<o;){var a=r.charCodeAt(s),u=e.line,l=1+s-e.lineStart;switch(a){case 65279:case 9:case 32:case 44:++s;continue;case 10:++s,++e.line,e.lineStart=s;continue;case 13:10===r.charCodeAt(s+1)?s+=2:++s,++e.line,e.lineStart=s;continue;case 33:return new c(d.BANG,s,s+1,u,l,t);case 35:return O(n,s,u,l,t);case 36:return new c(d.DOLLAR,s,s+1,u,l,t);case 38:return new c(d.AMP,s,s+1,u,l,t);case 40:return new c(d.PAREN_L,s,s+1,u,l,t);case 41:return new c(d.PAREN_R,s,s+1,u,l,t);case 46:if(46===r.charCodeAt(s+1)&&46===r.charCodeAt(s+2))return new c(d.SPREAD,s,s+3,u,l,t);break;case 58:return new c(d.COLON,s,s+1,u,l,t);case 61:return new c(d.EQUALS,s,s+1,u,l,t);case 64:return new c(d.AT,s,s+1,u,l,t);case 91:return new c(d.BRACKET_L,s,s+1,u,l,t);case 93:return new c(d.BRACKET_R,s,s+1,u,l,t);case 123:return new c(d.BRACE_L,s,s+1,u,l,t);case 124:return new c(d.PIPE,s,s+1,u,l,t);case 125:return new c(d.BRACE_R,s,s+1,u,l,t);case 34:return 34===r.charCodeAt(s+1)&&34===r.charCodeAt(s+2)?P(n,s,u,l,t,e):x(n,s,u,l,t);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return I(n,s,a,u,l,t);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return D(n,s,u,l,t)}throw i(n,s,A(a))}var f=e.line,p=1+s-e.lineStart;return new c(d.EOF,o,o,f,p,t)}function A(e){return e<32&&9!==e&&10!==e&&13!==e?"Cannot contain the invalid character ".concat(E(e),"."):39===e?"Unexpected single quote character ('), did you mean to use a double quote (\")?":"Cannot parse the unexpected character ".concat(E(e),".")}function O(e,t,n,r,i){var o,s=e.body,a=t;do{o=s.charCodeAt(++a)}while(!isNaN(o)&&(o>31||9===o));return new c(d.COMMENT,t,a,n,r,i,s.slice(t+1,a))}function I(e,t,n,r,o,s){var a=e.body,u=n,l=t,f=!1;if(45===u&&(u=a.charCodeAt(++l)),48===u){if((u=a.charCodeAt(++l))>=48&&u<=57)throw i(e,l,"Invalid number, unexpected digit after 0: ".concat(E(u),"."))}else l=T(e,l,u),u=a.charCodeAt(l);if(46===u&&(f=!0,u=a.charCodeAt(++l),l=T(e,l,u),u=a.charCodeAt(l)),69!==u&&101!==u||(f=!0,43!==(u=a.charCodeAt(++l))&&45!==u||(u=a.charCodeAt(++l)),l=T(e,l,u),u=a.charCodeAt(l)),46===u||function(e){return 95===e||e>=65&&e<=90||e>=97&&e<=122}(u))throw i(e,l,"Invalid number, expected digit but got: ".concat(E(u),"."));return new c(f?d.FLOAT:d.INT,t,l,r,o,s,a.slice(t,l))}function T(e,t,n){var r=e.body,o=t,s=n;if(s>=48&&s<=57){do{s=r.charCodeAt(++o)}while(s>=48&&s<=57);return o}throw i(e,o,"Invalid number, expected digit but got: ".concat(E(s),"."))}function x(e,t,n,r,o){for(var s,a,u,l,f=e.body,p=t+1,h=p,v=0,g="";p<f.length&&!isNaN(v=f.charCodeAt(p))&&10!==v&&13!==v;){if(34===v)return g+=f.slice(h,p),new c(d.STRING,t,p+1,n,r,o,g);if(v<32&&9!==v)throw i(e,p,"Invalid character within String: ".concat(E(v),"."));if(++p,92===v){switch(g+=f.slice(h,p-1),v=f.charCodeAt(p)){case 34:g+='"';break;case 47:g+="/";break;case 92:g+="\\";break;case 98:g+="\b";break;case 102:g+="\f";break;case 110:g+="\n";break;case 114:g+="\r";break;case 116:g+="\t";break;case 117:var m=(s=f.charCodeAt(p+1),a=f.charCodeAt(p+2),u=f.charCodeAt(p+3),l=f.charCodeAt(p+4),k(s)<<12|k(a)<<8|k(u)<<4|k(l));if(m<0){var y=f.slice(p+1,p+5);throw i(e,p,"Invalid character escape sequence: \\u".concat(y,"."))}g+=String.fromCharCode(m),p+=4;break;default:throw i(e,p,"Invalid character escape sequence: \\".concat(String.fromCharCode(v),"."))}h=++p}}throw i(e,p,"Unterminated string.")}function P(e,t,n,r,o,s){for(var a=e.body,u=t+3,l=u,f=0,p="";u<a.length&&!isNaN(f=a.charCodeAt(u));){if(34===f&&34===a.charCodeAt(u+1)&&34===a.charCodeAt(u+2))return p+=a.slice(l,u),new c(d.BLOCK_STRING,t,u+3,n,r,o,w(p));if(f<32&&9!==f&&10!==f&&13!==f)throw i(e,u,"Invalid character within String: ".concat(E(f),"."));10===f?(++u,++s.line,s.lineStart=u):13===f?(10===a.charCodeAt(u+1)?u+=2:++u,++s.line,s.lineStart=u):92===f&&34===a.charCodeAt(u+1)&&34===a.charCodeAt(u+2)&&34===a.charCodeAt(u+3)?(p+=a.slice(l,u)+'"""',l=u+=4):++u}throw i(e,u,"Unterminated string.")}function k(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:-1}function D(e,t,n,r,i){for(var o=e.body,s=o.length,a=t+1,u=0;a!==s&&!isNaN(u=o.charCodeAt(a))&&(95===u||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122);)++a;return new c(d.NAME,t,a,n,r,i,o.slice(t,a))}function N(e,t){return new L(e,t).parseDocument()}var L=function(){function e(e,t){var n=function(e){return function(e,t){return e instanceof t}(e,y)}(e)?e:new y(e);this._lexer=new S(n),this._options=t}var t=e.prototype;return t.parseName=function(){var e=this.expectToken(d.NAME);return{kind:o.NAME,value:e.value,loc:this.loc(e)}},t.parseDocument=function(){var e=this._lexer.token;return{kind:o.DOCUMENT,definitions:this.many(d.SOF,this.parseDefinition,d.EOF),loc:this.loc(e)}},t.parseDefinition=function(){if(this.peek(d.NAME))switch(this._lexer.token.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return this.parseTypeSystemDefinition();case"extend":return this.parseTypeSystemExtension()}else{if(this.peek(d.BRACE_L))return this.parseOperationDefinition();if(this.peekDescription())return this.parseTypeSystemDefinition()}throw this.unexpected()},t.parseOperationDefinition=function(){var e=this._lexer.token;if(this.peek(d.BRACE_L))return{kind:o.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet(),loc:this.loc(e)};var t,n=this.parseOperationType();return this.peek(d.NAME)&&(t=this.parseName()),{kind:o.OPERATION_DEFINITION,operation:n,name:t,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(e)}},t.parseOperationType=function(){var e=this.expectToken(d.NAME);switch(e.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw this.unexpected(e)},t.parseVariableDefinitions=function(){return this.optionalMany(d.PAREN_L,this.parseVariableDefinition,d.PAREN_R)},t.parseVariableDefinition=function(){var e=this._lexer.token;return{kind:o.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(d.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(d.EQUALS)?this.parseValueLiteral(!0):void 0,directives:this.parseDirectives(!0),loc:this.loc(e)}},t.parseVariable=function(){var e=this._lexer.token;return this.expectToken(d.DOLLAR),{kind:o.VARIABLE,name:this.parseName(),loc:this.loc(e)}},t.parseSelectionSet=function(){var e=this._lexer.token;return{kind:o.SELECTION_SET,selections:this.many(d.BRACE_L,this.parseSelection,d.BRACE_R),loc:this.loc(e)}},t.parseSelection=function(){return this.peek(d.SPREAD)?this.parseFragment():this.parseField()},t.parseField=function(){var e,t,n=this._lexer.token,r=this.parseName();return this.expectOptionalToken(d.COLON)?(e=r,t=this.parseName()):t=r,{kind:o.FIELD,alias:e,name:t,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(d.BRACE_L)?this.parseSelectionSet():void 0,loc:this.loc(n)}},t.parseArguments=function(e){var t=e?this.parseConstArgument:this.parseArgument;return this.optionalMany(d.PAREN_L,t,d.PAREN_R)},t.parseArgument=function(){var e=this._lexer.token,t=this.parseName();return this.expectToken(d.COLON),{kind:o.ARGUMENT,name:t,value:this.parseValueLiteral(!1),loc:this.loc(e)}},t.parseConstArgument=function(){var e=this._lexer.token;return{kind:o.ARGUMENT,name:this.parseName(),value:(this.expectToken(d.COLON),this.parseValueLiteral(!0)),loc:this.loc(e)}},t.parseFragment=function(){var e=this._lexer.token;this.expectToken(d.SPREAD);var t=this.expectOptionalKeyword("on");return!t&&this.peek(d.NAME)?{kind:o.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1),loc:this.loc(e)}:{kind:o.INLINE_FRAGMENT,typeCondition:t?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(e)}},t.parseFragmentDefinition=function(){var e,t=this._lexer.token;return this.expectKeyword("fragment"),!0===(null===(e=this._options)||void 0===e?void 0:e.experimentalFragmentVariables)?{kind:o.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}:{kind:o.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}},t.parseFragmentName=function(){if("on"===this._lexer.token.value)throw this.unexpected();return this.parseName()},t.parseValueLiteral=function(e){var t=this._lexer.token;switch(t.kind){case d.BRACKET_L:return this.parseList(e);case d.BRACE_L:return this.parseObject(e);case d.INT:return this._lexer.advance(),{kind:o.INT,value:t.value,loc:this.loc(t)};case d.FLOAT:return this._lexer.advance(),{kind:o.FLOAT,value:t.value,loc:this.loc(t)};case d.STRING:case d.BLOCK_STRING:return this.parseStringLiteral();case d.NAME:switch(this._lexer.advance(),t.value){case"true":return{kind:o.BOOLEAN,value:!0,loc:this.loc(t)};case"false":return{kind:o.BOOLEAN,value:!1,loc:this.loc(t)};case"null":return{kind:o.NULL,loc:this.loc(t)};default:return{kind:o.ENUM,value:t.value,loc:this.loc(t)}}case d.DOLLAR:if(!e)return this.parseVariable()}throw this.unexpected()},t.parseStringLiteral=function(){var e=this._lexer.token;return this._lexer.advance(),{kind:o.STRING,value:e.value,block:e.kind===d.BLOCK_STRING,loc:this.loc(e)}},t.parseList=function(e){var t=this,n=this._lexer.token;return{kind:o.LIST,values:this.any(d.BRACKET_L,(function(){return t.parseValueLiteral(e)}),d.BRACKET_R),loc:this.loc(n)}},t.parseObject=function(e){var t=this,n=this._lexer.token;return{kind:o.OBJECT,fields:this.any(d.BRACE_L,(function(){return t.parseObjectField(e)}),d.BRACE_R),loc:this.loc(n)}},t.parseObjectField=function(e){var t=this._lexer.token,n=this.parseName();return this.expectToken(d.COLON),{kind:o.OBJECT_FIELD,name:n,value:this.parseValueLiteral(e),loc:this.loc(t)}},t.parseDirectives=function(e){for(var t=[];this.peek(d.AT);)t.push(this.parseDirective(e));return t},t.parseDirective=function(e){var t=this._lexer.token;return this.expectToken(d.AT),{kind:o.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(e),loc:this.loc(t)}},t.parseTypeReference=function(){var e,t=this._lexer.token;return this.expectOptionalToken(d.BRACKET_L)?(e=this.parseTypeReference(),this.expectToken(d.BRACKET_R),e={kind:o.LIST_TYPE,type:e,loc:this.loc(t)}):e=this.parseNamedType(),this.expectOptionalToken(d.BANG)?{kind:o.NON_NULL_TYPE,type:e,loc:this.loc(t)}:e},t.parseNamedType=function(){var e=this._lexer.token;return{kind:o.NAMED_TYPE,name:this.parseName(),loc:this.loc(e)}},t.parseTypeSystemDefinition=function(){var e=this.peekDescription()?this._lexer.lookahead():this._lexer.token;if(e.kind===d.NAME)switch(e.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}throw this.unexpected(e)},t.peekDescription=function(){return this.peek(d.STRING)||this.peek(d.BLOCK_STRING)},t.parseDescription=function(){if(this.peekDescription())return this.parseStringLiteral()},t.parseSchemaDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("schema");var n=this.parseDirectives(!0),r=this.many(d.BRACE_L,this.parseOperationTypeDefinition,d.BRACE_R);return{kind:o.SCHEMA_DEFINITION,description:t,directives:n,operationTypes:r,loc:this.loc(e)}},t.parseOperationTypeDefinition=function(){var e=this._lexer.token,t=this.parseOperationType();this.expectToken(d.COLON);var n=this.parseNamedType();return{kind:o.OPERATION_TYPE_DEFINITION,operation:t,type:n,loc:this.loc(e)}},t.parseScalarTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("scalar");var n=this.parseName(),r=this.parseDirectives(!0);return{kind:o.SCALAR_TYPE_DEFINITION,description:t,name:n,directives:r,loc:this.loc(e)}},t.parseObjectTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("type");var n=this.parseName(),r=this.parseImplementsInterfaces(),i=this.parseDirectives(!0),s=this.parseFieldsDefinition();return{kind:o.OBJECT_TYPE_DEFINITION,description:t,name:n,interfaces:r,directives:i,fields:s,loc:this.loc(e)}},t.parseImplementsInterfaces=function(){var e;if(!this.expectOptionalKeyword("implements"))return[];if(!0===(null===(e=this._options)||void 0===e?void 0:e.allowLegacySDLImplementsInterfaces)){var t=[];this.expectOptionalToken(d.AMP);do{t.push(this.parseNamedType())}while(this.expectOptionalToken(d.AMP)||this.peek(d.NAME));return t}return this.delimitedMany(d.AMP,this.parseNamedType)},t.parseFieldsDefinition=function(){var e;return!0===(null===(e=this._options)||void 0===e?void 0:e.allowLegacySDLEmptyFields)&&this.peek(d.BRACE_L)&&this._lexer.lookahead().kind===d.BRACE_R?(this._lexer.advance(),this._lexer.advance(),[]):this.optionalMany(d.BRACE_L,this.parseFieldDefinition,d.BRACE_R)},t.parseFieldDefinition=function(){var e=this._lexer.token,t=this.parseDescription(),n=this.parseName(),r=this.parseArgumentDefs();this.expectToken(d.COLON);var i=this.parseTypeReference(),s=this.parseDirectives(!0);return{kind:o.FIELD_DEFINITION,description:t,name:n,arguments:r,type:i,directives:s,loc:this.loc(e)}},t.parseArgumentDefs=function(){return this.optionalMany(d.PAREN_L,this.parseInputValueDef,d.PAREN_R)},t.parseInputValueDef=function(){var e=this._lexer.token,t=this.parseDescription(),n=this.parseName();this.expectToken(d.COLON);var r,i=this.parseTypeReference();this.expectOptionalToken(d.EQUALS)&&(r=this.parseValueLiteral(!0));var s=this.parseDirectives(!0);return{kind:o.INPUT_VALUE_DEFINITION,description:t,name:n,type:i,defaultValue:r,directives:s,loc:this.loc(e)}},t.parseInterfaceTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("interface");var n=this.parseName(),r=this.parseImplementsInterfaces(),i=this.parseDirectives(!0),s=this.parseFieldsDefinition();return{kind:o.INTERFACE_TYPE_DEFINITION,description:t,name:n,interfaces:r,directives:i,fields:s,loc:this.loc(e)}},t.parseUnionTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("union");var n=this.parseName(),r=this.parseDirectives(!0),i=this.parseUnionMemberTypes();return{kind:o.UNION_TYPE_DEFINITION,description:t,name:n,directives:r,types:i,loc:this.loc(e)}},t.parseUnionMemberTypes=function(){return this.expectOptionalToken(d.EQUALS)?this.delimitedMany(d.PIPE,this.parseNamedType):[]},t.parseEnumTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("enum");var n=this.parseName(),r=this.parseDirectives(!0),i=this.parseEnumValuesDefinition();return{kind:o.ENUM_TYPE_DEFINITION,description:t,name:n,directives:r,values:i,loc:this.loc(e)}},t.parseEnumValuesDefinition=function(){return this.optionalMany(d.BRACE_L,this.parseEnumValueDefinition,d.BRACE_R)},t.parseEnumValueDefinition=function(){var e=this._lexer.token,t=this.parseDescription(),n=this.parseName(),r=this.parseDirectives(!0);return{kind:o.ENUM_VALUE_DEFINITION,description:t,name:n,directives:r,loc:this.loc(e)}},t.parseInputObjectTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("input");var n=this.parseName(),r=this.parseDirectives(!0),i=this.parseInputFieldsDefinition();return{kind:o.INPUT_OBJECT_TYPE_DEFINITION,description:t,name:n,directives:r,fields:i,loc:this.loc(e)}},t.parseInputFieldsDefinition=function(){return this.optionalMany(d.BRACE_L,this.parseInputValueDef,d.BRACE_R)},t.parseTypeSystemExtension=function(){var e=this._lexer.lookahead();if(e.kind===d.NAME)switch(e.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(e)},t.parseSchemaExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");var t=this.parseDirectives(!0),n=this.optionalMany(d.BRACE_L,this.parseOperationTypeDefinition,d.BRACE_R);if(0===t.length&&0===n.length)throw this.unexpected();return{kind:o.SCHEMA_EXTENSION,directives:t,operationTypes:n,loc:this.loc(e)}},t.parseScalarTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");var t=this.parseName(),n=this.parseDirectives(!0);if(0===n.length)throw this.unexpected();return{kind:o.SCALAR_TYPE_EXTENSION,name:t,directives:n,loc:this.loc(e)}},t.parseObjectTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");var t=this.parseName(),n=this.parseImplementsInterfaces(),r=this.parseDirectives(!0),i=this.parseFieldsDefinition();if(0===n.length&&0===r.length&&0===i.length)throw this.unexpected();return{kind:o.OBJECT_TYPE_EXTENSION,name:t,interfaces:n,directives:r,fields:i,loc:this.loc(e)}},t.parseInterfaceTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");var t=this.parseName(),n=this.parseImplementsInterfaces(),r=this.parseDirectives(!0),i=this.parseFieldsDefinition();if(0===n.length&&0===r.length&&0===i.length)throw this.unexpected();return{kind:o.INTERFACE_TYPE_EXTENSION,name:t,interfaces:n,directives:r,fields:i,loc:this.loc(e)}},t.parseUnionTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");var t=this.parseName(),n=this.parseDirectives(!0),r=this.parseUnionMemberTypes();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:o.UNION_TYPE_EXTENSION,name:t,directives:n,types:r,loc:this.loc(e)}},t.parseEnumTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");var t=this.parseName(),n=this.parseDirectives(!0),r=this.parseEnumValuesDefinition();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:o.ENUM_TYPE_EXTENSION,name:t,directives:n,values:r,loc:this.loc(e)}},t.parseInputObjectTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");var t=this.parseName(),n=this.parseDirectives(!0),r=this.parseInputFieldsDefinition();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:o.INPUT_OBJECT_TYPE_EXTENSION,name:t,directives:n,fields:r,loc:this.loc(e)}},t.parseDirectiveDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("directive"),this.expectToken(d.AT);var n=this.parseName(),r=this.parseArgumentDefs(),i=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");var s=this.parseDirectiveLocations();return{kind:o.DIRECTIVE_DEFINITION,description:t,name:n,arguments:r,repeatable:i,locations:s,loc:this.loc(e)}},t.parseDirectiveLocations=function(){return this.delimitedMany(d.PIPE,this.parseDirectiveLocation)},t.parseDirectiveLocation=function(){var e=this._lexer.token,t=this.parseName();if(void 0!==b[t.value])return t;throw this.unexpected(e)},t.loc=function(e){var t;if(!0!==(null===(t=this._options)||void 0===t?void 0:t.noLocation))return new u(e,this._lexer.lastToken,this._lexer.source)},t.peek=function(e){return this._lexer.token.kind===e},t.expectToken=function(e){var t=this._lexer.token;if(t.kind===e)return this._lexer.advance(),t;throw i(this._lexer.source,t.start,"Expected ".concat(j(e),", found ").concat(M(t),"."))},t.expectOptionalToken=function(e){var t=this._lexer.token;if(t.kind===e)return this._lexer.advance(),t},t.expectKeyword=function(e){var t=this._lexer.token;if(t.kind!==d.NAME||t.value!==e)throw i(this._lexer.source,t.start,'Expected "'.concat(e,'", found ').concat(M(t),"."));this._lexer.advance()},t.expectOptionalKeyword=function(e){var t=this._lexer.token;return t.kind===d.NAME&&t.value===e&&(this._lexer.advance(),!0)},t.unexpected=function(e){var t=null!=e?e:this._lexer.token;return i(this._lexer.source,t.start,"Unexpected ".concat(M(t),"."))},t.any=function(e,t,n){this.expectToken(e);for(var r=[];!this.expectOptionalToken(n);)r.push(t.call(this));return r},t.optionalMany=function(e,t,n){if(this.expectOptionalToken(e)){var r=[];do{r.push(t.call(this))}while(!this.expectOptionalToken(n));return r}return[]},t.many=function(e,t,n){this.expectToken(e);var r=[];do{r.push(t.call(this))}while(!this.expectOptionalToken(n));return r},t.delimitedMany=function(e,t){this.expectOptionalToken(e);var n=[];do{n.push(t.call(this))}while(this.expectOptionalToken(e));return n},e}();function M(e){var t=e.value;return j(e.kind)+(null!=t?' "'.concat(t,'"'):"")}function j(e){return function(e){return e===d.BANG||e===d.DOLLAR||e===d.AMP||e===d.PAREN_L||e===d.PAREN_R||e===d.SPREAD||e===d.COLON||e===d.EQUALS||e===d.AT||e===d.BRACKET_L||e===d.BRACKET_R||e===d.BRACE_L||e===d.PIPE||e===d.BRACE_R}(e)?'"'.concat(e,'"'):e}var R={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},U=Object.freeze({});function B(e,t,n){var r=e[t];if(r){if(!n&&"function"==typeof r)return r;var i=n?r.leave:r.enter;if("function"==typeof i)return i}else{var o=n?e.leave:e.enter;if(o){if("function"==typeof o)return o;var s=o[t];if("function"==typeof s)return s}}}function F(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:R,r=void 0,i=Array.isArray(e),o=[e],s=-1,a=[],u=void 0,c=void 0,d=void 0,f=[],p=[],v=e;do{var g=++s===o.length,m=g&&0!==a.length;if(g){if(c=0===p.length?void 0:f[f.length-1],u=d,d=p.pop(),m){if(i)u=u.slice();else{for(var y={},b=0,w=Object.keys(u);b<w.length;b++){var _=w[b];y[_]=u[_]}u=y}for(var S=0,E=0;E<a.length;E++){var C=a[E][0],A=a[E][1];i&&(C-=S),i&&null===A?(u.splice(C,1),S++):u[C]=A}}s=r.index,o=r.keys,a=r.edits,i=r.inArray,r=r.prev}else{if(c=d?i?s:o[s]:void 0,null==(u=d?d[c]:v))continue;d&&f.push(c)}var O,I=void 0;if(!Array.isArray(u)){if(!l(u))throw new Error("Invalid AST Node: ".concat(h(u),"."));var T=B(t,u.kind,g);if(T){if((I=T.call(t,u,c,d,f,p))===U)break;if(!1===I){if(!g){f.pop();continue}}else if(void 0!==I&&(a.push([c,I]),!g)){if(!l(I)){f.pop();continue}u=I}}}void 0===I&&m&&a.push([c,u]),g?f.pop():(r={inArray:i,index:s,keys:o,edits:a,prev:r},o=(i=Array.isArray(u))?u:null!==(O=n[u.kind])&&void 0!==O?O:[],s=-1,a=[],d&&p.push(d),d=u)}while(void 0!==r);return 0!==a.length&&(v=a[a.length-1][1]),v}(e,{leave:z})}var z={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return $(e.definitions,"\n\n")+"\n"},OperationDefinition:function(e){var t=e.operation,n=e.name,r=V("(",$(e.variableDefinitions,", "),")"),i=$(e.directives," "),o=e.selectionSet;return n||i||r||"query"!==t?$([t,$([n,r]),i,o]," "):o},VariableDefinition:function(e){var t=e.variable,n=e.type,r=e.defaultValue,i=e.directives;return t+": "+n+V(" = ",r)+V(" ",$(i," "))},SelectionSet:function(e){return K(e.selections)},Field:function(e){var t=e.alias,n=e.name,r=e.arguments,i=e.directives,o=e.selectionSet,s=V("",t,": ")+n,a=s+V("(",$(r,", "),")");return a.length>80&&(a=s+V("(\n",G($(r,"\n")),"\n)")),$([a,$(i," "),o]," ")},Argument:function(e){return e.name+": "+e.value},FragmentSpread:function(e){return"..."+e.name+V(" ",$(e.directives," "))},InlineFragment:function(e){var t=e.typeCondition,n=e.directives,r=e.selectionSet;return $(["...",V("on ",t),$(n," "),r]," ")},FragmentDefinition:function(e){var t=e.name,n=e.typeCondition,r=e.variableDefinitions,i=e.directives,o=e.selectionSet;return"fragment ".concat(t).concat(V("(",$(r,", "),")")," ")+"on ".concat(n," ").concat(V("",$(i," ")," "))+o},IntValue:function(e){return e.value},FloatValue:function(e){return e.value},StringValue:function(e,t){var n=e.value;return e.block?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=-1===e.indexOf("\n"),i=" "===e[0]||"\t"===e[0],o='"'===e[e.length-1],s="\\"===e[e.length-1],a=!r||o||s||n,u="";return!a||r&&i||(u+="\n"+t),u+=t?e.replace(/\n/g,"\n"+t):e,a&&(u+="\n"),'"""'+u.replace(/"""/g,'\\"""')+'"""'}(n,"description"===t?"":"  "):JSON.stringify(n)},BooleanValue:function(e){return e.value?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){return e.value},ListValue:function(e){return"["+$(e.values,", ")+"]"},ObjectValue:function(e){return"{"+$(e.fields,", ")+"}"},ObjectField:function(e){return e.name+": "+e.value},Directive:function(e){return"@"+e.name+V("(",$(e.arguments,", "),")")},NamedType:function(e){return e.name},ListType:function(e){return"["+e.type+"]"},NonNullType:function(e){return e.type+"!"},SchemaDefinition:q((function(e){var t=e.directives,n=e.operationTypes;return $(["schema",$(t," "),K(n)]," ")})),OperationTypeDefinition:function(e){return e.operation+": "+e.type},ScalarTypeDefinition:q((function(e){return $(["scalar",e.name,$(e.directives," ")]," ")})),ObjectTypeDefinition:q((function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return $(["type",t,V("implements ",$(n," & ")),$(r," "),K(i)]," ")})),FieldDefinition:q((function(e){var t=e.name,n=e.arguments,r=e.type,i=e.directives;return t+(W(n)?V("(\n",G($(n,"\n")),"\n)"):V("(",$(n,", "),")"))+": "+r+V(" ",$(i," "))})),InputValueDefinition:q((function(e){var t=e.name,n=e.type,r=e.defaultValue,i=e.directives;return $([t+": "+n,V("= ",r),$(i," ")]," ")})),InterfaceTypeDefinition:q((function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return $(["interface",t,V("implements ",$(n," & ")),$(r," "),K(i)]," ")})),UnionTypeDefinition:q((function(e){var t=e.name,n=e.directives,r=e.types;return $(["union",t,$(n," "),r&&0!==r.length?"= "+$(r," | "):""]," ")})),EnumTypeDefinition:q((function(e){var t=e.name,n=e.directives,r=e.values;return $(["enum",t,$(n," "),K(r)]," ")})),EnumValueDefinition:q((function(e){return $([e.name,$(e.directives," ")]," ")})),InputObjectTypeDefinition:q((function(e){var t=e.name,n=e.directives,r=e.fields;return $(["input",t,$(n," "),K(r)]," ")})),DirectiveDefinition:q((function(e){var t=e.name,n=e.arguments,r=e.repeatable,i=e.locations;return"directive @"+t+(W(n)?V("(\n",G($(n,"\n")),"\n)"):V("(",$(n,", "),")"))+(r?" repeatable":"")+" on "+$(i," | ")})),SchemaExtension:function(e){var t=e.directives,n=e.operationTypes;return $(["extend schema",$(t," "),K(n)]," ")},ScalarTypeExtension:function(e){return $(["extend scalar",e.name,$(e.directives," ")]," ")},ObjectTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return $(["extend type",t,V("implements ",$(n," & ")),$(r," "),K(i)]," ")},InterfaceTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return $(["extend interface",t,V("implements ",$(n," & ")),$(r," "),K(i)]," ")},UnionTypeExtension:function(e){var t=e.name,n=e.directives,r=e.types;return $(["extend union",t,$(n," "),r&&0!==r.length?"= "+$(r," | "):""]," ")},EnumTypeExtension:function(e){var t=e.name,n=e.directives,r=e.values;return $(["extend enum",t,$(n," "),K(r)]," ")},InputObjectTypeExtension:function(e){var t=e.name,n=e.directives,r=e.fields;return $(["extend input",t,$(n," "),K(r)]," ")}};function q(e){return function(t){return $([t.description,e(t)],"\n")}}function $(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return null!==(t=null==e?void 0:e.filter((function(e){return e})).join(n))&&void 0!==t?t:""}function K(e){return V("{\n",G($(e,"\n")),"\n}")}function V(e,t){return null!=t&&""!==t?e+t+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:""):""}function G(e){return V("  ",e.replace(/\n/g,"\n  "))}function H(e){return-1!==e.indexOf("\n")}function W(e){return null!=e&&e.some(H)}var J=n(48),Y=n(80),Z=n(49),Q=n(90),X=n(20),ee=n(397),te=n(37),ne=n(26),re=n(57),ie=n(186),oe=function(){return(oe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},se=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},ae=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},ue=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},ce=new J.a("GraphQLAPI"),le=function(e,t,n,r){return void 0===t&&(t={}),{query:e,variables:t,authToken:n,userAgentSuffix:r}},de=function(){function e(e){this._api=null,this.Auth=te.a,this.Cache=ne.b,this.Credentials=Y.a,this._options=e,ce.debug("API Options",this._options)}return e.prototype.getModuleName=function(){return"GraphQLAPI"},e.prototype.configure=function(e){var t=e||{},n=t.API,r=void 0===n?{}:n,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(t,["API"]),o=oe(oe({},i),r);return ce.debug("configure GraphQL API",{opt:o}),o.aws_project_region&&(o=Object.assign({},o,{region:o.aws_project_region,header:{}})),void 0!==o.graphql_headers&&"function"!=typeof o.graphql_headers&&(ce.warn("graphql_headers should be a function"),o.graphql_headers=void 0),this._options=Object.assign({},this._options,o),this.createInstance(),this._options},e.prototype.createInstance=function(){return ce.debug("create Rest instance"),this._options?(this._api=new ie.a(this._options),this._api.Credentials=this.Credentials,!0):Promise.reject("API not configured")},e.prototype._headerBasedAuth=function(e,t){return void 0===t&&(t={}),se(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return ae(this,(function(l){switch(l.label){case 0:switch(n=this._options,r=n.aws_appsync_authenticationType,i=n.aws_appsync_apiKey,o={},e||r||"AWS_IAM"){case"API_KEY":return[3,1];case"AWS_IAM":return[3,2];case"OPENID_CONNECT":return[3,4];case"AMAZON_COGNITO_USER_POOLS":return[3,11];case"AWS_LAMBDA":return[3,15]}return[3,16];case 1:if(!i)throw new Error(re.a.NO_API_KEY);return o={Authorization:null,"X-Api-Key":i},[3,17];case 2:return[4,this._ensureCredentials()];case 3:if(!l.sent())throw new Error(re.a.NO_CREDENTIALS);return[3,17];case 4:return l.trys.push([4,9,,10]),s=void 0,[4,ne.b.getItem("federatedInfo")];case 5:return(a=l.sent())?(s=a.token,[3,8]):[3,6];case 6:return[4,te.a.currentAuthenticatedUser()];case 7:(u=l.sent())&&(s=u.token),l.label=8;case 8:if(!s)throw new Error(re.a.NO_FEDERATED_JWT);return o={Authorization:s},[3,10];case 9:throw l.sent(),new Error(re.a.NO_CURRENT_USER);case 10:return[3,17];case 11:return l.trys.push([11,13,,14]),[4,this.Auth.currentSession()];case 12:return c=l.sent(),o={Authorization:c.getAccessToken().getJwtToken()},[3,14];case 13:throw l.sent(),new Error(re.a.NO_CURRENT_USER);case 14:return[3,17];case 15:if(!t.Authorization)throw new Error(re.a.NO_AUTH_TOKEN);return o={Authorization:t.Authorization},[3,17];case 16:return o={Authorization:null},[3,17];case 17:return[2,o]}}))}))},e.prototype.getGraphqlOperationType=function(e){var t=N(e).definitions;return ue(t,1)[0].operation},e.prototype.graphql=function(e,t){var n=e.query,r=e.variables,i=void 0===r?{}:r,o=e.authMode,s=e.authToken,a=e.userAgentSuffix,u=N("string"==typeof n?n:F(n)),c=ue(u.definitions.filter((function(e){return"OperationDefinition"===e.kind})),1)[0],l=(void 0===c?{}:c).operation,d=t||{};switch(s&&(d.Authorization=s),l){case"query":case"mutation":this.createInstanceIfNotCreated();var f=this._api.getCancellableToken(),p={cancellableToken:f},h=this._graphql({query:u,variables:i,authMode:o,userAgentSuffix:a},d,p);return this._api.updateRequestToBeCancellable(h,f),h;case"subscription":return this._graphqlSubscribe({query:u,variables:i,authMode:o},d);default:throw new Error("invalid operation type: "+l)}},e.prototype._graphql=function(e,t,n){var i=e.query,o=e.variables,s=e.authMode,a=e.userAgentSuffix;return void 0===t&&(t={}),void 0===n&&(n={}),se(this,void 0,void 0,(function(){var e,u,c,l,d,f,p,h,v,g,m,y,b,w,_,S,E,C,A,O,I;return ae(this,(function(T){switch(T.label){case 0:return this.createInstanceIfNotCreated(),e=this._options,u=e.aws_appsync_region,c=e.aws_appsync_graphqlEndpoint,l=e.graphql_headers,d=void 0===l?function(){return{}}:l,f=e.graphql_endpoint,p=e.graphql_endpoint_iam_region,v=[{}],(g=!f)?[4,this._headerBasedAuth(s,t)]:[3,2];case 1:g=T.sent(),T.label=2;case 2:return m=[oe.apply(void 0,v.concat([g]))],(y=f)?p?[4,this._headerBasedAuth(s,t)]:[3,4]:[3,6];case 3:return b=T.sent(),[3,5];case 4:b={Authorization:null},T.label=5;case 5:y=b,T.label=6;case 6:return w=[oe.apply(void 0,m.concat([y]))],[4,d({query:i,variables:o})];case 7:if(h=oe.apply(void 0,[oe.apply(void 0,[oe.apply(void 0,w.concat([T.sent()])),t]),!f&&(I={},I["x-amz-user-agent"]=Object(Z.b)(a),I)]),_={query:F(i),variables:o},S=Object.assign({headers:h,body:_,signerServiceInfo:{service:f?"execute-api":"appsync",region:f?p:u}},n),!(E=f||c))throw{data:{},errors:[new r.a("No graphql endpoint provided.")]};T.label=8;case 8:return T.trys.push([8,10,,11]),[4,this._api.post(E,S)];case 9:return C=T.sent(),[3,11];case 10:if(A=T.sent(),this._api.isCancel(A))throw A;return C={data:{},errors:[new r.a(A.message,null,null,null,null,A)]},[3,11];case 11:if((O=C.errors)&&O.length)throw C;return[2,C]}}))}))},e.prototype.createInstanceIfNotCreated=function(){return se(this,void 0,void 0,(function(){return ae(this,(function(e){switch(e.label){case 0:return this._api?[3,2]:[4,this.createInstance()];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.isCancel=function(e){return this._api.isCancel(e)},e.prototype.cancel=function(e,t){return this._api.cancel(e,t)},e.prototype.hasCancelToken=function(e){return this._api.hasCancelToken(e)},e.prototype._graphqlSubscribe=function(e,t){var n=e.query,r=e.variables,i=e.authMode,o=e.authToken;void 0===t&&(t={});var s=this._options,a=s.aws_appsync_region,u=s.aws_appsync_graphqlEndpoint,c=s.aws_appsync_authenticationType,l=s.aws_appsync_apiKey,d=s.graphql_headers,f=void 0===d?function(){return{}}:d,p=i||c||"AWS_IAM";if(ee.a&&"function"==typeof ee.a.subscribe)return ee.a.subscribe("",{provider:Q.b,appSyncGraphqlEndpoint:u,authenticationType:p,apiKey:l,query:F(n),region:a,variables:r,graphql_headers:f,additionalHeaders:t,authToken:o});throw ce.debug("No pubsub module applied for subscription"),new Error("No pubsub module applied for subscription")},e.prototype._ensureCredentials=function(){var e=this;return this.Credentials.get().then((function(t){if(!t)return!1;var n=e.Credentials.shear(t);return ce.debug("set credentials for api",n),!0})).catch((function(e){return ce.warn("ensure credentials error",e),!1}))},e}(),fe=new de(null);X.a.register(fe)},function(e,t,n){"use strict";n.r(t),n.d(t,"fromUtf8",(function(){return r})),n.d(t,"toUtf8",(function(){return i}));const r=e=>"function"==typeof TextEncoder?function(e){return(new TextEncoder).encode(e)}(e):(e=>{const t=[];for(let n=0,r=e.length;n<r;n++){const r=e.charCodeAt(n);if(r<128)t.push(r);else if(r<2048)t.push(r>>6|192,63&r|128);else if(n+1<e.length&&55296==(64512&r)&&56320==(64512&e.charCodeAt(n+1))){const i=65536+((1023&r)<<10)+(1023&e.charCodeAt(++n));t.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}else t.push(r>>12|224,r>>6&63|128,63&r|128)}return Uint8Array.from(t)})(e),i=e=>"function"==typeof TextDecoder?function(e){return new TextDecoder("utf-8").decode(e)}(e):(e=>{let t="";for(let n=0,r=e.length;n<r;n++){const r=e[n];if(r<128)t+=String.fromCharCode(r);else if(192<=r&&r<224){const i=e[++n];t+=String.fromCharCode((31&r)<<6|63&i)}else if(240<=r&&r<365){const i="%"+[r,e[++n],e[++n],e[++n]].map((e=>e.toString(16))).join("%");t+=decodeURIComponent(i)}else t+=String.fromCharCode((15&r)<<12|(63&e[++n])<<6|63&e[++n])}return t})(e)},function(e,t,n){"use strict";(function(e){var r;if(n.d(t,"a",(function(){return i})),"undefined"!=typeof window&&window.crypto&&(r=window.crypto),!r&&"undefined"!=typeof window&&window.msCrypto&&(r=window.msCrypto),!r&&void 0!==e&&e.crypto&&(r=e.crypto),!r)try{r=n(213)}catch(e){}function i(){if(r){if("function"==typeof r.getRandomValues)try{return r.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")}}).call(this,n(60))},function(e){e.exports=JSON.parse('{"name":"@aws-sdk/client-cognito-identity","description":"AWS SDK for JavaScript Cognito Identity Client for Node.js, Browser and React Native","version":"3.6.1","scripts":{"clean":"yarn remove-definitions && yarn remove-dist && yarn remove-documentation","build-documentation":"yarn remove-documentation && typedoc ./","prepublishOnly":"yarn build","pretest":"yarn build:cjs","remove-definitions":"rimraf ./types","remove-dist":"rimraf ./dist","remove-documentation":"rimraf ./docs","test:unit":"mocha **/cjs/**/*.spec.js","test:e2e":"mocha **/cjs/**/*.ispec.js && karma start karma.conf.js","test":"yarn test:unit","build:cjs":"tsc -p tsconfig.json","build:es":"tsc -p tsconfig.es.json","build":"yarn build:cjs && yarn build:es","postbuild":"downlevel-dts types types/ts3.4"},"main":"./dist/cjs/index.js","types":"./types/index.d.ts","module":"./dist/es/index.js","browser":{"./runtimeConfig":"./runtimeConfig.browser"},"react-native":{"./runtimeConfig":"./runtimeConfig.native"},"sideEffects":false,"dependencies":{"@aws-crypto/sha256-browser":"^1.0.0","@aws-crypto/sha256-js":"^1.0.0","@aws-sdk/config-resolver":"3.6.1","@aws-sdk/credential-provider-node":"3.6.1","@aws-sdk/fetch-http-handler":"3.6.1","@aws-sdk/hash-node":"3.6.1","@aws-sdk/invalid-dependency":"3.6.1","@aws-sdk/middleware-content-length":"3.6.1","@aws-sdk/middleware-host-header":"3.6.1","@aws-sdk/middleware-logger":"3.6.1","@aws-sdk/middleware-retry":"3.6.1","@aws-sdk/middleware-serde":"3.6.1","@aws-sdk/middleware-signing":"3.6.1","@aws-sdk/middleware-stack":"3.6.1","@aws-sdk/middleware-user-agent":"3.6.1","@aws-sdk/node-config-provider":"3.6.1","@aws-sdk/node-http-handler":"3.6.1","@aws-sdk/protocol-http":"3.6.1","@aws-sdk/smithy-client":"3.6.1","@aws-sdk/types":"3.6.1","@aws-sdk/url-parser":"3.6.1","@aws-sdk/url-parser-native":"3.6.1","@aws-sdk/util-base64-browser":"3.6.1","@aws-sdk/util-base64-node":"3.6.1","@aws-sdk/util-body-length-browser":"3.6.1","@aws-sdk/util-body-length-node":"3.6.1","@aws-sdk/util-user-agent-browser":"3.6.1","@aws-sdk/util-user-agent-node":"3.6.1","@aws-sdk/util-utf8-browser":"3.6.1","@aws-sdk/util-utf8-node":"3.6.1","tslib":"^2.0.0"},"devDependencies":{"@aws-sdk/client-documentation-generator":"3.6.1","@aws-sdk/client-iam":"3.6.1","@types/chai":"^4.2.11","@types/mocha":"^8.0.4","@types/node":"^12.7.5","downlevel-dts":"0.7.0","jest":"^26.1.0","rimraf":"^3.0.0","typedoc":"^0.19.2","typescript":"~4.1.2"},"engines":{"node":">=10.0.0"},"typesVersions":{"<4.0":{"types/*":["types/ts3.4/*"]}},"author":{"name":"AWS SDK for JavaScript Team","url":"https://aws.amazon.com/javascript/"},"license":"Apache-2.0","homepage":"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-cognito-identity","repository":{"type":"git","url":"https://github.com/aws/aws-sdk-js-v3.git","directory":"clients/client-cognito-identity"}}')},function(e,t,n){var r;e.exports=(r=n(133),function(e){var t=r,n=t.lib,i=n.WordArray,o=n.Hasher,s=t.algo,a=[],u=[];!function(){function t(t){for(var n=e.sqrt(t),r=2;r<=n;r++)if(!(t%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,i=0;i<64;)t(r)&&(i<8&&(a[i]=n(e.pow(r,.5))),u[i]=n(e.pow(r,1/3)),i++),r++}();var c=[],l=s.SHA256=o.extend({_doReset:function(){this._hash=new i.init(a.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],a=n[4],l=n[5],d=n[6],f=n[7],p=0;p<64;p++){if(p<16)c[p]=0|e[t+p];else{var h=c[p-15],v=(h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3,g=c[p-2],m=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;c[p]=v+c[p-7]+m+c[p-16]}var y=r&i^r&o^i&o,b=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),w=f+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&l^~a&d)+u[p]+c[p];f=d,d=l,l=a,a=s+w|0,s=o,o=i,i=r,r=w+(b+y)|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0,n[5]=n[5]+l|0,n[6]=n[6]+d|0,n[7]=n[7]+f|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=e.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=o._createHelper(l),t.HmacSHA256=o._createHmacHelper(l)}(Math),r.SHA256)},function(e,t,n){var r,i,o;e.exports=(o=n(133),i=(r=o).lib.WordArray,r.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var i=[],o=0;o<n;o+=3)for(var s=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,a=0;a<4&&o+.75*a<n;a++)i.push(r.charAt(s>>>6*(3-a)&63));var u=r.charAt(64);if(u)for(;i.length%4;)i.push(u);return i.join("")},parse:function(e){var t=e.length,n=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var o=0;o<n.length;o++)r[n.charCodeAt(o)]=o}var s=n.charAt(64);if(s){var a=e.indexOf(s);-1!==a&&(t=a)}return function(e,t,n){for(var r=[],o=0,s=0;s<t;s++)if(s%4){var a=n[e.charCodeAt(s-1)]<<s%4*2|n[e.charCodeAt(s)]>>>6-s%4*2;r[o>>>2]|=a<<24-o%4*8,o++}return i.create(r,o)}(e,t,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},o.enc.Base64)},function(e){e.exports=JSON.parse('{"name":"@aws-sdk/client-pinpoint","description":"AWS SDK for JavaScript Pinpoint Client for Node.js, Browser and React Native","version":"3.6.1","scripts":{"clean":"yarn remove-definitions && yarn remove-dist && yarn remove-documentation","build-documentation":"yarn remove-documentation && typedoc ./","prepublishOnly":"yarn build","pretest":"yarn build:cjs","remove-definitions":"rimraf ./types","remove-dist":"rimraf ./dist","remove-documentation":"rimraf ./docs","test":"exit 0","build:cjs":"tsc -p tsconfig.json","build:es":"tsc -p tsconfig.es.json","build":"yarn build:cjs && yarn build:es","postbuild":"downlevel-dts types types/ts3.4"},"main":"./dist/cjs/index.js","types":"./types/index.d.ts","module":"./dist/es/index.js","browser":{"./runtimeConfig":"./runtimeConfig.browser"},"react-native":{"./runtimeConfig":"./runtimeConfig.native"},"sideEffects":false,"dependencies":{"@aws-crypto/sha256-browser":"^1.0.0","@aws-crypto/sha256-js":"^1.0.0","@aws-sdk/config-resolver":"3.6.1","@aws-sdk/credential-provider-node":"3.6.1","@aws-sdk/fetch-http-handler":"3.6.1","@aws-sdk/hash-node":"3.6.1","@aws-sdk/invalid-dependency":"3.6.1","@aws-sdk/middleware-content-length":"3.6.1","@aws-sdk/middleware-host-header":"3.6.1","@aws-sdk/middleware-logger":"3.6.1","@aws-sdk/middleware-retry":"3.6.1","@aws-sdk/middleware-serde":"3.6.1","@aws-sdk/middleware-signing":"3.6.1","@aws-sdk/middleware-stack":"3.6.1","@aws-sdk/middleware-user-agent":"3.6.1","@aws-sdk/node-config-provider":"3.6.1","@aws-sdk/node-http-handler":"3.6.1","@aws-sdk/protocol-http":"3.6.1","@aws-sdk/smithy-client":"3.6.1","@aws-sdk/types":"3.6.1","@aws-sdk/url-parser":"3.6.1","@aws-sdk/url-parser-native":"3.6.1","@aws-sdk/util-base64-browser":"3.6.1","@aws-sdk/util-base64-node":"3.6.1","@aws-sdk/util-body-length-browser":"3.6.1","@aws-sdk/util-body-length-node":"3.6.1","@aws-sdk/util-user-agent-browser":"3.6.1","@aws-sdk/util-user-agent-node":"3.6.1","@aws-sdk/util-utf8-browser":"3.6.1","@aws-sdk/util-utf8-node":"3.6.1","tslib":"^2.0.0"},"devDependencies":{"@aws-sdk/client-documentation-generator":"3.6.1","@types/node":"^12.7.5","downlevel-dts":"0.7.0","jest":"^26.1.0","rimraf":"^3.0.0","typedoc":"^0.19.2","typescript":"~4.1.2"},"engines":{"node":">=10.0.0"},"typesVersions":{"<4.0":{"types/*":["types/ts3.4/*"]}},"author":{"name":"AWS SDK for JavaScript Team","url":"https://aws.amazon.com/javascript/"},"license":"Apache-2.0","homepage":"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-pinpoint","repository":{"type":"git","url":"https://github.com/aws/aws-sdk-js-v3.git","directory":"clients/client-pinpoint"}}')},function(e){e.exports=JSON.parse('{"name":"@aws-sdk/client-kinesis","description":"AWS SDK for JavaScript Kinesis Client for Node.js, Browser and React Native","version":"3.6.1","scripts":{"clean":"yarn remove-definitions && yarn remove-dist && yarn remove-documentation","build-documentation":"yarn remove-documentation && typedoc ./","prepublishOnly":"yarn build","pretest":"yarn build:cjs","remove-definitions":"rimraf ./types","remove-dist":"rimraf ./dist","remove-documentation":"rimraf ./docs","test":"exit 0","build:cjs":"tsc -p tsconfig.json","build:es":"tsc -p tsconfig.es.json","build":"yarn build:cjs && yarn build:es","postbuild":"downlevel-dts types types/ts3.4"},"main":"./dist/cjs/index.js","types":"./types/index.d.ts","module":"./dist/es/index.js","browser":{"./runtimeConfig":"./runtimeConfig.browser"},"react-native":{"./runtimeConfig":"./runtimeConfig.native"},"sideEffects":false,"dependencies":{"@aws-crypto/sha256-browser":"^1.0.0","@aws-crypto/sha256-js":"^1.0.0","@aws-sdk/config-resolver":"3.6.1","@aws-sdk/credential-provider-node":"3.6.1","@aws-sdk/eventstream-serde-browser":"3.6.1","@aws-sdk/eventstream-serde-config-resolver":"3.6.1","@aws-sdk/eventstream-serde-node":"3.6.1","@aws-sdk/fetch-http-handler":"3.6.1","@aws-sdk/hash-node":"3.6.1","@aws-sdk/invalid-dependency":"3.6.1","@aws-sdk/middleware-content-length":"3.6.1","@aws-sdk/middleware-host-header":"3.6.1","@aws-sdk/middleware-logger":"3.6.1","@aws-sdk/middleware-retry":"3.6.1","@aws-sdk/middleware-serde":"3.6.1","@aws-sdk/middleware-signing":"3.6.1","@aws-sdk/middleware-stack":"3.6.1","@aws-sdk/middleware-user-agent":"3.6.1","@aws-sdk/node-config-provider":"3.6.1","@aws-sdk/node-http-handler":"3.6.1","@aws-sdk/protocol-http":"3.6.1","@aws-sdk/smithy-client":"3.6.1","@aws-sdk/types":"3.6.1","@aws-sdk/url-parser":"3.6.1","@aws-sdk/url-parser-native":"3.6.1","@aws-sdk/util-base64-browser":"3.6.1","@aws-sdk/util-base64-node":"3.6.1","@aws-sdk/util-body-length-browser":"3.6.1","@aws-sdk/util-body-length-node":"3.6.1","@aws-sdk/util-user-agent-browser":"3.6.1","@aws-sdk/util-user-agent-node":"3.6.1","@aws-sdk/util-utf8-browser":"3.6.1","@aws-sdk/util-utf8-node":"3.6.1","@aws-sdk/util-waiter":"3.6.1","tslib":"^2.0.0"},"devDependencies":{"@aws-sdk/client-documentation-generator":"3.6.1","@types/node":"^12.7.5","downlevel-dts":"0.7.0","jest":"^26.1.0","rimraf":"^3.0.0","typedoc":"^0.19.2","typescript":"~4.1.2"},"engines":{"node":">=10.0.0"},"typesVersions":{"<4.0":{"types/*":["types/ts3.4/*"]}},"author":{"name":"AWS SDK for JavaScript Team","url":"https://aws.amazon.com/javascript/"},"license":"Apache-2.0","homepage":"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-kinesis","repository":{"type":"git","url":"https://github.com/aws/aws-sdk-js-v3.git","directory":"clients/client-kinesis"}}')},function(e){e.exports=JSON.parse('{"name":"@aws-sdk/client-firehose","description":"AWS SDK for JavaScript Firehose Client for Node.js, Browser and React Native","version":"3.6.1","scripts":{"clean":"yarn remove-definitions && yarn remove-dist && yarn remove-documentation","build-documentation":"yarn remove-documentation && typedoc ./","prepublishOnly":"yarn build","pretest":"yarn build:cjs","remove-definitions":"rimraf ./types","remove-dist":"rimraf ./dist","remove-documentation":"rimraf ./docs","test":"exit 0","build:cjs":"tsc -p tsconfig.json","build:es":"tsc -p tsconfig.es.json","build":"yarn build:cjs && yarn build:es","postbuild":"downlevel-dts types types/ts3.4"},"main":"./dist/cjs/index.js","types":"./types/index.d.ts","module":"./dist/es/index.js","browser":{"./runtimeConfig":"./runtimeConfig.browser"},"react-native":{"./runtimeConfig":"./runtimeConfig.native"},"sideEffects":false,"dependencies":{"@aws-crypto/sha256-browser":"^1.0.0","@aws-crypto/sha256-js":"^1.0.0","@aws-sdk/config-resolver":"3.6.1","@aws-sdk/credential-provider-node":"3.6.1","@aws-sdk/fetch-http-handler":"3.6.1","@aws-sdk/hash-node":"3.6.1","@aws-sdk/invalid-dependency":"3.6.1","@aws-sdk/middleware-content-length":"3.6.1","@aws-sdk/middleware-host-header":"3.6.1","@aws-sdk/middleware-logger":"3.6.1","@aws-sdk/middleware-retry":"3.6.1","@aws-sdk/middleware-serde":"3.6.1","@aws-sdk/middleware-signing":"3.6.1","@aws-sdk/middleware-stack":"3.6.1","@aws-sdk/middleware-user-agent":"3.6.1","@aws-sdk/node-config-provider":"3.6.1","@aws-sdk/node-http-handler":"3.6.1","@aws-sdk/protocol-http":"3.6.1","@aws-sdk/smithy-client":"3.6.1","@aws-sdk/types":"3.6.1","@aws-sdk/url-parser":"3.6.1","@aws-sdk/url-parser-native":"3.6.1","@aws-sdk/util-base64-browser":"3.6.1","@aws-sdk/util-base64-node":"3.6.1","@aws-sdk/util-body-length-browser":"3.6.1","@aws-sdk/util-body-length-node":"3.6.1","@aws-sdk/util-user-agent-browser":"3.6.1","@aws-sdk/util-user-agent-node":"3.6.1","@aws-sdk/util-utf8-browser":"3.6.1","@aws-sdk/util-utf8-node":"3.6.1","tslib":"^2.0.0"},"devDependencies":{"@aws-sdk/client-documentation-generator":"3.6.1","@types/node":"^12.7.5","downlevel-dts":"0.7.0","jest":"^26.1.0","rimraf":"^3.0.0","typedoc":"^0.19.2","typescript":"~4.1.2"},"engines":{"node":">=10.0.0"},"typesVersions":{"<4.0":{"types/*":["types/ts3.4/*"]}},"author":{"name":"AWS SDK for JavaScript Team","url":"https://aws.amazon.com/javascript/"},"license":"Apache-2.0","homepage":"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-firehose","repository":{"type":"git","url":"https://github.com/aws/aws-sdk-js-v3.git","directory":"clients/client-firehose"}}')},function(e,t,n){var r=n(253);e.exports=function(e,t,n){var i=null==e?void 0:r(e,t);return void 0===i?n:i}},function(e){e.exports=JSON.parse('{"name":"@aws-sdk/client-personalize-events","description":"AWS SDK for JavaScript Personalize Events Client for Node.js, Browser and React Native","version":"3.6.1","scripts":{"clean":"yarn remove-definitions && yarn remove-dist && yarn remove-documentation","build-documentation":"yarn remove-documentation && typedoc ./","prepublishOnly":"yarn build","pretest":"yarn build:cjs","remove-definitions":"rimraf ./types","remove-dist":"rimraf ./dist","remove-documentation":"rimraf ./docs","test":"exit 0","build:cjs":"tsc -p tsconfig.json","build:es":"tsc -p tsconfig.es.json","build":"yarn build:cjs && yarn build:es","postbuild":"downlevel-dts types types/ts3.4"},"main":"./dist/cjs/index.js","types":"./types/index.d.ts","module":"./dist/es/index.js","browser":{"./runtimeConfig":"./runtimeConfig.browser"},"react-native":{"./runtimeConfig":"./runtimeConfig.native"},"sideEffects":false,"dependencies":{"@aws-crypto/sha256-browser":"^1.0.0","@aws-crypto/sha256-js":"^1.0.0","@aws-sdk/config-resolver":"3.6.1","@aws-sdk/credential-provider-node":"3.6.1","@aws-sdk/fetch-http-handler":"3.6.1","@aws-sdk/hash-node":"3.6.1","@aws-sdk/invalid-dependency":"3.6.1","@aws-sdk/middleware-content-length":"3.6.1","@aws-sdk/middleware-host-header":"3.6.1","@aws-sdk/middleware-logger":"3.6.1","@aws-sdk/middleware-retry":"3.6.1","@aws-sdk/middleware-serde":"3.6.1","@aws-sdk/middleware-signing":"3.6.1","@aws-sdk/middleware-stack":"3.6.1","@aws-sdk/middleware-user-agent":"3.6.1","@aws-sdk/node-config-provider":"3.6.1","@aws-sdk/node-http-handler":"3.6.1","@aws-sdk/protocol-http":"3.6.1","@aws-sdk/smithy-client":"3.6.1","@aws-sdk/types":"3.6.1","@aws-sdk/url-parser":"3.6.1","@aws-sdk/url-parser-native":"3.6.1","@aws-sdk/util-base64-browser":"3.6.1","@aws-sdk/util-base64-node":"3.6.1","@aws-sdk/util-body-length-browser":"3.6.1","@aws-sdk/util-body-length-node":"3.6.1","@aws-sdk/util-user-agent-browser":"3.6.1","@aws-sdk/util-user-agent-node":"3.6.1","@aws-sdk/util-utf8-browser":"3.6.1","@aws-sdk/util-utf8-node":"3.6.1","tslib":"^2.0.0"},"devDependencies":{"@aws-sdk/client-documentation-generator":"3.6.1","@types/node":"^12.7.5","downlevel-dts":"0.7.0","jest":"^26.1.0","rimraf":"^3.0.0","typedoc":"^0.19.2","typescript":"~4.1.2"},"engines":{"node":">=10.0.0"},"typesVersions":{"<4.0":{"types/*":["types/ts3.4/*"]}},"author":{"name":"AWS SDK for JavaScript Team","url":"https://aws.amazon.com/javascript/"},"license":"Apache-2.0","homepage":"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-personalize-events","repository":{"type":"git","url":"https://github.com/aws/aws-sdk-js-v3.git","directory":"clients/client-personalize-events"}}')},function(e,t,n){"use strict";const r=n(342),i=n(89),o=n(89),s=n(56).buildOptions,a=n(345);t.parse=function(e,t={},n){if(n){!0===n&&(n={});const t=a.validate(e,n);if(!0!==t)throw Error(t.err.msg)}t.parseTrueNumberOnly&&!1!==t.parseNodeValue&&!t.numParseOptions&&(t.numParseOptions={leadingZeros:!1});let u=s(t,o.defaultOptions,o.props);const c=i.getTraversalObj(e,u);return r.convertToJson(c,u)},t.convertTonimn=n(346).convert2nimn,t.getTraversalObj=i.getTraversalObj,t.convertToJson=r.convertToJson,t.convertToJsonString=n(347).convertToJsonString,t.validate=a.validate,t.j2xParser=n(348),t.parseToNimn=function(e,n,r){return t.convertTonimn(t.getTraversalObj(e,r),n,r)}},function(e){e.exports=JSON.parse('{"name":"@aws-sdk/client-s3","description":"AWS SDK for JavaScript S3 Client for Node.js, Browser and React Native","version":"3.6.1","scripts":{"clean":"yarn remove-definitions && yarn remove-dist && yarn remove-documentation","build-documentation":"yarn remove-documentation && typedoc ./","prepublishOnly":"yarn build","pretest":"yarn build:cjs","remove-definitions":"rimraf ./types","remove-dist":"rimraf ./dist","remove-documentation":"rimraf ./docs","test:unit":"mocha **/cjs/**/*.spec.js","test:e2e":"mocha **/cjs/**/*.ispec.js && karma start karma.conf.js","test":"yarn test:unit","build:cjs":"tsc -p tsconfig.json","build:es":"tsc -p tsconfig.es.json","build":"yarn build:cjs && yarn build:es","postbuild":"downlevel-dts types types/ts3.4"},"main":"./dist/cjs/index.js","types":"./types/index.d.ts","module":"./dist/es/index.js","browser":{"./runtimeConfig":"./runtimeConfig.browser"},"react-native":{"./runtimeConfig":"./runtimeConfig.native"},"sideEffects":false,"dependencies":{"@aws-crypto/sha256-browser":"^1.0.0","@aws-crypto/sha256-js":"^1.0.0","@aws-sdk/config-resolver":"3.6.1","@aws-sdk/credential-provider-node":"3.6.1","@aws-sdk/eventstream-serde-browser":"3.6.1","@aws-sdk/eventstream-serde-config-resolver":"3.6.1","@aws-sdk/eventstream-serde-node":"3.6.1","@aws-sdk/fetch-http-handler":"3.6.1","@aws-sdk/hash-blob-browser":"3.6.1","@aws-sdk/hash-node":"3.6.1","@aws-sdk/hash-stream-node":"3.6.1","@aws-sdk/invalid-dependency":"3.6.1","@aws-sdk/md5-js":"3.6.1","@aws-sdk/middleware-apply-body-checksum":"3.6.1","@aws-sdk/middleware-bucket-endpoint":"3.6.1","@aws-sdk/middleware-content-length":"3.6.1","@aws-sdk/middleware-expect-continue":"3.6.1","@aws-sdk/middleware-host-header":"3.6.1","@aws-sdk/middleware-location-constraint":"3.6.1","@aws-sdk/middleware-logger":"3.6.1","@aws-sdk/middleware-retry":"3.6.1","@aws-sdk/middleware-sdk-s3":"3.6.1","@aws-sdk/middleware-serde":"3.6.1","@aws-sdk/middleware-signing":"3.6.1","@aws-sdk/middleware-ssec":"3.6.1","@aws-sdk/middleware-stack":"3.6.1","@aws-sdk/middleware-user-agent":"3.6.1","@aws-sdk/node-config-provider":"3.6.1","@aws-sdk/node-http-handler":"3.6.1","@aws-sdk/protocol-http":"3.6.1","@aws-sdk/smithy-client":"3.6.1","@aws-sdk/types":"3.6.1","@aws-sdk/url-parser":"3.6.1","@aws-sdk/url-parser-native":"3.6.1","@aws-sdk/util-base64-browser":"3.6.1","@aws-sdk/util-base64-node":"3.6.1","@aws-sdk/util-body-length-browser":"3.6.1","@aws-sdk/util-body-length-node":"3.6.1","@aws-sdk/util-user-agent-browser":"3.6.1","@aws-sdk/util-user-agent-node":"3.6.1","@aws-sdk/util-utf8-browser":"3.6.1","@aws-sdk/util-utf8-node":"3.6.1","@aws-sdk/util-waiter":"3.6.1","@aws-sdk/xml-builder":"3.6.1","fast-xml-parser":"^3.16.0","tslib":"^2.0.0"},"devDependencies":{"@aws-sdk/client-documentation-generator":"3.6.1","@types/chai":"^4.2.11","@types/mocha":"^8.0.4","@types/node":"^12.7.5","downlevel-dts":"0.7.0","jest":"^26.1.0","rimraf":"^3.0.0","typedoc":"^0.19.2","typescript":"~4.1.2"},"engines":{"node":">=10.0.0"},"typesVersions":{"<4.0":{"types/*":["types/ts3.4/*"]}},"author":{"name":"AWS SDK for JavaScript Team","url":"https://aws.amazon.com/javascript/"},"license":"Apache-2.0","homepage":"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-s3","repository":{"type":"git","url":"https://github.com/aws/aws-sdk-js-v3.git","directory":"clients/client-s3"}}')},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(48),i=n(80),o=n(49),s=n(101),a=n(93),u=n(36),c=n.n(u),l=n(19),d=function(){return(d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},f=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},p=new r.a("RestClient"),h=function(){function e(e){this._region="us-east-1",this._service="execute-api",this._custom_header=void 0,this._cancelTokenMap=null,this.Credentials=i.a,this._options=e,p.debug("API Options",this._options),null==this._cancelTokenMap&&(this._cancelTokenMap=new WeakMap)}return e.prototype.ajax=function(e,t,n){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){var r,i,a,u,c,h,v,g,m,y,b,w,_,S,E=this;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(C){switch(C.label){case 0:return p.debug(t,e),a="us-east-1",u="execute-api",c=void 0,"string"==typeof e?(r=this._parseUrl(e),i=e):(i=e.endpoint,c=e.custom_header,a=e.region,u=e.service,r=this._parseUrl(e.endpoint)),h={method:t,url:i,host:r.host,path:r.path,headers:{},data:null,responseType:"json",timeout:0,cancelToken:null},v={},o.a.isReactNative&&(g=o.a.userAgent||"aws-amplify/0.1.x",v={"User-Agent":g}),m=Object.assign({},n),y=m.response,m.body&&("function"==typeof FormData&&m.body instanceof FormData?(v["Content-Type"]="multipart/form-data",h.data=m.body):(v["Content-Type"]="application/json; charset=UTF-8",h.data=JSON.stringify(m.body))),m.responseType&&(h.responseType=m.responseType),m.withCredentials&&(h.withCredentials=m.withCredentials),m.timeout&&(h.timeout=m.timeout),m.cancellableToken&&(h.cancelToken=m.cancellableToken.token),h.signerServiceInfo=m.signerServiceInfo,"function"!=typeof c?[3,2]:[4,c()];case 1:return w=C.sent(),[3,3];case 2:w=void 0,C.label=3;case 3:return b=w,h.headers=d(d(d({},v),b),m.headers),(_=Object(l.parse)(i,!0,!0)).search,S=f(_,["search"]),h.url=Object(l.format)(d(d({},S),{query:d(d({},S.query),m.queryStringParameters||{})})),void 0!==h.headers.Authorization?(h.headers=Object.keys(h.headers).reduce((function(e,t){return h.headers[t]&&(e[t]=h.headers[t]),e}),{}),[2,this._request(h,y)]):[2,this.Credentials.get().then((function(r){return E._signed(d({},h),r,y,{region:a,service:u}).catch((function(r){if(s.a.isClockSkewError(r)){var i=r.response.headers,o=i&&(i.date||i.Date),a=new Date(o),u=s.a.getDateFromHeaderString(h.headers["x-amz-date"]);if(s.a.isClockSkewed(a))return s.a.setClockOffset(a.getTime()-u.getTime()),E.ajax(e,t,n)}throw r}))}),(function(e){return p.debug("No credentials available, the request will be unsigned"),E._request(h,y)}))]}}))}))},e.prototype.get=function(e,t){return this.ajax(e,"GET",t)},e.prototype.put=function(e,t){return this.ajax(e,"PUT",t)},e.prototype.patch=function(e,t){return this.ajax(e,"PATCH",t)},e.prototype.post=function(e,t){return this.ajax(e,"POST",t)},e.prototype.del=function(e,t){return this.ajax(e,"DELETE",t)},e.prototype.head=function(e,t){return this.ajax(e,"HEAD",t)},e.prototype.cancel=function(e,t){var n=this._cancelTokenMap.get(e);return!!n&&(n.cancel(t),!0)},e.prototype.hasCancelToken=function(e){return this._cancelTokenMap.has(e)},e.prototype.isCancel=function(e){return c.a.isCancel(e)},e.prototype.getCancellableToken=function(){return c.a.CancelToken.source()},e.prototype.updateRequestToBeCancellable=function(e,t){this._cancelTokenMap.set(e,t)},e.prototype.endpoint=function(e){var t=this,n=this._options.endpoints,r="";return Array.isArray(n)?(n.forEach((function(n){n.name===e&&(r=n.endpoint,"string"==typeof n.region?t._region=n.region:"string"==typeof t._options.region&&(t._region=t._options.region),"string"==typeof n.service?t._service=n.service||"execute-api":t._service="execute-api","function"==typeof n.custom_header?t._custom_header=n.custom_header:t._custom_header=void 0)})),r):r},e.prototype._signed=function(e,t,n,r){var i=r.service,o=r.region,s=e.signerServiceInfo,u=f(e,["signerServiceInfo"]),l=o||this._region||this._options.region,d=i||this._service||this._options.service,h={secret_key:t.secretAccessKey,access_key:t.accessKeyId,session_token:t.sessionToken},v={region:l,service:d},g=Object.assign(v,s),m=a.a.sign(u,h,g);return m.data&&(m.body=m.data),p.debug("Signed Request: ",m),delete m.headers.host,c()(m).then((function(e){return n?e:e.data})).catch((function(e){throw p.debug(e),e}))},e.prototype._request=function(e,t){return void 0===t&&(t=!1),c()(e).then((function(e){return t?e:e.data})).catch((function(e){throw p.debug(e),e}))},e.prototype._parseUrl=function(e){var t=e.split("/");return{host:t[2],path:"/"+t.slice(3).join("/")}},e}()},function(e,t,n){e.exports=n(349).Observable},function(e,t,n){(function(t){var n;n=function(){return function(e){var t,n=e.localStorage||(t={},{setItem:function(e,n){t[e]=n},getItem:function(e){return t[e]},removeItem:function(e){delete t[e]}}),r=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){if(!t.hasOwnProperty(n)){var r="Unknown property, "+n+". Valid properties are:";for(var i in t)t.hasOwnProperty(i)&&(r=r+" "+i);throw new Error(r)}if(typeof e[n]!==t[n])throw new Error(a(o.INVALID_TYPE,[typeof e[n],n]))}},i=function(e,t){return function(){return e.apply(t,arguments)}},o={OK:{code:0,text:"AMQJSC0000I OK."},CONNECT_TIMEOUT:{code:1,text:"AMQJSC0001E Connect timed out."},SUBSCRIBE_TIMEOUT:{code:2,text:"AMQJS0002E Subscribe timed out."},UNSUBSCRIBE_TIMEOUT:{code:3,text:"AMQJS0003E Unsubscribe timed out."},PING_TIMEOUT:{code:4,text:"AMQJS0004E Ping timed out."},INTERNAL_ERROR:{code:5,text:"AMQJS0005E Internal error. Error Message: {0}, Stack trace: {1}"},CONNACK_RETURNCODE:{code:6,text:"AMQJS0006E Bad Connack return code:{0} {1}."},SOCKET_ERROR:{code:7,text:"AMQJS0007E Socket error:{0}."},SOCKET_CLOSE:{code:8,text:"AMQJS0008I Socket closed."},MALFORMED_UTF:{code:9,text:"AMQJS0009E Malformed UTF data:{0} {1} {2}."},UNSUPPORTED:{code:10,text:"AMQJS0010E {0} is not supported by this browser."},INVALID_STATE:{code:11,text:"AMQJS0011E Invalid state {0}."},INVALID_TYPE:{code:12,text:"AMQJS0012E Invalid type {0} for {1}."},INVALID_ARGUMENT:{code:13,text:"AMQJS0013E Invalid argument {0} for {1}."},UNSUPPORTED_OPERATION:{code:14,text:"AMQJS0014E Unsupported operation."},INVALID_STORED_DATA:{code:15,text:"AMQJS0015E Invalid data in local storage key={0} value={1}."},INVALID_MQTT_MESSAGE_TYPE:{code:16,text:"AMQJS0016E Invalid MQTT message type {0}."},MALFORMED_UNICODE:{code:17,text:"AMQJS0017E Malformed Unicode string:{0} {1}."},BUFFER_FULL:{code:18,text:"AMQJS0018E Message buffer is full, maximum buffer size: {0}."}},s={0:"Connection Accepted",1:"Connection Refused: unacceptable protocol version",2:"Connection Refused: identifier rejected",3:"Connection Refused: server unavailable",4:"Connection Refused: bad user name or password",5:"Connection Refused: not authorized"},a=function(e,t){var n=e.text;if(t)for(var r,i,o=0;o<t.length;o++)if(r="{"+o+"}",(i=n.indexOf(r))>0){var s=n.substring(0,i),a=n.substring(i+r.length);n=s+t[o]+a}return n},u=[0,6,77,81,73,115,100,112,3],c=[0,4,77,81,84,84,4],l=function(e,t){for(var n in this.type=e,t)t.hasOwnProperty(n)&&(this[n]=t[n])};function d(e,t){var n,r=t,i=e[t],o=i>>4,s=i&=15;t+=1;var a=0,u=1;do{if(t==e.length)return[null,r];a+=(127&(n=e[t++]))*u,u*=128}while(0!=(128&n));var c=t+a;if(c>e.length)return[null,r];var d=new l(o);switch(o){case 2:1&e[t++]&&(d.sessionPresent=!0),d.returnCode=e[t++];break;case 3:var f=s>>1&3,p=h(e,t),v=m(e,t+=2,p);t+=p,f>0&&(d.messageIdentifier=h(e,t),t+=2);var g=new _(e.subarray(t,c));1==(1&s)&&(g.retained=!0),8==(8&s)&&(g.duplicate=!0),g.qos=f,g.destinationName=v,d.payloadMessage=g;break;case 4:case 5:case 6:case 7:case 11:d.messageIdentifier=h(e,t);break;case 9:d.messageIdentifier=h(e,t),t+=2,d.returnCode=e.subarray(t,c)}return[d,c]}function f(e,t,n){return t[n++]=e>>8,t[n++]=e%256,n}function p(e,t,n,r){return g(e,n,r=f(t,n,r)),r+t}function h(e,t){return 256*e[t]+e[t+1]}function v(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r>2047?(55296<=r&&r<=56319&&(n++,t++),t+=3):r>127?t+=2:t++}return t}function g(e,t,n){for(var r=n,i=0;i<e.length;i++){var s=e.charCodeAt(i);if(55296<=s&&s<=56319){var u=e.charCodeAt(++i);if(isNaN(u))throw new Error(a(o.MALFORMED_UNICODE,[s,u]));s=u-56320+(s-55296<<10)+65536}s<=127?t[r++]=s:s<=2047?(t[r++]=s>>6&31|192,t[r++]=63&s|128):s<=65535?(t[r++]=s>>12&15|224,t[r++]=s>>6&63|128,t[r++]=63&s|128):(t[r++]=s>>18&7|240,t[r++]=s>>12&63|128,t[r++]=s>>6&63|128,t[r++]=63&s|128)}return t}function m(e,t,n){for(var r,i="",s=t;s<t+n;){var u=e[s++];if(u<128)r=u;else{var c=e[s++]-128;if(c<0)throw new Error(a(o.MALFORMED_UTF,[u.toString(16),c.toString(16),""]));if(u<224)r=64*(u-192)+c;else{var l=e[s++]-128;if(l<0)throw new Error(a(o.MALFORMED_UTF,[u.toString(16),c.toString(16),l.toString(16)]));if(u<240)r=4096*(u-224)+64*c+l;else{var d=e[s++]-128;if(d<0)throw new Error(a(o.MALFORMED_UTF,[u.toString(16),c.toString(16),l.toString(16),d.toString(16)]));if(!(u<248))throw new Error(a(o.MALFORMED_UTF,[u.toString(16),c.toString(16),l.toString(16),d.toString(16)]));r=262144*(u-240)+4096*c+64*l+d}}}r>65535&&(r-=65536,i+=String.fromCharCode(55296+(r>>10)),r=56320+(1023&r)),i+=String.fromCharCode(r)}return i}l.prototype.encode=function(){var e,t=(15&this.type)<<4,n=0,r=[],i=0;switch(void 0!==this.messageIdentifier&&(n+=2),this.type){case 1:switch(this.mqttVersion){case 3:n+=u.length+3;break;case 4:n+=c.length+3}n+=v(this.clientId)+2,void 0!==this.willMessage&&(n+=v(this.willMessage.destinationName)+2,(e=this.willMessage.payloadBytes)instanceof Uint8Array||(e=new Uint8Array(s)),n+=e.byteLength+2),void 0!==this.userName&&(n+=v(this.userName)+2),void 0!==this.password&&(n+=v(this.password)+2);break;case 8:t|=2;for(var o=0;o<this.topics.length;o++)r[o]=v(this.topics[o]),n+=r[o]+2;n+=this.requestedQos.length;break;case 10:for(t|=2,o=0;o<this.topics.length;o++)r[o]=v(this.topics[o]),n+=r[o]+2;break;case 6:t|=2;break;case 3:this.payloadMessage.duplicate&&(t|=8),t=t|=this.payloadMessage.qos<<1,this.payloadMessage.retained&&(t|=1),n+=(i=v(this.payloadMessage.destinationName))+2;var s=this.payloadMessage.payloadBytes;n+=s.byteLength,s instanceof ArrayBuffer?s=new Uint8Array(s):s instanceof Uint8Array||(s=new Uint8Array(s.buffer))}var a=function(e){var t=new Array(1),n=0;do{var r=e%128;(e>>=7)>0&&(r|=128),t[n++]=r}while(e>0&&n<4);return t}(n),l=a.length+1,d=new ArrayBuffer(n+l),h=new Uint8Array(d);if(h[0]=t,h.set(a,1),3==this.type)l=p(this.payloadMessage.destinationName,i,h,l);else if(1==this.type){switch(this.mqttVersion){case 3:h.set(u,l),l+=u.length;break;case 4:h.set(c,l),l+=c.length}var g=0;this.cleanSession&&(g=2),void 0!==this.willMessage&&(g|=4,g|=this.willMessage.qos<<3,this.willMessage.retained&&(g|=32)),void 0!==this.userName&&(g|=128),void 0!==this.password&&(g|=64),h[l++]=g,l=f(this.keepAliveInterval,h,l)}switch(void 0!==this.messageIdentifier&&(l=f(this.messageIdentifier,h,l)),this.type){case 1:l=p(this.clientId,v(this.clientId),h,l),void 0!==this.willMessage&&(l=p(this.willMessage.destinationName,v(this.willMessage.destinationName),h,l),l=f(e.byteLength,h,l),h.set(e,l),l+=e.byteLength),void 0!==this.userName&&(l=p(this.userName,v(this.userName),h,l)),void 0!==this.password&&(l=p(this.password,v(this.password),h,l));break;case 3:h.set(s,l);break;case 8:for(o=0;o<this.topics.length;o++)l=p(this.topics[o],r[o],h,l),h[l++]=this.requestedQos[o];break;case 10:for(o=0;o<this.topics.length;o++)l=p(this.topics[o],r[o],h,l)}return d};var y=function(e,t){this._client=e,this._keepAliveInterval=1e3*t,this.isReset=!1;var n=new l(12).encode(),r=function(e){return function(){return i.apply(e)}},i=function(){this.isReset?(this.isReset=!1,this._client._trace("Pinger.doPing","send PINGREQ"),this._client.socket.send(n),this.timeout=setTimeout(r(this),this._keepAliveInterval)):(this._client._trace("Pinger.doPing","Timed out"),this._client._disconnected(o.PING_TIMEOUT.code,a(o.PING_TIMEOUT)))};this.reset=function(){this.isReset=!0,clearTimeout(this.timeout),this._keepAliveInterval>0&&(this.timeout=setTimeout(r(this),this._keepAliveInterval))},this.cancel=function(){clearTimeout(this.timeout)}},b=function(e,t,n,r){t||(t=30),this.timeout=setTimeout(function(e,t,n){return function(){return e.apply(t,n)}}(n,e,r),1e3*t),this.cancel=function(){clearTimeout(this.timeout)}},w=function(t,r,i,s,u){if(!("WebSocket"in e)||null===e.WebSocket)throw new Error(a(o.UNSUPPORTED,["WebSocket"]));if(!("ArrayBuffer"in e)||null===e.ArrayBuffer)throw new Error(a(o.UNSUPPORTED,["ArrayBuffer"]));for(var c in this._trace("Paho.Client",t,r,i,s,u),this.host=r,this.port=i,this.path=s,this.uri=t,this.clientId=u,this._wsuri=null,this._localKey=r+":"+i+("/mqtt"!=s?":"+s:"")+":"+u+":",this._msg_queue=[],this._buffered_msg_queue=[],this._sentMessages={},this._receivedMessages={},this._notify_msg_sent={},this._message_identifier=1,this._sequence=0,n)0!==c.indexOf("Sent:"+this._localKey)&&0!==c.indexOf("Received:"+this._localKey)||this.restore(c)};w.prototype.host=null,w.prototype.port=null,w.prototype.path=null,w.prototype.uri=null,w.prototype.clientId=null,w.prototype.socket=null,w.prototype.connected=!1,w.prototype.maxMessageIdentifier=65536,w.prototype.connectOptions=null,w.prototype.hostIndex=null,w.prototype.onConnected=null,w.prototype.onConnectionLost=null,w.prototype.onMessageDelivered=null,w.prototype.onMessageArrived=null,w.prototype.traceFunction=null,w.prototype._msg_queue=null,w.prototype._buffered_msg_queue=null,w.prototype._connectTimeout=null,w.prototype.sendPinger=null,w.prototype.receivePinger=null,w.prototype._reconnectInterval=1,w.prototype._reconnecting=!1,w.prototype._reconnectTimeout=null,w.prototype.disconnectedPublishing=!1,w.prototype.disconnectedBufferSize=5e3,w.prototype.receiveBuffer=null,w.prototype._traceBuffer=null,w.prototype._MAX_TRACE_ENTRIES=100,w.prototype.connect=function(e){var t=this._traceMask(e,"password");if(this._trace("Client.connect",t,this.socket,this.connected),this.connected)throw new Error(a(o.INVALID_STATE,["already connected"]));if(this.socket)throw new Error(a(o.INVALID_STATE,["already connected"]));this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1),this.connectOptions=e,this._reconnectInterval=1,this._reconnecting=!1,e.uris?(this.hostIndex=0,this._doConnect(e.uris[0])):this._doConnect(this.uri)},w.prototype.subscribe=function(e,t){if(this._trace("Client.subscribe",e,t),!this.connected)throw new Error(a(o.INVALID_STATE,["not connected"]));var n=new l(8);n.topics=e.constructor===Array?e:[e],void 0===t.qos&&(t.qos=0),n.requestedQos=[];for(var r=0;r<n.topics.length;r++)n.requestedQos[r]=t.qos;t.onSuccess&&(n.onSuccess=function(e){t.onSuccess({invocationContext:t.invocationContext,grantedQos:e})}),t.onFailure&&(n.onFailure=function(e){t.onFailure({invocationContext:t.invocationContext,errorCode:e,errorMessage:a(e)})}),t.timeout&&(n.timeOut=new b(this,t.timeout,t.onFailure,[{invocationContext:t.invocationContext,errorCode:o.SUBSCRIBE_TIMEOUT.code,errorMessage:a(o.SUBSCRIBE_TIMEOUT)}])),this._requires_ack(n),this._schedule_message(n)},w.prototype.unsubscribe=function(e,t){if(this._trace("Client.unsubscribe",e,t),!this.connected)throw new Error(a(o.INVALID_STATE,["not connected"]));var n=new l(10);n.topics=e.constructor===Array?e:[e],t.onSuccess&&(n.callback=function(){t.onSuccess({invocationContext:t.invocationContext})}),t.timeout&&(n.timeOut=new b(this,t.timeout,t.onFailure,[{invocationContext:t.invocationContext,errorCode:o.UNSUBSCRIBE_TIMEOUT.code,errorMessage:a(o.UNSUBSCRIBE_TIMEOUT)}])),this._requires_ack(n),this._schedule_message(n)},w.prototype.send=function(e){this._trace("Client.send",e);var t=new l(3);if(t.payloadMessage=e,this.connected)e.qos>0?this._requires_ack(t):this.onMessageDelivered&&(this._notify_msg_sent[t]=this.onMessageDelivered(t.payloadMessage)),this._schedule_message(t);else{if(!this._reconnecting||!this.disconnectedPublishing)throw new Error(a(o.INVALID_STATE,["not connected"]));if(Object.keys(this._sentMessages).length+this._buffered_msg_queue.length>this.disconnectedBufferSize)throw new Error(a(o.BUFFER_FULL,[this.disconnectedBufferSize]));e.qos>0?this._requires_ack(t):(t.sequence=++this._sequence,this._buffered_msg_queue.unshift(t))}},w.prototype.disconnect=function(){if(this._trace("Client.disconnect"),this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1),!this.socket)throw new Error(a(o.INVALID_STATE,["not connecting or connected"]));var e=new l(14);this._notify_msg_sent[e]=i(this._disconnected,this),this._schedule_message(e)},w.prototype.getTraceLog=function(){if(null!==this._traceBuffer){for(var e in this._trace("Client.getTraceLog",new Date),this._trace("Client.getTraceLog in flight messages",this._sentMessages.length),this._sentMessages)this._trace("_sentMessages ",e,this._sentMessages[e]);for(var e in this._receivedMessages)this._trace("_receivedMessages ",e,this._receivedMessages[e]);return this._traceBuffer}},w.prototype.startTrace=function(){null===this._traceBuffer&&(this._traceBuffer=[]),this._trace("Client.startTrace",new Date,"@VERSION@-@BUILDLEVEL@")},w.prototype.stopTrace=function(){delete this._traceBuffer},w.prototype._doConnect=function(e){if(this.connectOptions.useSSL){var t=e.split(":");t[0]="wss",e=t.join(":")}this._wsuri=e,this.connected=!1,this.connectOptions.mqttVersion<4?this.socket=new WebSocket(e,["mqttv3.1"]):this.socket=new WebSocket(e,["mqtt"]),this.socket.binaryType="arraybuffer",this.socket.onopen=i(this._on_socket_open,this),this.socket.onmessage=i(this._on_socket_message,this),this.socket.onerror=i(this._on_socket_error,this),this.socket.onclose=i(this._on_socket_close,this),this.sendPinger=new y(this,this.connectOptions.keepAliveInterval),this.receivePinger=new y(this,this.connectOptions.keepAliveInterval),this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null),this._connectTimeout=new b(this,this.connectOptions.timeout,this._disconnected,[o.CONNECT_TIMEOUT.code,a(o.CONNECT_TIMEOUT)])},w.prototype._schedule_message=function(e){this._msg_queue.unshift(e),this.connected&&this._process_queue()},w.prototype.store=function(e,t){var r={type:t.type,messageIdentifier:t.messageIdentifier,version:1};if(3!==t.type)throw Error(a(o.INVALID_STORED_DATA,[e+this._localKey+t.messageIdentifier,r]));t.pubRecReceived&&(r.pubRecReceived=!0),r.payloadMessage={};for(var i="",s=t.payloadMessage.payloadBytes,u=0;u<s.length;u++)s[u]<=15?i=i+"0"+s[u].toString(16):i+=s[u].toString(16);r.payloadMessage.payloadHex=i,r.payloadMessage.qos=t.payloadMessage.qos,r.payloadMessage.destinationName=t.payloadMessage.destinationName,t.payloadMessage.duplicate&&(r.payloadMessage.duplicate=!0),t.payloadMessage.retained&&(r.payloadMessage.retained=!0),0===e.indexOf("Sent:")&&(void 0===t.sequence&&(t.sequence=++this._sequence),r.sequence=t.sequence),n.setItem(e+this._localKey+t.messageIdentifier,JSON.stringify(r))},w.prototype.restore=function(e){var t=n.getItem(e),r=JSON.parse(t),i=new l(r.type,r);if(3!==r.type)throw Error(a(o.INVALID_STORED_DATA,[e,t]));for(var s=r.payloadMessage.payloadHex,u=new ArrayBuffer(s.length/2),c=new Uint8Array(u),d=0;s.length>=2;){var f=parseInt(s.substring(0,2),16);s=s.substring(2,s.length),c[d++]=f}var p=new _(c);p.qos=r.payloadMessage.qos,p.destinationName=r.payloadMessage.destinationName,r.payloadMessage.duplicate&&(p.duplicate=!0),r.payloadMessage.retained&&(p.retained=!0),i.payloadMessage=p,0===e.indexOf("Sent:"+this._localKey)?(i.payloadMessage.duplicate=!0,this._sentMessages[i.messageIdentifier]=i):0===e.indexOf("Received:"+this._localKey)&&(this._receivedMessages[i.messageIdentifier]=i)},w.prototype._process_queue=function(){for(var e=null;e=this._msg_queue.pop();)this._socket_send(e),this._notify_msg_sent[e]&&(this._notify_msg_sent[e](),delete this._notify_msg_sent[e])},w.prototype._requires_ack=function(e){var t=Object.keys(this._sentMessages).length;if(t>this.maxMessageIdentifier)throw Error("Too many messages:"+t);for(;void 0!==this._sentMessages[this._message_identifier];)this._message_identifier++;e.messageIdentifier=this._message_identifier,this._sentMessages[e.messageIdentifier]=e,3===e.type&&this.store("Sent:",e),this._message_identifier===this.maxMessageIdentifier&&(this._message_identifier=1)},w.prototype._on_socket_open=function(){var e=new l(1,this.connectOptions);e.clientId=this.clientId,this._socket_send(e)},w.prototype._on_socket_message=function(e){this._trace("Client._on_socket_message",e.data);for(var t=this._deframeMessages(e.data),n=0;n<t.length;n+=1)this._handleMessage(t[n])},w.prototype._deframeMessages=function(e){var t=new Uint8Array(e),n=[];if(this.receiveBuffer){var r=new Uint8Array(this.receiveBuffer.length+t.length);r.set(this.receiveBuffer),r.set(t,this.receiveBuffer.length),t=r,delete this.receiveBuffer}try{for(var i=0;i<t.length;){var s=d(t,i),u=s[0];if(i=s[1],null===u)break;n.push(u)}i<t.length&&(this.receiveBuffer=t.subarray(i))}catch(e){var c="undefined"==e.hasOwnProperty("stack")?e.stack.toString():"No Error Stack Available";return void this._disconnected(o.INTERNAL_ERROR.code,a(o.INTERNAL_ERROR,[e.message,c]))}return n},w.prototype._handleMessage=function(e){this._trace("Client._handleMessage",e);try{switch(e.type){case 2:if(this._connectTimeout.cancel(),this._reconnectTimeout&&this._reconnectTimeout.cancel(),this.connectOptions.cleanSession){for(var t in this._sentMessages){var r=this._sentMessages[t];n.removeItem("Sent:"+this._localKey+r.messageIdentifier)}for(var t in this._sentMessages={},this._receivedMessages){var i=this._receivedMessages[t];n.removeItem("Received:"+this._localKey+i.messageIdentifier)}this._receivedMessages={}}if(0!==e.returnCode){this._disconnected(o.CONNACK_RETURNCODE.code,a(o.CONNACK_RETURNCODE,[e.returnCode,s[e.returnCode]]));break}this.connected=!0,this.connectOptions.uris&&(this.hostIndex=this.connectOptions.uris.length);var u=[];for(var c in this._sentMessages)this._sentMessages.hasOwnProperty(c)&&u.push(this._sentMessages[c]);if(this._buffered_msg_queue.length>0)for(var d=null;d=this._buffered_msg_queue.pop();)u.push(d),this.onMessageDelivered&&(this._notify_msg_sent[d]=this.onMessageDelivered(d.payloadMessage));u=u.sort((function(e,t){return e.sequence-t.sequence}));for(var f=0,p=u.length;f<p;f++)if(3==(r=u[f]).type&&r.pubRecReceived){var h=new l(6,{messageIdentifier:r.messageIdentifier});this._schedule_message(h)}else this._schedule_message(r);this.connectOptions.onSuccess&&this.connectOptions.onSuccess({invocationContext:this.connectOptions.invocationContext});var v=!1;this._reconnecting&&(v=!0,this._reconnectInterval=1,this._reconnecting=!1),this._connected(v,this._wsuri),this._process_queue();break;case 3:this._receivePublish(e);break;case 4:(r=this._sentMessages[e.messageIdentifier])&&(delete this._sentMessages[e.messageIdentifier],n.removeItem("Sent:"+this._localKey+e.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(r.payloadMessage));break;case 5:(r=this._sentMessages[e.messageIdentifier])&&(r.pubRecReceived=!0,h=new l(6,{messageIdentifier:e.messageIdentifier}),this.store("Sent:",r),this._schedule_message(h));break;case 6:i=this._receivedMessages[e.messageIdentifier],n.removeItem("Received:"+this._localKey+e.messageIdentifier),i&&(this._receiveMessage(i),delete this._receivedMessages[e.messageIdentifier]);var g=new l(7,{messageIdentifier:e.messageIdentifier});this._schedule_message(g);break;case 7:r=this._sentMessages[e.messageIdentifier],delete this._sentMessages[e.messageIdentifier],n.removeItem("Sent:"+this._localKey+e.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(r.payloadMessage);break;case 9:(r=this._sentMessages[e.messageIdentifier])&&(r.timeOut&&r.timeOut.cancel(),128===e.returnCode[0]?r.onFailure&&r.onFailure(e.returnCode):r.onSuccess&&r.onSuccess(e.returnCode),delete this._sentMessages[e.messageIdentifier]);break;case 11:(r=this._sentMessages[e.messageIdentifier])&&(r.timeOut&&r.timeOut.cancel(),r.callback&&r.callback(),delete this._sentMessages[e.messageIdentifier]);break;case 13:this.sendPinger.reset();break;default:this._disconnected(o.INVALID_MQTT_MESSAGE_TYPE.code,a(o.INVALID_MQTT_MESSAGE_TYPE,[e.type]))}}catch(e){var m="undefined"==e.hasOwnProperty("stack")?e.stack.toString():"No Error Stack Available";return void this._disconnected(o.INTERNAL_ERROR.code,a(o.INTERNAL_ERROR,[e.message,m]))}},w.prototype._on_socket_error=function(e){this._reconnecting||this._disconnected(o.SOCKET_ERROR.code,a(o.SOCKET_ERROR,[e.data]))},w.prototype._on_socket_close=function(){this._reconnecting||this._disconnected(o.SOCKET_CLOSE.code,a(o.SOCKET_CLOSE))},w.prototype._socket_send=function(e){if(1==e.type){var t=this._traceMask(e,"password");this._trace("Client._socket_send",t)}else this._trace("Client._socket_send",e);this.socket.send(e.encode()),this.sendPinger.reset()},w.prototype._receivePublish=function(e){switch(e.payloadMessage.qos){case"undefined":case 0:this._receiveMessage(e);break;case 1:var t=new l(4,{messageIdentifier:e.messageIdentifier});this._schedule_message(t),this._receiveMessage(e);break;case 2:this._receivedMessages[e.messageIdentifier]=e,this.store("Received:",e);var n=new l(5,{messageIdentifier:e.messageIdentifier});this._schedule_message(n);break;default:throw Error("Invaild qos="+e.payloadMessage.qos)}},w.prototype._receiveMessage=function(e){this.onMessageArrived&&this.onMessageArrived(e.payloadMessage)},w.prototype._connected=function(e,t){this.onConnected&&this.onConnected(e,t)},w.prototype._reconnect=function(){this._trace("Client._reconnect"),this.connected||(this._reconnecting=!0,this.sendPinger.cancel(),this.receivePinger.cancel(),this._reconnectInterval<128&&(this._reconnectInterval=2*this._reconnectInterval),this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri))},w.prototype._disconnected=function(e,t){if(this._trace("Client._disconnected",e,t),void 0!==e&&this._reconnecting)this._reconnectTimeout=new b(this,this._reconnectInterval,this._reconnect);else if(this.sendPinger.cancel(),this.receivePinger.cancel(),this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null),this._msg_queue=[],this._buffered_msg_queue=[],this._notify_msg_sent={},this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,1===this.socket.readyState&&this.socket.close(),delete this.socket),this.connectOptions.uris&&this.hostIndex<this.connectOptions.uris.length-1)this.hostIndex++,this._doConnect(this.connectOptions.uris[this.hostIndex]);else if(void 0===e&&(e=o.OK.code,t=a(o.OK)),this.connected){if(this.connected=!1,this.onConnectionLost&&this.onConnectionLost({errorCode:e,errorMessage:t,reconnect:this.connectOptions.reconnect,uri:this._wsuri}),e!==o.OK.code&&this.connectOptions.reconnect)return this._reconnectInterval=1,void this._reconnect()}else 4===this.connectOptions.mqttVersion&&!1===this.connectOptions.mqttVersionExplicit?(this._trace("Failed to connect V4, dropping back to V3"),this.connectOptions.mqttVersion=3,this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri)):this.connectOptions.onFailure&&this.connectOptions.onFailure({invocationContext:this.connectOptions.invocationContext,errorCode:e,errorMessage:t})},w.prototype._trace=function(){if(this.traceFunction){var e=Array.prototype.slice.call(arguments);for(var t in e)void 0!==e[t]&&e.splice(t,1,JSON.stringify(e[t]));var n=e.join("");this.traceFunction({severity:"Debug",message:n})}if(null!==this._traceBuffer){t=0;for(var r=arguments.length;t<r;t++)this._traceBuffer.length==this._MAX_TRACE_ENTRIES&&this._traceBuffer.shift(),0===t||void 0===arguments[t]?this._traceBuffer.push(arguments[t]):this._traceBuffer.push("  "+JSON.stringify(arguments[t]))}},w.prototype._traceMask=function(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=r==t?"******":e[r]);return n};var _=function(e){var t,n;if(!("string"==typeof e||e instanceof ArrayBuffer||ArrayBuffer.isView(e)&&!(e instanceof DataView)))throw a(o.INVALID_ARGUMENT,[e,"newPayload"]);t=e;var r=0,i=!1,s=!1;Object.defineProperties(this,{payloadString:{enumerable:!0,get:function(){return"string"==typeof t?t:m(t,0,t.length)}},payloadBytes:{enumerable:!0,get:function(){if("string"==typeof t){var e=new ArrayBuffer(v(t)),n=new Uint8Array(e);return g(t,n,0),n}return t}},destinationName:{enumerable:!0,get:function(){return n},set:function(e){if("string"!=typeof e)throw new Error(a(o.INVALID_ARGUMENT,[e,"newDestinationName"]));n=e}},qos:{enumerable:!0,get:function(){return r},set:function(e){if(0!==e&&1!==e&&2!==e)throw new Error("Invalid argument:"+e);r=e}},retained:{enumerable:!0,get:function(){return i},set:function(e){if("boolean"!=typeof e)throw new Error(a(o.INVALID_ARGUMENT,[e,"newRetained"]));i=e}},topic:{enumerable:!0,get:function(){return n},set:function(e){n=e}},duplicate:{enumerable:!0,get:function(){return s},set:function(e){s=e}}})};return{Client:function(e,t,n,i){var s;if("string"!=typeof e)throw new Error(a(o.INVALID_TYPE,[typeof e,"host"]));if(2==arguments.length){i=t;var u=(s=e).match(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/);if(!u)throw new Error(a(o.INVALID_ARGUMENT,[e,"host"]));e=u[4]||u[2],t=parseInt(u[7]),n=u[8]}else{if(3==arguments.length&&(i=n,n="/mqtt"),"number"!=typeof t||t<0)throw new Error(a(o.INVALID_TYPE,[typeof t,"port"]));if("string"!=typeof n)throw new Error(a(o.INVALID_TYPE,[typeof n,"path"]));var c=-1!==e.indexOf(":")&&"["!==e.slice(0,1)&&"]"!==e.slice(-1);s="ws://"+(c?"["+e+"]":e)+":"+t+n}for(var l=0,d=0;d<i.length;d++){var f=i.charCodeAt(d);55296<=f&&f<=56319&&d++,l++}if("string"!=typeof i||l>65535)throw new Error(a(o.INVALID_ARGUMENT,[i,"clientId"]));var p=new w(s,e,t,n,i);Object.defineProperties(this,{host:{get:function(){return e},set:function(){throw new Error(a(o.UNSUPPORTED_OPERATION))}},port:{get:function(){return t},set:function(){throw new Error(a(o.UNSUPPORTED_OPERATION))}},path:{get:function(){return n},set:function(){throw new Error(a(o.UNSUPPORTED_OPERATION))}},uri:{get:function(){return s},set:function(){throw new Error(a(o.UNSUPPORTED_OPERATION))}},clientId:{get:function(){return p.clientId},set:function(){throw new Error(a(o.UNSUPPORTED_OPERATION))}},onConnected:{get:function(){return p.onConnected},set:function(e){if("function"!=typeof e)throw new Error(a(o.INVALID_TYPE,[typeof e,"onConnected"]));p.onConnected=e}},disconnectedPublishing:{get:function(){return p.disconnectedPublishing},set:function(e){p.disconnectedPublishing=e}},disconnectedBufferSize:{get:function(){return p.disconnectedBufferSize},set:function(e){p.disconnectedBufferSize=e}},onConnectionLost:{get:function(){return p.onConnectionLost},set:function(e){if("function"!=typeof e)throw new Error(a(o.INVALID_TYPE,[typeof e,"onConnectionLost"]));p.onConnectionLost=e}},onMessageDelivered:{get:function(){return p.onMessageDelivered},set:function(e){if("function"!=typeof e)throw new Error(a(o.INVALID_TYPE,[typeof e,"onMessageDelivered"]));p.onMessageDelivered=e}},onMessageArrived:{get:function(){return p.onMessageArrived},set:function(e){if("function"!=typeof e)throw new Error(a(o.INVALID_TYPE,[typeof e,"onMessageArrived"]));p.onMessageArrived=e}},trace:{get:function(){return p.traceFunction},set:function(e){if("function"!=typeof e)throw new Error(a(o.INVALID_TYPE,[typeof e,"onTrace"]));p.traceFunction=e}}}),this.connect=function(e){if(r(e=e||{},{timeout:"number",userName:"string",password:"string",willMessage:"object",keepAliveInterval:"number",cleanSession:"boolean",useSSL:"boolean",invocationContext:"object",onSuccess:"function",onFailure:"function",hosts:"object",ports:"object",reconnect:"boolean",mqttVersion:"number",mqttVersionExplicit:"boolean",uris:"object"}),void 0===e.keepAliveInterval&&(e.keepAliveInterval=60),e.mqttVersion>4||e.mqttVersion<3)throw new Error(a(o.INVALID_ARGUMENT,[e.mqttVersion,"connectOptions.mqttVersion"]));if(void 0===e.mqttVersion?(e.mqttVersionExplicit=!1,e.mqttVersion=4):e.mqttVersionExplicit=!0,void 0!==e.password&&void 0===e.userName)throw new Error(a(o.INVALID_ARGUMENT,[e.password,"connectOptions.password"]));if(e.willMessage){if(!(e.willMessage instanceof _))throw new Error(a(o.INVALID_TYPE,[e.willMessage,"connectOptions.willMessage"]));if(e.willMessage.stringPayload=null,void 0===e.willMessage.destinationName)throw new Error(a(o.INVALID_TYPE,[typeof e.willMessage.destinationName,"connectOptions.willMessage.destinationName"]))}if(void 0===e.cleanSession&&(e.cleanSession=!0),e.hosts){if(!(e.hosts instanceof Array))throw new Error(a(o.INVALID_ARGUMENT,[e.hosts,"connectOptions.hosts"]));if(e.hosts.length<1)throw new Error(a(o.INVALID_ARGUMENT,[e.hosts,"connectOptions.hosts"]));for(var t=!1,i=0;i<e.hosts.length;i++){if("string"!=typeof e.hosts[i])throw new Error(a(o.INVALID_TYPE,[typeof e.hosts[i],"connectOptions.hosts["+i+"]"]));if(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/.test(e.hosts[i])){if(0===i)t=!0;else if(!t)throw new Error(a(o.INVALID_ARGUMENT,[e.hosts[i],"connectOptions.hosts["+i+"]"]))}else if(t)throw new Error(a(o.INVALID_ARGUMENT,[e.hosts[i],"connectOptions.hosts["+i+"]"]))}if(t)e.uris=e.hosts;else{if(!e.ports)throw new Error(a(o.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));if(!(e.ports instanceof Array))throw new Error(a(o.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));if(e.hosts.length!==e.ports.length)throw new Error(a(o.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));for(e.uris=[],i=0;i<e.hosts.length;i++){if("number"!=typeof e.ports[i]||e.ports[i]<0)throw new Error(a(o.INVALID_TYPE,[typeof e.ports[i],"connectOptions.ports["+i+"]"]));var u=e.hosts[i],c=e.ports[i],l=-1!==u.indexOf(":");s="ws://"+(l?"["+u+"]":u)+":"+c+n,e.uris.push(s)}}}p.connect(e)},this.subscribe=function(e,t){if("string"!=typeof e&&e.constructor!==Array)throw new Error("Invalid argument:"+e);if(r(t=t||{},{qos:"number",invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),t.timeout&&!t.onFailure)throw new Error("subscribeOptions.timeout specified with no onFailure callback.");if(void 0!==t.qos&&0!==t.qos&&1!==t.qos&&2!==t.qos)throw new Error(a(o.INVALID_ARGUMENT,[t.qos,"subscribeOptions.qos"]));p.subscribe(e,t)},this.unsubscribe=function(e,t){if("string"!=typeof e&&e.constructor!==Array)throw new Error("Invalid argument:"+e);if(r(t=t||{},{invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),t.timeout&&!t.onFailure)throw new Error("unsubscribeOptions.timeout specified with no onFailure callback.");p.unsubscribe(e,t)},this.send=function(e,t,n,r){var i;if(0===arguments.length)throw new Error("Invalid argument.length");if(1==arguments.length){if(!(e instanceof _)&&"string"!=typeof e)throw new Error("Invalid argument:"+typeof e);if(void 0===(i=e).destinationName)throw new Error(a(o.INVALID_ARGUMENT,[i.destinationName,"Message.destinationName"]));p.send(i)}else(i=new _(t)).destinationName=e,arguments.length>=3&&(i.qos=n),arguments.length>=4&&(i.retained=r),p.send(i)},this.publish=function(e,t,n,r){var i;if(0===arguments.length)throw new Error("Invalid argument.length");if(1==arguments.length){if(!(e instanceof _)&&"string"!=typeof e)throw new Error("Invalid argument:"+typeof e);if(void 0===(i=e).destinationName)throw new Error(a(o.INVALID_ARGUMENT,[i.destinationName,"Message.destinationName"]));p.send(i)}else(i=new _(t)).destinationName=e,arguments.length>=3&&(i.qos=n),arguments.length>=4&&(i.retained=r),p.send(i)},this.disconnect=function(){p.disconnect()},this.getTraceLog=function(){return p.getTraceLog()},this.startTrace=function(){p.startTrace()},this.stopTrace=function(){p.stopTrace()},this.isConnected=function(){return p.connected}},Message:_}}(void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},e.exports=n()}).call(this,n(60))},function(e,t,n){"use strict";var r,i,o=n(353);function s(e,t,n){if(e._observer)a(e._observer,t,n);else if(e._observers){var r=[];e._observers.forEach((function(e){r.push(e)})),r.forEach((function(e){a(e,t,n)}))}}function a(e,t,n){if(!e.closed)switch(t){case"next":return e.next(n);case"error":return e.error(n);case"complete":return e.complete(n)}}function u(e){return e._observer||e._observers&&e._observers.size>0}function c(e){var t=this;this._observer=null,this._observers=null,this._observable=new o((function(n){return function(e,t){!u(e)&&t&&t.start&&t.start()}(t,e),function(e,t){e._observers?e._observers.add(t):e._observer?(e._observers=new Set,e._observers.add(e._observer),e._observers.add(t),e._observer=null):e._observer=t}(t,n),function(){!function(e,t){e._observers?e._observers.delete(t):e._observer===t&&(e._observer=null)}(t,n),function(e,t){!u(e)&&t&&t.pause&&t.pause()}(t,e)}}))}r=c.prototype,i={get observable(){return this._observable},get observed(){return u(this)},next:function(e){s(this,"next",e)},error:function(e){s(this,"error",e)},complete:function(e){s(this,"complete",e)}},Object.keys(i).forEach((function(e){var t=Object.getOwnPropertyDescriptor(i,e);t.enumerable=!1,Object.defineProperty(r,e,t)})),e.exports=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebCryptoSha256=t.Ie11Sha256=void 0,(0,n(110).__exportStar)(n(355),t);var r=n(160);Object.defineProperty(t,"Ie11Sha256",{enumerable:!0,get:function(){return r.Sha256}});var i=n(162);Object.defineProperty(t,"WebCryptoSha256",{enumerable:!0,get:function(){return i.Sha256}})},function(e){e.exports=JSON.parse('{"name":"@aws-sdk/client-lex-runtime-service","description":"AWS SDK for JavaScript Lex Runtime Service Client for Node.js, Browser and React Native","version":"3.186.0","scripts":{"build":"concurrently \'yarn:build:cjs\' \'yarn:build:es\' \'yarn:build:types\'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4","clean":"rimraf ./dist-* && rimraf *.tsbuildinfo","test":"yarn test:unit","test:unit":"ts-mocha test/**/*.spec.ts"},"main":"./dist-cjs/index.js","types":"./dist-types/index.d.ts","module":"./dist-es/index.js","sideEffects":false,"dependencies":{"@aws-crypto/sha256-browser":"2.0.0","@aws-crypto/sha256-js":"2.0.0","@aws-sdk/client-sts":"3.186.0","@aws-sdk/config-resolver":"3.186.0","@aws-sdk/credential-provider-node":"3.186.0","@aws-sdk/fetch-http-handler":"3.186.0","@aws-sdk/hash-node":"3.186.0","@aws-sdk/invalid-dependency":"3.186.0","@aws-sdk/middleware-content-length":"3.186.0","@aws-sdk/middleware-host-header":"3.186.0","@aws-sdk/middleware-logger":"3.186.0","@aws-sdk/middleware-recursion-detection":"3.186.0","@aws-sdk/middleware-retry":"3.186.0","@aws-sdk/middleware-serde":"3.186.0","@aws-sdk/middleware-signing":"3.186.0","@aws-sdk/middleware-stack":"3.186.0","@aws-sdk/middleware-user-agent":"3.186.0","@aws-sdk/node-config-provider":"3.186.0","@aws-sdk/node-http-handler":"3.186.0","@aws-sdk/protocol-http":"3.186.0","@aws-sdk/smithy-client":"3.186.0","@aws-sdk/types":"3.186.0","@aws-sdk/url-parser":"3.186.0","@aws-sdk/util-base64-browser":"3.186.0","@aws-sdk/util-base64-node":"3.186.0","@aws-sdk/util-body-length-browser":"3.186.0","@aws-sdk/util-body-length-node":"3.186.0","@aws-sdk/util-defaults-mode-browser":"3.186.0","@aws-sdk/util-defaults-mode-node":"3.186.0","@aws-sdk/util-user-agent-browser":"3.186.0","@aws-sdk/util-user-agent-node":"3.186.0","@aws-sdk/util-utf8-browser":"3.186.0","@aws-sdk/util-utf8-node":"3.186.0","tslib":"^2.3.1"},"devDependencies":{"@aws-sdk/service-client-documentation-generator":"3.186.0","@tsconfig/recommended":"1.0.1","@types/chai":"^4.2.11","@types/mocha":"^8.0.4","@types/node":"^12.7.5","concurrently":"7.0.0","downlevel-dts":"0.10.1","rimraf":"3.0.2","typedoc":"0.19.2","typescript":"~4.6.2"},"overrides":{"typedoc":{"typescript":"~4.6.2"}},"engines":{"node":">=12.0.0"},"typesVersions":{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},"files":["dist-*"],"author":{"name":"AWS SDK for JavaScript Team","url":"https://aws.amazon.com/javascript/"},"license":"Apache-2.0","browser":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},"homepage":"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-lex-runtime-service","repository":{"type":"git","url":"https://github.com/aws/aws-sdk-js-v3.git","directory":"clients/client-lex-runtime-service"}}')},function(e){e.exports=JSON.parse('{"name":"@aws-sdk/client-cloudwatch-logs","description":"AWS SDK for JavaScript Cloudwatch Logs Client for Node.js, Browser and React Native","version":"3.6.1","scripts":{"clean":"yarn remove-definitions && yarn remove-dist && yarn remove-documentation","build-documentation":"yarn remove-documentation && typedoc ./","prepublishOnly":"yarn build","pretest":"yarn build:cjs","remove-definitions":"rimraf ./types","remove-dist":"rimraf ./dist","remove-documentation":"rimraf ./docs","test":"exit 0","build:cjs":"tsc -p tsconfig.json","build:es":"tsc -p tsconfig.es.json","build":"yarn build:cjs && yarn build:es","postbuild":"downlevel-dts types types/ts3.4"},"main":"./dist/cjs/index.js","types":"./types/index.d.ts","module":"./dist/es/index.js","browser":{"./runtimeConfig":"./runtimeConfig.browser"},"react-native":{"./runtimeConfig":"./runtimeConfig.native"},"sideEffects":false,"dependencies":{"@aws-crypto/sha256-browser":"^1.0.0","@aws-crypto/sha256-js":"^1.0.0","@aws-sdk/config-resolver":"3.6.1","@aws-sdk/credential-provider-node":"3.6.1","@aws-sdk/fetch-http-handler":"3.6.1","@aws-sdk/hash-node":"3.6.1","@aws-sdk/invalid-dependency":"3.6.1","@aws-sdk/middleware-content-length":"3.6.1","@aws-sdk/middleware-host-header":"3.6.1","@aws-sdk/middleware-logger":"3.6.1","@aws-sdk/middleware-retry":"3.6.1","@aws-sdk/middleware-serde":"3.6.1","@aws-sdk/middleware-signing":"3.6.1","@aws-sdk/middleware-stack":"3.6.1","@aws-sdk/middleware-user-agent":"3.6.1","@aws-sdk/node-config-provider":"3.6.1","@aws-sdk/node-http-handler":"3.6.1","@aws-sdk/protocol-http":"3.6.1","@aws-sdk/smithy-client":"3.6.1","@aws-sdk/types":"3.6.1","@aws-sdk/url-parser":"3.6.1","@aws-sdk/url-parser-native":"3.6.1","@aws-sdk/util-base64-browser":"3.6.1","@aws-sdk/util-base64-node":"3.6.1","@aws-sdk/util-body-length-browser":"3.6.1","@aws-sdk/util-body-length-node":"3.6.1","@aws-sdk/util-user-agent-browser":"3.6.1","@aws-sdk/util-user-agent-node":"3.6.1","@aws-sdk/util-utf8-browser":"3.6.1","@aws-sdk/util-utf8-node":"3.6.1","tslib":"^2.0.0"},"devDependencies":{"@aws-sdk/client-documentation-generator":"3.6.1","@types/node":"^12.7.5","downlevel-dts":"0.7.0","jest":"^26.1.0","rimraf":"^3.0.0","typedoc":"^0.19.2","typescript":"~4.1.2"},"engines":{"node":">=10.0.0"},"typesVersions":{"<4.0":{"types/*":["types/ts3.4/*"]}},"author":{"name":"AWS SDK for JavaScript Team","url":"https://aws.amazon.com/javascript/"},"license":"Apache-2.0","homepage":"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-cloudwatch-logs","repository":{"type":"git","url":"https://github.com/aws/aws-sdk-js-v3.git","directory":"clients/client-cloudwatch-logs"}}')},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebCryptoSha256=t.Ie11Sha256=void 0,(0,n(111).__exportStar)(n(377),t);var r=n(168);Object.defineProperty(t,"Ie11Sha256",{enumerable:!0,get:function(){return r.Sha256}});var i=n(170);Object.defineProperty(t,"WebCryptoSha256",{enumerable:!0,get:function(){return i.Sha256}})},function(e){e.exports=JSON.parse('{"name":"@aws-sdk/client-location","description":"AWS SDK for JavaScript Location Client for Node.js, Browser and React Native","version":"3.186.0","scripts":{"build":"concurrently \'yarn:build:cjs\' \'yarn:build:es\' \'yarn:build:types\'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4","clean":"rimraf ./dist-* && rimraf *.tsbuildinfo"},"main":"./dist-cjs/index.js","types":"./dist-types/index.d.ts","module":"./dist-es/index.js","sideEffects":false,"dependencies":{"@aws-crypto/sha256-browser":"2.0.0","@aws-crypto/sha256-js":"2.0.0","@aws-sdk/client-sts":"3.186.0","@aws-sdk/config-resolver":"3.186.0","@aws-sdk/credential-provider-node":"3.186.0","@aws-sdk/fetch-http-handler":"3.186.0","@aws-sdk/hash-node":"3.186.0","@aws-sdk/invalid-dependency":"3.186.0","@aws-sdk/middleware-content-length":"3.186.0","@aws-sdk/middleware-host-header":"3.186.0","@aws-sdk/middleware-logger":"3.186.0","@aws-sdk/middleware-recursion-detection":"3.186.0","@aws-sdk/middleware-retry":"3.186.0","@aws-sdk/middleware-serde":"3.186.0","@aws-sdk/middleware-signing":"3.186.0","@aws-sdk/middleware-stack":"3.186.0","@aws-sdk/middleware-user-agent":"3.186.0","@aws-sdk/node-config-provider":"3.186.0","@aws-sdk/node-http-handler":"3.186.0","@aws-sdk/protocol-http":"3.186.0","@aws-sdk/smithy-client":"3.186.0","@aws-sdk/types":"3.186.0","@aws-sdk/url-parser":"3.186.0","@aws-sdk/util-base64-browser":"3.186.0","@aws-sdk/util-base64-node":"3.186.0","@aws-sdk/util-body-length-browser":"3.186.0","@aws-sdk/util-body-length-node":"3.186.0","@aws-sdk/util-defaults-mode-browser":"3.186.0","@aws-sdk/util-defaults-mode-node":"3.186.0","@aws-sdk/util-user-agent-browser":"3.186.0","@aws-sdk/util-user-agent-node":"3.186.0","@aws-sdk/util-utf8-browser":"3.186.0","@aws-sdk/util-utf8-node":"3.186.0","tslib":"^2.3.1"},"devDependencies":{"@aws-sdk/service-client-documentation-generator":"3.186.0","@tsconfig/recommended":"1.0.1","@types/node":"^12.7.5","concurrently":"7.0.0","downlevel-dts":"0.10.1","rimraf":"3.0.2","typedoc":"0.19.2","typescript":"~4.6.2"},"overrides":{"typedoc":{"typescript":"~4.6.2"}},"engines":{"node":">=12.0.0"},"typesVersions":{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},"files":["dist-*"],"author":{"name":"AWS SDK for JavaScript Team","url":"https://aws.amazon.com/javascript/"},"license":"Apache-2.0","browser":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},"homepage":"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-location","repository":{"type":"git","url":"https://github.com/aws/aws-sdk-js-v3.git","directory":"clients/client-location"}}')},function(e,t,n){"use strict";n.d(t,"a",(function(){return Ut}));var r=n(52),i=n(59),o=n(26),s=n(48),a=n(34),u=n(405),c=n(78),l=n(20),d=n(53),f=(n(69),n(15)),p=n(37),h=n(9),v=n(6),g=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s};function m(e){return"private"!==e.allow||e.provider?"public"!==e.allow||e.provider?e.provider:v.f.API_KEY:v.f.USER_POOLS}function y(e){var t=e.rules,n=e.currentUser,r=new Set;return t.forEach((function(e){switch(e.allow){case v.e.CUSTOM:e.provider&&e.provider!==v.f.FUNCTION||r.add(h.c.AWS_LAMBDA);break;case v.e.GROUPS:case v.e.OWNER:n&&(e.provider===v.f.USER_POOLS?r.add(h.c.AMAZON_COGNITO_USER_POOLS):e.provider===v.f.OIDC&&r.add(h.c.OPENID_CONNECT));break;case v.e.PRIVATE:n&&(e.provider&&e.provider!==v.f.USER_POOLS?e.provider===v.f.IAM&&r.add(h.c.AWS_IAM):r.add(h.c.AMAZON_COGNITO_USER_POOLS));break;case v.e.PUBLIC:e.provider===v.f.IAM?r.add(h.c.AWS_IAM):e.provider&&e.provider!==v.f.API_KEY||r.add(h.c.API_KEY)}})),Array.from(r)}var b=function(e){return function(t){var n=t.schema,r=t.modelName;return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(function(){var t,i,o,s,a;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(u){switch(u.label){case 0:e.Auth=e.Auth||p.a,u.label=1;case 1:return u.trys.push([1,3,,4]),[4,e.Auth.currentAuthenticatedUser()];case 2:return t=u.sent(),[3,4];case 3:return u.sent(),[3,4];case 4:return(i=n.namespaces.user.models[r].attributes)&&(o=i.find((function(e){return"auth"===e.type})),null===(a=null==o?void 0:o.properties)||void 0===a?void 0:a.rules)?(c=o.properties.rules,l=[v.e.CUSTOM,v.e.OWNER,v.e.GROUPS,v.e.PRIVATE,v.e.PUBLIC],d=[v.f.FUNCTION,v.f.USER_POOLS,v.f.OIDC,v.f.IAM,v.f.API_KEY],s=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}(c).sort((function(e,t){return e.allow===t.allow?d.indexOf(m(e))-d.indexOf(m(t)):l.indexOf(e.allow)-l.indexOf(t.allow)})),[2,y({currentUser:t,rules:s})]):[2,[]]}var c,l,d}))}))}},w=function(){return[]},_=n(11),S=n(158),E=function(){function e(){this._queue=[],this._pending=!1}return e.prototype.isLocked=function(){return this._pending},e.prototype.acquire=function(){var e=this,t=new Promise((function(t){return e._queue.push(t)}));return this._pending||this._dispatchNext(),t},e.prototype.runExclusive=function(e){return this.acquire().then((function(t){var n;try{n=e()}catch(e){throw t(),e}return Promise.resolve(n).then((function(e){return t(),e}),(function(e){throw t(),e}))}))},e.prototype._dispatchNext=function(){this._queue.length>0?(this._pending=!0,this._queue.shift()(this._dispatchNext.bind(this))):this._pending=!1},e}(),C=n(189),A=n.n(C),O=n(4),I=n(8);let T,x;const P=new WeakMap,k=new WeakMap,D=new WeakMap,N=new WeakMap,L=new WeakMap;let M={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return k.get(e);if("objectStoreNames"===t)return e.objectStoreNames||D.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return R(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function j(e){return"function"==typeof e?function(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(x||(x=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(U(this),t),R(P.get(this))}:function(...t){return R(e.apply(U(this),t))}:function(t,...n){const r=e.call(U(this),t,...n);return D.set(r,t.sort?t.sort():[t]),R(r)}}(e):(e instanceof IDBTransaction&&function(e){if(k.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));k.set(e,t)}(e),t=e,(T||(T=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,M):e);var t}function R(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(R(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&P.set(t,e)})).catch((()=>{})),L.set(t,e),t}(e);if(N.has(e))return N.get(e);const t=j(e);return t!==e&&(N.set(e,t),L.set(t,e)),t}const U=e=>L.get(e);function B(e,t,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(e,t),a=R(s);return r&&s.addEventListener("upgradeneeded",(e=>{r(R(s.result),e.oldVersion,e.newVersion,R(s.transaction))})),n&&s.addEventListener("blocked",(()=>n())),a.then((e=>{o&&e.addEventListener("close",(()=>o())),i&&e.addEventListener("versionchange",(()=>i()))})).catch((()=>{})),a}function F(e,{blocked:t}={}){const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",(()=>t())),R(n).then((()=>{}))}const z=["get","getKey","getAll","getAllKeys","count"],q=["put","add","delete","clear"],$=new Map;function K(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if($.get(t))return $.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=q.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!z.includes(n))return;const o=async function(e,...t){const o=this.transaction(e,i?"readwrite":"readonly");let s=o.store;r&&(s=s.index(t.shift()));const a=await s[n](...t);return i&&await o.done,a};return $.set(t,o),o}function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}M=(e=>({...e,get:(t,n,r)=>K(t,n)||e.get(t,n,r),has:(t,n)=>!!K(t,n)||e.has(t,n)}))(M);var G=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},H=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},W=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"==typeof Y?Y(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,i,(t=e[n](t)).done,t.value)}))}}},J=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},Y=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Z=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(J(arguments[t]));return e},Q=new s.a("DataStore"),X=new(function(){function e(){var e=this;this.dbName="amplify-datastore",this.safariCompatabilityMode=!1,this.canonicalKeyPath=function(t){return e.safariCompatabilityMode?t.length>1?t:t[0]:t}}return e.prototype.getStorenameForModel=function(e){var t=this.namespaceResolver(e),n=e.name;return Object(O.u)(t,n)},e.prototype.getIndexKeyValuesFromModel=function(e){var t=Object.getPrototypeOf(e).constructor,n=this.namespaceResolver(t),r=Object(O.s)(this.schema.namespaces[n],t.name);return Object(O.n)(e,r)},e.prototype.checkPrivate=function(){return G(this,void 0,void 0,(function(){return H(this,(function(e){switch(e.label){case 0:return[4,Object(O.J)().then((function(e){return e}))];case 1:return e.sent()?(Q.error("IndexedDB not supported in this browser's private mode"),[2,Promise.reject("IndexedDB not supported in this browser's private mode")]):[2,Promise.resolve()]}}))}))},e.prototype.setSafariCompatabilityMode=function(){return G(this,void 0,void 0,(function(){var e;return H(this,(function(t){switch(t.label){case 0:return e=this,[4,Object(O.K)()];case 1:return e.safariCompatabilityMode=t.sent(),!0===this.safariCompatabilityMode&&Q.debug("IndexedDB Adapter is running in Safari Compatability Mode"),[2]}}))}))},e.prototype.getNamespaceAndModelFromStorename=function(e){var t=J(e.split("_"));return{namespaceName:t[0],modelName:t.slice(1).join("_")}},e.prototype.setUp=function(e,t,n,r,i){return G(this,void 0,void 0,(function(){var o,s,a=this;return H(this,(function(u){switch(u.label){case 0:return[4,this.checkPrivate()];case 1:return u.sent(),[4,this.setSafariCompatabilityMode()];case 2:return u.sent(),this.initPromise?[3,3]:(this.initPromise=new Promise((function(e,t){a.resolve=e,a.reject=t})),[3,5]);case 3:return[4,this.initPromise];case 4:u.sent(),u.label=5;case 5:i&&(this.dbName="amplify-datastore-"+i),this.schema=e,this.namespaceResolver=t,this.modelInstanceCreator=n,this.getModelConstructorByModelName=r,u.label=6;case 6:return u.trys.push([6,9,,10]),this.db?[3,8]:(o=this,[4,B(this.dbName,3,{upgrade:function(t,n,r,i){return G(a,void 0,void 0,(function(){var o,s,a,u,c,l,d,f,p,h,v,g,m,y,b,w=this;return H(this,(function(_){switch(_.label){case 0:if(0===n)return Object.keys(e.namespaces).forEach((function(n){var r=e.namespaces[n];Object.keys(r.models).forEach((function(e){var r=Object(O.u)(n,e);w.createObjectStoreForModel(t,n,r,e)}))})),[2];if(1!==n&&2!==n||3!==r)return[3,16];_.label=1;case 1:_.trys.push([1,14,,15]),_.label=2;case 2:_.trys.push([2,11,12,13]),o=Y(i.objectStoreNames),s=o.next(),_.label=3;case 3:return s.done?[3,10]:(a=s.value,u=i.objectStore(a),c="tmp_"+a,u.name=c,l=this.getNamespaceAndModelFromStorename(a),d=l.namespaceName,f=l.modelName,p=this.createObjectStoreForModel(t,d,a,f),[4,u.openCursor()]);case 4:h=_.sent(),v=0,_.label=5;case 5:return h&&h.value?[4,p.put(h.value)]:[3,8];case 6:return _.sent(),[4,h.continue()];case 7:return h=_.sent(),v++,[3,5];case 8:t.deleteObjectStore(c),Q.debug(v+" "+a+" records migrated"),_.label=9;case 9:return s=o.next(),[3,3];case 10:return[3,13];case 11:return g=_.sent(),y={error:g},[3,13];case 12:try{s&&!s.done&&(b=o.return)&&b.call(o)}finally{if(y)throw y.error}return[7];case 13:return Object.keys(e.namespaces).forEach((function(n){var r=e.namespaces[n],o=new Set(i.objectStoreNames);Object.keys(r.models).map((function(e){return[e,Object(O.u)(n,e)]})).filter((function(e){var t=J(e,2)[1];return!o.has(t)})).forEach((function(e){var r=J(e,2),i=r[0],o=r[1];w.createObjectStoreForModel(t,n,o,i)}))})),[3,15];case 14:throw m=_.sent(),Q.error("Error migrating IndexedDB data",m),i.abort(),m;case 15:case 16:return[2]}}))}))}})]);case 7:o.db=u.sent(),this.resolve(),u.label=8;case 8:return[3,10];case 9:return s=u.sent(),this.reject(s),[3,10];case 10:return[2]}}))}))},e.prototype._get=function(e,t){return G(this,void 0,void 0,(function(){var n,r;return H(this,(function(i){switch(i.label){case 0:return"string"==typeof e?(r=e,n=this.db.transaction(r,"readonly").store.index("byPk")):n=e.index("byPk"),[4,n.get(this.canonicalKeyPath(t))];case 1:return[2,i.sent()]}}))}))},e.prototype.save=function(e,t){var n,r;return G(this,void 0,void 0,(function(){var i,o,s,a,u,c,l,d,f,p,h,g,m,y,b,w,S,E,C,A,I,T,x,P,k,D,N,L,M,j=this;return H(this,(function(R){switch(R.label){case 0:return[4,this.checkPrivate()];case 1:return R.sent(),i=Object.getPrototypeOf(e).constructor,o=this.getStorenameForModel(i),s=this.namespaceResolver(i),a=Object(O.Q)(i.name,e,this.schema.namespaces[s],this.modelInstanceCreator,this.getModelConstructorByModelName),u=new Set,c=Object.values(a).map((function(e){var t=e.modelName,n=e.item,r=e.instance,i=Object(O.u)(s,t);return u.add(i),{storeName:i,item:n,instance:r,keys:Object(O.s)(j.schema.namespaces[s],t)}})),l=this.db.transaction(Z([o],Array.from(u.values())),"readwrite"),d=l.objectStore(o),f=this.getIndexKeyValuesFromModel(e),[4,this._get(d,f)];case 2:if(p=R.sent(),t&&p&&(h=_.a.getPredicates(t),g=h.predicates,m=h.type,!Object(O.R)(p,m,g)))throw y="Conditional update failed",Q.error(y,{model:p,condition:g}),new Error(y);b=[],R.label=3;case 3:R.trys.push([3,11,12,17]),w=W(c),R.label=4;case 4:return[4,w.next()];case 5:return(S=R.sent()).done?[3,10]:(E=S.value,C=E.storeName,A=E.item,I=E.instance,T=E.keys,x=l.objectStore(C),P=T.map((function(e){return A[e]})),[4,this._get(x,P)]);case 6:return k=R.sent(),D=void 0===k?v.h.INSERT:v.h.UPDATE,N=this.getIndexKeyValuesFromModel(e),Object(O.L)(P,N)||D===v.h.INSERT?[4,x.index("byPk").getKey(this.canonicalKeyPath(P))]:[3,9];case 7:return L=R.sent(),[4,x.put(A,L)];case 8:R.sent(),b.push([I,D]),R.label=9;case 9:return[3,4];case 10:return[3,17];case 11:return M=R.sent(),n={error:M},[3,17];case 12:return R.trys.push([12,,15,16]),S&&!S.done&&(r=w.return)?[4,r.call(w)]:[3,14];case 13:R.sent(),R.label=14;case 14:return[3,16];case 15:if(n)throw n.error;return[7];case 16:return[7];case 17:return[4,l.done];case 18:return R.sent(),[2,b]}}))}))},e.prototype.load=function(e,t,n){var r,i,o,s,a,u,c,l,d,f;return G(this,void 0,void 0,(function(){var p,h,v,g,m,y,b,w,_,S,E,C,A,I,T,x,P,k,D,N,L,M,j,R=this;return H(this,(function(U){switch(U.label){case 0:if(p=this.schema.namespaces[e],h=p.relationships[t].relationTypes,v=h.map((function(t){var n=t.modelName;return Object(O.u)(e,n)})),g=this.getModelConstructorByModelName(e,t),0===v.length)return[2,n.map((function(e){return R.modelInstanceCreator(g,e)}))];m=this.db.transaction(Z(v),"readonly"),U.label=1;case 1:U.trys.push([1,38,39,44]),y=W(h),U.label=2;case 2:return[4,y.next()];case 3:if((b=U.sent()).done)return[3,37];switch(w=b.value,_=w.fieldName,S=w.modelName,E=w.targetName,C=w.targetNames,A=Object(O.u)(e,S),I=m.objectStore(A),T=this.getModelConstructorByModelName(e,S),w.relationType){case"HAS_ONE":return[3,4];case"BELONGS_TO":return[3,19];case"HAS_MANY":return[3,34]}return[3,35];case 4:U.trys.push([4,12,13,18]),r=W(n),U.label=5;case 5:return[4,r.next()];case 6:return(i=U.sent()).done?[3,11]:(k=i.value,(null==C?void 0:C.length)?C.every((function(e){return null!=k[e]}))?(D=C.map((function(e){return k[e]})),[4,this._get(I,D)]):[3,11]:[3,8]);case 7:return L=U.sent(),k[_]=L&&this.modelInstanceCreator(T,L),[3,10];case 8:return x=k[E]?E:_,k[x]?(N=[k[x]],[4,this._get(I,N)]):[3,11];case 9:L=U.sent(),k[_]=L&&this.modelInstanceCreator(T,L),U.label=10;case 10:return[3,5];case 11:return[3,18];case 12:return P=U.sent(),c={error:P},[3,18];case 13:return U.trys.push([13,,16,17]),i&&!i.done&&(l=r.return)?[4,l.call(r)]:[3,15];case 14:U.sent(),U.label=15;case 15:return[3,17];case 16:if(c)throw c.error;return[7];case 17:return[7];case 18:return[3,36];case 19:U.trys.push([19,27,28,33]),o=W(n),U.label=20;case 20:return[4,o.next()];case 21:return(s=U.sent()).done?[3,26]:(k=s.value,(null==C?void 0:C.length)?C.every((function(e){return null!=k[e]}))?(D=C.map((function(e){return k[e]})),[4,this._get(I,D)]):[3,26]:[3,23]);case 22:return L=U.sent(),k[_]=L&&this.modelInstanceCreator(T,L),null==C||C.map((function(e){delete k[e]})),[3,25];case 23:return k[E]?(N=[k[E]],[4,this._get(I,N)]):[3,25];case 24:L=U.sent(),k[_]=L&&this.modelInstanceCreator(T,L),delete k[E],U.label=25;case 25:return[3,20];case 26:return[3,33];case 27:return M=U.sent(),d={error:M},[3,33];case 28:return U.trys.push([28,,31,32]),s&&!s.done&&(f=o.return)?[4,f.call(o)]:[3,30];case 29:U.sent(),U.label=30;case 30:return[3,32];case 31:if(d)throw d.error;return[7];case 32:return[7];case 33:case 34:return[3,36];case 35:return Object(O.l)(w.relationType),[3,36];case 36:return[3,2];case 37:return[3,44];case 38:return j=U.sent(),a={error:j},[3,44];case 39:return U.trys.push([39,,42,43]),b&&!b.done&&(u=y.return)?[4,u.call(y)]:[3,41];case 40:U.sent(),U.label=41;case 41:return[3,43];case 42:if(a)throw a.error;return[7];case 43:return[7];case 44:return[2,n.map((function(e){return R.modelInstanceCreator(g,e)}))]}}))}))},e.prototype.query=function(e,t,n){return G(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,l,d=this;return H(this,(function(f){switch(f.label){case 0:return[4,this.checkPrivate()];case 1:return f.sent(),r=this.getStorenameForModel(e),i=this.namespaceResolver(e),o=t&&_.a.getPredicates(t),s=Object(O.s)(this.schema.namespaces[i],e.name),a=o&&this.keyValueFromPredicate(o,s),u=n&&n.sort,c=n&&n.limit,[4,G(d,void 0,void 0,(function(){var e,t,i;return H(this,(function(s){switch(s.label){case 0:return a?[4,this.getByKey(r,a)]:[3,2];case 1:return[2,(e=s.sent())?[e]:[]];case 2:return o?[4,this.filterOnPredicate(r,o)]:[3,4];case 3:return t=s.sent(),[2,this.inMemoryPagination(t,n)];case 4:return u?[4,this.getAll(r)]:[3,6];case 5:return i=s.sent(),[2,this.inMemoryPagination(i,n)];case 6:return c?[2,this.enginePagination(r,n)]:[2,this.getAll(r)]}}))}))];case 2:return l=f.sent(),[4,this.load(i,e.name,l)];case 3:return[2,f.sent()]}}))}))},e.prototype.getByKey=function(e,t){return G(this,void 0,void 0,(function(){return H(this,(function(n){switch(n.label){case 0:return[4,this._get(e,t)];case 1:return[2,n.sent()]}}))}))},e.prototype.getAll=function(e){return G(this,void 0,void 0,(function(){return H(this,(function(t){switch(t.label){case 0:return[4,this.db.getAll(e)];case 1:return[2,t.sent()]}}))}))},e.prototype.keyValueFromPredicate=function(e,t){var n,r,i=e.predicates;if(i.length===t.length){var o=[],s=function(e){var t=i.find((function(t){return Object(v.u)(t)&&t.field===e&&"eq"===t.operator}));t&&o.push(t.operand)};try{for(var a=Y(t),u=a.next();!u.done;u=a.next())s(u.value)}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return o.length===t.length?o:void 0}},e.prototype.filterOnPredicate=function(e,t){return G(this,void 0,void 0,(function(){var n,r,i;return H(this,(function(o){switch(o.label){case 0:return n=t.predicates,r=t.type,[4,this.getAll(e)];case 1:return i=o.sent(),[2,n?i.filter((function(e){return Object(O.R)(e,r,n)})):i]}}))}))},e.prototype.inMemoryPagination=function(e,t){if(t&&e.length>1){if(t.sort){var n=S.a.getPredicates(t.sort);if(n.length){var r=Object(O.P)(n);e.sort(r)}}var i=t.page,o=void 0===i?0:i,s=t.limit,a=void 0===s?0:s,u=Math.max(0,o*a)||0,c=a>0?u+a:e.length;return e.slice(u,c)}return e},e.prototype.enginePagination=function(e,t){return G(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l;return H(this,(function(d){switch(d.label){case 0:return t?(r=t.page,i=void 0===r?0:r,o=t.limit,s=void 0===o?0:o,a=Math.max(0,i*s)||0,[4,this.db.transaction(e).objectStore(e).openCursor()]):[3,7];case 1:return(u=d.sent())&&a>0?[4,u.advance(a)]:[3,3];case 2:d.sent(),d.label=3;case 3:c=[],l="number"==typeof s&&s>0,d.label=4;case 4:return u&&u.value?(c.push(u.value),l&&c.length===s?[3,6]:[4,u.continue()]):[3,6];case 5:return u=d.sent(),[3,4];case 6:return n=c,[3,9];case 7:return[4,this.db.getAll(e)];case 8:n=d.sent(),d.label=9;case 9:return[2,n]}}))}))},e.prototype.queryOne=function(e,t){return void 0===t&&(t=v.j.FIRST),G(this,void 0,void 0,(function(){var n,r,i;return H(this,(function(o){switch(o.label){case 0:return[4,this.checkPrivate()];case 1:return o.sent(),n=this.getStorenameForModel(e),[4,this.db.transaction([n],"readonly").objectStore(n).openCursor(void 0,t===v.j.FIRST?"next":"prev")];case 2:return r=o.sent(),[2,(i=r?r.value:void 0)&&this.modelInstanceCreator(e,i)]}}))}))},e.prototype.delete=function(e,t){return G(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,d,f,p,h,v,g,m,y;return H(this,(function(b){switch(b.label){case 0:return[4,this.checkPrivate()];case 1:return b.sent(),n=[],Object(O.H)(e)?(s=e,r=this.namespaceResolver(s),u=this.getStorenameForModel(s),[4,this.query(s,t)]):[3,9];case 2:return i=b.sent(),m=this.schema.namespaces[r].relationships[s.name].relationTypes,void 0===t?[3,5]:[4,this.deleteTraverse(m,i,s.name,r,n)];case 3:return b.sent(),[4,this.deleteItem(n)];case 4:return b.sent(),y=n.reduce((function(e,t){var n=t.items;return e.concat(n)}),[]),[2,[i,y]];case 5:return[4,this.deleteTraverse(m,i,s.name,r,n)];case 6:return b.sent(),[4,this.db.transaction([u],"readwrite").objectStore(u).clear()];case 7:return b.sent(),y=n.reduce((function(e,t){var n=t.items;return e.concat(n)}),[]),[2,[i,y]];case 8:return[3,17];case 9:return o=e,s=Object.getPrototypeOf(o).constructor,a=this.namespaceResolver(s),u=this.getStorenameForModel(s),t?(c=this.db.transaction([u],"readwrite"),l=c.objectStore(u),d=this.getIndexKeyValuesFromModel(o),[4,this._get(l,d)]):[3,13];case 10:if(void 0===(f=b.sent()))return g="Model instance not found in storage",Q.warn(g,{model:o}),[2,[[o],[]]];if(p=_.a.getPredicates(t),h=p.predicates,v=p.type,!Object(O.R)(f,v,h))throw g="Conditional update failed",Q.error(g,{model:f,condition:h}),new Error(g);return[4,c.done];case 11:return b.sent(),m=this.schema.namespaces[a].relationships[s.name].relationTypes,[4,this.deleteTraverse(m,[o],s.name,a,n)];case 12:return b.sent(),[3,15];case 13:return m=this.schema.namespaces[a].relationships[s.name].relationTypes,[4,this.deleteTraverse(m,[o],s.name,a,n)];case 14:b.sent(),b.label=15;case 15:return[4,this.deleteItem(n)];case 16:return b.sent(),y=n.reduce((function(e,t){var n=t.items;return e.concat(n)}),[]),[2,[[o],y]];case 17:return[2]}}))}))},e.prototype.deleteItem=function(e){var t,n,r,i,o,s;return G(this,void 0,void 0,(function(){var a,u,c,l,d,f,p,h,v,g,m,y,b,w;return H(this,(function(_){switch(_.label){case 0:a=e.map((function(e){return e.storeName})),u=this.db.transaction(Z(a),"readwrite"),_.label=1;case 1:_.trys.push([1,22,23,28]),t=W(e),_.label=2;case 2:return[4,t.next()];case 3:if((n=_.sent()).done)return[3,21];c=n.value,l=c.storeName,d=c.items,f=u.objectStore(l),_.label=4;case 4:_.trys.push([4,14,15,20]),p=W(d),_.label=5;case 5:return[4,p.next()];case 6:return(h=_.sent()).done?[3,13]:(v=h.value)?(g=void 0,"object"!==V(v)?[3,8]:(m=this.getIndexKeyValuesFromModel(v),[4,f.index("byPk").getKey(this.canonicalKeyPath(m))])):[3,12];case 7:return g=_.sent(),[3,10];case 8:return y=v.toString(),[4,f.index("byPk").getKey(y)];case 9:g=_.sent(),_.label=10;case 10:return void 0===g?[3,12]:[4,f.delete(g)];case 11:_.sent(),_.label=12;case 12:return[3,5];case 13:return[3,20];case 14:return b=_.sent(),o={error:b},[3,20];case 15:return _.trys.push([15,,18,19]),h&&!h.done&&(s=p.return)?[4,s.call(p)]:[3,17];case 16:_.sent(),_.label=17;case 17:return[3,19];case 18:if(o)throw o.error;return[7];case 19:return[7];case 20:return[3,2];case 21:return[3,28];case 22:return w=_.sent(),r={error:w},[3,28];case 23:return _.trys.push([23,,26,27]),n&&!n.done&&(i=t.return)?[4,i.call(t)]:[3,25];case 24:_.sent(),_.label=25;case 25:return[3,27];case 26:if(r)throw r.error;return[7];case 27:return[7];case 28:return[2]}}))}))},e.prototype.deleteTraverse=function(e,t,n,r,i){var o,s,a,u,c,l,d,f,p,h,v,g;return G(this,void 0,void 0,(function(){var m,y,b,w,_,S,E,C,A,I,T,x,P,k,D,N,L,M,j=this;return H(this,(function(R){switch(R.label){case 0:R.trys.push([0,38,39,44]),o=W(e),R.label=1;case 1:return[4,o.next()];case 2:if((s=R.sent()).done)return[3,37];switch(m=s.value,y=m.relationType,b=m.modelName,w=m.targetName,_=m.targetNames,S=m.associatedWith,E=Object(O.u)(r,b),y){case"HAS_ONE":return[3,3];case"HAS_MANY":return[3,20];case"BELONGS_TO":return[3,34]}return[3,35];case 3:R.trys.push([3,13,14,19]),a=W(t),R.label=4;case 4:return[4,a.next()];case 5:return(u=R.sent()).done?[3,12]:(P=u.value,C="byPk",(null==_?void 0:_.length)?0===(A=_.map((function(e){return P[e]}))).length?[3,12]:[4,this.db.transaction(E,"readwrite").objectStore(E).index(C).get(this.canonicalKeyPath(A))]:[3,8]);case 6:return T=R.sent(),[4,this.deleteTraverse(this.schema.namespaces[r].relationships[b].relationTypes,T?[T]:[],b,r,i)];case 7:return R.sent(),[3,12];case 8:return k=void 0,A=void 0,w&&w in P?(k=C,I=P[w],A=[I]):(k=Object(O.q)(this.schema.namespaces[r].relationships[b].relationTypes,n),A=this.getIndexKeyValuesFromModel(P)),A&&k?[4,this.db.transaction(E,"readwrite").objectStore(E).index(k).get(this.canonicalKeyPath(A))]:[3,12];case 9:return T=R.sent(),[4,this.deleteTraverse(this.schema.namespaces[r].relationships[b].relationTypes,T?[T]:[],b,r,i)];case 10:R.sent(),R.label=11;case 11:return[3,4];case 12:return[3,19];case 13:return x=R.sent(),p={error:x},[3,19];case 14:return R.trys.push([14,,17,18]),u&&!u.done&&(h=a.return)?[4,h.call(a)]:[3,16];case 15:R.sent(),R.label=16;case 16:return[3,18];case 17:if(p)throw p.error;return[7];case 18:return[7];case 19:return[3,36];case 20:R.trys.push([20,27,28,33]),c=W(t),R.label=21;case 21:return[4,c.next()];case 22:return(l=R.sent()).done?[3,26]:(P=l.value,k=Object(O.q)(this.schema.namespaces[r].relationships[b].relationTypes,n)||Object(O.r)(this.schema.namespaces[r].relationships[b].indexes,S),D=this.getIndexKeyValuesFromModel(P),[4,this.db.transaction(E,"readwrite").objectStore(E).index(k).getAll(this.canonicalKeyPath(D))]);case 23:return N=R.sent(),[4,this.deleteTraverse(this.schema.namespaces[r].relationships[b].relationTypes,N,b,r,i)];case 24:R.sent(),R.label=25;case 25:return[3,21];case 26:return[3,33];case 27:return L=R.sent(),v={error:L},[3,33];case 28:return R.trys.push([28,,31,32]),l&&!l.done&&(g=c.return)?[4,g.call(c)]:[3,30];case 29:R.sent(),R.label=30;case 30:return[3,32];case 31:if(v)throw v.error;return[7];case 32:return[7];case 33:case 34:return[3,36];case 35:return Object(O.l)(y),[3,36];case 36:return[3,1];case 37:return[3,44];case 38:return M=R.sent(),d={error:M},[3,44];case 39:return R.trys.push([39,,42,43]),s&&!s.done&&(f=o.return)?[4,f.call(o)]:[3,41];case 40:R.sent(),R.label=41;case 41:return[3,43];case 42:if(d)throw d.error;return[7];case 43:return[7];case 44:return i.push({storeName:Object(O.u)(r,n),items:t.map((function(e){return j.modelInstanceCreator(j.getModelConstructorByModelName(r,n),e)}))}),[2]}}))}))},e.prototype.clear=function(){var e;return G(this,void 0,void 0,(function(){return H(this,(function(t){switch(t.label){case 0:return[4,this.checkPrivate()];case 1:return t.sent(),null===(e=this.db)||void 0===e||e.close(),[4,F(this.dbName)];case 2:return t.sent(),this.db=void 0,this.initPromise=void 0,[2]}}))}))},e.prototype.batchSave=function(e,t){return G(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,d,f,p,h=this;return H(this,(function(g){switch(g.label){case 0:return 0===t.length?[2,[]]:[4,this.checkPrivate()];case 1:g.sent(),n=[],r=this.getStorenameForModel(e),i=this.db.transaction(r,"readwrite"),o=i.store,s=function(t){var r,i,s,u,c,l,d,f;return H(this,(function(p){switch(p.label){case 0:return r=a.namespaceResolver(e),i=e.name,s=a.modelInstanceCreator(e,t),u=Object(O.Q)(i,s,a.schema.namespaces[r],a.modelInstanceCreator,a.getModelConstructorByModelName),c=a.getIndexKeyValuesFromModel(s),l=t._deleted,[4,o.index("byPk").getKey(a.canonicalKeyPath(c))];case 1:return d=p.sent(),l?[3,3]:(f=u.find((function(e){var t=e.instance,n=h.getIndexKeyValuesFromModel(t);return Object(O.L)(n,c)})).instance,n.push([f,d?v.h.UPDATE:v.h.INSERT]),[4,o.put(f,d)]);case 2:return p.sent(),[3,5];case 3:return n.push([t,v.h.DELETE]),d?[4,o.delete(d)]:[3,5];case 4:p.sent(),p.label=5;case 5:return[2]}}))},a=this,g.label=2;case 2:g.trys.push([2,7,8,9]),u=Y(t),c=u.next(),g.label=3;case 3:return c.done?[3,6]:(l=c.value,[5,s(l)]);case 4:g.sent(),g.label=5;case 5:return c=u.next(),[3,3];case 6:return[3,9];case 7:return d=g.sent(),f={error:d},[3,9];case 8:try{c&&!c.done&&(p=u.return)&&p.call(u)}finally{if(f)throw f.error}return[7];case 9:return[4,i.done];case 10:return g.sent(),[2,n]}}))}))},e.prototype.createObjectStoreForModel=function(e,t,n,r){var i=e.createObjectStore(n,{autoIncrement:!0});return this.schema.namespaces[t].relationships[r].indexes.forEach((function(e){var t=J(e,3),n=t[0],r=t[1],o=t[2];i.createIndex(n,r,o)})),i},e}()),ee=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},te=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},ne=function(){var e=this;this.db=new Map,this.getAllKeys=function(){return ee(e,void 0,void 0,(function(){return te(this,(function(e){return[2,Array.from(this.db.keys())]}))}))},this.multiGet=function(t){return ee(e,void 0,void 0,(function(){var e=this;return te(this,(function(n){return[2,t.reduce((function(t,n){return t.push([n,e.db.get(n)]),t}),[])]}))}))},this.multiRemove=function(t,n){return ee(e,void 0,void 0,(function(){var e=this;return te(this,(function(r){return t.forEach((function(t){return e.db.delete(t)})),"function"==typeof n&&n(),[2]}))}))},this.multiSet=function(t,n){return ee(e,void 0,void 0,(function(){var e=this;return te(this,(function(r){return t.forEach((function(t){var n=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}(t,2),r=n[0],i=n[1];e.setItem(r,i)})),"function"==typeof n&&n(),[2]}))}))},this.setItem=function(t,n){return ee(e,void 0,void 0,(function(){return te(this,(function(e){return[2,this.db.set(t,n)]}))}))},this.removeItem=function(t){return ee(e,void 0,void 0,(function(){return te(this,(function(e){return[2,this.db.delete(t)]}))}))},this.getItem=function(t){return ee(e,void 0,void 0,(function(){return te(this,(function(e){return[2,this.db.get(t)]}))}))}},re=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},ie=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},oe=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},se=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},ae=new Map,ue=function(){function e(){this._collectionInMemoryIndex=new Map,this.storage=new ne}return e.prototype.getCollectionIndex=function(e){return this._collectionInMemoryIndex.has(e)||this._collectionInMemoryIndex.set(e,new Map),this._collectionInMemoryIndex.get(e)},e.prototype.getMonotonicFactory=function(e){return ae.has(e)||ae.set(e,Object(O.N)()),ae.get(e)},e.prototype.init=function(){return re(this,void 0,void 0,(function(){var e,t,n,r,i,o,s,a,u,c,l,d,f,p,h,v,g,m,y,b;return ie(this,(function(w){switch(w.label){case 0:return this._collectionInMemoryIndex.clear(),[4,this.storage.getAllKeys()];case 1:e=w.sent(),t=[],w.label=2;case 2:w.trys.push([2,12,13,14]),n=oe(e),r=n.next(),w.label=3;case 3:return r.done?[3,11]:(i=r.value,o=se(i.split("::"),5),s=o[0],a=o[1],u=o[2],c=o[3],l=o[4],"@AmplifyDatastore"!==s?[3,10]:"Data"!==u?[3,9]:(d=void 0,void 0!==l?[3,7]:(f=c,p=this.getMonotonicFactory(a)(),h=this.getLegacyKeyForItem(a,f),v=this.getKeyForItem(a,f,p),[4,this.storage.getItem(h)])));case 4:return g=w.sent(),[4,this.storage.setItem(v,g)];case 5:return w.sent(),[4,this.storage.removeItem(h)];case 6:return w.sent(),d=p,[3,8];case 7:d=c,w.label=8;case 8:return this.getCollectionIndex(a).set(l,d),[3,10];case 9:"Collection"===u&&t.push(i),w.label=10;case 10:return r=n.next(),[3,3];case 11:return[3,14];case 12:return m=w.sent(),y={error:m},[3,14];case 13:try{r&&!r.done&&(b=n.return)&&b.call(n)}finally{if(y)throw y.error}return[7];case 14:return t.length>0?[4,this.storage.multiRemove(t)]:[3,16];case 15:w.sent(),w.label=16;case 16:return[2]}}))}))},e.prototype.save=function(e,t,n,r){return re(this,void 0,void 0,(function(){var i,o,s;return ie(this,(function(a){switch(a.label){case 0:return i=Object(O.v)(n),o=this.getCollectionIndex(t).get(i)||this.getMonotonicFactory(t)(),s=this.getKeyForItem(t,r,o),this.getCollectionIndex(t).set(r,o),[4,this.storage.setItem(s,JSON.stringify(e))];case 1:return a.sent(),[2]}}))}))},e.prototype.batchSave=function(e,t,n){return re(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,l,d,f,p,h,g,m,y,b,w,_,S,E,C=this;return ie(this,(function(A){switch(A.label){case 0:if(0===t.length)return[2,[]];r=[],i=this.getCollectionIndex(e),o=new Set,s=new Set,a=[],u={},c=function(t){var r=n.map((function(e){return t[e]})),c=t._deleted,d=i.get(r.join(O.b))||l.getMonotonicFactory(e)(),f=l.getKeyForItem(e,r.join(O.b),d);a.push(f),u[f]={ulid:d,model:t},c?o.add(f):s.add(f)},l=this;try{for(d=oe(t),f=d.next();!f.done;f=d.next())p=f.value,c(p)}catch(e){w={error:e}}finally{try{f&&!f.done&&(_=d.return)&&_.call(d)}finally{if(w)throw w.error}}return[4,this.storage.multiGet(a)];case 1:return h=A.sent(),g=h.filter((function(e){return!!se(e,2)[1]})).reduce((function(e,t){var n=se(t,1)[0];return e.add(n)}),new Set),[4,new Promise((function(e,t){if(0!==o.size){var r=Array.from(o);r.forEach((function(e){var t=n.map((function(t){return u[e].model[t]})).join(O.b);i.delete(t)})),C.storage.multiRemove(r,(function(n){n&&n.length>0?t(n):e()}))}else e()}))];case 2:return A.sent(),[4,new Promise((function(e,t){if(0!==s.size){var r=Array.from(s).map((function(e){return[e,JSON.stringify(u[e].model)]}));s.forEach((function(e){var t=u[e],r=t.model,o=t.ulid,s=n.map((function(e){return r[e]})).join(O.b);i.set(s,o)})),C.storage.multiSet(r,(function(n){n&&n.length>0?t(n):e()}))}else e()}))];case 3:A.sent();try{for(m=oe(a),y=m.next();!y.done;y=m.next())b=y.value,o.has(b)&&g.has(b)?r.push([u[b].model,v.h.DELETE]):s.has(b)&&r.push([u[b].model,g.has(b)?v.h.UPDATE:v.h.INSERT])}catch(e){S={error:e}}finally{try{y&&!y.done&&(E=m.return)&&E.call(m)}finally{if(S)throw S.error}}return[2,r]}}))}))},e.prototype.get=function(e,t){return re(this,void 0,void 0,(function(){var n,r,i;return ie(this,(function(o){switch(o.label){case 0:return n=this.getCollectionIndex(t).get(e),r=this.getKeyForItem(t,e,n),[4,this.storage.getItem(r)];case 1:return[2,(i=o.sent())&&JSON.parse(i)]}}))}))},e.prototype.getOne=function(e,t){return re(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return ie(this,(function(c){switch(c.label){case 0:return n=this.getCollectionIndex(t),r=se(e===v.j.FIRST?function(){var e,t,r,i,o;try{for(var s=oe(n),a=s.next();!a.done;a=s.next()){i=(r=se(a.value,2))[0],o=r[1];break}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return[i,o]}():function(){var e,t,r,i,o;try{for(var s=oe(n),a=s.next();!a.done;a=s.next())i=(r=se(a.value,2))[0],o=r[1]}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return[i,o]}(),2),i=r[0],o=r[1],s=this.getKeyForItem(t,i,o),(u=s)?[4,this.storage.getItem(s)]:[3,2];case 1:u=c.sent(),c.label=2;case 2:return[2,(a=u)&&JSON.parse(a)||void 0]}}))}))},e.prototype.getAll=function(e,t){return re(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,d,f,p,h,v,g,m,y;return ie(this,(function(b){switch(b.label){case 0:n=this.getCollectionIndex(e),i=(r=t||{}).page,o=void 0===i?0:i,s=r.limit,a=void 0===s?0:s,u=Math.max(0,o*a)||0,c=a>0?u+a:void 0,l=[],d=0;try{for(f=oe(n),p=f.next();!p.done&&(h=se(p.value,2),v=h[0],g=h[1],++d<=u||(l.push(this.getKeyForItem(e,v,g)),d!==c));p=f.next());}catch(e){m={error:e}}finally{try{p&&!p.done&&(y=f.return)&&y.call(f)}finally{if(m)throw m.error}}return[4,this.storage.multiGet(l)];case 1:return[2,b.sent().filter((function(e){return se(e,2)[1]})).map((function(e){var t=se(e,2)[1];return JSON.parse(t)}))]}}))}))},e.prototype.delete=function(e,t){return re(this,void 0,void 0,(function(){var n,r;return ie(this,(function(i){switch(i.label){case 0:return n=this.getCollectionIndex(t).get(e),r=this.getKeyForItem(t,e,n),this.getCollectionIndex(t).delete(e),[4,this.storage.removeItem(r)];case 1:return i.sent(),[2]}}))}))},e.prototype.clear=function(){return re(this,void 0,void 0,(function(){var e,t;return ie(this,(function(n){switch(n.label){case 0:return[4,this.storage.getAllKeys()];case 1:return e=n.sent(),t=e.filter((function(e){return e.startsWith("@AmplifyDatastore")})),[4,this.storage.multiRemove(t)];case 2:return n.sent(),this._collectionInMemoryIndex.clear(),[2]}}))}))},e.prototype.getKeyForItem=function(e,t,n){return this.getKeyPrefixForStoreItems(e)+"::"+n+"::"+t},e.prototype.getLegacyKeyForItem=function(e,t){return this.getKeyPrefixForStoreItems(e)+"::"+t},e.prototype.getKeyPrefixForStoreItems=function(e){return"@AmplifyDatastore::"+e+"::Data"},e}();function ce(e){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var le,de=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},fe=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},pe=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"==typeof he?he(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,i,(t=e[n](t)).done,t.value)}))}}},he=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ve=new s.a("DataStore"),ge=new(function(){function e(){}return e.prototype.getStorenameForModel=function(e){var t=this.namespaceResolver(e),n=e.name;return Object(O.u)(t,n)},e.prototype.getIndexKeyValuesFromModel=function(e){var t=Object.getPrototypeOf(e).constructor,n=this.namespaceResolver(t),r=Object(O.s)(this.schema.namespaces[n],t.name);return Object(O.n)(e,r)},e.prototype.getIndexKeyValuesPath=function(e){return this.getIndexKeyValuesFromModel(e).join(O.b)},e.prototype.setUp=function(e,t,n,r){return de(this,void 0,void 0,(function(){var i,o=this;return fe(this,(function(s){switch(s.label){case 0:return this.initPromise?[3,1]:(this.initPromise=new Promise((function(e,t){o.resolve=e,o.reject=t})),[3,3]);case 1:return[4,this.initPromise];case 2:return s.sent(),[2];case 3:this.schema=e,this.namespaceResolver=t,this.modelInstanceCreator=n,this.getModelConstructorByModelName=r,s.label=4;case 4:return s.trys.push([4,7,,8]),this.db?[3,6]:(this.db=new ue,[4,this.db.init()]);case 5:s.sent(),this.resolve(),s.label=6;case 6:return[3,8];case 7:return i=s.sent(),this.reject(i),[3,8];case 8:return[2]}}))}))},e.prototype.save=function(e,t){var n,r;return de(this,void 0,void 0,(function(){var i,o,s,a,u,c,l,d,f,p,h,g,m,y,b,w,S,E,C,A,I,T,x,P,k,D,N=this;return fe(this,(function(L){switch(L.label){case 0:return i=Object.getPrototypeOf(e).constructor,o=this.getStorenameForModel(i),s=this.namespaceResolver(i),a=Object(O.Q)(i.name,e,this.schema.namespaces[s],this.modelInstanceCreator,this.getModelConstructorByModelName),u=new Set,c=Object.values(a).map((function(e){var t=e.modelName,n=e.item,r=e.instance,i=Object(O.u)(s,t);return u.add(i),{storeName:i,item:n,instance:r,keys:Object(O.s)(N.schema.namespaces[s],t)}})),l=this.getIndexKeyValuesPath(e),[4,this.db.get(l,o)];case 1:if(d=L.sent(),t&&d&&(f=_.a.getPredicates(t),p=f.predicates,h=f.type,!Object(O.R)(d,h,p)))throw g="Conditional update failed",ve.error(g,{model:d,condition:p}),new Error(g);m=[],L.label=2;case 2:L.trys.push([2,9,10,15]),y=pe(c),L.label=3;case 3:return[4,y.next()];case 4:return(b=L.sent()).done?[3,8]:(w=b.value,S=w.storeName,E=w.item,C=w.instance,A=w.keys,I=A.map((function(e){return E[e]})),T=I.join(O.b),[4,this.db.get(T,S)]);case 5:return x=L.sent(),P=x?v.h.UPDATE:v.h.INSERT,k=this.getIndexKeyValuesFromModel(e),Object(O.L)(I,k)||P===v.h.INSERT?[4,this.db.save(E,S,A,T)]:[3,7];case 6:L.sent(),m.push([C,P]),L.label=7;case 7:return[3,3];case 8:return[3,15];case 9:return D=L.sent(),n={error:D},[3,15];case 10:return L.trys.push([10,,13,14]),b&&!b.done&&(r=y.return)?[4,r.call(y)]:[3,12];case 11:L.sent(),L.label=12;case 12:return[3,14];case 13:if(n)throw n.error;return[7];case 14:return[7];case 15:return[2,m]}}))}))},e.prototype.load=function(e,t,n){var r,i,o,s,a,u,c,l,d,f;return de(this,void 0,void 0,(function(){var p,h,v,g,m,y,b,w,_,S,E,C,A,I,T,x,P,k,D,N,L,M,j=this;return fe(this,(function(R){switch(R.label){case 0:if(p=this.schema.namespaces[e],h=p.relationships[t].relationTypes,v=h.map((function(t){var n=t.modelName;return Object(O.u)(e,n)})),g=this.getModelConstructorByModelName(e,t),0===v.length)return[2,n.map((function(e){return j.modelInstanceCreator(g,e)}))];R.label=1;case 1:R.trys.push([1,38,39,44]),m=pe(h),R.label=2;case 2:return[4,m.next()];case 3:if((y=R.sent()).done)return[3,37];switch(b=y.value,w=b.fieldName,_=b.modelName,S=b.targetName,E=b.targetNames,C=b.relationType,A=Object(O.u)(e,_),I=this.getModelConstructorByModelName(e,_),C){case"HAS_ONE":return[3,4];case"BELONGS_TO":return[3,19];case"HAS_MANY":return[3,34]}return[3,35];case 4:R.trys.push([4,12,13,18]),r=pe(n),R.label=5;case 5:return[4,r.next()];case 6:return(i=R.sent()).done?[3,11]:(P=i.value,(null==E?void 0:E.length)?E.every((function(e){return null!=P[e]}))?(k=E.map((function(e){return P[e]})).join(O.b),[4,this.db.get(k,A)]):[3,11]:[3,8]);case 7:return N=R.sent(),P[w]=N&&this.modelInstanceCreator(I,N),[3,10];case 8:return T=P[S]?S:w,P[T]?(D=P[T],[4,this.db.get(D,A)]):[3,11];case 9:N=R.sent(),P[w]=N&&this.modelInstanceCreator(I,N),R.label=10;case 10:return[3,5];case 11:return[3,18];case 12:return x=R.sent(),c={error:x},[3,18];case 13:return R.trys.push([13,,16,17]),i&&!i.done&&(l=r.return)?[4,l.call(r)]:[3,15];case 14:R.sent(),R.label=15;case 15:return[3,17];case 16:if(c)throw c.error;return[7];case 17:return[7];case 18:return[3,36];case 19:R.trys.push([19,27,28,33]),o=pe(n),R.label=20;case 20:return[4,o.next()];case 21:return(s=R.sent()).done?[3,26]:(P=s.value,(null==E?void 0:E.length)?E.every((function(e){return null!=P[e]}))?(k=E.map((function(e){return P[e]})).join(O.b),[4,this.db.get(k,A)]):[3,26]:[3,23]);case 22:return N=R.sent(),P[w]=N&&this.modelInstanceCreator(I,N),null==E||E.map((function(e){delete P[e]})),[3,25];case 23:return P[S]?(D=P[S],[4,this.db.get(D,A)]):[3,25];case 24:N=R.sent(),P[w]=N&&this.modelInstanceCreator(I,N),delete P[S],R.label=25;case 25:return[3,20];case 26:return[3,33];case 27:return L=R.sent(),d={error:L},[3,33];case 28:return R.trys.push([28,,31,32]),s&&!s.done&&(f=o.return)?[4,f.call(o)]:[3,30];case 29:R.sent(),R.label=30;case 30:return[3,32];case 31:if(d)throw d.error;return[7];case 32:return[7];case 33:case 34:return[3,36];case 35:return Object(O.l)(C),[3,36];case 36:return[3,2];case 37:return[3,44];case 38:return M=R.sent(),a={error:M},[3,44];case 39:return R.trys.push([39,,42,43]),y&&!y.done&&(u=m.return)?[4,u.call(m)]:[3,41];case 40:R.sent(),R.label=41;case 41:return[3,43];case 42:if(a)throw a.error;return[7];case 43:return[7];case 44:return[2,n.map((function(e){return j.modelInstanceCreator(g,e)}))]}}))}))},e.prototype.query=function(e,t,n){return de(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,l,d=this;return fe(this,(function(f){switch(f.label){case 0:return r=this.getStorenameForModel(e),i=this.namespaceResolver(e),o=t&&_.a.getPredicates(t),s=Object(O.s)(this.schema.namespaces[i],e.name),a=o&&this.keyValueFromPredicate(o,s),u=n&&n.sort,c=n&&n.limit,[4,de(d,void 0,void 0,(function(){var e,t,i;return fe(this,(function(s){switch(s.label){case 0:return a?[4,this.getByKey(r,a)]:[3,2];case 1:return[2,(e=s.sent())?[e]:[]];case 2:return o?[4,this.filterOnPredicate(r,o)]:[3,4];case 3:return t=s.sent(),[2,this.inMemoryPagination(t,n)];case 4:return u||c?[4,this.getAll(r)]:[3,6];case 5:return i=s.sent(),[2,this.inMemoryPagination(i,n)];case 6:return[2,this.getAll(r)]}}))}))];case 1:return l=f.sent(),[4,this.load(i,e.name,l)];case 2:return[2,f.sent()]}}))}))},e.prototype.getByKey=function(e,t){return de(this,void 0,void 0,(function(){return fe(this,(function(n){switch(n.label){case 0:return[4,this.db.get(t,e)];case 1:return[2,n.sent()]}}))}))},e.prototype.getAll=function(e){return de(this,void 0,void 0,(function(){return fe(this,(function(t){switch(t.label){case 0:return[4,this.db.getAll(e)];case 1:return[2,t.sent()]}}))}))},e.prototype.keyValueFromPredicate=function(e,t){var n,r,i=e.predicates;if(i.length===t.length){var o=[],s=function(e){var t=i.find((function(t){return Object(v.u)(t)&&t.field===e&&"eq"===t.operator}));t&&o.push(t.operand)};try{for(var a=he(t),u=a.next();!u.done;u=a.next())s(u.value)}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return o.length===t.length?o.join(O.b):void 0}},e.prototype.filterOnPredicate=function(e,t){return de(this,void 0,void 0,(function(){var n,r,i;return fe(this,(function(o){switch(o.label){case 0:return n=t.predicates,r=t.type,[4,this.getAll(e)];case 1:return i=o.sent(),[2,n?i.filter((function(e){return Object(O.R)(e,r,n)})):i]}}))}))},e.prototype.inMemoryPagination=function(e,t){if(t&&e.length>1){if(t.sort){var n=S.a.getPredicates(t.sort);if(n.length){var r=Object(O.P)(n);e.sort(r)}}var i=t.page,o=void 0===i?0:i,s=t.limit,a=void 0===s?0:s,u=Math.max(0,o*a)||0,c=a>0?u+a:e.length;return e.slice(u,c)}return e},e.prototype.queryOne=function(e,t){return void 0===t&&(t=v.j.FIRST),de(this,void 0,void 0,(function(){var n,r;return fe(this,(function(i){switch(i.label){case 0:return n=this.getStorenameForModel(e),[4,this.db.getOne(t,n)];case 1:return[2,(r=i.sent())&&this.modelInstanceCreator(e,r)]}}))}))},e.prototype.delete=function(e,t){return de(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,d,f,p,h,v,g;return fe(this,(function(m){switch(m.label){case 0:return n=[],Object(O.H)(e)?(s=e,r=this.namespaceResolver(s),[4,this.query(s,t)]):[3,8];case 1:return i=m.sent(),v=this.schema.namespaces[r].relationships[s.name].relationTypes,void 0===t?[3,4]:[4,this.deleteTraverse(v,i,s.name,r,n)];case 2:return m.sent(),[4,this.deleteItem(n)];case 3:return m.sent(),g=n.reduce((function(e,t){var n=t.items;return e.concat(n)}),[]),[2,[i,g]];case 4:return[4,this.deleteTraverse(v,i,s.name,r,n)];case 5:return m.sent(),[4,this.deleteItem(n)];case 6:return m.sent(),g=n.reduce((function(e,t){var n=t.items;return e.concat(n)}),[]),[2,[i,g]];case 7:return[3,15];case 8:return o=e,s=Object.getPrototypeOf(o).constructor,a=this.namespaceResolver(s),u=this.getStorenameForModel(s),t?(c=this.getIndexKeyValuesPath(o),[4,this.db.get(c,u)]):[3,11];case 9:if(void 0===(l=m.sent()))return h="Model instance not found in storage",ve.warn(h,{model:o}),[2,[[o],[]]];if(d=_.a.getPredicates(t),f=d.predicates,p=d.type,!Object(O.R)(l,p,f))throw h="Conditional update failed",ve.error(h,{model:l,condition:f}),new Error(h);return v=this.schema.namespaces[a].relationships[s.name].relationTypes,[4,this.deleteTraverse(v,[o],s.name,a,n)];case 10:return m.sent(),[3,13];case 11:return v=this.schema.namespaces[a].relationships[s.name].relationTypes,[4,this.deleteTraverse(v,[o],s.name,a,n)];case 12:m.sent(),m.label=13;case 13:return[4,this.deleteItem(n)];case 14:return m.sent(),g=n.reduce((function(e,t){var n=t.items;return e.concat(n)}),[]),[2,[[o],g]];case 15:return[2]}}))}))},e.prototype.deleteItem=function(e){var t,n,r,i,o,s;return de(this,void 0,void 0,(function(){var a,u,c,l,d,f,p,h,v;return fe(this,(function(g){switch(g.label){case 0:g.trys.push([0,17,18,23]),t=pe(e),g.label=1;case 1:return[4,t.next()];case 2:if((n=g.sent()).done)return[3,16];a=n.value,u=a.storeName,c=a.items,g.label=3;case 3:g.trys.push([3,9,10,15]),l=pe(c),g.label=4;case 4:return[4,l.next()];case 5:return(d=g.sent()).done?[3,8]:(f=d.value)?"object"!==ce(f)?[3,7]:(p=this.getIndexKeyValuesPath(f),[4,this.db.delete(p,u)]):[3,7];case 6:g.sent(),g.label=7;case 7:return[3,4];case 8:return[3,15];case 9:return h=g.sent(),o={error:h},[3,15];case 10:return g.trys.push([10,,13,14]),d&&!d.done&&(s=l.return)?[4,s.call(l)]:[3,12];case 11:g.sent(),g.label=12;case 12:return[3,14];case 13:if(o)throw o.error;return[7];case 14:return[7];case 15:return[3,1];case 16:return[3,23];case 17:return v=g.sent(),r={error:v},[3,23];case 18:return g.trys.push([18,,21,22]),n&&!n.done&&(i=t.return)?[4,i.call(t)]:[3,20];case 19:g.sent(),g.label=20;case 20:return[3,22];case 21:if(r)throw r.error;return[7];case 22:return[7];case 23:return[2]}}))}))},e.prototype.deleteTraverse=function(e,t,n,r,i){var o,s,a,u,c,l,d,f,p,h,v,g;return de(this,void 0,void 0,(function(){var m,y,b,w,_,S,E,C,A,I,T,x,P,k,D,N,L,M,j,R,U,B,F,z,q,$=this;return fe(this,(function(K){switch(K.label){case 0:K.trys.push([0,38,39,44]),o=pe(e),K.label=1;case 1:return[4,o.next()];case 2:if((s=K.sent()).done)return[3,37];switch(m=s.value,y=m.relationType,b=m.modelName,w=m.targetName,_=m.targetNames,S=m.associatedWith,E=Object(O.u)(r,b),C=Object(O.q)(this.schema.namespaces[r].relationships[b].relationTypes,n)||Object(O.r)(this.schema.namespaces[r].relationships[b].indexes,m.associatedWith),y){case"HAS_ONE":return[3,3];case"HAS_MANY":return[3,20];case"BELONGS_TO":return[3,34]}return[3,35];case 3:K.trys.push([3,13,14,19]),a=pe(t),K.label=4;case 4:return[4,a.next()];case 5:return(u=K.sent()).done?[3,12]:(j=u.value,_&&(null==_?void 0:_.length)?(C?A=C.split(O.e):S&&(A=Array.isArray(S)?S:[S]),I=_.every((function(e){return j.hasOwnProperty(e)})),D=this.getIndexKeyValuesPath(j),x=A===S,0===(T=I&&x?_.map((function(e){return j[e]})):D.split(O.b)).length?[3,12]:[4,this.db.getAll(E)]):[3,8]);case 6:return U=K.sent(),L=void 0,L=I?U.filter((function(e){return A.every((function(t){return T.includes(e[t])}))})):U.filter((function(e){return e[A]===T})),[4,this.deleteTraverse(this.schema.namespaces[r].relationships[b].relationTypes,L,b,r,i)];case 7:return K.sent(),[3,11];case 8:return P=C||S,k=w in j,D=this.getIndexKeyValuesPath(j),(N=k?j[w]:D)?[4,this.db.getAll(E)]:[3,12];case 9:return U=K.sent(),L=U.filter((function(e){return e[P]===N})),[4,this.deleteTraverse(this.schema.namespaces[r].relationships[b].relationTypes,L,b,r,i)];case 10:K.sent(),K.label=11;case 11:return[3,4];case 12:return[3,19];case 13:return M=K.sent(),p={error:M},[3,19];case 14:return K.trys.push([14,,17,18]),u&&!u.done&&(h=a.return)?[4,h.call(a)]:[3,16];case 15:K.sent(),K.label=16;case 16:return[3,18];case 17:if(p)throw p.error;return[7];case 18:return[7];case 19:return[3,36];case 20:K.trys.push([20,27,28,33]),c=pe(t),K.label=21;case 21:return[4,c.next()];case 22:return(l=K.sent()).done?[3,26]:(j=l.value,R=this.getIndexKeyValuesFromModel(j),[4,this.db.getAll(E)]);case 23:return U=K.sent(),B=C.split(O.e),F=U.filter((function(e){return B.every((function(t){return R.includes(e[t])}))})),[4,this.deleteTraverse(this.schema.namespaces[r].relationships[b].relationTypes,F,b,r,i)];case 24:K.sent(),K.label=25;case 25:return[3,21];case 26:return[3,33];case 27:return z=K.sent(),v={error:z},[3,33];case 28:return K.trys.push([28,,31,32]),l&&!l.done&&(g=c.return)?[4,g.call(c)]:[3,30];case 29:K.sent(),K.label=30;case 30:return[3,32];case 31:if(v)throw v.error;return[7];case 32:return[7];case 33:case 34:return[3,36];case 35:return Object(O.l)(y),[3,36];case 36:return[3,1];case 37:return[3,44];case 38:return q=K.sent(),d={error:q},[3,44];case 39:return K.trys.push([39,,42,43]),s&&!s.done&&(f=o.return)?[4,f.call(o)]:[3,41];case 40:K.sent(),K.label=41;case 41:return[3,43];case 42:if(d)throw d.error;return[7];case 43:return[7];case 44:return i.push({storeName:Object(O.u)(r,n),items:t.map((function(e){return $.modelInstanceCreator($.getModelConstructorByModelName(r,n),e)}))}),[2]}}))}))},e.prototype.clear=function(){return de(this,void 0,void 0,(function(){return fe(this,(function(e){switch(e.label){case 0:return[4,this.db.clear()];case 1:return e.sent(),this.db=void 0,this.initPromise=void 0,[2]}}))}))},e.prototype.batchSave=function(e,t){return de(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,d,f,p,h=this;return fe(this,(function(v){switch(v.label){case 0:n=e.name,r=this.namespaceResolver(e),i=Object(O.u)(r,n),o=Object(O.s)(this.schema.namespaces[r],n),s=[],a=function(t){var i=u.modelInstanceCreator(e,t),o=Object(O.Q)(n,i,u.schema.namespaces[r],u.modelInstanceCreator,u.getModelConstructorByModelName),a=u.getIndexKeyValuesPath(i),c=o.find((function(e){var t=e.instance,n=h.getIndexKeyValuesPath(t);return Object(O.L)([n],[a])})).instance;s.push(c)},u=this;try{for(c=he(t),l=c.next();!l.done;l=c.next())d=l.value,a(d)}catch(e){f={error:e}}finally{try{l&&!l.done&&(p=c.return)&&p.call(c)}finally{if(f)throw f.error}}return[4,this.db.batchSave(i,s,o)];case 1:return[2,v.sent()]}}))}))},e}()),me=function(){return(me=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},ye=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},be=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},we=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},_e=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Se=new s.a("DataStore"),Ee=function(){function e(e,t,n,r,i,o){this.schema=e,this.namespaceResolver=t,this.getModelConstructorByModelName=n,this.modelInstanceCreator=r,this.adapter=i,this.sessionId=o,this.adapter=this.adapter||(Object(a.b)().isBrowser&&window.indexedDB||Object(a.c)()&&self.indexedDB?X:ge),this.pushStream=new A.a}return e.getNamespace=function(){return{name:O.f,relationships:{},enums:{},models:{},nonModels:{}}},e.prototype.init=function(){return ye(this,void 0,void 0,(function(){var e,t;return be(this,(function(n){switch(n.label){case 0:return void 0===this.initialized?[3,2]:[4,this.initialized];case 1:case 3:return n.sent(),[2];case 2:return Se.debug("Starting Storage"),this.initialized=new Promise((function(n,r){e=n,t=r})),this.adapter.setUp(this.schema,this.namespaceResolver,this.modelInstanceCreator,this.getModelConstructorByModelName,this.sessionId).then(e,t),[4,this.initialized]}}))}))},e.prototype.save=function(e,t,n,r){return ye(this,void 0,void 0,(function(){var i,o=this;return be(this,(function(s){switch(s.label){case 0:return[4,this.init()];case 1:return s.sent(),[4,this.adapter.save(e,t)];case 2:return(i=s.sent()).forEach((function(s){var a,u=we(s,2),c=u[0],l=u[1],d=!!n;if(l===v.h.UPDATE&&!d&&null===(a=o.getUpdateMutationInput(e,c,r)))return i;var f=a||c,p=Object.getPrototypeOf(c).constructor;o.pushStream.next({model:p,opType:l,element:f,mutator:n,condition:_.a.getPredicates(t,!1),savedElement:c})})),[2,i]}}))}))},e.prototype.delete=function(e,t,n){return ye(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,l=this;return be(this,(function(d){switch(d.label){case 0:return[4,this.init()];case 1:return d.sent(),[4,this.adapter.delete(e,t)];case 2:return c=we.apply(void 0,[d.sent(),2]),i=c[0],r=c[1],o=Object(O.H)(e)?e:Object.getPrototypeOf(e||{}).constructor,s=this.namespaceResolver(o),a=this.schema.namespaces[s].models[o.name],u=new Set(i.map((function(e){return Object(I.h)(a,e)}))),Object(O.H)(e)||Array.isArray(r)||(r=[r]),r.forEach((function(r){var i,o=Object.getPrototypeOf(r).constructor;if(!Object(O.H)(e)){var s=Object(I.h)(a,r);i=u.has(s)?_.a.getPredicates(t,!1):void 0}l.pushStream.next({model:o,opType:v.h.DELETE,element:r,mutator:n,condition:i})})),[2,[i,r]]}}))}))},e.prototype.query=function(e,t,n){return ye(this,void 0,void 0,(function(){return be(this,(function(r){switch(r.label){case 0:return[4,this.init()];case 1:return r.sent(),[4,this.adapter.query(e,t,n)];case 2:return[2,r.sent()]}}))}))},e.prototype.queryOne=function(e,t){return void 0===t&&(t=v.j.FIRST),ye(this,void 0,void 0,(function(){return be(this,(function(n){switch(n.label){case 0:return[4,this.init()];case 1:return n.sent(),[4,this.adapter.queryOne(e,t)];case 2:return[2,n.sent()]}}))}))},e.prototype.observe=function(e,t,n){var r=!e,i=_.a.getPredicates(t,!1)||{},o=i.predicates,s=i.type,a=!!o,u=this.pushStream.observable.filter((function(e){var t=e.mutator;return!n||t!==n})).map((function(e){return e.mutator,function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["mutator"])}));return r||(u=u.filter((function(t){var n=t.model,r=t.element;return e===n&&(!a||Object(O.R)(r,s,o))}))),u},e.prototype.clear=function(e){return void 0===e&&(e=!0),ye(this,void 0,void 0,(function(){return be(this,(function(t){switch(t.label){case 0:return this.initialized=void 0,[4,this.adapter.clear()];case 1:return t.sent(),e&&this.pushStream.complete(),[2]}}))}))},e.prototype.batchSave=function(e,t,n){return ye(this,void 0,void 0,(function(){var r,i=this;return be(this,(function(o){switch(o.label){case 0:return[4,this.init()];case 1:return o.sent(),[4,this.adapter.batchSave(e,t)];case 2:return(r=o.sent()).forEach((function(t){var r=we(t,2),o=r[0],s=r[1];i.pushStream.next({model:e,opType:s,element:o,mutator:n,condition:void 0})})),[2,r]}}))}))},e.prototype.getUpdateMutationInput=function(e,t,n){var r,i;if(!n||!n.length)return null;var o=we(n,2),s=o[0],a=o[1],u={},c=s.map((function(e){return e.path&&e.path[0]})),l=Object.getPrototypeOf(e).constructor,d=this.namespaceResolver(l),f=this.schema.namespaces[d].models[l.name].fields,p=this.schema.namespaces[d].keys[l.name],h=p.primaryKey,g=p.compositeKeys,m=void 0===g?[]:g;if(c.forEach((function(e){var n,r,i,o,s,c,l,d,p,h,g,y=Object(v.x)(null===(g=f[e])||void 0===g?void 0:g.association);if(Array.isArray(y))try{for(var b=_e(y),w=b.next();!w.done;w=b.next()){var _=w.value;if(!Object(O.S)(a[_],t[_])){u[_]=void 0===t[_]?null:t[_];try{for(var S=(i=void 0,_e(m)),E=S.next();!E.done;E=S.next())if((k=E.value).has(_))try{for(var C=(s=void 0,_e(k)),A=C.next();!A.done;A=C.next()){var I=A.value;u[I]=t[I]}}catch(e){s={error:e}}finally{try{A&&!A.done&&(c=C.return)&&c.call(C)}finally{if(s)throw s.error}}}catch(e){i={error:e}}finally{try{E&&!E.done&&(o=S.return)&&o.call(S)}finally{if(i)throw i.error}}}}}catch(e){n={error:e}}finally{try{w&&!w.done&&(r=b.return)&&r.call(b)}finally{if(n)throw n.error}}else{var T=y||e;if(!Object(O.S)(a[T],t[T])){u[T]=void 0===t[T]?null:t[T];try{for(var x=_e(m),P=x.next();!P.done;P=x.next()){var k;if((k=P.value).has(T))try{for(var D=(p=void 0,_e(k)),N=D.next();!N.done;N=D.next())I=N.value,u[I]=t[I]}catch(e){p={error:e}}finally{try{N&&!N.done&&(h=D.return)&&h.call(D)}finally{if(p)throw p.error}}}}catch(e){l={error:e}}finally{try{P&&!P.done&&(d=x.return)&&d.call(x)}finally{if(l)throw l.error}}}}})),0===Object.keys(u).length)return null;if(h&&h.length)try{for(var y=_e(h),b=y.next();!b.done;b=y.next()){var w=b.value;u[w]=t[w]}}catch(e){r={error:e}}finally{try{b&&!b.done&&(i=y.return)&&i.call(y)}finally{if(r)throw r.error}}var _=t.id,S=t._version,E=t._lastChangedAt,C=t._deleted;return me(me({},u),{id:_,_version:S,_lastChangedAt:E,_deleted:C})},e}(),Ce=function(){function e(e,t,n,r,i,o){this.mutex=new E,this.storage=new Ee(e,t,n,r,i,o)}return e.prototype.runExclusive=function(e){return this.mutex.runExclusive(e.bind(this,this.storage))},e.prototype.save=function(e,t,n,r){return ye(this,void 0,void 0,(function(){return be(this,(function(i){return[2,this.runExclusive((function(i){return i.save(e,t,n,r)}))]}))}))},e.prototype.delete=function(e,t,n){return ye(this,void 0,void 0,(function(){return be(this,(function(r){return[2,this.runExclusive((function(r){if(Object(O.H)(e)){var i=e;return r.delete(i,t,n)}var o=e;return r.delete(o,t,n)}))]}))}))},e.prototype.query=function(e,t,n){return ye(this,void 0,void 0,(function(){return be(this,(function(r){return[2,this.runExclusive((function(r){return r.query(e,t,n)}))]}))}))},e.prototype.queryOne=function(e,t){return void 0===t&&(t=v.j.FIRST),ye(this,void 0,void 0,(function(){return be(this,(function(n){return[2,this.runExclusive((function(n){return n.queryOne(e,t)}))]}))}))},e.getNamespace=function(){return Ee.getNamespace()},e.prototype.observe=function(e,t,n){return this.storage.observe(e,t,n)},e.prototype.clear=function(){return ye(this,void 0,void 0,(function(){return be(this,(function(e){switch(e.label){case 0:return[4,this.runExclusive((function(e){return e.clear()}))];case 1:return e.sent(),[2]}}))}))},e.prototype.batchSave=function(e,t){return this.storage.batchSave(e,t)},e.prototype.init=function(){return ye(this,void 0,void 0,(function(){return be(this,(function(e){return[2,this.storage.init()]}))}))},e}(),Ae=n(29),Oe=(new(n(430).a)).networkMonitor(),Ie=function(){return(Ie=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Te=(new s.a("DataStore"),function(){function e(){this.connectionStatus={online:!1}}return e.prototype.status=function(){var e=this;if(this.observer)throw new Error("Subscriber already exists");return new f.a((function(t){return e.observer=t,e.subscription=Oe.subscribe((function(n){var r=n.online;e.connectionStatus.online=r;var i=Ie({},e.connectionStatus);t.next(i)})),function(){clearTimeout(e.timeout),e.unsubscribe()}}))},e.prototype.unsubscribe=function(){this.subscription&&(clearTimeout(this.timeout),this.subscription.unsubscribe())},e.prototype.stop=function(){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(e){return this.unsubscribe(),[2]}))}))},e.prototype.socketDisconnected=function(){var e=this;this.observer&&"function"==typeof this.observer.next&&(this.observer.next({online:!1}),this.timeout=setTimeout((function(){var t=Ie({},e.connectionStatus);e.observer.next(t)}),5e3))},e}()),xe=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},Pe=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},ke=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},De=function(){function e(e,t){this.outbox=e,this.ownSymbol=t}return e.prototype.merge=function(e,t,n){return xe(this,void 0,void 0,(function(){var r,i,o,s,a;return Pe(this,(function(u){switch(u.label){case 0:return[4,this.outbox.getForModel(e,t,n)];case 1:return i=u.sent(),o=t._deleted,0!==i.length?[3,5]:o?(r=v.h.DELETE,[4,e.delete(t,void 0,this.ownSymbol)]):[3,3];case 2:return u.sent(),[3,5];case 3:return[4,e.save(t,void 0,this.ownSymbol)];case 4:s=ke.apply(void 0,[u.sent(),1]),a=ke(s[0],2),r=a[1],u.label=5;case 5:return[2,r]}}))}))},e.prototype.mergePage=function(e,t,n,r){return xe(this,void 0,void 0,(function(){var i,o,s,a,u,c,l,d;return Pe(this,(function(f){switch(f.label){case 0:i=new Map;try{for(o=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),s=o.next();!s.done;s=o.next())a=s.value,u=Object(I.h)(r,a),i.set(u,a)}catch(e){l={error:e}}finally{try{s&&!s.done&&(d=o.return)&&d.call(o)}finally{if(l)throw l.error}}return c=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(ke(arguments[t]));return e}(i.values()),[4,e.batchSave(t,c,this.ownSymbol)];case 1:return[2,f.sent()]}}))}))},e}(),Ne=function(){return(Ne=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Le=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},Me=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},je=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Re=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},Ue=function(){function e(e,t,n,r){this.schema=e,this.MutationEvent=t,this.modelInstanceCreator=n,this.ownSymbol=r}return e.prototype.enqueue=function(e,t){return Le(this,void 0,void 0,(function(){var n=this;return Me(this,(function(r){switch(r.label){case 0:return[4,e.runExclusive((function(e){return Le(n,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,d=this;return Me(this,(function(f){switch(f.label){case 0:return n=this.schema.namespaces[O.g].models.MutationEvent,r=_.a.createFromExisting(n,(function(e){return e.modelId("eq",t.modelId).id("ne",d.inProgressMutationEventId)})),[4,e.query(this.MutationEvent,r)];case 1:return i=Re.apply(void 0,[f.sent(),1]),void 0!==(o=i[0])?[3,3]:[4,e.save(t,void 0,this.ownSymbol)];case 2:return f.sent(),[2];case 3:return s=t.operation,o.operation!==I.a.CREATE?[3,8]:s!==I.a.DELETE?[3,5]:[4,e.delete(this.MutationEvent,r)];case 4:return f.sent(),[3,7];case 5:return a=this.mergeUserFields(o,t),[4,e.save(this.MutationEvent.copyOf(o,(function(e){e.data=a.data})),void 0,this.ownSymbol)];case 6:f.sent(),f.label=7;case 7:return[3,12];case 8:return u=t.condition,c=JSON.parse(u),l=void 0,0!==Object.keys(c).length?[3,10]:(l=this.mergeUserFields(o,t),[4,e.delete(this.MutationEvent,r)]);case 9:f.sent(),f.label=10;case 10:return l=l||t,[4,e.save(l,void 0,this.ownSymbol)];case 11:f.sent(),f.label=12;case 12:return[2]}}))}))}))];case 1:return r.sent(),[2]}}))}))},e.prototype.dequeue=function(e,t,n){return Le(this,void 0,void 0,(function(){var r;return Me(this,(function(i){switch(i.label){case 0:return[4,this.peek(e)];case 1:return r=i.sent(),t?[4,this.syncOutboxVersionsOnDequeue(e,t,r,n)]:[3,3];case 2:i.sent(),i.label=3;case 3:return[4,e.delete(r)];case 4:return i.sent(),this.inProgressMutationEventId=void 0,[2,r]}}))}))},e.prototype.peek=function(e){return Le(this,void 0,void 0,(function(){var t;return Me(this,(function(n){switch(n.label){case 0:return[4,e.queryOne(this.MutationEvent,v.j.FIRST)];case 1:return t=n.sent(),this.inProgressMutationEventId=t?t.id:void 0,[2,t]}}))}))},e.prototype.getForModel=function(e,t,n){return Le(this,void 0,void 0,(function(){var r,i;return Me(this,(function(o){switch(o.label){case 0:return r=this.schema.namespaces[O.g].models.MutationEvent,i=Object(I.h)(n,t),[4,e.query(this.MutationEvent,_.a.createFromExisting(r,(function(e){return e.modelId("eq",i)})))];case 1:return[2,o.sent()]}}))}))},e.prototype.getModelIds=function(e){return Le(this,void 0,void 0,(function(){var t,n;return Me(this,(function(r){switch(r.label){case 0:return[4,e.query(this.MutationEvent)];case 1:return t=r.sent(),n=new Set,t.forEach((function(e){var t=e.modelId;return n.add(t)})),[2,n]}}))}))},e.prototype.syncOutboxVersionsOnDequeue=function(e,t,n,r){return Le(this,void 0,void 0,(function(){var i,o,s,a,u,c,l,d,f,p,h,v,g,m=this;return Me(this,(function(y){switch(y.label){case 0:return n.operation!==r?[2]:(i=t._version,o=t._lastChangedAt,t._deleted,s=je(t,["_version","_lastChangedAt","_deleted"]),a=this.removeTimestampFields(n.model,s),(u=JSON.parse(n.data))?(u._version,u._lastChangedAt,u._deleted,c=je(u,["_version","_lastChangedAt","_deleted"]),l=this.removeTimestampFields(n.model,c),Object(O.S)(a,l,!0)?(d=this.schema.namespaces[O.g].models.MutationEvent,f=this.schema.namespaces.user.models[n.model],p=Object(I.h)(f,t),h=_.a.createFromExisting(d,(function(e){return e.modelId("eq",p).id("ne",m.inProgressMutationEventId)})),[4,e.query(this.MutationEvent,h)]):[2]):[2]);case 1:return(v=y.sent()).length?(g=v.map((function(e){var t=JSON.parse(e.data),n=Ne(Ne({},t),{_version:i,_lastChangedAt:o});return m.MutationEvent.copyOf(e,(function(e){e.data=JSON.stringify(n)}))})),[4,e.delete(this.MutationEvent,h)]):[2];case 2:return y.sent(),[4,Promise.all(g.map((function(t){return Le(m,void 0,void 0,(function(){return Me(this,(function(n){switch(n.label){case 0:return[4,e.save(t,void 0,this.ownSymbol)];case 1:return[2,n.sent()]}}))}))})))];case 3:return y.sent(),[2]}}))}))},e.prototype.mergeUserFields=function(e,t){var n=JSON.parse(e.data),r=n._version,i=n._lastChangedAt,o=n._deleted,s=je(n,["_version","_lastChangedAt","_deleted"]),a=JSON.parse(t.data),u=(a._version,a._lastChangedAt,a._deleted,je(a,["_version","_lastChangedAt","_deleted"])),c=JSON.stringify(Ne(Ne({_version:r,_lastChangedAt:i,_deleted:o},s),u));return this.modelInstanceCreator(this.MutationEvent,Ne(Ne({},t),{data:c}))},e.prototype.removeTimestampFields=function(e,t){var n,r,i="createdAt",o="updatedAt",s=null===(n=this.schema.namespaces[O.h].models[e].attributes)||void 0===n?void 0:n.find((function(e){return"model"===e.type})),a=null===(r=null==s?void 0:s.properties)||void 0===r?void 0:r.timestamps;return a&&(i=a.createdAt,o=a.updatedAt),delete t[i],delete t[o],t},e}(),Be=n(429),Fe=n(65),ze=function(){return(ze=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},qe=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},$e=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Ke=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},Ve=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ge=new s.a("DataStore"),He=function(){function e(e,t,n,i,o,s,a,c,l,d,f){void 0===a&&(a={}),this.schema=e,this.storage=t,this.userClasses=n,this.outbox=i,this.modelInstanceCreator=o,this.MutationEvent=s,this.amplifyConfig=a,this.authModeStrategy=c,this.errorHandler=l,this.conflictHandler=d,this.amplifyContext=f,this.typeQuery=new WeakMap,this.processing=!1,this.runningProcesses=new u.a,this.amplifyContext.API=this.amplifyContext.API||r.a,this.generateQueries()}return e.prototype.generateQueries=function(){var e=this;Object.values(this.schema.namespaces).forEach((function(t){Object.values(t.models).filter((function(e){return e.syncable})).forEach((function(n){var r=Ke(Object(I.b)(t,n,"CREATE"),1)[0],i=Ke(Object(I.b)(t,n,"UPDATE"),1)[0],o=Ke(Object(I.b)(t,n,"DELETE"),1)[0];e.typeQuery.set(n,[r,i,o])}))}))},e.prototype.isReady=function(){return void 0!==this.observer},e.prototype.start=function(){var e=this;return new f.a((function(t){e.observer=t;try{e.resume()}catch(e){throw Ge.error("mutations processor start error",e),e}return e.runningProcesses.addCleaner((function(){return qe(e,void 0,void 0,(function(){return $e(this,(function(e){return this.pause(),[2]}))}))}))}))},e.prototype.stop=function(){return qe(this,void 0,void 0,(function(){return $e(this,(function(e){switch(e.label){case 0:return[4,this.runningProcesses.close()];case 1:return e.sent(),[4,this.runningProcesses.open()];case 2:return e.sent(),[2]}}))}))},e.prototype.resume=function(){return qe(this,void 0,void 0,(function(){var e=this;return $e(this,(function(t){switch(t.label){case 0:return[4,this.runningProcesses.isOpen&&this.runningProcesses.add((function(t){return qe(e,void 0,void 0,(function(){var e,n,r,i,o,s=this;return $e(this,(function(a){switch(a.label){case 0:if(this.processing||!this.isReady()||!this.runningProcesses.isOpen)return[2];this.processing=!0,n=O.h,r=function(){var r,o,a,u,c,l,d,f,p,h,v,g,m,y,b,w;return $e(this,(function(_){switch(_.label){case 0:r=e.model,o=e.operation,a=e.data,u=e.condition,c=i.userClasses[r],l=void 0,d=void 0,f=void 0,_.label=1;case 1:return _.trys.push([1,4,,5]),[4,Object(I.i)({authModeStrategy:i.authModeStrategy,defaultAuthMode:i.amplifyConfig.aws_appsync_authenticationType,modelName:r,schema:i.schema})];case 2:return p=_.sent(),h=p[o.toUpperCase()],v=0,[4,(g=function(){return qe(s,void 0,void 0,(function(){var i,s;return $e(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,4]),Ge.debug("Attempting mutation with authMode: "+h[v]),[4,this.jitteredRetry(n,r,o,a,u,c,this.MutationEvent,e,h[v],t)];case 1:return i=l.sent(),Ge.debug("Mutation sent successfully with authMode: "+h[v]),[2,i];case 2:if(s=l.sent(),++v>=h.length)throw Ge.debug("Mutation failed with authMode: "+h[v-1]),s;return Ge.debug("Mutation failed with authMode: "+h[v-1]+". Retrying with authMode: "+h[v]),[4,g()];case 3:return[2,l.sent()];case 4:return[2]}}))}))})()];case 3:return w=Ke.apply(void 0,[_.sent(),3]),l=w[0],d=w[1],f=w[2],[3,5];case 4:return"Offline"===(m=_.sent()).message||"RetryMutation"===m.message?[2,"continue"]:[3,5];case 5:return void 0!==l?[3,7]:(Ge.debug("done retrying"),[4,i.storage.runExclusive((function(e){return qe(s,void 0,void 0,(function(){return $e(this,(function(t){switch(t.label){case 0:return[4,this.outbox.dequeue(e)];case 1:return t.sent(),[2]}}))}))}))]);case 6:return _.sent(),[2,"continue"];case 7:return y=l.data[d],b=!1,[4,i.storage.runExclusive((function(e){return qe(s,void 0,void 0,(function(){return $e(this,(function(t){switch(t.label){case 0:return[4,this.outbox.dequeue(e,y,o)];case 1:return t.sent(),[4,this.outbox.peek(e)];case 2:return b=void 0!==t.sent(),[2]}}))}))}))];case 8:return _.sent(),i.observer.next({operation:o,modelDefinition:f,model:y,hasMore:b}),[2]}}))},i=this,a.label=1;case 1:return(o=this.processing&&this.runningProcesses.isOpen)?[4,this.outbox.peek(this.storage)]:[3,3];case 2:o=void 0!==(e=a.sent()),a.label=3;case 3:return o?[5,r()]:[3,5];case 4:return a.sent(),[3,1];case 5:return this.pause(),[2]}}))}))}),"mutation resume loop")];case 1:return t.sent(),[2]}}))}))},e.prototype.jitteredRetry=function(e,t,n,r,i,o,s,a,u,c){return qe(this,void 0,void 0,(function(){var l=this;return $e(this,(function(d){switch(d.label){case 0:return[4,Object(Be.d)((function(t,n,r,i,o,s,a){return qe(l,void 0,void 0,(function(){var c,l,d,f,p,h,g,m,y,b,w,_,S,E,C,A,T,x,P,k,D,N,L,M,j,R;return $e(this,(function(U){switch(U.label){case 0:return c=Ke(this.createQueryVariables(e,t,n,r,i),5),l=c[0],d=c[1],f=c[2],p=c[3],h=c[4],[4,Object(I.j)(u,this.amplifyConfig)];case 1:g=U.sent(),m={query:l,variables:d,authMode:u,authToken:g,userAgentSuffix:O.i},y=0,b=this.opTypeFromTransformerOperation(n),U.label=2;case 2:return U.trys.push([2,4,,17]),[4,this.amplifyContext.API.graphql(m)];case 3:return[2,[U.sent(),p,h]];case 4:if(!((w=U.sent()).errors&&w.errors.length>0))return[3,15];if(_=Ke(w.errors,1),S=_[0],E=S.originalError,C=(void 0===E?{}:E).code,A=void 0===C?null:C,"Unauthorized"===S.errorType)throw new Be.a("Unauthorized");if("Network Error"===S.message||"ECONNABORTED"===A){if(!this.processing)throw new Be.a("Offline");throw new Error("Network Error")}return"ConflictUnhandled"!==S.errorType?[3,13]:(y++,T=void 0,y>10?(T=v.b,[3,8]):[3,5]);case 5:return U.trys.push([5,7,,8]),[4,this.conflictHandler({modelConstructor:o,localModel:this.modelInstanceCreator(o,d.input),remoteModel:this.modelInstanceCreator(o,S.data),operation:b,attempts:y})];case 6:return T=U.sent(),[3,8];case 7:return x=U.sent(),Ge.warn("conflict trycatch",x),[3,17];case 8:return T!==v.b?[3,11]:(P=Ke(Object(I.b)(this.schema.namespaces[e],h,"GET"),1),k=Ke(P[0],3),D=k[1],N=k[2],[4,Object(I.j)(u,this.amplifyConfig)]);case 9:return L=U.sent(),[4,this.amplifyContext.API.graphql({query:N,variables:{id:d.input.id},authMode:u,authToken:L,userAgentSuffix:O.i})];case 10:return[2,[U.sent(),D,h]];case 11:return M=this.schema.namespaces[e],j=Object(I.d)(M.relationships,h,b,o,T,f,s,this.modelInstanceCreator,a.id),[4,this.storage.save(j)];case 12:throw U.sent(),new Be.a("RetryMutation");case 13:try{this.errorHandler({recoverySuggestion:"Ensure app code is up to date, auth directives exist and are correct on each model, and that server-side data has not been invalidated by a schema change. If the problem persists, search for or create an issue: https://github.com/aws-amplify/amplify-js/issues",localModel:d.input,message:S.message,operation:n,errorType:Object(Fe.a)(S),errorInfo:S.errorInfo,process:v.i.mutate,cause:S,remoteModel:S.data?this.modelInstanceCreator(o,S.data):null})}catch(e){Ge.warn("Mutation error handler failed with:",e)}finally{return[2,S.data?[{data:(R={},R[p]=S.data,R)},p,h]:[]]}U.label=14;case 14:return[3,16];case 15:throw new Be.a(w);case 16:return[3,17];case 17:if(m)return[3,2];U.label=18;case 18:return[2]}}))}))}),[t,n,r,i,o,s,a],Je,c)];case 1:return[2,d.sent()]}}))}))},e.prototype.createQueryVariables=function(e,t,n,r,i){var o,s,a,u,c,l,d,f=this.schema.namespaces[e].models[t],p=this.schema.namespaces[e].keys[t].primaryKey,h=this.typeQuery.get(f),g=Ke(h.find((function(e){return Ke(e,1)[0]===n})),3),m=g[1],y=g[2],b=JSON.parse(r),w=b._version,_=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(b,["_version"]),S={};if(null==p?void 0:p.length)try{for(var E=Ve(p),C=E.next();!C.done;C=E.next()){var A=C.value;S[A]=_[A]}}catch(e){o={error:e}}finally{try{C&&!C.done&&(s=E.return)&&s.call(E)}finally{if(o)throw o.error}}else S[O.d]=_.id;if(n===I.a.DELETE)d=S;else{d={};var T=Object.values(f.fields);try{for(var x=Ve(T),P=x.next();!P.done;P=x.next()){var k=P.value,D=k.name,N=k.type,L=k.association;if(Object(v.r)(N)){if(Object(v.x)(L)&&"BELONGS_TO"===L.connectionType){var M=Object(O.p)(L);if(M)try{for(var j=(c=void 0,Ve(M)),R=j.next();!R.done;R=j.next()){var U=R.value;d[U]=_[U]}}catch(e){c={error:e}}finally{try{R&&!R.done&&(l=j.return)&&l.call(j)}finally{if(c)throw c.error}}}}else(n!==I.a.UPDATE||_.hasOwnProperty(D))&&(d[D]=_[D])}}catch(e){a={error:e}}finally{try{P&&!P.done&&(u=x.return)&&u.call(x)}finally{if(a)throw a.error}}}var B=ze(ze({},d),{_version:w}),F=JSON.parse(i);return[y,ze({input:B},n===I.a.CREATE?{}:{condition:Object.keys(F).length>0?F:null}),F,m,f]},e.prototype.opTypeFromTransformerOperation=function(e){switch(e){case I.a.CREATE:return v.h.INSERT;case I.a.DELETE:return v.h.DELETE;case I.a.UPDATE:return v.h.UPDATE;case I.a.GET:break;default:Object(O.l)(e)}},e.prototype.pause=function(){this.processing=!1},e}(),We=Object(Be.b)(3e5),Je=function(e,t,n){var r=We(e);return!1===r&&"Network Error"===(null==n?void 0:n.message)?3e5:r},Ye=n(122),Ze=function(){return(Ze=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Qe=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},Xe=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},et=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},tt={items:[],nextToken:null,startedAt:null},nt=new s.a("DataStore"),rt=function(){function e(e,t,n,i,o,s){void 0===n&&(n={}),this.schema=e,this.syncPredicates=t,this.amplifyConfig=n,this.authModeStrategy=i,this.errorHandler=o,this.amplifyContext=s,this.typeQuery=new WeakMap,this.runningProcesses=new u.a,s.API=s.API||r.a,this.generateQueries()}return e.prototype.generateQueries=function(){var e=this;Object.values(this.schema.namespaces).forEach((function(t){Object.values(t.models).filter((function(e){return e.syncable})).forEach((function(n){var r=et(Object(I.b)(t,n,"LIST"),1),i=et(r[0]).slice(1);e.typeQuery.set(n,i)}))}))},e.prototype.graphqlFilterFromPredicate=function(e){if(!this.syncPredicates)return null;var t=_.a.getPredicates(this.syncPredicates.get(e),!1);return t?Object(I.m)(t):null},e.prototype.retrievePage=function(e,t,n,r,i,o){return void 0===r&&(r=null),Qe(this,void 0,void 0,(function(){var s,a,u,c,l,d,f,p,h,v,g,m,y,b=this;return Xe(this,(function(w){switch(w.label){case 0:return s=et(this.typeQuery.get(e),2),a=s[0],u=s[1],c={limit:r,nextToken:n,lastSync:t,filter:i},[4,Object(I.i)({authModeStrategy:this.authModeStrategy,defaultAuthMode:this.amplifyConfig.aws_appsync_authenticationType,modelName:e.name,schema:this.schema})];case 1:return l=w.sent(),d=l.READ,f=0,[4,(p=function(){return Qe(b,void 0,void 0,(function(){var t,n,r,i;return Xe(this,(function(s){switch(s.label){case 0:if(!this.runningProcesses.isOpen)throw new Error("sync.retreievePage termination was requested. Exiting.");s.label=1;case 1:return s.trys.push([1,3,,5]),nt.debug("Attempting sync with authMode: "+d[f]),[4,this.jitteredRetry({query:u,variables:c,opName:a,modelDefinition:e,authMode:d[f],onTerminate:o})];case 2:return t=s.sent(),nt.debug("Sync successful with authMode: "+d[f]),[2,t];case 3:if(n=s.sent(),++f>=d.length){if(r=d[f-1],nt.debug("Sync failed with authMode: "+r,n),Object(I.f)(n)||Object(I.g)(n))return nt.warn("User is unauthorized to query "+a+" with auth mode "+r+". No data could be returned."),[2,{data:(i={},i[a]=tt,i)}];throw n}return nt.debug("Sync failed with authMode: "+d[f-1]+". Retrying with authMode: "+d[f]),[4,p()];case 4:return[2,s.sent()];case 5:return[2]}}))}))})()];case 2:return h=w.sent().data,v=h[a],g=v.items,m=v.nextToken,y=v.startedAt,[2,{nextToken:m,startedAt:y,items:g}]}}))}))},e.prototype.jitteredRetry=function(e){var t=e.query,n=e.variables,r=e.opName,i=e.modelDefinition,o=e.authMode,s=e.onTerminate;return Qe(this,void 0,void 0,(function(){var e=this;return Xe(this,(function(a){switch(a.label){case 0:return[4,Object(Be.c)((function(t,n){return Qe(e,void 0,void 0,(function(){var e,s,a,u,l,d,f,p,h,g,m,y=this;return Xe(this,(function(b){switch(b.label){case 0:return b.trys.push([0,3,,6]),[4,Object(I.j)(o,this.amplifyConfig)];case 1:return e=b.sent(),[4,this.amplifyContext.API.graphql({query:t,variables:n,authMode:o,authToken:e,userAgentSuffix:O.i})];case 2:return[2,b.sent()];case 3:if(s=b.sent(),a=Object(I.f)(s)||Object(I.g)(s))throw new Be.a(a);return u=Boolean(null===(h=null===(p=null==s?void 0:s.data)||void 0===p?void 0:p[r])||void 0===h?void 0:h.items),l=(null==s?void 0:s.errors)&&s.errors.some((function(e){return"Unauthorized"===e.errorType})),d=(null==s?void 0:s.errors)&&s.errors.filter((function(e){return"Unauthorized"!==e.errorType})),f=s,u&&(f.data[r].items=f.data[r].items.filter((function(e){return null!==e}))),u&&(null==d?void 0:d.length)?[4,Promise.all(d.map((function(e){return Qe(y,void 0,void 0,(function(){var t;return Xe(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.errorHandler({recoverySuggestion:"Ensure app code is up to date, auth directives exist and are correct on each model, and that server-side data has not been invalidated by a schema change. If the problem persists, search for or create an issue: https://github.com/aws-amplify/amplify-js/issues",localModel:null,message:e.message,model:i.name,operation:r,errorType:Object(Fe.c)(e),process:v.i.sync,remoteModel:null,cause:e})];case 1:return n.sent(),[3,3];case 2:return t=n.sent(),nt.error("Sync error handler failed with:",t),[3,3];case 3:return[2]}}))}))})))]:[3,5];case 4:b.sent(),c.a.dispatch("datastore",{event:"nonApplicableDataReceived",data:{errors:d,modelName:i.name}}),b.label=5;case 5:if(l)return nt.warn("queryError","User is unauthorized to query "+r+", some items could not be returned."),f.data=f.data||{},f.data[r]=Ze(Ze({},tt),f.data[r]),[2,f];if(null===(m=null===(g=f.data)||void 0===g?void 0:g[r].items)||void 0===m?void 0:m.length)return[2,f];throw s;case 6:return[2]}}))}))}),[t,n],void 0,s)];case 1:return[2,a.sent()]}}))}))},e.prototype.start=function(e){var t=this,n=this.amplifyConfig,r=n.maxRecordsToSync,i=n.syncPageSize,o=new Map;return new f.a((function(n){var s=Object.values(t.schema.namespaces).reduce((function(t,n){var r,i;try{for(var o=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(Array.from(n.modelTopologicalOrdering.keys())),s=o.next();!s.done;s=o.next()){var a=s.value,u=e.get(n.models[a]);t.set(n.models[a],u)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return t}),new Map),a=Array.from(s.entries()).filter((function(e){return et(e,1)[0].syncable})).map((function(e){var s=et(e,2),a=s[0],u=et(s[1],2),c=u[0],l=u[1];return t.runningProcesses.isOpen&&t.runningProcesses.add((function(e){return Qe(t,void 0,void 0,(function(){var t,s,u,d,f,p,h,v,g,m=this;return Xe(this,(function(y){switch(y.label){case 0:return t=!1,s=null,u=null,d=null,f=0,p=this.graphqlFilterFromPredicate(a),h=this.schema.namespaces[c].modelTopologicalOrdering.get(a.name),v=h.map((function(e){return o.get(c+"_"+e)})),g=new Promise((function(o){return Qe(m,void 0,void 0,(function(){var h,g;return Xe(this,(function(m){switch(m.label){case 0:return[4,Promise.all(v)];case 1:m.sent(),m.label=2;case 2:return this.runningProcesses.isOpen?(h=Math.min(r-f,i),[4,this.retrievePage(a,l,s,h,p,e)]):[2];case 3:g=m.sent(),d=g.items,s=g.nextToken,u=g.startedAt,f+=d.length,t=null===s||f>=r,n.next({namespace:c,modelDefinition:a,items:d,done:t,startedAt:u,isFullSync:!l}),m.label=4;case 4:if(!t)return[3,2];m.label=5;case 5:return o(),[2]}}))}))})),o.set(c+"_"+a.name,g),[4,g];case 1:return y.sent(),[2]}}))}))}),"adding model "+a.name)}));Promise.all(a).then((function(){n.complete()}))}))},e.prototype.stop=function(){return Qe(this,void 0,void 0,(function(){return Xe(this,(function(e){switch(e.label){case 0:return nt.debug("stopping sync processor"),[4,this.runningProcesses.close()];case 1:return e.sent(),[4,this.runningProcesses.open()];case 2:return e.sent(),nt.debug("sync processor stopped"),[2]}}))}))},e}(),it=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},ot=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},st=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},at=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ut=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(st(arguments[t]));return e},ct=Object(a.b)().isNode,lt=new s.a("DataStore"),dt=Symbol("sync");!function(e){e.SYNC_ENGINE_STORAGE_SUBSCRIBED="storageSubscribed",e.SYNC_ENGINE_SUBSCRIPTIONS_ESTABLISHED="subscriptionsEstablished",e.SYNC_ENGINE_SYNC_QUERIES_STARTED="syncQueriesStarted",e.SYNC_ENGINE_SYNC_QUERIES_READY="syncQueriesReady",e.SYNC_ENGINE_MODEL_SYNCED="modelSynced",e.SYNC_ENGINE_OUTBOX_MUTATION_ENQUEUED="outboxMutationEnqueued",e.SYNC_ENGINE_OUTBOX_MUTATION_PROCESSED="outboxMutationProcessed",e.SYNC_ENGINE_OUTBOX_STATUS="outboxStatus",e.SYNC_ENGINE_NETWORK_STATUS="networkStatus",e.SYNC_ENGINE_READY="ready"}(le||(le={}));var ft=function(){function e(e,t,n,r,i,o,s,a,c,l,d,f,p){void 0===l&&(l={}),this.schema=e,this.namespaceResolver=t,this.modelClasses=n,this.userModelClasses=r,this.storage=i,this.modelInstanceCreator=o,this.syncPredicates=c,this.amplifyConfig=l,this.authModeStrategy=d,this.amplifyContext=f,this.connectivityMonitor=p,this.online=!1,this.modelSyncedStatus=new WeakMap,this.runningProcesses=new u.a;var h=this.modelClasses.MutationEvent;this.outbox=new Ue(this.schema,h,o,dt),this.modelMerger=new De(this.outbox,dt),this.syncQueriesProcessor=new rt(this.schema,this.syncPredicates,this.amplifyConfig,this.authModeStrategy,a,this.amplifyContext),this.subscriptionsProcessor=new Ye.b(this.schema,this.syncPredicates,this.amplifyConfig,this.authModeStrategy,a,this.amplifyContext),this.mutationsProcessor=new He(this.schema,this.storage,this.userModelClasses,this.outbox,this.modelInstanceCreator,h,this.amplifyConfig,this.authModeStrategy,a,s,this.amplifyContext),this.datastoreConnectivity=this.connectivityMonitor||new Te}return e.prototype.getModelSyncedStatus=function(e){return this.modelSyncedStatus.get(e)},e.prototype.start=function(e){var t=this;return new f.a((function(n){lt.log("starting sync engine...");var r=[];t.runningProcesses.add((function(){return it(t,void 0,void 0,(function(){var t,i,o,s=this;return ot(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,this.setupModels(e)];case 1:return a.sent(),[3,3];case 2:return t=a.sent(),n.error(t),[2];case 3:return i=new Promise((function(e,t){s.datastoreConnectivity.status().subscribe((function(i){var o=i.online;return it(s,void 0,void 0,(function(){var i=this;return ot(this,(function(s){return[2,this.runningProcesses.isOpen&&this.runningProcesses.add((function(s){return it(i,void 0,void 0,(function(){var i,a,u,c,l,d=this;return ot(this,(function(f){switch(f.label){case 0:return!o||this.online?[3,10]:(this.online=o,n.next({type:le.SYNC_ENGINE_NETWORK_STATUS,data:{active:this.online}}),a=void 0,ct?(lt.warn("Realtime disabled when in a server-side environment"),[3,6]):[3,1]);case 1:l=st(this.subscriptionsProcessor.start(),2),i=l[0],a=l[1],f.label=2;case 2:return f.trys.push([2,4,,5]),[4,new Promise((function(e,t){s.then(t);var n=i.subscribe({next:function(t){t===Ye.a.CONNECTED&&e()},error:function(e){t(e),d.disconnectionHandler()(e)}});r.push(n)}))];case 3:return f.sent(),[3,5];case 4:return u=f.sent(),n.error(u),t(),[2];case 5:lt.log("Realtime ready"),n.next({type:le.SYNC_ENGINE_SUBSCRIPTIONS_ESTABLISHED}),f.label=6;case 6:return f.trys.push([6,8,,9]),[4,new Promise((function(e,t){var i=d.syncQueriesObservable().subscribe({next:function(t){t.type===le.SYNC_ENGINE_SYNC_QUERIES_READY&&e(),n.next(t)},complete:function(){e()},error:function(e){t(e)}});i&&r.push(i)}))];case 7:return f.sent(),[3,9];case 8:return c=f.sent(),n.error(c),t(),[2];case 9:return r.push(this.mutationsProcessor.start().subscribe((function(e){var t=e.modelDefinition,r=e.model,i=e.hasMore;return d.runningProcesses.add((function(){return it(d,void 0,void 0,(function(){var e,o,s=this;return ot(this,(function(a){switch(a.label){case 0:return e=this.userModelClasses[t.name],o=this.modelInstanceCreator(e,r),[4,this.storage.runExclusive((function(e){return s.modelMerger.merge(e,o,t)}))];case 1:return a.sent(),n.next({type:le.SYNC_ENGINE_OUTBOX_MUTATION_PROCESSED,data:{model:e,element:o}}),n.next({type:le.SYNC_ENGINE_OUTBOX_STATUS,data:{isEmpty:!i}}),[2]}}))}))}),"mutation processor event")}))),ct||r.push(a.subscribe((function(e){var t=st(e,3),n=(t[0],t[1]),r=t[2];return d.runningProcesses.add((function(){return it(d,void 0,void 0,(function(){var e,t,i=this;return ot(this,(function(o){switch(o.label){case 0:return e=this.userModelClasses[n.name],t=this.modelInstanceCreator(e,r),[4,this.storage.runExclusive((function(e){return i.modelMerger.merge(e,t,n)}))];case 1:return o.sent(),[2]}}))}))}),"subscription dataSubsObservable event")}))),[3,11];case 10:o||(this.online=o,n.next({type:le.SYNC_ENGINE_NETWORK_STATUS,data:{active:this.online}}),r.forEach((function(e){return e.unsubscribe()})),r=[]),f.label=11;case 11:return e(),[2]}}))}))}),"datastore connectivity event")]}))}))}))})),this.storage.observe(null,null,dt).filter((function(e){var t=e.model;return!0===s.getModelDefinition(t).syncable})).subscribe({next:function(e){var t=e.opType,r=e.model,o=e.element,a=e.condition;return it(s,void 0,void 0,(function(){var e=this;return ot(this,(function(s){return[2,this.runningProcesses.add((function(){return it(e,void 0,void 0,(function(){var e,s,u,c,l;return ot(this,(function(d){switch(d.label){case 0:return e=this.schema.namespaces[this.namespaceResolver(r)],s=this.modelClasses.MutationEvent,u=this.getModelDefinition(r),c=Object(I.l)(a,u),l=Object(I.d)(e.relationships,this.getModelDefinition(r),t,r,o,c,s,this.modelInstanceCreator),[4,this.outbox.enqueue(this.storage,l)];case 1:return d.sent(),n.next({type:le.SYNC_ENGINE_OUTBOX_MUTATION_ENQUEUED,data:{model:r,element:o}}),n.next({type:le.SYNC_ENGINE_OUTBOX_STATUS,data:{isEmpty:!1}}),[4,i];case 2:return d.sent(),this.online&&this.mutationsProcessor.resume(),[2]}}))}))}),"storage event")]}))}))}}),n.next({type:le.SYNC_ENGINE_STORAGE_SUBSCRIBED}),[4,this.outbox.peek(this.storage)];case 4:return o=void 0===a.sent(),n.next({type:le.SYNC_ENGINE_OUTBOX_STATUS,data:{isEmpty:o}}),[4,i];case 5:return a.sent(),n.next({type:le.SYNC_ENGINE_READY}),[2]}}))}))}),"sync start")}))},e.prototype.getModelsMetadataWithNextFullSync=function(e){return it(this,void 0,void 0,(function(){var t,n=this;return ot(this,(function(r){switch(r.label){case 0:return t=Map.bind,[4,this.runningProcesses.add((function(){return n.getModelsMetadata()}),"sync/index getModelsMetadataWithNextFullSync")];case 1:return[2,new(t.apply(Map,[void 0,r.sent().map((function(t){var r=t.namespace,i=t.model,o=t.lastSync,s=t.lastFullSync,a=t.fullSyncInterval,u=(t.lastSyncPredicate,!s||s+a<e?0:o);return[n.schema.namespaces[r].models[i],[r,u]]}))]))]}}))}))},e.prototype.syncQueriesObservable=function(){var e=this;return this.online?new f.a((function(t){var n;e.runningProcesses.isOpen&&e.runningProcesses.add((function(r){return it(e,void 0,void 0,(function(){var e,i,o,s=this;return ot(this,(function(a){switch(a.label){case 0:e=!1,i=function(){var i,a,u,c,l,d,f,p,h;return ot(this,(function(g){switch(g.label){case 0:return i=new WeakMap,[4,o.getModelsMetadataWithNextFullSync(Date.now())];case 1:return a=g.sent(),u=new Set(a.keys()),[4,new Promise((function(e,o){s.runningProcesses.isOpen||e(),r.then((function(){return e()})),n=s.syncQueriesProcessor.start(a).subscribe({next:function(r){var o=r.namespace,a=r.modelDefinition,h=r.items,g=r.done,m=r.startedAt,y=r.isFullSync;return it(s,void 0,void 0,(function(){var r,s,b,w,_,S,E=this;return ot(this,(function(C){switch(C.label){case 0:return r=this.userModelClasses[a.name],i.has(r)||(i.set(r,{new:0,updated:0,deleted:0}),d=Object(O.t)(),p=void 0===p?m:Math.max(p,m)),[4,this.storage.runExclusive((function(e){return it(E,void 0,void 0,(function(){var t,n,o,s,u,c,l,d,f,p,g,m,y,b,w;return ot(this,(function(_){switch(_.label){case 0:return[4,this.outbox.getModelIds(e)];case 1:t=_.sent(),n=[],o=h.filter((function(e){var r=Object(I.h)(a,e);return!t.has(r)||(n.push(e),!1)})),s=[],_.label=2;case 2:_.trys.push([2,7,8,9]),u=at(n),c=u.next(),_.label=3;case 3:return c.done?[3,6]:(l=c.value,[4,this.modelMerger.merge(e,l,a)]);case 4:void 0!==(d=_.sent())&&s.push([l,d]),_.label=5;case 5:return c=u.next(),[3,3];case 6:return[3,9];case 7:return f=_.sent(),b={error:f},[3,9];case 8:try{c&&!c.done&&(w=u.return)&&w.call(u)}finally{if(b)throw b.error}return[7];case 9:return g=(p=s.push).apply,m=[s],[4,this.modelMerger.mergePage(e,r,o,a)];case 10:return g.apply(p,m.concat([ut.apply(void 0,[_.sent()])])),y=i.get(r),s.forEach((function(e){var t=st(e,2)[1];switch(t){case v.h.INSERT:y.new++;break;case v.h.UPDATE:y.updated++;break;case v.h.DELETE:y.deleted++;break;default:Object(O.l)(t)}})),[2]}}))}))}))];case 1:return C.sent(),g?(s=a.name,[4,this.getModelMetadata(o,s)]):[3,4];case 2:return b=C.sent(),w=b.lastFullSync,_=b.fullSyncInterval,l=_,c=void 0===c?w:Math.max(c,y?m:w),b=this.modelClasses.ModelMetadata.copyOf(b,(function(e){e.lastSync=m,e.lastFullSync=y?m:b.lastFullSync})),[4,this.storage.save(b,void 0,dt)];case 3:C.sent(),S=i.get(r),this.modelSyncedStatus.set(r,!0),t.next({type:le.SYNC_ENGINE_MODEL_SYNCED,data:{model:r,isFullSync:y,isDeltaSync:!y,counts:S}}),u.delete(a),0===u.size&&(f=Object(O.t)()-d,e(),t.next({type:le.SYNC_ENGINE_SYNC_QUERIES_READY}),n.unsubscribe()),C.label=4;case 4:return[2]}}))}))},error:function(e){t.error(e)}}),t.next({type:le.SYNC_ENGINE_SYNC_QUERIES_STARTED,data:{models:Array.from(u).map((function(e){return e.name}))}})}))];case 2:return g.sent(),h=c+l-(p+f),lt.debug("Next fullSync in "+h/1e3+" seconds. ("+new Date(Date.now()+h)+")"),[4,o.runningProcesses.add((function(t){return it(s,void 0,void 0,(function(){var n,r;return ot(this,(function(i){return r=new Promise((function(e){n=e,setTimeout(n,h)})),t.then((function(){e=!0,n()})),[2,r]}))}))}),"syncQueriesObservable sleep")];case 3:return g.sent(),[2]}}))},o=this,a.label=1;case 1:return t.closed||e?[3,3]:[5,i()];case 2:return a.sent(),[3,1];case 3:return[2]}}))}))}),"syncQueriesObservable main")})):f.a.of()},e.prototype.disconnectionHandler=function(){var e=this;return function(t){Ae.a.CONNECTION_CLOSED!==t&&Ae.a.TIMEOUT_DISCONNECT!==t||e.datastoreConnectivity.socketDisconnected()}},e.prototype.unsubscribeConnectivity=function(){this.datastoreConnectivity.unsubscribe()},e.prototype.stop=function(){return it(this,void 0,void 0,(function(){return ot(this,(function(e){switch(e.label){case 0:return lt.debug("stopping sync engine"),this.unsubscribeConnectivity(),[4,this.mutationsProcessor.stop()];case 1:return e.sent(),[4,this.subscriptionsProcessor.stop()];case 2:return e.sent(),[4,this.datastoreConnectivity.stop()];case 3:return e.sent(),[4,this.syncQueriesProcessor.stop()];case 4:return e.sent(),[4,this.runningProcesses.close()];case 5:return e.sent(),[4,this.runningProcesses.open()];case 6:return e.sent(),lt.debug("sync engine stopped and ready to restart"),[2]}}))}))},e.prototype.setupModels=function(e){return it(this,void 0,void 0,(function(){var t,n,r,i,o,s,a,u,c,l,d,f,p,h=this;return ot(this,(function(v){switch(v.label){case 0:t=e.fullSyncInterval,n=this.modelClasses.ModelMetadata,r=[],Object.values(this.schema.namespaces).forEach((function(e){Object.values(e.models).filter((function(e){return e.syncable})).forEach((function(t){if(r.push([e.name,t]),e.name===O.h){var n=h.userModelClasses[t.name];h.modelSyncedStatus.set(n,!1)}}))})),o=r.map((function(e){var r=st(e,2),o=r[0],s=r[1];return it(h,void 0,void 0,(function(){var e,r,a,u,c,l,d,f,p;return ot(this,(function(h){switch(h.label){case 0:return[4,this.getModelMetadata(o,s.name)];case 1:return e=h.sent(),r=_.a.getPredicates(this.syncPredicates.get(s),!1),a=r?JSON.stringify(r):null,void 0!==e?[3,3]:[4,this.storage.save(this.modelInstanceCreator(n,{model:s.name,namespace:o,lastSync:null,fullSyncInterval:t,lastFullSync:null,lastSyncPredicate:a}),void 0,dt)];case 2:return l=st.apply(void 0,[h.sent(),1]),d=st(l[0],1),i=d[0],[3,5];case 3:return u=e.lastSyncPredicate?e.lastSyncPredicate:null,c=u!==a,[4,this.storage.save(n.copyOf(e,(function(e){e.fullSyncInterval=t,c&&(e.lastSync=null,e.lastFullSync=null,e.lastSyncPredicate=a)})))];case 4:f=st.apply(void 0,[h.sent(),1]),p=st(f[0],1),i=p[0],h.label=5;case 5:return[2,i]}}))}))})),s={},v.label=1;case 1:return v.trys.push([1,6,7,8]),[4,Promise.all(o)];case 2:a=at.apply(void 0,[v.sent()]),u=a.next(),v.label=3;case 3:if(u.done)return[3,5];c=u.value,l=c.model,s[l]=c,v.label=4;case 4:return u=a.next(),[3,3];case 5:return[3,8];case 6:return d=v.sent(),f={error:d},[3,8];case 7:try{u&&!u.done&&(p=a.return)&&p.call(a)}finally{if(f)throw f.error}return[7];case 8:return[2,s]}}))}))},e.prototype.getModelsMetadata=function(){return it(this,void 0,void 0,(function(){var e;return ot(this,(function(t){switch(t.label){case 0:return e=this.modelClasses.ModelMetadata,[4,this.storage.query(e)];case 1:return[2,t.sent()]}}))}))},e.prototype.getModelMetadata=function(e,t){return it(this,void 0,void 0,(function(){var n,r;return ot(this,(function(i){switch(i.label){case 0:return n=this.modelClasses.ModelMetadata,r=_.a.createFromExisting(this.schema.namespaces[O.g].models[n.name],(function(n){return n.namespace("eq",e).model("eq",t)})),[4,this.storage.query(n,r,{page:0,limit:1})];case 1:return[2,st.apply(void 0,[i.sent(),1])[0]]}}))}))},e.prototype.getModelDefinition=function(e){var t=this.namespaceResolver(e);return this.schema.namespaces[t].models[e.name]},e.getNamespace=function(){return{name:O.g,relationships:{},enums:{OperationType:{name:"OperationType",values:["CREATE","UPDATE","DELETE"]}},nonModels:{},models:{MutationEvent:{name:"MutationEvent",pluralName:"MutationEvents",syncable:!1,fields:{id:{name:"id",type:"ID",isRequired:!0,isArray:!1},model:{name:"model",type:"String",isRequired:!0,isArray:!1},data:{name:"data",type:"String",isRequired:!0,isArray:!1},modelId:{name:"modelId",type:"String",isRequired:!0,isArray:!1},operation:{name:"operation",type:{enum:"Operationtype"},isArray:!1,isRequired:!0},condition:{name:"condition",type:"String",isArray:!1,isRequired:!0}}},ModelMetadata:{name:"ModelMetadata",pluralName:"ModelsMetadata",syncable:!1,fields:{id:{name:"id",type:"ID",isRequired:!0,isArray:!1},namespace:{name:"namespace",type:"String",isRequired:!0,isArray:!1},model:{name:"model",type:"String",isRequired:!0,isArray:!1},lastSync:{name:"lastSync",type:"Int",isRequired:!1,isArray:!1},lastFullSync:{name:"lastFullSync",type:"Int",isRequired:!1,isArray:!1},fullSyncInterval:{name:"fullSyncInterval",type:"Int",isRequired:!0,isArray:!1},lastSyncPredicate:{name:"lastSyncPredicate",type:"String",isRequired:!1,isArray:!1}}}}}},e}(),pt=function(){return(pt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},ht=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},vt=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},gt=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s};Object(d.e)(!0),Object(d.b)();var mt,yt,bt,wt,_t,St,Et=new s.a("DataStore"),Ct=(Object(O.N)(Date.now()),a.a.browserOrNode().isNode),At=new WeakMap,Ot=new WeakMap,It=function(e){var t=At.get(e);return mt.namespaces[t].models[e.name]},Tt=function(e){return Object(O.H)(e)&&At.has(e)},xt=function(e){return At.get(e)},Pt=function(){if(1){var e="Schema is not initialized. DataStore will not function as expected. This could happen if you have multiple versions of DataStore installed. Please see https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js/#check-for-duplicate-versions";throw Et.error(e),new Error(e)}},kt=new WeakSet;function Dt(e,t){return kt.add(t),new e(t)}function Nt(e){return"string"==typeof e}function Lt(e){var t=e.localModel,n=e.modelConstructor,r=e.remoteModel._version;return Dt(n,pt(pt({},t),{_version:r}))}function Mt(e){Et.warn(e)}function jt(e,t){var n;switch(e){case O.a:n=wt[t];break;case O.h:n=bt[t];break;case O.g:n=yt[t];break;case O.f:n=undefined[t];break;default:Object(O.l)(e)}if(Tt(n))return n;var r="Model name is not valid for namespace. modelName: "+t+", namespace: "+e;throw Et.error(r),new Error(r)}function Rt(e,t){return ht(this,void 0,void 0,(function(){var n,r,i=this;return vt(this,(function(o){switch(o.label){case 0:return n=wt.Setting,r=mt.namespaces[O.a].models.Setting,[4,e.runExclusive((function(e){return ht(i,void 0,void 0,(function(){var i,o;return vt(this,(function(s){switch(s.label){case 0:return[4,e.query(n,_.a.createFromExisting(r,(function(e){return e.key("eq","schemaVersion")})),{page:0,limit:1})];case 1:return i=gt.apply(void 0,[s.sent(),1]),void 0===(o=i[0])||void 0===o.value?[3,4]:JSON.parse(o.value)===t?[3,3]:[4,e.clear(!1)];case 2:s.sent(),s.label=3;case 3:return[3,6];case 4:return[4,e.save(Dt(n,{key:"schemaVersion",value:JSON.stringify(t)}))];case 5:s.sent(),s.label=6;case 6:return[2]}}))}))}))];case 1:return o.sent(),[2]}}))}))}!function(e){e.NotRunning="Not Running",e.Starting="Starting",e.Running="Running",e.Stopping="Stopping",e.Clearing="Clearing"}(St||(St={}));var Ut=new(function(){function e(){var e=this;this.Auth=i.a,this.API=r.a,this.Cache=o.b,this.amplifyConfig={},this.syncPredicates=new WeakMap,this.amplifyContext={Auth:this.Auth,API:this.API,Cache:this.Cache},this.runningProcesses=new u.a,this.state=St.NotRunning,this.start=function(){return ht(e,void 0,void 0,(function(){var e=this;return vt(this,(function(t){return[2,this.runningProcesses.add((function(){return ht(e,void 0,void 0,(function(){var e,t,n,r=this;return vt(this,(function(i){switch(i.label){case 0:return this.state=St.Starting,void 0!==this.initialized?[3,1]:(Et.debug("Starting DataStore"),this.initialized=new Promise((function(e,t){r.initResolve=e,r.initReject=t})),[3,3]);case 1:return[4,this.initialized];case 2:return i.sent(),[2];case 3:return this.storage=new Ce(mt,xt,jt,Dt,this.storageAdapter,this.sessionId),[4,this.storage.init()];case 4:return i.sent(),Pt(),[4,Rt(this.storage,mt.version)];case 5:return i.sent(),(e=this.amplifyConfig.aws_appsync_graphqlEndpoint)?(Et.debug("GraphQL endpoint available",e),t=this,[4,this.processSyncExpressions()]):[3,7];case 6:return t.syncPredicates=i.sent(),this.sync=new ft(mt,xt,yt,bt,this.storage,Dt,this.conflictHandler,this.errorHandler,this.syncPredicates,this.amplifyConfig,this.authModeStrategy,this.amplifyContext,this.connectivityMonitor),n=1e3*this.fullSyncInterval*60,_t=this.sync.start({fullSyncInterval:n}).subscribe({next:function(e){var t=e.type,n=e.data;t===(Ct?le.SYNC_ENGINE_SYNC_QUERIES_READY:le.SYNC_ENGINE_STORAGE_SUBSCRIBED)&&r.initResolve(),c.a.dispatch("datastore",{event:t,data:n})},error:function(e){Et.warn("Sync error",e),r.initReject()}}),[3,8];case 7:Et.warn("Data won't be synchronized. No GraphQL endpoint configured. Did you forget `Amplify.configure(awsconfig)`?",{config:this.amplifyConfig}),this.initResolve(),i.label=8;case 8:return[4,this.initialized];case 9:return i.sent(),this.state=St.Running,[2]}}))}))}),"datastore start").catch(this.handleAddProcError("DataStore.start()"))]}))}))},this.query=function(t,n,r){return ht(e,void 0,void 0,(function(){var e=this;return vt(this,(function(i){return[2,this.runningProcesses.add((function(){return ht(e,void 0,void 0,(function(){var e,i,o,s,a,u;return vt(this,(function(c){switch(c.label){case 0:return[4,this.start()];case 1:if(c.sent(),!Tt(t))throw s="Constructor is not for a valid model",Et.error(s,{modelConstructor:t}),new Error(s);if("string"==typeof n&&void 0!==r&&Et.warn("Pagination is ignored when querying by id"),e=It(t),i=Object(O.m)(e),Nt(n)){if(i.length>1)throw s=O.j.queryByPkWithCompositeKeyPresent,Et.error(s,{keyFields:i}),new Error(s);o=_.a.createForSingleField(e,i[0],n)}else o=Object(v.n)(n,e)?_.a.createForPk(e,n):Object(_.c)(n)?void 0:_.a.createFromExisting(e,n);return a=this.processPagination(e,r),Et.debug("params ready",{modelConstructor:t,predicate:_.a.getPredicates(o,!1),pagination:pt(pt({},a),{sort:S.a.getPredicates(a&&a.sort,!1)})}),[4,this.storage.query(t,o,a)];case 2:return u=c.sent(),[2,Nt(n)||Object(v.n)(n,e)?u[0]:u]}}))}))}),"datastore query").catch(this.handleAddProcError("DataStore.query()"))]}))}))},this.save=function(t,n){return ht(e,void 0,void 0,(function(){var e=this;return vt(this,(function(r){return[2,this.runningProcesses.add((function(){return ht(e,void 0,void 0,(function(){var e,r,i,o,s,a=this;return vt(this,(function(u){switch(u.label){case 0:return[4,this.start()];case 1:if(u.sent(),e=Ot.get(t),r=t?t.constructor:void 0,!Tt(r))throw i="Object is not an instance of a valid model",Et.error(i,{model:t}),new Error(i);return o=It(r),s=_.a.createFromExisting(o,n),[4,this.storage.runExclusive((function(n){return ht(a,void 0,void 0,(function(){return vt(this,(function(i){switch(i.label){case 0:return[4,n.save(t,s,void 0,e)];case 1:return i.sent(),[2,n.query(r,_.a.createForPk(o,t))]}}))}))}))];case 2:return[2,gt.apply(void 0,[u.sent(),1])[0]]}}))}))}),"datastore save").catch(this.handleAddProcError("DataStore.save()"))]}))}))},this.setConflictHandler=function(t){var n=t.DataStore;return n&&n.conflictHandler?n.conflictHandler:e.conflictHandler===Lt&&t.conflictHandler?t.conflictHandler:e.conflictHandler||Lt},this.setErrorHandler=function(t){var n=t.DataStore;return n&&n.errorHandler?n.errorHandler:e.errorHandler===Mt&&t.errorHandler?t.errorHandler:e.errorHandler||Mt},this.delete=function(t,n){return ht(e,void 0,void 0,(function(){var e=this;return vt(this,(function(r){return[2,this.runningProcesses.add((function(){return ht(e,void 0,void 0,(function(){var e,r,i,o,s,a,u,c;return vt(this,(function(l){switch(l.label){case 0:return[4,this.start()];case 1:if(l.sent(),!t)throw u="Model or Model Constructor required",Et.error(u,{modelOrConstructor:t}),new Error(u);if(!Tt(t))return[3,3];if(o=t,!n)throw u="Id to delete or criteria required. Do you want to delete all? Pass Predicates.ALL",Et.error(u,{identifierOrCriteria:n}),new Error(u);if(s=It(o),"string"==typeof n){if((r=Object(O.m)(s)).length>1)throw u=O.j.deleteByPkWithCompositeKeyPresent,Et.error(u,{keyFields:r}),new Error(u);e=_.a.createForSingleField(It(o),r[0],n)}else if(!(e=Object(v.n)(n,s)?_.a.createForPk(s,n):_.a.createFromExisting(s,n))||!_.a.isValidPredicate(e))throw u="Criteria required. Do you want to delete all? Pass Predicates.ALL",Et.error(u,{condition:e}),new Error(u);return[4,this.storage.delete(o,e)];case 2:return[2,gt.apply(void 0,[l.sent(),1])[0]];case 3:if(i=t,o=Object.getPrototypeOf(i||{}).constructor,!Tt(o))throw u="Object is not an instance of a valid model",Et.error(u,{model:i}),new Error(u);if(s=It(o),a=_.a.createForPk(s,i),n){if("function"!=typeof n)throw u="Invalid criteria",Et.error(u,{identifierOrCriteria:n}),new Error(u);e=n(a)}else e=a;return[4,this.storage.delete(i,e)];case 4:return c=gt.apply(void 0,[l.sent(),1]),[2,gt(c[0],1)[0]]}}))}))}),"datastore delete").catch(this.handleAddProcError("DataStore.delete()"))]}))}))},this.observe=function(t,n){var r,i=t&&Tt(t)?t:void 0;if(t&&void 0===i){var o=t,s=o&&Object.getPrototypeOf(o).constructor;if(Tt(s))return n&&Et.warn("idOrCriteria is ignored when using a model instance",{model:o,identifierOrCriteria:n}),e.observe(s,o.id);var a="The model is not an instance of a PersistentModelConstructor";throw Et.error(a,{model:o}),new Error(a)}if(n&&i&&Object(v.n)(n,It(i)))throw a=O.j.observeWithObjectLiteral,Et.error(a,{objectLiteral:n}),new Error(a);if(void 0!==n&&void 0===i)throw a="Cannot provide criteria without a modelConstructor",Et.error(a,n),new Error(a);if(i&&!Tt(i))throw a="Constructor is not for a valid model",Et.error(a,{modelConstructor:i}),new Error(a);if("string"==typeof n){var u=It(i),c=gt(Object(O.m)(u),1)[0];r=_.a.createForSingleField(It(i),c,n)}else r=Object(_.c)(n)?void 0:i&&_.a.createFromExisting(It(i),n);return new f.a((function(t){var n;return e.runningProcesses.add((function(){return ht(e,void 0,void 0,(function(){var e=this;return vt(this,(function(o){switch(o.label){case 0:return[4,this.start()];case 1:return o.sent(),n=this.storage.observe(i,r).filter((function(e){var t=e.model;return xt(t)===O.h})).subscribe({next:function(n){return e.runningProcesses.isOpen&&e.runningProcesses.add((function(){return ht(e,void 0,void 0,(function(){var e,r,i,o,s;return vt(this,(function(a){switch(a.label){case 0:return e=n,"DELETE"===n.opType?[3,2]:(r=It(n.model),i=Object(O.m)(r),o=Object(O.o)(n.element,i),[4,this.query(n.model,o)]);case 1:s=a.sent(),e=pt(pt({},e),{element:s}),a.label=2;case 2:return t.next(e),[2]}}))}))}),"datastore observe message handler")},error:function(e){return t.error(e)},complete:function(){return t.complete()}}),[2]}}))}))}),"datastore observe observable initialization").catch(e.handleAddProcError("DataStore.observe()")).catch((function(e){t.error(e)})),e.runningProcesses.addCleaner((function(){return ht(e,void 0,void 0,(function(){return vt(this,(function(e){return n&&n.unsubscribe(),[2]}))}))}),"DataStore.observe() cleanup")}))},this.observeQuery=function(t,n,r){return new f.a((function(i){var o,s,a=new Map,u=new Map,l=[],d=function(){var e=E();C(e)},f=new O.c({callback:d,errorHandler:i.error,maxInterval:2e3}),p=(r||{}).sort,h=p?{sort:p}:void 0,v=It(t),g=Object(O.m)(v);s=Nt(n)?_.a.createForSingleField(v,g[0],n):Object(_.c)(n)?void 0:_.a.createFromExisting(v,n);var m=_.a.getPredicates(s,!1)||{},y=m.predicates,b=m.type,w=!!y;e.runningProcesses.add((function(){return ht(e,void 0,void 0,(function(){var e,r=this;return vt(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,this.query(t,n,h)];case 1:return s.sent().forEach((function(e){var n=It(t),r=Object(I.h)(n,e);a.set(r,e)})),o=this.observe(t).subscribe((function(e){var t,n,i=e.element,o=e.model,s=e.opType,c=It(o),d=Object(I.h)(c,i);if(w&&!Object(O.R)(i,b,y)){if("UPDATE"!==s||!a.has(d)&&!u.has(d))return;l.push(d)}"DELETE"===s?l.push(d):u.set(d,i);var p=null!==(n=null===(t=r.sync)||void 0===t?void 0:t.getModelSyncedStatus(o))&&void 0!==n&&n;(u.size-l.length>=r.syncPageSize||p)&&f.resolve(),f.start()})),d(),[3,3];case 2:return e=s.sent(),i.error(e),[3,3];case 3:return[2]}}))}))}),"datastore observequery startup").catch(e.handleAddProcError("DataStore.observeQuery()")).catch((function(e){i.error(e)}));var E=function(){var n,i,o=null!==(i=null===(n=e.sync)||void 0===n?void 0:n.getModelSyncedStatus(t))&&void 0!==i&&i,s=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(gt(arguments[t]));return e}(Array.from(a.values()),Array.from(u.values()));return(null==r?void 0:r.sort)&&A(s),a.clear(),s.forEach((function(e){var n=It(t),r=Object(I.h)(n,e);a.set(r,e)})),l.forEach((function(e){return a.delete(e)})),{items:Array.from(a.values()),isSynced:o}},C=function(e){i.next(e),u.clear(),l=[]},A=function(n){var i=It(t),o=e.processPagination(i,r),s=S.a.getPredicates(o.sort);if(s.length){var a=Object(O.P)(s);n.sort(a)}};return c.a.listen("datastore",(function e(n){var r,i=n.payload,o=i.event,s=i.data;o===le.SYNC_ENGINE_MODEL_SYNCED&&(null===(r=null==s?void 0:s.model)||void 0===r?void 0:r.name)===t.name&&(d(),c.a.remove("datastore",e))})),e.runningProcesses.addCleaner((function(){return ht(e,void 0,void 0,(function(){return vt(this,(function(e){return o&&o.unsubscribe(),[2]}))}))}),"datastore observequery cleaner")}))},this.configure=function(t){void 0===t&&(t={}),e.amplifyContext.Auth=e.Auth,e.amplifyContext.API=e.API,e.amplifyContext.Cache=e.Cache;var n=t.DataStore,r=t.authModeStrategyType,i=(t.conflictHandler,t.errorHandler,t.maxRecordsToSync),o=t.syncPageSize,s=t.fullSyncInterval,a=t.syncExpressions,u=t.authProviders,c=t.storageAdapter,l=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(t,["DataStore","authModeStrategyType","conflictHandler","errorHandler","maxRecordsToSync","syncPageSize","fullSyncInterval","syncExpressions","authProviders","storageAdapter"]);switch(e.amplifyConfig=pt(pt({},l),e.amplifyConfig),e.conflictHandler=e.setConflictHandler(t),e.errorHandler=e.setErrorHandler(t),n&&n.authModeStrategyType||r||v.a.DEFAULT){case v.a.MULTI_AUTH:e.authModeStrategy=b(e.amplifyContext);break;case v.a.DEFAULT:default:e.authModeStrategy=w}e.amplifyConfig.authProviders=n&&n.authProviders||u,e.syncExpressions=n&&n.syncExpressions||a||e.syncExpressions,e.maxRecordsToSync=n&&n.maxRecordsToSync||i||e.maxRecordsToSync||1e4,e.amplifyConfig.maxRecordsToSync=e.maxRecordsToSync,e.syncPageSize=n&&n.syncPageSize||o||e.syncPageSize||1e3,e.amplifyConfig.syncPageSize=e.syncPageSize,e.fullSyncInterval=n&&n.fullSyncInterval||s||e.fullSyncInterval||1440,e.storageAdapter=n&&n.storageAdapter||c||e.storageAdapter||void 0,e.sessionId=e.retrieveSessionId()}}return e.prototype.getModuleName=function(){return"DataStore"},e.prototype.handleAddProcError=function(e){var t=this;return function(n){throw n.message.startsWith("BackgroundManagerNotOpenError")?new Error(["DataStoreStateError: Tried to execute `"+e+'` while DataStore was "'+t.state+'".','This can only be done while DataStore is "Started" or "Stopped". To remedy:',"Ensure all calls to `stop()` and `clear()` have completed first.","If this is not possible, retry the operation until it succeeds."].join("\n")):n}},e.prototype.clear=function(){return ht(this,void 0,void 0,(function(){return vt(this,(function(e){switch(e.label){case 0:return Pt(),this.state=St.Clearing,[4,this.runningProcesses.close()];case 1:return e.sent(),void 0!==this.storage?[3,3]:(this.storage=new Ce(mt,xt,jt,Dt,this.storageAdapter,this.sessionId),[4,this.storage.init()]);case 2:e.sent(),e.label=3;case 3:return _t&&!_t.closed&&_t.unsubscribe(),this.sync?[4,this.sync.stop()]:[3,5];case 4:e.sent(),e.label=5;case 5:return[4,this.storage.clear()];case 6:return e.sent(),this.initialized=void 0,this.storage=void 0,this.sync=void 0,this.syncPredicates=new WeakMap,[4,this.runningProcesses.open()];case 7:return e.sent(),this.state=St.NotRunning,[2]}}))}))},e.prototype.stop=function(){return ht(this,void 0,void 0,(function(){return vt(this,(function(e){switch(e.label){case 0:return this.state=St.Stopping,[4,this.runningProcesses.close()];case 1:return e.sent(),_t&&!_t.closed&&_t.unsubscribe(),this.sync?[4,this.sync.stop()]:[3,3];case 2:e.sent(),e.label=3;case 3:return this.initialized=void 0,this.sync=void 0,[4,this.runningProcesses.open()];case 4:return e.sent(),this.state=St.NotRunning,[2]}}))}))},e.prototype.processPagination=function(e,t){var n,r=t||{},i=r.limit,o=r.page,s=r.sort;if(void 0!==i||void 0!==o||void 0!==s){if(void 0!==o&&void 0===i)throw new Error("Limit is required when requesting a page");if(void 0!==o){if("number"!=typeof o)throw new Error("Page should be a number");if(o<0)throw new Error("Page can't be negative")}if(void 0!==i){if("number"!=typeof i)throw new Error("Limit should be a number");if(i<0)throw new Error("Limit can't be negative")}return s&&(n=S.a.createFromExisting(e,t.sort)),{limit:i,page:o,sort:n}}},e.prototype.processSyncExpressions=function(){return ht(this,void 0,void 0,(function(){var e,t=this;return vt(this,(function(n){switch(n.label){case 0:return this.syncExpressions&&this.syncExpressions.length?[4,Promise.all(this.syncExpressions.map((function(e){return ht(t,void 0,void 0,(function(){var t,n,r,i,o,s;return vt(this,(function(a){switch(a.label){case 0:return[4,e];case 1:return t=a.sent(),n=t.modelConstructor,r=t.conditionProducer,i=It(n),[4,this.unwrapPromise(r)];case 2:return o=a.sent(),Object(_.c)(o)?[2,[i,null]]:(s=this.createFromCondition(i,o),[2,[i,s]])}}))}))})))]:[2,new WeakMap];case 1:return e=n.sent(),[2,this.weakMapFromEntries(e)]}}))}))},e.prototype.createFromCondition=function(e,t){try{return _.a.createFromExisting(e,t)}catch(e){throw Et.error("Error creating Sync Predicate"),e}},e.prototype.unwrapPromise=function(e){return ht(this,void 0,void 0,(function(){var t;return vt(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e()];case 1:return[2,n.sent()];case 2:if((t=n.sent())instanceof TypeError)return[2,e];throw t;case 3:return[2]}}))}))},e.prototype.weakMapFromEntries=function(e){return e.reduce((function(e,t){var n=gt(t,2),r=n[0],i=n[1];if(e.has(r)){var o=r.name;return Et.warn("You can only utilize one Sync Expression per model.\n          Subsequent sync expressions for the "+o+" model will be ignored."),e}return i&&e.set(r,i),e}),new WeakMap)},e.prototype.retrieveSessionId=function(){try{var e=sessionStorage.getItem("datastoreSessionId");if(e){var t=this.amplifyConfig.aws_appsync_graphqlEndpoint.split("/")[2];return e+"-"+gt(t.split("."),1)[0]}}catch(e){}},e}());l.a.register(Ut)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(50),i=function(){function e(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?":"!==e.protocol.slice(-1)?"".concat(e.protocol,":"):e.protocol:"https:",this.path=e.path?"/"!==e.path.charAt(0)?"/".concat(e.path):e.path:"/"}return e.isInstance=function(e){if(!e)return!1;var t=e;return"method"in t&&"protocol"in t&&"hostname"in t&&"path"in t&&"object"==typeof t.query&&"object"==typeof t.headers},e.prototype.clone=function(){var t,n=new e(Object(r.a)(Object(r.a)({},this),{headers:Object(r.a)({},this.headers)}));return n.query&&(n.query=(t=n.query,Object.keys(t).reduce((function(e,n){var i,o=t[n];return Object(r.a)(Object(r.a)({},e),((i={})[n]=Array.isArray(o)?Object(r.e)([],Object(r.d)(o),!1):o,i))}),{}))),n},e}()},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",(function(){return _}));var i=n(95);function o(e,t){for(var n,r=/\r\n|[\n\r]/g,i=1,o=t+1;(n=r.exec(e.body))&&n.index<t;)i+=1,o=t+1-(n.index+n[0].length);return{line:i,column:o}}function s(e){return a(e.source,o(e.source,e.start))}function a(e,t){var n=e.locationOffset.column-1,r=c(n)+e.body,i=t.line-1,o=e.locationOffset.line-1,s=t.line+o,a=1===t.line?n:0,l=t.column+a,d="".concat(e.name,":").concat(s,":").concat(l,"\n"),f=r.split(/\r\n|[\n\r]/g),p=f[i];if(p.length>120){for(var h=Math.floor(l/80),v=l%80,g=[],m=0;m<p.length;m+=80)g.push(p.slice(m,m+80));return d+u([["".concat(s),g[0]]].concat(g.slice(1,h+1).map((function(e){return["",e]})),[[" ",c(v-1)+"^"],["",g[h+1]]]))}return d+u([["".concat(s-1),f[i-1]],["".concat(s),p],["",c(l-1)+"^"],["".concat(s+1),f[i+1]]])}function u(e){var t=e.filter((function(e){return e[0],void 0!==e[1]})),n=Math.max.apply(Math,t.map((function(e){return e[0].length})));return t.map((function(e){var t,r=e[0],i=e[1];return c(n-(t=r).length)+t+(i?" | "+i:" |")})).join("\n")}function c(e){return Array(e+1).join(" ")}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){var t="function"==typeof Map?new Map:void 0;return(g=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return m(e,arguments,w(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),b(r,e)})(e)}function m(e,t,n){return(m=y()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&b(i,n.prototype),i}).apply(null,arguments)}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(g,e);var t,n,u,c,l=(t=g,n=y(),function(){var e,r=w(t);if(n){var i=w(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return h(this,e)});function g(e,t,n,i,s,a,u){var c,p,m,y;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g),(y=l.call(this,e)).name="GraphQLError",y.originalError=null!=a?a:void 0,y.nodes=S(Array.isArray(t)?t:t?[t]:void 0);for(var b=[],w=0,_=null!==(E=y.nodes)&&void 0!==E?E:[];w<_.length;w++){var E,C=_[w].loc;null!=C&&b.push(C)}b=S(b),y.source=null!=n?n:null===(c=b)||void 0===c?void 0:c[0].source,y.positions=null!=i?i:null===(p=b)||void 0===p?void 0:p.map((function(e){return e.start})),y.locations=i&&n?i.map((function(e){return o(n,e)})):null===(m=b)||void 0===m?void 0:m.map((function(e){return o(e.source,e.start)})),y.path=null!=s?s:void 0;var A,O=null==a?void 0:a.extensions;return null==u&&"object"==r(A=O)&&null!==A?y.extensions=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},O):y.extensions=null!=u?u:{},Object.defineProperties(v(y),{message:{enumerable:!0},locations:{enumerable:null!=y.locations},path:{enumerable:null!=y.path},extensions:{enumerable:null!=y.extensions&&Object.keys(y.extensions).length>0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),null!=a&&a.stack?(Object.defineProperty(v(y),"stack",{value:a.stack,writable:!0,configurable:!0}),h(y)):(Error.captureStackTrace?Error.captureStackTrace(v(y),g):Object.defineProperty(v(y),"stack",{value:Error().stack,writable:!0,configurable:!0}),y)}return u=g,(c=[{key:"toString",value:function(){return function(e){var t=e.message;if(e.nodes)for(var n=0,r=e.nodes;n<r.length;n++){var i=r[n];i.loc&&(t+="\n\n"+s(i.loc))}else if(e.source&&e.locations)for(var o=0,u=e.locations;o<u.length;o++){var c=u[o];t+="\n\n"+a(e.source,c)}return t}(this)}},{key:i.a,get:function(){return"Object"}}])&&p(u.prototype,c),g}(g(Error));function S(e){return void 0===e||0===e.length?void 0:e}},,,,,,,,,,,function(e,t,n){"use strict";t.byteLength=function(e){var t=c(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=c(e),s=r[0],a=r[1],u=new o(function(e,t,n){return 3*(t+n)/4-n}(0,s,a)),l=0,d=a>0?s-4:s;for(n=0;n<d;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;return 2===a&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,u[l++]=255&t),1===a&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t),u},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],s=0,a=n-i;s<a;s+=16383)o.push(l(e,s,s+16383>a?a:s+16383));return 1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var i,o,s=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,d=n?i-1:0,f=n?-1:1,p=e[t+d];for(d+=f,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+e[t+d],d+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+e[t+d],d+=f,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),o-=c}return(p?-1:1)*s*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,d=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,h=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+d>=1?f/u:f*Math.pow(2,1-d))*u>=2&&(s++,u/=2),s+d>=l?(a=0,s=l):s+d>=1?(a=(t*u-1)*Math.pow(2,i),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;e[n+p]=255&a,p+=h,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;e[n+p]=255&s,p+=h,s/=256,c-=8);e[n+p-h]|=128*v}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t){},function(e,t,n){var r,i,o;e.exports=(i=(r=n(38)).lib.Base,o=r.enc.Utf8,void(r.algo.HMAC=i.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=o.parse(t));var n=e.blockSize,r=4*n;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var i=this._oKey=t.clone(),s=this._iKey=t.clone(),a=i.words,u=s.words,c=0;c<n;c++)a[c]^=1549556828,u[c]^=909522486;i.sigBytes=s.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})))},function(e,t){},function(e,t,n){e.exports=self.fetch||(self.fetch=n(126).default||n(126))},function(e,t,n){(function(e,r){var i;!function(o){t&&t.nodeType,e&&e.nodeType;var s="object"==typeof r&&r;s.global!==s&&s.window!==s&&s.self;var a,u=2147483647,c=/^xn--/,l=/[^\x20-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,h=String.fromCharCode;function v(e){throw new RangeError(f[e])}function g(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function m(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+g((e=e.replace(d,".")).split("."),t).join(".")}function y(e){for(var t,n,r=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function b(e){return g(e,(function(e){var t="";return e>65535&&(t+=h((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+h(e)})).join("")}function w(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function _(e,t,n){var r=0;for(e=n?p(e/700):e>>1,e+=p(e/t);e>455;r+=36)e=p(e/35);return p(r+36*e/(e+38))}function S(e){var t,n,r,i,o,s,a,c,l,d,f,h=[],g=e.length,m=0,y=128,w=72;for((n=e.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&v("not-basic"),h.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<g;){for(o=m,s=1,a=36;i>=g&&v("invalid-input"),((c=(f=e.charCodeAt(i++))-48<10?f-22:f-65<26?f-65:f-97<26?f-97:36)>=36||c>p((u-m)/s))&&v("overflow"),m+=c*s,!(c<(l=a<=w?1:a>=w+26?26:a-w));a+=36)s>p(u/(d=36-l))&&v("overflow"),s*=d;w=_(m-o,t=h.length+1,0==o),p(m/t)>u-y&&v("overflow"),y+=p(m/t),m%=t,h.splice(m++,0,y)}return b(h)}function E(e){var t,n,r,i,o,s,a,c,l,d,f,g,m,b,S,E=[];for(g=(e=y(e)).length,t=128,n=0,o=72,s=0;s<g;++s)(f=e[s])<128&&E.push(h(f));for(r=i=E.length,i&&E.push("-");r<g;){for(a=u,s=0;s<g;++s)(f=e[s])>=t&&f<a&&(a=f);for(a-t>p((u-n)/(m=r+1))&&v("overflow"),n+=(a-t)*m,t=a,s=0;s<g;++s)if((f=e[s])<t&&++n>u&&v("overflow"),f==t){for(c=n,l=36;!(c<(d=l<=o?1:l>=o+26?26:l-o));l+=36)S=c-d,b=36-d,E.push(h(w(d+S%b,0))),c=p(S/b);E.push(h(w(c,0))),o=_(n,m,r==i),n=0,++r}++n,++t}return E.join("")}a={version:"1.4.1",ucs2:{decode:y,encode:b},decode:S,encode:E,toASCII:function(e){return m(e,(function(e){return l.test(e)?"xn--"+E(e):e}))},toUnicode:function(e){return m(e,(function(e){return c.test(e)?S(e.slice(4).toLowerCase()):e}))}},void 0===(i=function(){return a}.call(t,n,t,e))||(e.exports=i)}()}).call(this,n(73)(e),n(60))},function(e,t,n){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,n){"use strict";t.decode=t.parse=n(218),t.encode=t.stringify=n(219)},function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,o){t=t||"&",n=n||"=";var s={};if("string"!=typeof e||0===e.length)return s;var a=/\+/g;e=e.split(t);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var c=e.length;u>0&&c>u&&(c=u);for(var l=0;l<c;++l){var d,f,p,h,v=e[l].replace(a,"%20"),g=v.indexOf(n);g>=0?(d=v.substr(0,g),f=v.substr(g+1)):(d=v,f=""),p=decodeURIComponent(d),h=decodeURIComponent(f),r(s,p)?i(s[p])?s[p].push(h):s[p]=[s[p],h]:s[p]=h}return s};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,a){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?o(s(e),(function(s){var a=encodeURIComponent(r(s))+n;return i(e[s])?o(e[s],(function(e){return a+encodeURIComponent(r(e))})).join(t):a+encodeURIComponent(r(e[s]))})).join(t):a?encodeURIComponent(r(a))+n+encodeURIComponent(r(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function o(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var s=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},function(e,t,n){var r,i,o=n(127),s=n(128),a=0,u=0;e.exports=function(e,t,n){var c=t&&n||0,l=t||[],d=(e=e||{}).node||r,f=void 0!==e.clockseq?e.clockseq:i;if(null==d||null==f){var p=o();null==d&&(d=r=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==f&&(f=i=16383&(p[6]<<8|p[7]))}var h=void 0!==e.msecs?e.msecs:(new Date).getTime(),v=void 0!==e.nsecs?e.nsecs:u+1,g=h-a+(v-u)/1e4;if(g<0&&void 0===e.clockseq&&(f=f+1&16383),(g<0||h>a)&&void 0===e.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=h,u=v,i=f;var m=(1e4*(268435455&(h+=122192928e5))+v)%4294967296;l[c++]=m>>>24&255,l[c++]=m>>>16&255,l[c++]=m>>>8&255,l[c++]=255&m;var y=h/4294967296*1e4&268435455;l[c++]=y>>>8&255,l[c++]=255&y,l[c++]=y>>>24&15|16,l[c++]=y>>>16&255,l[c++]=f>>>8|128,l[c++]=255&f;for(var b=0;b<6;++b)l[c+b]=d[b];return t||s(l)}},function(e,t,n){var r=n(127),i=n(128);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[o+a]=s[a];return t||i(s)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var r=n(129),i=n(131),o=n(229),s=n(237),a=n(239),u=n(54),c=function(){function e(e){(0,s.supportsWebCrypto)((0,u.locateWindow)())?this.hash=new i.Sha256(e):(0,a.isMsWindow)((0,u.locateWindow)())?this.hash=new r.Sha256(e):this.hash=new o.Sha256(e)}return e.prototype.update=function(e,t){this.hash.update(e,t)},e.prototype.digest=function(){return this.hash.digest()},e}();t.Sha256=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEmptyData=void 0,t.isEmptyData=function(e){return"string"==typeof e?0===e.length:0===e.byteLength}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uint32ArrayFrom=t.numToUint8=t.isEmptyData=t.convertToBuffer=void 0;var r=n(225);Object.defineProperty(t,"convertToBuffer",{enumerable:!0,get:function(){return r.convertToBuffer}});var i=n(226);Object.defineProperty(t,"isEmptyData",{enumerable:!0,get:function(){return i.isEmptyData}});var o=n(227);Object.defineProperty(t,"numToUint8",{enumerable:!0,get:function(){return o.numToUint8}});var s=n(228);Object.defineProperty(t,"uint32ArrayFrom",{enumerable:!0,get:function(){return s.uint32ArrayFrom}})},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.convertToBuffer=void 0;var r=n(174),i=void 0!==e&&e.from?function(t){return e.from(t,"utf8")}:r.fromUtf8;t.convertToBuffer=function(e){return e instanceof Uint8Array?e:"string"==typeof e?i(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}}).call(this,n(12).Buffer)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEmptyData=void 0,t.isEmptyData=function(e){return"string"==typeof e?0===e.length:0===e.byteLength}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.numToUint8=void 0,t.numToUint8=function(e){return new Uint8Array([(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uint32ArrayFrom=void 0,t.uint32ArrayFrom=function(e){if(!Array.from){for(var t=new Uint32Array(e.length);0<e.length;)t[0]=e[0];return t}return Uint32Array.from(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(0,n(2).__exportStar)(n(230),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var r=n(2),i=n(132),o=n(231),s=n(232),a=function(){function e(e){if(this.hash=new o.RawSha256,e){this.outer=new o.RawSha256;var t=function(e){var t=(0,s.convertToBuffer)(e);if(t.byteLength>i.BLOCK_SIZE){var n=new o.RawSha256;n.update(t),t=n.digest()}var r=new Uint8Array(i.BLOCK_SIZE);return r.set(t),r}(e),n=new Uint8Array(i.BLOCK_SIZE);n.set(t);for(var r=0;r<i.BLOCK_SIZE;r++)t[r]^=54,n[r]^=92;for(this.hash.update(t),this.outer.update(n),r=0;r<t.byteLength;r++)t[r]=0}}return e.prototype.update=function(e){if(!(0,s.isEmptyData)(e)&&!this.error)try{this.hash.update((0,s.convertToBuffer)(e))}catch(e){this.error=e}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return(0,r.__awaiter)(this,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){return[2,this.digestSync()]}))}))},e}();t.Sha256=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RawSha256=void 0;var r=n(132),i=function(){function e(){this.state=Int32Array.from(r.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=0,n=e.byteLength;if(this.bytesHashed+=n,8*this.bytesHashed>r.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=e[t++],n--,this.bufferLength===r.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var e=8*this.bytesHashed,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(t.setUint8(this.bufferLength++,128),n%r.BLOCK_SIZE>=r.BLOCK_SIZE-8){for(var i=this.bufferLength;i<r.BLOCK_SIZE;i++)t.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(i=this.bufferLength;i<r.BLOCK_SIZE-8;i++)t.setUint8(i,0);t.setUint32(r.BLOCK_SIZE-8,Math.floor(e/4294967296),!0),t.setUint32(r.BLOCK_SIZE-4,e),this.hashBuffer(),this.finished=!0}var o=new Uint8Array(r.DIGEST_LENGTH);for(i=0;i<8;i++)o[4*i]=this.state[i]>>>24&255,o[4*i+1]=this.state[i]>>>16&255,o[4*i+2]=this.state[i]>>>8&255,o[4*i+3]=this.state[i]>>>0&255;return o},e.prototype.hashBuffer=function(){for(var e=this.buffer,t=this.state,n=t[0],i=t[1],o=t[2],s=t[3],a=t[4],u=t[5],c=t[6],l=t[7],d=0;d<r.BLOCK_SIZE;d++){if(d<16)this.temp[d]=(255&e[4*d])<<24|(255&e[4*d+1])<<16|(255&e[4*d+2])<<8|255&e[4*d+3];else{var f=this.temp[d-2],p=(f>>>17|f<<15)^(f>>>19|f<<13)^f>>>10,h=((f=this.temp[d-15])>>>7|f<<25)^(f>>>18|f<<14)^f>>>3;this.temp[d]=(p+this.temp[d-7]|0)+(h+this.temp[d-16]|0)}var v=(((a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7))+(a&u^~a&c)|0)+(l+(r.KEY[d]+this.temp[d]|0)|0)|0,g=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&i^n&o^i&o)|0;l=c,c=u,u=a,a=s+v|0,s=o,o=i,i=n,n=v+g|0}t[0]+=n,t[1]+=i,t[2]+=o,t[3]+=s,t[4]+=a,t[5]+=u,t[6]+=c,t[7]+=l},e}();t.RawSha256=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uint32ArrayFrom=t.numToUint8=t.isEmptyData=t.convertToBuffer=void 0;var r=n(233);Object.defineProperty(t,"convertToBuffer",{enumerable:!0,get:function(){return r.convertToBuffer}});var i=n(234);Object.defineProperty(t,"isEmptyData",{enumerable:!0,get:function(){return i.isEmptyData}});var o=n(235);Object.defineProperty(t,"numToUint8",{enumerable:!0,get:function(){return o.numToUint8}});var s=n(236);Object.defineProperty(t,"uint32ArrayFrom",{enumerable:!0,get:function(){return s.uint32ArrayFrom}})},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.convertToBuffer=void 0;var r=n(404),i=void 0!==e&&e.from?function(t){return e.from(t,"utf8")}:r.fromUtf8;t.convertToBuffer=function(e){return e instanceof Uint8Array?e:"string"==typeof e?i(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}}).call(this,n(12).Buffer)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEmptyData=void 0,t.isEmptyData=function(e){return"string"==typeof e?0===e.length:0===e.byteLength}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.numToUint8=void 0,t.numToUint8=function(e){return new Uint8Array([(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uint32ArrayFrom=void 0,t.uint32ArrayFrom=function(e){if(!Array.from){for(var t=new Uint32Array(e.length);0<e.length;)t[0]=e[0];return t}return Uint32Array.from(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(2).__exportStar(n(238),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.supportsZeroByteGCM=t.supportsSubtleCrypto=t.supportsSecureRandom=t.supportsWebCrypto=void 0;var r=n(2),i=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function o(e){return"object"==typeof e&&"object"==typeof e.crypto&&"function"==typeof e.crypto.getRandomValues}function s(e){return e&&i.every((function(t){return"function"==typeof e[t]}))}t.supportsWebCrypto=function(e){return!(!o(e)||"object"!=typeof e.crypto.subtle)&&s(e.crypto.subtle)},t.supportsSecureRandom=o,t.supportsSubtleCrypto=s,t.supportsZeroByteGCM=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){switch(n.label){case 0:if(!s(e))return[2,!1];n.label=1;case 1:return n.trys.push([1,4,,5]),[4,e.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return t=n.sent(),[4,e.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},t,new Uint8Array(0))];case 3:return[2,16===n.sent().byteLength];case 4:return n.sent(),[2,!1];case 5:return[2]}}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);r.__exportStar(n(240),t),r.__exportStar(n(241),t),r.__exportStar(n(242),t),r.__exportStar(n(243),t),r.__exportStar(n(244),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMsWindow=void 0;var r=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];t.isMsWindow=function(e){if(function(e){return"MSInputMethodContext"in e&&"msCrypto"in e}(e)&&void 0!==e.msCrypto.subtle){var t=e.msCrypto,n=t.getRandomValues,i=t.subtle;return r.map((function(e){return i[e]})).concat(n).every((function(e){return"function"==typeof e}))}return!1}},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=n(134),o=n(247),s=n(399),a=function(){function e(e){if(this.hash=new o.RawSha256,e){this.outer=new o.RawSha256;var t=function(e){var t=u(e);if(t.byteLength>i.BLOCK_SIZE){var n=new o.RawSha256;n.update(t),t=n.digest()}var r=new Uint8Array(i.BLOCK_SIZE);return r.set(t),r}(e),n=new Uint8Array(i.BLOCK_SIZE);n.set(t);for(var r=0;r<i.BLOCK_SIZE;r++)t[r]^=54,n[r]^=92;for(this.hash.update(t),this.outer.update(n),r=0;r<t.byteLength;r++)t[r]=0}}return e.prototype.update=function(e){if(!function(e){return"string"==typeof e?0===e.length:0===e.byteLength}(e)&&!this.error)try{this.hash.update(u(e))}catch(e){this.error=e}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return[2,this.digestSync()]}))}))},e}();function u(e){return"string"==typeof e?s.fromUtf8(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}t.Sha256=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(134),i=function(){function e(){this.state=Int32Array.from(r.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=0,n=e.byteLength;if(this.bytesHashed+=n,8*this.bytesHashed>r.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=e[t++],n--,this.bufferLength===r.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var e=8*this.bytesHashed,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(t.setUint8(this.bufferLength++,128),n%r.BLOCK_SIZE>=r.BLOCK_SIZE-8){for(var i=this.bufferLength;i<r.BLOCK_SIZE;i++)t.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(i=this.bufferLength;i<r.BLOCK_SIZE-8;i++)t.setUint8(i,0);t.setUint32(r.BLOCK_SIZE-8,Math.floor(e/4294967296),!0),t.setUint32(r.BLOCK_SIZE-4,e),this.hashBuffer(),this.finished=!0}var o=new Uint8Array(r.DIGEST_LENGTH);for(i=0;i<8;i++)o[4*i]=this.state[i]>>>24&255,o[4*i+1]=this.state[i]>>>16&255,o[4*i+2]=this.state[i]>>>8&255,o[4*i+3]=this.state[i]>>>0&255;return o},e.prototype.hashBuffer=function(){for(var e=this.buffer,t=this.state,n=t[0],i=t[1],o=t[2],s=t[3],a=t[4],u=t[5],c=t[6],l=t[7],d=0;d<r.BLOCK_SIZE;d++){if(d<16)this.temp[d]=(255&e[4*d])<<24|(255&e[4*d+1])<<16|(255&e[4*d+2])<<8|255&e[4*d+3];else{var f=this.temp[d-2],p=(f>>>17|f<<15)^(f>>>19|f<<13)^f>>>10,h=((f=this.temp[d-15])>>>7|f<<25)^(f>>>18|f<<14)^f>>>3;this.temp[d]=(p+this.temp[d-7]|0)+(h+this.temp[d-16]|0)}var v=(((a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7))+(a&u^~a&c)|0)+(l+(r.KEY[d]+this.temp[d]|0)|0)|0,g=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&i^n&o^i&o)|0;l=c,c=u,u=a,a=s+v|0,s=o,o=i,i=n,n=v+g|0}t[0]+=n,t[1]+=i,t[2]+=o,t[3]+=s,t[4]+=a,t[5]+=u,t[6]+=c,t[7]+=l},e}();t.RawSha256=i},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.convertToBuffer=void 0;var r=n(401),i=void 0!==e&&e.from?function(t){return e.from(t,"utf8")}:r.fromUtf8;t.convertToBuffer=function(e){return e instanceof Uint8Array?e:"string"==typeof e?i(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}}).call(this,n(12).Buffer)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEmptyData=void 0,t.isEmptyData=function(e){return"string"==typeof e?0===e.length:0===e.byteLength}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.numToUint8=void 0,t.numToUint8=function(e){return new Uint8Array([(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uint32ArrayFrom=void 0,t.uint32ArrayFrom=function(e){if(!Array.from){for(var t=new Uint32Array(e.length);0<e.length;)t[0]=e[0];return t}return Uint32Array.from(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AwsCrc32=void 0;var r=n(2),i=n(135),o=n(79),s=function(){function e(){this.crc32=new o.Crc32}return e.prototype.update=function(e){(0,i.isEmptyData)(e)||this.crc32.update((0,i.convertToBuffer)(e))},e.prototype.digest=function(){return(0,r.__awaiter)(this,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){return[2,(0,i.numToUint8)(this.crc32.digest())]}))}))},e}();t.AwsCrc32=s},function(e,t,n){var r=n(254),i=n(285);e.exports=function(e,t){for(var n=0,o=(t=r(t,e)).length;null!=e&&n<o;)e=e[i(t[n++])];return n&&n==o?e:void 0}},function(e,t,n){var r=n(61),i=n(255),o=n(258),s=n(282);e.exports=function(e,t){return r(e)?e:i(e,t)?[e]:o(s(e))}},function(e,t,n){var r=n(61),i=n(105),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||s.test(e)||!o.test(e)||null!=t&&e in Object(t)}},function(e,t,n){var r=n(82),i=Object.prototype,o=i.hasOwnProperty,s=i.toString,a=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,a),n=e[a];try{e[a]=void 0;var r=!0}catch(e){}var i=s.call(e);return r&&(t?e[a]=n:delete e[a]),i}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t,n){var r=n(259),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,s=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,(function(e,n,r,i){t.push(r?i.replace(o,"$1"):n||e)})),t}));e.exports=s},function(e,t,n){var r=n(260);e.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},function(e,t,n){var r=n(106);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=e.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(i.Cache||r),n}i.Cache=r,e.exports=i},function(e,t,n){var r=n(262),i=n(84),o=n(107);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},function(e,t,n){var r=n(263),i=n(268),o=n(269),s=n(270),a=n(271);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=s,u.prototype.set=a,e.exports=u},function(e,t,n){var r=n(83);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(e,t,n){var r=n(137),i=n(265),o=n(138),s=n(139),a=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,l=u.toString,d=c.hasOwnProperty,f=RegExp("^"+l.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(r(e)?f:a).test(s(e))}},function(e,t,n){var r,i=n(266),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!o&&o in e}},function(e,t,n){var r=n(55)["__core-js_shared__"];e.exports=r},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,n){var r=n(83),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},function(e,t,n){var r=n(83),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},function(e,t,n){var r=n(83);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},function(e,t){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,n){var r=n(85),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0||(n==t.length-1?t.pop():i.call(t,n,1),--this.size,0))}},function(e,t,n){var r=n(85);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},function(e,t,n){var r=n(85);e.exports=function(e){return r(this.__data__,e)>-1}},function(e,t,n){var r=n(85);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},function(e,t,n){var r=n(86);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},function(e,t,n){var r=n(86);e.exports=function(e){return r(this,e).get(e)}},function(e,t,n){var r=n(86);e.exports=function(e){return r(this,e).has(e)}},function(e,t,n){var r=n(86);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},function(e,t,n){var r=n(283);e.exports=function(e){return null==e?"":r(e)}},function(e,t,n){var r=n(82),i=n(284),o=n(61),s=n(105),a=r?r.prototype:void 0,u=a?a.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return i(t,e)+"";if(s(t))return u?u.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},function(e,t,n){var r=n(105);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},function(e,t,n){var r=n(287)(Object.keys,Object);e.exports=r},function(e,t){e.exports=function(e,t){return function(n){return e(t(n))}}},function(e,t,n){var r=n(63)(n(55),"DataView");e.exports=r},function(e,t,n){var r=n(63)(n(55),"Promise");e.exports=r},function(e,t,n){var r=n(63)(n(55),"Set");e.exports=r},function(e,t,n){var r=n(63)(n(55),"WeakMap");e.exports=r},function(e,t,n){var r=n(75),i=n(76);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},function(e,t){e.exports=function(){return!1}},function(e,t,n){var r=n(75),i=n(146),o=n(76),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&i(e.length)&&!!s[r(e)]}},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t,n){(function(e){var r=n(136),i=t&&!t.nodeType&&t,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,s=o&&o.exports===i&&r.process,a=function(){try{return o&&o.require&&o.require("util").types||s&&s.binding&&s.binding("util")}catch(e){}}();e.exports=a}).call(this,n(73)(e))},function(e,t,n){var r=n(298),i=n(76);e.exports=function e(t,n,o,s,a){return t===n||(null==t||null==n||!i(t)&&!i(n)?t!=t&&n!=n:r(t,n,o,s,e,a))}},function(e,t,n){var r=n(299),i=n(147),o=n(310),s=n(314),a=n(143),u=n(61),c=n(108),l=n(109),d="[object Object]",f=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,p,h,v){var g=u(e),m=u(t),y=g?"[object Array]":a(e),b=m?"[object Array]":a(t),w=(y="[object Arguments]"==y?d:y)==d,_=(b="[object Arguments]"==b?d:b)==d,S=y==b;if(S&&c(e)){if(!c(t))return!1;g=!0,w=!1}if(S&&!w)return v||(v=new r),g||l(e)?i(e,t,n,p,h,v):o(e,t,y,n,p,h,v);if(!(1&n)){var E=w&&f.call(e,"__wrapped__"),C=_&&f.call(t,"__wrapped__");if(E||C){var A=E?e.value():e,O=C?t.value():t;return v||(v=new r),h(A,O,n,p,v)}}return!!S&&(v||(v=new r),s(e,t,n,p,h,v))}},function(e,t,n){var r=n(84),i=n(300),o=n(301),s=n(302),a=n(303),u=n(304);function c(e){var t=this.__data__=new r(e);this.size=t.size}c.prototype.clear=i,c.prototype.delete=o,c.prototype.get=s,c.prototype.has=a,c.prototype.set=u,e.exports=c},function(e,t,n){var r=n(84);e.exports=function(){this.__data__=new r,this.size=0}},function(e,t){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},function(e,t){e.exports=function(e){return this.__data__.get(e)}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,n){var r=n(84),i=n(107),o=n(106);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var s=n.__data__;if(!i||s.length<199)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(s)}return n.set(e,t),this.size=n.size,this}},function(e,t,n){var r=n(106),i=n(306),o=n(307);function s(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}s.prototype.add=s.prototype.push=i,s.prototype.has=o,e.exports=s},function(e,t){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},function(e,t){e.exports=function(e,t){return e.has(t)}},function(e,t,n){var r=n(82),i=n(311),o=n(140),s=n(147),a=n(312),u=n(313),c=r?r.prototype:void 0,l=c?c.valueOf:void 0;e.exports=function(e,t,n,r,c,d,f){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!d(new i(e),new i(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=a;case"[object Set]":var h=1&r;if(p||(p=u),e.size!=t.size&&!h)return!1;var v=f.get(e);if(v)return v==t;r|=2,f.set(e,t);var g=s(p(e),p(t),r,c,d,f);return f.delete(e),g;case"[object Symbol]":if(l)return l.call(e)==l.call(t)}return!1}},function(e,t,n){var r=n(55).Uint8Array;e.exports=r},function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},function(e,t,n){var r=n(315),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,o,s,a){var u=1&n,c=r(e),l=c.length;if(l!=r(t).length&&!u)return!1;for(var d=l;d--;){var f=c[d];if(!(u?f in t:i.call(t,f)))return!1}var p=a.get(e),h=a.get(t);if(p&&h)return p==t&&h==e;var v=!0;a.set(e,t),a.set(t,e);for(var g=u;++d<l;){var m=e[f=c[d]],y=t[f];if(o)var b=u?o(y,m,f,t,e,a):o(m,y,f,e,t,a);if(!(void 0===b?m===y||s(m,y,n,o,a):b)){v=!1;break}g||(g="constructor"==f)}if(v&&!g){var w=e.constructor,_=t.constructor;w==_||!("constructor"in e)||!("constructor"in t)||"function"==typeof w&&w instanceof w&&"function"==typeof _&&_ instanceof _||(v=!1)}return a.delete(e),a.delete(t),v}},function(e,t,n){var r=n(316),i=n(318),o=n(321);e.exports=function(e){return r(e,o,i)}},function(e,t,n){var r=n(317),i=n(61);e.exports=function(e,t,n){var o=t(e);return i(e)?o:r(o,n(e))}},function(e,t){e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},function(e,t,n){var r=n(319),i=n(320),o=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,a=s?function(e){return null==e?[]:(e=Object(e),r(s(e),(function(t){return o.call(e,t)})))}:i;e.exports=a},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var s=e[n];t(s,n,e)&&(o[i++]=s)}return o}},function(e,t){e.exports=function(){return[]}},function(e,t,n){var r=n(322),i=n(141),o=n(145);e.exports=function(e){return o(e)?r(e):i(e)}},function(e,t,n){var r=n(323),i=n(144),o=n(61),s=n(108),a=n(324),u=n(109),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),l=!n&&i(e),d=!n&&!l&&s(e),f=!n&&!l&&!d&&u(e),p=n||l||d||f,h=p?r(e.length,String):[],v=h.length;for(var g in e)!t&&!c.call(e,g)||p&&("length"==g||d&&("offset"==g||"parent"==g)||f&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||a(g,v))||h.push(g);return h}},function(e,t){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},function(e,t){var n=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&n.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t,n){"use strict";var r=n(40),i=n(148),o=n(326),s=n(154),a=function e(t){var n=new o(t),a=i(o.prototype.request,n);return r.extend(a,o.prototype,n),r.extend(a,n),a.create=function(n){return e(s(t,n))},a}(n(87));a.Axios=o,a.Cancel=n(88),a.CancelToken=n(339),a.isCancel=n(153),a.VERSION=n(155).version,a.all=function(e){return Promise.all(e)},a.spread=n(340),a.isAxiosError=n(341),e.exports=a,e.exports.default=a},function(e,t,n){"use strict";var r=n(40),i=n(149),o=n(327),s=n(328),a=n(154),u=n(338),c=u.validators;function l(e){this.defaults=e,this.interceptors={request:new o,response:new o}}l.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=a(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&u.assertOptions(n,{silentJSONParsing:c.transitional(c.boolean),forcedJSONParsing:c.transitional(c.boolean),clarifyTimeoutError:c.transitional(c.boolean)},!1);var r=[],i=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(i=i&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));var o,l=[];if(this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)})),!i){var d=[s,void 0];for(Array.prototype.unshift.apply(d,r),d=d.concat(l),o=Promise.resolve(t);d.length;)o=o.then(d.shift(),d.shift());return o}for(var f=t;r.length;){var p=r.shift(),h=r.shift();try{f=p(f)}catch(e){h(e);break}}try{o=s(f)}catch(e){return Promise.reject(e)}for(;l.length;)o=o.then(l.shift(),l.shift());return o},l.prototype.getUri=function(e){return e=a(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){l.prototype[e]=function(t,n){return this.request(a(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){l.prototype[e]=function(t,n,r){return this.request(a(r||{},{method:e,url:t,data:n}))}})),e.exports=l},function(e,t,n){"use strict";var r=n(40);function i(){this.handlers=[]}i.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},function(e,t,n){"use strict";var r=n(40),i=n(329),o=n(153),s=n(87),a=n(88);function u(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new a("canceled")}e.exports=function(e){return u(e),e.headers=e.headers||{},e.data=i.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||s.adapter)(e).then((function(t){return u(e),t.data=i.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(u(e),t&&t.response&&(t.response.data=i.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,n){"use strict";var r=n(40),i=n(87);e.exports=function(e,t,n){var o=this||i;return r.forEach(n,(function(n){e=n.call(o,e,t)})),e}},function(e,t,n){"use strict";var r=n(40);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},function(e,t,n){"use strict";var r=n(152);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},function(e,t,n){"use strict";var r=n(40);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,o,s){var a=[];a.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),r.isString(i)&&a.push("path="+i),r.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";var r=n(334),i=n(335);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var r=n(40),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,s={};return e?(r.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t){if(s[t]&&i.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}})),s):s}},function(e,t,n){"use strict";var r=n(40);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},function(e,t,n){"use strict";var r=n(155).version,i={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){i[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var o={};i.transitional=function(e,t,n){function i(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,s){if(!1===e)throw new Error(i(r," has been removed"+(t?" in "+t:"")));return t&&!o[r]&&(o[r]=!0),!e||e(n,r,s)}},e.exports={assertOptions:function(e,t,n){if("object"!=typeof e)throw new TypeError("options must be an object");for(var r=Object.keys(e),i=r.length;i-- >0;){var o=r[i],s=t[o];if(s){var a=e[o],u=void 0===a||s(a,o,e);if(!0!==u)throw new TypeError("option "+o+" must be "+u)}else if(!0!==n)throw Error("Unknown option "+o)}},validators:i}},function(e,t,n){"use strict";var r=n(88);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},i.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";var r=n(40);e.exports=function(e){return r.isObject(e)&&!0===e.isAxiosError}},function(e,t,n){"use strict";const r=n(56),i=function(e,t,n){const o={};if(!t.alwaysCreateTextNode&&(!e.child||r.isEmptyObject(e.child))&&(!e.attrsMap||r.isEmptyObject(e.attrsMap)))return r.isExist(e.val)?e.val:"";if(r.isExist(e.val)&&("string"!=typeof e.val||""!==e.val&&e.val!==t.cdataPositionChar)){const i=r.isTagNameInArrayMode(e.tagname,t.arrayMode,n);o[t.textNodeName]=i?[e.val]:e.val}r.merge(o,e.attrsMap,t.arrayMode);const s=Object.keys(e.child);for(let a=0;a<s.length;a++){const u=s[a];if(e.child[u]&&e.child[u].length>1){o[u]=[];for(let n in e.child[u])e.child[u].hasOwnProperty(n)&&o[u].push(i(e.child[u][n],t,u))}else{const s=i(e.child[u][0],t,u),a=!0===t.arrayMode&&"object"==typeof s||r.isTagNameInArrayMode(u,t.arrayMode,n);o[u]=a?[s]:s}}return o};t.convertToJson=i},function(e,t,n){"use strict";e.exports=function(e,t,n){this.tagname=e,this.parent=t,this.child={},this.attrsMap={},this.val=n,this.addChild=function(e){Array.isArray(this.child[e.tagname])?this.child[e.tagname].push(e):this.child[e.tagname]=[e]}}},function(e,t){const n=/^[-+]?0x[a-fA-F0-9]+$/,r=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const i={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};e.exports=function(e,t={}){if(t=Object.assign({},i,t),!e||"string"!=typeof e)return e;let o=e.trim();if(void 0!==t.skipLike&&t.skipLike.test(o))return e;if(t.hex&&n.test(o))return Number.parseInt(o,16);{const n=r.exec(o);if(n){const r=n[1],i=n[2];let s=function(e){return e&&-1!==e.indexOf(".")?("."===(e=e.replace(/0+$/,""))?e="0":"."===e[0]?e="0"+e:"."===e[e.length-1]&&(e=e.substr(0,e.length-1)),e):e}(n[3]);const a=n[4]||n[6];if(!t.leadingZeros&&i.length>0&&r&&"."!==o[2])return e;if(!t.leadingZeros&&i.length>0&&!r&&"."!==o[1])return e;{const n=Number(o),u=""+n;return-1!==u.search(/[eE]/)||a?t.eNotation?n:e:-1!==o.indexOf(".")?"0"===u&&""===s||u===s||r&&u==="-"+s?n:e:i?s===u||r+s===u?n:e:o===u||o===r+u?n:e}}return e}}},function(e,t,n){"use strict";const r=n(56),i={allowBooleanAttributes:!1},o=["allowBooleanAttributes"];function s(e,t){const n=t;for(;t<e.length;t++)if("?"!=e[t]&&" "!=e[t]);else{const r=e.substr(n,t-n);if(t>5&&"xml"===r)return f("InvalidXml","XML declaration allowed only at the start of the document.",h(e,t));if("?"==e[t]&&">"==e[t+1]){t++;break}}return t}function a(e,t){if(e.length>t+5&&"-"===e[t+1]&&"-"===e[t+2]){for(t+=3;t<e.length;t++)if("-"===e[t]&&"-"===e[t+1]&&">"===e[t+2]){t+=2;break}}else if(e.length>t+8&&"D"===e[t+1]&&"O"===e[t+2]&&"C"===e[t+3]&&"T"===e[t+4]&&"Y"===e[t+5]&&"P"===e[t+6]&&"E"===e[t+7]){let n=1;for(t+=8;t<e.length;t++)if("<"===e[t])n++;else if(">"===e[t]&&(n--,0===n))break}else if(e.length>t+9&&"["===e[t+1]&&"C"===e[t+2]&&"D"===e[t+3]&&"A"===e[t+4]&&"T"===e[t+5]&&"A"===e[t+6]&&"["===e[t+7])for(t+=8;t<e.length;t++)if("]"===e[t]&&"]"===e[t+1]&&">"===e[t+2]){t+=2;break}return t}function u(e,t){let n="",r="",i=!1;for(;t<e.length;t++){if('"'===e[t]||"'"===e[t])""===r?r=e[t]:r!==e[t]||(r="");else if(">"===e[t]&&""===r){i=!0;break}n+=e[t]}return""===r&&{value:n,index:t,tagClosed:i}}t.validate=function(e,t){t=r.buildOptions(t,i,o);const n=[];let c=!1,p=!1;"\ufeff"===e[0]&&(e=e.substr(1));for(let i=0;i<e.length;i++)if("<"===e[i]&&"?"===e[i+1]){if(i+=2,i=s(e,i),i.err)return i}else{if("<"!==e[i]){if(" "===e[i]||"\t"===e[i]||"\n"===e[i]||"\r"===e[i])continue;return f("InvalidChar","char '"+e[i]+"' is not expected.",h(e,i))}{let o=i;if(i++,"!"===e[i]){i=a(e,i);continue}{let g=!1;"/"===e[i]&&(g=!0,i++);let m="";for(;i<e.length&&">"!==e[i]&&" "!==e[i]&&"\t"!==e[i]&&"\n"!==e[i]&&"\r"!==e[i];i++)m+=e[i];if(m=m.trim(),"/"===m[m.length-1]&&(m=m.substring(0,m.length-1),i--),v=m,!r.isName(v)){let t;return t=0===m.trim().length?"Invalid space after '<'.":"Tag '"+m+"' is an invalid name.",f("InvalidTag",t,h(e,i))}const y=u(e,i);if(!1===y)return f("InvalidAttr","Attributes for '"+m+"' have open quote.",h(e,i));let b=y.value;if(i=y.index,"/"===b[b.length-1]){const n=i-b.length;b=b.substring(0,b.length-1);const r=l(b,t);if(!0!==r)return f(r.err.code,r.err.msg,h(e,n+r.err.line));c=!0}else if(g){if(!y.tagClosed)return f("InvalidTag","Closing tag '"+m+"' doesn't have proper closing.",h(e,i));if(b.trim().length>0)return f("InvalidTag","Closing tag '"+m+"' can't have attributes or invalid starting.",h(e,o));{const t=n.pop();if(m!==t.tagName){let n=h(e,t.tagStartPos);return f("InvalidTag","Expected closing tag '"+t.tagName+"' (opened in line "+n.line+", col "+n.col+") instead of closing tag '"+m+"'.",h(e,o))}0==n.length&&(p=!0)}}else{const r=l(b,t);if(!0!==r)return f(r.err.code,r.err.msg,h(e,i-b.length+r.err.line));if(!0===p)return f("InvalidXml","Multiple possible root nodes found.",h(e,i));n.push({tagName:m,tagStartPos:o}),c=!0}for(i++;i<e.length;i++)if("<"===e[i]){if("!"===e[i+1]){i++,i=a(e,i);continue}if("?"!==e[i+1])break;if(i=s(e,++i),i.err)return i}else if("&"===e[i]){const t=d(e,i);if(-1==t)return f("InvalidChar","char '&' is not expected.",h(e,i));i=t}"<"===e[i]&&i--}}}var v;return c?1==n.length?f("InvalidTag","Unclosed tag '"+n[0].tagName+"'.",h(e,n[0].tagStartPos)):!(n.length>0)||f("InvalidXml","Invalid '"+JSON.stringify(n.map((e=>e.tagName)),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):f("InvalidXml","Start tag expected.",1)};const c=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function l(e,t){const n=r.getAllMatches(e,c),i={};for(let e=0;e<n.length;e++){if(0===n[e][1].length)return f("InvalidAttr","Attribute '"+n[e][2]+"' has no space in starting.",v(n[e]));if(void 0===n[e][3]&&!t.allowBooleanAttributes)return f("InvalidAttr","boolean attribute '"+n[e][2]+"' is not allowed.",v(n[e]));const r=n[e][2];if(!p(r))return f("InvalidAttr","Attribute '"+r+"' is an invalid name.",v(n[e]));if(i.hasOwnProperty(r))return f("InvalidAttr","Attribute '"+r+"' is repeated.",v(n[e]));i[r]=1}return!0}function d(e,t){if(";"===e[++t])return-1;if("#"===e[t])return function(e,t){let n=/\d/;for("x"===e[t]&&(t++,n=/[\da-fA-F]/);t<e.length;t++){if(";"===e[t])return t;if(!e[t].match(n))break}return-1}(e,++t);let n=0;for(;t<e.length;t++,n++)if(!(e[t].match(/\w/)&&n<20)){if(";"===e[t])break;return-1}return t}function f(e,t,n){return{err:{code:e,msg:t,line:n.line||n,col:n.col}}}function p(e){return r.isName(e)}function h(e,t){const n=e.substring(0,t).split(/\r?\n/);return{line:n.length,col:n[n.length-1].length+1}}function v(e){return e.startIndex+e[1].length}},function(e,t,n){"use strict";const r=function(e){return String.fromCharCode(e)},i={nilChar:r(176),missingChar:r(201),nilPremitive:r(175),missingPremitive:r(200),emptyChar:r(178),emptyValue:r(177),boundryChar:r(179),objStart:r(198),arrStart:r(204),arrayEnd:r(185)},o=[i.nilChar,i.nilPremitive,i.missingChar,i.missingPremitive,i.boundryChar,i.emptyChar,i.emptyValue,i.arrayEnd,i.objStart,i.arrStart],s=function(e,t,n){if("string"==typeof t)return e&&e[0]&&void 0!==e[0].val?a(e[0].val,t):a(e,t);{const o=void 0===(r=e)?i.missingChar:null===r?i.nilChar:!(r.child&&0===Object.keys(r.child).length&&(!r.attrsMap||0===Object.keys(r.attrsMap).length))||i.emptyChar;if(!0===o){let r="";if(Array.isArray(t)){r+=i.arrStart;const o=t[0],c=e.length;if("string"==typeof o)for(let t=0;t<c;t++){const n=a(e[t].val,o);r=u(r,n)}else for(let t=0;t<c;t++){const i=s(e[t],o,n);r=u(r,i)}r+=i.arrayEnd}else{r+=i.objStart;const o=Object.keys(t);Array.isArray(e)&&(e=e[0]);for(let i in o){const a=o[i];let c;c=!n.ignoreAttributes&&e.attrsMap&&e.attrsMap[a]?s(e.attrsMap[a],t[a],n):a===n.textNodeName?s(e.val,t[a],n):s(e.child[a],t[a],n),r=u(r,c)}}return r}return o}var r},a=function(e){switch(e){case void 0:return i.missingPremitive;case null:return i.nilPremitive;case"":return i.emptyValue;default:return e}},u=function(e,t){return c(t[0])||c(e[e.length-1])||(e+=i.boundryChar),e+t},c=function(e){return-1!==o.indexOf(e)},l=n(89),d=n(56).buildOptions;t.convert2nimn=function(e,t,n){return n=d(n,l.defaultOptions,l.props),s(e,t,n)}},function(e,t,n){"use strict";const r=n(56),i=n(56).buildOptions,o=n(89),s=function(e,t,n){let i="{";const o=Object.keys(e.child);for(let n=0;n<o.length;n++){const r=o[n];if(e.child[r]&&e.child[r].length>1){i+='"'+r+'" : [ ';for(let n in e.child[r])i+=s(e.child[r][n],t)+" , ";i=i.substr(0,i.length-1)+" ] "}else i+='"'+r+'" : '+s(e.child[r][0],t)+" ,"}return r.merge(i,e.attrsMap),r.isEmptyObject(i)?r.isExist(e.val)?e.val:"":(r.isExist(e.val)&&("string"!=typeof e.val||""!==e.val&&e.val!==t.cdataPositionChar)&&(i+='"'+t.textNodeName+'" : '+(!0!==(a=e.val)&&!1!==a&&isNaN(a)?'"'+a+'"':a)),","===i[i.length-1]&&(i=i.substr(0,i.length-2)),i+"}");var a};t.convertToJsonString=function(e,t){return(t=i(t,o.defaultOptions,o.props)).indentBy=t.indentBy||"",s(e,t,0)}},function(e,t,n){"use strict";const r=n(56).buildOptions,i={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataTagName:!1,cdataPositionChar:"\\c",format:!1,indentBy:"  ",supressEmptyNode:!1,tagValueProcessor:function(e){return e},attrValueProcessor:function(e){return e}},o=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","cdataTagName","cdataPositionChar","format","indentBy","supressEmptyNode","tagValueProcessor","attrValueProcessor","rootNodeName"];function s(e){this.options=r(e,i,o),this.options.ignoreAttributes||this.options.attrNodeName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=v),this.options.cdataTagName?this.isCDATA=g:this.isCDATA=function(){return!1},this.replaceCDATAstr=u,this.replaceCDATAarr=c,this.processTextOrObjNode=a,this.options.format?(this.indentate=h,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.supressEmptyNode?(this.buildTextNode=p,this.buildObjNode=d):(this.buildTextNode=f,this.buildObjNode=l),this.buildTextValNode=f,this.buildObjectNode=l}function a(e,t,n){const r=this.j2x(e,n+1);return void 0!==e[this.options.textNodeName]&&1===Object.keys(e).length?this.buildTextNode(r.val,t,r.attrStr,n):this.buildObjNode(r.val,t,r.attrStr,n)}function u(e,t){return e=this.options.tagValueProcessor(""+e),""===this.options.cdataPositionChar||""===e?e+"<![CDATA["+t+"]]"+this.tagEndChar:e.replace(this.options.cdataPositionChar,"<![CDATA["+t+"]]"+this.tagEndChar)}function c(e,t){if(e=this.options.tagValueProcessor(""+e),""===this.options.cdataPositionChar||""===e)return e+"<![CDATA["+t.join("]]><![CDATA[")+"]]"+this.tagEndChar;for(let n in t)e=e.replace(this.options.cdataPositionChar,"<![CDATA["+t[n]+"]]>");return e+this.newLine}function l(e,t,n,r){return n&&-1===e.indexOf("<")?this.indentate(r)+"<"+t+n+">"+e+"</"+t+this.tagEndChar:this.indentate(r)+"<"+t+n+this.tagEndChar+e+this.indentate(r)+"</"+t+this.tagEndChar}function d(e,t,n,r){return""!==e?this.buildObjectNode(e,t,n,r):this.indentate(r)+"<"+t+n+"/"+this.tagEndChar}function f(e,t,n,r){return this.indentate(r)+"<"+t+n+">"+this.options.tagValueProcessor(e)+"</"+t+this.tagEndChar}function p(e,t,n,r){return""!==e?this.buildTextValNode(e,t,n,r):this.indentate(r)+"<"+t+n+"/"+this.tagEndChar}function h(e){return this.options.indentBy.repeat(e)}function v(e){return!!e.startsWith(this.options.attributeNamePrefix)&&e.substr(this.attrPrefixLen)}function g(e){return e===this.options.cdataTagName}s.prototype.parse=function(e){return Array.isArray(e)&&this.options.rootNodeName&&this.options.rootNodeName.length>1&&(e={[this.options.rootNodeName]:e}),this.j2x(e,0).val},s.prototype.j2x=function(e,t){let n="",r="";for(let i in e)if(void 0===e[i]);else if(null===e[i])r+=this.indentate(t)+"<"+i+"/"+this.tagEndChar;else if(e[i]instanceof Date)r+=this.buildTextNode(e[i],i,"",t);else if("object"!=typeof e[i]){const o=this.isAttribute(i);o?n+=" "+o+'="'+this.options.attrValueProcessor(""+e[i])+'"':this.isCDATA(i)?e[this.options.textNodeName]?r+=this.replaceCDATAstr(e[this.options.textNodeName],e[i]):r+=this.replaceCDATAstr("",e[i]):i===this.options.textNodeName?e[this.options.cdataTagName]||(r+=this.options.tagValueProcessor(""+e[i])):r+=this.buildTextNode(e[i],i,"",t)}else if(Array.isArray(e[i]))if(this.isCDATA(i))r+=this.indentate(t),e[this.options.textNodeName]?r+=this.replaceCDATAarr(e[this.options.textNodeName],e[i]):r+=this.replaceCDATAarr("",e[i]);else{const n=e[i].length;for(let o=0;o<n;o++){const n=e[i][o];void 0===n||(r+=null===n?this.indentate(t)+"<"+i+"/"+this.tagEndChar:"object"==typeof n?this.processTextOrObjNode(n,i,t):this.buildTextNode(n,i,"",t))}}else if(this.options.attrNodeName&&i===this.options.attrNodeName){const t=Object.keys(e[i]),r=t.length;for(let o=0;o<r;o++)n+=" "+t[o]+'="'+this.options.attrValueProcessor(""+e[i][t[o]])+'"'}else r+=this.processTextOrObjNode(e[i],i,t);return{attrStr:n,val:r}},e.exports=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}Object.defineProperty(t,"__esModule",{value:!0}),t.Observable=void 0;var s=function(){return"function"==typeof Symbol},a=function(e){return s()&&Boolean(Symbol[e])},u=function(e){return a(e)?Symbol[e]:"@@"+e};s()&&!a("observable")&&(Symbol.observable=Symbol("observable"));var c=u("iterator"),l=u("observable"),d=u("species");function f(e,t){var n=e[t];if(null!=n){if("function"!=typeof n)throw new TypeError(n+" is not a function");return n}}function p(e){var t=e.constructor;return void 0!==t&&null===(t=t[d])&&(t=void 0),void 0!==t?t:S}function h(e){h.log?h.log(e):setTimeout((function(){throw e}))}function v(e){Promise.resolve().then((function(){try{e()}catch(e){h(e)}}))}function g(e){var t=e._cleanup;if(void 0!==t&&(e._cleanup=void 0,t))try{if("function"==typeof t)t();else{var n=f(t,"unsubscribe");n&&n.call(t)}}catch(e){h(e)}}function m(e){e._observer=void 0,e._queue=void 0,e._state="closed"}function y(e,t,n){e._state="running";var r=e._observer;try{var i=f(r,t);switch(t){case"next":i&&i.call(r,n);break;case"error":if(m(e),!i)throw n;i.call(r,n);break;case"complete":m(e),i&&i.call(r)}}catch(e){h(e)}"closed"===e._state?g(e):"running"===e._state&&(e._state="ready")}function b(e,t,n){if("closed"!==e._state){if("buffering"!==e._state)return"ready"!==e._state?(e._state="buffering",e._queue=[{type:t,value:n}],void v((function(){return function(e){var t=e._queue;if(t){e._queue=void 0,e._state="ready";for(var n=0;n<t.length&&(y(e,t[n].type,t[n].value),"closed"!==e._state);++n);}}(e)}))):void y(e,t,n);e._queue.push({type:t,value:n})}}var w=function(){function e(t,n){r(this,e),this._cleanup=void 0,this._observer=t,this._queue=void 0,this._state="initializing";var i=new _(this);try{this._cleanup=n.call(void 0,i)}catch(e){i.error(e)}"initializing"===this._state&&(this._state="ready")}return o(e,[{key:"unsubscribe",value:function(){"closed"!==this._state&&(m(this),g(this))}},{key:"closed",get:function(){return"closed"===this._state}}]),e}(),_=function(){function e(t){r(this,e),this._subscription=t}return o(e,[{key:"next",value:function(e){b(this._subscription,"next",e)}},{key:"error",value:function(e){b(this._subscription,"error",e)}},{key:"complete",value:function(){b(this._subscription,"complete")}},{key:"closed",get:function(){return"closed"===this._subscription._state}}]),e}(),S=function(){function e(t){if(r(this,e),!(this instanceof e))throw new TypeError("Observable cannot be called as a function");if("function"!=typeof t)throw new TypeError("Observable initializer must be a function");this._subscriber=t}return o(e,[{key:"subscribe",value:function(e){return"object"==typeof e&&null!==e||(e={next:e,error:arguments[1],complete:arguments[2]}),new w(e,this._subscriber)}},{key:"forEach",value:function(e){var t=this;return new Promise((function(n,r){if("function"==typeof e)var i=t.subscribe({next:function(t){try{e(t,o)}catch(e){r(e),i.unsubscribe()}},error:r,complete:n});else r(new TypeError(e+" is not a function"));function o(){i.unsubscribe(),n()}}))}},{key:"map",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(p(this))((function(n){return t.subscribe({next:function(t){try{t=e(t)}catch(e){return n.error(e)}n.next(t)},error:function(e){n.error(e)},complete:function(){n.complete()}})}))}},{key:"filter",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(p(this))((function(n){return t.subscribe({next:function(t){try{if(!e(t))return}catch(e){return n.error(e)}n.next(t)},error:function(e){n.error(e)},complete:function(){n.complete()}})}))}},{key:"reduce",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");var n=p(this),r=arguments.length>1,i=!1,o=arguments[1];return new n((function(n){return t.subscribe({next:function(t){var s=!i;if(i=!0,!s||r)try{o=e(o,t)}catch(e){return n.error(e)}else o=t},error:function(e){n.error(e)},complete:function(){if(!i&&!r)return n.error(new TypeError("Cannot reduce an empty sequence"));n.next(o),n.complete()}})}))}},{key:"concat",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=p(this);return new i((function(t){var r,o=0;return function e(s){r=s.subscribe({next:function(e){t.next(e)},error:function(e){t.error(e)},complete:function(){o===n.length?(r=void 0,t.complete()):e(i.from(n[o++]))}})}(e),function(){r&&(r.unsubscribe(),r=void 0)}}))}},{key:"flatMap",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");var n=p(this);return new n((function(r){var i=[],o=t.subscribe({next:function(t){if(e)try{t=e(t)}catch(e){return r.error(e)}var o=n.from(t).subscribe({next:function(e){r.next(e)},error:function(e){r.error(e)},complete:function(){var e=i.indexOf(o);e>=0&&i.splice(e,1),s()}});i.push(o)},error:function(e){r.error(e)},complete:function(){s()}});function s(){o.closed&&0===i.length&&r.complete()}return function(){i.forEach((function(e){return e.unsubscribe()})),o.unsubscribe()}}))}},{key:l,value:function(){return this}}],[{key:"from",value:function(t){var n="function"==typeof this?this:e;if(null==t)throw new TypeError(t+" is not an object");var r=f(t,l);if(r){var i=r.call(t);if(Object(i)!==i)throw new TypeError(i+" is not an object");return function(e){return e instanceof S}(i)&&i.constructor===n?i:new n((function(e){return i.subscribe(e)}))}if(a("iterator")&&(r=f(t,c)))return new n((function(e){v((function(){if(!e.closed){var n=!0,i=!1,o=void 0;try{for(var s,a=r.call(t)[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var u=s.value;if(e.next(u),e.closed)return}}catch(e){i=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}e.complete()}}))}));if(Array.isArray(t))return new n((function(e){v((function(){if(!e.closed){for(var n=0;n<t.length;++n)if(e.next(t[n]),e.closed)return;e.complete()}}))}));throw new TypeError(t+" is not observable")}},{key:"of",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return new("function"==typeof this?this:e)((function(e){v((function(){if(!e.closed){for(var t=0;t<n.length;++t)if(e.next(n[t]),e.closed)return;e.complete()}}))}))}},{key:d,get:function(){return this}}]),e}();t.Observable=S,s()&&Object.defineProperty(S,Symbol("extensions"),{value:{symbol:l,hostReportError:h},configurable:!0})},function(e,t){},function(e,t,n){var r,i,o=n(156),s=n(157),a=0,u=0;e.exports=function(e,t,n){var c=t&&n||0,l=t||[],d=(e=e||{}).node||r,f=void 0!==e.clockseq?e.clockseq:i;if(null==d||null==f){var p=o();null==d&&(d=r=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==f&&(f=i=16383&(p[6]<<8|p[7]))}var h=void 0!==e.msecs?e.msecs:(new Date).getTime(),v=void 0!==e.nsecs?e.nsecs:u+1,g=h-a+(v-u)/1e4;if(g<0&&void 0===e.clockseq&&(f=f+1&16383),(g<0||h>a)&&void 0===e.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=h,u=v,i=f;var m=(1e4*(268435455&(h+=122192928e5))+v)%4294967296;l[c++]=m>>>24&255,l[c++]=m>>>16&255,l[c++]=m>>>8&255,l[c++]=255&m;var y=h/4294967296*1e4&268435455;l[c++]=y>>>8&255,l[c++]=255&y,l[c++]=y>>>24&15|16,l[c++]=y>>>16&255,l[c++]=f>>>8|128,l[c++]=255&f;for(var b=0;b<6;++b)l[c+b]=d[b];return t||s(l)}},function(e,t,n){var r=n(156),i=n(157);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[o+a]=s[a];return t||i(s)}},function(e,t,n){e.exports=n(354).Observable},function(e,t,n){"use strict";(function(e){!function(e,t){function n(e){return"function"==typeof Symbol&&Boolean(Symbol[e])}function r(e){return n(e)?Symbol[e]:"@@"+e}function i(e){setTimeout((function(){throw e}))}function o(e,t){var n=e[t];if(null!=n){if("function"!=typeof n)throw new TypeError(n+" is not a function");return n}}function s(e){var t=e.constructor;return void 0!==t&&null===(t=t[r("species")])&&(t=void 0),void 0!==t?t:f}function a(e,t){Object.keys(t).forEach((function(n){var r=Object.getOwnPropertyDescriptor(t,n);r.enumerable=!1,Object.defineProperty(e,n,r)}))}function u(e){var t=e._cleanup;if(t){e._cleanup=void 0;try{t()}catch(e){i(e)}}}function c(e){return void 0===e._observer}function l(e,t){if(Object(e)!==e)throw new TypeError("Observer must be an object");this._cleanup=void 0,this._observer=e;try{var n=o(e,"start");n&&n.call(e,this)}catch(e){i(e)}if(!c(this)){e=new d(this);try{var r=t.call(void 0,e);if(null!=r){if("function"==typeof r.unsubscribe)s=r,r=function(){s.unsubscribe()};else if("function"!=typeof r)throw new TypeError(r+" is not a function");this._cleanup=r}}catch(t){return void e.error(t)}var s;c(this)&&u(this)}}function d(e){this._subscription=e}function f(e){if(!(this instanceof f))throw new TypeError("Observable cannot be called as a function");if("function"!=typeof e)throw new TypeError("Observable initializer must be a function");this._subscriber=e}"function"!=typeof Symbol||Symbol.observable||(Symbol.observable=Symbol("observable")),a(l.prototype={},{get closed(){return c(this)},unsubscribe:function(){c(this)||(this._observer=void 0,u(this))}}),a(d.prototype={},{get closed(){return c(this._subscription)},next:function(e){var t=this._subscription;if(!c(t)){var n=t._observer;try{var r=o(n,"next");r&&r.call(n,e)}catch(e){i(e)}}},error:function(e){var t=this._subscription;if(c(t))i(e);else{var n=t._observer;t._observer=void 0;try{var r=o(n,"error");if(!r)throw e;r.call(n,e)}catch(e){i(e)}u(t)}},complete:function(){var e=this._subscription;if(!c(e)){var t=e._observer;e._observer=void 0;try{var n=o(t,"complete");n&&n.call(t)}catch(e){i(e)}u(e)}}}),a(f.prototype,{subscribe:function(e){for(var t=[],n=1;n<arguments.length;++n)t.push(arguments[n]);return"function"==typeof e?e={next:e,error:t[0],complete:t[1]}:"object"==typeof e&&null!==e||(e={}),new l(e,this._subscriber)},forEach:function(e){var t=this;return new Promise((function(n,r){if("function"!=typeof e)return Promise.reject(new TypeError(e+" is not a function"));t.subscribe({_subscription:null,start:function(e){if(Object(e)!==e)throw new TypeError(e+" is not an object");this._subscription=e},next:function(t){var n=this._subscription;if(!n.closed)try{e(t)}catch(e){r(e),n.unsubscribe()}},error:r,complete:n})}))},map:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(s(this))((function(n){return t.subscribe({next:function(t){if(!n.closed){try{t=e(t)}catch(e){return n.error(e)}n.next(t)}},error:function(e){n.error(e)},complete:function(){n.complete()}})}))},filter:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(s(this))((function(n){return t.subscribe({next:function(t){if(!n.closed){try{if(!e(t))return}catch(e){return n.error(e)}n.next(t)}},error:function(e){n.error(e)},complete:function(){n.complete()}})}))},reduce:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");var n=s(this),r=arguments.length>1,i=!1,o=arguments[1];return new n((function(n){return t.subscribe({next:function(t){if(!n.closed){var s=!i;if(i=!0,!s||r)try{o=e(o,t)}catch(e){return n.error(e)}else o=t}},error:function(e){n.error(e)},complete:function(){if(!i&&!r)return n.error(new TypeError("Cannot reduce an empty sequence"));n.next(o),n.complete()}})}))}}),Object.defineProperty(f.prototype,r("observable"),{value:function(){return this},writable:!0,configurable:!0}),a(f,{from:function(e){var t="function"==typeof this?this:f;if(null==e)throw new TypeError(e+" is not an object");var i=o(e,r("observable"));if(i){var s=i.call(e);if(Object(s)!==s)throw new TypeError(s+" is not an object");return s.constructor===t?s:new t((function(e){return s.subscribe(e)}))}if(n("iterator")&&(i=o(e,r("iterator"))))return new t((function(t){for(var n,r=i.call(e)[Symbol.iterator]();!(n=r.next()).done;){var o=n.value;if(t.next(o),t.closed)return}t.complete()}));if(Array.isArray(e))return new t((function(t){for(var n=0;n<e.length;++n)if(t.next(e[n]),t.closed)return;t.complete()}));throw new TypeError(e+" is not observable")},of:function(){for(var e=[],t=0;t<arguments.length;++t)e.push(arguments[t]);return new("function"==typeof this?this:f)((function(t){for(var n=0;n<e.length;++n)if(t.next(e[n]),t.closed)return;t.complete()}))}}),Object.defineProperty(f,r("species"),{get:function(){return this},configurable:!0}),Object.defineProperty(f,"extensions",{value:{observableSymbol:r("observable"),setHostReportError:function(e){i=e}}}),e.Observable=f}(t)}).call(this,n(73)(e))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var r=n(160),i=n(162),o=n(361),s=n(364),a=n(366),u=n(54),c=function(){function e(e){(0,s.supportsWebCrypto)((0,u.locateWindow)())?this.hash=new i.Sha256(e):(0,a.isMsWindow)((0,u.locateWindow)())?this.hash=new r.Sha256(e):this.hash=new o.Sha256(e)}return e.prototype.update=function(e,t){this.hash.update(e,t)},e.prototype.digest=function(){return this.hash.digest()},e}();t.Sha256=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEmptyData=void 0,t.isEmptyData=function(e){return"string"==typeof e?0===e.length:0===e.byteLength}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.convertToBuffer=void 0;var r=n(403),i=void 0!==e&&e.from?function(t){return e.from(t,"utf8")}:r.fromUtf8;t.convertToBuffer=function(e){return e instanceof Uint8Array?e:"string"==typeof e?i(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}}).call(this,n(12).Buffer)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEmptyData=void 0,t.isEmptyData=function(e){return"string"==typeof e?0===e.length:0===e.byteLength}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.numToUint8=void 0,t.numToUint8=function(e){return new Uint8Array([(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uint32ArrayFrom=void 0,t.uint32ArrayFrom=function(e){if(!Uint32Array.from){for(var t=new Uint32Array(e.length),n=0;n<e.length;)t[n]=e[n],n+=1;return t}return Uint32Array.from(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(110).__exportStar(n(362),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var r=n(110),i=n(163),o=n(363),s=n(91),a=function(){function e(e){if(this.hash=new o.RawSha256,e){this.outer=new o.RawSha256;var t=function(e){var t=(0,s.convertToBuffer)(e);if(t.byteLength>i.BLOCK_SIZE){var n=new o.RawSha256;n.update(t),t=n.digest()}var r=new Uint8Array(i.BLOCK_SIZE);return r.set(t),r}(e),n=new Uint8Array(i.BLOCK_SIZE);n.set(t);for(var r=0;r<i.BLOCK_SIZE;r++)t[r]^=54,n[r]^=92;for(this.hash.update(t),this.outer.update(n),r=0;r<t.byteLength;r++)t[r]=0}}return e.prototype.update=function(e){if(!(0,s.isEmptyData)(e)&&!this.error)try{this.hash.update((0,s.convertToBuffer)(e))}catch(e){this.error=e}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return[2,this.digestSync()]}))}))},e}();t.Sha256=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RawSha256=void 0;var r=n(163),i=function(){function e(){this.state=Int32Array.from(r.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=0,n=e.byteLength;if(this.bytesHashed+=n,8*this.bytesHashed>r.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=e[t++],n--,this.bufferLength===r.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var e=8*this.bytesHashed,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(t.setUint8(this.bufferLength++,128),n%r.BLOCK_SIZE>=r.BLOCK_SIZE-8){for(var i=this.bufferLength;i<r.BLOCK_SIZE;i++)t.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(i=this.bufferLength;i<r.BLOCK_SIZE-8;i++)t.setUint8(i,0);t.setUint32(r.BLOCK_SIZE-8,Math.floor(e/4294967296),!0),t.setUint32(r.BLOCK_SIZE-4,e),this.hashBuffer(),this.finished=!0}var o=new Uint8Array(r.DIGEST_LENGTH);for(i=0;i<8;i++)o[4*i]=this.state[i]>>>24&255,o[4*i+1]=this.state[i]>>>16&255,o[4*i+2]=this.state[i]>>>8&255,o[4*i+3]=this.state[i]>>>0&255;return o},e.prototype.hashBuffer=function(){for(var e=this.buffer,t=this.state,n=t[0],i=t[1],o=t[2],s=t[3],a=t[4],u=t[5],c=t[6],l=t[7],d=0;d<r.BLOCK_SIZE;d++){if(d<16)this.temp[d]=(255&e[4*d])<<24|(255&e[4*d+1])<<16|(255&e[4*d+2])<<8|255&e[4*d+3];else{var f=this.temp[d-2],p=(f>>>17|f<<15)^(f>>>19|f<<13)^f>>>10,h=((f=this.temp[d-15])>>>7|f<<25)^(f>>>18|f<<14)^f>>>3;this.temp[d]=(p+this.temp[d-7]|0)+(h+this.temp[d-16]|0)}var v=(((a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7))+(a&u^~a&c)|0)+(l+(r.KEY[d]+this.temp[d]|0)|0)|0,g=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&i^n&o^i&o)|0;l=c,c=u,u=a,a=s+v|0,s=o,o=i,i=n,n=v+g|0}t[0]+=n,t[1]+=i,t[2]+=o,t[3]+=s,t[4]+=a,t[5]+=u,t[6]+=c,t[7]+=l},e}();t.RawSha256=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(164).__exportStar(n(365),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.supportsZeroByteGCM=t.supportsSubtleCrypto=t.supportsSecureRandom=t.supportsWebCrypto=void 0;var r=n(164),i=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function o(e){return"object"==typeof e&&"object"==typeof e.crypto&&"function"==typeof e.crypto.getRandomValues}function s(e){return e&&i.every((function(t){return"function"==typeof e[t]}))}t.supportsWebCrypto=function(e){return!(!o(e)||"object"!=typeof e.crypto.subtle)&&s(e.crypto.subtle)},t.supportsSecureRandom=o,t.supportsSubtleCrypto=s,t.supportsZeroByteGCM=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){switch(n.label){case 0:if(!s(e))return[2,!1];n.label=1;case 1:return n.trys.push([1,4,,5]),[4,e.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return t=n.sent(),[4,e.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},t,new Uint8Array(0))];case 3:return[2,16===n.sent().byteLength];case 4:return n.sent(),[2,!1];case 5:return[2]}}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(367);r.__exportStar(n(368),t),r.__exportStar(n(369),t),r.__exportStar(n(370),t),r.__exportStar(n(371),t),r.__exportStar(n(372),t)},function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return i})),n.d(t,"__assign",(function(){return o})),n.d(t,"__rest",(function(){return s})),n.d(t,"__decorate",(function(){return a})),n.d(t,"__param",(function(){return u})),n.d(t,"__metadata",(function(){return c})),n.d(t,"__awaiter",(function(){return l})),n.d(t,"__generator",(function(){return d})),n.d(t,"__createBinding",(function(){return f})),n.d(t,"__exportStar",(function(){return p})),n.d(t,"__values",(function(){return h})),n.d(t,"__read",(function(){return v})),n.d(t,"__spread",(function(){return g})),n.d(t,"__spreadArrays",(function(){return m})),n.d(t,"__await",(function(){return y})),n.d(t,"__asyncGenerator",(function(){return b})),n.d(t,"__asyncDelegator",(function(){return w})),n.d(t,"__asyncValues",(function(){return _})),n.d(t,"__makeTemplateObject",(function(){return S})),n.d(t,"__importStar",(function(){return E})),n.d(t,"__importDefault",(function(){return C})),n.d(t,"__classPrivateFieldGet",(function(){return A})),n.d(t,"__classPrivateFieldSet",(function(){return O}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function s(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function a(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function u(e,t){return function(n,r){t(n,r,e)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function d(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function f(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}function p(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function h(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(v(arguments[t]));return e}function m(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function y(e){return this instanceof y?(this.v=e,this):new y(e)}function b(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||a(e,t)}))})}function a(e,t){try{(n=i[e](t)).value instanceof y?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(e){l(o[0][3],e)}var n}function u(e){a("next",e)}function c(e){a("throw",e)}function l(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function w(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:y(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function _(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=h(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,i,(t=e[n](t)).done,t.value)}))}}}function S(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function C(e){return e&&e.__esModule?e:{default:e}}function A(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function O(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMsWindow=void 0;var r=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];t.isMsWindow=function(e){if(function(e){return"MSInputMethodContext"in e&&"msCrypto"in e}(e)&&void 0!==e.msCrypto.subtle){var t=e.msCrypto,n=t.getRandomValues,i=t.subtle;return r.map((function(e){return i[e]})).concat(n).every((function(e){return"function"==typeof e}))}return!1}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(48),i=n(20),o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},s=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},a=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(s(arguments[t]));return e},u=new r.a("Predictions"),c=new(function(){function e(e){this._options=e,this._convertPluggables=[],this._identifyPluggables=[],this._interpretPluggables=[]}return e.prototype.getModuleName=function(){return"Predictions"},e.prototype.addPluggable=function(e){if(this.getPluggable(e.getProviderName()))throw new Error("Pluggable with name "+e.getProviderName()+" has already been added.");var t=!1;this.implementsConvertPluggable(e)&&(this._convertPluggables.push(e),t=!0),this.implementsIdentifyPluggable(e)&&(this._identifyPluggables.push(e),t=!0),this.implementsInterpretPluggable(e)&&(this._interpretPluggables.push(e),t=!0),t&&this.configurePluggable(e)},e.prototype.getPluggable=function(e){var t=this.getAllProviders().find((function(t){return t.getProviderName()===e}));return void 0===t?(u.debug("No plugin found with providerName=>",e),null):t},e.prototype.removePluggable=function(e){this._convertPluggables=this._convertPluggables.filter((function(t){return t.getProviderName()!==e})),this._identifyPluggables=this._identifyPluggables.filter((function(t){return t.getProviderName()!==e})),this._interpretPluggables=this._interpretPluggables.filter((function(t){return t.getProviderName()!==e}))},e.prototype.configure=function(e){var t=this,n=e?e.predictions||e:{};n=o(o({},n),e),this._options=Object.assign({},this._options,n),u.debug("configure Predictions",this._options),this.getAllProviders().forEach((function(e){return t.configurePluggable(e)}))},e.prototype.interpret=function(e,t){return this.getPluggableToExecute(this._interpretPluggables,t).interpret(e)},e.prototype.convert=function(e,t){return this.getPluggableToExecute(this._convertPluggables,t).convert(e)},e.prototype.identify=function(e,t){return this.getPluggableToExecute(this._identifyPluggables,t).identify(e)},e.prototype.getPluggableToExecute=function(e,t){if(t&&t.providerName)return a(e).find((function(e){return e.getProviderName()===t.providerName}));if(1===e.length)return e[0];throw new Error("More than one or no providers are configured, Either specify a provider name or configure exactly one provider")},e.prototype.getAllProviders=function(){return a(this._convertPluggables,this._identifyPluggables,this._interpretPluggables)},e.prototype.configurePluggable=function(e){var t=Object.assign({},this._options.predictions,this._options[e.getCategory().toLowerCase()]);e.configure(t)},e.prototype.implementsConvertPluggable=function(e){return e&&"function"==typeof e.convert},e.prototype.implementsIdentifyPluggable=function(e){return e&&"function"==typeof e.identify},e.prototype.implementsInterpretPluggable=function(e){return e&&"function"==typeof e.interpret},e}())({});i.a.register(c)},function(e,t,n){"use strict";const r=e=>"object"==typeof e&&null!==e,i=Symbol("skip"),o=e=>r(e)&&!(e instanceof RegExp)&&!(e instanceof Error)&&!(e instanceof Date),s=(e,t,n,r=new WeakMap)=>{if(n={deep:!1,target:{},...n},r.has(e))return r.get(e);r.set(e,n.target);const{target:a}=n;delete n.target;const u=e=>e.map((e=>o(e)?s(e,t,n,r):e));if(Array.isArray(e))return u(e);for(const[c,l]of Object.entries(e)){const d=t(c,l,e);if(d===i)continue;let[f,p,{shouldRecurse:h=!0}={}]=d;"__proto__"!==f&&(n.deep&&h&&o(p)&&(p=Array.isArray(p)?u(p):s(p,t,n,r)),a[f]=p)}return a};e.exports=(e,t,n)=>{if(!r(e))throw new TypeError(`Expected an object, got \`${e}\` (${typeof e})`);return s(e,t,n)},e.exports.mapObjectSkip=i},function(e,t,n){"use strict";const r=(e,t)=>{if("string"!=typeof e&&!Array.isArray(e))throw new TypeError("Expected the input to be `string | string[]`");return t=Object.assign({pascalCase:!1},t),0===(e=Array.isArray(e)?e.map((e=>e.trim())).filter((e=>e.length)).join("-"):e.trim()).length?"":1===e.length?t.pascalCase?e.toUpperCase():e.toLowerCase():(e!==e.toLowerCase()&&(e=(e=>{let t=!1,n=!1,r=!1;for(let i=0;i<e.length;i++){const o=e[i];t&&/[a-zA-Z]/.test(o)&&o.toUpperCase()===o?(e=e.slice(0,i)+"-"+e.slice(i),t=!1,r=n,n=!0,i++):n&&r&&/[a-zA-Z]/.test(o)&&o.toLowerCase()===o?(e=e.slice(0,i-1)+"-"+e.slice(i-1),r=n,n=!1,t=!0):(t=o.toLowerCase()===o&&o.toUpperCase()!==o,r=n,n=o.toUpperCase()===o&&o.toLowerCase()!==o)}return e})(e)),e=e.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,((e,t)=>t.toUpperCase())).replace(/\d+(\w|$)/g,(e=>e.toUpperCase())),n=e,t.pascalCase?n.charAt(0).toUpperCase()+n.slice(1):n);var n};e.exports=r,e.exports.default=r},function(e,t,n){"use strict";e.exports=class{constructor(e={}){if(!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=e.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}get(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e)){const t=this.oldCache.get(e);return this.oldCache.delete(e),this._set(e,t),t}}set(e,t){return this.cache.has(e)?this.cache.set(e,t):this._set(e,t),this}has(e){return this.cache.has(e)||this.oldCache.has(e)}peek(e){return this.cache.has(e)?this.cache.get(e):this.oldCache.has(e)?this.oldCache.get(e):void 0}delete(e){const t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache)yield e;for(const e of this.oldCache){const[t]=e;this.cache.has(t)||(yield e)}}get size(){let e=0;for(const t of this.oldCache.keys())this.cache.has(t)||e++;return this._size+e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var r=n(168),i=n(170),o=n(379),s=n(382),a=n(384),u=n(54),c=function(){function e(e){(0,s.supportsWebCrypto)((0,u.locateWindow)())?this.hash=new i.Sha256(e):(0,a.isMsWindow)((0,u.locateWindow)())?this.hash=new r.Sha256(e):this.hash=new o.Sha256(e)}return e.prototype.update=function(e,t){this.hash.update(e,t)},e.prototype.digest=function(){return this.hash.digest()},e}();t.Sha256=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEmptyData=void 0,t.isEmptyData=function(e){return"string"==typeof e?0===e.length:0===e.byteLength}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(111).__exportStar(n(380),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var r=n(111),i=n(171),o=n(381),s=n(91),a=function(){function e(e){if(this.hash=new o.RawSha256,e){this.outer=new o.RawSha256;var t=function(e){var t=(0,s.convertToBuffer)(e);if(t.byteLength>i.BLOCK_SIZE){var n=new o.RawSha256;n.update(t),t=n.digest()}var r=new Uint8Array(i.BLOCK_SIZE);return r.set(t),r}(e),n=new Uint8Array(i.BLOCK_SIZE);n.set(t);for(var r=0;r<i.BLOCK_SIZE;r++)t[r]^=54,n[r]^=92;for(this.hash.update(t),this.outer.update(n),r=0;r<t.byteLength;r++)t[r]=0}}return e.prototype.update=function(e){if(!(0,s.isEmptyData)(e)&&!this.error)try{this.hash.update((0,s.convertToBuffer)(e))}catch(e){this.error=e}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return[2,this.digestSync()]}))}))},e}();t.Sha256=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RawSha256=void 0;var r=n(171),i=function(){function e(){this.state=Int32Array.from(r.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=0,n=e.byteLength;if(this.bytesHashed+=n,8*this.bytesHashed>r.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=e[t++],n--,this.bufferLength===r.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var e=8*this.bytesHashed,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(t.setUint8(this.bufferLength++,128),n%r.BLOCK_SIZE>=r.BLOCK_SIZE-8){for(var i=this.bufferLength;i<r.BLOCK_SIZE;i++)t.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(i=this.bufferLength;i<r.BLOCK_SIZE-8;i++)t.setUint8(i,0);t.setUint32(r.BLOCK_SIZE-8,Math.floor(e/4294967296),!0),t.setUint32(r.BLOCK_SIZE-4,e),this.hashBuffer(),this.finished=!0}var o=new Uint8Array(r.DIGEST_LENGTH);for(i=0;i<8;i++)o[4*i]=this.state[i]>>>24&255,o[4*i+1]=this.state[i]>>>16&255,o[4*i+2]=this.state[i]>>>8&255,o[4*i+3]=this.state[i]>>>0&255;return o},e.prototype.hashBuffer=function(){for(var e=this.buffer,t=this.state,n=t[0],i=t[1],o=t[2],s=t[3],a=t[4],u=t[5],c=t[6],l=t[7],d=0;d<r.BLOCK_SIZE;d++){if(d<16)this.temp[d]=(255&e[4*d])<<24|(255&e[4*d+1])<<16|(255&e[4*d+2])<<8|255&e[4*d+3];else{var f=this.temp[d-2],p=(f>>>17|f<<15)^(f>>>19|f<<13)^f>>>10,h=((f=this.temp[d-15])>>>7|f<<25)^(f>>>18|f<<14)^f>>>3;this.temp[d]=(p+this.temp[d-7]|0)+(h+this.temp[d-16]|0)}var v=(((a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7))+(a&u^~a&c)|0)+(l+(r.KEY[d]+this.temp[d]|0)|0)|0,g=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&i^n&o^i&o)|0;l=c,c=u,u=a,a=s+v|0,s=o,o=i,i=n,n=v+g|0}t[0]+=n,t[1]+=i,t[2]+=o,t[3]+=s,t[4]+=a,t[5]+=u,t[6]+=c,t[7]+=l},e}();t.RawSha256=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(172).__exportStar(n(383),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.supportsZeroByteGCM=t.supportsSubtleCrypto=t.supportsSecureRandom=t.supportsWebCrypto=void 0;var r=n(172),i=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function o(e){return"object"==typeof e&&"object"==typeof e.crypto&&"function"==typeof e.crypto.getRandomValues}function s(e){return e&&i.every((function(t){return"function"==typeof e[t]}))}t.supportsWebCrypto=function(e){return!(!o(e)||"object"!=typeof e.crypto.subtle)&&s(e.crypto.subtle)},t.supportsSecureRandom=o,t.supportsSubtleCrypto=s,t.supportsZeroByteGCM=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){switch(n.label){case 0:if(!s(e))return[2,!1];n.label=1;case 1:return n.trys.push([1,4,,5]),[4,e.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return t=n.sent(),[4,e.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},t,new Uint8Array(0))];case 3:return[2,16===n.sent().byteLength];case 4:return n.sent(),[2,!1];case 5:return[2]}}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(385);r.__exportStar(n(386),t),r.__exportStar(n(387),t),r.__exportStar(n(388),t),r.__exportStar(n(389),t),r.__exportStar(n(390),t)},function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return i})),n.d(t,"__assign",(function(){return o})),n.d(t,"__rest",(function(){return s})),n.d(t,"__decorate",(function(){return a})),n.d(t,"__param",(function(){return u})),n.d(t,"__metadata",(function(){return c})),n.d(t,"__awaiter",(function(){return l})),n.d(t,"__generator",(function(){return d})),n.d(t,"__createBinding",(function(){return f})),n.d(t,"__exportStar",(function(){return p})),n.d(t,"__values",(function(){return h})),n.d(t,"__read",(function(){return v})),n.d(t,"__spread",(function(){return g})),n.d(t,"__spreadArrays",(function(){return m})),n.d(t,"__await",(function(){return y})),n.d(t,"__asyncGenerator",(function(){return b})),n.d(t,"__asyncDelegator",(function(){return w})),n.d(t,"__asyncValues",(function(){return _})),n.d(t,"__makeTemplateObject",(function(){return S})),n.d(t,"__importStar",(function(){return E})),n.d(t,"__importDefault",(function(){return C})),n.d(t,"__classPrivateFieldGet",(function(){return A})),n.d(t,"__classPrivateFieldSet",(function(){return O}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function s(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function a(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function u(e,t){return function(n,r){t(n,r,e)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function d(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function f(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}function p(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function h(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(v(arguments[t]));return e}function m(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function y(e){return this instanceof y?(this.v=e,this):new y(e)}function b(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||a(e,t)}))})}function a(e,t){try{(n=i[e](t)).value instanceof y?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(e){l(o[0][3],e)}var n}function u(e){a("next",e)}function c(e){a("throw",e)}function l(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function w(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:y(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function _(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=h(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,i,(t=e[n](t)).done,t.value)}))}}}function S(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function C(e){return e&&e.__esModule?e:{default:e}}function A(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function O(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMsWindow=void 0;var r=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];t.isMsWindow=function(e){if(function(e){return"MSInputMethodContext"in e&&"msCrypto"in e}(e)&&void 0!==e.msCrypto.subtle){var t=e.msCrypto,n=t.getRandomValues,i=t.subtle;return r.map((function(e){return i[e]})).concat(n).every((function(e){return"function"==typeof e}))}return!1}},function(e,t,n){"use strict";n.d(t,"a",(function(){return jr}));var r=n(48),i=n(92),o=n(20),s=n(100),a=n.n(s),u=n(49),c=n(80),l=function(e,t){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var f=function(){return(f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function p(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function h(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function v(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}function g(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function y(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create,Object.create,n(28);var b=n(13),w=function(e){return"string"==typeof e&&(e.startsWith("fips-")||e.endsWith("-fips"))},_=function(e){return w(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e},S=function(e,t){var n;void 0===e&&(e=[]);var r=t.useFipsEndpoint,i=t.useDualstackEndpoint;return null===(n=e.find((function(e){var t=e.tags;return r===t.includes("fips")&&i===t.includes("dualstack")})))||void 0===n?void 0:n.hostname},E=function(e,t){var n,r,i,o,s,a,u=t.useFipsEndpoint,c=void 0!==u&&u,l=t.useDualstackEndpoint,d=void 0!==l&&l,p=t.signingService,h=t.regionHash,v=t.partitionHash,g=function(e,t){var n,r=t.partitionHash;return null!==(n=Object.keys(r||{}).find((function(t){return r[t].regions.includes(e)})))&&void 0!==n?n:"aws"}(e,{partitionHash:v}),m=e in h?e:null!==(r=null===(n=v[g])||void 0===n?void 0:n.endpoint)&&void 0!==r?r:e,y={useFipsEndpoint:c,useDualstackEndpoint:d},b=function(e,t){var n=t.partitionHostname;return t.regionHostname||(n?n.replace("{region}",e):void 0)}(m,{regionHostname:S(null===(i=h[m])||void 0===i?void 0:i.variants,y),partitionHostname:S(null===(o=v[g])||void 0===o?void 0:o.variants,y)});if(void 0===b)throw new Error("Endpoint resolution failed for: ".concat({resolvedRegion:m,useFipsEndpoint:c,useDualstackEndpoint:d}));var w=function(e,t){var n=t.signingRegion;if(n)return n;if(t.useFipsEndpoint){var r=t.regionRegex.replace("\\\\","\\").replace(/^\^/g,"\\.").replace(/\$$/g,"\\."),i=e.match(r);if(i)return i[0].slice(1,-1)}}(b,{signingRegion:null===(s=h[m])||void 0===s?void 0:s.signingRegion,regionRegex:v[g].regionRegex,useFipsEndpoint:c});return f(f({partition:g,signingService:p,hostname:b},w&&{signingRegion:w}),(null===(a=h[m])||void 0===a?void 0:a.signingService)&&{signingService:h[m].signingService})},C=function(){function e(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?":"!==e.protocol.slice(-1)?"".concat(e.protocol,":"):e.protocol:"https:",this.path=e.path?"/"!==e.path.charAt(0)?"/".concat(e.path):e.path:"/"}return e.isInstance=function(e){if(!e)return!1;var t=e;return"method"in t&&"protocol"in t&&"hostname"in t&&"path"in t&&"object"==typeof t.query&&"object"==typeof t.headers},e.prototype.clone=function(){var t,n=new e(f(f({},this),{headers:f({},this.headers)}));return n.query&&(n.query=(t=n.query,Object.keys(t).reduce((function(e,n){var r,i=t[n];return f(f({},e),((r={})[n]=Array.isArray(i)?y([],m(i),!1):i,r))}),{}))),n},e}(),A=function(){function e(e){this.statusCode=e.statusCode,this.headers=e.headers||{},this.body=e.body}return e.isInstance=function(e){if(!e)return!1;var t=e;return"number"==typeof t.statusCode&&"object"==typeof t.headers},e}();function O(e){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(e)}var I,T={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},x={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},P={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},k=n(96);!function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"}(I||(I={}));var D,N=I.STANDARD,L=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],M=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],j=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],R=[500,502,503,504],U=["ECONNRESET","EPIPE","ETIMEDOUT"],B=function(e){var t,n;return 429===(null===(t=e.$metadata)||void 0===t?void 0:t.httpStatusCode)||M.includes(e.name)||1==(null===(n=e.$retryable)||void 0===n?void 0:n.throttling)},F=function(){function e(e){var t,n,r,i,o;this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=null!==(t=null==e?void 0:e.beta)&&void 0!==t?t:.7,this.minCapacity=null!==(n=null==e?void 0:e.minCapacity)&&void 0!==n?n:1,this.minFillRate=null!==(r=null==e?void 0:e.minFillRate)&&void 0!==r?r:.5,this.scaleConstant=null!==(i=null==e?void 0:e.scaleConstant)&&void 0!==i?i:.4,this.smooth=null!==(o=null==e?void 0:e.smooth)&&void 0!==o?o:.8;var s=this.getCurrentTimeInSeconds();this.lastThrottleTime=s,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}return e.prototype.getCurrentTimeInSeconds=function(){return Date.now()/1e3},e.prototype.getSendToken=function(){return h(this,void 0,void 0,(function(){return v(this,(function(e){return[2,this.acquireTokenBucket(1)]}))}))},e.prototype.acquireTokenBucket=function(e){return h(this,void 0,void 0,(function(){var t;return v(this,(function(n){switch(n.label){case 0:return this.enabled?(this.refillTokenBucket(),e>this.currentCapacity?(t=(e-this.currentCapacity)/this.fillRate*1e3,[4,new Promise((function(e){return setTimeout(e,t)}))]):[3,2]):[2];case 1:n.sent(),n.label=2;case 2:return this.currentCapacity=this.currentCapacity-e,[2]}}))}))},e.prototype.refillTokenBucket=function(){var e=this.getCurrentTimeInSeconds();if(this.lastTimestamp){var t=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+t),this.lastTimestamp=e}else this.lastTimestamp=e},e.prototype.updateClientSendingRate=function(e){var t;if(this.updateMeasuredRate(),B(e)){var n=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=n,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),t=this.cubicThrottle(n),this.enableTokenBucket()}else this.calculateTimeWindow(),t=this.cubicSuccess(this.getCurrentTimeInSeconds());var r=Math.min(t,2*this.measuredTxRate);this.updateTokenBucketRate(r)},e.prototype.calculateTimeWindow=function(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))},e.prototype.cubicThrottle=function(e){return this.getPrecise(e*this.beta)},e.prototype.cubicSuccess=function(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)},e.prototype.enableTokenBucket=function(){this.enabled=!0},e.prototype.updateTokenBucketRate=function(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)},e.prototype.updateMeasuredRate=function(){var e=this.getCurrentTimeInSeconds(),t=Math.floor(2*e)/2;if(this.requestCount++,t>this.lastTxRateBucket){var n=this.requestCount/(t-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=t}},e.prototype.getPrecise=function(e){return parseFloat(e.toFixed(8))},e}(),z=new Uint8Array(16);function q(){if(!D&&!(D="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return D(z)}for(var $=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,K=function(e){return"string"==typeof e&&$.test(e)},V=[],G=0;G<256;++G)V.push((G+256).toString(16).substr(1));for(var H=function(e,t,n){var r=(e=e||{}).random||(e.rng||q)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(V[e[t+0]]+V[e[t+1]]+V[e[t+2]]+V[e[t+3]]+"-"+V[e[t+4]]+V[e[t+5]]+"-"+V[e[t+6]]+V[e[t+7]]+"-"+V[e[t+8]]+V[e[t+9]]+"-"+V[e[t+10]]+V[e[t+11]]+V[e[t+12]]+V[e[t+13]]+V[e[t+14]]+V[e[t+15]]).toLowerCase();if(!K(n))throw TypeError("Stringified UUID is invalid");return n}(r)},W=function(e,t){return Math.floor(Math.min(2e4,Math.random()*Math.pow(2,t)*e))},J=function(e){return!!e&&(function(e){return void 0!==e.$retryable}(e)||function(e){return L.includes(e.name)}(e)||B(e)||function(e){var t;return j.includes(e.name)||U.includes((null==e?void 0:e.code)||"")||R.includes((null===(t=e.$metadata)||void 0===t?void 0:t.httpStatusCode)||0)}(e))},Y=function(){function e(e,t){var n,r,i;this.maxAttemptsProvider=e,this.mode=I.STANDARD,this.retryDecider=null!==(n=null==t?void 0:t.retryDecider)&&void 0!==n?n:J,this.delayDecider=null!==(r=null==t?void 0:t.delayDecider)&&void 0!==r?r:W,this.retryQuota=null!==(i=null==t?void 0:t.retryQuota)&&void 0!==i?i:function(e,t){var n=(void 0,1),r=(void 0,5),i=(void 0,10),o=500,s=function(e){return"TimeoutError"===e.name?i:r},a=function(e){return s(e)<=o};return Object.freeze({hasRetryTokens:a,retrieveRetryTokens:function(e){if(!a(e))throw new Error("No retry token available");var t=s(e);return o-=t,t},releaseRetryTokens:function(e){o+=null!=e?e:n,o=Math.min(o,500)}})}()}return e.prototype.shouldRetry=function(e,t,n){return t<n&&this.retryDecider(e)&&this.retryQuota.hasRetryTokens(e)},e.prototype.getMaxAttempts=function(){return h(this,void 0,void 0,(function(){var e;return v(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.maxAttemptsProvider()];case 1:return e=t.sent(),[3,3];case 2:return t.sent(),e=3,[3,3];case 3:return[2,e]}}))}))},e.prototype.retry=function(e,t,n){return h(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,l;return v(this,(function(d){switch(d.label){case 0:return i=0,o=0,[4,this.getMaxAttempts()];case 1:s=d.sent(),a=t.request,C.isInstance(a)&&(a.headers["amz-sdk-invocation-id"]=H()),u=function(){var u,l,d,f,p,h,g,m;return v(this,(function(v){switch(v.label){case 0:return v.trys.push([0,4,,7]),C.isInstance(a)&&(a.headers["amz-sdk-request"]="attempt=".concat(i+1,"; max=").concat(s)),(null==n?void 0:n.beforeRequest)?[4,n.beforeRequest()]:[3,2];case 1:v.sent(),v.label=2;case 2:return[4,e(t)];case 3:return u=v.sent(),l=u.response,d=u.output,(null==n?void 0:n.afterRequest)&&n.afterRequest(l),c.retryQuota.releaseRetryTokens(r),d.$metadata.attempts=i+1,d.$metadata.totalRetryDelay=o,[2,{value:{response:l,output:d}}];case 4:return f=v.sent(),p=Q(f),i++,c.shouldRetry(p,i,s)?(r=c.retryQuota.retrieveRetryTokens(p),h=c.delayDecider(B(p)?500:100,i),g=Z(p.$response),m=Math.max(g||0,h),o+=m,[4,new Promise((function(e){return setTimeout(e,m)}))]):[3,6];case 5:return v.sent(),[2,"continue"];case 6:throw p.$metadata||(p.$metadata={}),p.$metadata.attempts=i,p.$metadata.totalRetryDelay=o,p;case 7:return[2]}}))},c=this,d.label=2;case 2:return[5,u()];case 3:return"object"==typeof(l=d.sent())?[2,l.value]:[3,2];case 4:return[2]}}))}))},e}(),Z=function(e){if(A.isInstance(e)){var t=Object.keys(e.headers).find((function(e){return"retry-after"===e.toLowerCase()}));if(t){var n=e.headers[t],r=Number(n);return Number.isNaN(r)?new Date(n).getTime()-Date.now():1e3*r}}},Q=function(e){return e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):"string"==typeof e?new Error(e):new Error("AWS SDK error wrapper for ".concat(e))},X=function(e){function t(t,n){var r=this,i=null!=n?n:{},o=i.rateLimiter,s=p(i,["rateLimiter"]);return(r=e.call(this,t,s)||this).rateLimiter=null!=o?o:new F,r.mode=I.ADAPTIVE,r}return d(t,e),t.prototype.retry=function(t,n){return h(this,void 0,void 0,(function(){var r=this;return v(this,(function(i){return[2,e.prototype.retry.call(this,t,n,{beforeRequest:function(){return h(r,void 0,void 0,(function(){return v(this,(function(e){return[2,this.rateLimiter.getSendToken()]}))}))},afterRequest:function(e){r.rateLimiter.updateClientSendingRate(e)}})]}))}))},t}(Y),ee={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},te=n(66),ne={},re={},ie=0;ie<256;ie++){var oe=ie.toString(16).toLowerCase();1===oe.length&&(oe="0".concat(oe)),ne[ie]=oe,re[oe]=ie}function se(e){for(var t="",n=0;n<e.byteLength;n++)t+=ne[e[n]];return t}var ae="X-Amz-Date".toLowerCase(),ue=["authorization",ae,"date"],ce="X-Amz-Signature".toLowerCase(),le="X-Amz-Security-Token".toLowerCase(),de={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},fe=/^proxy-/,pe=/^sec-/,he="AWS4-HMAC-SHA256-PAYLOAD",ve={},ge=[],me=function(e,t,n){return"".concat(e,"/").concat(t,"/").concat(n,"/").concat("aws4_request")},ye=function(e,t,n){var r=new e(t);return r.update(n),r.digest()},be=function(e,t,n){var r,i,o=e.headers,s={};try{for(var a=g(Object.keys(o).sort()),u=a.next();!u.done;u=a.next()){var c=u.value;if(null!=o[c]){var l=c.toLowerCase();(l in de||(null==t?void 0:t.has(l))||fe.test(l)||pe.test(l))&&(!n||n&&!n.has(l))||(s[l]=o[c].trim().replace(/\s+/g," "))}}}catch(e){r={error:e}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return s},we=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,_e)},_e=function(e){return"%".concat(e.charCodeAt(0).toString(16).toUpperCase())},Se=function(e,t){var n=e.headers,r=e.body;return h(void 0,void 0,void 0,(function(){var e,i,o,s,a,u,c;return v(this,(function(l){switch(l.label){case 0:try{for(e=g(Object.keys(n)),i=e.next();!i.done;i=e.next())if("x-amz-content-sha256"===(o=i.value).toLowerCase())return[2,n[o]]}catch(e){u={error:e}}finally{try{i&&!i.done&&(c=e.return)&&c.call(e)}finally{if(u)throw u.error}}return null!=r?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof r||ArrayBuffer.isView(r)||(d=r,"function"==typeof ArrayBuffer&&d instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(d))?((s=new t).update(r),a=se,[4,s.digest()]):[3,3];case 2:return[2,a.apply(void 0,[l.sent()])];case 3:return[2,"UNSIGNED-PAYLOAD"]}var d}))}))},Ee=function(e){var t=e.headers,n=e.query,r=p(e,["headers","query"]);return f(f({},r),{headers:f({},t),query:n?Ce(n):void 0})},Ce=function(e){return Object.keys(e).reduce((function(t,n){var r,i=e[n];return f(f({},t),((r={})[n]=Array.isArray(i)?y([],m(i),!1):i,r))}),{})},Ae=function(e){var t,n;e="function"==typeof e.clone?e.clone():Ee(e);try{for(var r=g(Object.keys(e.headers)),i=r.next();!i.done;i=r.next()){var o=i.value;ue.indexOf(o.toLowerCase())>-1&&delete e.headers[o]}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return e},Oe=function(){function e(e){var t=e.applyChecksum,n=e.credentials,r=e.region,i=e.service,o=e.sha256,s=e.uriEscapePath,a=void 0===s||s;this.service=i,this.sha256=o,this.uriEscapePath=a,this.applyChecksum="boolean"!=typeof t||t,this.regionProvider=Object(b.a)(r),this.credentialProvider=Object(b.a)(n)}return e.prototype.presign=function(e,t){return void 0===t&&(t={}),h(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,d,p,h,m,y,b,w,_,S,E,C,A,O,I,T;return v(this,(function(v){switch(v.label){case 0:return n=t.signingDate,r=void 0===n?new Date:n,i=t.expiresIn,o=void 0===i?3600:i,s=t.unsignableHeaders,a=t.unhoistableHeaders,u=t.signableHeaders,c=t.signingRegion,l=t.signingService,[4,this.credentialProvider()];case 1:return d=v.sent(),this.validateResolvedCredentials(d),null==c?[3,2]:(h=c,[3,4]);case 2:return[4,this.regionProvider()];case 3:h=v.sent(),v.label=4;case 4:return p=h,m=Ie(r),y=m.longDate,b=m.shortDate,o>604800?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(w=me(b,p,null!=l?l:this.service),_=function(e,t){var n,r,i;void 0===t&&(t={});var o="function"==typeof e.clone?e.clone():Ee(e),s=o.headers,a=o.query,u=void 0===a?{}:a;try{for(var c=g(Object.keys(s)),l=c.next();!l.done;l=c.next()){var d=l.value,p=d.toLowerCase();"x-amz-"!==p.slice(0,6)||(null===(i=t.unhoistableHeaders)||void 0===i?void 0:i.has(p))||(u[d]=s[d],delete s[d])}}catch(e){n={error:e}}finally{try{l&&!l.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}return f(f({},e),{headers:s,query:u})}(Ae(e),{unhoistableHeaders:a}),d.sessionToken&&(_.query["X-Amz-Security-Token"]=d.sessionToken),_.query["X-Amz-Algorithm"]="AWS4-HMAC-SHA256",_.query["X-Amz-Credential"]="".concat(d.accessKeyId,"/").concat(w),_.query["X-Amz-Date"]=y,_.query["X-Amz-Expires"]=o.toString(10),S=be(_,s,u),_.query["X-Amz-SignedHeaders"]=Te(S),E=_.query,C="X-Amz-Signature",A=this.getSignature,O=[y,w,this.getSigningKey(d,p,b,l)],I=this.createCanonicalRequest,T=[_,S],[4,Se(e,this.sha256)]);case 5:return[4,A.apply(this,O.concat([I.apply(this,T.concat([v.sent()]))]))];case 6:return E[C]=v.sent(),[2,_]}}))}))},e.prototype.sign=function(e,t){return h(this,void 0,void 0,(function(){return v(this,(function(n){return"string"==typeof e?[2,this.signString(e,t)]:e.headers&&e.payload?[2,this.signEvent(e,t)]:[2,this.signRequest(e,t)]}))}))},e.prototype.signEvent=function(e,t){var n=e.headers,r=e.payload,i=t.signingDate,o=void 0===i?new Date:i,s=t.priorSignature,a=t.signingRegion,u=t.signingService;return h(this,void 0,void 0,(function(){var e,t,i,c,l,d,f,p,h,g,m;return v(this,(function(v){switch(v.label){case 0:return null==a?[3,1]:(t=a,[3,3]);case 1:return[4,this.regionProvider()];case 2:t=v.sent(),v.label=3;case 3:return e=t,i=Ie(o),c=i.shortDate,l=i.longDate,d=me(c,e,null!=u?u:this.service),[4,Se({headers:{},body:r},this.sha256)];case 4:return f=v.sent(),(p=new this.sha256).update(n),g=se,[4,p.digest()];case 5:return h=g.apply(void 0,[v.sent()]),m=[he,l,d,s,h,f].join("\n"),[2,this.signString(m,{signingDate:o,signingRegion:e,signingService:u})]}}))}))},e.prototype.signString=function(e,t){var n=void 0===t?{}:t,r=n.signingDate,i=void 0===r?new Date:r,o=n.signingRegion,s=n.signingService;return h(this,void 0,void 0,(function(){var t,n,r,a,u,c,l,d;return v(this,(function(f){switch(f.label){case 0:return[4,this.credentialProvider()];case 1:return t=f.sent(),this.validateResolvedCredentials(t),null==o?[3,2]:(r=o,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=f.sent(),f.label=4;case 4:return n=r,a=Ie(i).shortDate,l=(c=this.sha256).bind,[4,this.getSigningKey(t,n,a,s)];case 5:return(u=new(l.apply(c,[void 0,f.sent()]))).update(e),d=se,[4,u.digest()];case 6:return[2,d.apply(void 0,[f.sent()])]}}))}))},e.prototype.signRequest=function(e,t){var n=void 0===t?{}:t,r=n.signingDate,i=void 0===r?new Date:r,o=n.signableHeaders,s=n.unsignableHeaders,a=n.signingRegion,u=n.signingService;return h(this,void 0,void 0,(function(){var t,n,r,c,l,d,f,p,h,m,y;return v(this,(function(v){switch(v.label){case 0:return[4,this.credentialProvider()];case 1:return t=v.sent(),this.validateResolvedCredentials(t),null==a?[3,2]:(r=a,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=v.sent(),v.label=4;case 4:return n=r,c=Ae(e),l=Ie(i),d=l.longDate,f=l.shortDate,p=me(f,n,null!=u?u:this.service),c.headers[ae]=d,t.sessionToken&&(c.headers[le]=t.sessionToken),[4,Se(c,this.sha256)];case 5:return h=v.sent(),!function(e,t){var n,r;e=e.toLowerCase();try{for(var i=g(Object.keys(t)),o=i.next();!o.done;o=i.next())if(e===o.value.toLowerCase())return!0}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return!1}("x-amz-content-sha256",c.headers)&&this.applyChecksum&&(c.headers["x-amz-content-sha256"]=h),m=be(c,s,o),[4,this.getSignature(d,p,this.getSigningKey(t,n,f,u),this.createCanonicalRequest(c,m,h))];case 6:return y=v.sent(),c.headers.authorization="".concat("AWS4-HMAC-SHA256"," ")+"Credential=".concat(t.accessKeyId,"/").concat(p,", ")+"SignedHeaders=".concat(Te(m),", ")+"Signature=".concat(y),[2,c]}}))}))},e.prototype.createCanonicalRequest=function(e,t,n){var r=Object.keys(t).sort();return"".concat(e.method,"\n").concat(this.getCanonicalPath(e),"\n").concat(function(e){var t,n,r=e.query,i=void 0===r?{}:r,o=[],s={},a=function(e){if(e.toLowerCase()===ce)return"continue";o.push(e);var t=i[e];"string"==typeof t?s[e]="".concat(we(e),"=").concat(we(t)):Array.isArray(t)&&(s[e]=t.slice(0).sort().reduce((function(t,n){return t.concat(["".concat(we(e),"=").concat(we(n))])}),[]).join("&"))};try{for(var u=g(Object.keys(i).sort()),c=u.next();!c.done;c=u.next())a(c.value)}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return o.map((function(e){return s[e]})).filter((function(e){return e})).join("&")}(e),"\n").concat(r.map((function(e){return"".concat(e,":").concat(t[e])})).join("\n"),"\n\n").concat(r.join(";"),"\n").concat(n)},e.prototype.createStringToSign=function(e,t,n){return h(this,void 0,void 0,(function(){var r,i;return v(this,(function(o){switch(o.label){case 0:return(r=new this.sha256).update(n),[4,r.digest()];case 1:return i=o.sent(),[2,"".concat("AWS4-HMAC-SHA256","\n").concat(e,"\n").concat(t,"\n").concat(se(i))]}}))}))},e.prototype.getCanonicalPath=function(e){var t,n,r=e.path;if(this.uriEscapePath){var i=[];try{for(var o=g(r.split("/")),s=o.next();!s.done;s=o.next()){var a=s.value;0!==(null==a?void 0:a.length)&&"."!==a&&(".."===a?i.pop():i.push(a))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}var u="".concat((null==r?void 0:r.startsWith("/"))?"/":"").concat(i.join("/")).concat(i.length>0&&(null==r?void 0:r.endsWith("/"))?"/":"");return encodeURIComponent(u).replace(/%2F/g,"/")}return r},e.prototype.getSignature=function(e,t,n,r){return h(this,void 0,void 0,(function(){var i,o,s,a,u;return v(this,(function(c){switch(c.label){case 0:return[4,this.createStringToSign(e,t,r)];case 1:return i=c.sent(),a=(s=this.sha256).bind,[4,n];case 2:return(o=new(a.apply(s,[void 0,c.sent()]))).update(i),u=se,[4,o.digest()];case 3:return[2,u.apply(void 0,[c.sent()])]}}))}))},e.prototype.getSigningKey=function(e,t,n,r){return function(e,t,n,r,i){return h(void 0,void 0,void 0,(function(){var o,s,a,u,c,l,d,f,p;return v(this,(function(h){switch(h.label){case 0:return[4,ye(e,t.secretAccessKey,t.accessKeyId)];case 1:if(o=h.sent(),(s="".concat(n,":").concat(r,":").concat(i,":").concat(se(o),":").concat(t.sessionToken))in ve)return[2,ve[s]];for(ge.push(s);ge.length>50;)delete ve[ge.shift()];a="AWS4".concat(t.secretAccessKey),h.label=2;case 2:h.trys.push([2,7,8,9]),u=g([n,r,i,"aws4_request"]),c=u.next(),h.label=3;case 3:return c.done?[3,6]:(l=c.value,[4,ye(e,a,l)]);case 4:a=h.sent(),h.label=5;case 5:return c=u.next(),[3,3];case 6:return[3,9];case 7:return d=h.sent(),f={error:d},[3,9];case 8:try{c&&!c.done&&(p=u.return)&&p.call(u)}finally{if(f)throw f.error}return[7];case 9:return[2,ve[s]=a]}}))}))}(this.sha256,e,n,t,r||this.service)},e.prototype.validateResolvedCredentials=function(e){if("object"!=typeof e||"string"!=typeof e.accessKeyId||"string"!=typeof e.secretAccessKey)throw new Error("Resolved credential object is not valid")},e}(),Ie=function(e){var t,n=(t=e,function(e){return"number"==typeof e?new Date(1e3*e):"string"==typeof e?Number(e)?new Date(1e3*Number(e)):new Date(e):e}(t).toISOString().replace(/\.\d{3}Z$/,"Z")).replace(/[\-:]/g,"");return{longDate:n,shortDate:n.slice(0,8)}},Te=function(e){return Object.keys(e).sort().join(";")},xe=function(e){return new Date(Date.now()+e)},Pe=function(e,t){var n=Date.parse(e);return function(e,t){return Math.abs(xe(t).getTime()-e)>=3e5}(n,t)?n-Date.now():t},ke=function(e){var t,n,r;return A.isInstance(e)?null!==(n=null===(t=e.headers)||void 0===t?void 0:t.date)&&void 0!==n?n:null===(r=e.headers)||void 0===r?void 0:r.Date:void 0},De={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},Ne=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,Le=function(e){var t=m(e,2),n=t[0],r=t[1],i=n.indexOf("/"),o=n.substring(0,i),s=n.substring(i+1);return"api"===o&&(s=s.toLowerCase()),[o,s,r].filter((function(e){return e&&e.length>0})).map((function(e){return null==e?void 0:e.replace(Ne,"_")})).join("/")},Me={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},je=function(){var e=[],t=[],n=new Set,r=function(n){return e.forEach((function(e){n.add(e.middleware,f({},e))})),t.forEach((function(e){n.addRelativeTo(e.middleware,f({},e))})),n},i=function(e){var t=[];return e.before.forEach((function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,y([],m(i(e)),!1))})),t.push(e),e.after.reverse().forEach((function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,y([],m(i(e)),!1))})),t},o=function(n){void 0===n&&(n=!1);var r,o=[],s=[],a={};return e.forEach((function(e){var t=f(f({},e),{before:[],after:[]});t.name&&(a[t.name]=t),o.push(t)})),t.forEach((function(e){var t=f(f({},e),{before:[],after:[]});t.name&&(a[t.name]=t),s.push(t)})),s.forEach((function(e){if(e.toMiddleware){var t=a[e.toMiddleware];if(void 0===t){if(n)return;throw new Error("".concat(e.toMiddleware," is not found when adding ").concat(e.name||"anonymous"," middleware ").concat(e.relation," ").concat(e.toMiddleware))}"after"===e.relation&&t.after.push(e),"before"===e.relation&&t.before.push(e)}})),(r=o,r.sort((function(e,t){return Re[t.step]-Re[e.step]||Ue[t.priority||"normal"]-Ue[e.priority||"normal"]}))).map(i).reduce((function(e,t){return e.push.apply(e,y([],m(t),!1)),e}),[])},s={add:function(t,r){void 0===r&&(r={});var i=r.name,o=r.override,s=f({step:"initialize",priority:"normal",middleware:t},r);if(i){if(n.has(i)){if(!o)throw new Error("Duplicate middleware name '".concat(i,"'"));var a=e.findIndex((function(e){return e.name===i})),u=e[a];if(u.step!==s.step||u.priority!==s.priority)throw new Error('"'.concat(i,'" middleware with ').concat(u.priority," priority in ").concat(u.step," step cannot be ")+"overridden by same-name middleware with ".concat(s.priority," priority in ").concat(s.step," step."));e.splice(a,1)}n.add(i)}e.push(s)},addRelativeTo:function(e,r){var i=r.name,o=r.override,s=f({middleware:e},r);if(i){if(n.has(i)){if(!o)throw new Error("Duplicate middleware name '".concat(i,"'"));var a=t.findIndex((function(e){return e.name===i})),u=t[a];if(u.toMiddleware!==s.toMiddleware||u.relation!==s.relation)throw new Error('"'.concat(i,'" middleware ').concat(u.relation,' "').concat(u.toMiddleware,'" middleware cannot be overridden ')+"by same-name middleware ".concat(s.relation,' "').concat(s.toMiddleware,'" middleware.'));t.splice(a,1)}n.add(i)}t.push(s)},clone:function(){return r(je())},use:function(e){e.applyToStack(s)},remove:function(r){return"string"==typeof r?function(r){var i=!1,o=function(e){return!e.name||e.name!==r||(i=!0,n.delete(r),!1)};return e=e.filter(o),t=t.filter(o),i}(r):function(r){var i=!1,o=function(e){return e.middleware!==r||(i=!0,e.name&&n.delete(e.name),!1)};return e=e.filter(o),t=t.filter(o),i}(r)},removeByTag:function(r){var i=!1,o=function(e){var t=e.tags,o=e.name;return!t||!t.includes(r)||(o&&n.delete(o),i=!0,!1)};return e=e.filter(o),t=t.filter(o),i},concat:function(e){var t=r(je());return t.use(e),t},applyToStack:r,identify:function(){return o(!0).map((function(e){return e.name+": "+(e.tags||[]).join(",")}))},resolve:function(e,t){var n,r;try{for(var i=g(o().map((function(e){return e.middleware})).reverse()),s=i.next();!s.done;s=i.next())e=(0,s.value)(e,t)}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return e}};return s},Re={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},Ue={high:3,normal:2,low:1},Be=function(){function e(e){this.middlewareStack=je(),this.config=e}return e.prototype.send=function(e,t,n){var r="function"!=typeof t?t:void 0,i="function"==typeof t?t:n,o=e.resolveMiddleware(this.middlewareStack,this.config,r);if(!i)return o(e).then((function(e){return e.output}));o(e).then((function(e){return i(null,e.output)}),(function(e){return i(e)})).catch((function(){}))},e.prototype.destroy=function(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()},e}(),Fe=function(){this.middlewareStack=je()},ze="***SensitiveInformation***",qe=function(e){if(null!=e){if("number"==typeof e){if(0!==e&&1!==e||rt.warn(nt("Expected boolean, got ".concat(typeof e,": ").concat(e))),0===e)return!1;if(1===e)return!0}if("string"==typeof e){var t=e.toLowerCase();if("false"!==t&&"true"!==t||rt.warn(nt("Expected boolean, got ".concat(typeof e,": ").concat(e))),"false"===t)return!1;if("true"===t)return!0}if("boolean"==typeof e)return e;throw new TypeError("Expected boolean, got ".concat(typeof e,": ").concat(e))}},$e=function(e){if(null!=e){if("string"==typeof e){var t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&rt.warn(nt("Expected number but observed string: ".concat(e))),t}if("number"==typeof e)return e;throw new TypeError("Expected number, got ".concat(typeof e,": ").concat(e))}},Ke=Math.ceil(Math.pow(2,127)*(2-Math.pow(2,-23))),Ve=function(e){return Ge(e,32)},Ge=function(e,t){var n=function(e){if(null!=e){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError("Expected integer, got ".concat(typeof e,": ").concat(e))}}(e);if(void 0!==n&&He(n,t)!==n)throw new TypeError("Expected ".concat(t,"-bit integer, got ").concat(e));return n},He=function(e,t){switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},We=function(e,t){if(null==e){if(t)throw new TypeError("Expected a non-null value for ".concat(t));throw new TypeError("Expected a non-null value")}return e},Je=function(e){if(null!=e){if("object"==typeof e&&!Array.isArray(e))return e;var t=Array.isArray(e)?"array":typeof e;throw new TypeError("Expected object, got ".concat(t,": ").concat(e))}},Ye=function(e){if(null!=e){if("string"==typeof e)return e;if(["boolean","number","bigint"].includes(typeof e))return rt.warn(nt("Expected string, got ".concat(typeof e,": ").concat(e))),String(e);throw new TypeError("Expected string, got ".concat(typeof e,": ").concat(e))}},Ze=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Qe=function(e){var t=e.match(Ze);if(null===t||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)},Xe=function(e){return"string"==typeof e?et(e):$e(e)},et=function(e){switch(e){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error("Unable to parse float value: ".concat(e))}},tt=function(e){return function(e){return Ge(e,16)}("string"==typeof e?Qe(e):e)},nt=function(e){return String(new TypeError(e).stack||e).split("\n").slice(0,5).filter((function(e){return!e.includes("stackTraceWarning")})).join("\n")},rt={warn:console.warn},it=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ot=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),st=function(e){if(null!=e){if("string"!=typeof e)throw new TypeError("RFC-3339 date-times must be expressed as strings");var t=ot.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");var n=m(t,8),r=(n[0],n[1]),i=n[2],o=n[3],s=n[4],a=n[5],u=n[6],c=n[7],l=tt(pt(r)),d=dt(i,"month",1,12),f=dt(o,"day",1,31);return at(l,d,f,{hours:s,minutes:a,seconds:u,fractionalMilliseconds:c})}},at=(new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),function(e,t,n,r){var i=t-1;return ct(e,i,n),new Date(Date.UTC(e,i,n,dt(r.hours,"hour",0,23),dt(r.minutes,"minute",0,59),dt(r.seconds,"seconds",0,60),ft(r.fractionalMilliseconds)))}),ut=[31,28,31,30,31,30,31,31,30,31,30,31],ct=function(e,t,n){var r=ut[t];if(1===t&&lt(e)&&(r=29),n>r)throw new TypeError("Invalid day for ".concat(it[t]," in ").concat(e,": ").concat(n))},lt=function(e){return e%4==0&&(e%100!=0||e%400==0)},dt=function(e,t,n,r){var i=function(e){return function(e){return Ge(e,8)}("string"==typeof e?Qe(e):e)}(pt(e));if(i<n||i>r)throw new TypeError("".concat(t," must be between ").concat(n," and ").concat(r,", inclusive"));return i},ft=function(e){return null==e?0:1e3*function(e){return function(e){var t=$e(e);if(void 0!==t&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>Ke)throw new TypeError("Expected 32-bit float, got ".concat(e));return t}("string"==typeof e?Qe(e):e)}("0."+e)},pt=function(e){for(var t=0;t<e.length-1&&"0"===e.charAt(t);)t++;return 0===t?e:e.slice(t)},ht=function(e){function t(n){var r=e.call(this,n.message)||this;return Object.setPrototypeOf(r,t.prototype),r.name=n.name,r.$fault=n.$fault,r.$metadata=n.$metadata,r}return d(t,e),t}(Error),vt=function(e,t){void 0===t&&(t={}),Object.entries(t).filter((function(e){return void 0!==m(e,2)[1]})).forEach((function(t){var n=m(t,2),r=n[0],i=n[1];null!=e[r]&&""!==e[r]||(e[r]=i)}));var n=e.message||e.Message||"UnknownError";return e.message=n,delete e.Message,e},gt=function(e){var t=e.output,n=e.parsedBody,r=e.exceptionCtor,i=e.errorCode,o=mt(t),s=o.httpStatusCode?o.httpStatusCode+"":void 0,a=new r({name:n.code||n.Code||i||s||"UnknowError",$fault:"client",$metadata:o});throw vt(a,n)},mt=function(e){var t;return{httpStatusCode:e.statusCode,requestId:null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},yt=function(e){switch(e){case"standard":case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}};function bt(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}n(167);var wt=function(){var e=Object.getPrototypeOf(this).constructor,t=new(Function.bind.apply(String,y([null],m(arguments),!1)));return Object.setPrototypeOf(t,e.prototype),t};function _t(e,t,n){var r,i,o,s;if(void 0===t&&void 0===n)o={},s=e;else{if(o=e,"function"==typeof t)return St(o,t,s=n);s=t}try{for(var a=g(Object.keys(s)),u=a.next();!u.done;u=a.next()){var c=u.value;if(Array.isArray(s[c])){var l=m(s[c],2),d=l[0],f=l[1];if("function"==typeof f){var p=void 0,h=void 0===d&&null!=(p=f()),v="function"==typeof d&&!!d(void 0)||"function"!=typeof d&&!!d;h?o[c]=p:v&&(o[c]=f())}else h=void 0===d&&null!=f,v="function"==typeof d&&!!d(f)||"function"!=typeof d&&!!d,(h||v)&&(o[c]=f)}else o[c]=s[c]}}catch(e){r={error:e}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return o}wt.prototype=Object.create(String.prototype,{constructor:{value:wt,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(wt,String),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}d(t,e),t.prototype.deserializeJSON=function(){return JSON.parse(e.prototype.toString.call(this))},t.prototype.toJSON=function(){return e.prototype.toString.call(this)},t.fromObject=function(e){return e instanceof t?e:new t(e instanceof String||"string"==typeof e?e:JSON.stringify(e))}}(wt);for(var St=function(e,t,n){return _t(e,Object.entries(n).reduce((function(e,n){var r=m(n,2),i=r[0],o=r[1];return Array.isArray(o)?e[i]=o:e[i]="function"==typeof o?[t,o()]:[t,o],e}),{}))},Et=function(e,t,n,r,i,o){if(null==t||void 0===t[n])throw new Error("No value provided for input HTTP label: "+n+".");var s=r();if(s.length<=0)throw new Error("Empty value provided for input HTTP label: "+n+".");return e.replace(i,o?s.split("/").map((function(e){return bt(e)})).join("/"):bt(s))},Ct=function(e){if(e!=e)return"NaN";switch(e){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return e}},At=n(194),Ot=n(193),It=function(){function e(e){"function"==typeof e?this.configProvider=e().then((function(e){return e||{}})):(this.config=null!=e?e:{},this.configProvider=Promise.resolve(this.config))}return e.prototype.destroy=function(){},e.prototype.handle=function(e,t){var n=(void 0===t?{}:t).abortSignal;return h(this,void 0,void 0,(function(){var t,r,i,o,s,a,u,c,l,d,f,p;return v(this,(function(h){switch(h.label){case 0:return this.config?[3,2]:(t=this,[4,this.configProvider]);case 1:t.config=h.sent(),h.label=2;case 2:return r=this.config.requestTimeout,(null==n?void 0:n.aborted)?((i=new Error("Request aborted")).name="AbortError",[2,Promise.reject(i)]):(o=e.path,e.query&&(s=function(e){var t,n,r=[];try{for(var i=g(Object.keys(e).sort()),o=i.next();!o.done;o=i.next()){var s=o.value,a=e[s];if(s=we(s),Array.isArray(a))for(var u=0,c=a.length;u<c;u++)r.push("".concat(s,"=").concat(we(a[u])));else{var l=s;(a||"string"==typeof a)&&(l+="=".concat(we(a))),r.push(l)}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r.join("&")}(e.query))&&(o+="?".concat(s)),a=e.port,u=e.method,c="".concat(e.protocol,"//").concat(e.hostname).concat(a?":".concat(a):"").concat(o),l="GET"===u||"HEAD"===u?void 0:e.body,d={body:l,headers:new Headers(e.headers),method:u},"undefined"!=typeof AbortController&&(d.signal=n),f=new Request(c,d),p=[fetch(f).then((function(e){var t,n,r=e.headers,i={};try{for(var o=g(r.entries()),s=o.next();!s.done;s=o.next()){var a=s.value;i[a[0]]=a[1]}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return void 0!==e.body?{response:new A({headers:i,statusCode:e.status,body:e.body})}:e.blob().then((function(t){return{response:new A({headers:i,statusCode:e.status,body:t})}}))})),(v=r,void 0===v&&(v=0),new Promise((function(e,t){v&&setTimeout((function(){var e=new Error("Request did not complete within ".concat(v," ms"));e.name="TimeoutError",t(e)}),v)})))],n&&p.push(new Promise((function(e,t){n.onabort=function(){var e=new Error("Request aborted");e.name="AbortError",t(e)}}))),[2,Promise.race(p)])}var v}))}))},e}(),Tt={},xt=new Array(64),Pt=0,kt="A".charCodeAt(0),Dt="Z".charCodeAt(0);Pt+kt<=Dt;Pt++){var Nt=String.fromCharCode(Pt+kt);Tt[Nt]=Pt,xt[Pt]=Nt}for(Pt=0,kt="a".charCodeAt(0),Dt="z".charCodeAt(0);Pt+kt<=Dt;Pt++){Nt=String.fromCharCode(Pt+kt);var Lt=Pt+26;Tt[Nt]=Lt,xt[Lt]=Nt}for(Pt=0;Pt<10;Pt++)Tt[Pt.toString(10)]=Pt+52,Nt=Pt.toString(10),Lt=Pt+52,Tt[Nt]=Lt,xt[Lt]=Nt;function Mt(e){var t=e.length/4*3;"=="===e.slice(-2)?t-=2:"="===e.slice(-1)&&t--;for(var n=new ArrayBuffer(t),r=new DataView(n),i=0;i<e.length;i+=4){for(var o=0,s=0,a=i,u=i+3;a<=u;a++)if("="!==e[a]){if(!(e[a]in Tt))throw new TypeError("Invalid character ".concat(e[a]," in base64 string."));o|=Tt[e[a]]<<6*(u-a),s+=6}else o>>=6;var c=i/4*3;o>>=s%8;for(var l=Math.floor(s/8),d=0;d<l;d++){var f=8*(l-d-1);r.setUint8(c+d,(o&255<<f)>>f)}}return new Uint8Array(n)}function jt(e){for(var t="",n=0;n<e.length;n+=3){for(var r=0,i=0,o=n,s=Math.min(n+3,e.length);o<s;o++)r|=e[o]<<8*(s-o-1),i+=8;var a=Math.ceil(i/6);r<<=6*a-i;for(var u=1;u<=a;u++){var c=6*(a-u);t+=xt[(r&63<<c)>>c]}t+="==".slice(0,4-a)}return t}Tt["+"]=62,xt[62]="+",Tt["/"]=63,xt[63]="/";var Rt=function(e){return"function"==typeof Blob&&e instanceof Blob?function(e){return h(this,void 0,void 0,(function(){var t,n;return v(this,(function(r){switch(r.label){case 0:return[4,Ut(e)];case 1:return t=r.sent(),n=Mt(t),[2,new Uint8Array(n)]}}))}))}(e):function(e){return h(this,void 0,void 0,(function(){var t,n,r,i,o,s,a;return v(this,(function(u){switch(u.label){case 0:t=new Uint8Array(0),n=e.getReader(),r=!1,u.label=1;case 1:return r?[3,3]:[4,n.read()];case 2:return i=u.sent(),o=i.done,(s=i.value)&&(a=t,(t=new Uint8Array(a.length+s.length)).set(a),t.set(s,a.length)),r=o,[3,1];case 3:return[2,t]}}))}))}(e)};function Ut(e){return new Promise((function(t,n){var r=new FileReader;r.onloadend=function(){var e;if(2!==r.readyState)return n(new Error("Reader aborted too early"));var i=null!==(e=r.result)&&void 0!==e?e:"",o=i.indexOf(","),s=o>-1?o+1:i.length;t(i.substring(s))},r.onabort=function(){return n(new Error("Read aborted"))},r.onerror=function(){return n(r.error)},r.readAsDataURL(e)}))}var Bt=function(e){if("string"==typeof e){for(var t=e.length,n=t-1;n>=0;n--){var r=e.charCodeAt(n);r>127&&r<=2047?t++:r>2047&&r<=65535&&(t+=2),r>=56320&&r<=57343&&n--}return t}if("number"==typeof e.byteLength)return e.byteLength;if("number"==typeof e.size)return e.size;throw new Error("Body Length computation failed for ".concat(e))},Ft=n(58),zt=n.n(Ft),qt=function(e){var t=e.serviceId,n=e.clientVersion;return function(){return h(void 0,void 0,void 0,(function(){var e,r,i,o,s,a,u,c,l;return v(this,(function(d){return e="undefined"!=typeof window&&(null===(i=null===window||void 0===window?void 0:window.navigator)||void 0===i?void 0:i.userAgent)?zt.a.parse(window.navigator.userAgent):void 0,r=[["aws-sdk-js",n],["os/".concat((null===(o=null==e?void 0:e.os)||void 0===o?void 0:o.name)||"other"),null===(s=null==e?void 0:e.os)||void 0===s?void 0:s.version],["lang/js"],["md/browser","".concat(null!==(u=null===(a=null==e?void 0:e.browser)||void 0===a?void 0:a.name)&&void 0!==u?u:"unknown","_").concat(null!==(l=null===(c=null==e?void 0:e.browser)||void 0===c?void 0:c.version)&&void 0!==l?l:"unknown")]],t&&r.push(["api/".concat(t),n]),[2,r]}))}))}},$t=function(e){return"function"==typeof TextEncoder?function(e){return(new TextEncoder).encode(e)}(e):function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e.charCodeAt(n);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192,63&i|128);else if(n+1<e.length&&55296==(64512&i)&&56320==(64512&e.charCodeAt(n+1))){var o=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n));t.push(o>>18|240,o>>12&63|128,o>>6&63|128,63&o|128)}else t.push(i>>12|224,i>>6&63|128,63&i|128)}return Uint8Array.from(t)}(e)},Kt=function(e){return"function"==typeof TextDecoder?function(e){return new TextDecoder("utf-8").decode(e)}(e):function(e){for(var t="",n=0,r=e.length;n<r;n++){var i=e[n];if(i<128)t+=String.fromCharCode(i);else if(192<=i&&i<224){var o=e[++n];t+=String.fromCharCode((31&i)<<6|63&o)}else if(240<=i&&i<365){var s="%"+[i,e[++n],e[++n],e[++n]].map((function(e){return e.toString(16)})).join("%");t+=decodeURIComponent(s)}else t+=String.fromCharCode((15&i)<<12|(63&e[++n])<<6|63&e[++n])}return t}(e)},Vt=function(e){if("string"==typeof e)return Vt(new URL(e));var t,n=e,r=n.hostname,i=n.pathname,o=n.port,s=n.protocol,a=n.search;return a&&(t=function(e){var t,n,r={};if(e=e.replace(/^\?/,""))try{for(var i=g(e.split("&")),o=i.next();!o.done;o=i.next()){var s=m(o.value.split("="),2),a=s[0],u=s[1],c=void 0===u?null:u;a=decodeURIComponent(a),c&&(c=decodeURIComponent(c)),a in r?Array.isArray(r[a])?r[a].push(c):r[a]=[r[a],c]:r[a]=c}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}(a)),{hostname:r,port:o?parseInt(o):void 0,protocol:s,path:i,query:t}},Gt={},Ht={aws:{regions:["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-northeast-3","ap-south-1","ap-southeast-1","ap-southeast-2","ap-southeast-3","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-central-1","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"],regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",variants:[{hostname:"geo.{region}.amazonaws.com",tags:[]},{hostname:"geo-fips.{region}.amazonaws.com",tags:["fips"]},{hostname:"geo-fips.{region}.api.aws",tags:["dualstack","fips"]},{hostname:"geo.{region}.api.aws",tags:["dualstack"]}]},"aws-cn":{regions:["cn-north-1","cn-northwest-1"],regionRegex:"^cn\\-\\w+\\-\\d+$",variants:[{hostname:"geo.{region}.amazonaws.com.cn",tags:[]},{hostname:"geo-fips.{region}.amazonaws.com.cn",tags:["fips"]},{hostname:"geo-fips.{region}.api.amazonwebservices.com.cn",tags:["dualstack","fips"]},{hostname:"geo.{region}.api.amazonwebservices.com.cn",tags:["dualstack"]}]},"aws-iso":{regions:["us-iso-east-1","us-iso-west-1"],regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",variants:[{hostname:"geo.{region}.c2s.ic.gov",tags:[]},{hostname:"geo-fips.{region}.c2s.ic.gov",tags:["fips"]}]},"aws-iso-b":{regions:["us-isob-east-1"],regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",variants:[{hostname:"geo.{region}.sc2s.sgov.gov",tags:[]},{hostname:"geo-fips.{region}.sc2s.sgov.gov",tags:["fips"]}]},"aws-us-gov":{regions:["us-gov-east-1","us-gov-west-1"],regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",variants:[{hostname:"geo.{region}.amazonaws.com",tags:[]},{hostname:"geo-fips.{region}.amazonaws.com",tags:["fips"]},{hostname:"geo-fips.{region}.api.aws",tags:["dualstack","fips"]},{hostname:"geo.{region}.api.aws",tags:["dualstack"]}]}},Wt=function(e,t){return h(void 0,void 0,void 0,(function(){return v(this,(function(n){return[2,E(e,f(f({},t),{signingService:"geo",regionHash:Gt,partitionHash:Ht}))]}))}))},Jt=n(98),Yt=function(e){function t(t){var n,r,i,o=this,s=function(e){var t=e.region,n=e.useFipsEndpoint;if(!t)throw new Error("Region is missing");return f(f({},e),{region:function(){return h(void 0,void 0,void 0,(function(){var e;return v(this,(function(n){switch(n.label){case 0:return"string"==typeof t?[2,_(t)]:[4,t()];case 1:return e=n.sent(),[2,_(e)]}}))}))},useFipsEndpoint:function(){return h(void 0,void 0,void 0,(function(){var e;return v(this,(function(r){switch(r.label){case 0:return"string"!=typeof t?[3,1]:(e=t,[3,3]);case 1:return[4,t()];case 2:e=r.sent(),r.label=3;case 3:return w(e)?[2,!0]:[2,"boolean"==typeof n?Promise.resolve(n):n()]}}))}))}})}(function(e){var t,n,r,i,o,s,a,u,c,l,d,p,g,m,y,b=Object(Jt.a)(e),w=function(){return b().then(yt)},_=function(e){var t,n,r,i,o;return{apiVersion:"2020-11-19",disableHostPrefix:null!==(t=null==e?void 0:e.disableHostPrefix)&&void 0!==t&&t,logger:null!==(n=null==e?void 0:e.logger)&&void 0!==n?n:{},regionInfoProvider:null!==(r=null==e?void 0:e.regionInfoProvider)&&void 0!==r?r:Wt,serviceId:null!==(i=null==e?void 0:e.serviceId)&&void 0!==i?i:"Location",urlParser:null!==(o=null==e?void 0:e.urlParser)&&void 0!==o?o:Vt}}(e);return f(f(f({},_),e),{runtime:"browser",defaultsMode:b,base64Decoder:null!==(t=null==e?void 0:e.base64Decoder)&&void 0!==t?t:Mt,base64Encoder:null!==(n=null==e?void 0:e.base64Encoder)&&void 0!==n?n:jt,bodyLengthChecker:null!==(r=null==e?void 0:e.bodyLengthChecker)&&void 0!==r?r:Bt,credentialDefaultProvider:null!==(i=null==e?void 0:e.credentialDefaultProvider)&&void 0!==i?i:function(e){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:null!==(o=null==e?void 0:e.defaultUserAgentProvider)&&void 0!==o?o:qt({serviceId:_.serviceId,clientVersion:At.version}),maxAttempts:null!==(s=null==e?void 0:e.maxAttempts)&&void 0!==s?s:3,region:null!==(a=null==e?void 0:e.region)&&void 0!==a?a:function(){return Promise.reject("Region is missing")},requestHandler:null!==(u=null==e?void 0:e.requestHandler)&&void 0!==u?u:new It(w),retryMode:null!==(c=null==e?void 0:e.retryMode)&&void 0!==c?c:function(){return h(void 0,void 0,void 0,(function(){return v(this,(function(e){switch(e.label){case 0:return[4,w()];case 1:return[2,e.sent().retryMode||N]}}))}))},sha256:null!==(l=null==e?void 0:e.sha256)&&void 0!==l?l:Ot.Sha256,streamCollector:null!==(d=null==e?void 0:e.streamCollector)&&void 0!==d?d:Rt,useDualstackEndpoint:null!==(p=null==e?void 0:e.useDualstackEndpoint)&&void 0!==p?p:function(){return Promise.resolve(!1)},useFipsEndpoint:null!==(g=null==e?void 0:e.useFipsEndpoint)&&void 0!==g?g:function(){return Promise.resolve(!1)},utf8Decoder:null!==(m=null==e?void 0:e.utf8Decoder)&&void 0!==m?m:$t,utf8Encoder:null!==(y=null==e?void 0:e.utf8Encoder)&&void 0!==y?y:Kt})}(t)),a=function(e){var t,n=Object(b.a)(e.useDualstackEndpoint),r=e.endpoint,i=e.useFipsEndpoint,o=e.urlParser;return f(f({},e),{tls:null===(t=e.tls)||void 0===t||t,endpoint:r?Object(b.a)("string"==typeof r?o(r):r):function(){return function(e){return h(void 0,void 0,void 0,(function(){var t,n,r,i,o,s,a;return v(this,(function(u){switch(u.label){case 0:return t=e.tls,n=void 0===t||t,[4,e.region()];case 1:if(r=u.sent(),!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(r))throw new Error("Invalid region in client config");return[4,e.useDualstackEndpoint()];case 2:return i=u.sent(),[4,e.useFipsEndpoint()];case 3:return o=u.sent(),[4,e.regionInfoProvider(r,{useDualstackEndpoint:i,useFipsEndpoint:o})];case 4:if(!(s=(null!==(a=u.sent())&&void 0!==a?a:{}).hostname))throw new Error("Cannot resolve hostname from client config");return[2,e.urlParser("".concat(n?"https:":"http:","//").concat(s))]}}))}))}(f(f({},e),{useDualstackEndpoint:n,useFipsEndpoint:i}))},isCustomEndpoint:!!r,useDualstackEndpoint:n})}(s),u=function(e){return f(f({},e),{customUserAgent:"string"==typeof e.customUserAgent?[[e.customUserAgent]]:e.customUserAgent})}(function(e){var t,n=e.credentials?function(e){return"function"==typeof e?Object(te.a)(e,(function(e){return void 0!==e.expiration&&e.expiration.getTime()-Date.now()<3e5}),(function(e){return void 0!==e.expiration})):Object(b.a)(e)}(e.credentials):e.credentialDefaultProvider(e),r=e.signingEscapePath,i=void 0===r||r,o=e.systemClockOffset,s=void 0===o?e.systemClockOffset||0:o,a=e.sha256;return t=e.signer?Object(b.a)(e.signer):e.regionInfoProvider?function(){return Object(b.a)(e.region)().then((function(t){return h(void 0,void 0,void 0,(function(){var n,r,i,o;return v(this,(function(s){switch(s.label){case 0:return r=(n=e).regionInfoProvider,i=[t],o={},[4,e.useFipsEndpoint()];case 1:return o.useFipsEndpoint=s.sent(),[4,e.useDualstackEndpoint()];case 2:return[4,r.apply(n,i.concat([(o.useDualstackEndpoint=s.sent(),o)]))];case 3:return[2,[s.sent()||{},t]]}}))}))})).then((function(t){var r=m(t,2),o=r[0],s=r[1],u=o.signingRegion,c=o.signingService;e.signingRegion=e.signingRegion||u||s,e.signingName=e.signingName||c||e.serviceId;var l=f(f({},e),{credentials:n,region:e.signingRegion,service:e.signingName,sha256:a,uriEscapePath:i});return new(e.signerConstructor||Oe)(l)}))}:function(t){return h(void 0,void 0,void 0,(function(){var r,o,s;return v(this,(function(u){if(!t)throw new Error("Unexpected empty auth scheme config");return r=t.signingScope,o=t.signingName,e.signingRegion=e.signingRegion||r,e.signingName=e.signingName||o||e.serviceId,s=f(f({},e),{credentials:n,region:e.signingRegion,service:e.signingName,sha256:a,uriEscapePath:i}),[2,new(e.signerConstructor||Oe)(s)]}))}))},f(f({},e),{systemClockOffset:s,signingEscapePath:i,credentials:n,signer:t})}((n=a,i=Object(b.a)(null!==(r=n.maxAttempts)&&void 0!==r?r:3),f(f({},n),{maxAttempts:i,retryStrategy:function(){return h(void 0,void 0,void 0,(function(){return v(this,(function(e){switch(e.label){case 0:return n.retryStrategy?[2,n.retryStrategy]:[4,Object(b.a)(n.retryMode)()];case 1:return e.sent()===I.ADAPTIVE?[2,new X(i)]:[2,new Y(i)]}}))}))}}))));return(o=e.call(this,u)||this).config=u,o.middlewareStack.use(function(e){return{applyToStack:function(t){t.add(function(e){return function(t,n){return function(r){return h(void 0,void 0,void 0,(function(){var i;return v(this,(function(o){switch(o.label){case 0:return[4,e.retryStrategy()];case 1:return(null==(i=o.sent())?void 0:i.mode)&&(n.userAgent=y(y([],m(n.userAgent||[]),!1),[["cfg/retry-mode",i.mode]],!1)),[2,i.retry(t,r)]}}))}))}}}(e),ee)}}}(o.config)),o.middlewareStack.use(function(e){return{applyToStack:function(t){t.add(function(e){var t=this;return function(n){return function(r){return h(t,void 0,void 0,(function(){var t,i,o,s,a;return v(this,(function(u){if(t=r.request,C.isInstance(t)&&(i=t.body,o=t.headers,i&&-1===Object.keys(o).map((function(e){return e.toLowerCase()})).indexOf("content-length")))try{s=e(i),t.headers=f(f({},t.headers),((a={})["content-length"]=String(s),a))}catch(e){}return[2,n(f(f({},r),{request:t}))]}))}))}}}(e.bodyLengthChecker),T)}}}(o.config)),o.middlewareStack.use(function(e){return{applyToStack:function(t){t.add(function(e){return function(t){return function(n){return h(void 0,void 0,void 0,(function(){var r,i;return v(this,(function(o){return C.isInstance(n.request)?(r=n.request,(void 0===(i=(e.requestHandler.metadata||{}).handlerProtocol)?"":i).indexOf("h2")>=0&&!r.headers[":authority"]?(delete r.headers.host,r.headers[":authority"]=""):r.headers.host||(r.headers.host=r.hostname),[2,t(n)]):[2,t(n)]}))}))}}}(e),x)}}}(o.config)),o.middlewareStack.use((o.config,{applyToStack:function(e){e.add((function(e,t){return function(n){return h(void 0,void 0,void 0,(function(){var r,i,o,s,a,u,c,l,d;return v(this,(function(f){switch(f.label){case 0:return r=t.clientName,i=t.commandName,o=t.inputFilterSensitiveLog,s=t.logger,a=t.outputFilterSensitiveLog,[4,e(n)];case 1:return u=f.sent(),s?("function"==typeof s.info&&(c=u.output,l=c.$metadata,d=p(c,["$metadata"]),s.info({clientName:r,commandName:i,input:o(n.input),output:a(d),metadata:l})),[2,u]):[2,u]}}))}))}}),P)}})),o.middlewareStack.use(Object(k.a)(o.config)),o.middlewareStack.use(function(e){return{applyToStack:function(t){t.addRelativeTo(function(e){return function(t,n){return function(r){var i,o,s;return h(this,void 0,void 0,(function(){var a,u,c,l,d,p,h;return v(this,(function(v){switch(v.label){case 0:return C.isInstance(r.request)?(a=null===(s=null===(o=null===(i=n.endpointV2)||void 0===i?void 0:i.properties)||void 0===o?void 0:o.authSchemes)||void 0===s?void 0:s[0],[4,e.signer(a)]):[2,t(r)];case 1:return u=v.sent(),l=t,d=[f({},r)],h={},[4,u.sign(r.request,{signingDate:xe(e.systemClockOffset),signingRegion:n.signing_region,signingService:n.signing_service})];case 2:return[4,l.apply(void 0,[f.apply(void 0,d.concat([(h.request=v.sent(),h)]))]).catch((function(t){var n,r=null!==(n=t.ServerTime)&&void 0!==n?n:ke(t.$response);throw r&&(e.systemClockOffset=Pe(r,e.systemClockOffset)),t}))];case 3:return c=v.sent(),(p=ke(c.response))&&(e.systemClockOffset=Pe(p,e.systemClockOffset)),[2,c]}}))}))}}}(e),De)}}}(o.config)),o.middlewareStack.use(function(e){return{applyToStack:function(t){var n;t.add((n=e,function(e,t){return function(r){return h(void 0,void 0,void 0,(function(){var i,o,s,a,u,c,l,d,p;return v(this,(function(h){switch(h.label){case 0:return i=r.request,C.isInstance(i)?(o=i.headers,s=(null===(d=null==t?void 0:t.userAgent)||void 0===d?void 0:d.map(Le))||[],[4,n.defaultUserAgentProvider()]):[2,e(r)];case 1:return a=h.sent().map(Le),u=(null===(p=null==n?void 0:n.customUserAgent)||void 0===p?void 0:p.map(Le))||[],c=y(y(y([],m(a),!1),m(s),!1),m(u),!1).join(" "),l=y(y([],m(a.filter((function(e){return e.startsWith("aws-sdk-")}))),!1),m(u),!1).join(" "),"browser"!==n.runtime?(l&&(o["x-amz-user-agent"]=o["x-amz-user-agent"]?"".concat(o["user-agent"]," ").concat(l):l),o["user-agent"]=c):o["x-amz-user-agent"]=c,[2,e(f(f({},r),{request:i}))]}}))}))}}),Me)}}}(o.config)),o}return d(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(Be),Zt={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Qt={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function Xt(e,t,n){return{applyToStack:function(r){r.add(function(e,t){return function(n,r){return function(r){return h(void 0,void 0,void 0,(function(){var i,o,s;return v(this,(function(a){switch(a.label){case 0:return[4,n(r)];case 1:i=a.sent().response,a.label=2;case 2:return a.trys.push([2,4,,5]),[4,t(i,e)];case 3:return o=a.sent(),[2,{response:i,output:o}];case 4:throw s=a.sent(),Object.defineProperty(s,"$response",{value:i}),s;case 5:return[2]}}))}))}}}(e,n),Zt),r.add(function(e,t){return function(n,r){return function(i){return h(void 0,void 0,void 0,(function(){var o,s,a;return v(this,(function(u){switch(u.label){case 0:if(!(o=(null===(a=r.endpointV2)||void 0===a?void 0:a.url)&&e.urlParser?function(){return h(void 0,void 0,void 0,(function(){return v(this,(function(t){return[2,e.urlParser(r.endpointV2.url)]}))}))}:e.endpoint))throw new Error("No valid endpoint provider available.");return[4,t(i.input,f(f({},e),{endpoint:o}))];case 1:return s=u.sent(),[2,n(f(f({},i),{request:s}))]}}))}))}}}(e,t),Qt)}}}var en=function(e){function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r}return d(t,e),t}(ht),tn=function(e){function t(n){var r=e.call(this,f({name:"AccessDeniedException",$fault:"client"},n))||this;return r.name="AccessDeniedException",r.$fault="client",Object.setPrototypeOf(r,t.prototype),r.Message=n.Message,r}return d(t,e),t}(en),nn=(function(e){d((function t(n){var r=e.call(this,f({name:"ConflictException",$fault:"client"},n))||this;return r.name="ConflictException",r.$fault="client",Object.setPrototypeOf(r,t.prototype),r.Message=n.Message,r}),e)}(en),function(e){function t(n){var r=e.call(this,f({name:"InternalServerException",$fault:"server"},n))||this;return r.name="InternalServerException",r.$fault="server",r.$retryable={},Object.setPrototypeOf(r,t.prototype),r.Message=n.Message,r}return d(t,e),t}(en)),rn=function(e){function t(n){var r=e.call(this,f({name:"ResourceNotFoundException",$fault:"client"},n))||this;return r.name="ResourceNotFoundException",r.$fault="client",Object.setPrototypeOf(r,t.prototype),r.Message=n.Message,r}return d(t,e),t}(en),on=(function(e){d((function t(n){var r=e.call(this,f({name:"ServiceQuotaExceededException",$fault:"client"},n))||this;return r.name="ServiceQuotaExceededException",r.$fault="client",Object.setPrototypeOf(r,t.prototype),r.Message=n.Message,r}),e)}(en),function(e){function t(n){var r=e.call(this,f({name:"ThrottlingException",$fault:"client"},n))||this;return r.name="ThrottlingException",r.$fault="client",r.$retryable={},Object.setPrototypeOf(r,t.prototype),r.Message=n.Message,r}return d(t,e),t}(en)),sn=function(e){function t(n){var r=e.call(this,f({name:"ValidationException",$fault:"client"},n))||this;return r.name="ValidationException",r.$fault="client",Object.setPrototypeOf(r,t.prototype),r.Message=n.Message,r.Reason=n.Reason,r.FieldList=n.FieldList,r}return d(t,e),t}(en),an=function(e){return f({},e)},un=function(e){return f({},e)},cn=function(e){return f(f(f({},e),e.Polygon&&{Polygon:e.Polygon.map((function(e){return ze}))}),e.Circle&&{Circle:ze})},ln=function(e){return f(f({},e),e.Entries&&{Entries:e.Entries.map((function(e){return function(e){return f(f({},e),e.Geometry&&{Geometry:cn(e.Geometry)})}(e)}))})},dn=function(e){return f({},e)},fn=function(e){return f({},e)},pn=function(e){return f(f({},e),e.Geometry&&{Geometry:cn(e.Geometry)})},hn=function(e){return f({},e)},vn=function(e){return f(f({},e),e.Entries&&{Entries:e.Entries.map((function(e){return function(e){return f(f({},e),e.Geometry&&{Geometry:cn(e.Geometry)})}(e)}))})},gn=function(e){return f({},e)},mn=function(e){return f(f({},e),e.Point&&{Point:ze})},yn=function(e){return f(f({},e),e.Geometry&&{Geometry:mn(e.Geometry)})},bn=function(e){return f(f({},e),e.Place&&{Place:yn(e.Place)})},wn=function(e){return f(f({},e),e.Position&&{Position:ze})},_n=function(e){return f(f({},e),e.Position&&{Position:ze})},Sn=function(e){return f(f(f({},e),e.Summary&&{Summary:_n(e.Summary)}),e.Results&&{Results:e.Results.map((function(e){return function(e){return f(f({},e),e.Place&&{Place:yn(e.Place)})}(e)}))})},En=function(e){return f(f(f(f({},e),e.Text&&{Text:ze}),e.BiasPosition&&{BiasPosition:ze}),e.FilterBBox&&{FilterBBox:ze})},Cn=function(e){return f(f(f(f({},e),e.Text&&{Text:ze}),e.BiasPosition&&{BiasPosition:ze}),e.FilterBBox&&{FilterBBox:ze})},An=function(e){return f(f({},e),e.Summary&&{Summary:Cn(e.Summary)})},On=function(e){return f(f(f(f({},e),e.Text&&{Text:ze}),e.BiasPosition&&{BiasPosition:ze}),e.FilterBBox&&{FilterBBox:ze})},In=function(e){return f(f(f(f(f({},e),e.Text&&{Text:ze}),e.BiasPosition&&{BiasPosition:ze}),e.FilterBBox&&{FilterBBox:ze}),e.ResultBBox&&{ResultBBox:ze})},Tn=function(e){return f(f(f({},e),e.Summary&&{Summary:In(e.Summary)}),e.Results&&{Results:e.Results.map((function(e){return function(e){return f(f({},e),e.Place&&{Place:yn(e.Place)})}(e)}))})},xn=function(e,t){return h(void 0,void 0,void 0,(function(){var n,r,i,o,s;return v(this,(function(a){switch(a.label){case 0:return r=[f({},e)],s={},[4,lr(e.body,t)];case 1:switch(n=f.apply(void 0,r.concat([(s.body=a.sent(),s)])),i=dr(e,n.body)){case"AccessDeniedException":case"com.amazonaws.location#AccessDeniedException":return[3,2];case"InternalServerException":case"com.amazonaws.location#InternalServerException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.location#ResourceNotFoundException":return[3,6];case"ThrottlingException":case"com.amazonaws.location#ThrottlingException":return[3,8];case"ValidationException":case"com.amazonaws.location#ValidationException":return[3,10]}return[3,12];case 2:return[4,Un(n,t)];case 3:throw a.sent();case 4:return[4,Bn(n,t)];case 5:throw a.sent();case 6:return[4,Fn(n,t)];case 7:throw a.sent();case 8:return[4,zn(n,t)];case 9:throw a.sent();case 10:return[4,qn(n,t)];case 11:throw a.sent();case 12:o=n.body,gt({output:e,parsedBody:o,exceptionCtor:en,errorCode:i}),a.label=13;case 13:return[2]}}))}))},Pn=function(e,t){return h(void 0,void 0,void 0,(function(){var n,r,i,o,s;return v(this,(function(a){switch(a.label){case 0:return r=[f({},e)],s={},[4,lr(e.body,t)];case 1:switch(n=f.apply(void 0,r.concat([(s.body=a.sent(),s)])),i=dr(e,n.body)){case"AccessDeniedException":case"com.amazonaws.location#AccessDeniedException":return[3,2];case"InternalServerException":case"com.amazonaws.location#InternalServerException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.location#ResourceNotFoundException":return[3,6];case"ThrottlingException":case"com.amazonaws.location#ThrottlingException":return[3,8];case"ValidationException":case"com.amazonaws.location#ValidationException":return[3,10]}return[3,12];case 2:return[4,Un(n,t)];case 3:throw a.sent();case 4:return[4,Bn(n,t)];case 5:throw a.sent();case 6:return[4,Fn(n,t)];case 7:throw a.sent();case 8:return[4,zn(n,t)];case 9:throw a.sent();case 10:return[4,qn(n,t)];case 11:throw a.sent();case 12:o=n.body,gt({output:e,parsedBody:o,exceptionCtor:en,errorCode:i}),a.label=13;case 13:return[2]}}))}))},kn=function(e,t){return h(void 0,void 0,void 0,(function(){var n,r,i,o,s;return v(this,(function(a){switch(a.label){case 0:return r=[f({},e)],s={},[4,lr(e.body,t)];case 1:switch(n=f.apply(void 0,r.concat([(s.body=a.sent(),s)])),i=dr(e,n.body)){case"AccessDeniedException":case"com.amazonaws.location#AccessDeniedException":return[3,2];case"InternalServerException":case"com.amazonaws.location#InternalServerException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.location#ResourceNotFoundException":return[3,6];case"ThrottlingException":case"com.amazonaws.location#ThrottlingException":return[3,8];case"ValidationException":case"com.amazonaws.location#ValidationException":return[3,10]}return[3,12];case 2:return[4,Un(n,t)];case 3:throw a.sent();case 4:return[4,Bn(n,t)];case 5:throw a.sent();case 6:return[4,Fn(n,t)];case 7:throw a.sent();case 8:return[4,zn(n,t)];case 9:throw a.sent();case 10:return[4,qn(n,t)];case 11:throw a.sent();case 12:o=n.body,gt({output:e,parsedBody:o,exceptionCtor:en,errorCode:i}),a.label=13;case 13:return[2]}}))}))},Dn=function(e,t){return h(void 0,void 0,void 0,(function(){var n,r,i,o,s;return v(this,(function(a){switch(a.label){case 0:return r=[f({},e)],s={},[4,lr(e.body,t)];case 1:switch(n=f.apply(void 0,r.concat([(s.body=a.sent(),s)])),i=dr(e,n.body)){case"AccessDeniedException":case"com.amazonaws.location#AccessDeniedException":return[3,2];case"InternalServerException":case"com.amazonaws.location#InternalServerException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.location#ResourceNotFoundException":return[3,6];case"ThrottlingException":case"com.amazonaws.location#ThrottlingException":return[3,8];case"ValidationException":case"com.amazonaws.location#ValidationException":return[3,10]}return[3,12];case 2:return[4,Un(n,t)];case 3:throw a.sent();case 4:return[4,Bn(n,t)];case 5:throw a.sent();case 6:return[4,Fn(n,t)];case 7:throw a.sent();case 8:return[4,zn(n,t)];case 9:throw a.sent();case 10:return[4,qn(n,t)];case 11:throw a.sent();case 12:o=n.body,gt({output:e,parsedBody:o,exceptionCtor:en,errorCode:i}),a.label=13;case 13:return[2]}}))}))},Nn=function(e,t){return h(void 0,void 0,void 0,(function(){var n,r,i,o,s;return v(this,(function(a){switch(a.label){case 0:return r=[f({},e)],s={},[4,lr(e.body,t)];case 1:switch(n=f.apply(void 0,r.concat([(s.body=a.sent(),s)])),i=dr(e,n.body)){case"AccessDeniedException":case"com.amazonaws.location#AccessDeniedException":return[3,2];case"InternalServerException":case"com.amazonaws.location#InternalServerException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.location#ResourceNotFoundException":return[3,6];case"ThrottlingException":case"com.amazonaws.location#ThrottlingException":return[3,8];case"ValidationException":case"com.amazonaws.location#ValidationException":return[3,10]}return[3,12];case 2:return[4,Un(n,t)];case 3:throw a.sent();case 4:return[4,Bn(n,t)];case 5:throw a.sent();case 6:return[4,Fn(n,t)];case 7:throw a.sent();case 8:return[4,zn(n,t)];case 9:throw a.sent();case 10:return[4,qn(n,t)];case 11:throw a.sent();case 12:o=n.body,gt({output:e,parsedBody:o,exceptionCtor:en,errorCode:i}),a.label=13;case 13:return[2]}}))}))},Ln=function(e,t){return h(void 0,void 0,void 0,(function(){var n,r,i,o,s;return v(this,(function(a){switch(a.label){case 0:return r=[f({},e)],s={},[4,lr(e.body,t)];case 1:switch(n=f.apply(void 0,r.concat([(s.body=a.sent(),s)])),i=dr(e,n.body)){case"AccessDeniedException":case"com.amazonaws.location#AccessDeniedException":return[3,2];case"InternalServerException":case"com.amazonaws.location#InternalServerException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.location#ResourceNotFoundException":return[3,6];case"ThrottlingException":case"com.amazonaws.location#ThrottlingException":return[3,8];case"ValidationException":case"com.amazonaws.location#ValidationException":return[3,10]}return[3,12];case 2:return[4,Un(n,t)];case 3:throw a.sent();case 4:return[4,Bn(n,t)];case 5:throw a.sent();case 6:return[4,Fn(n,t)];case 7:throw a.sent();case 8:return[4,zn(n,t)];case 9:throw a.sent();case 10:return[4,qn(n,t)];case 11:throw a.sent();case 12:o=n.body,gt({output:e,parsedBody:o,exceptionCtor:en,errorCode:i}),a.label=13;case 13:return[2]}}))}))},Mn=function(e,t){return h(void 0,void 0,void 0,(function(){var n,r,i,o,s;return v(this,(function(a){switch(a.label){case 0:return r=[f({},e)],s={},[4,lr(e.body,t)];case 1:switch(n=f.apply(void 0,r.concat([(s.body=a.sent(),s)])),i=dr(e,n.body)){case"AccessDeniedException":case"com.amazonaws.location#AccessDeniedException":return[3,2];case"InternalServerException":case"com.amazonaws.location#InternalServerException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.location#ResourceNotFoundException":return[3,6];case"ThrottlingException":case"com.amazonaws.location#ThrottlingException":return[3,8];case"ValidationException":case"com.amazonaws.location#ValidationException":return[3,10]}return[3,12];case 2:return[4,Un(n,t)];case 3:throw a.sent();case 4:return[4,Bn(n,t)];case 5:throw a.sent();case 6:return[4,Fn(n,t)];case 7:throw a.sent();case 8:return[4,zn(n,t)];case 9:throw a.sent();case 10:return[4,qn(n,t)];case 11:throw a.sent();case 12:o=n.body,gt({output:e,parsedBody:o,exceptionCtor:en,errorCode:i}),a.label=13;case 13:return[2]}}))}))},jn=function(e,t){return h(void 0,void 0,void 0,(function(){var n,r,i,o,s;return v(this,(function(a){switch(a.label){case 0:return r=[f({},e)],s={},[4,lr(e.body,t)];case 1:switch(n=f.apply(void 0,r.concat([(s.body=a.sent(),s)])),i=dr(e,n.body)){case"AccessDeniedException":case"com.amazonaws.location#AccessDeniedException":return[3,2];case"InternalServerException":case"com.amazonaws.location#InternalServerException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.location#ResourceNotFoundException":return[3,6];case"ThrottlingException":case"com.amazonaws.location#ThrottlingException":return[3,8];case"ValidationException":case"com.amazonaws.location#ValidationException":return[3,10]}return[3,12];case 2:return[4,Un(n,t)];case 3:throw a.sent();case 4:return[4,Bn(n,t)];case 5:throw a.sent();case 6:return[4,Fn(n,t)];case 7:throw a.sent();case 8:return[4,zn(n,t)];case 9:throw a.sent();case 10:return[4,qn(n,t)];case 11:throw a.sent();case 12:o=n.body,gt({output:e,parsedBody:o,exceptionCtor:en,errorCode:i}),a.label=13;case 13:return[2]}}))}))},Rn=_t,Un=function(e,t){return h(void 0,void 0,void 0,(function(){var t,n,r;return v(this,(function(i){return t=Rn({}),null!=(n=e.body).message&&(t.Message=Ye(n.message)),r=new tn(f({$metadata:ur(e)},t)),[2,vt(r,e.body)]}))}))},Bn=function(e,t){return h(void 0,void 0,void 0,(function(){var t,n,r;return v(this,(function(i){return t=Rn({}),null!=(n=e.body).message&&(t.Message=Ye(n.message)),r=new nn(f({$metadata:ur(e)},t)),[2,vt(r,e.body)]}))}))},Fn=function(e,t){return h(void 0,void 0,void 0,(function(){var t,n,r;return v(this,(function(i){return t=Rn({}),null!=(n=e.body).message&&(t.Message=Ye(n.message)),r=new rn(f({$metadata:ur(e)},t)),[2,vt(r,e.body)]}))}))},zn=function(e,t){return h(void 0,void 0,void 0,(function(){var t,n,r;return v(this,(function(i){return t=Rn({}),null!=(n=e.body).message&&(t.Message=Ye(n.message)),r=new on(f({$metadata:ur(e)},t)),[2,vt(r,e.body)]}))}))},qn=function(e,t){return h(void 0,void 0,void 0,(function(){var n,r,i;return v(this,(function(o){return n=Rn({}),null!=(r=e.body).fieldList&&(n.FieldList=ar(r.fieldList,t)),null!=r.message&&(n.Message=Ye(r.message)),null!=r.reason&&(n.Reason=Ye(r.reason)),i=new sn(f({$metadata:ur(e)},n)),[2,vt(i,e.body)]}))}))},$n=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return function(e,t){return f(f({},null!=e.GeofenceId&&{GeofenceId:e.GeofenceId}),null!=e.Geometry&&{Geometry:Hn(e.Geometry,t)})}(e,t)}))},Kn=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return Ct(e)}))},Vn=function(e,t){return f(f({},null!=e.Center&&{Center:Yn(e.Center,t)}),null!=e.Radius&&{Radius:Ct(e.Radius)})},Gn=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return e}))},Hn=function(e,t){return f(f({},null!=e.Circle&&{Circle:Vn(e.Circle,t)}),null!=e.Polygon&&{Polygon:Jn(e.Polygon,t)})},Wn=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return e}))},Jn=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return Yn(e,t)}))}(e,t)}))},Yn=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return Ct(e)}))},Zn=function(e,t){return{Code:Ye(e.Code),Message:Ye(e.Message)}},Qn=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:Xe(e)}))},Xn=function(e,t){return{Center:null!=e.Center?or(e.Center,t):void 0,Radius:Xe(e.Radius)}},er=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:Ye(e)}))},tr=function(e,t){return{Circle:null!=e.Circle?Xn(e.Circle,t):void 0,Polygon:null!=e.Polygon?nr(e.Polygon,t):void 0}},nr=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:or(e,t)}))}(e,t)}))},rr=function(e,t){return{AddressNumber:Ye(e.AddressNumber),Country:Ye(e.Country),Geometry:null!=e.Geometry?ir(e.Geometry,t):void 0,Interpolated:qe(e.Interpolated),Label:Ye(e.Label),Municipality:Ye(e.Municipality),Neighborhood:Ye(e.Neighborhood),PostalCode:Ye(e.PostalCode),Region:Ye(e.Region),Street:Ye(e.Street),SubRegion:Ye(e.SubRegion),TimeZone:null!=e.TimeZone?sr(e.TimeZone,t):void 0,UnitNumber:Ye(e.UnitNumber),UnitType:Ye(e.UnitType)}},ir=function(e,t){return{Point:null!=e.Point?or(e.Point,t):void 0}},or=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:Xe(e)}))},sr=function(e,t){return{Name:Ye(e.Name),Offset:Ve(e.Offset)}},ar=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){return{Message:Ye(e.message),Name:Ye(e.name)}}(e)}))},ur=function(e){var t,n;return{httpStatusCode:e.statusCode,requestId:null!==(n=null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"])&&void 0!==n?n:e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},cr=function(e,t){return function(e,t){return function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)}(e,t).then((function(e){return t.utf8Encoder(e)}))}(e,t).then((function(e){return e.length?JSON.parse(e):{}}))},lr=function(e,t){return h(void 0,void 0,void 0,(function(){var n,r;return v(this,(function(i){switch(i.label){case 0:return[4,cr(e,t)];case 1:return(n=i.sent()).message=null!==(r=n.message)&&void 0!==r?r:n.Message,[2,n]}}))}))},dr=function(e,t){var n,r=function(e){var t=e;return"number"==typeof t&&(t=t.toString()),t.indexOf(",")>=0&&(t=t.split(",")[0]),t.indexOf(":")>=0&&(t=t.split(":")[0]),t.indexOf("#")>=0&&(t=t.split("#")[1]),t},i=(n=e.headers,"x-amzn-errortype",Object.keys(n).find((function(e){return e.toLowerCase()==="x-amzn-errortype".toLowerCase()})));return void 0!==i?r(e.headers[i]):void 0!==t.code?r(t.code):void 0!==t.__type?r(t.__type):void 0},fr=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return d(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Xt(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"LocationClient",commandName:"SearchPlaceIndexForTextCommand",inputFilterSensitiveLog:On,outputFilterSensitiveLog:Tn},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return h(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l;return v(this,(function(d){switch(d.label){case 0:return[4,t.endpoint()];case 1:return(n=d.sent()).hostname,r=n.protocol,i=void 0===r?"https":r,o=n.port,s=n.path,a={"content-type":"application/json"},u="".concat((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/places/v0/indexes/{IndexName}/search/text",u=Et(u,e,"IndexName",(function(){return e.IndexName}),"{IndexName}",!1),c=JSON.stringify(f(f(f(f(f(f({},null!=e.BiasPosition&&{BiasPosition:Yn(e.BiasPosition,t)}),null!=e.FilterBBox&&{FilterBBox:Kn(e.FilterBBox)}),null!=e.FilterCountries&&{FilterCountries:Gn(e.FilterCountries)}),null!=e.Language&&{Language:e.Language}),null!=e.MaxResults&&{MaxResults:e.MaxResults}),null!=e.Text&&{Text:e.Text})),[4,t.endpoint()];case 2:if(l=d.sent().hostname,!0!==t.disableHostPrefix&&!O(l="places."+l))throw new Error("ValidationError: prefixed hostname must be hostname compatible.");return[2,new C({protocol:i,hostname:l,port:o,method:"POST",headers:a,path:u,body:c})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return h(void 0,void 0,void 0,(function(){var n,r,i,o;return v(this,(function(s){switch(s.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,jn(e,t)]:(n=Rn({$metadata:ur(e)}),i=We,o=Je,[4,cr(e.body,t)]);case 1:return null!=(r=i.apply(void 0,[o.apply(void 0,[s.sent()]),"body"])).Results&&(n.Results=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){return{Distance:Xe(e.Distance),Place:null!=e.Place?rr(e.Place,t):void 0,PlaceId:Ye(e.PlaceId),Relevance:Xe(e.Relevance)}}(e,t)}))}(r.Results,t)),null!=r.Summary&&(n.Summary=function(e,t){return{BiasPosition:null!=e.BiasPosition?or(e.BiasPosition,t):void 0,DataSource:Ye(e.DataSource),FilterBBox:null!=e.FilterBBox?Qn(e.FilterBBox):void 0,FilterCountries:null!=e.FilterCountries?er(e.FilterCountries):void 0,Language:Ye(e.Language),MaxResults:Ve(e.MaxResults),ResultBBox:null!=e.ResultBBox?Qn(e.ResultBBox):void 0,Text:Ye(e.Text)}}(r.Summary,t)),[2,n]}}))}))}(e,t)},t}(Fe),pr=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return d(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Xt(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"LocationClient",commandName:"SearchPlaceIndexForSuggestionsCommand",inputFilterSensitiveLog:En,outputFilterSensitiveLog:An},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return h(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l;return v(this,(function(d){switch(d.label){case 0:return[4,t.endpoint()];case 1:return(n=d.sent()).hostname,r=n.protocol,i=void 0===r?"https":r,o=n.port,s=n.path,a={"content-type":"application/json"},u="".concat((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/places/v0/indexes/{IndexName}/search/suggestions",u=Et(u,e,"IndexName",(function(){return e.IndexName}),"{IndexName}",!1),c=JSON.stringify(f(f(f(f(f(f({},null!=e.BiasPosition&&{BiasPosition:Yn(e.BiasPosition,t)}),null!=e.FilterBBox&&{FilterBBox:Kn(e.FilterBBox)}),null!=e.FilterCountries&&{FilterCountries:Gn(e.FilterCountries)}),null!=e.Language&&{Language:e.Language}),null!=e.MaxResults&&{MaxResults:e.MaxResults}),null!=e.Text&&{Text:e.Text})),[4,t.endpoint()];case 2:if(l=d.sent().hostname,!0!==t.disableHostPrefix&&!O(l="places."+l))throw new Error("ValidationError: prefixed hostname must be hostname compatible.");return[2,new C({protocol:i,hostname:l,port:o,method:"POST",headers:a,path:u,body:c})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return h(void 0,void 0,void 0,(function(){var n,r,i,o;return v(this,(function(s){switch(s.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Mn(e,t)]:(n=Rn({$metadata:ur(e)}),i=We,o=Je,[4,cr(e.body,t)]);case 1:return null!=(r=i.apply(void 0,[o.apply(void 0,[s.sent()]),"body"])).Results&&(n.Results=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){return{PlaceId:Ye(e.PlaceId),Text:Ye(e.Text)}}(e)}))}(r.Results)),null!=r.Summary&&(n.Summary=function(e,t){return{BiasPosition:null!=e.BiasPosition?or(e.BiasPosition,t):void 0,DataSource:Ye(e.DataSource),FilterBBox:null!=e.FilterBBox?Qn(e.FilterBBox):void 0,FilterCountries:null!=e.FilterCountries?er(e.FilterCountries):void 0,Language:Ye(e.Language),MaxResults:Ve(e.MaxResults),Text:Ye(e.Text)}}(r.Summary,t)),[2,n]}}))}))}(e,t)},t}(Fe),hr=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return d(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Xt(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"LocationClient",commandName:"GetPlaceCommand",inputFilterSensitiveLog:gn,outputFilterSensitiveLog:bn},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return h(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l;return v(this,(function(d){switch(d.label){case 0:return[4,t.endpoint()];case 1:return(n=d.sent()).hostname,r=n.protocol,i=void 0===r?"https":r,o=n.port,s=n.path,a={},u="".concat((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/places/v0/indexes/{IndexName}/places/{PlaceId}",u=Et(u,e,"IndexName",(function(){return e.IndexName}),"{IndexName}",!1),u=Et(u,e,"PlaceId",(function(){return e.PlaceId}),"{PlaceId}",!1),c=Rn({language:[,e.Language]}),[4,t.endpoint()];case 2:if(l=d.sent().hostname,!0!==t.disableHostPrefix&&!O(l="places."+l))throw new Error("ValidationError: prefixed hostname must be hostname compatible.");return[2,new C({protocol:i,hostname:l,port:o,method:"GET",headers:a,path:u,query:c,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return h(void 0,void 0,void 0,(function(){var n,r,i,o;return v(this,(function(s){switch(s.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Dn(e,t)]:(n=Rn({$metadata:ur(e)}),i=We,o=Je,[4,cr(e.body,t)]);case 1:return null!=(r=i.apply(void 0,[o.apply(void 0,[s.sent()]),"body"])).Place&&(n.Place=rr(r.Place,t)),[2,n]}}))}))}(e,t)},t}(Fe),vr=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return d(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Xt(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"LocationClient",commandName:"SearchPlaceIndexForPositionCommand",inputFilterSensitiveLog:wn,outputFilterSensitiveLog:Sn},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return h(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l;return v(this,(function(d){switch(d.label){case 0:return[4,t.endpoint()];case 1:return(n=d.sent()).hostname,r=n.protocol,i=void 0===r?"https":r,o=n.port,s=n.path,a={"content-type":"application/json"},u="".concat((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/places/v0/indexes/{IndexName}/search/position",u=Et(u,e,"IndexName",(function(){return e.IndexName}),"{IndexName}",!1),c=JSON.stringify(f(f(f({},null!=e.Language&&{Language:e.Language}),null!=e.MaxResults&&{MaxResults:e.MaxResults}),null!=e.Position&&{Position:Yn(e.Position,t)})),[4,t.endpoint()];case 2:if(l=d.sent().hostname,!0!==t.disableHostPrefix&&!O(l="places."+l))throw new Error("ValidationError: prefixed hostname must be hostname compatible.");return[2,new C({protocol:i,hostname:l,port:o,method:"POST",headers:a,path:u,body:c})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return h(void 0,void 0,void 0,(function(){var n,r,i,o;return v(this,(function(s){switch(s.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Ln(e,t)]:(n=Rn({$metadata:ur(e)}),i=We,o=Je,[4,cr(e.body,t)]);case 1:return null!=(r=i.apply(void 0,[o.apply(void 0,[s.sent()]),"body"])).Results&&(n.Results=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){return{Distance:Xe(e.Distance),Place:null!=e.Place?rr(e.Place,t):void 0,PlaceId:Ye(e.PlaceId)}}(e,t)}))}(r.Results,t)),null!=r.Summary&&(n.Summary=function(e,t){return{DataSource:Ye(e.DataSource),Language:Ye(e.Language),MaxResults:Ve(e.MaxResults),Position:null!=e.Position?or(e.Position,t):void 0}}(r.Summary,t)),[2,n]}}))}))}(e,t)},t}(Fe),gr=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return d(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Xt(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"LocationClient",commandName:"GetGeofenceCommand",inputFilterSensitiveLog:fn,outputFilterSensitiveLog:pn},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return h(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return v(this,(function(l){switch(l.label){case 0:return[4,t.endpoint()];case 1:return(n=l.sent()).hostname,r=n.protocol,i=void 0===r?"https":r,o=n.port,s=n.path,a={},u="".concat((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/geofencing/v0/collections/{CollectionName}/geofences/{GeofenceId}",u=Et(u,e,"CollectionName",(function(){return e.CollectionName}),"{CollectionName}",!1),u=Et(u,e,"GeofenceId",(function(){return e.GeofenceId}),"{GeofenceId}",!1),[4,t.endpoint()];case 2:if(c=l.sent().hostname,!0!==t.disableHostPrefix&&!O(c="geofencing."+c))throw new Error("ValidationError: prefixed hostname must be hostname compatible.");return[2,new C({protocol:i,hostname:c,port:o,method:"GET",headers:a,path:u,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return h(void 0,void 0,void 0,(function(){var n,r,i,o;return v(this,(function(s){switch(s.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,kn(e,t)]:(n=Rn({$metadata:ur(e)}),i=We,o=Je,[4,cr(e.body,t)]);case 1:return null!=(r=i.apply(void 0,[o.apply(void 0,[s.sent()]),"body"])).CreateTime&&(n.CreateTime=We(st(r.CreateTime))),null!=r.GeofenceId&&(n.GeofenceId=Ye(r.GeofenceId)),null!=r.Geometry&&(n.Geometry=tr(r.Geometry,t)),null!=r.Status&&(n.Status=Ye(r.Status)),null!=r.UpdateTime&&(n.UpdateTime=We(st(r.UpdateTime))),[2,n]}}))}))}(e,t)},t}(Fe),mr=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return d(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Xt(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"LocationClient",commandName:"ListGeofencesCommand",inputFilterSensitiveLog:hn,outputFilterSensitiveLog:vn},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return h(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l;return v(this,(function(d){switch(d.label){case 0:return[4,t.endpoint()];case 1:return(n=d.sent()).hostname,r=n.protocol,i=void 0===r?"https":r,o=n.port,s=n.path,a={"content-type":"application/json"},u="".concat((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/geofencing/v0/collections/{CollectionName}/list-geofences",u=Et(u,e,"CollectionName",(function(){return e.CollectionName}),"{CollectionName}",!1),c=JSON.stringify(f(f({},null!=e.MaxResults&&{MaxResults:e.MaxResults}),null!=e.NextToken&&{NextToken:e.NextToken})),[4,t.endpoint()];case 2:if(l=d.sent().hostname,!0!==t.disableHostPrefix&&!O(l="geofencing."+l))throw new Error("ValidationError: prefixed hostname must be hostname compatible.");return[2,new C({protocol:i,hostname:l,port:o,method:"POST",headers:a,path:u,body:c})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return h(void 0,void 0,void 0,(function(){var n,r,i,o;return v(this,(function(s){switch(s.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Nn(e,t)]:(n=Rn({$metadata:ur(e)}),i=We,o=Je,[4,cr(e.body,t)]);case 1:return null!=(r=i.apply(void 0,[o.apply(void 0,[s.sent()]),"body"])).Entries&&(n.Entries=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){return{CreateTime:null!=e.CreateTime?We(st(e.CreateTime)):void 0,GeofenceId:Ye(e.GeofenceId),Geometry:null!=e.Geometry?tr(e.Geometry,t):void 0,Status:Ye(e.Status),UpdateTime:null!=e.UpdateTime?We(st(e.UpdateTime)):void 0}}(e,t)}))}(r.Entries,t)),null!=r.NextToken&&(n.NextToken=Ye(r.NextToken)),[2,n]}}))}))}(e,t)},t}(Fe),yr=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return d(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Xt(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"LocationClient",commandName:"BatchPutGeofenceCommand",inputFilterSensitiveLog:ln,outputFilterSensitiveLog:dn},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return h(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l;return v(this,(function(d){switch(d.label){case 0:return[4,t.endpoint()];case 1:return(n=d.sent()).hostname,r=n.protocol,i=void 0===r?"https":r,o=n.port,s=n.path,a={"content-type":"application/json"},u="".concat((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/geofencing/v0/collections/{CollectionName}/put-geofences",u=Et(u,e,"CollectionName",(function(){return e.CollectionName}),"{CollectionName}",!1),c=JSON.stringify(f({},null!=e.Entries&&{Entries:$n(e.Entries,t)})),[4,t.endpoint()];case 2:if(l=d.sent().hostname,!0!==t.disableHostPrefix&&!O(l="geofencing."+l))throw new Error("ValidationError: prefixed hostname must be hostname compatible.");return[2,new C({protocol:i,hostname:l,port:o,method:"POST",headers:a,path:u,body:c})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return h(void 0,void 0,void 0,(function(){var n,r,i,o;return v(this,(function(s){switch(s.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Pn(e,t)]:(n=Rn({$metadata:ur(e)}),i=We,o=Je,[4,cr(e.body,t)]);case 1:return null!=(r=i.apply(void 0,[o.apply(void 0,[s.sent()]),"body"])).Errors&&(n.Errors=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){return{Error:null!=e.Error?Zn(e.Error,t):void 0,GeofenceId:Ye(e.GeofenceId)}}(e,t)}))}(r.Errors,t)),null!=r.Successes&&(n.Successes=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){return{CreateTime:null!=e.CreateTime?We(st(e.CreateTime)):void 0,GeofenceId:Ye(e.GeofenceId),UpdateTime:null!=e.UpdateTime?We(st(e.UpdateTime)):void 0}}(e)}))}(r.Successes)),[2,n]}}))}))}(e,t)},t}(Fe),br=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return d(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Xt(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"LocationClient",commandName:"BatchDeleteGeofenceCommand",inputFilterSensitiveLog:an,outputFilterSensitiveLog:un},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return h(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l;return v(this,(function(d){switch(d.label){case 0:return[4,t.endpoint()];case 1:return(n=d.sent()).hostname,r=n.protocol,i=void 0===r?"https":r,o=n.port,s=n.path,a={"content-type":"application/json"},u="".concat((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/geofencing/v0/collections/{CollectionName}/delete-geofences",u=Et(u,e,"CollectionName",(function(){return e.CollectionName}),"{CollectionName}",!1),c=JSON.stringify(f({},null!=e.GeofenceIds&&{GeofenceIds:Wn(e.GeofenceIds)})),[4,t.endpoint()];case 2:if(l=d.sent().hostname,!0!==t.disableHostPrefix&&!O(l="geofencing."+l))throw new Error("ValidationError: prefixed hostname must be hostname compatible.");return[2,new C({protocol:i,hostname:l,port:o,method:"POST",headers:a,path:u,body:c})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return h(void 0,void 0,void 0,(function(){var n,r,i,o;return v(this,(function(s){switch(s.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,xn(e,t)]:(n=Rn({$metadata:ur(e)}),i=We,o=Je,[4,cr(e.body,t)]);case 1:return null!=(r=i.apply(void 0,[o.apply(void 0,[s.sent()]),"body"])).Errors&&(n.Errors=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){return{Error:null!=e.Error?Zn(e.Error,t):void 0,GeofenceId:Ye(e.GeofenceId)}}(e,t)}))}(r.Errors,t)),[2,n]}}))}))}(e,t)},t}(Fe);var wr=function(){return(wr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},_r=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s};function Sr(e,t){if(!Number.isFinite(e)||!Number.isFinite(t))throw new Error("Invalid coordinates: ["+e+","+t+"]");if(t<-90||90<t)throw new Error("Latitude must be between -90 and 90 degrees inclusive.");if(e<-180||180<e)throw new Error("Longitude must be between -180 and 180 degrees inclusive.")}function Er(e){if(!/^(?:[\x2D\.0-9A-Z_a-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDF50-\uDF59\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEC0-\uDED3\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDCD0-\uDCEB\uDCF0-\uDCF9\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])+$/i.test(e))throw new Error("Invalid geofenceId: '"+e+"' - IDs can only contain alphanumeric characters, hyphens, underscores and periods.")}function Cr(e,t){var n=t?t+": ":"";if(e.length<4)throw new Error(n+"LinearRing must contain 4 or more coordinates.");var r=[];if(e.forEach((function(e){try{Sr(e[0],e[1])}catch(t){r.push({coordinates:e,error:t.message})}})),r.length>0)throw new Error(n+"One or more of the coordinates in the Polygon LinearRing are not valid: "+JSON.stringify(r));var i=_r(e[0],2),o=i[0],s=i[1],a=_r(e[e.length-1],2),u=a[0],c=a[1];if(o!==u||s!==c)throw new Error(n+"LinearRing's first and last coordinates are not the same");if(function(e){for(var t,n,r=function(e){if(Array.isArray(e))return e;if("Feature"===e.type){if(null!==e.geometry)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}(e),i=0,o=1;o<r.length;)t=n||r[0],i+=((n=r[o])[0]-t[0])*(n[1]+t[1]),o++;return i>0}(e))throw new Error(n+"LinearRing coordinates must be wound counterclockwise")}function Ar(e,t){var n=wr({},t);if(n.FilterCountries=e.countries,n.MaxResults=e.maxResults,e.searchIndexName&&(n.IndexName=e.searchIndexName),e.biasPosition&&e.searchAreaConstraints)throw new Error("BiasPosition and SearchAreaConstraints are mutually exclusive, please remove one or the other from the options object");return e.biasPosition&&(n.BiasPosition=e.biasPosition),e.searchAreaConstraints&&(n.FilterBBox=e.searchAreaConstraints),n}var Or=function(){return(Or=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Ir=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},Tr=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},xr=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},Pr=new r.a("AmazonLocationServiceProvider"),kr=function(){function e(e){this._config=e||{},Pr.debug("Geo Options",this._config)}return e.prototype.getCategory=function(){return e.CATEGORY},e.prototype.getProviderName=function(){return e.PROVIDER_NAME},e.prototype.configure=function(e){return Pr.debug("configure Amazon Location Service Provider",e),e?(this._config=Object.assign({},this._config,e),this._config):this._config},e.prototype.getAvailableMaps=function(){this._verifyMapResources();var e=[],t=this._config.maps.items,n=this._config.region;for(var r in t){var i=t[r].style;e.push({mapName:r,style:i,region:n})}return e},e.prototype.getDefaultMap=function(){this._verifyMapResources();var e=this._config.maps.default;return{mapName:e,style:this._config.maps.items[e].style,region:this._config.region}},e.prototype.searchByText=function(e,t){return Ir(this,void 0,void 0,(function(){var n,r,i,o,s,c;return Tr(this,(function(l){switch(l.label){case 0:return[4,this._ensureCredentials()];case 1:if(!l.sent())throw new Error("No credentials");this._verifySearchIndex(null==t?void 0:t.searchIndexName),n={Text:e,IndexName:this._config.search_indices.default},t&&(n=Or(Or({},n),Ar(t,n))),r=new Yt({credentials:this._config.credentials,region:this._config.region,customUserAgent:Object(u.b)()}),i=new fr(n),l.label=2;case 2:return l.trys.push([2,4,,5]),[4,r.send(i)];case 3:return o=l.sent(),[3,5];case 4:throw s=l.sent(),Pr.debug(s),s;case 5:return c=o.Results.map((function(e){return e.Place})),[2,a()(c,{deep:!0})]}}))}))},e.prototype.searchForSuggestions=function(e,t){return Ir(this,void 0,void 0,(function(){var n,r,i,o,s;return Tr(this,(function(a){switch(a.label){case 0:return[4,this._ensureCredentials()];case 1:if(!a.sent())throw new Error("No credentials");this._verifySearchIndex(null==t?void 0:t.searchIndexName),n={Text:e,IndexName:this._config.search_indices.default},t&&(n=Or(Or({},n),Ar(t,n))),r=new Yt({credentials:this._config.credentials,region:this._config.region,customUserAgent:Object(u.b)()}),i=new pr(n),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,r.send(i)];case 3:return o=a.sent(),[3,5];case 4:throw s=a.sent(),Pr.debug(s),s;case 5:return[2,o.Results.map((function(e){return{text:e.Text,placeId:e.PlaceId}}))]}}))}))},e.prototype._verifyPlaceId=function(e){if(0===e.length){var t="PlaceId cannot be an empty string.";throw Pr.debug(t),new Error(t)}},e.prototype.searchByPlaceId=function(e,t){return Ir(this,void 0,void 0,(function(){var n,r,i,o,s,c;return Tr(this,(function(l){switch(l.label){case 0:return[4,this._ensureCredentials()];case 1:if(!l.sent())throw new Error("No credentials");this._verifySearchIndex(null==t?void 0:t.searchIndexName),this._verifyPlaceId(e),n=new Yt({credentials:this._config.credentials,region:this._config.region,customUserAgent:Object(u.b)()}),r={PlaceId:e,IndexName:(null==t?void 0:t.searchIndexName)||this._config.search_indices.default},i=new hr(r),l.label=2;case 2:return l.trys.push([2,4,,5]),[4,n.send(i)];case 3:return o=l.sent(),[3,5];case 4:throw s=l.sent(),Pr.debug(s),s;case 5:return(c=o.Place)?[2,a()(c,{deep:!0})]:[2]}}))}))},e.prototype.searchByCoordinates=function(e,t){return Ir(this,void 0,void 0,(function(){var n,r,i,o,s,c;return Tr(this,(function(l){switch(l.label){case 0:return[4,this._ensureCredentials()];case 1:if(!l.sent())throw new Error("No credentials");this._verifySearchIndex(null==t?void 0:t.searchIndexName),n={Position:e,IndexName:this._config.search_indices.default},t&&(t.searchIndexName&&(n.IndexName=t.searchIndexName),n.MaxResults=t.maxResults),r=new Yt({credentials:this._config.credentials,region:this._config.region,customUserAgent:Object(u.b)()}),i=new vr(n),l.label=2;case 2:return l.trys.push([2,4,,5]),[4,r.send(i)];case 3:return o=l.sent(),[3,5];case 4:throw s=l.sent(),Pr.debug(s),s;case 5:return c=o.Results.map((function(e){return e.Place})),[2,a()(c[0],{deep:!0})]}}))}))},e.prototype.saveGeofences=function(e,t){return Ir(this,void 0,void 0,(function(){var n,r,i,o=this;return Tr(this,(function(s){switch(s.label){case 0:if(e.length<1)throw new Error("Geofence input array is empty");return[4,this._ensureCredentials()];case 1:if(!s.sent())throw new Error("No credentials");try{this._verifyGeofenceCollections(null==t?void 0:t.collectionName)}catch(e){throw Pr.debug(e),e}for(function(e){var t={};e.forEach((function(e){if(!e.geofenceId)throw new Error("Geofence '"+e+"' is missing geofenceId");var n=e.geofenceId;if(Er(n),t[n])throw new Error("Duplicate geofenceId: "+n);if(t[n]=!0,!e.geometry)throw new Error("Geofence '"+n+"' is missing geometry");var r=e.geometry;if(!r.polygon)throw new Error("Geofence '"+n+"' is missing geometry.polygon");var i=r.polygon;try{!function(e,t){var n=t?t+": ":"";if(!Array.isArray(e))throw new Error(n+"Polygon is of incorrect structure. It should be an array of LinearRings");if(e.length<1)throw new Error(n+"Polygon must have a single LinearRing array.");if(e.length>1)throw new Error(n+"Polygon must have a single LinearRing array. Note: We do not currently support polygons with holes, multipolygons, polygons that are wound clockwise, or that cross the antimeridian.");if(e.reduce((function(e,t){return e+t.length}),0)>1e3)throw new Error(n+"Polygon has more than the maximum 1000 vertices.");e.forEach((function(e){Cr(e,t)}))}(i,n)}catch(e){if(e.message.includes("Polygon has more than the maximum 1000 vertices."))throw new Error("Geofence '"+n+"' has more than the maximum of 1000 vertices")}Cr(_r(i,1)[0],n)}))}(e),n=e.map((function(e){return{GeofenceId:e.geofenceId,Geometry:{Polygon:e.geometry.polygon}}})),r={successes:[],errors:[]},i=[];n.length>0;)i.push(n.splice(0,10));return[4,Promise.all(i.map((function(e){return Ir(o,void 0,void 0,(function(){var n,i;return Tr(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this._AmazonLocationServiceBatchPutGeofenceCall(e,(null==t?void 0:t.collectionName)||this._config.geofenceCollections.default)];case 1:return n=o.sent(),[3,3];case 2:return i=o.sent(),e.forEach((function(e){r.errors.push({geofenceId:e.GeofenceId,error:{code:"APIConnectionError",message:i.message}})})),[2];case 3:return n.Successes.forEach((function(e){var t=e.GeofenceId,n=e.CreateTime,i=e.UpdateTime;r.successes.push({geofenceId:t,createTime:n,updateTime:i})})),n.Errors.forEach((function(e){var t=e.Error,n=t.Code,i=t.Message,o=e.GeofenceId;r.errors.push({error:{code:n,message:i},geofenceId:o})})),[2]}}))}))})))];case 2:return s.sent(),[2,r]}}))}))},e.prototype.getGeofence=function(e,t){return Ir(this,void 0,void 0,(function(){var n,r,i,o,s,a,c,l,d,f;return Tr(this,(function(p){switch(p.label){case 0:return[4,this._ensureCredentials()];case 1:if(!p.sent())throw new Error("No credentials");try{this._verifyGeofenceCollections(null==t?void 0:t.collectionName)}catch(e){throw Pr.debug(e),e}Er(e),n=new Yt({credentials:this._config.credentials,region:this._config.region,customUserAgent:Object(u.b)()}),r={GeofenceId:e,CollectionName:(null==t?void 0:t.collectionName)||this._config.geofenceCollections.default},i=new gr(r),p.label=2;case 2:return p.trys.push([2,4,,5]),[4,n.send(i)];case 3:return o=p.sent(),[3,5];case 4:throw s=p.sent(),Pr.debug(s),s;case 5:return a=o.GeofenceId,c=o.CreateTime,l=o.UpdateTime,d=o.Status,f=o.Geometry,[2,{createTime:c,geofenceId:a,geometry:{polygon:f.Polygon},status:d,updateTime:l}]}}))}))},e.prototype.listGeofences=function(e){return Ir(this,void 0,void 0,(function(){var t,n,r,i,o,s;return Tr(this,(function(a){switch(a.label){case 0:return[4,this._ensureCredentials()];case 1:if(!a.sent())throw new Error("No credentials");try{this._verifyGeofenceCollections(null==e?void 0:e.collectionName)}catch(e){throw Pr.debug(e),e}t=new Yt({credentials:this._config.credentials,region:this._config.region,customUserAgent:Object(u.b)()}),n={NextToken:null==e?void 0:e.nextToken,CollectionName:(null==e?void 0:e.collectionName)||this._config.geofenceCollections.default},r=new mr(n),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,t.send(r)];case 3:return i=a.sent(),[3,5];case 4:throw o=a.sent(),Pr.debug(o),o;case 5:return s=i.NextToken,[2,{entries:i.Entries.map((function(e){return{geofenceId:e.GeofenceId,createTime:e.CreateTime,updateTime:e.UpdateTime,status:e.Status,geometry:{polygon:e.Geometry.Polygon}}})),nextToken:s}]}}))}))},e.prototype.deleteGeofences=function(e,t){return Ir(this,void 0,void 0,(function(){var n,r,i,o,s=this;return Tr(this,(function(a){switch(a.label){case 0:if(e.length<1)throw new Error("GeofenceId input array is empty");return[4,this._ensureCredentials()];case 1:if(!a.sent())throw new Error("No credentials");if(this._verifyGeofenceCollections(null==t?void 0:t.collectionName),(n=e.filter((function(e){try{Er(e)}catch(e){return!0}}))).length>0)throw new Error("Invalid geofence ids: "+n.join(", "));for(r={successes:[],errors:[]},i=[],o=0;o<e.length;)i.push(e.slice(o,o+=10));return[4,Promise.all(i.map((function(e){return Ir(s,void 0,void 0,(function(){var n,i,o,s;return Tr(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,this._AmazonLocationServiceBatchDeleteGeofenceCall(e,(null==t?void 0:t.collectionName)||this._config.geofenceCollections.default)];case 1:return n=a.sent(),[3,3];case 2:return i=a.sent(),e.forEach((function(e){var t={geofenceId:e,error:{code:i.message,message:i.message}};r.errors.push(t)})),[2];case 3:return o=n.Errors.map((function(e){return e.geofenceId})),(s=r.successes).push.apply(s,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(xr(arguments[t]));return e}(e.filter((function(e){return!o.includes(e)})))),[2]}}))}))})))];case 2:return a.sent(),[2,r]}}))}))},e.prototype._ensureCredentials=function(){return Ir(this,void 0,void 0,(function(){var e,t,n;return Tr(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,c.a.get()];case 1:return(e=r.sent())?(t=c.a.shear(e),Pr.debug("Set credentials for storage. Credentials are:",t),this._config.credentials=t,[2,!0]):[2,!1];case 2:return n=r.sent(),Pr.debug("Ensure credentials error. Credentials are:",n),[2,!1];case 3:return[2]}}))}))},e.prototype._verifyMapResources=function(){if(!this._config.maps){var e="No map resources found in amplify config, run 'amplify add geo' to create one and run `amplify push` after";throw Pr.debug(e),new Error(e)}if(!this._config.maps.default)throw e="No default map resource found in amplify config, run 'amplify add geo' to create one and run `amplify push` after",Pr.debug(e),new Error(e)},e.prototype._verifySearchIndex=function(e){if(!(this._config.search_indices&&this._config.search_indices.default||e)){var t="No Search Index found in amplify config, please run `amplify add geo` to create one and run `amplify push` after.";throw Pr.debug(t),new Error(t)}},e.prototype._verifyGeofenceCollections=function(e){if(!(this._config.geofenceCollections&&this._config.geofenceCollections.default||e)){var t="No Geofence Collections found, please run `amplify add geo` to create one and run `amplify push` after.";throw Pr.debug(t),new Error(t)}},e.prototype._AmazonLocationServiceBatchPutGeofenceCall=function(e,t){return Ir(this,void 0,void 0,(function(){var n,r,i,o;return Tr(this,(function(s){switch(s.label){case 0:n={Entries:e,CollectionName:t||this._config.geofenceCollections.default},r=new Yt({credentials:this._config.credentials,region:this._config.region,customUserAgent:Object(u.b)()}),i=new yr(n),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,r.send(i)];case 2:return o=s.sent(),[3,4];case 3:throw s.sent();case 4:return[2,o]}}))}))},e.prototype._AmazonLocationServiceBatchDeleteGeofenceCall=function(e,t){return Ir(this,void 0,void 0,(function(){var n,r,i,o;return Tr(this,(function(s){switch(s.label){case 0:n={GeofenceIds:e,CollectionName:t||this._config.geofenceCollections.default},r=new Yt({credentials:this._config.credentials,region:this._config.region,customUserAgent:Object(u.b)()}),i=new br(n),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,r.send(i)];case 2:return o=s.sent(),[3,4];case 3:throw s.sent();case 4:return[2,o]}}))}))},e.CATEGORY="Geo",e.PROVIDER_NAME="AmazonLocationService",e}(),Dr=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},Nr=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Lr=new r.a("Geo"),Mr="AmazonLocationService",jr=new(function(){function e(){this._config={},this._pluggables=[],Lr.debug("Geo Options",this._config)}return e.prototype.getModuleName=function(){return e.MODULE},e.prototype.addPluggable=function(e){if(e&&"Geo"===e.getCategory())return this._pluggables.push(e),e.configure(this._config[e.getProviderName()])},e.prototype.getPluggable=function(e){var t=this._pluggables.find((function(t){return t.getProviderName()===e}));if(void 0===t)throw Lr.debug("No plugin found with providerName",e),new Error("No plugin found in Geo for the provider");return t},e.prototype.removePluggable=function(e){this._pluggables=this._pluggables.filter((function(t){return t.getProviderName()!==e}))},e.prototype.configure=function(e){var t=this;if(Lr.debug("configure Geo"),!e)return this._config;var n=Object(i.b)(e);return this._config=Object.assign({},this._config,n.Geo,e),this._pluggables.forEach((function(e){e.configure(t._config[e.getProviderName()])})),0===this._pluggables.length&&this.addPluggable(new kr),this._config},e.prototype.getAvailableMaps=function(e){return void 0===e&&(e=Mr),this.getPluggable(e).getAvailableMaps()},e.prototype.getDefaultMap=function(e){return void 0===e&&(e=Mr),this.getPluggable(e).getDefaultMap()},e.prototype.searchByText=function(e,t){return Dr(this,void 0,void 0,(function(){var n,r,i,o;return Nr(this,(function(s){switch(s.label){case 0:n=(t||{}).providerName,r=void 0===n?Mr:n,i=this.getPluggable(r),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,i.searchByText(e,t)];case 2:return[2,s.sent()];case 3:throw o=s.sent(),Lr.debug(o),o;case 4:return[2]}}))}))},e.prototype.searchForSuggestions=function(e,t){return Dr(this,void 0,void 0,(function(){var n,r,i,o;return Nr(this,(function(s){switch(s.label){case 0:n=(t||{}).providerName,r=void 0===n?Mr:n,i=this.getPluggable(r),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,i.searchForSuggestions(e,t)];case 2:return[2,s.sent()];case 3:throw o=s.sent(),Lr.debug(o),o;case 4:return[2]}}))}))},e.prototype.searchByPlaceId=function(e,t){return Dr(this,void 0,void 0,(function(){var n,r;return Nr(this,(function(i){switch(i.label){case 0:n=this.getPluggable("AmazonLocationService"),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,n.searchByPlaceId(e,t)];case 2:return[2,i.sent()];case 3:throw r=i.sent(),Lr.debug(r),r;case 4:return[2]}}))}))},e.prototype.searchByCoordinates=function(e,t){return Dr(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Nr(this,(function(c){switch(c.label){case 0:n=(t||{}).providerName,r=void 0===n?Mr:n,i=this.getPluggable(r),o=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}(e,2),s=o[0],a=o[1],c.label=1;case 1:return c.trys.push([1,3,,4]),Sr(s,a),[4,i.searchByCoordinates(e,t)];case 2:return[2,c.sent()];case 3:throw u=c.sent(),Lr.debug(u),u;case 4:return[2]}}))}))},e.prototype.saveGeofences=function(e,t){return Dr(this,void 0,void 0,(function(){var n,r,i,o,s;return Nr(this,(function(a){switch(a.label){case 0:n=(t||{}).providerName,r=void 0===n?Mr:n,i=this.getPluggable(r),o=Array.isArray(e)?e:[e],a.label=1;case 1:return a.trys.push([1,3,,4]),[4,i.saveGeofences(o,t)];case 2:return[2,a.sent()];case 3:throw s=a.sent(),Lr.debug(s),s;case 4:return[2]}}))}))},e.prototype.getGeofence=function(e,t){return Dr(this,void 0,void 0,(function(){var n,r,i,o;return Nr(this,(function(s){switch(s.label){case 0:n=(t||{}).providerName,r=void 0===n?Mr:n,i=this.getPluggable(r),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,i.getGeofence(e,t)];case 2:return[2,s.sent()];case 3:throw o=s.sent(),Lr.debug(o),o;case 4:return[2]}}))}))},e.prototype.listGeofences=function(e){return Dr(this,void 0,void 0,(function(){var t,n,r,i;return Nr(this,(function(o){switch(o.label){case 0:t=(e||{}).providerName,n=void 0===t?Mr:t,r=this.getPluggable(n),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,r.listGeofences(e)];case 2:return[2,o.sent()];case 3:throw i=o.sent(),Lr.debug(i),i;case 4:return[2]}}))}))},e.prototype.deleteGeofences=function(e,t){return Dr(this,void 0,void 0,(function(){var n,r,i,o,s;return Nr(this,(function(a){switch(a.label){case 0:n=(t||{}).providerName,r=void 0===n?Mr:n,i=this.getPluggable(r),o=Array.isArray(e)?e:[e],a.label=1;case 1:return a.trys.push([1,3,,4]),[4,i.deleteGeofences(o,t)];case 2:return[2,a.sent()];case 3:throw s=a.sent(),Lr.debug(s),s;case 4:return[2]}}))}))},e.MODULE="Geo",e}());o.a.register(jr)},function(e,t,n){"use strict";n.d(t,"a",(function(){return Dt}));var r,i=n(48),o=n(20),s=function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a=new i.a("AbstractInteractionsProvider"),u=function(){function e(e){void 0===e&&(e={}),this._config=e}return e.prototype.configure=function(e){return void 0===e&&(e={}),this._config=s(s({},this._config),e),a.debug("configure "+this.getProviderName(),this._config),this.options},e.prototype.getCategory=function(){return"Interactions"},Object.defineProperty(e.prototype,"options",{get:function(){return s({},this._config)},enumerable:!0,configurable:!0}),e}(),c=n(0),l=(n(28),n(13)),d=function(e){return"string"==typeof e&&(e.startsWith("fips-")||e.endsWith("-fips"))},f=function(e){return d(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e},p=function(e,t){var n;void 0===e&&(e=[]);var r=t.useFipsEndpoint,i=t.useDualstackEndpoint;return null===(n=e.find((function(e){var t=e.tags;return r===t.includes("fips")&&i===t.includes("dualstack")})))||void 0===n?void 0:n.hostname},h=function(e,t){var n,r,i,o,s,a,u=t.useFipsEndpoint,l=void 0!==u&&u,d=t.useDualstackEndpoint,f=void 0!==d&&d,h=t.signingService,v=t.regionHash,g=t.partitionHash,m=function(e,t){var n,r=t.partitionHash;return null!==(n=Object.keys(r||{}).find((function(t){return r[t].regions.includes(e)})))&&void 0!==n?n:"aws"}(e,{partitionHash:g}),y=e in v?e:null!==(r=null===(n=g[m])||void 0===n?void 0:n.endpoint)&&void 0!==r?r:e,b={useFipsEndpoint:l,useDualstackEndpoint:f},w=function(e,t){var n=t.partitionHostname;return t.regionHostname||(n?n.replace("{region}",e):void 0)}(y,{regionHostname:p(null===(i=v[y])||void 0===i?void 0:i.variants,b),partitionHostname:p(null===(o=g[m])||void 0===o?void 0:o.variants,b)});if(void 0===w)throw new Error("Endpoint resolution failed for: ".concat({resolvedRegion:y,useFipsEndpoint:l,useDualstackEndpoint:f}));var _=function(e,t){var n=t.signingRegion;if(n)return n;if(t.useFipsEndpoint){var r=t.regionRegex.replace("\\\\","\\").replace(/^\^/g,"\\.").replace(/\$$/g,"\\."),i=e.match(r);if(i)return i[0].slice(1,-1)}}(w,{signingRegion:null===(s=v[y])||void 0===s?void 0:s.signingRegion,regionRegex:g[m].regionRegex,useFipsEndpoint:l});return Object(c.a)(Object(c.a)({partition:m,signingService:h,hostname:w},_&&{signingRegion:_}),(null===(a=v[y])||void 0===a?void 0:a.signingService)&&{signingService:v[y].signingService})},v=n(17),g={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},m={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},y={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},b=n(96);!function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"}(r||(r={}));var w,_=r.STANDARD,S=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],E=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],C=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],A=[500,502,503,504],O=["ECONNRESET","EPIPE","ETIMEDOUT"],I=function(e){var t,n;return 429===(null===(t=e.$metadata)||void 0===t?void 0:t.httpStatusCode)||E.includes(e.name)||1==(null===(n=e.$retryable)||void 0===n?void 0:n.throttling)},T=function(){function e(e){var t,n,r,i,o;this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=null!==(t=null==e?void 0:e.beta)&&void 0!==t?t:.7,this.minCapacity=null!==(n=null==e?void 0:e.minCapacity)&&void 0!==n?n:1,this.minFillRate=null!==(r=null==e?void 0:e.minFillRate)&&void 0!==r?r:.5,this.scaleConstant=null!==(i=null==e?void 0:e.scaleConstant)&&void 0!==i?i:.4,this.smooth=null!==(o=null==e?void 0:e.smooth)&&void 0!==o?o:.8;var s=this.getCurrentTimeInSeconds();this.lastThrottleTime=s,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}return e.prototype.getCurrentTimeInSeconds=function(){return Date.now()/1e3},e.prototype.getSendToken=function(){return Object(c.b)(this,void 0,void 0,(function(){return Object(c.d)(this,(function(e){return[2,this.acquireTokenBucket(1)]}))}))},e.prototype.acquireTokenBucket=function(e){return Object(c.b)(this,void 0,void 0,(function(){var t;return Object(c.d)(this,(function(n){switch(n.label){case 0:return this.enabled?(this.refillTokenBucket(),e>this.currentCapacity?(t=(e-this.currentCapacity)/this.fillRate*1e3,[4,new Promise((function(e){return setTimeout(e,t)}))]):[3,2]):[2];case 1:n.sent(),n.label=2;case 2:return this.currentCapacity=this.currentCapacity-e,[2]}}))}))},e.prototype.refillTokenBucket=function(){var e=this.getCurrentTimeInSeconds();if(this.lastTimestamp){var t=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+t),this.lastTimestamp=e}else this.lastTimestamp=e},e.prototype.updateClientSendingRate=function(e){var t;if(this.updateMeasuredRate(),I(e)){var n=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=n,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),t=this.cubicThrottle(n),this.enableTokenBucket()}else this.calculateTimeWindow(),t=this.cubicSuccess(this.getCurrentTimeInSeconds());var r=Math.min(t,2*this.measuredTxRate);this.updateTokenBucketRate(r)},e.prototype.calculateTimeWindow=function(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))},e.prototype.cubicThrottle=function(e){return this.getPrecise(e*this.beta)},e.prototype.cubicSuccess=function(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)},e.prototype.enableTokenBucket=function(){this.enabled=!0},e.prototype.updateTokenBucketRate=function(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)},e.prototype.updateMeasuredRate=function(){var e=this.getCurrentTimeInSeconds(),t=Math.floor(2*e)/2;if(this.requestCount++,t>this.lastTxRateBucket){var n=this.requestCount/(t-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=t}},e.prototype.getPrecise=function(e){return parseFloat(e.toFixed(8))},e}(),x=new Uint8Array(16);function P(){if(!w&&!(w="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return w(x)}for(var k=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,D=function(e){return"string"==typeof e&&k.test(e)},N=[],L=0;L<256;++L)N.push((L+256).toString(16).substr(1));for(var M=function(e,t,n){var r=(e=e||{}).random||(e.rng||P)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(N[e[t+0]]+N[e[t+1]]+N[e[t+2]]+N[e[t+3]]+"-"+N[e[t+4]]+N[e[t+5]]+"-"+N[e[t+6]]+N[e[t+7]]+"-"+N[e[t+8]]+N[e[t+9]]+"-"+N[e[t+10]]+N[e[t+11]]+N[e[t+12]]+N[e[t+13]]+N[e[t+14]]+N[e[t+15]]).toLowerCase();if(!D(n))throw TypeError("Stringified UUID is invalid");return n}(r)},j=function(e,t){return Math.floor(Math.min(2e4,Math.random()*Math.pow(2,t)*e))},R=function(e){return!!e&&(function(e){return void 0!==e.$retryable}(e)||function(e){return S.includes(e.name)}(e)||I(e)||function(e){var t;return C.includes(e.name)||O.includes((null==e?void 0:e.code)||"")||A.includes((null===(t=e.$metadata)||void 0===t?void 0:t.httpStatusCode)||0)}(e))},U=function(){function e(e,t){var n,i,o;this.maxAttemptsProvider=e,this.mode=r.STANDARD,this.retryDecider=null!==(n=null==t?void 0:t.retryDecider)&&void 0!==n?n:R,this.delayDecider=null!==(i=null==t?void 0:t.delayDecider)&&void 0!==i?i:j,this.retryQuota=null!==(o=null==t?void 0:t.retryQuota)&&void 0!==o?o:function(e,t){var n=(void 0,1),r=(void 0,5),i=(void 0,10),o=500,s=function(e){return"TimeoutError"===e.name?i:r},a=function(e){return s(e)<=o};return Object.freeze({hasRetryTokens:a,retrieveRetryTokens:function(e){if(!a(e))throw new Error("No retry token available");var t=s(e);return o-=t,t},releaseRetryTokens:function(e){o+=null!=e?e:n,o=Math.min(o,500)}})}()}return e.prototype.shouldRetry=function(e,t,n){return t<n&&this.retryDecider(e)&&this.retryQuota.hasRetryTokens(e)},e.prototype.getMaxAttempts=function(){return Object(c.b)(this,void 0,void 0,(function(){var e;return Object(c.d)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.maxAttemptsProvider()];case 1:return e=t.sent(),[3,3];case 2:return t.sent(),e=3,[3,3];case 3:return[2,e]}}))}))},e.prototype.retry=function(e,t,n){return Object(c.b)(this,void 0,void 0,(function(){var r,i,o,s,a,u,l,d;return Object(c.d)(this,(function(f){switch(f.label){case 0:return i=0,o=0,[4,this.getMaxAttempts()];case 1:s=f.sent(),a=t.request,v.a.isInstance(a)&&(a.headers["amz-sdk-invocation-id"]=M()),u=function(){var u,d,f,p,h,g,m,y;return Object(c.d)(this,(function(c){switch(c.label){case 0:return c.trys.push([0,4,,7]),v.a.isInstance(a)&&(a.headers["amz-sdk-request"]="attempt=".concat(i+1,"; max=").concat(s)),(null==n?void 0:n.beforeRequest)?[4,n.beforeRequest()]:[3,2];case 1:c.sent(),c.label=2;case 2:return[4,e(t)];case 3:return u=c.sent(),d=u.response,f=u.output,(null==n?void 0:n.afterRequest)&&n.afterRequest(d),l.retryQuota.releaseRetryTokens(r),f.$metadata.attempts=i+1,f.$metadata.totalRetryDelay=o,[2,{value:{response:d,output:f}}];case 4:return p=c.sent(),h=F(p),i++,l.shouldRetry(h,i,s)?(r=l.retryQuota.retrieveRetryTokens(h),g=l.delayDecider(I(h)?500:100,i),m=B(h.$response),y=Math.max(m||0,g),o+=y,[4,new Promise((function(e){return setTimeout(e,y)}))]):[3,6];case 5:return c.sent(),[2,"continue"];case 6:throw h.$metadata||(h.$metadata={}),h.$metadata.attempts=i,h.$metadata.totalRetryDelay=o,h;case 7:return[2]}}))},l=this,f.label=2;case 2:return[5,u()];case 3:return"object"==typeof(d=f.sent())?[2,d.value]:[3,2];case 4:return[2]}}))}))},e}(),B=function(e){if(v.b.isInstance(e)){var t=Object.keys(e.headers).find((function(e){return"retry-after"===e.toLowerCase()}));if(t){var n=e.headers[t],r=Number(n);return Number.isNaN(r)?new Date(n).getTime()-Date.now():1e3*r}}},F=function(e){return e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):"string"==typeof e?new Error(e):new Error("AWS SDK error wrapper for ".concat(e))},z=function(e){function t(t,n){var i=this,o=null!=n?n:{},s=o.rateLimiter,a=Object(c.f)(o,["rateLimiter"]);return(i=e.call(this,t,a)||this).rateLimiter=null!=s?s:new T,i.mode=r.ADAPTIVE,i}return Object(c.c)(t,e),t.prototype.retry=function(t,n){return Object(c.b)(this,void 0,void 0,(function(){var r=this;return Object(c.d)(this,(function(i){return[2,e.prototype.retry.call(this,t,n,{beforeRequest:function(){return Object(c.b)(r,void 0,void 0,(function(){return Object(c.d)(this,(function(e){return[2,this.rateLimiter.getSendToken()]}))}))},afterRequest:function(e){r.rateLimiter.updateClientSendingRate(e)}})]}))}))},t}(U),q={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},$=n(66),K={},V={},G=0;G<256;G++){var H=G.toString(16).toLowerCase();1===H.length&&(H="0".concat(H)),K[G]=H,V[H]=G}function W(e){for(var t="",n=0;n<e.byteLength;n++)t+=K[e[n]];return t}for(var J="X-Amz-Date".toLowerCase(),Y=["authorization",J,"date"],Z="X-Amz-Signature".toLowerCase(),Q="X-Amz-Security-Token".toLowerCase(),X={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},ee=/^proxy-/,te=/^sec-/,ne="AWS4-HMAC-SHA256-PAYLOAD",re={},ie=[],oe=function(e,t,n){return"".concat(e,"/").concat(t,"/").concat(n,"/").concat("aws4_request")},se=function(e,t,n){var r=new e(t);return r.update(n),r.digest()},ae=function(e,t,n){var r,i,o=e.headers,s={};try{for(var a=Object(c.h)(Object.keys(o).sort()),u=a.next();!u.done;u=a.next()){var l=u.value;if(null!=o[l]){var d=l.toLowerCase();(d in X||(null==t?void 0:t.has(d))||ee.test(d)||te.test(d))&&(!n||n&&!n.has(d))||(s[d]=o[l].trim().replace(/\s+/g," "))}}}catch(e){r={error:e}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return s},ue=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,ce)},ce=function(e){return"%".concat(e.charCodeAt(0).toString(16).toUpperCase())},le=function(e,t){var n=e.headers,r=e.body;return Object(c.b)(void 0,void 0,void 0,(function(){var e,i,o,s,a,u,l;return Object(c.d)(this,(function(d){switch(d.label){case 0:try{for(e=Object(c.h)(Object.keys(n)),i=e.next();!i.done;i=e.next())if("x-amz-content-sha256"===(o=i.value).toLowerCase())return[2,n[o]]}catch(e){u={error:e}}finally{try{i&&!i.done&&(l=e.return)&&l.call(e)}finally{if(u)throw u.error}}return null!=r?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof r||ArrayBuffer.isView(r)||(f=r,"function"==typeof ArrayBuffer&&f instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(f))?((s=new t).update(r),a=W,[4,s.digest()]):[3,3];case 2:return[2,a.apply(void 0,[d.sent()])];case 3:return[2,"UNSIGNED-PAYLOAD"]}var f}))}))},de=function(e){var t=e.headers,n=e.query,r=Object(c.f)(e,["headers","query"]);return Object(c.a)(Object(c.a)({},r),{headers:Object(c.a)({},t),query:n?fe(n):void 0})},fe=function(e){return Object.keys(e).reduce((function(t,n){var r,i=e[n];return Object(c.a)(Object(c.a)({},t),((r={})[n]=Array.isArray(i)?Object(c.g)([],Object(c.e)(i),!1):i,r))}),{})},pe=function(e){var t,n;e="function"==typeof e.clone?e.clone():de(e);try{for(var r=Object(c.h)(Object.keys(e.headers)),i=r.next();!i.done;i=r.next()){var o=i.value;Y.indexOf(o.toLowerCase())>-1&&delete e.headers[o]}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return e},he=function(){function e(e){var t=e.applyChecksum,n=e.credentials,r=e.region,i=e.service,o=e.sha256,s=e.uriEscapePath,a=void 0===s||s;this.service=i,this.sha256=o,this.uriEscapePath=a,this.applyChecksum="boolean"!=typeof t||t,this.regionProvider=Object(l.a)(r),this.credentialProvider=Object(l.a)(n)}return e.prototype.presign=function(e,t){return void 0===t&&(t={}),Object(c.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,l,d,f,p,h,v,g,m,y,b,w,_,S,E,C,A,O;return Object(c.d)(this,(function(I){switch(I.label){case 0:return n=t.signingDate,r=void 0===n?new Date:n,i=t.expiresIn,o=void 0===i?3600:i,s=t.unsignableHeaders,a=t.unhoistableHeaders,u=t.signableHeaders,l=t.signingRegion,d=t.signingService,[4,this.credentialProvider()];case 1:return f=I.sent(),this.validateResolvedCredentials(f),null==l?[3,2]:(h=l,[3,4]);case 2:return[4,this.regionProvider()];case 3:h=I.sent(),I.label=4;case 4:return p=h,v=ve(r),g=v.longDate,m=v.shortDate,o>604800?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(y=oe(m,p,null!=d?d:this.service),b=function(e,t){var n,r,i;void 0===t&&(t={});var o="function"==typeof e.clone?e.clone():de(e),s=o.headers,a=o.query,u=void 0===a?{}:a;try{for(var l=Object(c.h)(Object.keys(s)),d=l.next();!d.done;d=l.next()){var f=d.value,p=f.toLowerCase();"x-amz-"!==p.slice(0,6)||(null===(i=t.unhoistableHeaders)||void 0===i?void 0:i.has(p))||(u[f]=s[f],delete s[f])}}catch(e){n={error:e}}finally{try{d&&!d.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}return Object(c.a)(Object(c.a)({},e),{headers:s,query:u})}(pe(e),{unhoistableHeaders:a}),f.sessionToken&&(b.query["X-Amz-Security-Token"]=f.sessionToken),b.query["X-Amz-Algorithm"]="AWS4-HMAC-SHA256",b.query["X-Amz-Credential"]="".concat(f.accessKeyId,"/").concat(y),b.query["X-Amz-Date"]=g,b.query["X-Amz-Expires"]=o.toString(10),w=ae(b,s,u),b.query["X-Amz-SignedHeaders"]=ge(w),_=b.query,S="X-Amz-Signature",E=this.getSignature,C=[g,y,this.getSigningKey(f,p,m,d)],A=this.createCanonicalRequest,O=[b,w],[4,le(e,this.sha256)]);case 5:return[4,E.apply(this,C.concat([A.apply(this,O.concat([I.sent()]))]))];case 6:return _[S]=I.sent(),[2,b]}}))}))},e.prototype.sign=function(e,t){return Object(c.b)(this,void 0,void 0,(function(){return Object(c.d)(this,(function(n){return"string"==typeof e?[2,this.signString(e,t)]:e.headers&&e.payload?[2,this.signEvent(e,t)]:[2,this.signRequest(e,t)]}))}))},e.prototype.signEvent=function(e,t){var n=e.headers,r=e.payload,i=t.signingDate,o=void 0===i?new Date:i,s=t.priorSignature,a=t.signingRegion,u=t.signingService;return Object(c.b)(this,void 0,void 0,(function(){var e,t,i,l,d,f,p,h,v,g,m;return Object(c.d)(this,(function(c){switch(c.label){case 0:return null==a?[3,1]:(t=a,[3,3]);case 1:return[4,this.regionProvider()];case 2:t=c.sent(),c.label=3;case 3:return e=t,i=ve(o),l=i.shortDate,d=i.longDate,f=oe(l,e,null!=u?u:this.service),[4,le({headers:{},body:r},this.sha256)];case 4:return p=c.sent(),(h=new this.sha256).update(n),g=W,[4,h.digest()];case 5:return v=g.apply(void 0,[c.sent()]),m=[ne,d,f,s,v,p].join("\n"),[2,this.signString(m,{signingDate:o,signingRegion:e,signingService:u})]}}))}))},e.prototype.signString=function(e,t){var n=void 0===t?{}:t,r=n.signingDate,i=void 0===r?new Date:r,o=n.signingRegion,s=n.signingService;return Object(c.b)(this,void 0,void 0,(function(){var t,n,r,a,u,l,d,f;return Object(c.d)(this,(function(c){switch(c.label){case 0:return[4,this.credentialProvider()];case 1:return t=c.sent(),this.validateResolvedCredentials(t),null==o?[3,2]:(r=o,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=c.sent(),c.label=4;case 4:return n=r,a=ve(i).shortDate,d=(l=this.sha256).bind,[4,this.getSigningKey(t,n,a,s)];case 5:return(u=new(d.apply(l,[void 0,c.sent()]))).update(e),f=W,[4,u.digest()];case 6:return[2,f.apply(void 0,[c.sent()])]}}))}))},e.prototype.signRequest=function(e,t){var n=void 0===t?{}:t,r=n.signingDate,i=void 0===r?new Date:r,o=n.signableHeaders,s=n.unsignableHeaders,a=n.signingRegion,u=n.signingService;return Object(c.b)(this,void 0,void 0,(function(){var t,n,r,l,d,f,p,h,v,g,m;return Object(c.d)(this,(function(y){switch(y.label){case 0:return[4,this.credentialProvider()];case 1:return t=y.sent(),this.validateResolvedCredentials(t),null==a?[3,2]:(r=a,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=y.sent(),y.label=4;case 4:return n=r,l=pe(e),d=ve(i),f=d.longDate,p=d.shortDate,h=oe(p,n,null!=u?u:this.service),l.headers[J]=f,t.sessionToken&&(l.headers[Q]=t.sessionToken),[4,le(l,this.sha256)];case 5:return v=y.sent(),!function(e,t){var n,r;e=e.toLowerCase();try{for(var i=Object(c.h)(Object.keys(t)),o=i.next();!o.done;o=i.next())if(e===o.value.toLowerCase())return!0}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return!1}("x-amz-content-sha256",l.headers)&&this.applyChecksum&&(l.headers["x-amz-content-sha256"]=v),g=ae(l,s,o),[4,this.getSignature(f,h,this.getSigningKey(t,n,p,u),this.createCanonicalRequest(l,g,v))];case 6:return m=y.sent(),l.headers.authorization="".concat("AWS4-HMAC-SHA256"," ")+"Credential=".concat(t.accessKeyId,"/").concat(h,", ")+"SignedHeaders=".concat(ge(g),", ")+"Signature=".concat(m),[2,l]}}))}))},e.prototype.createCanonicalRequest=function(e,t,n){var r=Object.keys(t).sort();return"".concat(e.method,"\n").concat(this.getCanonicalPath(e),"\n").concat(function(e){var t,n,r=e.query,i=void 0===r?{}:r,o=[],s={},a=function(e){if(e.toLowerCase()===Z)return"continue";o.push(e);var t=i[e];"string"==typeof t?s[e]="".concat(ue(e),"=").concat(ue(t)):Array.isArray(t)&&(s[e]=t.slice(0).sort().reduce((function(t,n){return t.concat(["".concat(ue(e),"=").concat(ue(n))])}),[]).join("&"))};try{for(var u=Object(c.h)(Object.keys(i).sort()),l=u.next();!l.done;l=u.next())a(l.value)}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return o.map((function(e){return s[e]})).filter((function(e){return e})).join("&")}(e),"\n").concat(r.map((function(e){return"".concat(e,":").concat(t[e])})).join("\n"),"\n\n").concat(r.join(";"),"\n").concat(n)},e.prototype.createStringToSign=function(e,t,n){return Object(c.b)(this,void 0,void 0,(function(){var r,i;return Object(c.d)(this,(function(o){switch(o.label){case 0:return(r=new this.sha256).update(n),[4,r.digest()];case 1:return i=o.sent(),[2,"".concat("AWS4-HMAC-SHA256","\n").concat(e,"\n").concat(t,"\n").concat(W(i))]}}))}))},e.prototype.getCanonicalPath=function(e){var t,n,r=e.path;if(this.uriEscapePath){var i=[];try{for(var o=Object(c.h)(r.split("/")),s=o.next();!s.done;s=o.next()){var a=s.value;0!==(null==a?void 0:a.length)&&"."!==a&&(".."===a?i.pop():i.push(a))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}var u="".concat((null==r?void 0:r.startsWith("/"))?"/":"").concat(i.join("/")).concat(i.length>0&&(null==r?void 0:r.endsWith("/"))?"/":"");return encodeURIComponent(u).replace(/%2F/g,"/")}return r},e.prototype.getSignature=function(e,t,n,r){return Object(c.b)(this,void 0,void 0,(function(){var i,o,s,a,u;return Object(c.d)(this,(function(c){switch(c.label){case 0:return[4,this.createStringToSign(e,t,r)];case 1:return i=c.sent(),a=(s=this.sha256).bind,[4,n];case 2:return(o=new(a.apply(s,[void 0,c.sent()]))).update(i),u=W,[4,o.digest()];case 3:return[2,u.apply(void 0,[c.sent()])]}}))}))},e.prototype.getSigningKey=function(e,t,n,r){return function(e,t,n,r,i){return Object(c.b)(void 0,void 0,void 0,(function(){var o,s,a,u,l,d,f,p,h;return Object(c.d)(this,(function(v){switch(v.label){case 0:return[4,se(e,t.secretAccessKey,t.accessKeyId)];case 1:if(o=v.sent(),(s="".concat(n,":").concat(r,":").concat(i,":").concat(W(o),":").concat(t.sessionToken))in re)return[2,re[s]];for(ie.push(s);ie.length>50;)delete re[ie.shift()];a="AWS4".concat(t.secretAccessKey),v.label=2;case 2:v.trys.push([2,7,8,9]),u=Object(c.h)([n,r,i,"aws4_request"]),l=u.next(),v.label=3;case 3:return l.done?[3,6]:(d=l.value,[4,se(e,a,d)]);case 4:a=v.sent(),v.label=5;case 5:return l=u.next(),[3,3];case 6:return[3,9];case 7:return f=v.sent(),p={error:f},[3,9];case 8:try{l&&!l.done&&(h=u.return)&&h.call(u)}finally{if(p)throw p.error}return[7];case 9:return[2,re[s]=a]}}))}))}(this.sha256,e,n,t,r||this.service)},e.prototype.validateResolvedCredentials=function(e){if("object"!=typeof e||"string"!=typeof e.accessKeyId||"string"!=typeof e.secretAccessKey)throw new Error("Resolved credential object is not valid")},e}(),ve=function(e){var t,n=(t=e,function(e){return"number"==typeof e?new Date(1e3*e):"string"==typeof e?Number(e)?new Date(1e3*Number(e)):new Date(e):e}(t).toISOString().replace(/\.\d{3}Z$/,"Z")).replace(/[\-:]/g,"");return{longDate:n,shortDate:n.slice(0,8)}},ge=function(e){return Object.keys(e).sort().join(";")},me=function(e){return new Date(Date.now()+e)},ye=function(e,t){var n=Date.parse(e);return function(e,t){return Math.abs(me(t).getTime()-e)>=3e5}(n,t)?n-Date.now():t},be=function(e){var t,n,r;return v.b.isInstance(e)?null!==(n=null===(t=e.headers)||void 0===t?void 0:t.date)&&void 0!==n?n:null===(r=e.headers)||void 0===r?void 0:r.Date:void 0},we={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},_e=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,Se=function(e){var t=Object(c.e)(e,2),n=t[0],r=t[1],i=n.indexOf("/"),o=n.substring(0,i),s=n.substring(i+1);return"api"===o&&(s=s.toLowerCase()),[o,s,r].filter((function(e){return e&&e.length>0})).map((function(e){return null==e?void 0:e.replace(_e,"_")})).join("/")},Ee={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},Ce=n(5),Ae=n(191),Oe=n(190),Ie=function(){function e(e){"function"==typeof e?this.configProvider=e().then((function(e){return e||{}})):(this.config=null!=e?e:{},this.configProvider=Promise.resolve(this.config))}return e.prototype.destroy=function(){},e.prototype.handle=function(e,t){var n=(void 0===t?{}:t).abortSignal;return Object(c.b)(this,void 0,void 0,(function(){var t,r,i,o,s,a,u,l,d,f,p,h;return Object(c.d)(this,(function(g){switch(g.label){case 0:return this.config?[3,2]:(t=this,[4,this.configProvider]);case 1:t.config=g.sent(),g.label=2;case 2:return r=this.config.requestTimeout,(null==n?void 0:n.aborted)?((i=new Error("Request aborted")).name="AbortError",[2,Promise.reject(i)]):(o=e.path,e.query&&(s=function(e){var t,n,r=[];try{for(var i=Object(c.h)(Object.keys(e).sort()),o=i.next();!o.done;o=i.next()){var s=o.value,a=e[s];if(s=ue(s),Array.isArray(a))for(var u=0,l=a.length;u<l;u++)r.push("".concat(s,"=").concat(ue(a[u])));else{var d=s;(a||"string"==typeof a)&&(d+="=".concat(ue(a))),r.push(d)}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r.join("&")}(e.query))&&(o+="?".concat(s)),a=e.port,u=e.method,l="".concat(e.protocol,"//").concat(e.hostname).concat(a?":".concat(a):"").concat(o),d="GET"===u||"HEAD"===u?void 0:e.body,f={body:d,headers:new Headers(e.headers),method:u},"undefined"!=typeof AbortController&&(f.signal=n),p=new Request(l,f),h=[fetch(p).then((function(e){var t,n,r=e.headers,i={};try{for(var o=Object(c.h)(r.entries()),s=o.next();!s.done;s=o.next()){var a=s.value;i[a[0]]=a[1]}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return void 0!==e.body?{response:new v.b({headers:i,statusCode:e.status,body:e.body})}:e.blob().then((function(t){return{response:new v.b({headers:i,statusCode:e.status,body:t})}}))})),(m=r,void 0===m&&(m=0),new Promise((function(e,t){m&&setTimeout((function(){var e=new Error("Request did not complete within ".concat(m," ms"));e.name="TimeoutError",t(e)}),m)})))],n&&h.push(new Promise((function(e,t){n.onabort=function(){var e=new Error("Request aborted");e.name="AbortError",t(e)}}))),[2,Promise.race(h)])}var m}))}))},e}(),Te={},xe=new Array(64),Pe=0,ke="A".charCodeAt(0),De="Z".charCodeAt(0);Pe+ke<=De;Pe++){var Ne=String.fromCharCode(Pe+ke);Te[Ne]=Pe,xe[Pe]=Ne}for(Pe=0,ke="a".charCodeAt(0),De="z".charCodeAt(0);Pe+ke<=De;Pe++){Ne=String.fromCharCode(Pe+ke);var Le=Pe+26;Te[Ne]=Le,xe[Le]=Ne}for(Pe=0;Pe<10;Pe++)Te[Pe.toString(10)]=Pe+52,Ne=Pe.toString(10),Le=Pe+52,Te[Ne]=Le,xe[Le]=Ne;function Me(e){var t=e.length/4*3;"=="===e.slice(-2)?t-=2:"="===e.slice(-1)&&t--;for(var n=new ArrayBuffer(t),r=new DataView(n),i=0;i<e.length;i+=4){for(var o=0,s=0,a=i,u=i+3;a<=u;a++)if("="!==e[a]){if(!(e[a]in Te))throw new TypeError("Invalid character ".concat(e[a]," in base64 string."));o|=Te[e[a]]<<6*(u-a),s+=6}else o>>=6;var c=i/4*3;o>>=s%8;for(var l=Math.floor(s/8),d=0;d<l;d++){var f=8*(l-d-1);r.setUint8(c+d,(o&255<<f)>>f)}}return new Uint8Array(n)}function je(e){for(var t="",n=0;n<e.length;n+=3){for(var r=0,i=0,o=n,s=Math.min(n+3,e.length);o<s;o++)r|=e[o]<<8*(s-o-1),i+=8;var a=Math.ceil(i/6);r<<=6*a-i;for(var u=1;u<=a;u++){var c=6*(a-u);t+=xe[(r&63<<c)>>c]}t+="==".slice(0,4-a)}return t}Te["+"]=62,xe[62]="+",Te["/"]=63,xe[63]="/";var Re=function(e){return"function"==typeof Blob&&e instanceof Blob?function(e){return Object(c.b)(this,void 0,void 0,(function(){var t,n;return Object(c.d)(this,(function(r){switch(r.label){case 0:return[4,Ue(e)];case 1:return t=r.sent(),n=Me(t),[2,new Uint8Array(n)]}}))}))}(e):function(e){return Object(c.b)(this,void 0,void 0,(function(){var t,n,r,i,o,s,a;return Object(c.d)(this,(function(u){switch(u.label){case 0:t=new Uint8Array(0),n=e.getReader(),r=!1,u.label=1;case 1:return r?[3,3]:[4,n.read()];case 2:return i=u.sent(),o=i.done,(s=i.value)&&(a=t,(t=new Uint8Array(a.length+s.length)).set(a),t.set(s,a.length)),r=o,[3,1];case 3:return[2,t]}}))}))}(e)};function Ue(e){return new Promise((function(t,n){var r=new FileReader;r.onloadend=function(){var e;if(2!==r.readyState)return n(new Error("Reader aborted too early"));var i=null!==(e=r.result)&&void 0!==e?e:"",o=i.indexOf(","),s=o>-1?o+1:i.length;t(i.substring(s))},r.onabort=function(){return n(new Error("Read aborted"))},r.onerror=function(){return n(r.error)},r.readAsDataURL(e)}))}var Be=function(e){if("string"==typeof e){for(var t=e.length,n=t-1;n>=0;n--){var r=e.charCodeAt(n);r>127&&r<=2047?t++:r>2047&&r<=65535&&(t+=2),r>=56320&&r<=57343&&n--}return t}if("number"==typeof e.byteLength)return e.byteLength;if("number"==typeof e.size)return e.size;throw new Error("Body Length computation failed for ".concat(e))},Fe=n(58),ze=n.n(Fe),qe=function(e){var t=e.serviceId,n=e.clientVersion;return function(){return Object(c.b)(void 0,void 0,void 0,(function(){var e,r,i,o,s,a,u,l,d;return Object(c.d)(this,(function(c){return e="undefined"!=typeof window&&(null===(i=null===window||void 0===window?void 0:window.navigator)||void 0===i?void 0:i.userAgent)?ze.a.parse(window.navigator.userAgent):void 0,r=[["aws-sdk-js",n],["os/".concat((null===(o=null==e?void 0:e.os)||void 0===o?void 0:o.name)||"other"),null===(s=null==e?void 0:e.os)||void 0===s?void 0:s.version],["lang/js"],["md/browser","".concat(null!==(u=null===(a=null==e?void 0:e.browser)||void 0===a?void 0:a.name)&&void 0!==u?u:"unknown","_").concat(null!==(d=null===(l=null==e?void 0:e.browser)||void 0===l?void 0:l.version)&&void 0!==d?d:"unknown")]],t&&r.push(["api/".concat(t),n]),[2,r]}))}))}},$e=function(e){return"function"==typeof TextEncoder?function(e){return(new TextEncoder).encode(e)}(e):function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e.charCodeAt(n);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192,63&i|128);else if(n+1<e.length&&55296==(64512&i)&&56320==(64512&e.charCodeAt(n+1))){var o=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n));t.push(o>>18|240,o>>12&63|128,o>>6&63|128,63&o|128)}else t.push(i>>12|224,i>>6&63|128,63&i|128)}return Uint8Array.from(t)}(e)},Ke=function(e){return"function"==typeof TextDecoder?function(e){return new TextDecoder("utf-8").decode(e)}(e):function(e){for(var t="",n=0,r=e.length;n<r;n++){var i=e[n];if(i<128)t+=String.fromCharCode(i);else if(192<=i&&i<224){var o=e[++n];t+=String.fromCharCode((31&i)<<6|63&o)}else if(240<=i&&i<365){var s="%"+[i,e[++n],e[++n],e[++n]].map((function(e){return e.toString(16)})).join("%");t+=decodeURIComponent(s)}else t+=String.fromCharCode((15&i)<<12|(63&e[++n])<<6|63&e[++n])}return t}(e)},Ve=function(e){if("string"==typeof e)return Ve(new URL(e));var t,n=e,r=n.hostname,i=n.pathname,o=n.port,s=n.protocol,a=n.search;return a&&(t=function(e){var t,n,r={};if(e=e.replace(/^\?/,""))try{for(var i=Object(c.h)(e.split("&")),o=i.next();!o.done;o=i.next()){var s=o.value,a=Object(c.e)(s.split("="),2),u=a[0],l=a[1],d=void 0===l?null:l;u=decodeURIComponent(u),d&&(d=decodeURIComponent(d)),u in r?Array.isArray(r[u])?r[u].push(d):r[u]=[r[u],d]:r[u]=d}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}(a)),{hostname:r,port:o?parseInt(o):void 0,protocol:s,path:i,query:t}},Ge={"us-east-1":{variants:[{hostname:"runtime-fips.lex.us-east-1.amazonaws.com",tags:["fips"]}]},"us-gov-west-1":{variants:[{hostname:"runtime-fips.lex.us-gov-west-1.amazonaws.com",tags:["fips"]}]},"us-west-2":{variants:[{hostname:"runtime-fips.lex.us-west-2.amazonaws.com",tags:["fips"]}]}},He={aws:{regions:["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-northeast-3","ap-south-1","ap-southeast-1","ap-southeast-2","ap-southeast-3","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-central-1","me-south-1","sa-east-1","us-east-1","us-east-1-fips","us-east-2","us-west-1","us-west-2","us-west-2-fips"],regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",variants:[{hostname:"runtime.lex.{region}.amazonaws.com",tags:[]},{hostname:"runtime-fips.lex.{region}.amazonaws.com",tags:["fips"]},{hostname:"runtime.lex-fips.{region}.api.aws",tags:["dualstack","fips"]},{hostname:"runtime.lex.{region}.api.aws",tags:["dualstack"]}]},"aws-cn":{regions:["cn-north-1","cn-northwest-1"],regionRegex:"^cn\\-\\w+\\-\\d+$",variants:[{hostname:"runtime.lex.{region}.amazonaws.com.cn",tags:[]},{hostname:"runtime.lex-fips.{region}.amazonaws.com.cn",tags:["fips"]},{hostname:"runtime.lex-fips.{region}.api.amazonwebservices.com.cn",tags:["dualstack","fips"]},{hostname:"runtime.lex.{region}.api.amazonwebservices.com.cn",tags:["dualstack"]}]},"aws-iso":{regions:["us-iso-east-1","us-iso-west-1"],regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",variants:[{hostname:"runtime.lex.{region}.c2s.ic.gov",tags:[]},{hostname:"runtime.lex-fips.{region}.c2s.ic.gov",tags:["fips"]}]},"aws-iso-b":{regions:["us-isob-east-1"],regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",variants:[{hostname:"runtime.lex.{region}.sc2s.sgov.gov",tags:[]},{hostname:"runtime.lex-fips.{region}.sc2s.sgov.gov",tags:["fips"]}]},"aws-us-gov":{regions:["us-gov-east-1","us-gov-west-1","us-gov-west-1-fips"],regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",variants:[{hostname:"runtime.lex.{region}.amazonaws.com",tags:[]},{hostname:"runtime-fips.lex.{region}.amazonaws.com",tags:["fips"]},{hostname:"runtime.lex-fips.{region}.api.aws",tags:["dualstack","fips"]},{hostname:"runtime.lex.{region}.api.aws",tags:["dualstack"]}]}},We=function(e,t){return Object(c.b)(void 0,void 0,void 0,(function(){return Object(c.d)(this,(function(n){return[2,h(e,Object(c.a)(Object(c.a)({},t),{signingService:"lex",regionHash:Ge,partitionHash:He}))]}))}))},Je=n(98),Ye=function(e){function t(t){var n,i,o,s=this,a=function(e){var t=e.region,n=e.useFipsEndpoint;if(!t)throw new Error("Region is missing");return Object(c.a)(Object(c.a)({},e),{region:function(){return Object(c.b)(void 0,void 0,void 0,(function(){var e;return Object(c.d)(this,(function(n){switch(n.label){case 0:return"string"==typeof t?[2,f(t)]:[4,t()];case 1:return e=n.sent(),[2,f(e)]}}))}))},useFipsEndpoint:function(){return Object(c.b)(void 0,void 0,void 0,(function(){var e;return Object(c.d)(this,(function(r){switch(r.label){case 0:return"string"!=typeof t?[3,1]:(e=t,[3,3]);case 1:return[4,t()];case 2:e=r.sent(),r.label=3;case 3:return d(e)?[2,!0]:[2,"boolean"==typeof n?Promise.resolve(n):n()]}}))}))}})}(function(e){var t,n,r,i,o,s,a,u,l,d,f,p,h,v,g,m=Object(Je.a)(e),y=function(){return m().then(Ce.l)},b=function(e){var t,n,r,i,o;return{apiVersion:"2016-11-28",disableHostPrefix:null!==(t=null==e?void 0:e.disableHostPrefix)&&void 0!==t&&t,logger:null!==(n=null==e?void 0:e.logger)&&void 0!==n?n:{},regionInfoProvider:null!==(r=null==e?void 0:e.regionInfoProvider)&&void 0!==r?r:We,serviceId:null!==(i=null==e?void 0:e.serviceId)&&void 0!==i?i:"Lex Runtime Service",urlParser:null!==(o=null==e?void 0:e.urlParser)&&void 0!==o?o:Ve}}(e);return Object(c.a)(Object(c.a)(Object(c.a)({},b),e),{runtime:"browser",defaultsMode:m,base64Decoder:null!==(t=null==e?void 0:e.base64Decoder)&&void 0!==t?t:Me,base64Encoder:null!==(n=null==e?void 0:e.base64Encoder)&&void 0!==n?n:je,bodyLengthChecker:null!==(r=null==e?void 0:e.bodyLengthChecker)&&void 0!==r?r:Be,credentialDefaultProvider:null!==(i=null==e?void 0:e.credentialDefaultProvider)&&void 0!==i?i:function(e){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:null!==(o=null==e?void 0:e.defaultUserAgentProvider)&&void 0!==o?o:qe({serviceId:b.serviceId,clientVersion:Ae.version}),maxAttempts:null!==(s=null==e?void 0:e.maxAttempts)&&void 0!==s?s:3,region:null!==(a=null==e?void 0:e.region)&&void 0!==a?a:function(){return Promise.reject("Region is missing")},requestHandler:null!==(u=null==e?void 0:e.requestHandler)&&void 0!==u?u:new Ie(y),retryMode:null!==(l=null==e?void 0:e.retryMode)&&void 0!==l?l:function(){return Object(c.b)(void 0,void 0,void 0,(function(){return Object(c.d)(this,(function(e){switch(e.label){case 0:return[4,y()];case 1:return[2,e.sent().retryMode||_]}}))}))},sha256:null!==(d=null==e?void 0:e.sha256)&&void 0!==d?d:Oe.Sha256,streamCollector:null!==(f=null==e?void 0:e.streamCollector)&&void 0!==f?f:Re,useDualstackEndpoint:null!==(p=null==e?void 0:e.useDualstackEndpoint)&&void 0!==p?p:function(){return Promise.resolve(!1)},useFipsEndpoint:null!==(h=null==e?void 0:e.useFipsEndpoint)&&void 0!==h?h:function(){return Promise.resolve(!1)},utf8Decoder:null!==(v=null==e?void 0:e.utf8Decoder)&&void 0!==v?v:$e,utf8Encoder:null!==(g=null==e?void 0:e.utf8Encoder)&&void 0!==g?g:Ke})}(t)),u=function(e){var t,n=Object(l.a)(e.useDualstackEndpoint),r=e.endpoint,i=e.useFipsEndpoint,o=e.urlParser;return Object(c.a)(Object(c.a)({},e),{tls:null===(t=e.tls)||void 0===t||t,endpoint:r?Object(l.a)("string"==typeof r?o(r):r):function(){return function(e){return Object(c.b)(void 0,void 0,void 0,(function(){var t,n,r,i,o,s,a;return Object(c.d)(this,(function(u){switch(u.label){case 0:return t=e.tls,n=void 0===t||t,[4,e.region()];case 1:if(r=u.sent(),!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(r))throw new Error("Invalid region in client config");return[4,e.useDualstackEndpoint()];case 2:return i=u.sent(),[4,e.useFipsEndpoint()];case 3:return o=u.sent(),[4,e.regionInfoProvider(r,{useDualstackEndpoint:i,useFipsEndpoint:o})];case 4:if(!(s=(null!==(a=u.sent())&&void 0!==a?a:{}).hostname))throw new Error("Cannot resolve hostname from client config");return[2,e.urlParser("".concat(n?"https:":"http:","//").concat(s))]}}))}))}(Object(c.a)(Object(c.a)({},e),{useDualstackEndpoint:n,useFipsEndpoint:i}))},isCustomEndpoint:!!r,useDualstackEndpoint:n})}(a),p=function(e){return Object(c.a)(Object(c.a)({},e),{customUserAgent:"string"==typeof e.customUserAgent?[[e.customUserAgent]]:e.customUserAgent})}(function(e){var t,n=e.credentials?function(e){return"function"==typeof e?Object($.a)(e,(function(e){return void 0!==e.expiration&&e.expiration.getTime()-Date.now()<3e5}),(function(e){return void 0!==e.expiration})):Object(l.a)(e)}(e.credentials):e.credentialDefaultProvider(e),r=e.signingEscapePath,i=void 0===r||r,o=e.systemClockOffset,s=void 0===o?e.systemClockOffset||0:o,a=e.sha256;return t=e.signer?Object(l.a)(e.signer):e.regionInfoProvider?function(){return Object(l.a)(e.region)().then((function(t){return Object(c.b)(void 0,void 0,void 0,(function(){var n,r,i,o;return Object(c.d)(this,(function(s){switch(s.label){case 0:return r=(n=e).regionInfoProvider,i=[t],o={},[4,e.useFipsEndpoint()];case 1:return o.useFipsEndpoint=s.sent(),[4,e.useDualstackEndpoint()];case 2:return[4,r.apply(n,i.concat([(o.useDualstackEndpoint=s.sent(),o)]))];case 3:return[2,[s.sent()||{},t]]}}))}))})).then((function(t){var r=Object(c.e)(t,2),o=r[0],s=r[1],u=o.signingRegion,l=o.signingService;e.signingRegion=e.signingRegion||u||s,e.signingName=e.signingName||l||e.serviceId;var d=Object(c.a)(Object(c.a)({},e),{credentials:n,region:e.signingRegion,service:e.signingName,sha256:a,uriEscapePath:i});return new(e.signerConstructor||he)(d)}))}:function(t){return Object(c.b)(void 0,void 0,void 0,(function(){var r,o,s;return Object(c.d)(this,(function(u){if(!t)throw new Error("Unexpected empty auth scheme config");return r=t.signingScope,o=t.signingName,e.signingRegion=e.signingRegion||r,e.signingName=e.signingName||o||e.serviceId,s=Object(c.a)(Object(c.a)({},e),{credentials:n,region:e.signingRegion,service:e.signingName,sha256:a,uriEscapePath:i}),[2,new(e.signerConstructor||he)(s)]}))}))},Object(c.a)(Object(c.a)({},e),{systemClockOffset:s,signingEscapePath:i,credentials:n,signer:t})}((n=u,o=Object(l.a)(null!==(i=n.maxAttempts)&&void 0!==i?i:3),Object(c.a)(Object(c.a)({},n),{maxAttempts:o,retryStrategy:function(){return Object(c.b)(void 0,void 0,void 0,(function(){return Object(c.d)(this,(function(e){switch(e.label){case 0:return n.retryStrategy?[2,n.retryStrategy]:[4,Object(l.a)(n.retryMode)()];case 1:return e.sent()===r.ADAPTIVE?[2,new z(o)]:[2,new U(o)]}}))}))}}))));return(s=e.call(this,p)||this).config=p,s.middlewareStack.use(function(e){return{applyToStack:function(t){t.add(function(e){return function(t,n){return function(r){return Object(c.b)(void 0,void 0,void 0,(function(){var i;return Object(c.d)(this,(function(o){switch(o.label){case 0:return[4,e.retryStrategy()];case 1:return(null==(i=o.sent())?void 0:i.mode)&&(n.userAgent=Object(c.g)(Object(c.g)([],Object(c.e)(n.userAgent||[]),!1),[["cfg/retry-mode",i.mode]],!1)),[2,i.retry(t,r)]}}))}))}}}(e),q)}}}(s.config)),s.middlewareStack.use(function(e){return{applyToStack:function(t){t.add(function(e){var t=this;return function(n){return function(r){return Object(c.b)(t,void 0,void 0,(function(){var t,i,o,s,a;return Object(c.d)(this,(function(u){if(t=r.request,v.a.isInstance(t)&&(i=t.body,o=t.headers,i&&-1===Object.keys(o).map((function(e){return e.toLowerCase()})).indexOf("content-length")))try{s=e(i),t.headers=Object(c.a)(Object(c.a)({},t.headers),((a={})["content-length"]=String(s),a))}catch(e){}return[2,n(Object(c.a)(Object(c.a)({},r),{request:t}))]}))}))}}}(e.bodyLengthChecker),g)}}}(s.config)),s.middlewareStack.use(function(e){return{applyToStack:function(t){t.add(function(e){return function(t){return function(n){return Object(c.b)(void 0,void 0,void 0,(function(){var r,i;return Object(c.d)(this,(function(o){return v.a.isInstance(n.request)?(r=n.request,(void 0===(i=(e.requestHandler.metadata||{}).handlerProtocol)?"":i).indexOf("h2")>=0&&!r.headers[":authority"]?(delete r.headers.host,r.headers[":authority"]=""):r.headers.host||(r.headers.host=r.hostname),[2,t(n)]):[2,t(n)]}))}))}}}(e),m)}}}(s.config)),s.middlewareStack.use((s.config,{applyToStack:function(e){e.add((function(e,t){return function(n){return Object(c.b)(void 0,void 0,void 0,(function(){var r,i,o,s,a,u,l,d,f;return Object(c.d)(this,(function(p){switch(p.label){case 0:return r=t.clientName,i=t.commandName,o=t.inputFilterSensitiveLog,s=t.logger,a=t.outputFilterSensitiveLog,[4,e(n)];case 1:return u=p.sent(),s?("function"==typeof s.info&&(l=u.output,d=l.$metadata,f=Object(c.f)(l,["$metadata"]),s.info({clientName:r,commandName:i,input:o(n.input),output:a(f),metadata:d})),[2,u]):[2,u]}}))}))}}),y)}})),s.middlewareStack.use(Object(b.a)(s.config)),s.middlewareStack.use(function(e){return{applyToStack:function(t){t.addRelativeTo(function(e){return function(t,n){return function(r){var i,o,s;return Object(c.b)(this,void 0,void 0,(function(){var a,u,l,d,f,p,h;return Object(c.d)(this,(function(g){switch(g.label){case 0:return v.a.isInstance(r.request)?(a=null===(s=null===(o=null===(i=n.endpointV2)||void 0===i?void 0:i.properties)||void 0===o?void 0:o.authSchemes)||void 0===s?void 0:s[0],[4,e.signer(a)]):[2,t(r)];case 1:return u=g.sent(),d=t,f=[Object(c.a)({},r)],h={},[4,u.sign(r.request,{signingDate:me(e.systemClockOffset),signingRegion:n.signing_region,signingService:n.signing_service})];case 2:return[4,d.apply(void 0,[c.a.apply(void 0,f.concat([(h.request=g.sent(),h)]))]).catch((function(t){var n,r=null!==(n=t.ServerTime)&&void 0!==n?n:be(t.$response);throw r&&(e.systemClockOffset=ye(r,e.systemClockOffset)),t}))];case 3:return l=g.sent(),(p=be(l.response))&&(e.systemClockOffset=ye(p,e.systemClockOffset)),[2,l]}}))}))}}}(e),we)}}}(s.config)),s.middlewareStack.use(function(e){return{applyToStack:function(t){var n;t.add((n=e,function(e,t){return function(r){return Object(c.b)(void 0,void 0,void 0,(function(){var i,o,s,a,u,l,d,f,p;return Object(c.d)(this,(function(h){switch(h.label){case 0:return i=r.request,v.a.isInstance(i)?(o=i.headers,s=(null===(f=null==t?void 0:t.userAgent)||void 0===f?void 0:f.map(Se))||[],[4,n.defaultUserAgentProvider()]):[2,e(r)];case 1:return a=h.sent().map(Se),u=(null===(p=null==n?void 0:n.customUserAgent)||void 0===p?void 0:p.map(Se))||[],l=Object(c.g)(Object(c.g)(Object(c.g)([],Object(c.e)(a),!1),Object(c.e)(s),!1),Object(c.e)(u),!1).join(" "),d=Object(c.g)(Object(c.g)([],Object(c.e)(a.filter((function(e){return e.startsWith("aws-sdk-")}))),!1),Object(c.e)(u),!1).join(" "),"browser"!==n.runtime?(d&&(o["x-amz-user-agent"]=o["x-amz-user-agent"]?"".concat(o["user-agent"]," ").concat(d):d),o["user-agent"]=l):o["x-amz-user-agent"]=l,[2,e(Object(c.a)(Object(c.a)({},r),{request:i}))]}}))}))}}),Ee)}}}(s.config)),s}return Object(c.c)(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(Ce.a),Ze={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Qe={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function Xe(e,t,n){return{applyToStack:function(r){r.add(function(e,t){return function(n,r){return function(r){return Object(c.b)(void 0,void 0,void 0,(function(){var i,o,s;return Object(c.d)(this,(function(a){switch(a.label){case 0:return[4,n(r)];case 1:i=a.sent().response,a.label=2;case 2:return a.trys.push([2,4,,5]),[4,t(i,e)];case 3:return o=a.sent(),[2,{response:i,output:o}];case 4:throw s=a.sent(),Object.defineProperty(s,"$response",{value:i}),s;case 5:return[2]}}))}))}}}(e,n),Ze),r.add(function(e,t){return function(n,r){return function(i){return Object(c.b)(void 0,void 0,void 0,(function(){var o,s,a;return Object(c.d)(this,(function(u){switch(u.label){case 0:if(!(o=(null===(a=r.endpointV2)||void 0===a?void 0:a.url)&&e.urlParser?function(){return Object(c.b)(void 0,void 0,void 0,(function(){return Object(c.d)(this,(function(t){return[2,e.urlParser(r.endpointV2.url)]}))}))}:e.endpoint))throw new Error("No valid endpoint provider available.");return[4,t(i.input,Object(c.a)(Object(c.a)({},e),{endpoint:o}))];case 1:return s=u.sent(),[2,n(Object(c.a)(Object(c.a)({},i),{request:s}))]}}))}))}}}(e,t),Qe)}}}var et=n(32),tt=n(70),nt=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Object(c.c)(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Xe(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"LexRuntimeServiceClient",commandName:"PostTextCommand",inputFilterSensitiveLog:et.l,outputFilterSensitiveLog:et.m},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return Object(tt.d)(e,t)},t.prototype.deserialize=function(e,t){return Object(tt.b)(e,t)},t}(Ce.b),rt=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Object(c.c)(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Xe(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"LexRuntimeServiceClient",commandName:"PostContentCommand",inputFilterSensitiveLog:et.j,outputFilterSensitiveLog:et.k},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return Object(tt.c)(e,t)},t.prototype.deserialize=function(e,t){return Object(tt.a)(e,t)},t}(Ce.b),it=n(80),ot=n(49),st=Uint8Array,at=Uint16Array,ut=Uint32Array,ct=new st([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),lt=new st([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),dt=(new st([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),function(e,t){for(var n=new at(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var i=new ut(n[30]);for(r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)i[o]=o-n[r]<<5|r;return[n,i]}),ft=dt(ct,2),pt=ft[0],ht=ft[1];pt[28]=258,ht[258]=28;for(var vt=dt(lt,0),gt=(vt[0],vt[1],new at(32768)),mt=0;mt<32768;++mt){var yt=(43690&mt)>>>1|(21845&mt)<<1;yt=(61680&(yt=(52428&yt)>>>2|(13107&yt)<<2))>>>4|(3855&yt)<<4,gt[mt]=((65280&yt)>>>8|(255&yt)<<8)>>>1}var bt=new st(288);for(mt=0;mt<144;++mt)bt[mt]=8;for(mt=144;mt<256;++mt)bt[mt]=9;for(mt=256;mt<280;++mt)bt[mt]=7;for(mt=280;mt<288;++mt)bt[mt]=8;var wt=new st(32);for(mt=0;mt<32;++mt)wt[mt]=5;var _t=new st(0),St="undefined"!=typeof TextDecoder&&new TextDecoder;try{St.decode(_t,{stream:!0})}catch(e){}"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;var Et=function(e){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(function(){return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(t){return e instanceof Blob||e instanceof ReadableStream?[2,new Response(e).arrayBuffer().then((function(e){return new Uint8Array(e)}))]:[2,Promise.reject("Invalid content type")]}))}))};function Ct(e){return(Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var At,Ot=(At=function(e,t){return(At=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}At(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),It=function(){return(It=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Tt=new i.a("AWSLexProvider"),xt=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,t)||this;return n._botsCompleteCallback={},n}return Ot(t,e),t.prototype.getProviderName=function(){return"AWSLexProvider"},t.prototype.configure=function(t){void 0===t&&(t={});var n=["name","alias","region"];return Object.keys(t).forEach((function(e){var r=t[e];if(!n.every((function(e){return e in r})))throw new Error("invalid bot configuration")})),e.prototype.configure.call(this,t)},t.prototype.reportBotStatus=function(e,t){var n=this;Tt.debug("postContent state",e.dialogState),"ReadyForFulfillment"!==e.dialogState&&"Fulfilled"!==e.dialogState||("function"==typeof this._botsCompleteCallback[t]&&setTimeout((function(){return n._botsCompleteCallback[t](null,e)}),0),this._config&&"function"==typeof this._config[t].onComplete&&setTimeout((function(){return n._config[t].onComplete(null,e)}),0)),"Failed"===e.dialogState&&("function"==typeof this._botsCompleteCallback[t]&&setTimeout((function(){return n._botsCompleteCallback[t]("Bot conversation failed")}),0),this._config&&"function"==typeof this._config[t].onComplete&&setTimeout((function(){return n._config[t].onComplete("Bot conversation failed")}),0))},t.prototype.sendMessage=function(e,t){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,d,f,p,h;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(v){switch(v.label){case 0:if(!this._config[e])return[2,Promise.reject("Bot "+e+" does not exist")];v.label=1;case 1:return v.trys.push([1,3,,4]),[4,it.a.get()];case 2:return n=v.sent(),[3,4];case 3:return v.sent(),[2,Promise.reject("No credentials")];case 4:if(this.lexRuntimeServiceClient=new Ye({region:this._config[e].region,credentials:n,customUserAgent:Object(ot.b)()}),"string"!=typeof t)return[3,9];r={botAlias:this._config[e].alias,botName:e,inputText:t,userId:n.identityId},Tt.debug("postText to lex",t),v.label=5;case 5:return v.trys.push([5,7,,8]),i=new nt(r),[4,this.lexRuntimeServiceClient.send(i)];case 6:return l=v.sent(),this.reportBotStatus(l,e),[2,l];case 7:return o=v.sent(),[2,Promise.reject(o)];case 8:return[3,21];case 9:return s=t.content,"voice"!==t.options.messageType?[3,13]:"object"!==Ct(s)?[2,Promise.reject("invalid content type")]:s instanceof Uint8Array?(u=s,[3,12]):[3,10];case 10:return[4,Et(s)];case 11:u=v.sent(),v.label=12;case 12:return a=u,r={botAlias:this._config[e].alias,botName:e,contentType:"audio/x-l16; sample-rate=16000; channel-count=1",userId:n.identityId,accept:"audio/mpeg",inputStream:a},[3,14];case 13:if("string"!=typeof s)return[2,Promise.reject("invalid content type")];r={botAlias:this._config[e].alias,botName:e,contentType:"text/plain; charset=utf-8",inputStream:s,userId:n.identityId,accept:"audio/mpeg"},v.label=14;case 14:Tt.debug("postContent to lex",t),v.label=15;case 15:return v.trys.push([15,20,,21]),c=new rt(r),[4,this.lexRuntimeServiceClient.send(c)];case 16:return(l=v.sent()).audioStream?[4,Et(l.audioStream)]:[3,18];case 17:return f=v.sent(),[3,19];case 18:f=void 0,v.label=19;case 19:return d=f,p=It(It({},l),{audioStream:d}),this.reportBotStatus(p,e),[2,p];case 20:return h=v.sent(),[2,Promise.reject(h)];case 21:return[2]}}))}))},t.prototype.onComplete=function(e,t){if(!this._config[e])throw new Error("Bot "+e+" does not exist");this._botsCompleteCallback[e]=t},t}(u),Pt=function(){return(Pt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},kt=new i.a("Interactions"),Dt=new(function(){function e(e){void 0===e&&(e={}),this._options=e,kt.debug("Interactions Options",this._options),this._pluggables={}}return e.prototype.getModuleName=function(){return"Interactions"},e.prototype.configure=function(e){var t=this,n=e?e.Interactions||e:{};kt.debug("configure Interactions",{opt:n}),this._options=Pt(Pt({bots:{}},n),n.Interactions);var r=this._options.aws_bots_config,i=this._options.bots;return!Object.keys(i).length&&r&&Array.isArray(r)&&r.forEach((function(e){t._options.bots[e.name]=e})),Object.keys(i).forEach((function(e){var n,r=i[e],o=r.providerName||"AWSLexProvider";t._pluggables.AWSLexProvider||"AWSLexProvider"!==o||(t._pluggables.AWSLexProvider=new xt),t._pluggables[o]?t._pluggables[o].configure(((n={})[r.name]=r,n)):kt.debug("bot "+r.name+" was not configured as "+o+" provider was not found")})),this._options},e.prototype.addPluggable=function(e){var t=this;if(e&&"Interactions"===e.getCategory()){if(this._pluggables[e.getProviderName()])throw new Error("Pluggable "+e.getProviderName()+" already plugged");return Object.keys(this._options.bots).filter((function(n){return t._options.bots[n].providerName===e.getProviderName()})).forEach((function(n){var r,i=t._options.bots[n];e.configure(((r={})[i.name]=i,r))})),void(this._pluggables[e.getProviderName()]=e)}},e.prototype.send=function(e,t){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){var n;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(r){switch(r.label){case 0:return this._options.bots&&this._options.bots[e]?(n=this._options.bots[e].providerName||"AWSLexProvider",this._pluggables[n]?[4,this._pluggables[n].sendMessage(e,t)]:[2,Promise.reject("Bot "+n+" does not have valid pluggin did you try addPluggable first?")]):[2,Promise.reject("Bot "+e+" does not exist")];case 1:return[2,r.sent()]}}))}))},e.prototype.onComplete=function(e,t){if(!this._options.bots||!this._options.bots[e])throw new Error("Bot "+e+" does not exist");var n=this._options.bots[e].providerName||"AWSLexProvider";if(!this._pluggables[n])throw new Error("Bot "+n+" does not have valid pluggin did you try addPluggable first?");this._pluggables[n].onComplete(e,t)},e}());o.a.register(Dt)},function(e,t,n){"use strict";n.d(t,"a",(function(){return In}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o,s,a,u,c,l,d,f,p,h,v,g,m,y,b,w,_,S,E,C,A,O,I,T,x,P,k,D,N,L,M,j,R,U,B,F,z,q,$,K,V,G,H,W,J,Y,Z,Q,X,ee,te,ne,re,ie,oe,se,ae,ue,ce,le,de,fe,pe,he,ve,ge,me,ye,be,we,_e,Se,Ee,Ce,Ae,Oe,Ie,Te,xe,Pe,ke,De,Ne,Le,Me,je,Re,Ue,Be,Fe,ze,qe,$e,Ke,Ve,Ge,He,We,Je,Ye,Ze,Qe,Xe,et,tt=function(){return(tt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function nt(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function rt(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}Object.create,Object.create,(o||(o={})).filterSensitiveLog=function(e){return tt({},e)},(s||(s={})).filterSensitiveLog=function(e){return tt({},e)},(a||(a={})).filterSensitiveLog=function(e){return tt({},e)},(u||(u={})).filterSensitiveLog=function(e){return tt({},e)},(c||(c={})).filterSensitiveLog=function(e){return tt({},e)},(l||(l={})).filterSensitiveLog=function(e){return tt({},e)},(d||(d={})).filterSensitiveLog=function(e){return tt({},e)},(f||(f={})).filterSensitiveLog=function(e){return tt({},e)},(p||(p={})).filterSensitiveLog=function(e){return tt({},e)},(h||(h={})).filterSensitiveLog=function(e){return tt({},e)},(v||(v={})).filterSensitiveLog=function(e){return tt({},e)},(g||(g={})).filterSensitiveLog=function(e){return tt({},e)},(m||(m={})).filterSensitiveLog=function(e){return tt({},e)},(y||(y={})).filterSensitiveLog=function(e){return tt({},e)},(b||(b={})).filterSensitiveLog=function(e){return tt({},e)},(w||(w={})).filterSensitiveLog=function(e){return tt({},e)},(_||(_={})).filterSensitiveLog=function(e){return tt({},e)},(S||(S={})).filterSensitiveLog=function(e){return tt({},e)},(E||(E={})).filterSensitiveLog=function(e){return tt({},e)},(C||(C={})).filterSensitiveLog=function(e){return tt({},e)},(A||(A={})).filterSensitiveLog=function(e){return tt({},e)},(O||(O={})).filterSensitiveLog=function(e){return tt({},e)},(I||(I={})).filterSensitiveLog=function(e){return tt({},e)},(T||(T={})).filterSensitiveLog=function(e){return tt({},e)},(x||(x={})).filterSensitiveLog=function(e){return tt({},e)},(P||(P={})).filterSensitiveLog=function(e){return tt({},e)},function(e){e.CANCELLED="CANCELLED",e.COMPLETED="COMPLETED",e.FAILED="FAILED",e.PENDING="PENDING",e.PENDING_CANCEL="PENDING_CANCEL",e.RUNNING="RUNNING"}(k||(k={})),(D||(D={})).filterSensitiveLog=function(e){return tt({},e)},(N||(N={})).filterSensitiveLog=function(e){return tt({},e)},(L||(L={})).filterSensitiveLog=function(e){return tt({},e)},(M||(M={})).filterSensitiveLog=function(e){return tt({},e)},(j||(j={})).filterSensitiveLog=function(e){return tt({},e)},(R||(R={})).filterSensitiveLog=function(e){return tt({},e)},(U||(U={})).filterSensitiveLog=function(e){return tt({},e)},(B||(B={})).filterSensitiveLog=function(e){return tt({},e)},function(e){e.LastEventTime="LastEventTime",e.LogStreamName="LogStreamName"}(F||(F={})),(z||(z={})).filterSensitiveLog=function(e){return tt({},e)},(q||(q={})).filterSensitiveLog=function(e){return tt({},e)},($||($={})).filterSensitiveLog=function(e){return tt({},e)},(K||(K={})).filterSensitiveLog=function(e){return tt({},e)},(V||(V={})).filterSensitiveLog=function(e){return tt({},e)},(G||(G={})).filterSensitiveLog=function(e){return tt({},e)},(H||(H={})).filterSensitiveLog=function(e){return tt({},e)},function(e){e.Cancelled="Cancelled",e.Complete="Complete",e.Failed="Failed",e.Running="Running",e.Scheduled="Scheduled"}(W||(W={})),(J||(J={})).filterSensitiveLog=function(e){return tt({},e)},(Y||(Y={})).filterSensitiveLog=function(e){return tt({},e)},(Z||(Z={})).filterSensitiveLog=function(e){return tt({},e)},(Q||(Q={})).filterSensitiveLog=function(e){return tt({},e)},(X||(X={})).filterSensitiveLog=function(e){return tt({},e)},(ee||(ee={})).filterSensitiveLog=function(e){return tt({},e)},(te||(te={})).filterSensitiveLog=function(e){return tt({},e)},(ne||(ne={})).filterSensitiveLog=function(e){return tt({},e)},(re||(re={})).filterSensitiveLog=function(e){return tt({},e)},(ie||(ie={})).filterSensitiveLog=function(e){return tt({},e)},function(e){e.ByLogStream="ByLogStream",e.Random="Random"}(oe||(oe={})),(se||(se={})).filterSensitiveLog=function(e){return tt({},e)},(ae||(ae={})).filterSensitiveLog=function(e){return tt({},e)},(ue||(ue={})).filterSensitiveLog=function(e){return tt({},e)},(ce||(ce={})).filterSensitiveLog=function(e){return tt({},e)},(le||(le={})).filterSensitiveLog=function(e){return tt({},e)},(de||(de={})).filterSensitiveLog=function(e){return tt({},e)},(fe||(fe={})).filterSensitiveLog=function(e){return tt({},e)},(pe||(pe={})).filterSensitiveLog=function(e){return tt({},e)},(he||(he={})).filterSensitiveLog=function(e){return tt({},e)},(ve||(ve={})).filterSensitiveLog=function(e){return tt({},e)},(ge||(ge={})).filterSensitiveLog=function(e){return tt({},e)},(me||(me={})).filterSensitiveLog=function(e){return tt({},e)},(ye||(ye={})).filterSensitiveLog=function(e){return tt({},e)},(be||(be={})).filterSensitiveLog=function(e){return tt({},e)},(we||(we={})).filterSensitiveLog=function(e){return tt({},e)},(_e||(_e={})).filterSensitiveLog=function(e){return tt({},e)},(Se||(Se={})).filterSensitiveLog=function(e){return tt({},e)},(Ee||(Ee={})).filterSensitiveLog=function(e){return tt({},e)},(Ce||(Ce={})).filterSensitiveLog=function(e){return tt({},e)},(Ae||(Ae={})).filterSensitiveLog=function(e){return tt({},e)},(Oe||(Oe={})).filterSensitiveLog=function(e){return tt({},e)},(Ie||(Ie={})).filterSensitiveLog=function(e){return tt({},e)},(Te||(Te={})).filterSensitiveLog=function(e){return tt({},e)},(xe||(xe={})).filterSensitiveLog=function(e){return tt({},e)},(Pe||(Pe={})).filterSensitiveLog=function(e){return tt({},e)},(ke||(ke={})).filterSensitiveLog=function(e){return tt({},e)},(De||(De={})).filterSensitiveLog=function(e){return tt({},e)},(Ne||(Ne={})).filterSensitiveLog=function(e){return tt({},e)},(Le||(Le={})).filterSensitiveLog=function(e){return tt({},e)},(Me||(Me={})).filterSensitiveLog=function(e){return tt({},e)},(je||(je={})).filterSensitiveLog=function(e){return tt({},e)},(Re||(Re={})).filterSensitiveLog=function(e){return tt({},e)},(Ue||(Ue={})).filterSensitiveLog=function(e){return tt({},e)},(Be||(Be={})).filterSensitiveLog=function(e){return tt({},e)},(Fe||(Fe={})).filterSensitiveLog=function(e){return tt({},e)},(ze||(ze={})).filterSensitiveLog=function(e){return tt({},e)},(qe||(qe={})).filterSensitiveLog=function(e){return tt({},e)},($e||($e={})).filterSensitiveLog=function(e){return tt({},e)},(Ke||(Ke={})).filterSensitiveLog=function(e){return tt({},e)},(Ve||(Ve={})).filterSensitiveLog=function(e){return tt({},e)},(Ge||(Ge={})).filterSensitiveLog=function(e){return tt({},e)},(He||(He={})).filterSensitiveLog=function(e){return tt({},e)},(We||(We={})).filterSensitiveLog=function(e){return tt({},e)},(Je||(Je={})).filterSensitiveLog=function(e){return tt({},e)},(Ye||(Ye={})).filterSensitiveLog=function(e){return tt({},e)},(Ze||(Ze={})).filterSensitiveLog=function(e){return tt({},e)},(Qe||(Qe={})).filterSensitiveLog=function(e){return tt({},e)},(Xe||(Xe={})).filterSensitiveLog=function(e){return tt({},e)},(et||(et={})).filterSensitiveLog=function(e){return tt({},e)};var it=n(3),ot=function(e,t){return nt(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,d,f,p;return rt(this,(function(h){switch(h.label){case 0:return r=[tt({},e)],p={},[4,Ut(e.body,t)];case 1:switch(n=tt.apply(void 0,r.concat([(p.body=h.sent(),p)])),o="UnknownError",o=Bt(e,n.body)){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,2];case"LimitExceededException":case"com.amazonaws.cloudwatchlogs#LimitExceededException":return[3,4];case"OperationAbortedException":case"com.amazonaws.cloudwatchlogs#OperationAbortedException":return[3,6];case"ResourceAlreadyExistsException":case"com.amazonaws.cloudwatchlogs#ResourceAlreadyExistsException":return[3,8];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,10]}return[3,12];case 2:return s=[{}],[4,ft(n,t)];case 3:return i=tt.apply(void 0,[tt.apply(void 0,s.concat([h.sent()])),{name:o,$metadata:Mt(e)}]),[3,13];case 4:return a=[{}],[4,ht(n,t)];case 5:return i=tt.apply(void 0,[tt.apply(void 0,a.concat([h.sent()])),{name:o,$metadata:Mt(e)}]),[3,13];case 6:return u=[{}],[4,vt(n,t)];case 7:return i=tt.apply(void 0,[tt.apply(void 0,u.concat([h.sent()])),{name:o,$metadata:Mt(e)}]),[3,13];case 8:return c=[{}],[4,gt(n,t)];case 9:return i=tt.apply(void 0,[tt.apply(void 0,c.concat([h.sent()])),{name:o,$metadata:Mt(e)}]),[3,13];case 10:return l=[{}],[4,yt(n,t)];case 11:return i=tt.apply(void 0,[tt.apply(void 0,l.concat([h.sent()])),{name:o,$metadata:Mt(e)}]),[3,13];case 12:d=n.body,o=d.code||d.Code||o,i=tt(tt({},d),{name:""+o,message:d.message||d.Message||o,$fault:"client",$metadata:Mt(e)}),h.label=13;case 13:return f=i.message||i.Message||o,i.message=f,delete i.Message,[2,Promise.reject(Object.assign(new Error(f),i))]}}))}))},st=function(e,t){return nt(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,d,f;return rt(this,(function(p){switch(p.label){case 0:return r=[tt({},e)],f={},[4,Ut(e.body,t)];case 1:switch(n=tt.apply(void 0,r.concat([(f.body=p.sent(),f)])),o="UnknownError",o=Bt(e,n.body)){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,2];case"ResourceAlreadyExistsException":case"com.amazonaws.cloudwatchlogs#ResourceAlreadyExistsException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.cloudwatchlogs#ResourceNotFoundException":return[3,6];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,8]}return[3,10];case 2:return s=[{}],[4,ft(n,t)];case 3:return i=tt.apply(void 0,[tt.apply(void 0,s.concat([p.sent()])),{name:o,$metadata:Mt(e)}]),[3,11];case 4:return a=[{}],[4,gt(n,t)];case 5:return i=tt.apply(void 0,[tt.apply(void 0,a.concat([p.sent()])),{name:o,$metadata:Mt(e)}]),[3,11];case 6:return u=[{}],[4,mt(n,t)];case 7:return i=tt.apply(void 0,[tt.apply(void 0,u.concat([p.sent()])),{name:o,$metadata:Mt(e)}]),[3,11];case 8:return c=[{}],[4,yt(n,t)];case 9:return i=tt.apply(void 0,[tt.apply(void 0,c.concat([p.sent()])),{name:o,$metadata:Mt(e)}]),[3,11];case 10:l=n.body,o=l.code||l.Code||o,i=tt(tt({},l),{name:""+o,message:l.message||l.Message||o,$fault:"client",$metadata:Mt(e)}),p.label=11;case 11:return d=i.message||i.Message||o,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}}))}))},at=function(e,t){return nt(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l;return rt(this,(function(d){switch(d.label){case 0:return r=[tt({},e)],l={},[4,Ut(e.body,t)];case 1:switch(n=tt.apply(void 0,r.concat([(l.body=d.sent(),l)])),o="UnknownError",o=Bt(e,n.body)){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,2];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,4]}return[3,6];case 2:return s=[{}],[4,ft(n,t)];case 3:return i=tt.apply(void 0,[tt.apply(void 0,s.concat([d.sent()])),{name:o,$metadata:Mt(e)}]),[3,7];case 4:return a=[{}],[4,yt(n,t)];case 5:return i=tt.apply(void 0,[tt.apply(void 0,a.concat([d.sent()])),{name:o,$metadata:Mt(e)}]),[3,7];case 6:u=n.body,o=u.code||u.Code||o,i=tt(tt({},u),{name:""+o,message:u.message||u.Message||o,$fault:"client",$metadata:Mt(e)}),d.label=7;case 7:return c=i.message||i.Message||o,i.message=c,delete i.Message,[2,Promise.reject(Object.assign(new Error(c),i))]}}))}))},ut=function(e,t){return nt(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,d;return rt(this,(function(f){switch(f.label){case 0:return r=[tt({},e)],d={},[4,Ut(e.body,t)];case 1:switch(n=tt.apply(void 0,r.concat([(d.body=f.sent(),d)])),o="UnknownError",o=Bt(e,n.body)){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,2];case"ResourceNotFoundException":case"com.amazonaws.cloudwatchlogs#ResourceNotFoundException":return[3,4];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,6]}return[3,8];case 2:return s=[{}],[4,ft(n,t)];case 3:return i=tt.apply(void 0,[tt.apply(void 0,s.concat([f.sent()])),{name:o,$metadata:Mt(e)}]),[3,9];case 4:return a=[{}],[4,mt(n,t)];case 5:return i=tt.apply(void 0,[tt.apply(void 0,a.concat([f.sent()])),{name:o,$metadata:Mt(e)}]),[3,9];case 6:return u=[{}],[4,yt(n,t)];case 7:return i=tt.apply(void 0,[tt.apply(void 0,u.concat([f.sent()])),{name:o,$metadata:Mt(e)}]),[3,9];case 8:c=n.body,o=c.code||c.Code||o,i=tt(tt({},c),{name:""+o,message:c.message||c.Message||o,$fault:"client",$metadata:Mt(e)}),f.label=9;case 9:return l=i.message||i.Message||o,i.message=l,delete i.Message,[2,Promise.reject(Object.assign(new Error(l),i))]}}))}))},ct=function(e,t){return nt(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,d;return rt(this,(function(f){switch(f.label){case 0:return r=[tt({},e)],d={},[4,Ut(e.body,t)];case 1:switch(n=tt.apply(void 0,r.concat([(d.body=f.sent(),d)])),o="UnknownError",o=Bt(e,n.body)){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,2];case"ResourceNotFoundException":case"com.amazonaws.cloudwatchlogs#ResourceNotFoundException":return[3,4];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,6]}return[3,8];case 2:return s=[{}],[4,ft(n,t)];case 3:return i=tt.apply(void 0,[tt.apply(void 0,s.concat([f.sent()])),{name:o,$metadata:Mt(e)}]),[3,9];case 4:return a=[{}],[4,mt(n,t)];case 5:return i=tt.apply(void 0,[tt.apply(void 0,a.concat([f.sent()])),{name:o,$metadata:Mt(e)}]),[3,9];case 6:return u=[{}],[4,yt(n,t)];case 7:return i=tt.apply(void 0,[tt.apply(void 0,u.concat([f.sent()])),{name:o,$metadata:Mt(e)}]),[3,9];case 8:c=n.body,o=c.code||c.Code||o,i=tt(tt({},c),{name:""+o,message:c.message||c.Message||o,$fault:"client",$metadata:Mt(e)}),f.label=9;case 9:return l=i.message||i.Message||o,i.message=l,delete i.Message,[2,Promise.reject(Object.assign(new Error(l),i))]}}))}))},lt=function(e,t){return nt(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,d,f,p,h;return rt(this,(function(v){switch(v.label){case 0:return r=[tt({},e)],h={},[4,Ut(e.body,t)];case 1:switch(n=tt.apply(void 0,r.concat([(h.body=v.sent(),h)])),o="UnknownError",o=Bt(e,n.body)){case"DataAlreadyAcceptedException":case"com.amazonaws.cloudwatchlogs#DataAlreadyAcceptedException":return[3,2];case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,4];case"InvalidSequenceTokenException":case"com.amazonaws.cloudwatchlogs#InvalidSequenceTokenException":return[3,6];case"ResourceNotFoundException":case"com.amazonaws.cloudwatchlogs#ResourceNotFoundException":return[3,8];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,10];case"UnrecognizedClientException":case"com.amazonaws.cloudwatchlogs#UnrecognizedClientException":return[3,12]}return[3,14];case 2:return s=[{}],[4,dt(n,t)];case 3:return i=tt.apply(void 0,[tt.apply(void 0,s.concat([v.sent()])),{name:o,$metadata:Mt(e)}]),[3,15];case 4:return a=[{}],[4,ft(n,t)];case 5:return i=tt.apply(void 0,[tt.apply(void 0,a.concat([v.sent()])),{name:o,$metadata:Mt(e)}]),[3,15];case 6:return u=[{}],[4,pt(n,t)];case 7:return i=tt.apply(void 0,[tt.apply(void 0,u.concat([v.sent()])),{name:o,$metadata:Mt(e)}]),[3,15];case 8:return c=[{}],[4,mt(n,t)];case 9:return i=tt.apply(void 0,[tt.apply(void 0,c.concat([v.sent()])),{name:o,$metadata:Mt(e)}]),[3,15];case 10:return l=[{}],[4,yt(n,t)];case 11:return i=tt.apply(void 0,[tt.apply(void 0,l.concat([v.sent()])),{name:o,$metadata:Mt(e)}]),[3,15];case 12:return d=[{}],[4,bt(n,t)];case 13:return i=tt.apply(void 0,[tt.apply(void 0,d.concat([v.sent()])),{name:o,$metadata:Mt(e)}]),[3,15];case 14:f=n.body,o=f.code||f.Code||o,i=tt(tt({},f),{name:""+o,message:f.message||f.Message||o,$fault:"client",$metadata:Mt(e)}),v.label=15;case 15:return p=i.message||i.Message||o,i.message=p,delete i.Message,[2,Promise.reject(Object.assign(new Error(p),i))]}}))}))},dt=function(e,t){return nt(void 0,void 0,void 0,(function(){var n,r;return rt(this,(function(i){return n=e.body,r=St(n,t),[2,tt({name:"DataAlreadyAcceptedException",$fault:"client",$metadata:Mt(e)},r)]}))}))},ft=function(e,t){return nt(void 0,void 0,void 0,(function(){var n,r;return rt(this,(function(i){return n=e.body,r=Et(n,t),[2,tt({name:"InvalidParameterException",$fault:"client",$metadata:Mt(e)},r)]}))}))},pt=function(e,t){return nt(void 0,void 0,void 0,(function(){var n,r;return rt(this,(function(i){return n=e.body,r=Ct(n,t),[2,tt({name:"InvalidSequenceTokenException",$fault:"client",$metadata:Mt(e)},r)]}))}))},ht=function(e,t){return nt(void 0,void 0,void 0,(function(){var n,r;return rt(this,(function(i){return n=e.body,r=At(n,t),[2,tt({name:"LimitExceededException",$fault:"client",$metadata:Mt(e)},r)]}))}))},vt=function(e,t){return nt(void 0,void 0,void 0,(function(){var n,r;return rt(this,(function(i){return n=e.body,r=Tt(n,t),[2,tt({name:"OperationAbortedException",$fault:"client",$metadata:Mt(e)},r)]}))}))},gt=function(e,t){return nt(void 0,void 0,void 0,(function(){var n,r;return rt(this,(function(i){return n=e.body,r=kt(n,t),[2,tt({name:"ResourceAlreadyExistsException",$fault:"client",$metadata:Mt(e)},r)]}))}))},mt=function(e,t){return nt(void 0,void 0,void 0,(function(){var n,r;return rt(this,(function(i){return n=e.body,r=Dt(n,t),[2,tt({name:"ResourceNotFoundException",$fault:"client",$metadata:Mt(e)},r)]}))}))},yt=function(e,t){return nt(void 0,void 0,void 0,(function(){var n,r;return rt(this,(function(i){return n=e.body,r=Nt(n,t),[2,tt({name:"ServiceUnavailableException",$fault:"server",$metadata:Mt(e)},r)]}))}))},bt=function(e,t){return nt(void 0,void 0,void 0,(function(){var n,r;return rt(this,(function(i){return n=e.body,r=Lt(n,t),[2,tt({name:"UnrecognizedClientException",$fault:"client",$metadata:Mt(e)},r)]}))}))},wt=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){return tt(tt({},void 0!==e.message&&null!==e.message&&{message:e.message}),void 0!==e.timestamp&&null!==e.timestamp&&{timestamp:e.timestamp})}(e)}))},_t=function(e,t){return Object.entries(e).reduce((function(e,t){var n,r=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}(t,2),i=r[0],o=r[1];return null===o?e:tt(tt({},e),((n={})[i]=o,n))}),{})},St=function(e,t){return{expectedSequenceToken:void 0!==e.expectedSequenceToken&&null!==e.expectedSequenceToken?e.expectedSequenceToken:void 0,message:void 0!==e.message&&null!==e.message?e.message:void 0}},Et=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Ct=function(e,t){return{expectedSequenceToken:void 0!==e.expectedSequenceToken&&null!==e.expectedSequenceToken?e.expectedSequenceToken:void 0,message:void 0!==e.message&&null!==e.message?e.message:void 0}},At=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Ot=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){return{arn:void 0!==e.arn&&null!==e.arn?e.arn:void 0,creationTime:void 0!==e.creationTime&&null!==e.creationTime?e.creationTime:void 0,kmsKeyId:void 0!==e.kmsKeyId&&null!==e.kmsKeyId?e.kmsKeyId:void 0,logGroupName:void 0!==e.logGroupName&&null!==e.logGroupName?e.logGroupName:void 0,metricFilterCount:void 0!==e.metricFilterCount&&null!==e.metricFilterCount?e.metricFilterCount:void 0,retentionInDays:void 0!==e.retentionInDays&&null!==e.retentionInDays?e.retentionInDays:void 0,storedBytes:void 0!==e.storedBytes&&null!==e.storedBytes?e.storedBytes:void 0}}(e)}))},It=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){return{arn:void 0!==e.arn&&null!==e.arn?e.arn:void 0,creationTime:void 0!==e.creationTime&&null!==e.creationTime?e.creationTime:void 0,firstEventTimestamp:void 0!==e.firstEventTimestamp&&null!==e.firstEventTimestamp?e.firstEventTimestamp:void 0,lastEventTimestamp:void 0!==e.lastEventTimestamp&&null!==e.lastEventTimestamp?e.lastEventTimestamp:void 0,lastIngestionTime:void 0!==e.lastIngestionTime&&null!==e.lastIngestionTime?e.lastIngestionTime:void 0,logStreamName:void 0!==e.logStreamName&&null!==e.logStreamName?e.logStreamName:void 0,storedBytes:void 0!==e.storedBytes&&null!==e.storedBytes?e.storedBytes:void 0,uploadSequenceToken:void 0!==e.uploadSequenceToken&&null!==e.uploadSequenceToken?e.uploadSequenceToken:void 0}}(e)}))},Tt=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},xt=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){return{ingestionTime:void 0!==e.ingestionTime&&null!==e.ingestionTime?e.ingestionTime:void 0,message:void 0!==e.message&&null!==e.message?e.message:void 0,timestamp:void 0!==e.timestamp&&null!==e.timestamp?e.timestamp:void 0}}(e)}))},Pt=function(e,t){return{expiredLogEventEndIndex:void 0!==e.expiredLogEventEndIndex&&null!==e.expiredLogEventEndIndex?e.expiredLogEventEndIndex:void 0,tooNewLogEventStartIndex:void 0!==e.tooNewLogEventStartIndex&&null!==e.tooNewLogEventStartIndex?e.tooNewLogEventStartIndex:void 0,tooOldLogEventEndIndex:void 0!==e.tooOldLogEventEndIndex&&null!==e.tooOldLogEventEndIndex?e.tooOldLogEventEndIndex:void 0}},kt=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Dt=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Nt=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Lt=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Mt=function(e){var t;return{httpStatusCode:e.statusCode,requestId:null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},jt=function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)},Rt=function(e,t,n,r,i){return nt(void 0,void 0,void 0,(function(){var o,s,a,u,c,l;return rt(this,(function(d){switch(d.label){case 0:return[4,e.endpoint()];case 1:return o=d.sent(),s=o.hostname,a=o.protocol,u=void 0===a?"https":a,c=o.port,l={protocol:u,hostname:s,port:c,method:"POST",path:n,headers:t},void 0!==r&&(l.hostname=r),void 0!==i&&(l.body=i),[2,new it.a(l)]}}))}))},Ut=function(e,t){return function(e,t){return jt(e,t).then((function(e){return t.utf8Encoder(e)}))}(e,t).then((function(e){return e.length?JSON.parse(e):{}}))},Bt=function(e,t){var n,r=function(e){var t=e;return t.indexOf(":")>=0&&(t=t.split(":")[0]),t.indexOf("#")>=0&&(t=t.split("#")[1]),t},i=(n=e.headers,"x-amzn-errortype",Object.keys(n).find((function(e){return e.toLowerCase()==="x-amzn-errortype".toLowerCase()})));return void 0!==i?r(e.headers[i]):void 0!==t.code?r(t.code):void 0!==t.__type?r(t.__type):""},Ft=n(10),zt=n(1),qt=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return i(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(Ft.a)(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"CreateLogGroupCommand",inputFilterSensitiveLog:g.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return nt(void 0,void 0,void 0,(function(){var n,r;return rt(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.CreateLogGroup"},r=JSON.stringify(function(e,t){return tt(tt(tt({},void 0!==e.kmsKeyId&&null!==e.kmsKeyId&&{kmsKeyId:e.kmsKeyId}),void 0!==e.logGroupName&&null!==e.logGroupName&&{logGroupName:e.logGroupName}),void 0!==e.tags&&null!==e.tags&&{tags:_t(e.tags,t)})}(e,t)),[2,Rt(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return nt(void 0,void 0,void 0,(function(){var n;return rt(this,(function(r){switch(r.label){case 0:return e.statusCode>=300?[2,ot(e,t)]:[4,jt(e.body,t)];case 1:return r.sent(),n={$metadata:Mt(e)},[2,Promise.resolve(n)]}}))}))}(e,t)},t}(zt.b),$t=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return i(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(Ft.a)(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"DescribeLogGroupsCommand",inputFilterSensitiveLog:R.filterSensitiveLog,outputFilterSensitiveLog:B.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return nt(void 0,void 0,void 0,(function(){var n,r;return rt(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.DescribeLogGroups"},r=JSON.stringify(function(e,t){return tt(tt(tt({},void 0!==e.limit&&null!==e.limit&&{limit:e.limit}),void 0!==e.logGroupNamePrefix&&null!==e.logGroupNamePrefix&&{logGroupNamePrefix:e.logGroupNamePrefix}),void 0!==e.nextToken&&null!==e.nextToken&&{nextToken:e.nextToken})}(e)),[2,Rt(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return nt(void 0,void 0,void 0,(function(){var n,r,i;return rt(this,(function(o){switch(o.label){case 0:return e.statusCode>=300?[2,at(e,t)]:[4,Ut(e.body,t)];case 1:return n=o.sent(),r=function(e,t){return{logGroups:void 0!==e.logGroups&&null!==e.logGroups?Ot(e.logGroups,t):void 0,nextToken:void 0!==e.nextToken&&null!==e.nextToken?e.nextToken:void 0}}(n,t),i=tt({$metadata:Mt(e)},r),[2,Promise.resolve(i)]}}))}))}(e,t)},t}(zt.b),Kt=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return i(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(Ft.a)(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"CreateLogStreamCommand",inputFilterSensitiveLog:m.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return nt(void 0,void 0,void 0,(function(){var n,r;return rt(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.CreateLogStream"},r=JSON.stringify(function(e,t){return tt(tt({},void 0!==e.logGroupName&&null!==e.logGroupName&&{logGroupName:e.logGroupName}),void 0!==e.logStreamName&&null!==e.logStreamName&&{logStreamName:e.logStreamName})}(e)),[2,Rt(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return nt(void 0,void 0,void 0,(function(){var n;return rt(this,(function(r){switch(r.label){case 0:return e.statusCode>=300?[2,st(e,t)]:[4,jt(e.body,t)];case 1:return r.sent(),n={$metadata:Mt(e)},[2,Promise.resolve(n)]}}))}))}(e,t)},t}(zt.b),Vt=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return i(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(Ft.a)(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"DescribeLogStreamsCommand",inputFilterSensitiveLog:z.filterSensitiveLog,outputFilterSensitiveLog:$.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return nt(void 0,void 0,void 0,(function(){var n,r;return rt(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.DescribeLogStreams"},r=JSON.stringify(function(e,t){return tt(tt(tt(tt(tt(tt({},void 0!==e.descending&&null!==e.descending&&{descending:e.descending}),void 0!==e.limit&&null!==e.limit&&{limit:e.limit}),void 0!==e.logGroupName&&null!==e.logGroupName&&{logGroupName:e.logGroupName}),void 0!==e.logStreamNamePrefix&&null!==e.logStreamNamePrefix&&{logStreamNamePrefix:e.logStreamNamePrefix}),void 0!==e.nextToken&&null!==e.nextToken&&{nextToken:e.nextToken}),void 0!==e.orderBy&&null!==e.orderBy&&{orderBy:e.orderBy})}(e)),[2,Rt(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return nt(void 0,void 0,void 0,(function(){var n,r,i;return rt(this,(function(o){switch(o.label){case 0:return e.statusCode>=300?[2,ut(e,t)]:[4,Ut(e.body,t)];case 1:return n=o.sent(),r=function(e,t){return{logStreams:void 0!==e.logStreams&&null!==e.logStreams?It(e.logStreams,t):void 0,nextToken:void 0!==e.nextToken&&null!==e.nextToken?e.nextToken:void 0}}(n,t),i=tt({$metadata:Mt(e)},r),[2,Promise.resolve(i)]}}))}))}(e,t)},t}(zt.b),Gt=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return i(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(Ft.a)(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"GetLogEventsCommand",inputFilterSensitiveLog:pe.filterSensitiveLog,outputFilterSensitiveLog:ve.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return nt(void 0,void 0,void 0,(function(){var n,r;return rt(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.GetLogEvents"},r=JSON.stringify(function(e,t){return tt(tt(tt(tt(tt(tt(tt({},void 0!==e.endTime&&null!==e.endTime&&{endTime:e.endTime}),void 0!==e.limit&&null!==e.limit&&{limit:e.limit}),void 0!==e.logGroupName&&null!==e.logGroupName&&{logGroupName:e.logGroupName}),void 0!==e.logStreamName&&null!==e.logStreamName&&{logStreamName:e.logStreamName}),void 0!==e.nextToken&&null!==e.nextToken&&{nextToken:e.nextToken}),void 0!==e.startFromHead&&null!==e.startFromHead&&{startFromHead:e.startFromHead}),void 0!==e.startTime&&null!==e.startTime&&{startTime:e.startTime})}(e)),[2,Rt(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return nt(void 0,void 0,void 0,(function(){var n,r,i;return rt(this,(function(o){switch(o.label){case 0:return e.statusCode>=300?[2,ct(e,t)]:[4,Ut(e.body,t)];case 1:return n=o.sent(),r=function(e,t){return{events:void 0!==e.events&&null!==e.events?xt(e.events,t):void 0,nextBackwardToken:void 0!==e.nextBackwardToken&&null!==e.nextBackwardToken?e.nextBackwardToken:void 0,nextForwardToken:void 0!==e.nextForwardToken&&null!==e.nextForwardToken?e.nextForwardToken:void 0}}(n,t),i=tt({$metadata:Mt(e)},r),[2,Promise.resolve(i)]}}))}))}(e,t)},t}(zt.b),Ht=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return i(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(Ft.a)(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"PutLogEventsCommand",inputFilterSensitiveLog:De.filterSensitiveLog,outputFilterSensitiveLog:Le.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return nt(void 0,void 0,void 0,(function(){var n,r;return rt(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.PutLogEvents"},r=JSON.stringify(function(e,t){return tt(tt(tt(tt({},void 0!==e.logEvents&&null!==e.logEvents&&{logEvents:wt(e.logEvents)}),void 0!==e.logGroupName&&null!==e.logGroupName&&{logGroupName:e.logGroupName}),void 0!==e.logStreamName&&null!==e.logStreamName&&{logStreamName:e.logStreamName}),void 0!==e.sequenceToken&&null!==e.sequenceToken&&{sequenceToken:e.sequenceToken})}(e)),[2,Rt(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return nt(void 0,void 0,void 0,(function(){var n,r,i;return rt(this,(function(o){switch(o.label){case 0:return e.statusCode>=300?[2,lt(e,t)]:[4,Ut(e.body,t)];case 1:return n=o.sent(),r=function(e,t){return{nextSequenceToken:void 0!==e.nextSequenceToken&&null!==e.nextSequenceToken?e.nextSequenceToken:void 0,rejectedLogEventsInfo:void 0!==e.rejectedLogEventsInfo&&null!==e.rejectedLogEventsInfo?Pt(e.rejectedLogEventsInfo,t):void 0}}(n,t),i=tt({$metadata:Mt(e)},r),[2,Promise.resolve(i)]}}))}))}(e,t)},t}(zt.b),Wt=n(192),Jt=n(42),Yt=n(22),Zt=n(45),Qt=n(14),Xt=n(18),en=n(43),tn=n(44),nn=n(16),rn=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),on=new Set(["cn-north-1","cn-northwest-1"]),sn=new Set(["us-iso-east-1"]),an=new Set(["us-isob-east-1"]),un=new Set(["us-gov-east-1","us-gov-west-1"]),cn={apiVersion:"2014-03-28",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,t){var n=void 0;switch(e){case"af-south-1":n={hostname:"logs.af-south-1.amazonaws.com",partition:"aws"};break;case"ap-east-1":n={hostname:"logs.ap-east-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-1":n={hostname:"logs.ap-northeast-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-2":n={hostname:"logs.ap-northeast-2.amazonaws.com",partition:"aws"};break;case"ap-south-1":n={hostname:"logs.ap-south-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-1":n={hostname:"logs.ap-southeast-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-2":n={hostname:"logs.ap-southeast-2.amazonaws.com",partition:"aws"};break;case"ca-central-1":n={hostname:"logs.ca-central-1.amazonaws.com",partition:"aws"};break;case"cn-north-1":n={hostname:"logs.cn-north-1.amazonaws.com.cn",partition:"aws-cn"};break;case"cn-northwest-1":n={hostname:"logs.cn-northwest-1.amazonaws.com.cn",partition:"aws-cn"};break;case"eu-central-1":n={hostname:"logs.eu-central-1.amazonaws.com",partition:"aws"};break;case"eu-north-1":n={hostname:"logs.eu-north-1.amazonaws.com",partition:"aws"};break;case"eu-south-1":n={hostname:"logs.eu-south-1.amazonaws.com",partition:"aws"};break;case"eu-west-1":n={hostname:"logs.eu-west-1.amazonaws.com",partition:"aws"};break;case"eu-west-2":n={hostname:"logs.eu-west-2.amazonaws.com",partition:"aws"};break;case"eu-west-3":n={hostname:"logs.eu-west-3.amazonaws.com",partition:"aws"};break;case"fips-us-east-1":n={hostname:"logs-fips.us-east-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"fips-us-east-2":n={hostname:"logs-fips.us-east-2.amazonaws.com",partition:"aws",signingRegion:"us-east-2"};break;case"fips-us-west-1":n={hostname:"logs-fips.us-west-1.amazonaws.com",partition:"aws",signingRegion:"us-west-1"};break;case"fips-us-west-2":n={hostname:"logs-fips.us-west-2.amazonaws.com",partition:"aws",signingRegion:"us-west-2"};break;case"me-south-1":n={hostname:"logs.me-south-1.amazonaws.com",partition:"aws"};break;case"sa-east-1":n={hostname:"logs.sa-east-1.amazonaws.com",partition:"aws"};break;case"us-east-1":n={hostname:"logs.us-east-1.amazonaws.com",partition:"aws"};break;case"us-east-2":n={hostname:"logs.us-east-2.amazonaws.com",partition:"aws"};break;case"us-gov-east-1":n={hostname:"logs.us-gov-east-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-east-1"};break;case"us-gov-west-1":n={hostname:"logs.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"us-iso-east-1":n={hostname:"logs.us-iso-east-1.c2s.ic.gov",partition:"aws-iso"};break;case"us-isob-east-1":n={hostname:"logs.us-isob-east-1.sc2s.sgov.gov",partition:"aws-iso-b"};break;case"us-west-1":n={hostname:"logs.us-west-1.amazonaws.com",partition:"aws"};break;case"us-west-2":n={hostname:"logs.us-west-2.amazonaws.com",partition:"aws"};break;default:rn.has(e)&&(n={hostname:"logs.{region}.amazonaws.com".replace("{region}",e),partition:"aws"}),on.has(e)&&(n={hostname:"logs.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),sn.has(e)&&(n={hostname:"logs.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),an.has(e)&&(n={hostname:"logs.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),un.has(e)&&(n={hostname:"logs.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}),void 0===n&&(n={hostname:"logs.{region}.amazonaws.com".replace("{region}",e),partition:"aws"})}return Promise.resolve(tt({signingService:"logs"},n))},serviceId:"CloudWatch Logs",urlParser:n(47).a},ln=tt(tt({},cn),{runtime:"browser",base64Decoder:Xt.a,base64Encoder:Xt.b,bodyLengthChecker:en.a,credentialDefaultProvider:function(e){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:Object(tn.a)({serviceId:cn.serviceId,clientVersion:Wt.version}),maxAttempts:Qt.a,region:Object(Zt.a)("Region is missing"),requestHandler:new Yt.a,sha256:Jt.Sha256,streamCollector:Yt.b,utf8Decoder:nn.a,utf8Encoder:nn.b}),dn=n(24),fn=n(41),pn=n(21),hn=n(46),vn=n(27),gn=n(23),mn=function(e){function t(t){var n=this,r=tt(tt({},ln),t),i=Object(dn.b)(r),o=Object(dn.a)(i),s=Object(vn.b)(o),a=Object(Qt.c)(s),u=Object(pn.b)(a),c=Object(gn.b)(u);return(n=e.call(this,c)||this).config=c,n.middlewareStack.use(Object(vn.a)(n.config)),n.middlewareStack.use(Object(Qt.b)(n.config)),n.middlewareStack.use(Object(fn.a)(n.config)),n.middlewareStack.use(Object(pn.a)(n.config)),n.middlewareStack.use(Object(hn.a)(n.config)),n.middlewareStack.use(Object(gn.a)(n.config)),n}return i(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(zt.a),yn=n(80),bn=n(48),wn=n(49),_n=n(92),Sn=n(35),En=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},Cn=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},An=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},On=new bn.a("AWSCloudWatch"),In=function(){function e(e){this.configure(e),this._dataTracker={eventUploadInProgress:!1,logEvents:[]},this._currentLogBatch=[],this._initiateLogPushInterval()}return e.prototype.getProviderName=function(){return e.PROVIDER_NAME},e.prototype.getCategoryName=function(){return e.CATEGORY},e.prototype.getLogQueue=function(){return this._dataTracker.logEvents},e.prototype.configure=function(e){if(!e)return this._config||{};var t=Object.assign({},this._config,Object(_n.b)(e).Logging,e);return this._config=t,this._config},e.prototype.createLogGroup=function(e){return En(this,void 0,void 0,(function(){var t,n;return Cn(this,(function(r){switch(r.label){case 0:On.debug("creating new log group in CloudWatch - ",e.logGroupName),t=new qt(e),r.label=1;case 1:return r.trys.push([1,4,,5]),[4,this._ensureCredentials()];case 2:if(!r.sent())throw new Error(Sn.f);return[4,this._initCloudWatchLogs().send(t)];case 3:return[2,r.sent()];case 4:throw n=r.sent(),On.error("error creating log group - "+n),n;case 5:return[2]}}))}))},e.prototype.getLogGroups=function(e){return En(this,void 0,void 0,(function(){var t,n;return Cn(this,(function(r){switch(r.label){case 0:On.debug("getting list of log groups"),t=new $t(e),r.label=1;case 1:return r.trys.push([1,4,,5]),[4,this._ensureCredentials()];case 2:if(!r.sent())throw new Error(Sn.f);return[4,this._initCloudWatchLogs().send(t)];case 3:return[2,r.sent()];case 4:throw n=r.sent(),On.error("error getting log group - "+n),n;case 5:return[2]}}))}))},e.prototype.createLogStream=function(e){return En(this,void 0,void 0,(function(){var t,n;return Cn(this,(function(r){switch(r.label){case 0:On.debug("creating new log stream in CloudWatch - ",e.logStreamName),t=new Kt(e),r.label=1;case 1:return r.trys.push([1,4,,5]),[4,this._ensureCredentials()];case 2:if(!r.sent())throw new Error(Sn.f);return[4,this._initCloudWatchLogs().send(t)];case 3:return[2,r.sent()];case 4:throw n=r.sent(),On.error("error creating log stream - "+n),n;case 5:return[2]}}))}))},e.prototype.getLogStreams=function(e){return En(this,void 0,void 0,(function(){var t,n;return Cn(this,(function(r){switch(r.label){case 0:On.debug("getting list of log streams"),t=new Vt(e),r.label=1;case 1:return r.trys.push([1,4,,5]),[4,this._ensureCredentials()];case 2:if(!r.sent())throw new Error(Sn.f);return[4,this._initCloudWatchLogs().send(t)];case 3:return[2,r.sent()];case 4:throw n=r.sent(),On.error("error getting log stream - "+n),n;case 5:return[2]}}))}))},e.prototype.getLogEvents=function(e){return En(this,void 0,void 0,(function(){var t,n;return Cn(this,(function(r){switch(r.label){case 0:On.debug("getting log events from stream - ",e.logStreamName),t=new Gt(e),r.label=1;case 1:return r.trys.push([1,4,,5]),[4,this._ensureCredentials()];case 2:if(!r.sent())throw new Error(Sn.f);return[4,this._initCloudWatchLogs().send(t)];case 3:return[2,r.sent()];case 4:throw n=r.sent(),On.error("error getting log events - "+n),n;case 5:return[2]}}))}))},e.prototype.pushLogs=function(e){On.debug("pushing log events to Cloudwatch..."),this._dataTracker.logEvents=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(An(arguments[t]));return e}(this._dataTracker.logEvents,e)},e.prototype._validateLogGroupExistsAndCreate=function(e){return En(this,void 0,void 0,(function(){var t,n,r,i;return Cn(this,(function(o){switch(o.label){case 0:if(this._dataTracker.verifiedLogGroup)return[2,this._dataTracker.verifiedLogGroup];o.label=1;case 1:return o.trys.push([1,5,,6]),[4,this._ensureCredentials()];case 2:if(!o.sent())throw new Error(Sn.f);return[4,this.getLogGroups({logGroupNamePrefix:e})];case 3:return"string"!=typeof(t=o.sent())&&t.logGroups&&(n=t.logGroups.filter((function(t){return t.logGroupName===e}))).length>0?(this._dataTracker.verifiedLogGroup=n[0],[2,n[0]]):[4,this.createLogGroup({logGroupName:e})];case 4:return o.sent(),[2,null];case 5:throw r=o.sent(),i="failure during log group search: "+r,On.error(i),r;case 6:return[2]}}))}))},e.prototype._validateLogStreamExists=function(e,t){return En(this,void 0,void 0,(function(){var n,r,i,o;return Cn(this,(function(s){switch(s.label){case 0:return s.trys.push([0,4,,5]),[4,this._ensureCredentials()];case 1:if(!s.sent())throw new Error(Sn.f);return[4,this.getLogStreams({logGroupName:e,logStreamNamePrefix:t})];case 2:return(n=s.sent()).logStreams&&(r=n.logStreams.filter((function(e){return e.logStreamName===t}))).length>0?(this._nextSequenceToken=r[0].uploadSequenceToken,[2,r[0]]):[4,this.createLogStream({logGroupName:e,logStreamName:t})];case 3:return s.sent(),[2,null];case 4:throw i=s.sent(),o="failure during log stream search: "+i,On.error(o),i;case 5:return[2]}}))}))},e.prototype._sendLogEvents=function(e){return En(this,void 0,void 0,(function(){var t,n,r;return Cn(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),[4,this._ensureCredentials()];case 1:if(!i.sent())throw new Error(Sn.f);return On.debug("sending log events to stream - ",e.logStreamName),t=new Ht(e),[4,this._initCloudWatchLogs().send(t)];case 2:return[2,i.sent()];case 3:return n=i.sent(),r="failure during log push: "+n,On.error(r),[3,4];case 4:return[2]}}))}))},e.prototype._initCloudWatchLogs=function(){return new mn({region:this._config.region,credentials:this._config.credentials,customUserAgent:Object(wn.b)(),endpoint:this._config.endpoint})},e.prototype._ensureCredentials=function(){return En(this,void 0,void 0,(function(){var e=this;return Cn(this,(function(t){switch(t.label){case 0:return[4,yn.a.get().then((function(t){if(!t)return!1;var n=yn.a.shear(t);return On.debug("set credentials for logging",n),e._config.credentials=n,!0})).catch((function(e){return On.warn("ensure credentials error",e),!1}))];case 1:return[2,t.sent()]}}))}))},e.prototype._getNextSequenceToken=function(){return En(this,void 0,void 0,(function(){var e,t;return Cn(this,(function(n){switch(n.label){case 0:if(this._nextSequenceToken&&this._nextSequenceToken.length>0)return[2,this._nextSequenceToken];n.label=1;case 1:return n.trys.push([1,4,,5]),[4,this._validateLogGroupExistsAndCreate(this._config.logGroupName)];case 2:return n.sent(),this._nextSequenceToken=void 0,[4,this._validateLogStreamExists(this._config.logGroupName,this._config.logStreamName)];case 3:return(e=n.sent())&&(this._nextSequenceToken=e.uploadSequenceToken),[2,this._nextSequenceToken];case 4:throw t=n.sent(),On.error("failure while getting next sequence token: "+t),t;case 5:return[2]}}))}))},e.prototype._safeUploadLogEvents=function(){return En(this,void 0,void 0,(function(){var e,t,n,r,i;return Cn(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,this._getNextSequenceToken()];case 1:return e=o.sent(),t=0===this._currentLogBatch.length?this._getBufferedBatchOfLogs():this._currentLogBatch,n={logGroupName:this._config.logGroupName,logStreamName:this._config.logStreamName,logEvents:t,sequenceToken:e},this._dataTracker.eventUploadInProgress=!0,[4,this._sendLogEvents(n)];case 2:return r=o.sent(),this._nextSequenceToken=r.nextSequenceToken,this._dataTracker.eventUploadInProgress=!1,this._currentLogBatch=[],[2,r];case 3:if(i=o.sent(),On.error("error during _safeUploadLogEvents: "+i),!Sn.g.includes(i.name))throw this._dataTracker.eventUploadInProgress=!1,i;return this._getNewSequenceTokenAndSubmit({logEvents:this._currentLogBatch,logGroupName:this._config.logGroupName,logStreamName:this._config.logStreamName}),[3,4];case 4:return[2]}}))}))},e.prototype._getBufferedBatchOfLogs=function(){for(var e=0,t=0;e<this._dataTracker.logEvents.length;){var n=this._dataTracker.logEvents[e],r=n?(new TextEncoder).encode(n.message).length+Sn.a:0;if(r>Sn.d){var i="Log entry exceeds maximum size for CloudWatch logs. Log size: "+r+". Truncating log message.";On.warn(i),n.message=n.message.substring(0,r)}if(t+r>Sn.c)break;t+=r,e++}return this._currentLogBatch=this._dataTracker.logEvents.splice(0,e),this._currentLogBatch},e.prototype._getNewSequenceTokenAndSubmit=function(e){return En(this,void 0,void 0,(function(){var t,n,r;return Cn(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),this._nextSequenceToken=void 0,this._dataTracker.eventUploadInProgress=!0,[4,this._getNextSequenceToken()];case 1:return t=i.sent(),e.sequenceToken=t,[4,this._sendLogEvents(e)];case 2:return n=i.sent(),this._dataTracker.eventUploadInProgress=!1,this._currentLogBatch=[],[2,n];case 3:throw r=i.sent(),On.error("error when retrying log submission with new sequence token: "+r),this._dataTracker.eventUploadInProgress=!1,r;case 4:return[2]}}))}))},e.prototype._initiateLogPushInterval=function(){var e=this;this._timer&&clearInterval(this._timer),this._timer=setInterval((function(){return En(e,void 0,void 0,(function(){var e;return Cn(this,(function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),this._getDocUploadPermissibility()?[4,this._safeUploadLogEvents()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[3,4];case 3:return e=t.sent(),On.error("error when calling _safeUploadLogEvents in the timer interval - "+e),[3,4];case 4:return[2]}}))}))}),2e3)},e.prototype._getDocUploadPermissibility=function(){return(0!==this._dataTracker.logEvents.length||0!==this._currentLogBatch.length)&&!this._dataTracker.eventUploadInProgress},e.PROVIDER_NAME=Sn.e,e.CATEGORY=Sn.b,e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return ge}));var r=n(48),i=n(34),o=n(49),s=n(80),a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var c,l,d,f,p,h,v,g,m=function(){return(m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function y(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function b(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}Object.create,Object.create,(c||(c={})).filterSensitiveLog=function(e){return m({},e)},(l||(l={})).filterSensitiveLog=function(e){return m({},e)},(d||(d={})).filterSensitiveLog=function(e){return m({},e)},(f||(f={})).filterSensitiveLog=function(e){return m({},e)},(p||(p={})).filterSensitiveLog=function(e){return m({},e)},(h||(h={})).filterSensitiveLog=function(e){return m({},e)},(v||(v={})).filterSensitiveLog=function(e){return m({},e)},(g||(g={})).filterSensitiveLog=function(e){return m({},e)};var w,_,S,E=n(3),C=n(1),A=function(e,t){return y(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return b(this,(function(l){switch(l.label){case 0:return r=[m({},e)],c={},[4,k(e.body,t)];case 1:switch(n=m.apply(void 0,r.concat([(c.body=l.sent(),c)])),o="UnknownError",o=D(e,n.body)){case"InvalidInputException":case"com.amazonaws.personalizeevents#InvalidInputException":return[3,2]}return[3,4];case 2:return s=[{}],[4,O(n,t)];case 3:return i=m.apply(void 0,[m.apply(void 0,s.concat([l.sent()])),{name:o,$metadata:x(e)}]),[3,5];case 4:a=n.body,o=a.code||a.Code||o,i=m(m({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:x(e)}),l.label=5;case 5:return u=i.message||i.Message||o,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}}))}))},O=function(e,t){return y(void 0,void 0,void 0,(function(){var t,n;return b(this,(function(r){return t={name:"InvalidInputException",$fault:"client",$metadata:x(e),message:void 0},void 0!==(n=e.body).message&&null!==n.message&&(t.message=n.message),[2,t]}))}))},I=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){return m(m(m(m(m(m(m(m({},void 0!==e.eventId&&null!==e.eventId&&{eventId:e.eventId}),void 0!==e.eventType&&null!==e.eventType&&{eventType:e.eventType}),void 0!==e.eventValue&&null!==e.eventValue&&{eventValue:e.eventValue}),void 0!==e.impression&&null!==e.impression&&{impression:T(e.impression,t)}),void 0!==e.itemId&&null!==e.itemId&&{itemId:e.itemId}),void 0!==e.properties&&null!==e.properties&&{properties:C.c.fromObject(e.properties)}),void 0!==e.recommendationId&&null!==e.recommendationId&&{recommendationId:e.recommendationId}),void 0!==e.sentAt&&null!==e.sentAt&&{sentAt:Math.round(e.sentAt.getTime()/1e3)})}(e,t)}))},T=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:e}))},x=function(e){var t;return{httpStatusCode:e.statusCode,requestId:null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},P=function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)},k=function(e,t){return function(e,t){return P(e,t).then((function(e){return t.utf8Encoder(e)}))}(e,t).then((function(e){return e.length?JSON.parse(e):{}}))},D=function(e,t){var n,r=function(e){var t=e;return t.indexOf(":")>=0&&(t=t.split(":")[0]),t.indexOf("#")>=0&&(t=t.split("#")[1]),t},i=(n=e.headers,"x-amzn-errortype",Object.keys(n).find((function(e){return e.toLowerCase()==="x-amzn-errortype".toLowerCase()})));return void 0!==i?r(e.headers[i]):void 0!==t.code?r(t.code):void 0!==t.__type?r(t.__type):""},N=n(10),L=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return u(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(N.a)(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"PersonalizeEventsClient",commandName:"PutEventsCommand",inputFilterSensitiveLog:d.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return y(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return b(this,(function(l){switch(l.label){case 0:return n={"content-type":"application/json"},r="/events",i=JSON.stringify(m(m(m(m({},void 0!==e.eventList&&null!==e.eventList&&{eventList:I(e.eventList,t)}),void 0!==e.sessionId&&null!==e.sessionId&&{sessionId:e.sessionId}),void 0!==e.trackingId&&null!==e.trackingId&&{trackingId:e.trackingId}),void 0!==e.userId&&null!==e.userId&&{userId:e.userId})),[4,t.endpoint()];case 1:return o=l.sent(),s=o.hostname,a=o.protocol,u=void 0===a?"https":a,c=o.port,[2,new E.a({protocol:u,hostname:s,port:c,method:"POST",headers:n,path:r,body:i})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return y(void 0,void 0,void 0,(function(){var n;return b(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,A(e,t)]:(n={$metadata:x(e)},[4,P(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(C.b),M=n(183),j=n(42),R=n(22),U=n(45),B=n(14),F=n(18),z=n(43),q=n(44),$=n(16),K="personalize-events.{region}.amazonaws.com",V=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),G=new Set(["cn-north-1","cn-northwest-1"]),H=new Set(["us-iso-east-1"]),W=new Set(["us-isob-east-1"]),J=new Set(["us-gov-east-1","us-gov-west-1"]),Y={apiVersion:"2018-03-22",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,t){var n=void 0;return V.has(e)&&(n={hostname:K.replace("{region}",e),partition:"aws"}),G.has(e)&&(n={hostname:"personalize-events.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),H.has(e)&&(n={hostname:"personalize-events.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),W.has(e)&&(n={hostname:"personalize-events.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),J.has(e)&&(n={hostname:"personalize-events.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}),void 0===n&&(n={hostname:K.replace("{region}",e),partition:"aws"}),Promise.resolve(m({signingService:"personalize"},n))},serviceId:"Personalize Events",urlParser:n(47).a},Z=m(m({},Y),{runtime:"browser",base64Decoder:F.a,base64Encoder:F.b,bodyLengthChecker:z.a,credentialDefaultProvider:function(e){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:Object(q.a)({serviceId:Y.serviceId,clientVersion:M.version}),maxAttempts:B.a,region:Object(U.a)("Region is missing"),requestHandler:new R.a,sha256:j.Sha256,streamCollector:R.b,utf8Decoder:$.a,utf8Encoder:$.b}),Q=n(24),X=n(41),ee=n(21),te=n(46),ne=n(27),re=n(23),ie=function(e){function t(t){var n=this,r=m(m({},Z),t),i=Object(Q.b)(r),o=Object(Q.a)(i),s=Object(ne.b)(o),a=Object(B.c)(s),u=Object(ee.b)(a),c=Object(re.b)(u);return(n=e.call(this,c)||this).config=c,n.middlewareStack.use(Object(ne.a)(n.config)),n.middlewareStack.use(Object(B.b)(n.config)),n.middlewareStack.use(Object(X.a)(n.config)),n.middlewareStack.use(Object(ee.a)(n.config)),n.middlewareStack.use(Object(te.a)(n.config)),n.middlewareStack.use(Object(re.a)(n.config)),n}return u(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(C.a),oe=n(39),se=n.n(oe),ae=n(94),ue=n.n(ae),ce=n(30),le=n(26),de=(new r.a("AmazonPersonalizeProvider"),function(){function e(e){void 0===e&&(e=""),this._isBrowser=i.a.browserOrNode().isBrowser,this._timerKey=Object(ce.v1)().substr(0,15),this._refreshTimer()}return e.prototype._refreshTimer=function(){this._timer&&clearInterval(this._timer);var e=this;this._timer=setInterval((function(){e._timerKey=Object(ce.v1)().substr(0,15)}),3e4)},e.prototype.storeValue=function(e,t){var n=new Date,r=new Date;r.setTime(n.getTime()+6048e5),le.b.setItem(this._getCachePrefix(e),t,{expires:r.getTime()})},e.prototype.retrieveValue=function(e){return le.b.getItem(this._getCachePrefix(e))},e.prototype._getCachePrefix=function(e){return this._isBrowser?e+"."+window.location.host:"peronslize"},e.prototype.getTimerKey=function(){return this._timerKey},e.prototype.updateSessionInfo=function(e,t){var n=t.userId,r=t.sessionId;if(this._isRequireNewSession(e,n,r)){var i=Object(ce.v1)();this.storeValue("_awsct_uid",e),this.storeValue("_awsct_sid",i),t.sessionId=i}else this._isRequireUpdateSessionInfo(e,n,r)&&this.storeValue("_awsct_uid",e);t.userId=e},e.prototype._isRequireUpdateSessionInfo=function(e,t,n){return!se()(n)&&se()(t)&&!se()(e)},e.prototype.retrieveSessionInfo=function(e){var t={};return t.trackingId=e,t.sessionId=this.retrieveValue("_awsct_sid"),t.userId=this.retrieveValue("_awsct_uid"),se()(t.sessionId)&&(t.sessionId=Object(ce.v1)(),this.storeValue("_awsct_sid",t.sessionId)),this.storeValue("_awsct",e),t},e.prototype._isRequireNewSession=function(e,t,n){var r=se()(n),i=se()(e)&&!se()(t),o=!se()(e)&&!se()(t)&&!ue()(e,t);return r||i||o},e}());!function(e){e.PLAY="play",e.PAUSE="pause",e.ENDED="Ended"}(w||(w={})),function(e){e.IFRAME="IFRAME",e.VIDEO="VIDEO",e.AUDIO="AUDIO"}(_||(_={})),function(e){e.PLAY="Play",e.ENDED="Ended",e.PAUSE="Pause",e.TIME_WATCHED="TimeWatched"}(S||(S={}));var fe=function(){function e(e,t){var n;this.eventActionMapping=((n={})[S.ENDED]=this.endedEventAction.bind(this),n[S.PLAY]=this.playEventAction.bind(this),n[S.PAUSE]=this.pauseEventAction.bind(this),n);var r=e.eventData;this._params=e,this._mediaElement=document.getElementById(r.properties.domElementId),this._started=!1,this._provider=t,{IFRAME:this._iframeMediaTracker,VIDEO:this._html5MediaTracker,AUDIO:this._html5MediaTracker}[this._mediaElement.tagName].bind(this)(),this._initYoutubeFrame()}return e.prototype._initYoutubeFrame=function(){this._youTubeIframeLoader={src:"https://www.youtube.com/iframe_api",loading:!1,loaded:!1,listeners:[],load:function(e){var t=this;if(this.listeners.push(e),this.loaded)setTimeout((function(){t.done()}));else if(!this.loading){this.loading=!0,window.onYouTubeIframeAPIReady=function(){t.loaded=!0,t.done()};var n=document.createElement("script");n.type="text/javascript",n.src=this.src,document.body.appendChild(n)}},done:function(){for(delete window.onYouTubeIframeAPIReady;this.listeners.length;)this.listeners.pop()(window.YT)}}},e.prototype._iframeMediaTracker=function(){var e=this;setInterval((function(){e._started&&e.recordEvent(_.IFRAME,S.TIME_WATCHED)}),3e3),this._youTubeIframeLoader.load((function(t){e._iframePlayer=new t.Player(e._mediaElement.id,{events:{onStateChange:e._onPlayerStateChange.bind(e)}})}))},e.prototype._onPlayerStateChange=function(e){var t={0:S.ENDED,1:S.PLAY,2:S.PAUSE}[e.data];t&&this.eventActionMapping[t](_.IFRAME)},e.prototype._html5MediaTracker=function(){var e=this;setInterval((function(){e._started&&e.recordEvent(_.VIDEO,S.TIME_WATCHED)}),3e3),this._mediaElement.addEventListener(w.PLAY,(function(){e.eventActionMapping[S.PLAY](_.VIDEO)}),!1),this._mediaElement.addEventListener(w.PAUSE,(function(){e.eventActionMapping[S.PAUSE](_.VIDEO)}),!1),this._mediaElement.addEventListener(w.ENDED,(function(){e.eventActionMapping[S.ENDED](_.VIDEO)}),!1)},e.prototype.playEventAction=function(e){this._started=!0,this.recordEvent(e,S.PLAY)},e.prototype.pauseEventAction=function(e){this._started=!1,this.recordEvent(e,S.PAUSE)},e.prototype.endedEventAction=function(e){this._started=!1,this.recordEvent(e,S.ENDED)},e.prototype.recordEvent=function(e,t){var n=Object.assign({},this._params),r=n.eventData;r.eventType=t,e===_.VIDEO?(r.properties.timestamp=this._mediaElement.currentTime,r.properties.duration=this._mediaElement.duration):(r.properties.timestamp=this._financial(this._iframePlayer.getCurrentTime()),r.properties.duration=this._financial(this._iframePlayer.getDuration()));var i=parseFloat(r.properties.timestamp)/parseFloat(r.properties.duration);r.properties.eventValue=Number(i.toFixed(4)),delete r.properties.domElementId,this._provider.putToBuffer(n)},e.prototype._financial=function(e){return Number.parseFloat(e).toFixed(4)},e}(),pe=n(182),he=n.n(pe),ve=new r.a("AmazonPersonalizeProvider"),ge=function(){function e(e){this._buffer=[],this._config=e||{},this._config.flushSize=this._config.flushSize>0&&this._config.flushSize<=10?this._config.flushSize:5,this._config.flushInterval=this._config.flushInterval||5e3,this._sessionManager=new de,se()(this._config.trackingId)||(this._sessionInfo=this._sessionManager.retrieveSessionInfo(this._config.trackingId)),this._isBrowser=i.a.browserOrNode().isBrowser,this._setupTimer()}return e.prototype._setupTimer=function(){this._timer&&clearInterval(this._timer);var e=this._config.flushInterval,t=this;this._timer=setInterval((function(){t._sendFromBuffer()}),e)},e.prototype.record=function(e){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){var t,n,r,i,o;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(s){switch(s.label){case 0:return[4,this._getCredentials()];case 1:return(t=s.sent())?(Object.assign(e,{config:this._config,credentials:t,sentAt:new Date}),n=e.event,r=n.eventType,i=n.properties,"Identify"===r?(this._sessionManager.updateSessionInfo(i&&i.userId?i.userId:"",this._sessionInfo),[2]):(se()(e.event.userId)||this._sessionManager.updateSessionInfo(e.event.userId,this._sessionInfo),o=this.generateRequestParams(e,this._sessionInfo),"MediaAutoTrack"!==r?[3,7]:this._isBrowser?se()(he()(o,"eventData.properties.domElementId",null))?[3,3]:[4,this.isElementFullyLoaded(this.loadElement,o.eventData.properties.domElementId,500,5)]:[3,5])):[2,Promise.resolve(!1)];case 2:return s.sent()?new fe(o,this):ve.debug("Cannot find the media element."),[3,4];case 3:ve.debug("Missing domElementId field in 'properties' for MediaAutoTrack event type."),s.label=4;case 4:return[3,6];case 5:ve.debug("MediaAutoTrack only for browser"),s.label=6;case 6:return[2];case 7:return[2,this.putToBuffer(o)]}}))}))},e.prototype.loadElement=function(e){return new Promise((function(t,n){return document.getElementById(e)&&document.getElementById(e).clientHeight?t(!0):n(!0)}))},e.prototype.isElementFullyLoaded=function(e,t,n,r){var i=this;return new Promise((function(o,s){return e(t).then(o).catch((function(a){return r-1>0?(u=n,new Promise((function(e){return setTimeout(e,u)}))).then(i.isElementFullyLoaded.bind(null,e,t,n,r-1)).then(o).catch(s):s(a);var u}))}))},e.prototype.getCategory=function(){return"Analytics"},e.prototype.getProviderName=function(){return"AmazonPersonalize"},e.prototype.configure=function(e){ve.debug("configure Analytics",e);var t=e||{};return this._config=Object.assign({},this._config,t),se()(this._config.trackingId)||(this._sessionInfo=this._sessionManager.retrieveSessionInfo(this._config.trackingId)),this._setupTimer(),this._config},e.prototype.generateRequestParams=function(e,t){var n={},r=e.event,i=r.eventType,o=r.properties;return n.eventData={eventType:i,properties:o},n.sessionInfo=t,n.sentAt=e.sentAt,n.credentials=e.credentials,n.config=e.config,n},e.prototype._sendEvents=function(e){var t=e.length;if(0!==t){var n=e[0],r=n.config,i=n.credentials,o=n.sessionInfo;if(!this._init(r,i))return!1;if(t>0){for(var s=[],a=0;a<t;a+=1){var u=e.shift(),c=this._generateSingleRecordPayload(u,o);s.push(c)}var l={};l.trackingId=o.trackingId,l.sessionId=o.sessionId,l.userId=o.userId,l.eventList=[],s.forEach((function(e){l.eventList.push(e)}));var d=new L(l);this._personalize.send(d,(function(e){e?ve.debug("Failed to call putEvents in Personalize",e):ve.debug("Put events")}))}}else ve.debug("events array is empty, directly return")},e.prototype.putToBuffer=function(e){return this._buffer.length<this._config.flushSize?this._buffer.push(e):(this._buffer.push(e),this._sendFromBuffer()),Promise.resolve(!0)},e.prototype._sendFromBuffer=function(){var e=this,t=this._buffer.length;if(!(t<=0)){for(var n=[],r=null,i=[],o=0;o<t;o+=1){var s=this._buffer.shift(),a=s.credentials,u=s.sessionInfo;0===o?(i.push(s),r=a):ue()(u,this._sessionInfo)&&a.sessionToken===r.sessionToken&&a.identityId===r.identityId?(ve.debug("no change for cred, put event in the same group"),i.push(s)):(n.push(i),(i=[]).push(s),r=a,this._sessionInfo=u)}n.push(i),n.map((function(t){e._sendEvents(t)}))}},e.prototype._generateSingleRecordPayload=function(e,t){var n=e.eventData,r=e.sentAt,i={};return i.sentAt=r,i.properties=n.properties&&JSON.stringify(n.properties),i.eventId=this._sessionManager.getTimerKey()+t.sessionId,i.eventType=n.eventType,i},e.prototype._init=function(e,t){if(ve.debug("init clients"),this._personalize&&this._config.credentials&&this._config.credentials.sessionToken===t.sessionToken&&this._config.credentials.identityId===t.identityId)return ve.debug("no change for analytics config, directly return from init"),!0;this._config.credentials=t;var n=e.region;return ve.debug("initialize personalize with credentials",t),this._personalize=new ie({region:n,credentials:t,customUserAgent:Object(o.b)()}),!0},e.prototype._getCredentials=function(){var e=this;return s.a.get().then((function(t){return t?(ve.debug("set credentials for analytics",e._config.credentials),s.a.shear(t)):null})).catch((function(e){return ve.debug("ensure credentials error",e),null}))},e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return J}));var r=n(48),i=n(78),o=n(92),s=n(20),a=n(117),u=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},c=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(u(arguments[t]));return e},l=[],d=function(){function e(e,t){this.context=e,this.methodName=t,this._originalMethod=e[t].bind(e)}return e.add=function(e,t,n){f(e,t).set(n)},e.remove=function(e,t){f(e,t).remove()},e.prototype.set=function(e){var t=this;this.context[this.methodName]=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e(t._originalMethod.apply(t,c(n)))}},e.prototype.remove=function(){this.context[this.methodName]=this._originalMethod},e}();function f(e,t){var n=l.filter((function(n){return n.context===e&&n.methodName===t}))[0];return n||(n=new d(e,t),l.push(n)),n}var p=n(34),h=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},v=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},g=new r.a("PageViewTracker"),m="aws-amplify-analytics-prevUrl",y={enable:!1,provider:"AWSPinpoint",getUrl:function(){return p.a.browserOrNode().isBrowser?window.location.origin+window.location.pathname:""}},b=function(){function e(e,t){g.debug("initialize pageview tracker with opts",t),this._config=Object.assign({},y,t),this._tracker=e,this._hasEnabled=!1,this._trackFunc=this._trackFunc.bind(this),"SPA"===this._config.type?this._pageViewTrackSPA():this._pageViewTrackDefault()}return e.prototype.configure=function(e){return Object.assign(this._config,e),"SPA"===this._config.type&&this._pageViewTrackSPA(),this._config},e.prototype._isSameUrl=function(){return sessionStorage.getItem(m)===this._config.getUrl()&&(g.debug("the url is same"),!0)},e.prototype._pageViewTrackDefault=function(){return h(this,void 0,void 0,(function(){var e,t,n,r;return v(this,(function(i){switch(i.label){case 0:return p.a.browserOrNode().isBrowser&&window.addEventListener&&window.sessionStorage?(e=this._config.getUrl(),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]):(g.debug("not in the supported web enviroment"),[2]);case 1:return n=i.sent(),[3,3];case 2:n=this._config.attributes,i.label=3;case 3:return t=n,r=Object.assign({url:e},t),this._config.enable&&!this._isSameUrl()&&(this._tracker({name:this._config.eventName||"pageView",attributes:r},this._config.provider).catch((function(e){g.debug("Failed to record the page view event",e)})),sessionStorage.setItem(m,e)),[2]}}))}))},e.prototype._trackFunc=function(){return h(this,void 0,void 0,(function(){var e,t,n,r;return v(this,(function(i){switch(i.label){case 0:return p.a.browserOrNode().isBrowser&&window.addEventListener&&history.pushState&&window.sessionStorage?(e=this._config.getUrl(),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]):(g.debug("not in the supported web enviroment"),[2]);case 1:return n=i.sent(),[3,3];case 2:n=this._config.attributes,i.label=3;case 3:return t=n,r=Object.assign({url:e},t),this._isSameUrl()||(this._tracker({name:this._config.eventName||"pageView",attributes:r},this._config.provider).catch((function(e){g.debug("Failed to record the page view event",e)})),sessionStorage.setItem(m,e)),[2]}}))}))},e.prototype._pageViewTrackSPA=function(){p.a.browserOrNode().isBrowser&&window.addEventListener&&history.pushState?this._config.enable&&!this._hasEnabled?(d.add(history,"pushState",this._trackFunc),d.add(history,"replaceState",this._trackFunc),window.addEventListener("popstate",this._trackFunc),this._trackFunc(),this._hasEnabled=!0):(d.remove(history,"pushState"),d.remove(history,"replaceState"),window.removeEventListener("popstate",this._trackFunc),this._hasEnabled=!1):g.debug("not in the supported web enviroment")},e}(),w=p.a.browserOrNode().isBrowser&&window.Element?window.Element.prototype:null,_=w?w.matches||w.matchesSelector||w.webkitMatchesSelector||w.mozMatchesSelector||w.msMatchesSelector||w.oMatchesSelector:null;function S(e,t){if(e&&1===e.nodeType&&t){if("string"==typeof t||1===t.nodeType)return e===t||E(e,t);if("length"in t)for(var n=0,r=void 0;r=t[n];n++)if(e===r||E(e,r))return!0}return!1}function E(e,t){if("string"!=typeof t)return!1;if(_)return _.call(e,t);for(var n=e.parentNode.querySelectorAll(t),r=0,i=void 0;i=n[r];r++)if(i===e)return!0;return!1}var C=new r.a("EventTracker"),A={enable:!1,events:["click"],selectorPrefix:"data-amplify-analytics-",provider:"AWSPinpoint"},O=function(){function e(e,t){p.a.browserOrNode().isBrowser&&window.addEventListener?(this._config=Object.assign({},A,t),this._tracker=e,this._delegates={},this._trackFunc=this._trackFunc.bind(this),C.debug("initialize pageview tracker with opts",this._config),this.configure(this._config)):C.debug("not in the supported web environment")}return e.prototype.configure=function(e){var t=this;if(Object.assign(this._config,e),this._config.enable){if(this._config.enable&&0===Object.keys(this._delegates).length){var n="["+this._config.selectorPrefix+"on]";this._config.events.forEach((function(e){t._delegates[e]=function(e,t,n,r,i){void 0===i&&(i={});var o=function(e){var t;if(i.composed&&"function"==typeof e.composedPath)for(var o=e.composedPath(),s=0,a=void 0;a=o[s];s++)1===a.nodeType&&S(a,n)&&(t=a);else t=function(e,t,n){if(void 0===n&&(n=!1),e&&1===e.nodeType&&t)for(var r,i=(n?[e]:[]).concat(function(e){for(var t=[],n=e;n&&n.parentNode&&1===n.parentNode.nodeType;)n=n.parentNode,t.push(n);return t}(e)),o=0;r=i[o];o++)if(S(r,t))return r}(e.target,n,!0);t&&r.call(t,e,t)};return e.addEventListener(t,o,i.useCapture),{destroy:function(){e.removeEventListener(t,o,i.useCapture)}}}(document,e,n,t._trackFunc,{composed:!0,useCapture:!0})}))}}else Object.keys(this._delegates).forEach((function(e){"function"==typeof t._delegates[e].destroy&&t._delegates[e].destroy()})),this._delegates={};return this._config},e.prototype._trackFunc=function(e,t){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(c){switch(c.label){case 0:return n={},r=t.getAttribute(this._config.selectorPrefix+"on").split(/\s*,\s*/),i=t.getAttribute(this._config.selectorPrefix+"name"),(o=t.getAttribute(this._config.selectorPrefix+"attrs"))&&o.split(/\s*,\s*/).forEach((function(e){var t=e.trim().split(/\s*:\s*/);n[t[0]]=t[1]})),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()];case 1:return a=c.sent(),[3,3];case 2:a=this._config.attributes,c.label=3;case 3:return s=a,u=Object.assign({type:e.type,target:e.target.localName+" with id "+e.target.id},s,n),C.debug("events needed to be recorded",r),C.debug("attributes needed to be attached",n),r.indexOf(e.type)<0?(C.debug("event "+e.type+" is not selected to be recorded"),[2]):(this._tracker({name:i||"event",attributes:u},this._config.provider).catch((function(t){C.debug("Failed to record the "+e.type+" event', "+t)})),[2])}}))}))},e}(),I=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},T=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},x=new r.a("SessionTracker"),P={enable:!1,provider:"AWSPinpoint"},k=!1,D=function(){function e(e,t){this._config=Object.assign({},P,t),this._tracker=e,this._hasEnabled=!1,this._trackFunc=this._trackFunc.bind(this),this._trackBeforeUnload=this._trackBeforeUnload.bind(this),this.configure(this._config)}return e.prototype._envCheck=function(){if(!p.a.browserOrNode().isBrowser)return!1;if(!document||!document.addEventListener)return x.debug("not in the supported web environment"),!1;if(void 0!==document.hidden)this._hidden="hidden",this._visibilityChange="visibilitychange";else if(void 0!==document.msHidden)this._hidden="msHidden",this._visibilityChange="msvisibilitychange";else{if(void 0===document.webkitHidden)return x.debug("not in the supported web environment"),!1;this._hidden="webkitHidden",this._visibilityChange="webkitvisibilitychange"}return!0},e.prototype._trackFunc=function(){return I(this,void 0,void 0,(function(){var e,t,n;return T(this,(function(r){switch(r.label){case 0:return"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()];case 1:return t=r.sent(),[3,3];case 2:t=this._config.attributes,r.label=3;case 3:return e=t,n=Object.assign({},e),document.visibilityState===this._hidden?this._tracker({name:"_session.stop",attributes:n},this._config.provider).catch((function(e){x.debug("record session stop event failed.",e)})):this._tracker({name:"_session.start",attributes:n},this._config.provider).catch((function(e){x.debug("record session start event failed.",e)})),[2]}}))}))},e.prototype._trackBeforeUnload=function(e){var t=this;("function"==typeof this._config.attributes?Promise.resolve(this._config.attributes()):Promise.resolve(this._config.attributes)).then((function(e){var n=Object.assign({},e);t._tracker({name:"_session.stop",attributes:n,immediate:!0},t._config.provider).catch((function(e){x.debug("record session stop event failed.",e)}))}))},e.prototype._sendInitialEvent=function(){return I(this,void 0,void 0,(function(){var e,t,n;return T(this,(function(r){switch(r.label){case 0:return k?(x.debug("the start session has been sent when the page is loaded"),[2]):(k=!0,"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]);case 1:return t=r.sent(),[3,3];case 2:t=this._config.attributes,r.label=3;case 3:return e=t,n=Object.assign({},e),this._tracker({name:"_session.start",attributes:n},this._config.provider).catch((function(e){x.debug("record session start event failed.",e)})),[2]}}))}))},e.prototype.configure=function(e){return this._envCheck()?(Object.assign(this._config,e),this._config.enable&&!this._hasEnabled?(this._sendInitialEvent(),document.addEventListener(this._visibilityChange,this._trackFunc,!1),window.addEventListener("beforeunload",this._trackBeforeUnload,!1),this._hasEnabled=!0):!this._config.enable&&this._hasEnabled&&(document.removeEventListener(this._visibilityChange,this._trackFunc,!1),window.removeEventListener("beforeunload",this._trackBeforeUnload,!1),this._hasEnabled=!1),this._config):this._config},e}(),N=function(){return(N=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},L=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},M=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},j=new r.a("AnalyticsClass"),R="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",U={pageView:b,event:O,session:D},B=null,F=function(){function e(){this._config={},this._pluggables=[],this._disabled=!1,this._trackers={},B=this,this.record=this.record.bind(this),i.a.listen("auth",K),i.a.listen("storage",K),i.a.listen("analytics",K)}return e.prototype.getModuleName=function(){return"Analytics"},e.prototype.configure=function(e){var t=this;if(!e)return this._config;j.debug("configure Analytics",e);var n=o.a.parseMobilehubConfig(e);return this._config=Object.assign({},this._config,n.Analytics,e),this._config.disabled&&(this._disabled=!0),void 0===this._config.autoSessionRecord&&(this._config.autoSessionRecord=!0),this._pluggables.forEach((function(e){var n="AWSPinpoint"!==e.getProviderName()||t._config.AWSPinpoint?t._config[e.getProviderName()]:t._config;e.configure(N({disabled:t._config.disabled,autoSessionRecord:t._config.autoSessionRecord},n))})),0===this._pluggables.length&&this.addPluggable(new a.a),"configured",null,"The Analytics category has been configured successfully",i.a.dispatch("analytics",{event:"configured",data:null,message:"The Analytics category has been configured successfully"},"Analytics",R),j.debug("current configuration",this._config),this._config},e.prototype.addPluggable=function(e){if(e&&"Analytics"===e.getCategory()){this._pluggables.push(e);var t="AWSPinpoint"!==e.getProviderName()||this._config.AWSPinpoint?this._config[e.getProviderName()]:this._config,n=N({disabled:this._config.disabled},t);return e.configure(n),n}},e.prototype.getPluggable=function(e){for(var t=0;t<this._pluggables.length;t+=1){var n=this._pluggables[t];if(n.getProviderName()===e)return n}return j.debug("No plugin found with providerName",e),null},e.prototype.removePluggable=function(e){for(var t=0;t<this._pluggables.length&&this._pluggables[t].getProviderName()!==e;)t+=1;return t===this._pluggables.length?void j.debug("No plugin found with providerName",e):void this._pluggables.splice(t,t+1)},e.prototype.disable=function(){this._disabled=!0},e.prototype.enable=function(){this._disabled=!1},e.prototype.startSession=function(e){return L(this,void 0,void 0,(function(){var t;return M(this,(function(n){return t={event:{name:"_session.start"},provider:e},[2,this._sendEvent(t)]}))}))},e.prototype.stopSession=function(e){return L(this,void 0,void 0,(function(){var t;return M(this,(function(n){return t={event:{name:"_session.stop"},provider:e},[2,this._sendEvent(t)]}))}))},e.prototype.record=function(e,t,n){return L(this,void 0,void 0,(function(){var r;return M(this,(function(i){return null,r="string"==typeof e?{event:{name:e,attributes:t,metrics:n},provider:"AWSPinpoint"}:{event:e,provider:t},[2,this._sendEvent(r)]}))}))},e.prototype.updateEndpoint=function(e,t){return L(this,void 0,void 0,(function(){var n;return M(this,(function(r){return n=N(N({},e),{name:"_update_endpoint"}),[2,this.record(n,t)]}))}))},e.prototype._sendEvent=function(e){var t=this;if(this._disabled)return j.debug("Analytics has been disabled"),Promise.resolve();var n=e.provider?e.provider:"AWSPinpoint";return new Promise((function(r,i){t._pluggables.forEach((function(t){t.getProviderName()===n&&t.record(e,{resolve:r,reject:i})}))}))},e.prototype.autoTrack=function(e,t){if(U[e]){"session"===e&&(this._config.autoSessionRecord=t.enable);var n=this._trackers[e];n?n.configure(t):this._trackers[e]=new U[e](this.record,t)}else j.debug("invalid tracker type")},e}(),z=!1,q=!1,$=!1,K=function(e){var t=e.channel,n=e.payload;switch(j.debug("on hub capsule "+t,n),t){case"auth":G(n);break;case"storage":V(n);break;case"analytics":H(n)}},V=function(e){var t=e.data,n=t.attrs,r=t.metrics;n&&$&&B.record({name:"Storage",attributes:n,metrics:r}).catch((function(e){j.debug("Failed to send the storage event automatically",e)}))},G=function(e){var t=e.event;if(t){var n=function(e){return L(void 0,void 0,void 0,(function(){var t;return M(this,(function(n){switch(n.label){case 0:if(!q||!$)return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,B.record({name:"_userauth."+e})];case 2:return[2,n.sent()];case 3:return t=n.sent(),j.debug("Failed to send the "+e+" event automatically",t),[3,4];case 4:return[2]}}))}))};switch(t){case"signIn":return n("sign_in");case"signUp":return n("sign_up");case"signOut":return n("sign_out");case"signIn_failure":return n("auth_fail");case"configured":(q=!0)&&$&&W()}}},H=function(e){var t=e.event;t&&"pinpointProvider_configured"===t&&($=!0,q&&$&&W())},W=function(){var e=B.configure();!z&&e.autoSessionRecord&&(B.updateEndpoint({immediate:!0}).catch((function(e){j.debug("Failed to update the endpoint",e)})),z=!0),B.autoTrack("session",{enable:e.autoSessionRecord})},J=new F;s.a.register(J)},function(e,t,n){"use strict";n.d(t,"a",(function(){return Jt}));var r=n(48),i=n(118),o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function u(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function c(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}Object.create,Object.create;var l,d,f,p,h,v,g,m,y,b,w,_,S,E,C,A,O,I,T,x,P,k,D,N,L,M,j,R,U,B,F,z,q,$,K,V,G,H,W,J,Y,Z,Q,X,ee,te,ne,re,ie,oe,se,ae,ue,ce,le,de,fe,pe,he,ve,ge,me,ye,be,we,_e,Se,Ee,Ce,Ae,Oe,Ie,Te,xe,Pe,ke,De,Ne,Le,Me,je,Re,Ue,Be,Fe,ze,qe,$e,Ke,Ve,Ge,He,We,Je,Ye,Ze,Qe,Xe,et,tt,nt,rt=n(1);(l||(l={})).filterSensitiveLog=function(e){return a({},e)},(d||(d={})).filterSensitiveLog=function(e){return a({},e)},function(e){e.GZIP="GZIP",e.HADOOP_SNAPPY="HADOOP_SNAPPY",e.SNAPPY="Snappy",e.UNCOMPRESSED="UNCOMPRESSED",e.ZIP="ZIP"}(f||(f={})),(p||(p={})).filterSensitiveLog=function(e){return a({},e)},function(e){e.GZIP="GZIP",e.NONE="NONE"}(h||(h={})),(v||(v={})).filterSensitiveLog=function(e){return a({},e)},function(e){e.AWS_OWNED_CMK="AWS_OWNED_CMK",e.CUSTOMER_MANAGED_CMK="CUSTOMER_MANAGED_CMK"}(g||(g={})),(m||(m={})).filterSensitiveLog=function(e){return a({},e)},(y||(y={})).filterSensitiveLog=function(e){return a({},e)},function(e){e.BUFFER_INTERVAL_IN_SECONDS="BufferIntervalInSeconds",e.BUFFER_SIZE_IN_MB="BufferSizeInMBs",e.LAMBDA_ARN="LambdaArn",e.LAMBDA_NUMBER_OF_RETRIES="NumberOfRetries",e.ROLE_ARN="RoleArn"}(b||(b={})),(w||(w={})).filterSensitiveLog=function(e){return a({},e)},(_||(_={})).filterSensitiveLog=function(e){return a({},e)},(S||(S={})).filterSensitiveLog=function(e){return a({},e)},(E||(E={})).filterSensitiveLog=function(e){return a({},e)},(C||(C={})).filterSensitiveLog=function(e){return a({},e)},(A||(A={})).filterSensitiveLog=function(e){return a({},e)},(O||(O={})).filterSensitiveLog=function(e){return a({},e)},(I||(I={})).filterSensitiveLog=function(e){return a({},e)},(T||(T={})).filterSensitiveLog=function(e){return a({},e)},(x||(x={})).filterSensitiveLog=function(e){return a({},e)},(P||(P={})).filterSensitiveLog=function(e){return a({},e)},(k||(k={})).filterSensitiveLog=function(e){return a({},e)},(D||(D={})).filterSensitiveLog=function(e){return a({},e)},function(e){e.NONE="NONE",e.SNAPPY="SNAPPY",e.ZLIB="ZLIB"}(N||(N={})),function(e){e.V0_11="V0_11",e.V0_12="V0_12"}(L||(L={})),(M||(M={})).filterSensitiveLog=function(e){return a({},e)},function(e){e.GZIP="GZIP",e.SNAPPY="SNAPPY",e.UNCOMPRESSED="UNCOMPRESSED"}(j||(j={})),function(e){e.V1="V1",e.V2="V2"}(R||(R={})),(U||(U={})).filterSensitiveLog=function(e){return a({},e)},(B||(B={})).filterSensitiveLog=function(e){return a({},e)},(F||(F={})).filterSensitiveLog=function(e){return a({},e)},(z||(z={})).filterSensitiveLog=function(e){return a({},e)},(q||(q={})).filterSensitiveLog=function(e){return a({},e)},($||($={})).filterSensitiveLog=function(e){return a({},e)},(K||(K={})).filterSensitiveLog=function(e){return a({},e)},(V||(V={})).filterSensitiveLog=function(e){return a(a(a({},e),e.Url&&{Url:rt.d}),e.AccessKey&&{AccessKey:rt.d})},(G||(G={})).filterSensitiveLog=function(e){return a(a(a({},e),e.AttributeName&&{AttributeName:rt.d}),e.AttributeValue&&{AttributeValue:rt.d})},(H||(H={})).filterSensitiveLog=function(e){return a(a({},e),e.CommonAttributes&&{CommonAttributes:e.CommonAttributes.map((function(e){return G.filterSensitiveLog(e)}))})},(W||(W={})).filterSensitiveLog=function(e){return a({},e)},(J||(J={})).filterSensitiveLog=function(e){return a(a(a({},e),e.EndpointConfiguration&&{EndpointConfiguration:V.filterSensitiveLog(e.EndpointConfiguration)}),e.RequestConfiguration&&{RequestConfiguration:H.filterSensitiveLog(e.RequestConfiguration)})},(Y||(Y={})).filterSensitiveLog=function(e){return a({},e)},(Z||(Z={})).filterSensitiveLog=function(e){return a({},e)},(Q||(Q={})).filterSensitiveLog=function(e){return a(a(a({},e),e.Username&&{Username:rt.d}),e.Password&&{Password:rt.d})},(X||(X={})).filterSensitiveLog=function(e){return a({},e)},(ee||(ee={})).filterSensitiveLog=function(e){return a({},e)},(te||(te={})).filterSensitiveLog=function(e){return a({},e)},(ne||(ne={})).filterSensitiveLog=function(e){return a(a(a({},e),e.RedshiftDestinationConfiguration&&{RedshiftDestinationConfiguration:Q.filterSensitiveLog(e.RedshiftDestinationConfiguration)}),e.HttpEndpointDestinationConfiguration&&{HttpEndpointDestinationConfiguration:J.filterSensitiveLog(e.HttpEndpointDestinationConfiguration)})},(re||(re={})).filterSensitiveLog=function(e){return a({},e)},(ie||(ie={})).filterSensitiveLog=function(e){return a({},e)},(oe||(oe={})).filterSensitiveLog=function(e){return a({},e)},(se||(se={})).filterSensitiveLog=function(e){return a({},e)},(ae||(ae={})).filterSensitiveLog=function(e){return a({},e)},(ue||(ue={})).filterSensitiveLog=function(e){return a({},e)},(ce||(ce={})).filterSensitiveLog=function(e){return a({},e)},(le||(le={})).filterSensitiveLog=function(e){return a({},e)},function(e){e.CREATE_ENI_FAILED="CREATE_ENI_FAILED",e.CREATE_KMS_GRANT_FAILED="CREATE_KMS_GRANT_FAILED",e.DELETE_ENI_FAILED="DELETE_ENI_FAILED",e.DISABLED_KMS_KEY="DISABLED_KMS_KEY",e.ENI_ACCESS_DENIED="ENI_ACCESS_DENIED",e.INVALID_KMS_KEY="INVALID_KMS_KEY",e.KMS_ACCESS_DENIED="KMS_ACCESS_DENIED",e.KMS_KEY_NOT_FOUND="KMS_KEY_NOT_FOUND",e.KMS_OPT_IN_REQUIRED="KMS_OPT_IN_REQUIRED",e.RETIRE_KMS_GRANT_FAILED="RETIRE_KMS_GRANT_FAILED",e.SECURITY_GROUP_ACCESS_DENIED="SECURITY_GROUP_ACCESS_DENIED",e.SECURITY_GROUP_NOT_FOUND="SECURITY_GROUP_NOT_FOUND",e.SUBNET_ACCESS_DENIED="SUBNET_ACCESS_DENIED",e.SUBNET_NOT_FOUND="SUBNET_NOT_FOUND",e.UNKNOWN_ERROR="UNKNOWN_ERROR"}(de||(de={})),(fe||(fe={})).filterSensitiveLog=function(e){return a({},e)},function(e){e.DISABLED="DISABLED",e.DISABLING="DISABLING",e.DISABLING_FAILED="DISABLING_FAILED",e.ENABLED="ENABLED",e.ENABLING="ENABLING",e.ENABLING_FAILED="ENABLING_FAILED"}(pe||(pe={})),(he||(he={})).filterSensitiveLog=function(e){return a({},e)},function(e){e.ACTIVE="ACTIVE",e.CREATING="CREATING",e.CREATING_FAILED="CREATING_FAILED",e.DELETING="DELETING",e.DELETING_FAILED="DELETING_FAILED"}(ve||(ve={})),(ge||(ge={})).filterSensitiveLog=function(e){return a({},e)},(me||(me={})).filterSensitiveLog=function(e){return a({},e)},(ye||(ye={})).filterSensitiveLog=function(e){return a({},e)},(be||(be={})).filterSensitiveLog=function(e){return a({},e)},(we||(we={})).filterSensitiveLog=function(e){return a(a({},e),e.Url&&{Url:rt.d})},(_e||(_e={})).filterSensitiveLog=function(e){return a(a(a({},e),e.EndpointConfiguration&&{EndpointConfiguration:we.filterSensitiveLog(e.EndpointConfiguration)}),e.RequestConfiguration&&{RequestConfiguration:H.filterSensitiveLog(e.RequestConfiguration)})},(Se||(Se={})).filterSensitiveLog=function(e){return a(a({},e),e.Username&&{Username:rt.d})},(Ee||(Ee={})).filterSensitiveLog=function(e){return a({},e)},(Ce||(Ce={})).filterSensitiveLog=function(e){return a(a(a({},e),e.RedshiftDestinationDescription&&{RedshiftDestinationDescription:Se.filterSensitiveLog(e.RedshiftDestinationDescription)}),e.HttpEndpointDestinationDescription&&{HttpEndpointDestinationDescription:_e.filterSensitiveLog(e.HttpEndpointDestinationDescription)})},(Ae||(Ae={})).filterSensitiveLog=function(e){return a({},e)},(Oe||(Oe={})).filterSensitiveLog=function(e){return a({},e)},(Ie||(Ie={})).filterSensitiveLog=function(e){return a(a({},e),e.Destinations&&{Destinations:e.Destinations.map((function(e){return Ce.filterSensitiveLog(e)}))})},(Te||(Te={})).filterSensitiveLog=function(e){return a({},e)},(xe||(xe={})).filterSensitiveLog=function(e){return a(a({},e),e.DeliveryStreamDescription&&{DeliveryStreamDescription:Ie.filterSensitiveLog(e.DeliveryStreamDescription)})},(Pe||(Pe={})).filterSensitiveLog=function(e){return a({},e)},(ke||(ke={})).filterSensitiveLog=function(e){return a({},e)},(De||(De={})).filterSensitiveLog=function(e){return a({},e)},(Ne||(Ne={})).filterSensitiveLog=function(e){return a({},e)},(Le||(Le={})).filterSensitiveLog=function(e){return a({},e)},(Me||(Me={})).filterSensitiveLog=function(e){return a({},e)},(je||(je={})).filterSensitiveLog=function(e){return a({},e)},(Re||(Re={})).filterSensitiveLog=function(e){return a({},e)},(Ue||(Ue={})).filterSensitiveLog=function(e){return a({},e)},(Be||(Be={})).filterSensitiveLog=function(e){return a({},e)},(Fe||(Fe={})).filterSensitiveLog=function(e){return a({},e)},(ze||(ze={})).filterSensitiveLog=function(e){return a({},e)},(qe||(qe={})).filterSensitiveLog=function(e){return a({},e)},($e||($e={})).filterSensitiveLog=function(e){return a({},e)},(Ke||(Ke={})).filterSensitiveLog=function(e){return a({},e)},(Ve||(Ve={})).filterSensitiveLog=function(e){return a({},e)},(Ge||(Ge={})).filterSensitiveLog=function(e){return a({},e)},(He||(He={})).filterSensitiveLog=function(e){return a({},e)},(We||(We={})).filterSensitiveLog=function(e){return a({},e)},(Je||(Je={})).filterSensitiveLog=function(e){return a({},e)},(Ye||(Ye={})).filterSensitiveLog=function(e){return a({},e)},(Ze||(Ze={})).filterSensitiveLog=function(e){return a({},e)},(Qe||(Qe={})).filterSensitiveLog=function(e){return a(a(a({},e),e.EndpointConfiguration&&{EndpointConfiguration:V.filterSensitiveLog(e.EndpointConfiguration)}),e.RequestConfiguration&&{RequestConfiguration:H.filterSensitiveLog(e.RequestConfiguration)})},(Xe||(Xe={})).filterSensitiveLog=function(e){return a(a(a({},e),e.Username&&{Username:rt.d}),e.Password&&{Password:rt.d})},(et||(et={})).filterSensitiveLog=function(e){return a({},e)},(tt||(tt={})).filterSensitiveLog=function(e){return a(a(a({},e),e.RedshiftDestinationUpdate&&{RedshiftDestinationUpdate:Xe.filterSensitiveLog(e.RedshiftDestinationUpdate)}),e.HttpEndpointDestinationUpdate&&{HttpEndpointDestinationUpdate:Qe.filterSensitiveLog(e.HttpEndpointDestinationUpdate)})},(nt||(nt={})).filterSensitiveLog=function(e){return a({},e)};var it,ot=n(3),st=function(e,t){return u(void 0,void 0,void 0,(function(){var n,r,i,o,s,u,l,d,f,p,h;return c(this,(function(c){switch(c.label){case 0:return r=[a({},e)],h={},[4,wt(e.body,t)];case 1:switch(n=a.apply(void 0,r.concat([(h.body=c.sent(),h)])),o="UnknownError",o=_t(e,n.body)){case"InvalidArgumentException":case"com.amazonaws.firehose#InvalidArgumentException":return[3,2];case"InvalidKMSResourceException":case"com.amazonaws.firehose#InvalidKMSResourceException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.firehose#ResourceNotFoundException":return[3,6];case"ServiceUnavailableException":case"com.amazonaws.firehose#ServiceUnavailableException":return[3,8]}return[3,10];case 2:return s=[{}],[4,at(n,t)];case 3:return i=a.apply(void 0,[a.apply(void 0,s.concat([c.sent()])),{name:o,$metadata:yt(e)}]),[3,11];case 4:return u=[{}],[4,ut(n,t)];case 5:return i=a.apply(void 0,[a.apply(void 0,u.concat([c.sent()])),{name:o,$metadata:yt(e)}]),[3,11];case 6:return l=[{}],[4,ct(n,t)];case 7:return i=a.apply(void 0,[a.apply(void 0,l.concat([c.sent()])),{name:o,$metadata:yt(e)}]),[3,11];case 8:return d=[{}],[4,lt(n,t)];case 9:return i=a.apply(void 0,[a.apply(void 0,d.concat([c.sent()])),{name:o,$metadata:yt(e)}]),[3,11];case 10:f=n.body,o=f.code||f.Code||o,i=a(a({},f),{name:""+o,message:f.message||f.Message||o,$fault:"client",$metadata:yt(e)}),c.label=11;case 11:return p=i.message||i.Message||o,i.message=p,delete i.Message,[2,Promise.reject(Object.assign(new Error(p),i))]}}))}))},at=function(e,t){return u(void 0,void 0,void 0,(function(){var n,r;return c(this,(function(i){return n=e.body,r=pt(n,t),[2,a({name:"InvalidArgumentException",$fault:"client",$metadata:yt(e)},r)]}))}))},ut=function(e,t){return u(void 0,void 0,void 0,(function(){var n,r;return c(this,(function(i){return n=e.body,r=ht(n,t),[2,a({name:"InvalidKMSResourceException",$fault:"client",$metadata:yt(e)},r)]}))}))},ct=function(e,t){return u(void 0,void 0,void 0,(function(){var n,r;return c(this,(function(i){return n=e.body,r=gt(n,t),[2,a({name:"ResourceNotFoundException",$fault:"client",$metadata:yt(e)},r)]}))}))},lt=function(e,t){return u(void 0,void 0,void 0,(function(){var n,r;return c(this,(function(i){return n=e.body,r=mt(n,t),[2,a({name:"ServiceUnavailableException",$fault:"server",$metadata:yt(e)},r)]}))}))},dt=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:ft(e,t)}))},ft=function(e,t){return a({},void 0!==e.Data&&null!==e.Data&&{Data:t.base64Encoder(e.Data)})},pt=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},ht=function(e,t){return{code:void 0!==e.code&&null!==e.code?e.code:void 0,message:void 0!==e.message&&null!==e.message?e.message:void 0}},vt=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){return{ErrorCode:void 0!==e.ErrorCode&&null!==e.ErrorCode?e.ErrorCode:void 0,ErrorMessage:void 0!==e.ErrorMessage&&null!==e.ErrorMessage?e.ErrorMessage:void 0,RecordId:void 0!==e.RecordId&&null!==e.RecordId?e.RecordId:void 0}}(e)}))},gt=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},mt=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},yt=function(e){var t;return{httpStatusCode:e.statusCode,requestId:null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},bt=function(e,t,n,r,i){return u(void 0,void 0,void 0,(function(){var o,s,a,u,l,d;return c(this,(function(c){switch(c.label){case 0:return[4,e.endpoint()];case 1:return o=c.sent(),s=o.hostname,a=o.protocol,u=void 0===a?"https":a,l=o.port,d={protocol:u,hostname:s,port:l,method:"POST",path:n,headers:t},void 0!==r&&(d.hostname=r),void 0!==i&&(d.body=i),[2,new ot.a(d)]}}))}))},wt=function(e,t){return function(e,t){return function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)}(e,t).then((function(e){return t.utf8Encoder(e)}))}(e,t).then((function(e){return e.length?JSON.parse(e):{}}))},_t=function(e,t){var n,r=function(e){var t=e;return t.indexOf(":")>=0&&(t=t.split(":")[0]),t.indexOf("#")>=0&&(t=t.split("#")[1]),t},i=(n=e.headers,"x-amzn-errortype",Object.keys(n).find((function(e){return e.toLowerCase()==="x-amzn-errortype".toLowerCase()})));return void 0!==i?r(e.headers[i]):void 0!==t.code?r(t.code):void 0!==t.__type?r(t.__type):""},St=n(10),Et=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return s(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(St.a)(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"FirehoseClient",commandName:"PutRecordBatchCommand",inputFilterSensitiveLog:ze.filterSensitiveLog,outputFilterSensitiveLog:$e.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return u(void 0,void 0,void 0,(function(){var n,r;return c(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Firehose_20150804.PutRecordBatch"},r=JSON.stringify(function(e,t){return a(a({},void 0!==e.DeliveryStreamName&&null!==e.DeliveryStreamName&&{DeliveryStreamName:e.DeliveryStreamName}),void 0!==e.Records&&null!==e.Records&&{Records:dt(e.Records,t)})}(e,t)),[2,bt(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return u(void 0,void 0,void 0,(function(){var n,r,i;return c(this,(function(o){switch(o.label){case 0:return e.statusCode>=300?[2,st(e,t)]:[4,wt(e.body,t)];case 1:return n=o.sent(),r=function(e,t){return{Encrypted:void 0!==e.Encrypted&&null!==e.Encrypted?e.Encrypted:void 0,FailedPutCount:void 0!==e.FailedPutCount&&null!==e.FailedPutCount?e.FailedPutCount:void 0,RequestResponses:void 0!==e.RequestResponses&&null!==e.RequestResponses?vt(e.RequestResponses,t):void 0}}(n,t),i=a({$metadata:yt(e)},r),[2,Promise.resolve(i)]}}))}))}(e,t)},t}(rt.b),Ct=n(181),At=n(42),Ot=n(22),It=n(45),Tt=n(14),xt=n(18),Pt=n(43),kt=n(44),Dt=n(16),Nt=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),Lt=new Set(["cn-north-1","cn-northwest-1"]),Mt=new Set(["us-iso-east-1"]),jt=new Set(["us-isob-east-1"]),Rt=new Set(["us-gov-east-1","us-gov-west-1"]),Ut={apiVersion:"2015-08-04",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,t){var n=void 0;switch(e){case"af-south-1":n={hostname:"firehose.af-south-1.amazonaws.com",partition:"aws"};break;case"ap-east-1":n={hostname:"firehose.ap-east-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-1":n={hostname:"firehose.ap-northeast-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-2":n={hostname:"firehose.ap-northeast-2.amazonaws.com",partition:"aws"};break;case"ap-south-1":n={hostname:"firehose.ap-south-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-1":n={hostname:"firehose.ap-southeast-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-2":n={hostname:"firehose.ap-southeast-2.amazonaws.com",partition:"aws"};break;case"ca-central-1":n={hostname:"firehose.ca-central-1.amazonaws.com",partition:"aws"};break;case"cn-north-1":n={hostname:"firehose.cn-north-1.amazonaws.com.cn",partition:"aws-cn"};break;case"cn-northwest-1":n={hostname:"firehose.cn-northwest-1.amazonaws.com.cn",partition:"aws-cn"};break;case"eu-central-1":n={hostname:"firehose.eu-central-1.amazonaws.com",partition:"aws"};break;case"eu-north-1":n={hostname:"firehose.eu-north-1.amazonaws.com",partition:"aws"};break;case"eu-south-1":n={hostname:"firehose.eu-south-1.amazonaws.com",partition:"aws"};break;case"eu-west-1":n={hostname:"firehose.eu-west-1.amazonaws.com",partition:"aws"};break;case"eu-west-2":n={hostname:"firehose.eu-west-2.amazonaws.com",partition:"aws"};break;case"eu-west-3":n={hostname:"firehose.eu-west-3.amazonaws.com",partition:"aws"};break;case"fips-us-east-1":n={hostname:"firehose-fips.us-east-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"fips-us-east-2":n={hostname:"firehose-fips.us-east-2.amazonaws.com",partition:"aws",signingRegion:"us-east-2"};break;case"fips-us-gov-east-1":n={hostname:"firehose-fips.us-gov-east-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-east-1"};break;case"fips-us-gov-west-1":n={hostname:"firehose-fips.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"fips-us-west-1":n={hostname:"firehose-fips.us-west-1.amazonaws.com",partition:"aws",signingRegion:"us-west-1"};break;case"fips-us-west-2":n={hostname:"firehose-fips.us-west-2.amazonaws.com",partition:"aws",signingRegion:"us-west-2"};break;case"me-south-1":n={hostname:"firehose.me-south-1.amazonaws.com",partition:"aws"};break;case"sa-east-1":n={hostname:"firehose.sa-east-1.amazonaws.com",partition:"aws"};break;case"us-east-1":n={hostname:"firehose.us-east-1.amazonaws.com",partition:"aws"};break;case"us-east-2":n={hostname:"firehose.us-east-2.amazonaws.com",partition:"aws"};break;case"us-gov-east-1":n={hostname:"firehose.us-gov-east-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-gov-west-1":n={hostname:"firehose.us-gov-west-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-west-1":n={hostname:"firehose.us-west-1.amazonaws.com",partition:"aws"};break;case"us-west-2":n={hostname:"firehose.us-west-2.amazonaws.com",partition:"aws"};break;default:Nt.has(e)&&(n={hostname:"firehose.{region}.amazonaws.com".replace("{region}",e),partition:"aws"}),Lt.has(e)&&(n={hostname:"firehose.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),Mt.has(e)&&(n={hostname:"firehose.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),jt.has(e)&&(n={hostname:"firehose.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),Rt.has(e)&&(n={hostname:"firehose.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}),void 0===n&&(n={hostname:"firehose.{region}.amazonaws.com".replace("{region}",e),partition:"aws"})}return Promise.resolve(a({signingService:"firehose"},n))},serviceId:"Firehose",urlParser:n(47).a},Bt=a(a({},Ut),{runtime:"browser",base64Decoder:xt.a,base64Encoder:xt.b,bodyLengthChecker:Pt.a,credentialDefaultProvider:function(e){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:Object(kt.a)({serviceId:Ut.serviceId,clientVersion:Ct.version}),maxAttempts:Tt.a,region:Object(It.a)("Region is missing"),requestHandler:new Ot.a,sha256:At.Sha256,streamCollector:Ot.b,utf8Decoder:Dt.a,utf8Encoder:Dt.b}),Ft=n(24),zt=n(41),qt=n(21),$t=n(46),Kt=n(27),Vt=n(23),Gt=function(e){function t(t){var n=this,r=a(a({},Bt),t),i=Object(Ft.b)(r),o=Object(Ft.a)(i),s=Object(Kt.b)(o),u=Object(Tt.c)(s),c=Object(qt.b)(u),l=Object(Vt.b)(c);return(n=e.call(this,l)||this).config=l,n.middlewareStack.use(Object(Kt.a)(n.config)),n.middlewareStack.use(Object(Tt.b)(n.config)),n.middlewareStack.use(Object(zt.a)(n.config)),n.middlewareStack.use(Object(qt.a)(n.config)),n.middlewareStack.use(Object($t.a)(n.config)),n.middlewareStack.use(Object(Vt.a)(n.config)),n}return s(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(rt.a),Ht=(it=function(e,t){return(it=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}it(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Wt=new r.a("AWSKineisFirehoseProvider"),Jt=function(e){function t(t){return e.call(this,t)||this}return Ht(t,e),t.prototype.getProviderName=function(){return"AWSKinesisFirehose"},t.prototype._sendEvents=function(e){var t=this;if(0!==e.length){var n=e[0],r=n.config,i=n.credentials;if(!this._init(r,i))return!1;var o={};e.map((function(e){var t=e.event,n=t.streamName,r=t.data;void 0===o[n]&&(o[n]=[]);var i=r&&"string"!=typeof r?JSON.stringify(r):r,s={Data:Object(Dt.a)(i)};o[n].push(s)})),Object.keys(o).map((function(e){Wt.debug("putting records to kinesis",e,"with records",o[e]),t._kinesisFirehose.send(new Et({Records:o[e],DeliveryStreamName:e})).then((function(t){return Wt.debug("Upload records to stream",e)})).catch((function(e){return Wt.debug("Failed to upload records to Kinesis",e)}))}))}},t.prototype._init=function(e,t){if(Wt.debug("init clients"),this._kinesisFirehose&&this._config.credentials&&this._config.credentials.sessionToken===t.sessionToken&&this._config.credentials.identityId===t.identityId)return Wt.debug("no change for analytics config, directly return from init"),!0;this._config.credentials=t;var n=e.region;return this._initFirehose(n,t)},t.prototype._initFirehose=function(e,t){return Wt.debug("initialize kinesis firehose with credentials",t),this._kinesisFirehose=new Gt({apiVersion:"2015-08-04",region:e,credentials:t}),!0},t}(i.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return ce}));var r,i,o,s=n(15),a=n(34),u=n(48),c=n(90),l=n(20),d=n(188),f=n(30),p=function(){return(p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},h=new u.a("AbstractPubSubProvider"),v=function(){function e(e){void 0===e&&(e={}),this._config=e}return e.prototype.configure=function(e){return void 0===e&&(e={}),this._config=p(p({},e),this._config),h.debug("configure "+this.getProviderName(),this._config),this.options},e.prototype.getCategory=function(){return"PubSub"},Object.defineProperty(e.prototype,"options",{get:function(){return p({},this._config)},enumerable:!0,configurable:!0}),e}(),g=n(78),m=n(29),y=n(430),b=function(){return(b=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},w={KEEP_ALIVE_MISSED:{keepAliveState:"unhealthy"},KEEP_ALIVE:{keepAliveState:"healthy"},CONNECTION_ESTABLISHED:{connectionState:"connected"},CONNECTION_FAILED:{intendedConnectionState:"disconnected",connectionState:"disconnected"},CLOSING_CONNECTION:{intendedConnectionState:"disconnected"},OPENING_CONNECTION:{intendedConnectionState:"connected",connectionState:"connecting"},CLOSED:{connectionState:"disconnected"},ONLINE:{networkState:"connected"},OFFLINE:{networkState:"disconnected"}},_=function(){function e(){var e=this;this._networkMonitoringSubscription=void 0,this._linkedConnectionState={networkState:"connected",connectionState:"disconnected",intendedConnectionState:"disconnected",keepAliveState:"healthy"},this._linkedConnectionStateObservable=new s.a((function(t){t.next(e._linkedConnectionState),e._linkedConnectionStateObserver=t}))}return e.prototype.enableNetworkMonitoring=function(){var e=this;void 0===this._networkMonitoringSubscription&&(this._networkMonitoringSubscription=(new y.a).networkMonitor().subscribe((function(t){var n=t.online;e.record(n?w.ONLINE:w.OFFLINE)})))},e.prototype.disableNetworkMonitoring=function(){var e;null===(e=this._networkMonitoringSubscription)||void 0===e||e.unsubscribe(),this._networkMonitoringSubscription=void 0},Object.defineProperty(e.prototype,"connectionStateObservable",{get:function(){var e,t=this;return this._linkedConnectionStateObservable.map((function(e){return t.connectionStatesTranslator(e)})).filter((function(t){var n=t!==e;return e=t,n}))},enumerable:!0,configurable:!0}),e.prototype.record=function(e){"connected"===e.intendedConnectionState?this.enableNetworkMonitoring():"disconnected"===e.intendedConnectionState&&this.disableNetworkMonitoring();var t=b(b({},this._linkedConnectionState),e);this._linkedConnectionState=b({},t),this._linkedConnectionStateObserver.next(this._linkedConnectionState)},e.prototype.connectionStatesTranslator=function(e){var t=e.connectionState,n=e.networkState,r=e.intendedConnectionState,i=e.keepAliveState;return"connected"===t&&"disconnected"===n?m.b.ConnectedPendingNetwork:"connected"===t&&"disconnected"===r?m.b.ConnectedPendingDisconnect:"disconnected"===t&&"connected"===r&&"disconnected"===n?m.b.ConnectionDisruptedPendingNetwork:"disconnected"===t&&"connected"===r?m.b.ConnectionDisrupted:"connected"===t&&"unhealthy"===i?m.b.ConnectedPendingKeepAlive:"connecting"===t?m.b.Connecting:"disconnected"===t?m.b.Disconnected:m.b.Connected},e}(),S=[400,401,403];!function(e){e.GQL_CONNECTION_INIT="connection_init",e.GQL_CONNECTION_ERROR="connection_error",e.GQL_CONNECTION_ACK="connection_ack",e.GQL_START="start",e.GQL_START_ACK="start_ack",e.GQL_DATA="data",e.GQL_CONNECTION_KEEP_ALIVE="ka",e.GQL_STOP="stop",e.GQL_COMPLETE="complete",e.GQL_ERROR="error"}(r||(r={})),function(e){e[e.PENDING=0]="PENDING",e[e.CONNECTED=1]="CONNECTED",e[e.FAILED=2]="FAILED"}(i||(i={})),function(e){e[e.CLOSED=0]="CLOSED",e[e.READY=1]="READY",e[e.CONNECTING=2]="CONNECTING"}(o||(o={}));var E="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",C={accept:"application/json, text/javascript","content-encoding":"amz-1.0","content-type":"application/json; charset=UTF-8"};function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var O,I=(O=function(e,t){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}O(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),T=function(){return(T=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},x=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},P=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},k=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},D=new u.a("MqttOverWSProvider"),N=function(){function e(){this.promises=new Map}return e.prototype.get=function(e,t){return x(this,void 0,void 0,(function(){var n,r;return P(this,(function(i){return(n=this.promises.get(e))?[2,n]:t?(r=t(e),this.promises.set(e,r),[2,r]):[2,void 0]}))}))},Object.defineProperty(e.prototype,"allClients",{get:function(){return Array.from(this.promises.keys())},enumerable:!0,configurable:!0}),e.prototype.remove=function(e){this.promises.delete(e)},e}(),L="undefined"!=typeof Symbol?Symbol("topic"):"@@topic",M=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,T(T({},t),{clientId:t.clientId||Object(f.v4)()}))||this;return n._clientsQueue=new N,n.connectionStateMonitor=new _,n._topicObservers=new Map,n._clientIdObservers=new Map,n.connectionStateMonitor.connectionStateObservable.subscribe((function(e){var t,r;t={provider:n,connectionState:e},r="Connection state is "+e,g.a.dispatch("pubsub",{event:"ConnectionStateChange",data:t,message:r},"PubSub",E)})),n}return I(t,e),Object.defineProperty(t.prototype,"clientId",{get:function(){return this.options.clientId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endpoint",{get:function(){return this.options.aws_pubsub_endpoint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clientsQueue",{get:function(){return this._clientsQueue},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSSLEnabled",{get:function(){return!this.options.aws_appsync_dangerously_connect_to_http_endpoint_for_testing},enumerable:!0,configurable:!0}),t.prototype.getTopicForValue=function(e){return"object"===A(e)&&e[L]},t.prototype.getProviderName=function(){return"MqttOverWSProvider"},t.prototype.onDisconnect=function(e){var t=this,n=e.clientId,r=e.errorCode,i=k(e,["clientId","errorCode"]);if(0!==r){D.warn(n,JSON.stringify(T({errorCode:r},i),null,2));var o=[];if(!n)return;var s=this._clientIdObservers.get(n);if(!s)return;s.forEach((function(e){e.error("Disconnected, error code: "+r),t._topicObservers.forEach((function(t,n){t.delete(e),0===t.size&&o.push(n)}))})),this._clientIdObservers.delete(n),o.forEach((function(e){t._topicObservers.delete(e)}))}},t.prototype.newClient=function(e){var t=e.url,n=e.clientId;return x(this,void 0,void 0,(function(){var e,r=this;return P(this,(function(i){switch(i.label){case 0:return D.debug("Creating new MQTT client",n),this.connectionStateMonitor.record(w.OPENING_CONNECTION),(e=new d.Client(t,n)).onMessageArrived=function(e){var t=e.destinationName,n=e.payloadString;r._onMessage(t,n)},e.onConnectionLost=function(e){var t=e.errorCode,i=k(e,["errorCode"]);r.onDisconnect(T({clientId:n,errorCode:t},i)),r.connectionStateMonitor.record(w.CLOSED)},[4,new Promise((function(t,n){e.connect({useSSL:r.isSSLEnabled,mqttVersion:3,onSuccess:function(){return t(e)},onFailure:function(){n(),r.connectionStateMonitor.record(w.CONNECTION_FAILED)}})}))];case 1:return i.sent(),this.connectionStateMonitor.record(w.CONNECTION_ESTABLISHED),[2,e]}}))}))},t.prototype.connect=function(e,t){return void 0===t&&(t={}),x(this,void 0,void 0,(function(){var n=this;return P(this,(function(r){switch(r.label){case 0:return[4,this.clientsQueue.get(e,(function(e){return n.newClient(T(T({},t),{clientId:e}))}))];case 1:return[2,r.sent()]}}))}))},t.prototype.disconnect=function(e){return x(this,void 0,void 0,(function(){var t;return P(this,(function(n){switch(n.label){case 0:return[4,this.clientsQueue.get(e)];case 1:return(t=n.sent())&&t.isConnected()&&(t.disconnect(),this.connectionStateMonitor.record(w.CLOSED)),this.clientsQueue.remove(e),[2]}}))}))},t.prototype.publish=function(e,t){return x(this,void 0,void 0,(function(){var n,r,i,o;return P(this,(function(s){switch(s.label){case 0:return n=[].concat(e),r=JSON.stringify(t),[4,this.endpoint];case 1:return i=s.sent(),[4,this.connect(this.clientId,{url:i})];case 2:return o=s.sent(),D.debug("Publishing to topic(s)",n.join(","),r),n.forEach((function(e){return o.send(e,r)})),[2]}}))}))},t.prototype._onMessage=function(e,t){try{var n=[];this._topicObservers.forEach((function(t,r){(function(e,t){for(var n=e.split("/"),r=n.length,i=t.split("/"),o=0;o<r;++o){var s=n[o],a=i[o];if("#"===s)return i.length>=r;if("+"!==s&&s!==a)return!1}return r===i.length})(r,e)&&n.push(t)}));var r=JSON.parse(t);"object"===A(r)&&(r[L]=e),n.forEach((function(e){e.forEach((function(e){return e.next(r)}))}))}catch(e){D.warn("Error handling message",e,t)}},t.prototype.subscribe=function(e,t){var n=this;void 0===t&&(t={});var r=[].concat(e);return D.debug("Subscribing to topic(s)",r.join(",")),new s.a((function(e){var i;r.forEach((function(t){var r=n._topicObservers.get(t);r||(r=new Set,n._topicObservers.set(t,r)),r.add(e)}));var o=t.clientId,s=void 0===o?n.clientId:o,a=n._clientIdObservers.get(s);return a||(a=new Set),a.add(e),n._clientIdObservers.set(s,a),x(n,void 0,void 0,(function(){var n,o,a,u;return P(this,(function(c){switch(c.label){case 0:return void 0!==(n=t.url)?[3,2]:[4,this.endpoint];case 1:return a=c.sent(),[3,3];case 2:a=n,c.label=3;case 3:o=a,c.label=4;case 4:return c.trys.push([4,6,,7]),[4,this.connect(s,{url:o})];case 5:return i=c.sent(),r.forEach((function(e){i.subscribe(e)})),[3,7];case 6:return u=c.sent(),e.error(u),[3,7];case 7:return[2]}}))})),function(){var t,o;return D.debug("Unsubscribing from topic(s)",r.join(",")),i&&(null===(t=n._clientIdObservers.get(s))||void 0===t||t.delete(e),0===(null===(o=n._clientIdObservers.get(s))||void 0===o?void 0:o.size)&&(n.connectionStateMonitor.record(w.CLOSING_CONNECTION),n.disconnect(s),n._clientIdObservers.delete(s)),r.forEach((function(t){var r=n._topicObservers.get(t)||new Set;r.delete(e),0===r.size&&(n._topicObservers.delete(t),i.isConnected()&&i.unsubscribe(t))}))),null}}))},t}(v),j=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),R=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},U=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},B=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},F=new u.a("AWSAppSyncProvider"),z=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._topicClient=new Map,t._topicAlias=new Map,t}return j(t,e),Object.defineProperty(t.prototype,"endpoint",{get:function(){throw new Error("Not supported")},enumerable:!0,configurable:!0}),t.prototype.getProviderName=function(){return"AWSAppSyncProvider"},t.prototype.publish=function(e,t,n){return R(this,void 0,void 0,(function(){return U(this,(function(e){throw new Error("Operation not supported")}))}))},t.prototype._cleanUp=function(e){var t=this;Array.from(this._topicClient.entries()).filter((function(t){return B(t,2)[1].clientId===e})).map((function(e){return B(e,1)[0]})).forEach((function(e){return t._cleanUpForTopic(e)}))},t.prototype._cleanUpForTopic=function(e){this._topicClient.delete(e),this._topicAlias.delete(e)},t.prototype.onDisconnect=function(e){var t=this,n=e.clientId,r=e.errorCode,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["clientId","errorCode"]);0!==r&&(Array.from(this._topicClient.entries()).filter((function(e){return B(e,2)[1].clientId===n})).map((function(e){return B(e,1)[0]})).forEach((function(e){t._topicObservers.has(e)&&(t._topicObservers.get(e).forEach((function(e){e.closed||e.error(i)})),t._topicObservers.delete(e))})),this._cleanUp(n))},t.prototype.disconnect=function(t){return R(this,void 0,void 0,(function(){return U(this,(function(n){switch(n.label){case 0:return[4,this.clientsQueue.get(t,(function(){return null}))];case 1:return n.sent(),[4,e.prototype.disconnect.call(this,t)];case 2:return n.sent(),this._cleanUp(t),[2]}}))}))},t.prototype.subscribe=function(e,t){var n=this;void 0===t&&(t={});var r=new s.a((function(r){var i=[].concat(e);return F.debug("Subscribing to topic(s)",i.join(",")),R(n,void 0,void 0,(function(){var e,n,o,s,a,u=this;return U(this,(function(c){switch(c.label){case 0:return i.forEach((function(e){u._topicObservers.has(e)||u._topicObservers.set(e,new Set),u._topicObservers.get(e).add(r)})),e=t.mqttConnections,n=void 0===e?[]:e,o=t.newSubscriptions,s=Object.entries(o).map((function(e){var t=B(e,2),n=t[0];return[t[1].topic,n]})),this._topicAlias=new Map(function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(B(arguments[t]));return e}(Array.from(this._topicAlias.entries()),s)),a=Object.entries(i.reduce((function(e,t){var r=n.find((function(e){return e.topics.indexOf(t)>-1}));if(r){var i=r.client,o=r.url;e[i]||(e[i]={url:o,topics:new Set}),e[i].topics.add(t)}return e}),{})),[4,Promise.all(a.map((function(e){var t=B(e,2),n=t[0],i=t[1],o=i.url,s=i.topics;return R(u,void 0,void 0,(function(){var e,t,i=this;return U(this,(function(a){switch(a.label){case 0:e=null,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.connect(n,{clientId:n,url:o})];case 2:return e=a.sent(),[3,4];case 3:return t=a.sent(),r.error({message:"Failed to connect",error:t}),r.complete(),[2,void 0];case 4:return s.forEach((function(t){e.isConnected()&&(e.subscribe(t),i._topicClient.set(t,e))})),[2,e]}}))}))})))];case 1:return c.sent(),[2]}}))})),function(){F.debug("Unsubscribing from topic(s)",i.join(",")),i.forEach((function(e){var t=n._topicClient.get(e);t&&t.isConnected()&&(t.unsubscribe(e),n._topicClient.delete(e),Array.from(n._topicClient.values()).some((function(e){return e===t}))||n.disconnect(t.clientId)),n._topicObservers.delete(e)}))}}));return s.a.from(r).map((function(e){var t=n.getTopicForValue(e),r=n._topicAlias.get(t);return e.data=Object.entries(e.data).reduce((function(e,t){var n=B(t,2),i=n[0],o=n[1];return e[r||i]=o,e}),{}),e}))},t}(M),q=n(197),$=n(19),K=n(12),V=n(7),G=n(429),H=n(80),W=n(93),J=n(26),Y=n(37),Z=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Q=function(){return(Q=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},X=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},ee=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},te=new u.a("AWSAppSyncRealTimeProvider"),ne=function(e,t,n){g.a.dispatch("api",{event:e,data:t,message:n},"PubSub",E)},re=/^https:\/\/\w{26}\.appsync\-api\.\w{2}(?:(?:\-\w{2,})+)\-\d\.amazonaws.com\/graphql$/i,ie=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,t)||this;return n.socketStatus=o.CLOSED,n.keepAliveTimeout=3e5,n.subscriptionObserverMap=new Map,n.promiseArray=[],n.connectionStateMonitor=new _,n.connectionStateMonitor.connectionStateObservable.subscribe((function(e){ne("ConnectionStateChange",{provider:n,connectionState:e},"Connection state is "+e)})),n}return Z(t,e),t.prototype.getNewWebSocket=function(e,t){return new WebSocket(e,t)},t.prototype.getProviderName=function(){return"AWSAppSyncRealTimeProvider"},t.prototype.newClient=function(){throw new Error("Not used here")},t.prototype.publish=function(e,t,n){return X(this,void 0,void 0,(function(){return ee(this,(function(e){throw new Error("Operation not supported")}))}))},t.prototype.isCustomDomain=function(e){return null===e.match(re)},t.prototype.subscribe=function(e,t){var n=this,r=null==t?void 0:t.appSyncGraphqlEndpoint;return new s.a((function(e){if(t&&r){var o=Object(f.v4)();return n._startSubscriptionWithAWSAppSyncRealTime({options:t,observer:e,subscriptionId:o}).catch((function(t){e.error({errors:[Q({},new q.a(m.a.REALTIME_SUBSCRIPTION_INIT_ERROR+": "+t))]}),n.connectionStateMonitor.record(w.CLOSED),e.complete()})),function(){return X(n,void 0,void 0,(function(){var e,t;return ee(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,3,4]),[4,this._waitForSubscriptionToBeConnected(o)];case 1:if(n.sent(),!(e=(this.subscriptionObserverMap.get(o)||{}).subscriptionState))return[2];if(e!==i.CONNECTED)throw new Error("Subscription never connected");return this._sendUnsubscriptionMessage(o),[3,4];case 2:return t=n.sent(),te.debug("Error while unsubscribing "+t),[3,4];case 3:return this._removeSubscriptionObserver(o),[7];case 4:return[2]}}))}))}}e.error({errors:[Q({},new q.a("Subscribe only available for AWS AppSync endpoint"))]}),e.complete()}))},Object.defineProperty(t.prototype,"isSSLEnabled",{get:function(){return!this.options.aws_appsync_dangerously_connect_to_http_endpoint_for_testing},enumerable:!0,configurable:!0}),t.prototype._startSubscriptionWithAWSAppSyncRealTime=function(e){var t,n,o=e.options,s=e.observer,a=e.subscriptionId;return X(this,void 0,void 0,(function(){var e,u,l,d,f,p,h,v,g,y,b,_,S,E,C,A,O,I,T,x,P,k,D,N,L,M=this;return ee(this,(function(j){switch(j.label){case 0:return e=o.appSyncGraphqlEndpoint,u=o.authenticationType,l=o.query,d=o.variables,f=o.apiKey,p=o.region,h=o.graphql_headers,v=void 0===h?function(){return{}}:h,g=o.additionalHeaders,y=void 0===g?{}:g,b=i.PENDING,_={query:l,variables:d},this.subscriptionObserverMap.set(a,{observer:s,query:null!=l?l:"",variables:null!=d?d:{},subscriptionState:b,startAckTimeoutId:void 0}),S=JSON.stringify(_),C=[{}],[4,this._awsRealTimeHeaderBasedAuth({apiKey:f,appSyncGraphqlEndpoint:e,authenticationType:u,payload:S,canonicalUri:"",region:p,additionalHeaders:y})];case 1:return A=[Q.apply(void 0,C.concat([j.sent()]))],[4,v()];case 2:E=Q.apply(void 0,[Q.apply(void 0,[Q.apply(void 0,A.concat([j.sent()])),y]),(L={},L[c.c]=V.a.userAgent,L)]),O={id:a,payload:{data:S,extensions:{authorization:Q({},E)}},type:r.GQL_START},I=JSON.stringify(O),j.label=3;case 3:return j.trys.push([3,5,,6]),this.connectionStateMonitor.record(w.OPENING_CONNECTION),[4,this._initializeWebSocketConnection({apiKey:f,appSyncGraphqlEndpoint:e,authenticationType:u,region:p,additionalHeaders:y})];case 4:return j.sent(),[3,6];case 5:return T=j.sent(),te.debug({err:T}),x=null!==(t=T.message)&&void 0!==t?t:"",this.connectionStateMonitor.record(w.CLOSED),s.error({errors:[Q({},new q.a(m.a.CONNECTION_FAILED+": "+x))]}),s.complete(),"function"==typeof(P=(this.subscriptionObserverMap.get(a)||{}).subscriptionFailedCallback)&&P(),[2];case 6:return k=null!==(n=this.subscriptionObserverMap.get(a))&&void 0!==n?n:{},D=k.subscriptionFailedCallback,N=k.subscriptionReadyCallback,this.subscriptionObserverMap.set(a,{observer:s,subscriptionState:b,query:null!=l?l:"",variables:null!=d?d:{},subscriptionReadyCallback:N,subscriptionFailedCallback:D,startAckTimeoutId:setTimeout((function(){M._timeoutStartSubscriptionAck.call(M,a)}),15e3)}),this.awsRealTimeSocket&&this.awsRealTimeSocket.send(I),[2]}}))}))},t.prototype._waitForSubscriptionToBeConnected=function(e){return X(this,void 0,void 0,(function(){var t,n=this;return ee(this,(function(r){return(t=this.subscriptionObserverMap.get(e))&&t.subscriptionState===i.PENDING?[2,new Promise((function(r,i){var o=t.observer,s=t.subscriptionState,a=t.variables,u=t.query;n.subscriptionObserverMap.set(e,{observer:o,subscriptionState:s,variables:a,query:u,subscriptionReadyCallback:r,subscriptionFailedCallback:i})}))]:[2]}))}))},t.prototype._sendUnsubscriptionMessage=function(e){try{if(this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.socketStatus===o.READY){var t={id:e,type:r.GQL_STOP},n=JSON.stringify(t);this.awsRealTimeSocket.send(n)}}catch(e){te.debug({err:e})}},t.prototype._removeSubscriptionObserver=function(e){this.subscriptionObserverMap.delete(e),setTimeout(this._closeSocketIfRequired.bind(this),1e3)},t.prototype._closeSocketIfRequired=function(){if(!(this.subscriptionObserverMap.size>0))if(this.awsRealTimeSocket)if(this.connectionStateMonitor.record(w.CLOSING_CONNECTION),this.awsRealTimeSocket.bufferedAmount>0)setTimeout(this._closeSocketIfRequired.bind(this),1e3);else{te.debug("closing WebSocket..."),this.keepAliveTimeoutId&&clearTimeout(this.keepAliveTimeoutId),this.keepAliveAlertTimeoutId&&clearTimeout(this.keepAliveAlertTimeoutId);var e=this.awsRealTimeSocket;e.onclose=null,e.onerror=null,e.close(1e3),this.awsRealTimeSocket=void 0,this.socketStatus=o.CLOSED,this.connectionStateMonitor.record(w.CLOSED)}else this.socketStatus=o.CLOSED},t.prototype._handleIncomingSubscriptionMessage=function(e){var t=this;te.debug("subscription message from AWS AppSync RealTime: "+e.data);var n=JSON.parse(e.data),o=n.id,s=void 0===o?"":o,a=n.payload,u=n.type,c=this.subscriptionObserverMap.get(s)||{},l=c.observer,d=void 0===l?null:l,f=c.query,p=void 0===f?"":f,h=c.variables,v=void 0===h?{}:h,g=c.startAckTimeoutId,y=c.subscriptionReadyCallback,b=c.subscriptionFailedCallback;if(te.debug({id:s,observer:d,query:p,variables:v}),u===r.GQL_DATA&&a&&a.data)d?d.next(a):te.debug("observer not found for id: "+s);else{if(u===r.GQL_START_ACK){te.debug("subscription ready for "+JSON.stringify({query:p,variables:v})),"function"==typeof y&&y(),g&&clearTimeout(g),ne(m.a.SUBSCRIPTION_ACK,{query:p,variables:v},"Connection established for subscription");var _=i.CONNECTED;return d&&this.subscriptionObserverMap.set(s,{observer:d,query:p,variables:v,startAckTimeoutId:void 0,subscriptionState:_,subscriptionReadyCallback:y,subscriptionFailedCallback:b}),void this.connectionStateMonitor.record(w.CONNECTION_ESTABLISHED)}if(u===r.GQL_CONNECTION_KEEP_ALIVE)return this.keepAliveTimeoutId&&clearTimeout(this.keepAliveTimeoutId),this.keepAliveAlertTimeoutId&&clearTimeout(this.keepAliveAlertTimeoutId),this.keepAliveTimeoutId=setTimeout((function(){return t._errorDisconnect(m.a.TIMEOUT_DISCONNECT)}),this.keepAliveTimeout),this.keepAliveAlertTimeoutId=setTimeout((function(){t.connectionStateMonitor.record(w.KEEP_ALIVE_MISSED)}),65e3),void this.connectionStateMonitor.record(w.KEEP_ALIVE);u===r.GQL_ERROR&&(_=i.FAILED,d&&(this.subscriptionObserverMap.set(s,{observer:d,query:p,variables:v,startAckTimeoutId:g,subscriptionReadyCallback:y,subscriptionFailedCallback:b,subscriptionState:_}),d.error({errors:[Q({},new q.a(m.a.CONNECTION_FAILED+": "+JSON.stringify(a)))]}),g&&clearTimeout(g),d.complete(),"function"==typeof b&&b()))}},t.prototype._errorDisconnect=function(e){te.debug("Disconnect error: "+e),this.subscriptionObserverMap.forEach((function(t){var n=t.observer;n&&!n.closed&&n.error({errors:[Q({},new q.a(e))]})})),this.subscriptionObserverMap.clear(),this.awsRealTimeSocket&&(this.connectionStateMonitor.record(w.CLOSED),this.awsRealTimeSocket.close()),this.socketStatus=o.CLOSED},t.prototype._timeoutStartSubscriptionAck=function(e){var t=this.subscriptionObserverMap.get(e);if(t){var n=t.observer,r=t.query,o=t.variables;if(!n)return;this.subscriptionObserverMap.set(e,{observer:n,query:r,variables:o,subscriptionState:i.FAILED}),n&&!n.closed&&(n.error({errors:[Q({},new q.a("Subscription timeout "+JSON.stringify({query:r,variables:o})))]}),n.complete()),te.debug("timeoutStartSubscription",JSON.stringify({query:r,variables:o}))}},t.prototype._initializeWebSocketConnection=function(e){var t=this,n=e.appSyncGraphqlEndpoint,r=e.authenticationType,i=e.apiKey,s=e.region,a=e.additionalHeaders;if(this.socketStatus!==o.READY)return new Promise((function(e,u){return X(t,void 0,void 0,(function(){var t,c,l,d,f,p,h,v,g,m;return ee(this,(function(y){switch(y.label){case 0:if(this.promiseArray.push({res:e,rej:u}),this.socketStatus!==o.CLOSED)return[3,5];y.label=1;case 1:return y.trys.push([1,4,,5]),this.socketStatus=o.CONNECTING,t="{}",d=(l=JSON).stringify,[4,this._awsRealTimeHeaderBasedAuth({authenticationType:r,payload:t,canonicalUri:"/connect",apiKey:i,appSyncGraphqlEndpoint:n,region:s,additionalHeaders:a})];case 2:return c=d.apply(l,[y.sent()]),f=K.Buffer.from(c).toString("base64"),p=K.Buffer.from(t).toString("base64"),h=null!=n?n:"",h=this.isCustomDomain(h)?h.concat("/realtime"):h.replace("appsync-api","appsync-realtime-api").replace("gogi-beta","grt-beta"),v=this.isSSLEnabled?"wss://":"ws://",h=h.replace("https://",v).replace("http://",v),g=h+"?header="+f+"&payload="+p,[4,this._initializeRetryableHandshake(g)];case 3:return y.sent(),this.promiseArray.forEach((function(e){var t=e.res;te.debug("Notifying connection successful"),t()})),this.socketStatus=o.READY,this.promiseArray=[],[3,5];case 4:return m=y.sent(),this.promiseArray.forEach((function(e){return(0,e.rej)(m)})),this.promiseArray=[],this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.awsRealTimeSocket.close(3001),this.awsRealTimeSocket=void 0,this.socketStatus=o.CLOSED,[3,5];case 5:return[2]}}))}))}))},t.prototype._initializeRetryableHandshake=function(e){return X(this,void 0,void 0,(function(){return ee(this,(function(t){switch(t.label){case 0:return te.debug("Initializaling retryable Handshake"),[4,Object(G.c)(this._initializeHandshake.bind(this),[e],5e3)];case 1:return t.sent(),[2]}}))}))},t.prototype._initializeHandshake=function(e){return X(this,void 0,void 0,(function(){var t,n,i,o,s=this;return ee(this,(function(a){switch(a.label){case 0:te.debug("Initializing handshake "+e),a.label=1;case 1:return a.trys.push([1,4,,5]),[4,new Promise((function(t,n){var r=s.getNewWebSocket(e,"graphql-ws");r.onerror=function(){te.debug("WebSocket connection error")},r.onclose=function(){s.connectionStateMonitor.record(w.CONNECTION_FAILED),n(new Error("Connection handshake error"))},r.onopen=function(){return s.awsRealTimeSocket=r,t()}}))];case 2:return a.sent(),[4,new Promise((function(e,t){if(s.awsRealTimeSocket){var n=!1;s.awsRealTimeSocket.onerror=function(e){te.debug("WebSocket error "+JSON.stringify(e))},s.awsRealTimeSocket.onclose=function(e){te.debug("WebSocket closed "+e.reason),t(new Error(JSON.stringify(e)))},s.awsRealTimeSocket.onmessage=function(i){te.debug("subscription message from AWS AppSyncRealTime: "+i.data+" ");var o=JSON.parse(i.data),a=o.type,u=o.payload,c=(void 0===u?{}:u).connectionTimeoutMs,l=void 0===c?3e5:c;if(a===r.GQL_CONNECTION_ACK)return n=!0,s.awsRealTimeSocket&&(s.keepAliveTimeout=l,s.awsRealTimeSocket.onmessage=s._handleIncomingSubscriptionMessage.bind(s),s.awsRealTimeSocket.onerror=function(e){te.debug(e),s._errorDisconnect(m.a.CONNECTION_CLOSED)},s.awsRealTimeSocket.onclose=function(e){te.debug("WebSocket closed "+e.reason),s._errorDisconnect(m.a.CONNECTION_CLOSED)}),void e("Cool, connected to AWS AppSyncRealTime");if(a===r.GQL_CONNECTION_ERROR){var d=o.payload,f=(void 0===d?{}:d).errors,p=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}(void 0===f?[]:f,1)[0],h=void 0===p?{}:p,v=h.errorType,g=void 0===v?"":v,y=h.errorCode;t({errorType:g,errorCode:void 0===y?0:y})}};var i={type:r.GQL_CONNECTION_INIT};s.awsRealTimeSocket.send(JSON.stringify(i)),setTimeout((function(){n||(s.connectionStateMonitor.record(w.CONNECTION_FAILED),t(new Error("Connection timeout: ack from AWSAppSyncRealTime was not received after 15000 ms")))}),15e3)}}))];case 3:return a.sent(),[3,5];case 4:throw t=a.sent(),i=(n=t).errorType,o=n.errorCode,S.includes(o)?new G.a(i):i?new Error(i):t;case 5:return[2]}}))}))},t.prototype._awsRealTimeHeaderBasedAuth=function(e){var t=e.authenticationType,n=e.payload,r=e.canonicalUri,i=e.appSyncGraphqlEndpoint,o=e.apiKey,s=e.region,a=e.additionalHeaders;return X(this,void 0,void 0,(function(){var e,u,c;return ee(this,(function(l){switch(l.label){case 0:return e={API_KEY:this._awsRealTimeApiKeyHeader.bind(this),AWS_IAM:this._awsRealTimeIAMHeader.bind(this),OPENID_CONNECT:this._awsRealTimeOPENIDHeader.bind(this),AMAZON_COGNITO_USER_POOLS:this._awsRealTimeCUPHeader.bind(this),AWS_LAMBDA:this._customAuthHeader},t&&e[t]?[3,1]:(te.debug("Authentication type "+t+" not supported"),[2,""]);case 1:return u=e[t],c=$.parse(null!=i?i:"").host,te.debug("Authenticating with "+t),[4,u({payload:n,canonicalUri:r,appSyncGraphqlEndpoint:i,apiKey:o,region:s,host:c,additionalHeaders:a})];case 2:return[2,l.sent()]}}))}))},t.prototype._awsRealTimeCUPHeader=function(e){var t=e.host;return X(this,void 0,void 0,(function(){return ee(this,(function(e){switch(e.label){case 0:return[4,Y.a.currentSession()];case 1:return[2,{Authorization:e.sent().getAccessToken().getJwtToken(),host:t}]}}))}))},t.prototype._awsRealTimeOPENIDHeader=function(e){var t=e.host;return X(this,void 0,void 0,(function(){var e,n,r;return ee(this,(function(i){switch(i.label){case 0:return[4,J.b.getItem("federatedInfo")];case 1:return(n=i.sent())?(e=n.token,[3,4]):[3,2];case 2:return[4,Y.a.currentAuthenticatedUser()];case 3:(r=i.sent())&&(e=r.token),i.label=4;case 4:if(!e)throw new Error("No federated jwt");return[2,{Authorization:e,host:t}]}}))}))},t.prototype._awsRealTimeApiKeyHeader=function(e){var t=e.apiKey,n=e.host;return X(this,void 0,void 0,(function(){var e,r;return ee(this,(function(i){return e=new Date,r=e.toISOString().replace(/[:\-]|\.\d{3}/g,""),[2,{host:n,"x-amz-date":r,"x-api-key":t}]}))}))},t.prototype._awsRealTimeIAMHeader=function(e){var t=e.payload,n=e.canonicalUri,r=e.appSyncGraphqlEndpoint,i=e.region;return X(this,void 0,void 0,(function(){var e,o,s;return ee(this,(function(a){switch(a.label){case 0:return e={region:i,service:"appsync"},[4,this._ensureCredentials()];case 1:if(!a.sent())throw new Error("No credentials");return[4,H.a.get().then((function(e){var t=e;return{secret_key:t.secretAccessKey,access_key:t.accessKeyId,session_token:t.sessionToken}}))];case 2:return o=a.sent(),s={url:""+r+n,data:t,method:"POST",headers:Q({},C)},[2,W.a.sign(s,o,e).headers]}}))}))},t.prototype._customAuthHeader=function(e){var t=e.host,n=e.additionalHeaders;if(!n||!n.Authorization)throw new Error("No auth token specified");return{Authorization:n.Authorization,host:t}},t.prototype._ensureCredentials=function(){return H.a.get().then((function(e){if(!e)return!1;var t=H.a.shear(e);return te.debug("set credentials for AWSAppSyncRealTimeProvider",t),!0})).catch((function(e){return te.warn("ensure credentials error",e),!1}))},t}(v),oe=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},se=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},ae=Object(a.b)().isNode,ue=new u.a("PubSub"),ce=new(function(){function e(e){this._options=null!=e?e:{},ue.debug("PubSub Options",this._options),this._pluggables=[],this.subscribe=this.subscribe.bind(this)}return Object.defineProperty(e.prototype,"awsAppSyncProvider",{get:function(){return this._awsAppSyncProvider||(this._awsAppSyncProvider=new z(this._options)),this._awsAppSyncProvider},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"awsAppSyncRealTimeProvider",{get:function(){return this._awsAppSyncRealTimeProvider||(this._awsAppSyncRealTimeProvider=new ie(this._options)),this._awsAppSyncRealTimeProvider},enumerable:!0,configurable:!0}),e.prototype.getModuleName=function(){return"PubSub"},e.prototype.configure=function(e){var t=this,n=e?e.PubSub||e:{};return ue.debug("configure PubSub",{opt:n}),this._options=Object.assign({},this._options,n),this._pluggables.map((function(e){return e.configure(t._options)})),this._options},e.prototype.addPluggable=function(e){return oe(this,void 0,void 0,(function(){return se(this,(function(t){return e&&"PubSub"===e.getCategory()?(this._pluggables.push(e),[2,e.configure(this._options)]):[2]}))}))},e.prototype.removePluggable=function(e){this._pluggables=this._pluggables.filter((function(t){return t.getProviderName()!==e}))},e.prototype.getProviderByName=function(e){return e===c.a?this.awsAppSyncProvider:e===c.b?this.awsAppSyncRealTimeProvider:this._pluggables.find((function(t){return t.getProviderName()===e}))},e.prototype.getProviders=function(e){void 0===e&&(e={});var t=e.provider;if(!t)return this._pluggables;var n=this.getProviderByName(t);if(!n)throw new Error("Could not find provider named "+t);return[n]},e.prototype.publish=function(e,t,n){return oe(this,void 0,void 0,(function(){return se(this,(function(r){return[2,Promise.all(this.getProviders(n).map((function(r){return r.publish(e,t,n)})))]}))}))},e.prototype.subscribe=function(e,t){if(ae&&this._options&&this._options.ssr)throw new Error("Subscriptions are not supported for Server-Side Rendering (SSR)");ue.debug("subscribe options",t);var n=this.getProviders(t);return new s.a((function(r){var i=n.map((function(n){return{provider:n,observable:n.subscribe(e,t)}})).map((function(e){var t=e.provider;return e.observable.subscribe({start:console.error,next:function(e){return r.next({provider:t,value:e})},error:function(e){return r.error({provider:t,error:e})}})}));return function(){return i.forEach((function(e){return e.unsubscribe()}))}}))},e}());l.a.register(ce)},function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var r,i=n(48),o=n(20),s=n(7),a=n(80),u=n(93),c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},l=new i.a("AbstractXRProvider"),d=function(){function e(e){void 0===e&&(e={}),this._config=e}return e.prototype.configure=function(e){return void 0===e&&(e={}),this._config=c(c({},e),this._config),l.debug("configure "+this.getProviderName(),this._config),this.options},e.prototype.getCategory=function(){return"XR"},Object.defineProperty(e.prototype,"options",{get:function(){return c({},this._config)},enumerable:!0,configurable:!0}),e}(),f=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t}(Error),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t}(p),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t}(p),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t}(p),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t}(p),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t}(p),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t}(p),w=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_=function(){return(_=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},S=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},E=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},C=new i.a("SumerianProvider"),A=function(e){function t(t){return void 0===t&&(t={}),e.call(this,t)||this}return w(t,e),t.prototype.getProviderName=function(){return"SumerianProvider"},t.prototype.loadScript=function(e){return S(this,void 0,void 0,(function(){return E(this,(function(t){return[2,new Promise((function(t,n){var r=document.createElement("script");r.src=e,r.addEventListener("load",(function(e){t()})),r.addEventListener("error",(function(t){n(new Error("Failed to load script: "+e))})),document.head.appendChild(r)}))]}))}))},t.prototype.loadScene=function(e,t,n){return S(this,void 0,void 0,(function(){var r,i,o,c,l,d,f,p,h,v,g,b,w,S,A,O,I,T,x,P,k,D,N,L,M,j,R;return E(this,(function(E){switch(E.label){case 0:if(!e)throw d="No scene name passed into loadScene",C.error(d),new y(d);if(!t)throw d="No dom element id passed into loadScene",C.error(d),new m(d);if(!(r=document.getElementById(t)))throw d="DOM element id, "+t+" not found",C.error(d),new m(d);if(!(i=this.getScene(e)).sceneConfig)throw d="No scene config configured for scene: "+e,C.error(d),new y(d);if(o=i.sceneConfig.url,c=i.sceneConfig.sceneId,i.sceneConfig.hasOwnProperty("region"))l=i.sceneConfig.region;else{if(!this.options.hasOwnProperty("region"))throw d="No region configured for scene: "+e,C.error(d),new y(d);l=this.options.region}f={region:l,customUserAgent:s.a.userAgent+"-SumerianScene"},p={headers:{"X-Amz-User-Agent":s.a.userAgent}},h=o,E.label=1;case 1:return E.trys.push([1,3,,4]),[4,a.a.get()];case 2:return v=E.sent(),f.credentials=v,g={secret_key:v.secretAccessKey,access_key:v.accessKeyId,session_token:v.sessionToken},b={region:l,service:"sumerian"},w=u.a.sign({method:"GET",url:o},g,b),p.headers=_(_({},p.headers),w.headers),h=w.url,[3,4];case 3:return E.sent(),C.debug("No credentials available, the request will be unsigned"),[3,4];case 4:return[4,fetch(h,p)];case 5:return[4,(S=E.sent()).json()];case 6:if(A=E.sent(),403===S.status)throw A.message?(C.error("Failure to authenticate user: "+A.message),new y("Failure to authenticate user: "+A.message)):(C.error("Failure to authenticate user"),new y("Failure to authenticate user"));return O=A.bundleData[c],[4,fetch(O.url,{headers:O.headers})];case 7:return[4,E.sent().json()];case 8:I=E.sent(),E.label=9;case 9:return E.trys.push([9,11,,12]),[4,this.loadScript(I[c].bootstrapperUrl)];case 10:return E.sent(),[3,12];case 11:throw T=E.sent(),C.error(T),new y(T);case 12:return x=n.progressCallback?n.progressCallback:void 0,P=i.publishParamOverrides?i.publishParamOverrides:void 0,k={element:r,sceneId:c,sceneBundle:I,apiResponse:A,progressCallback:x,publishParamOverrides:P,awsSDKConfigOverride:f},[4,window.SumerianBootstrapper.loadScene(k)];case 13:D=E.sent(),i.sceneController=D,i.isLoaded=!0;try{for(N=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(D.sceneLoadWarnings),L=N.next();!L.done;L=N.next())M=L.value,C.warn("loadScene warning: "+M)}catch(e){j={error:e}}finally{try{L&&!L.done&&(R=N.return)&&R.call(N)}finally{if(j)throw j.error}}return[2]}}))}))},t.prototype.isSceneLoaded=function(e){return this.getScene(e).isLoaded||!1},t.prototype.getScene=function(e){if(!this.options.scenes){var t="No scenes were defined in the configuration";throw C.error(t),new h(t)}if(!e)throw t="No scene name was passed",C.error(t),new v(t);if(!this.options.scenes[e])throw t="Scene '"+e+"' is not configured",C.error(t),new v(t);return this.options.scenes[e]},t.prototype.getSceneController=function(e){if(!this.options.scenes){var t="No scenes were defined in the configuration";throw C.error(t),new h(t)}var n=this.options.scenes[e];if(!n)throw t="Scene '"+e+"' is not configured",C.error(t),new v(t);var r=n.sceneController;if(!r)throw t="Scene controller for '"+e+"' has not been loaded",C.error(t),new g(t);return r},t.prototype.isVRCapable=function(e){return this.getSceneController(e).vrCapable},t.prototype.isVRPresentationActive=function(e){return this.getSceneController(e).vrPresentationActive},t.prototype.start=function(e){this.getSceneController(e).start()},t.prototype.enterVR=function(e){this.getSceneController(e).enterVR()},t.prototype.exitVR=function(e){this.getSceneController(e).exitVR()},t.prototype.isMuted=function(e){return this.getSceneController(e).muted},t.prototype.setMuted=function(e,t){this.getSceneController(e).muted=t},t.prototype.onSceneEvent=function(e,t,n){this.getSceneController(e).on(t,n)},t.prototype.enableAudio=function(e){this.getSceneController(e).enableAudio()},t}(d),O=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},I=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},T=new i.a("XR"),x=new(function(){function e(e){this._options=e,T.debug("XR Options",this._options),this._defaultProvider="SumerianProvider",this._pluggables={},this.addPluggable(new A)}return e.prototype.configure=function(e){var t=this,n=e?e.XR||e:{};return T.debug("configure XR",{opt:n}),this._options=Object.assign({},this._options,n),Object.entries(this._pluggables).map((function(e){var r=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}(e,2),i=r[0],o=r[1];i!==t._defaultProvider||n[t._defaultProvider]?o.configure(t._options[i]):o.configure(t._options)})),this._options},e.prototype.addPluggable=function(e){return O(this,void 0,void 0,(function(){return I(this,(function(t){return e&&"XR"===e.getCategory()?(this._pluggables[e.getProviderName()]=e,[2,e.configure(this._options)]):[2]}))}))},e.prototype.loadScene=function(e,t,n,r){return void 0===n&&(n={}),void 0===r&&(r=this._defaultProvider),O(this,void 0,void 0,(function(){return I(this,(function(i){switch(i.label){case 0:if(!this._pluggables[r])throw new b("Provider '"+r+"' not configured");return[4,this._pluggables[r].loadScene(e,t,n)];case 1:return[2,i.sent()]}}))}))},e.prototype.isSceneLoaded=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new b("Provider '"+t+"' not configured");return this._pluggables[t].isSceneLoaded(e)},e.prototype.getSceneController=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new b("Provider '"+t+"' not configured");return this._pluggables[t].getSceneController(e)},e.prototype.isVRCapable=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new b("Provider '"+t+"' not configured");return this._pluggables[t].isVRCapable(e)},e.prototype.isVRPresentationActive=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new b("Provider '"+t+"' not configured");return this._pluggables[t].isVRPresentationActive(e)},e.prototype.start=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new b("Provider '"+t+"' not configured");return this._pluggables[t].start(e)},e.prototype.enterVR=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new b("Provider '"+t+"' not configured");return this._pluggables[t].enterVR(e)},e.prototype.exitVR=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new b("Provider '"+t+"' not configured");return this._pluggables[t].exitVR(e)},e.prototype.isMuted=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new b("Provider '"+t+"' not configured");return this._pluggables[t].isMuted(e)},e.prototype.setMuted=function(e,t,n){if(void 0===n&&(n=this._defaultProvider),!this._pluggables[n])throw new b("Provider '"+n+"' not configured");return this._pluggables[n].setMuted(e,t)},e.prototype.onSceneEvent=function(e,t,n,r){if(void 0===r&&(r=this._defaultProvider),!this._pluggables[r])throw new b("Provider '"+r+"' not configured");return this._pluggables[r].onSceneEvent(e,t,n)},e.prototype.enableAudio=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new b("Provider '"+t+"' not configured");return this._pluggables[t].enableAudio(e)},e}())(null);o.a.register(x)},function(e,t,n){"use strict";n.r(t),n.d(t,"fromUtf8",(function(){return r})),n.d(t,"toUtf8",(function(){return i}));var r=function(e){return"function"==typeof TextEncoder?function(e){return(new TextEncoder).encode(e)}(e):function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e.charCodeAt(n);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192,63&i|128);else if(n+1<e.length&&55296==(64512&i)&&56320==(64512&e.charCodeAt(n+1))){var o=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n));t.push(o>>18|240,o>>12&63|128,o>>6&63|128,63&o|128)}else t.push(i>>12|224,i>>6&63|128,63&i|128)}return Uint8Array.from(t)}(e)},i=function(e){return"function"==typeof TextDecoder?function(e){return new TextDecoder("utf-8").decode(e)}(e):function(e){for(var t="",n=0,r=e.length;n<r;n++){var i=e[n];if(i<128)t+=String.fromCharCode(i);else if(192<=i&&i<224){var o=e[++n];t+=String.fromCharCode((31&i)<<6|63&o)}else if(240<=i&&i<365){var s="%"+[i,e[++n],e[++n],e[++n]].map((function(e){return e.toString(16)})).join("%");t+=decodeURIComponent(s)}else t+=String.fromCharCode((15&i)<<12|(63&e[++n])<<6|63&e[++n])}return t}(e)}},function(e,t,n){"use strict";n.r(t),n.d(t,"fromUtf8",(function(){return r})),n.d(t,"toUtf8",(function(){return i}));const r=e=>"function"==typeof TextEncoder?function(e){return(new TextEncoder).encode(e)}(e):(e=>{const t=[];for(let n=0,r=e.length;n<r;n++){const r=e.charCodeAt(n);if(r<128)t.push(r);else if(r<2048)t.push(r>>6|192,63&r|128);else if(n+1<e.length&&55296==(64512&r)&&56320==(64512&e.charCodeAt(n+1))){const i=65536+((1023&r)<<10)+(1023&e.charCodeAt(++n));t.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}else t.push(r>>12|224,r>>6&63|128,63&r|128)}return Uint8Array.from(t)})(e),i=e=>"function"==typeof TextDecoder?function(e){return new TextDecoder("utf-8").decode(e)}(e):(e=>{let t="";for(let n=0,r=e.length;n<r;n++){const r=e[n];if(r<128)t+=String.fromCharCode(r);else if(192<=r&&r<224){const i=e[++n];t+=String.fromCharCode((31&r)<<6|63&i)}else if(240<=r&&r<365){const i="%"+[r,e[++n],e[++n],e[++n]].map((e=>e.toString(16))).join("%");t+=decodeURIComponent(i)}else t+=String.fromCharCode((15&r)<<12|(63&e[++n])<<6|63&e[++n])}return t})(e)},function(e,t,n){"use strict";n.r(t),n.d(t,"fromUtf8",(function(){return r})),n.d(t,"toUtf8",(function(){return i}));const r=e=>"function"==typeof TextEncoder?function(e){return(new TextEncoder).encode(e)}(e):(e=>{const t=[];for(let n=0,r=e.length;n<r;n++){const r=e.charCodeAt(n);if(r<128)t.push(r);else if(r<2048)t.push(r>>6|192,63&r|128);else if(n+1<e.length&&55296==(64512&r)&&56320==(64512&e.charCodeAt(n+1))){const i=65536+((1023&r)<<10)+(1023&e.charCodeAt(++n));t.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}else t.push(r>>12|224,r>>6&63|128,63&r|128)}return Uint8Array.from(t)})(e),i=e=>"function"==typeof TextDecoder?function(e){return new TextDecoder("utf-8").decode(e)}(e):(e=>{let t="";for(let n=0,r=e.length;n<r;n++){const r=e[n];if(r<128)t+=String.fromCharCode(r);else if(192<=r&&r<224){const i=e[++n];t+=String.fromCharCode((31&r)<<6|63&i)}else if(240<=r&&r<365){const i="%"+[r,e[++n],e[++n],e[++n]].map((e=>e.toString(16))).join("%");t+=decodeURIComponent(i)}else t+=String.fromCharCode((15&r)<<12|(63&e[++n])<<6|63&e[++n])}return t})(e)},function(e,t,n){"use strict";n.r(t),n.d(t,"fromUtf8",(function(){return r})),n.d(t,"toUtf8",(function(){return i}));const r=e=>"function"==typeof TextEncoder?function(e){return(new TextEncoder).encode(e)}(e):(e=>{const t=[];for(let n=0,r=e.length;n<r;n++){const r=e.charCodeAt(n);if(r<128)t.push(r);else if(r<2048)t.push(r>>6|192,63&r|128);else if(n+1<e.length&&55296==(64512&r)&&56320==(64512&e.charCodeAt(n+1))){const i=65536+((1023&r)<<10)+(1023&e.charCodeAt(++n));t.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}else t.push(r>>12|224,r>>6&63|128,63&r|128)}return Uint8Array.from(t)})(e),i=e=>"function"==typeof TextDecoder?function(e){return new TextDecoder("utf-8").decode(e)}(e):(e=>{let t="";for(let n=0,r=e.length;n<r;n++){const r=e[n];if(r<128)t+=String.fromCharCode(r);else if(192<=r&&r<224){const i=e[++n];t+=String.fromCharCode((31&r)<<6|63&i)}else if(240<=r&&r<365){const i="%"+[r,e[++n],e[++n],e[++n]].map((e=>e.toString(16))).join("%");t+=decodeURIComponent(i)}else t+=String.fromCharCode((15&r)<<12|(63&e[++n])<<6|63&e[++n])}return t})(e)},function(e,t,n){"use strict";n.r(t),n.d(t,"fromUtf8",(function(){return r})),n.d(t,"toUtf8",(function(){return i}));const r=e=>"function"==typeof TextEncoder?function(e){return(new TextEncoder).encode(e)}(e):(e=>{const t=[];for(let n=0,r=e.length;n<r;n++){const r=e.charCodeAt(n);if(r<128)t.push(r);else if(r<2048)t.push(r>>6|192,63&r|128);else if(n+1<e.length&&55296==(64512&r)&&56320==(64512&e.charCodeAt(n+1))){const i=65536+((1023&r)<<10)+(1023&e.charCodeAt(++n));t.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}else t.push(r>>12|224,r>>6&63|128,63&r|128)}return Uint8Array.from(t)})(e),i=e=>"function"==typeof TextDecoder?function(e){return new TextDecoder("utf-8").decode(e)}(e):(e=>{let t="";for(let n=0,r=e.length;n<r;n++){const r=e[n];if(r<128)t+=String.fromCharCode(r);else if(192<=r&&r<224){const i=e[++n];t+=String.fromCharCode((31&r)<<6|63&i)}else if(240<=r&&r<365){const i="%"+[r,e[++n],e[++n],e[++n]].map((e=>e.toString(16))).join("%");t+=decodeURIComponent(i)}else t+=String.fromCharCode((15&r)<<12|(63&e[++n])<<6|63&e[++n])}return t})(e)},function(e,t,n){"use strict";n.r(t),n.d(t,"fromUtf8",(function(){return r})),n.d(t,"toUtf8",(function(){return i}));const r=e=>"function"==typeof TextEncoder?function(e){return(new TextEncoder).encode(e)}(e):(e=>{const t=[];for(let n=0,r=e.length;n<r;n++){const r=e.charCodeAt(n);if(r<128)t.push(r);else if(r<2048)t.push(r>>6|192,63&r|128);else if(n+1<e.length&&55296==(64512&r)&&56320==(64512&e.charCodeAt(n+1))){const i=65536+((1023&r)<<10)+(1023&e.charCodeAt(++n));t.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}else t.push(r>>12|224,r>>6&63|128,63&r|128)}return Uint8Array.from(t)})(e),i=e=>"function"==typeof TextDecoder?function(e){return new TextDecoder("utf-8").decode(e)}(e):(e=>{let t="";for(let n=0,r=e.length;n<r;n++){const r=e[n];if(r<128)t+=String.fromCharCode(r);else if(192<=r&&r<224){const i=e[++n];t+=String.fromCharCode((31&r)<<6|63&i)}else if(240<=r&&r<365){const i="%"+[r,e[++n],e[++n],e[++n]].map((e=>e.toString(16))).join("%");t+=decodeURIComponent(i)}else t+=String.fromCharCode((15&r)<<12|(63&e[++n])<<6|63&e[++n])}return t})(e)},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r,i,o=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},a=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},u=function(){function e(){this._state=i.Open,this.jobs=new Set}return e.prototype.add=function(t,n){var r,i;"string"==typeof t?(r=void 0,i=t):(r=t,i=n);var o=this.closedFailure(i);if(o)return o;if(void 0===r)return this.addHook(i);if("function"==typeof r)return this.addFunction(r,i);if(r instanceof e)return this.addManager(r,i);throw new Error("If `job` is provided, it must be an Observable, Function, or BackgroundProcessManager.")},e.prototype.addCleaner=function(e,t){var n=this,r=this.addHook(t),i=r.resolve,o=function(){return s(n,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return[4,e()];case 1:return t.sent(),i(),[2]}}))}))};return r.onTerminate.then(o),o},e.prototype.addFunction=function(e,t){var n,r=e(new Promise((function(e){n=e})));return"function"==typeof(null==r?void 0:r.then)&&this.registerPromise(r,n,t),r},e.prototype.addManager=function(e,t){var n=this;this.addCleaner((function(){return s(n,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return[4,e.close()];case 1:return[2,t.sent()]}}))}))}),t)},e.prototype.addHook=function(e){var t,n,r,i=new Promise((function(e,r){t=e,n=r})),o=new Promise((function(e){r=e}));return this.registerPromise(i,r,e),{resolve:t,reject:n,onTerminate:o}},e.prototype.registerPromise=function(e,t,n){var r=this,i={promise:e,terminate:t,description:n};this.jobs.add(i),e.then((function(){r.jobs.delete(i)})).catch((function(){r.jobs.delete(i)}))},Object.defineProperty(e.prototype,"length",{get:function(){return this.jobs.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pending",{get:function(){return Array.from(this.jobs).map((function(e){return e.description}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isOpen",{get:function(){return this._state===i.Open},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isClosing",{get:function(){return this._state===i.Closing},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isClosed",{get:function(){return this._state===i.Closed},enumerable:!0,configurable:!0}),e.prototype.closedFailure=function(e){if(!this.isOpen)return Promise.reject(new c(["The manager is "+this.state+".",'You tried to add "'+e+'".',"Pending jobs: [\n"+this.pending.map((function(e){return"    "+e})).join(",\n")+"\n]"].join("\n")))},e.prototype.close=function(){return s(this,void 0,void 0,(function(){var e,t,n,r,o;return a(this,(function(s){switch(s.label){case 0:if(!this.isOpen)return[3,2];this._state=i.Closing;try{for(e=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(Array.from(this.jobs)),t=e.next();!t.done;t=e.next()){n=t.value;try{n.terminate()}catch(e){}}}catch(e){r={error:e}}finally{try{t&&!t.done&&(o=e.return)&&o.call(e)}finally{if(r)throw r.error}}return this._closingPromise=Promise.allSettled(Array.from(this.jobs).map((function(e){return e.promise}))),[4,this._closingPromise];case 1:s.sent(),this._state=i.Closed,s.label=2;case 2:return[2,this._closingPromise]}}))}))},e.prototype.open=function(){return s(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return this.isClosing?[4,this.close()]:[3,2];case 1:e.sent(),e.label=2;case 2:return this._state=i.Open,[2]}}))}))},e}(),c=function(e){function t(t){return e.call(this,"BackgroundManagerNotOpenError: "+t)||this}return o(t,e),t}(Error);!function(e){e.Open="Open",e.Closing="Closing",e.Closed="Closed"}(i||(i={}))},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"d",(function(){return p})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return v}));var r=n(48);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o,s=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},u=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},c=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},l=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(c(arguments[t]));return e},d=new r.a("Util"),f=function(e){function t(t){var n=e.call(this,t)||this;return n.nonRetryable=!0,n}return s(t,e),t}(Error);function p(e,t,n,r){return a(this,void 0,void 0,(function(){var o=this;return u(this,(function(s){if("function"!=typeof e)throw Error("functionToRetry must be a function");return[2,new Promise((function(s,c){return a(o,void 0,void 0,(function(){var o,a,f,p,h,v,g;return u(this,(function(m){switch(m.label){case 0:o=0,a=!1,p=function(){},r&&r.then((function(){a=!0,clearTimeout(f),p()})),v=function(){var r,i,v,g;return u(this,(function(u){switch(u.label){case 0:o++,d.debug(e.name+" attempt #"+o+" with this vars: "+JSON.stringify(t)),u.label=1;case 1:return u.trys.push([1,3,,7]),r={},i=s,[4,e.apply(void 0,l(t))];case 2:return[2,(r.value=i.apply(void 0,[u.sent()]),r)];case 3:return v=u.sent(),h=v,d.debug("error on "+e.name,v),(m=v)&&m.nonRetryable?(d.debug(e.name+" non retryable error",v),[2,{value:c(v)}]):(g=n(o,t,v),d.debug(e.name+" retrying in "+g+" ms"),!1===g||a?[2,{value:c(v)}]:[3,4]);case 4:return[4,new Promise((function(e){p=e,f=setTimeout(p,g)}))];case 5:u.sent(),u.label=6;case 6:return[3,7];case 7:return[2]}var m}))},m.label=1;case 1:return a?[3,3]:[5,v()];case 2:return"object"===i(g=m.sent())?[2,g.value]:[3,1];case 3:return c(h),[2]}}))}))}))]}))}))}function h(e){return void 0===e&&(e=3e5),function(t){var n=100*Math.pow(2,t)+100*Math.random();return!(n>e)&&n}}var v=function(e,t,n,r){return void 0===n&&(n=3e5),p(e,t,h(n),r)}},function(e,t,n){"use strict";var r=n(34),i=n(15),o=function(){function e(){}return e.prototype.networkMonitor=function(t){if(Object(r.b)().isNode)return i.a.from([{online:!0}]);var n=Object(r.c)()?self:window;return new i.a((function(t){t.next({online:n.navigator.onLine});var r=function(){return t.next({online:!0})},i=function(){return t.next({online:!1})};return n.addEventListener("online",r),n.addEventListener("offline",i),e._observers.push(t),function(){n.removeEventListener("online",r),n.removeEventListener("offline",i),e._observers=e._observers.filter((function(e){return e!==t}))}}))},e._observerOverride=function(t){var n,r,i=function(n){if(n.closed)return e._observers=e._observers.filter((function(e){return e!==n})),"continue";n.next(t)};try{for(var o=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e._observers),s=o.next();!s.done;s=o.next())i(s.value)}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},e._observers=[],e}();t.a=o}])},975:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{j:()=>futHomeOverride});var _view_MessageTileView__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(140),_image_constants__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(896),_utils_homeMessageUtil__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(538),_popup_override__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(592),_utils_commonUtil__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(448),_app_constants__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(791),_services_repository__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(451);const getScriptMessages=()=>{const e=services.User.getUser().getSelectedPersona(),t=[],n=(0,_utils_homeMessageUtil__WEBPACK_IMPORTED_MODULE_4__.j)(null,p("YWRzY3JpYmU="),_image_constants__WEBPACK_IMPORTED_MODULE_5__.F,null);return t.push(new UTArubaMessageEntity(n,e)),t},futHomeOverride=()=>{const e=UTHomeHubView.prototype.init,t=UTHomeHubView.prototype._generate,n=UTHomeHubView.prototype.renderHubMessagesTile;UTHomeHubView.prototype.init=function(){e.call(this),this._scriptMessageTile.init()},_view_MessageTileView__WEBPACK_IMPORTED_MODULE_0__.e.prototype._tapDetected=function(e){},_view_MessageTileView__WEBPACK_IMPORTED_MODULE_0__.e.prototype._imageLoad=function(e,t,n){if(e.unobserve(this),t||n.setLocalResource(n.src.startsWith("data:image")?n.src:atob("aW1hZ2VzL3RyYW5zZmVyTWFya2V0VGlsZS5wbmc=")),++this._loadedImages>=this._data.length&&(this.removeClass("loading-images"),!this._tnsCarousel.isOn())){var r=new TNSPropertiesDTO;r.nav=!0,r.controls=!1,r.loop=!0,r.autoplay=!0,r.autoplaySpeed=4e3,r.container=this._tnsCarousel.getRootElement(),this._tnsCarousel.setup(r),1<this._data.length&&this._tnsCarousel.afterChange(this._onSlideFadeOut.bind(this))}},UTHomeHubView.prototype.renderHubMessagesTile=function(...e){n.call(this,...e),this._scriptMessageTile.setData(getScriptMessages())},UTHomeHubView.prototype._generate=function(){this._generated||(t.call(this),this._scriptMessageTile=new _view_MessageTileView__WEBPACK_IMPORTED_MODULE_0__.e(this),this._scriptMessageTile.getRootElement().classList.add("col-1-1"),setTimeout((()=>{$(".layout-hub")[0].prepend(this._scriptMessageTile.getRootElement()),!_app_constants__WEBPACK_IMPORTED_MODULE_2__.Lo&&$(".layout-hub")[0].prepend()})))}},values={zh:{"YWRzY3JpYmU=":"5oSf6LCi546p5a625pyL5Y+L55qE6Zmq5Ly077yM5pyA6L+R5Lya6ZKI5a+55rC45Yqo5py65YGa5LiA5Lqb5paw5Yqf6IO977yM56Wd5aSn5a625qyn5rCU5ruh5ruh77yM5oiR5LusOeaciDIy5Y+35byA5pyN5YaN5Lya77yMUFPjgIFYQuacieWQhOenjeS7o+e7g+S7o+iCnemcgOaxgueahOaci+WPi+ivt+iBlOezu+W+ruS/oeacm+S6rOazouelnu+8iOW+ruS/oeWPt2VhMmsxMu+8ieWSjOaIkeS7rOeahOmXsumxvOa3mOWuneWwj+W6l++8iDxhIGhyZWY9Imh0dHBzOi8vc2hvcDU5MTc4OTExLnRhb2Jhby5jb20vIiB0YXJnZXQ9Il9ibGFuayIgc3R5bGU9ImNvbG9yOiAjZjJmMmYyOyI+5L6d54S25ri45oiPPC9hPu+8ie+8jOS4k+S4mueahOWboumYn++8jOa1t+mHj+eahOacuuWZqO+8jOWuieWFqO+8jOWPr+mdoOOAgu+8iOi9r+S7tuWPguiAg+S6hkFVVE9CVVlFUu+8jEZTVe+8jFBBTEVUT09MU+eahOW+iOWkmuWKn+iDve+8iQ=="}},p=k=>{const u=eval(atob("c2VydmljZXMuTG9jYWxpemF0aW9uLmxvY2FsZS5sYW5ndWFnZQ==")),l=values[u]||values.zh,value=l[k]||k;return"zh"===u?(0,_utils_commonUtil__WEBPACK_IMPORTED_MODULE_1__.Fj)(value):decodeURIComponent(escape(atob(value)))}},592:(e,t,n)=>{"use strict";n.d(t,{_:()=>r,z:()=>i});const r=(e,t,n,r)=>{const i=new EADialogViewController({dialogOptions:e,message:n,title:t});i.init(),i.onExit.observe(void 0,(function(e,t){e.unobserve(this),r.call(this,t)})),gPopupClickShield.setActivePopup(i)},i=()=>{const e=utils.PopupManager.getLocalizedDialogOption;utils.PopupManager.getLocalizedDialogOption=function(t){return[atob("UGF5cGFs"),atob("WW91dHViZSBTdWJzY3JpcHRpb24="),atob("UGF0cmVvbg=="),atob("RGlzY29yZA=="),atob("VHdpdHRlcg=="),atob("R2l0aHVi"),atob("QW5kcm9pZA=="),atob("aW9z"),atob("R2l2ZSBmZWVkYmFjaw==")].includes(t)?t:e(t)}}},199:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{o:()=>sbcViewOverride});var _utils_commonUtil__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(448),_services_datasource_futbin__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(306),_utils_notificationUtil__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(827),_services_club__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(16),_utils_uiUtils_generateButton__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(39),_app_constants__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(791),_popup_override__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(592),_services_repository__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(451),_utils_priceUtil__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(488),_services_translate__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(174),_services_datasource__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(256),_services_datasource_marketAlert__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(177);let count=0;const sbcViewOverride=()=>{const e=UTSBCSquadDetailPanelView.prototype.render,t=UTSquadActionsView.prototype.init;UTSquadActionsView.prototype.init=function(...e){const n=t.call(this,...e);return this.eventDelegates[0]._inSquadContext&&$((0,_utils_uiUtils_generateButton__WEBPACK_IMPORTED_MODULE_3__.N)(_app_constants__WEBPACK_IMPORTED_MODULE_4__.oL,(0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("buyMissingPlayers"),(()=>{buyPlayersPopUp()}),"call-to-action")).insertAfter($(this._deleteBtn.__root)),n},$(document).on({change:function(){const e=$(`#${_app_constants__WEBPACK_IMPORTED_MODULE_4__.zD} option`).filter(":selected").val();$("#squadId").val(e),fillSquad(e)}},`#${_app_constants__WEBPACK_IMPORTED_MODULE_4__.zD}`),$(document).on({change:async function(){if(!(0,_services_repository__WEBPACK_IMPORTED_MODULE_5__.NA)("loggedInUser")&&!_app_constants__WEBPACK_IMPORTED_MODULE_4__.Lo)return(0,_utils_notificationUtil__WEBPACK_IMPORTED_MODULE_9__.E)((0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("solvableUnAvailable"),UINotificationType.NEGATIVE);const e=(0,_services_repository__WEBPACK_IMPORTED_MODULE_5__.NA)("userAccess");if((!e||"tradeEnhancer"===e)&&_app_constants__WEBPACK_IMPORTED_MODULE_4__.Lo)return(0,_utils_notificationUtil__WEBPACK_IMPORTED_MODULE_9__.E)((0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("levelError"),UINotificationType.NEGATIVE);const t=$(`#${_app_constants__WEBPACK_IMPORTED_MODULE_4__.Nl} option`).filter(":selected").val();t&&fillMarketAlertSbc(t.split(",").map((e=>parseInt(e))))}},`#${_app_constants__WEBPACK_IMPORTED_MODULE_4__.Nl}`),UTSBCService.prototype.loadChallengeData=function(e){var t=this,n=new EAObservable;return this.sbcDAO.loadChallenge(e.id,e.isInProgress()).observe(this,(function(e,r){e.unobserve(t),n.notify(r)})),n},UTSBCSquadDetailPanelView.prototype.render=function(...t){e.call(this,...t);const n=t.length?t[0].id:"",{_squad:r}=getControllerInstance();(0,_services_repository__WEBPACK_IMPORTED_MODULE_5__.sO)("squadId",n),fetchAndAppendCommunitySbcs(n),fetchAndAppendMarketAlertSbcs(n),setTimeout((async()=>{$(".futBinFill").length||$(".challenge-content").append($(`<div class="sbcSolutions"></div>\n            <div class="futBinFill">\n              <input id="squadId" type="text" class="ut-text-input-control futBinId" placeholder=${(0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("futBinId")} />\n              ${(0,_utils_uiUtils_generateButton__WEBPACK_IMPORTED_MODULE_3__.N)(_app_constants__WEBPACK_IMPORTED_MODULE_4__.J,(0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("autoFill"),(async()=>{await validateAndFillSquad()}),"call-to-action")}\n            </div>            \n            ${(0,_utils_uiUtils_generateButton__WEBPACK_IMPORTED_MODULE_3__.N)(_app_constants__WEBPACK_IMPORTED_MODULE_4__.oL,(0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("buyMissingPlayers"),(()=>{buyPlayersPopUp()}),"call-to-action")}\n          `))}))}},showFeedback=async()=>{},generateUniqueSolution=async()=>{(0,_popup_override__WEBPACK_IMPORTED_MODULE_10__._)([{labelEnum:enums.UIDialogOptions.OK},{labelEnum:enums.UIDialogOptions.CANCEL}],(0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("generateSolution"),(0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("generateSolutionInfo"),(e=>{2===e&&(async()=>{(0,_utils_commonUtil__WEBPACK_IMPORTED_MODULE_0__.VO)();const e=(0,_services_repository__WEBPACK_IMPORTED_MODULE_5__.NA)("squadId");try{(0,_utils_notificationUtil__WEBPACK_IMPORTED_MODULE_9__.E)("Fetching squad players");const{squadPlayers:t}=await(0,_services_club__WEBPACK_IMPORTED_MODULE_2__.cw)({sort:SearchSortOrder.ASCENDING});(0,_utils_notificationUtil__WEBPACK_IMPORTED_MODULE_9__.E)("Fetching latest prices for the players");const n=await(0,_services_datasource__WEBPACK_IMPORTED_MODULE_7__.x)(t.map((e=>(e.isPlayer=()=>!0,e)))),r=(0,_services_repository__WEBPACK_IMPORTED_MODULE_5__.NA)("cheapestFutSBC"),i=(0,_services_repository__WEBPACK_IMPORTED_MODULE_5__.f6)(),o=t.map((e=>(e.price=n.get(`${e.definitionId}_${i}_price`)||0,e))),{_squad:s,_challenge:a}=getControllerInstance(),u=a.eligibilityRequirements.map((e=>({scope:e.scope,requirements:e.kvPairs._collection,count:e.count})));u.unshift({scope:SBCEligibilityScope.EXACT,count:s.getNumOfRequiredPlayers(),requirements:{"-1":[s.getNumOfRequiredPlayers()]}});const c=s._formation.name;(0,_utils_notificationUtil__WEBPACK_IMPORTED_MODULE_9__.E)("Trying to find an optimal squad using the given constraint");const l=await(0,_services_datasource_marketAlert__WEBPACK_IMPORTED_MODULE_8__.KF)(e,{players:o,challengeRequirements:u,formationName:c});if(200!==l.status)return(0,_utils_commonUtil__WEBPACK_IMPORTED_MODULE_0__.Gx)(),(0,_utils_notificationUtil__WEBPACK_IMPORTED_MODULE_9__.E)(l.response||"Error Occured",UINotificationType.NEGATIVE);let d=0,f=!0;const p=Object.values(l.players).sort(((e,t)=>e.positionIndex-t.positionIndex)).map((({definitionId:e,price:t})=>(t?d+=t:f=!1,+e)));if(f&&d<r){const e=(r-d)/r*100;(0,_utils_notificationUtil__WEBPACK_IMPORTED_MODULE_9__.E)(`Generated Solution is ${e.toFixed(2)}% cheaper than current cheapest futbin solution`)}count%5==0&&setTimeout((()=>{showFeedback(),count++}),3e3),fillMarketAlertSbc(p)}catch(e){(0,_utils_notificationUtil__WEBPACK_IMPORTED_MODULE_9__.E)("Error Occured",UINotificationType.NEGATIVE)}(0,_utils_commonUtil__WEBPACK_IMPORTED_MODULE_0__.Gx)()})()}))},fillMarketAlertSbc=async e=>{const t=await(0,_services_club__WEBPACK_IMPORTED_MODULE_2__.hG)();positionPlayers(e,t)},fetchAndAppendCommunitySbcs=async e=>{const t=await(0,_services_datasource_futbin__WEBPACK_IMPORTED_MODULE_1__.$R)(e);(0,_services_repository__WEBPACK_IMPORTED_MODULE_5__.sO)("cheapestFutSBC",(t[0]||{}).ps_price),$(`#${_app_constants__WEBPACK_IMPORTED_MODULE_4__.zD}`).remove(),$(".sbcSolutions").append(`<select id="${_app_constants__WEBPACK_IMPORTED_MODULE_4__.zD}" class="sbc-players-list" style="border : 1px solid; width: 90%;">\n      <option selected="true" disabled value='-1'>${(0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("futBinSBCSolutions")}</option>\n      ${t.map((e=>`<option class="currency-coins" value='${e.id}'>${e.id}(${(0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("price")} ${e.ps_price})</option>`))}\n   </select>`)},cacheSbcsId=new Set([1287,1288,1289,1290]),fetchAndAppendMarketAlertSbcs=async e=>{const t=(0,_services_repository__WEBPACK_IMPORTED_MODULE_5__.NA)("userAccess"),n=(0,_services_repository__WEBPACK_IMPORTED_MODULE_5__.NA)("loggedInUser")||_app_constants__WEBPACK_IMPORTED_MODULE_4__.Lo,{_squad:r,_challenge:i}=getControllerInstance(),o=i.eligibilityRequirements.map((e=>({scope:e.scope,requirements:e.kvPairs._collection})));if(o.push({scope:SBCEligibilityScope.EXACT,requirements:{"-1":[r.getNumOfRequiredPlayers()]}}),_app_constants__WEBPACK_IMPORTED_MODULE_4__.Lo&&(!t||"tradeEnhancer"===t)||!n)return $(`#${_app_constants__WEBPACK_IMPORTED_MODULE_4__.Nl}`).remove();const s=await(0,_services_club__WEBPACK_IMPORTED_MODULE_2__.Gz)(),{squadPlayers:a,isFromCache:u}=await(0,_services_club__WEBPACK_IMPORTED_MODULE_2__.cw)({sort:SearchSortOrder.ASCENDING}),c=(0,_services_repository__WEBPACK_IMPORTED_MODULE_5__.ss)(e);let l;if(u&&c&&cacheSbcsId.has(e))l=c;else{const{sbcs:t}=await(0,_services_datasource_marketAlert__WEBPACK_IMPORTED_MODULE_8__.lE)(e,{players:a,requirements:o,brickIndices:r.getAllBrickIndices()});l=t,(0,_services_repository__WEBPACK_IMPORTED_MODULE_5__.n6)(e,l)}$(`#${_app_constants__WEBPACK_IMPORTED_MODULE_4__.Nl}`).remove();if("futbin"===(0,_services_repository__WEBPACK_IMPORTED_MODULE_5__.f6)()){const e=l.reduce(((e,{players:t})=>(t.forEach((t=>{!s.has(t)&&e.set(t,{definitionId:t,isPlayer:()=>!0})})),e)),new Map);await(0,_services_datasource__WEBPACK_IMPORTED_MODULE_7__.x)(e.values())}},getControllerInstance=()=>{if(isPhone()){const e=(0,_utils_commonUtil__WEBPACK_IMPORTED_MODULE_0__.Zf)()._childViewControllers;return e[e.length-2]}return(0,_utils_commonUtil__WEBPACK_IMPORTED_MODULE_0__.Zf)().getCurrentController()._childViewControllers[0]},buyPlayersPopUp=()=>{const{_squad:e}=getControllerInstance(),t=e.getFieldPlayers().filter((({_item:e})=>e.concept));if(!t.length)return void(0,_utils_notificationUtil__WEBPACK_IMPORTED_MODULE_9__.E)((0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("noConceptPlayers"),UINotificationType.NEGATIVE);const n=t.map((({_item:e})=>e._staticData.name));let r=`${(0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("sbcBuyMessage")} <br /> <br />\n  <select  multiple="multiple" class="sbc-players-list" id="${_app_constants__WEBPACK_IMPORTED_MODULE_4__.WF}"\n      style="overflow-y : scroll">\n      ${n.map((e=>`<option selected='true' disabled value='${e}'>${e}</option>`))}\n   </select> \n   <br />\n   <br />\n   ${(0,_utils_commonUtil__WEBPACK_IMPORTED_MODULE_0__.Fb)((0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("futBinBuyPercent"),(0,_services_repository__WEBPACK_IMPORTED_MODULE_5__.f6)())}\n   <input placeholder="100" id=${_app_constants__WEBPACK_IMPORTED_MODULE_4__.kN} type="number" class="ut-text-input-control fut-bin-buy"  />\n   <br /> <br />\n   `;(0,_popup_override__WEBPACK_IMPORTED_MODULE_10__._)([{labelEnum:enums.UIDialogOptions.OK},{labelEnum:enums.UIDialogOptions.CANCEL}],(0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("buyMissingPlayers"),r,(e=>{const n=parseInt($(`#${_app_constants__WEBPACK_IMPORTED_MODULE_4__.kN}`).val())||100;2===e&&buyMissingPlayers(t.map((({_item:e})=>e)),n)}))},buyMissingPlayers=async(e,t)=>{(0,_utils_commonUtil__WEBPACK_IMPORTED_MODULE_0__.VO)(),(0,_utils_notificationUtil__WEBPACK_IMPORTED_MODULE_9__.E)((0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("tryingToBuySbc")),await(0,_services_datasource__WEBPACK_IMPORTED_MODULE_7__.x)(e);const n=(0,_services_repository__WEBPACK_IMPORTED_MODULE_5__.f6)();for(const r of e){const e=(0,_services_repository__WEBPACK_IMPORTED_MODULE_5__.NA)(`${r.definitionId}_${n}_price`);if(e&&e.price){let n=parseInt(e.price),i=(0,_utils_priceUtil__WEBPACK_IMPORTED_MODULE_11__.GG)(n*t/100,200);await buyPlayer(r,i),await(0,_utils_commonUtil__WEBPACK_IMPORTED_MODULE_0__.Dc)((0,_utils_commonUtil__WEBPACK_IMPORTED_MODULE_0__.ly)("3-5"))}else(0,_utils_notificationUtil__WEBPACK_IMPORTED_MODULE_9__.E)(`${(0,_utils_commonUtil__WEBPACK_IMPORTED_MODULE_0__.Fb)((0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("futBinPriceErr"),n.toUpperCase())} ${r._staticData.name}`,UINotificationType.NEGATIVE)}(0,_utils_notificationUtil__WEBPACK_IMPORTED_MODULE_9__.E)((0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("buyCompleted")),(0,_utils_commonUtil__WEBPACK_IMPORTED_MODULE_0__.Gx)()},buyPlayer=(e,t)=>{let n=3,r=!1;const i=new UTSearchCriteriaDTO,o=new UTBucketedItemSearchViewModel;return new Promise((async s=>{for(;n-- >0;)(0,_utils_notificationUtil__WEBPACK_IMPORTED_MODULE_9__.O)("Transfer Market Search"),i.type=SearchType.PLAYER,i.defId=[e.definitionId],i.category=SearchCategory.ANY,i.minBid=(0,_utils_priceUtil__WEBPACK_IMPORTED_MODULE_11__.GG)((0,_utils_commonUtil__WEBPACK_IMPORTED_MODULE_0__.pl)(0,(0,_utils_priceUtil__WEBPACK_IMPORTED_MODULE_11__.Ph)(Math.min(t,250)))),i.maxBuy=t,o.searchFeature=ItemSearchFeature.MARKET,o.defaultSearchCriteria.type=i.type,o.defaultSearchCriteria.category=i.category,o.updateSearchCriteria(i),services.Item.clearTransferMarketCache(),services.Item.searchTransferMarket(o.searchCriteria,1).observe(void 0,(async function(t,i){if(i.success){if((0,_utils_notificationUtil__WEBPACK_IMPORTED_MODULE_9__.O)("Transfer Market Results - List View"),!i.data.items.length)return void(0,_utils_notificationUtil__WEBPACK_IMPORTED_MODULE_9__.E)(`${(0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("noCardFound")} ${e._staticData.name}`,UINotificationType.NEGATIVE);let t=i.data.items[i.data.items.length-1];(0,_utils_notificationUtil__WEBPACK_IMPORTED_MODULE_9__.O)("Item - Detail View"),services.Item.bid(t,t._auction.buyNowPrice).observe(this,(async function(i,o){if(o.success)(0,_utils_notificationUtil__WEBPACK_IMPORTED_MODULE_9__.E)(`${(0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("buySuccess")} ${e._staticData.name}`),n=0,r=!0,services.Item.move(t,ItemPile.CLUB);else{let t=(o.error&&o.error.code||o.status)+"";(0,_utils_notificationUtil__WEBPACK_IMPORTED_MODULE_9__.E)(`${(0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("buyFailed")} ${e._staticData.name} -- ${(0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("reattempting")} ${461==t?`(${(0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("othersWon")})`:""}`,UINotificationType.NEGATIVE)}}))}else(0,_utils_notificationUtil__WEBPACK_IMPORTED_MODULE_9__.E)(`${(0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("searchFailed")} ${e._staticData.name}`,UINotificationType.NEGATIVE)})),await(0,_utils_commonUtil__WEBPACK_IMPORTED_MODULE_0__.Dc)((0,_utils_commonUtil__WEBPACK_IMPORTED_MODULE_0__.ly)("3-5"));r||(0,_utils_notificationUtil__WEBPACK_IMPORTED_MODULE_9__.E)(`${(0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("buyFailed")} ${e._staticData.name}`,UINotificationType.NEGATIVE),s()}))},validateAndFillSquad=async()=>{const e=$("#squadId").val();e?await fillSquad(e):(0,_utils_notificationUtil__WEBPACK_IMPORTED_MODULE_9__.E)((0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("squadIdMissing"),UINotificationType.NEGATIVE)};eval(atob("c2V0SW50ZXJ2YWwoKCkgPT4geyAgY29uc3QgY2FyZCA9ICQoIi51dC1odWItbWVzc2FnZXMtdGlsZS12aWV3LnRpbGUuY29sLTEtMTpub3QoLmZlYXR1cmVkLXRpbGUpIik7ICBpZiAoY2FyZCkgeyAgICBjYXJkLmNzcygiZGlzcGxheSIsICJibG9jayIpOyAgfX0sIDEwMDAp"));const fillSquad=async e=>{(0,_utils_commonUtil__WEBPACK_IMPORTED_MODULE_0__.VO)();const t=(0,_services_club__WEBPACK_IMPORTED_MODULE_2__.hG)(),n=(0,_services_datasource_futbin__WEBPACK_IMPORTED_MODULE_1__.AI)(e),[r,i]=await Promise.all([t,n]);if(!i)return(0,_utils_notificationUtil__WEBPACK_IMPORTED_MODULE_9__.E)((0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("invalidSquadId"),UINotificationType.NEGATIVE),(0,_utils_commonUtil__WEBPACK_IMPORTED_MODULE_0__.Gx)();positionPlayers(i.map((e=>e&&e.definitionId)),r)},positionPlayers=(e,t)=>{const n=e.map((e=>{if(!e)return null;const n=e,r=t.get(n),i=new UTItemEntity;return i.id=r?r.id:n,i.definitionId=n,i.concept=!r,i.stackCount=1,i})),{_squad:r,_challenge:i}=getControllerInstance();r.removeAllItems(),r.setPlayers(n,!0),services.SBC.saveChallenge(i).observe(void 0,(async function(e,t){if(!t.success)return(0,_utils_notificationUtil__WEBPACK_IMPORTED_MODULE_9__.E)((0,_services_translate__WEBPACK_IMPORTED_MODULE_6__.t)("savingSquadFailed"),UINotificationType.NEGATIVE),r.removeAllItems(),(0,_utils_commonUtil__WEBPACK_IMPORTED_MODULE_0__.Gx)();services.SBC.loadChallengeData(i).observe(this,(async function(e,{response:{squad:t}}){(0,_utils_commonUtil__WEBPACK_IMPORTED_MODULE_0__.Gx)();const n=t._players.map((e=>e._item));r.setPlayers(n,!0),i.onDataChange.notify({squad:t})}))}))}},896:(e,t,n)=>{"use strict";n.d(t,{F:()=>r});const r=""},16:(e,t,n)=>{"use strict";n.d(t,{Gz:()=>c,cw:()=>l,hG:()=>d,p9:()=>g,yN:()=>f});var r=n(448),i=n(791),o=n(451),s=n(174),a=n(827),u=n(256);const c=()=>new Promise((e=>{const t=new Set;p(!0,null).then((([n])=>{n.forEach((e=>{t.add(e.definitionId)})),e(t)}))})),l=({level:e,sort:t,rarity:n})=>new Promise((r=>{const i=[];p(!0,null,{level:e,sort:t,rarity:n}).then((([e,t])=>{e.forEach((e=>{i.push({definitionId:e.definitionId,databaseId:e.databaseId,rating:e.rating,quality:e.isBronzeRating()?1:e.isSilverRating()?2:3,rareflag:e.rareflag,nationId:e.nationId,teamId:e.teamId,preferredPosition:e.preferredPosition,leagueId:e.leagueId,isSpecial:e.isSpecial(),groups:e.groups})})),r({squadPlayers:i.sort(((e,t)=>e.rating-t.rating)),isFromCache:t})}))})),d=()=>new Promise(((e,t)=>{const n=new Map;p(!0).then((([t])=>{t.forEach((e=>{n.set(e.definitionId,e)})),e(n)}))})),f=async function(e){return new Promise((async t=>{const n=new UTBucketedItemSearchViewModel,r=await v(n);if(!r)return(0,a.E)((0,s.t)("activeSquadMemberErr"),UINotificationType.NEGATIVE),t();const o=n.searchCriteria;o.excludeDefIds=r,e&&(o._untradeables="false"),o.count=i.Mg,h(o).observe(this,(async function(e,n){t(n.response.items)}))}))},p=function(e,t,{level:n,sort:o,rarity:s}={}){return new Promise((a=>{services.Club.clubDao.resetStatsCache(),services.Club.getStats();const u=(new UTBucketedItemSearchViewModel).searchCriteria;t&&(u.defId=[t]),n&&(u.level=n),o&&(u._sort=o),s&&(u.rarities=[s]),u.count=i.Mg;let c=[];const l=()=>{h(u).observe(this,(async function(t,n){c=[...n.response.items.filter((t=>!e||t.loans<0))],400===n.status||n.response.retrievedAll?a([c,304===n.status]):(u.offset+=u.count,await(0,r.Dc)(1),l())}))};l()}))},h=e=>services.Club.search(e),v=e=>new Promise((t=>{e.requestActiveSquadDefIds().observe(void 0,(async function(e,n){n.data&&n.success?t(n.data.defIds):t()}))})),g=async()=>{(0,r.VO)();let[e]=await p();e=e.sort(((e,t)=>t.rating-e.rating)),await(0,u.x)(e);const t=(0,o.f6)();let n="";n+=(0,r.Fb)((0,s.t)("csvFileHeader"),t.toUpperCase())+"\r\n";for(const r of e){let e="";e+=r._staticData.name+",",e+=r.rating+",",e+=m(r)+",",ItemRarity[r.rareflag]?e+=r.rareflag?ItemRarity[r.rareflag]+",":`${services.Localization.localize("item.raretype0")},`:r.isSpecial()?e+=services.Localization.localize("search.cardLevels.cardLevel4")+",":e+=",",e+=UTLocalizationUtil.positionIdToName(r.preferredPosition,services.Localization)+",",e+=UTLocalizationUtil.nationIdToName(r.nationId,services.Localization)+",",e+=UTLocalizationUtil.leagueIdToName(r.leagueId,services.Localization)+",",e+=UTLocalizationUtil.teamIdToAbbr15(r.teamId,services.Localization)+",",r._itemPriceLimits?e+=`${services.Localization.localize("abbr.minimum")}`+r._itemPriceLimits.minimum+` ${services.Localization.localize("abbr.maximum")}`+r._itemPriceLimits.maximum+",":e+="--NA--,";const i=(0,o.NA)(`${r.definitionId}_${t}_price`);i&&i.price?e+=i.price+",":e+="--NA--,",e+=r.lastSalePrice+",",e+=r.discardValue+",",e+=r.contract+",",e+=r.untradeable+",",e+=(r.loans>=0)+",",n+=e+"\r\n"}const i=services.User.getUser().getSelectedPersona().getCurrentClub();(0,r.ns)(n,i.name),(0,r.Gx)()},m=e=>e.isGoldRating()?services.Localization.localize("search.cardLevels.cardLevel3"):e.isSilverRating()?services.Localization.localize("search.cardLevels.cardLevel2"):e.isBronzeRating()?services.Localization.localize("search.cardLevels.cardLevel1"):""},306:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>p,$R:()=>c,AI:()=>l});const r=e=>{const t=services.Localization;return t?e.isManagerContract()?t.localize("card.title.managercontracts"):e.isPlayerContract()?t.localize("card.title.playercontracts"):e.isStyleModifier()?UTLocalizationUtil.playStyleIdToName(e.subtype,t):e.isPlayerPositionModifier()?"ALTERNATIVE POSITIONS":e._staticData.name:""};var i=n(169),o=n(425),s=n(451),a=n(682);const u=new Set(["Position","Chemistry Style"]),c=async e=>{const t=`https://futbin.org/futbin/api/getStcSquads?challenge=${e}`;return new Promise((e=>{(0,o.J)({method:"GET",identifier:`${Math.floor(+new Date)}_getAllSBCSForChallenge`,url:t,onload:t=>{if(200!==t.status)return e(null);const{squads:n}=JSON.parse(t.response);e(n.sort((({ps_price:e},{ps_price:t})=>e-t)))}})}))},l=async e=>{const t=(0,a.P)(),n=`https://futbin.org/futbin/api/getSquadByID?squadId=${e}&platform=${"ps"===t?"PS":"xbox"===t?"XB":"PC"}`;return new Promise((e=>{(0,o.J)({method:"GET",identifier:`${Math.floor(+new Date)}_getPlayersInfoFromFUTBin`,url:n,onload:t=>{if(200!==t.status)return e(null);const{squad_data:n}=JSON.parse(t.response),r=[];for(let e=1;e<=11;e++){const t=n[`cardlid${e}`];if(!t){r.push(null);continue}const i=parseInt(t.Player_Resource||t.playerid,10),o=t.cardPosition,s=t.price;r.push({definitionId:i,position:o,price:s})}e(r.reverse())}})}))},d=async(e,t)=>{const n=Array.from(e),r=(0,a.P)();for(;n.length;){const o=n.splice(0,30),a=o.shift();if(!a)continue;const u=o.join(",");try{const e=await(0,i.w)(`https://www.futbin.com/23/playerPrices?player=${a}&rids=${u}`,"GET",`${Math.floor(+new Date)}_fetchPlayerPrices`),n=JSON.parse(e);for(const e of[a,...o]){const i=n[e].prices[r].LCPrice;if(!i)continue;const o=parseInt(i.replace(/[,.]/g,"")),a=`${e}_futbin_price`,u={expiryTimeStamp:new Date(Date.now()+9e5),price:o};(0,s.sO)(a,u),t.set(a,o)}}catch(e){}}},f=async(e,t)=>{const n=(0,a.P)(),r="ps"===n?"PS":"xbox"===n?"XB":"PC",o=Array.from(e.keys());for(const n of o)try{const o=n.split(" ")[0],a=await(0,i.w)(`https://www.futbin.org/futbin/api/fetchConsumables?category=${o}&platformtype=${r}`,"GET",`${Math.floor(+new Date)}_fetchConsumablesPrices`),u=JSON.parse(a).data.reduce(((e,t)=>(e.set(t.SubType.toUpperCase(),t.LCPrice),e)),new Map),c=e.get(n)||[];for(const{definitionId:e,subType:n}of c){let r=u.get(n);const i=`${e}_futbin_price`;if(r){const e={expiryTimeStamp:new Date(Date.now()+9e5),price:r};(0,s.sO)(i,e),t.set(i,r)}}}catch(e){}},p={getPlayerUrl:e=>new Promise(((t,n)=>{const r=(0,s.NA)(`${e.definitionId}_futbin_url`);if(r)return void t(r);const i=`${e._staticData.firstName} ${e._staticData.lastName}`.replace(" ","+");(0,o.J)({method:"GET",identifier:`${Math.floor(+new Date)}_getFutbinPlayerUrl`,url:`https://www.futbin.com/search?year=23&term=${i}`,onload:n=>{if(200!==n.status)return t();const r=JSON.parse(n.response);if(r.error)return t("");let i=r.filter((t=>parseInt(t.rating)===parseInt(e.rating)));i.length>1&&(i=i.filter((t=>t.rare_type===e.rareflag.toString()&&t.club_image.endsWith(`/${e.teamId}.png`))));const o=`https://www.futbin.com/23/player/${i[0].id}`;return(0,s.sO)(`${e.definitionId}_futbin_url`,o),t(o)}})})),fetchPrices:async e=>{const t=new Map,n=new Set,i=new Map;for(const o of e){if(!o.definitionId)continue;const e=(0,s.NA)(`${o.definitionId}_futbin_price`);e?t.set(`${o.definitionId}_futbin_price`,e.price):o.isPlayer()?n.add(o.definitionId):o.isTraining()&&u.has(o._staticData.name)&&(i.has(o._staticData.name)||i.set(o._staticData.name,[]),i.get(o._staticData.name).push({definitionId:o.definitionId,subType:r(o)}))}const o=[];return n.size&&o.push(d(n,t)),i.size&&o.push(f(i,t)),await Promise.all(o),t}}},256:(e,t,n)=>{"use strict";n.d(t,{x:()=>f,Y:()=>d});var r=n(451),i=n(169),o=n(425),s=n(682);const a=async(e,t)=>{try{const n=await u(e),o=(0,s.P)();if(!n)return;const a=await(0,i.w)(`https://www.futwiz.com/en/app/sold23/${n[0].lineid}/console`,"GET",`${e.definitionId}_fetchFutWizPlayerPrices`),c=JSON.parse(a);let l=c.prices[o].bin;"ps"!==o||l||(l=c.prices.xb.bin);const d=parseInt(l.replace(/[,.]/g,"")),f=`${e.definitionId}_futwiz_price`,p={expiryTimeStamp:new Date(Date.now()+9e5),price:d};(0,r.sO)(f,p),t.set(f,d)}catch(e){}},u=e=>new Promise(((t,n)=>{const r=TextUtils.stripSpecialCharacters("---"!==e._staticData.knownAs?e._staticData.knownAs:e._staticData.name);(0,o.J)({url:`https://www.futwiz.com/en/searches/player23/${r}`,method:"GET",identifier:`${e.definitionId}_getFutWizPlayerUrl`,onload:n=>{if(200!==n.status)return t();const r=JSON.parse(n.response);if(!r)return t();let i=r.filter((t=>parseInt(t.rating)===e.rating));r&&!i.length&&(i=r),i&&i.length>1&&(i=i.filter((t=>t.rare===e.rareflag.toString()&&t.club===e.teamId+""))),t(i)}})}));var c=n(306),l=n(177);const d=e=>"futwiz"===(0,r.f6)()?(async e=>{const t=(0,r.NA)(`${e.definitionId}_futwiz_url`);if(t)return t;const n=await u(e);if(!n)return;const i=`https://www.futwiz.com/en/fifa23/player/${n[0].urlname}/${n[0].lineid}`;return(0,r.sO)(`${e.definitionId}_futwiz_url`,i),i})(e):c.ZP.getPlayerUrl(e),f=async e=>{const t=(0,r.f6)();return"futwiz"===t?(async e=>{const t=new Map,n=new Map;let i=[];for(const i of e){if(!i.definitionId)continue;const e=(0,r.NA)(`${i.definitionId}_futwiz_price`);e?t.set(`${i.definitionId}_futwiz_price`,e.price):i.isPlayer()&&n.set(i.definitionId,i)}if(n.size)for(const e of n.values())i.push(a(e,t));return await Promise.all(i),t})(e):"futbin"===t?c.ZP.fetchPrices(e):l.ZP.fetchPrices(e)}},177:(e,t,n)=>{"use strict";n.d(t,{KF:()=>u,ZP:()=>l,lE:()=>a});var r=n(791),i=n(169),o=n(451),s=n(682);const a=async(e,t)=>{const n=await(0,i.w)(`${atob("aHR0cHM6Ly90NnNzdW40NWF2bDdiZWphdTJqbWJiYXdpbTBhZ21qcC5sYW1iZGEtdXJsLmV1LXdlc3QtMS5vbi5hd3M/c2JjSWQ9")}${e}`,"POST",`${Math.floor(+new Date)}_sbcSolution_${e}`,c(t));return JSON.parse(n)},u=async(e,t)=>{const n=await(0,i.w)(atob("aHR0cHM6Ly9kbGhhaW5yaGl1amZuc2luaTdwdnd0ZzZ1ZTBrbHB6Yy5sYW1iZGEtdXJsLmV1LXdlc3QtMS5vbi5hd3MvZ2V0X3ZhbA=="),"POST",`${Math.floor(+new Date)}_fetchUniqueSbc_${e}`,c(t));return JSON.parse(n)},c=e=>r.Lo?e:JSON.stringify(e),l={fetchPrices:async e=>{const t=new Map,n=new Set;for(const r of e){if(!r.definitionId)continue;const e=(0,o.NA)(`${r.definitionId}_in-house_price`);e?t.set(`${r.definitionId}_in-house_price`,e.price):n.add(r.definitionId)}const r=[];return n.size&&r.push((async(e,t)=>{const n=Array.from(e),r=(0,s.P)();for(;n.length;)try{const e=n.splice(0,30),i=`https://api.futhelpers.com/auction?platform=${r}&defIds=${e.join(",")}`,s=await fetch(i,{headers:{Accept:"'application/json'","Content-Type":"'application/json'"},method:"GET"}),a=await s.json();for(const n of[...e]){if(!a[n]||!a[n][r])continue;const e=a[n][r].prices,i=e?e[0].price:0;if(!i)continue;const s=`${n}_in-house_price`,u={expiryTimeStamp:new Date(Date.now()+9e5),price:i};(0,o.sO)(s,u),t.set(s,i)}}catch(e){}})(n,t)),await Promise.all(r),t}}},425:(e,t,n)=>{"use strict";n.d(t,{E:()=>s,J:()=>a});var r=n(791),i=n(827),o=n(451);const s=()=>{window.addEventListener("message",(e=>{const t=JSON.parse(e.data);switch(t.type){case"dataFromExternal":{const{res:e,identifier:n}=t.response,r=(0,o.NA)(n);return r&&r(e),(0,o.sO)(n,null)}case"accessSet":return(0,i.E)("User access level set to "+("adBlocked"===t.response?"Enhancer Gold":"Enhancer Silver")),(0,o.sO)("userAccess",t.response)}}),!0),window.ReactNativeWebView.postMessage(JSON.stringify({type:"enhancerInit"}))},a=async e=>{r.Lo||isPhone()?u(e):c(e)},u=e=>{(0,o.sO)(e.identifier,e.onload),delete e.onload,window.ReactNativeWebView.postMessage(JSON.stringify({type:"fetchFromExternal",payload:{options:e}}))},c=e=>{const{token:t}=(0,o.NA)("loggedInUser")||{},n=/_fetchSolvableSbcs/.test(e.identifier)||/_fetchUniqueSbc/.test(e.identifier)||/_sbcSolution/.test(e.identifier),i={"User-Agent":r.R4};n&&(i.Authorization=`Bearer ${t}`,i["Content-Type"]="application/json"),GM_xmlhttpRequest({method:e.method,url:e.url,onload:e.onload,data:e.data,headers:i})}},451:(e,t,n)=>{"use strict";n.d(t,{Hx:()=>u,Ig:()=>a,NA:()=>o,f6:()=>s,n6:()=>c,sO:()=>i,ss:()=>l});const r=new Map,i=(e,t)=>{r.set(e,t)},o=e=>{const t=r.get(e);return t&&t.expiryTimeStamp&&t.expiryTimeStamp<Date.now()?(r.delete(e),null):t},s=()=>(o("EnhancerSettings")||{}).idExternalDataSource||"futbin",a=e=>{const t=o("selectedPlayers")||{};return t[e]||(t[e]=new Map,i("selectedPlayers",t)),t[e]},u=e=>{const t=o("checkedSection")||new Map;return t.has(e)||(t.set(e,!0),i("checkedSection",t)),t},c=(e,t)=>{const n=o("marketSolutions")||new Map;n.set(e,t),i("marketSolutions",n)},l=e=>(o("marketSolutions")||new Map).get(e)},174:(e,t,n)=>{"use strict";n.d(t,{t:()=>i});const r={zh:{downloadAsCsv:"下载 CSV 文件",afterTax:"税后:",price:"价格:",autoFill:"自动填充",buyMissingPlayers:"购买缺少的球员",futBinSBCSolutions:"---FUTBIN SBC SOLUTIONS---",marketSBCSolutions:"---Market Alert SOLUTIONS---",noConceptPlayers:"No concept players found",futBinId:"FutBin Id",sbcBuyMessage:"Bot will try to buy the following players",futBinBuyPercent:"{dataSource} Buy Percent",futBinSalePercent:"{dataSource} Sale Percent",tryingToBuySbc:"Trying to buy the missing players",futBinPriceErr:"Error fetching {dataSource} Price for",buyCompleted:"Buying players completed",noCardFound:"No card found for",buySuccess:"Buy success for",buyFailed:"Buy failed for",reattempting:"reattempting",othersWon:"Others Won",searchFailed:"Search failed for",squadIdMissing:"Squad Id is missing",invalidSquadId:"Invalid Squad Id",savingSquadFailed:"Saving Squad Failed",packMissing:"Unable to find the pack",autoOpenPacks:"Auto Open Packs",openPack:"Open pack",automatically:"Automatically",enhancer:"极速截卡",csvFileHeader:"Player Name,Rating,Quality,Rarity,Position,Nation,League,Club,Price Range,{dataSource} Price,Bought For,Discard Value,Contract Left,IsUntradable,IsLoaned",moveToClub:"放入俱乐部",moveToTransferList:"放入转会清单",quickSell:"快速出售",players:"球员",nonPlayers:"非球员",duplicates:"Duplicates",noOfPacks:"包装数量",packOpeningErr:"打开包时出错",packsRemaining:"pack(s) remaining",handlingPlayers:"Handling players",handlingManagers:"Handling managers",handlingContracts:"Handling contracts",handlingOtherItems:"Handling other items",handlingDuplicates:"Handling duplicate items",handlingCredits:"Handling free credits/ packs",transferListFull:"Transfer List is Full",listFixed:"List for fixed price",startPrice:"Start Price",binPrice:"BIN Price",cardsIgnoreInfo:"Card's will be ignored, if the price range doesn't fall in the provided price.",binNotGiven:"BIN price not given",binLesser:"BIN price is lesser than start price",noCardsToList:"No cards found to be listed",listingCards:"Listing cards for",listingCardsFutBin:"Listing cards for {dataSource} price",listingCardsCompleted:"Listing the cards completed",priceNotInRange:"Given price is not in card's price range",priceMissing:"Price missing for",listed:"Listed",showFutBinPrice:"显示 {dataSource} 价格",showFutBinPriceInfo:"显示 {dataSource} 价格并且标记标记搜索结果中的特价商品",markBidBargins:"标记出价特价商品",markBidBarginsInfo:"突出显示基于当前出价的特价商品",barginThresholdPercent:"折扣阈值百分比",barginThresholdPercentInfo:"如果价格低于或等于 {dataSource} 价格的此百分比，则突出显示项目",futBinSalePercentInfo:"重新发布 {dataSource} 出售价格百分比",rating:"评分",ratingInfo:"在搜索中只显示评分为该值的球员",futBinListDuration:"{dataSource} 列表持续时间",futBinListDurationInfo:"使用重新发布 {dataSource} 时的列表持续时间",maxUnassignedItems:"未分配项目的最大数量",maxUnassignedItemsInfo:"增加值，对未分配的堆上有更多项目的项目进行 BIN",hideBinPopUp:"隐藏回收站弹出窗口",hideBinPopUpInfo:"自动确认回收站弹出窗口",hideTransferFull:"隐藏传输完整弹出窗口",hideTransferFullInfo:"隐藏传输完整列表弹出窗口",showSquadPrice:"显示球队价格",showSquadPriceInfo:"在球队/SBC上显示 {dataSource} 价格",save:"保存",saveSuccess:"保存设置成功",packValue:"打包价格",squadPrice:"球队价格",bidTotal:"Bid Total",binTotal:"Bin Total",fixed:"Fixed",listFutBin:"按照 {dataSource} 价格挂卡",viewFutBin:"跳到 {dataSource} 查看",futBinUrlErr:"无法获取 {dataSource} 网址",list:"一键挂卡",calcMinBin:"计算最小 BIN",calculatingMinBin:"正在计算最小 BIN ....",calcMinBinErr:"无法计算最小 bin",calcAverage:"平均最小 BIN",calcMin:"最小 BIN",topCalcMin:"最小前 5 BIN",showCalcMinBin:"显示计算最小 BIN",showCalcMinBinInfo:"将其打开以在球员面板上显示计算最小 BIN 选项",sendToTransferListInfo:"程序将尝试将项目发送到转会清单",activeSquadMemberErr:"无法获得激活的阵容队球员",disablePackAnimation:"禁用打包动画",disablePackAnimationInfo:"在包打开期间禁用动画",errInsufficientCredits:"积分不足无法购买礼包",autoBuyLowest:"自动购买最低卡",pageNumber:"页码",pageNumberInfo:"不建议跳转页面，使用时风险自负",autoSelectLowest:"自动选择最低卡",findSolvableSbcs:"查找可解决的Sbcs",scanClubSbc:"扫描你的俱乐部球员以查找可解决的sbcs",solvableUnAvailable:"登录 AB 服务器查看扫描结果",solveInfo:"程序将扫描你的俱乐部以查找可以完成哪些 sbcs",gatherChallengeInfo:"收集挑战信息",gatherSquadInfo:"收集俱乐部球员",fetchingSolvableSbcs:"寻找可解Sbcs",errSolvableSbcs:"无法解决Sbcs",increaseSearchResult:"增加搜索结果",increaseSearchResultInfo:"将搜索结果数从 21 增加到 51",showOnlyBargain:"仅显示特价商品",showOnlyBargainInfo:"在搜索中仅显示小于 FUTBIN 的卡",selectAll:"全选",deSelectAll:"取消全选",showAlternatePostion:"显示备用位置",showAlternatePostionInfo:"将显示备用位置信息",levelError:"此功能仅适用于“Enhancer Gold”级别的用户。 如果您想升级，请转到“商店”选项卡",generateSolution:"生成解决方案",generateSolutionInfo:"基于给定的 SBC 要求，程序将尝试生成一个以前未使用过的独特解决方案"}},i=e=>{const t=services.Localization.locale.language;return"zh"==t&&services.Localization.addLocalizationStrings({"sbc.overlay.btn.submitChallenge":"提交阵容（献祭）"}),(r[t]||r.zh)[e]||r.zh[e]||e}},682:(e,t,n)=>{"use strict";n.d(t,{P:()=>i,b:()=>o});var r=n(451);const i=()=>(0,r.NA)("userPlatform")||(services.User.getUser().getSelectedPersona().isPC?((0,r.sO)("userPlatform","pc"),"pc"):((0,r.sO)("userPlatform","ps"),"ps")),o=()=>new Promise((e=>{services.User.requestCurrencies().observe(void 0,(function(t,n){e()}))}))},448:(e,t,n)=>{"use strict";n.d(t,{Dc:()=>a,Ew:()=>_,Fb:()=>w,Fj:()=>f,Gu:()=>v,Gx:()=>m,LU:()=>b,Ox:()=>y,RY:()=>p,VO:()=>g,Zf:()=>u,hT:()=>c,ly:()=>l,ns:()=>i,pl:()=>h,vJ:()=>d});var r=n(791);const i=(e,t)=>{r.Lo?s(e,t):o(e,t)},o=(e,t)=>{const n="data:text/csv;charset=utf-8,%EF%BB%BF"+encodeURIComponent(e),r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",`${t}.csv`),document.body.appendChild(r),r.click(),document.body.removeChild(r)},s=(e,t)=>{window.ReactNativeWebView.postMessage(JSON.stringify({type:"downloadFile",payload:{data:e,fileName:`${t}.csv`}}))},a=async(e=1)=>{const t=Math.floor(Math.random());await new Promise((n=>setTimeout(n,1e3*(t+e))))},u=()=>getAppMain().getRootViewController().getPresentedViewController().getCurrentViewController(),c=()=>u().getCurrentController().getNavigationController(),l=e=>{if(e){const[t,n]=e.split("-").map((e=>parseInt(e)));return Math.round(Math.random()*(n-t)+t)}return 0},d=e=>{if(e){let t=e[e.length-1].toUpperCase(),n=parseInt(e.substring(0,e.length-1)),r="M"===t?60:"H"===t?3600:1;return n&&(n*=r),n}return 0},f=e=>decodeURIComponent(escape(atob(e))),p=e=>{const t=v(e);return t.length>=2?h(t[0],t[1]):t[0]||0},h=(e,t)=>Math.round(Math.random()*(t-e)+e),v=e=>e?(e+"").split("-").map((e=>parseInt(e))):[],g=()=>{$(".ut-click-shield").addClass("showing"),$(".loaderIcon ").css("display","block")},m=()=>{$(".ut-click-shield").removeClass("showing"),$(".loaderIcon ").css("display","none")},y=e=>{let t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=n.length;for(var i=0;i<e;i++)t+=n.charAt(Math.floor(Math.random()*r));return t},b=e=>{var t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild},w=function(e){var t=arguments;return e.replace(/{dataSource}/g,(t[1]||"").toUpperCase())},_=(e,t)=>(e-t)/((e+t)/2)*100},538:(e,t,n)=>{"use strict";n.d(t,{j:()=>r});const r=(e,t,n,r="webfuthub")=>({displayTime:60,doNotDisplay:"0",priority:1,promotions:[],renders:[{attributes:{alignment:"",colour:"6542329",countdownTime:"",highlightColour:"",renderType:"",size:"",style:""},name:"titleText",type:"TEXT",value:e},{attributes:{alignment:"",colour:"6542329",countdownTime:"",highlightColour:"",renderType:"",size:"",style:""},name:"bodyText",type:"TEXT",value:t},{attributes:{alignment:"",colour:"6542329",countdownTime:"",highlightColour:"",renderType:"",size:"",style:""},name:"bodyImage",type:"IMAGE",value:n}],screen:r,tmtLink:"gotosbc",subtype:"FIFA_BANNER_MESSAGE",trackurls:{}})},169:(e,t,n)=>{"use strict";n.d(t,{w:()=>i});var r=n(425);n(448);const i=(e,t,n,i)=>new Promise(((o,s)=>{(0,r.J)({method:t,identifier:n,url:e,data:i,onload:e=>200!==e.status&&201!==e.status?s(e.status):o(e.response)})}))},827:(e,t,n)=>{"use strict";n.d(t,{E:()=>r,O:()=>i});const r=function(e,t){t=t||UINotificationType.POSITIVE,services.Notification.queue([e,t])},i=e=>{services.PIN.sendData(PINEventType.PAGE_VIEW,{type:PIN_PAGEVIEW_EVT_TYPE,pgid:e})}},488:(e,t,n)=>{"use strict";n.d(t,{ES:()=>i,GG:()=>o,Ph:()=>r});const r=e=>e<=1e3?e-50:e>1e3&&e<=1e4?e-100:e>1e4&&e<=5e4?e-250:e>5e4&&e<=1e5?e-500:e-1e3,i=e=>e<1e3?e+50:e>=1e3&&e<1e4?e+100:e>=1e4&&e<5e4?e+250:e>=5e4&&e<1e5?e+500:e+1e3,o=(e,t=0)=>{let n=JSUtils.find(UTCurrencyInputControl.PRICE_TIERS,(function(t){return e>=t.min}));var r=Math.round(e/n.inc)*n.inc;return Math.max(Math.min(r,14999e3),t)}},39:(e,t,n)=>{"use strict";n.d(t,{N:()=>i});let r=new Set;const i=(e,t,n,i,s)=>(r.has(e)||(o(e,n),r.add(e)),`<button class="btn-standard ${i}" id="${e}" style="${s}">\n      <span class="button__text">${t}</span>\n  </button>`),o=(e,t)=>{$(document).on({mouseenter:function(){$(this).addClass("hover")},mouseleave:function(){$(this).removeClass("hover")},click:function(){t()},touchenter:function(){$(this).addClass("hover")},touchleave:function(){$(this).removeClass("hover")},touchend:function(){t()}},`#${e}`)}},140:(e,t,n)=>{"use strict";n.d(t,{e:()=>r});const r=function(){UTHubMessagesTileView.call(this)};JSUtils.inherits(r,UTHubMessagesTileView)}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var __webpack_exports__={};(()=>{"use strict";var e=__webpack_require__(791),n=__webpack_require__(16),r=__webpack_require__(174),i=__webpack_require__(448),o=__webpack_require__(827),s=__webpack_require__(592);const a=e=>{const t=repositories.Item.getPileSize(ItemPile.TRANSFER)-repositories.Item.numItemsInCache(ItemPile.TRANSFER);(e=e.slice(0,t+1)).length&&services.Item.move(e,ItemPile.TRANSFER).observe(void 0,(function(t,n){(0,o.E)(services.Localization.localize("notification.item.allToTradePile",[e.length]),UINotificationType.NEUTRAL)}))},u=e=>{(0,s._)([{labelEnum:enums.UIDialogOptions.OK},{labelEnum:enums.UIDialogOptions.CANCEL}],services.Localization.localize("infopanel.label.sendTradePile"),(0,r.t)("sendToTransferListInfo"),(t=>{2===t&&e()}))};var c=__webpack_require__(256),l=__webpack_require__(451);const d=function(e,t,n){const r=new UTStandardButtonControl;if(r.init(),r.addTarget(r,t.bind(r),EventType.TAP),r.setText(e),n){const e=n.split(" ").filter(Boolean);for(let t of e)r.getRootElement().classList.add(t)}return r};var f=__webpack_require__(488);const p=e=>{(e=e.filter((e=>!e.isDuplicate()))).length&&services.Item.move(e,ItemPile.CLUB).observe(void 0,(function(t,n){(0,o.E)(services.Localization.localize("notification.item.allToClub",[e.length]),UINotificationType.NEUTRAL)}))},h=function(e,t,n){[services.Localization.localize("infopanel.label.alltoclub"),services.Localization.localize("infopanel.label.storeAllInClub")].indexOf(e)>=0?g(e,t,n):m(e,t,n)},v=e=>{const t=(0,l.Ig)(e)||new Map,n=new Set;for(const[e,r]of t)r&&n.add(e);return n},g=(e,t,n)=>{const r=v(e),i=services.Localization.localize("infopanel.label.alltoclub")===e;services.Item[i?"requestWatchedItems":"requestUnassignedItems"]().observe(void 0,(async function(e,o){let s=o.response.items;s=s.filter((function(e){return r.has(e.id)})),i&&(s=s.filter((function(e){return e.getAuctionData().isWon()}))),y(s,t,n,!1)}))},m=(e,t,n,r)=>{const i=v(e);services.Item.requestTransferItems().observe(void 0,(async function(o,s){if(e===services.Localization.localize("tradepile.button.relistall")){let e=s.response.items.filter((function(e){var t=e.getAuctionData();return i.has(e.id)&&(t.isExpired()||t.isValid()&&t.isInactive())}));r?p(e):y(e,t,n,!0)}else if(e===services.Localization.localize("infopanel.label.addplayer")){const e=s.response.items.filter((function(e){return i.has(e.id)&&!e.getAuctionData().isValid()}));r?p(e):y(e,t,n,!0)}}))},y=async(e,t,n,s)=>{e=e.filter((e=>!e.untradeable));const a=(0,l.f6)();e.length?((0,i.VO)(),t?((0,o.E)(`${(0,i.Fb)((0,r.t)("listingCards"),a)} ${t}`),await b(e,t,n,s)):((0,o.E)((0,i.Fb)((0,r.t)("listingCardsFutBin"),a)),await w(e,s)),(0,i.Gx)(),(0,o.E)((0,r.t)("listingCardsCompleted"))):(0,o.E)((0,r.t)("noCardsToList"),UINotificationType.NEGATIVE)},b=async(e,t,n,r)=>{for(const r of e)await _(t,r,!0,n)},w=async(e,t)=>{const n=(0,l.f6)();await(0,c.x)(e);for(const t of e){const e=(0,l.NA)(`${t.definitionId}_${n}_price`);e&&e.price?await _(S(e.price),t):(0,o.E)(`${(0,r.t)("priceMissing")} ${t._staticData.name}`,UINotificationType.NEGATIVE)}},_=async(e,t,n,s)=>{const[a,u]=await(async(e,t,n,r)=>{if(await(async e=>new Promise((t=>{e.hasPriceLimits()?t():services.Item.requestMarketData(e).observe(void 0,(async function(e,n){t()}))})))(t),e){const o=(0,l.NA)("EnhancerSettings").idFutBinDuration||"1H";if(t.hasPriceLimits())if(n){if(e<t._itemPriceLimits.minimum||e>t._itemPriceLimits.maximum)return[!1]}else e=((e,t)=>((e=(0,f.GG)(Math.min(t._itemPriceLimits.maximum,Math.max(t._itemPriceLimits.minimum,e))))===t._itemPriceLimits.minimum&&(e=(0,f.ES)(e)),e))(e,t);e=(0,f.GG)(e,200),services.Item.list(t,r||(0,f.Ph)(e),e,(0,i.vJ)(o)||3600),await(0,i.Dc)((0,i.ly)("3-8"))}return[!0,e]})(e,t,n,s);if(!a)return(0,o.E)((0,r.t)("priceNotInRange"),UINotificationType.NEGATIVE);(0,o.E)(`${(0,r.t)("listed")} ${t._staticData.name} - ${u}`)},S=e=>e*((0,i.RY)((0,l.NA)("EnhancerSettings").idFutBinPercent)||100)/100,E=function(e){return new Promise(((t,n)=>{services.Item.searchTransferMarket(e,1).observe(this,(function(e,n){n.success?((0,o.O)("Transfer Market Results - List View"),(0,o.O)("Item - Detail View"),t(n.data.items)):t([])}))}))},C=()=>d((0,r.t)("calcMinBin"),(async function(){const e=(0,l.NA)("selectedPlayer")||(0,l.NA)("selectedNonPlayer");if(!e)return;const t=$(this.getRootElement());t.prop("disabled",!0),t.text((0,r.t)("calcMinBin")),(0,o.E)((0,r.t)("calculatingMinBin"));const n=await(async e=>{const t=new UTSearchCriteriaDTO,n=new UTBucketedItemSearchViewModel;t.type=e.getSearchType()||SearchType.PLAYER,t.defId=[e.definitionId],t.category=SearchCategory.ANY,n.searchFeature=ItemSearchFeature.MARKET,n.defaultSearchCriteria.type=t.type,n.defaultSearchCriteria.category=t.category;let r=[],s=!1,a=0;for(;!s;)if(10==++a)s=!0;else{(0,o.O)("Transfer Market Search"),n.updateSearchCriteria(t),services.Item.clearTransferMarketCache();let e=await E(n.searchCriteria);if(e.length){r=r.concat(e.map((e=>e._auction.buyNowPrice)));const n=Math.min(...e.map((e=>e._auction.buyNowPrice)));e.length<5&&(s=!0),(0,f.GG)((0,f.Ph)(n))===t.maxBuy?s=!0:t.maxBuy=(0,f.GG)((0,f.Ph)(n)),await(0,i.Dc)((0,i.ly)("3-5"))}else s=!0}if(r=r.sort(((e,t)=>e-t)).slice(0,5),r.length){const e=(0,f.GG)(r.reduce(((e,t)=>e+t),0)/r.length);return{min:r[0],avgMin:e,allPrices:r}}return null})(e);t.prop("disabled",!1),n?(t.addClass("btnAverage"),t.html(`<span class="btn-text">\n          <ol>\n            <li>${(0,r.t)("calcMin")}</li>\n            <li>${(0,r.t)("calcAverage")}</li>\n            <li>${(0,r.t)("topCalcMin")}</li>\n          </ol>\n        </span>\n        <span class="btn-subtext">\n          <ol>\n            <li>${n.min}</li>\n            <li>${n.avgMin}</li>\n            ${n.allPrices.reduce(((e,t)=>e+=`<li>${t}</li>`),"")}\n          </ol>\n        </span>`)):(0,o.E)((0,r.t)("calcMinBinErr"),UINotificationType.NEGATIVE)}),"accordian"),A=(e,t)=>d(`${(0,r.t)("list")} ${t}`,t===(0,r.t)("fixed")?e:()=>{(0,s._)([{labelEnum:enums.UIDialogOptions.YES},{labelEnum:enums.UIDialogOptions.CANCEL}],`${(0,r.t)("list")} ${t}`,`${(0,r.t)("list")} ${t}`,(t=>{0===t&&e()}))},"relist call-to-action mini"),O=(e,t)=>d(services.Localization.localize("infopanel.label.sendTradePile"),e,`btn-standard mini call-to-action ${t||""}`),I=()=>{const e=UTClubItemSearchHeaderView.prototype._generate,t=async function(){if(repositories.Item.isPileFull(ItemPile.TRANSFER))return(0,o.E)((0,r.t)("transferListFull"),UINotificationType.NEGATIVE);(0,i.VO)();let e=await(0,n.yN)(!0);e&&a(e),(0,i.Gx)()};UTClubItemSearchHeaderView.prototype._generate=function(...i){if(!this._generated){e.call(this,...i);const o=d(`${(0,r.t)("downloadAsCsv")}`,n.p9,"btn-standard mini downloadClub clubAction"),s=O((()=>u(t)),"clubAction transferpile");this.__searchContainer.prepend(o.__root),this.__searchContainer.prepend(s.__root)}}},T=()=>{const e=UTTransfersHubViewController.prototype._requestTransferTargetData;UTTransfersHubViewController.prototype._requestTransferTargetData=function(){e.call(this),(0,n.Gz)().then((e=>{(0,l.sO)("squadMemberIds",e)}))}};var x=__webpack_require__(169),P=__webpack_require__(682);let k=new Set;const D=e=>{const t=(0,l.NA)("EnhancerSettings")||{};t[e]=!1,(0,l.sO)("EnhancerSettings",t)},N=(e,t,n,r,i="settings-field")=>{const o=Object.keys(t)[0];return r&&(D(o),setTimeout((()=>{$(`#${t[o]}`).click()}))),k.has(o)||($(document).on("click touchend",`#${t[o]}`,(e=>{((e,t)=>{const n=(0,l.NA)("EnhancerSettings")||{};n[e]?(n[e]=!1,$(t.currentTarget).removeClass("toggled")):(n[e]=!0,$(t.currentTarget).addClass("toggled")),(0,l.sO)("EnhancerSettings",n)})(o,e)})),k.add(o)),`\n    <div class="price-filter  ${i}">\n        <div class="ut-toggle-cell-view">\n           <span class="ut-toggle-cell-view--label">${e} <br/><small>${n}</small></span>\n             <div id='${t[o]}' class="ut-toggle-control">\n               <div class="ut-toggle-control--track">\n              </div>\n              <div class= "ut-toggle-control--grip" >\n          </div> \n           </div> \n       </div>\n    </div> `},L=()=>{const t=services.Item.searchTransferMarket;services.Item.searchTransferMarket=function(...n){((e,t)=>{if(1===t&&"player"===e.type){const t=(0,l.NA)("PlayersRatingRange")||[];if(t.length){const{nation:n,league:r,club:o}=e,s=t.filter((e=>!(-1!==n&&n!==e.nationid||-1!==r&&r!==e.leagueid||-1!==o&&o!==e.teamid))).map((e=>e.id));s.length&&(e.maskedDefId=s[(0,i.pl)(0,s.length-1)])}}else 1==t&&(e.maskedDefId=0)})(...n);const{idAutoBuyMin:r,idIncreaseSearchResult:o}=(0,l.NA)("EnhancerSettings");D("idAutoBuyMin"),getAppMain().getConfigRepository().configs.itemsPerPage={club:e.Mg,transferMarket:o?49:e.er};const s=t.call(this,...n);return s.observe(this,(function(e,t){if(t.success){const e=[...t.data.items||[]];if(e.length){e.sort(((e,t)=>e._auction.buyNowPrice-t._auction.buyNowPrice));const t=e[0];r&&services.Item.bid(t,t._auction.buyNowPrice)}(e=>{const{id:t}=services.User.getUser(),n=(e=>{const t=(0,P.P)();return e.map((e=>{const n=new Date;return n.setSeconds(n.getSeconds()+e._auction.expires),{assetId:e._assetId||e._metaData&&e._metaData.id||e.definitionId,resourceId:e.definitionId,auction:{buyNowPrice:e._auction.buyNowPrice,currentBid:e._auction.currentBid,resourceId:e.definitionId,expiresOn:n,platform:t.toUpperCase(),playStyle:e.playStyle,startingBid:e._auction.startingBid,tradeId:parseInt(e._auction.tradeId),tradeState:e._auction._tradeState}}}))})(e);(0,x.w)("https://wxls53nz2plegcvsjhco3yqyke0hqrps.lambda-url.eu-west-1.on.aws/","POST",`${Math.floor(+new Date)}_trackMarketPrices`,JSON.stringify({userId:t,marketData:n}))})(e)}})),s}},M=()=>{const e=UTItemDomainRepository.prototype.setUnassignedItems;UTItemDomainRepository.prototype.setUnassignedItems=function(...t){e.call(this,...t)},UTHomeHubViewController.prototype._onUnassignedItemsRequested=function(e,n){if(e.unobserve(this),n.success){let e=n.response.items.length;50===e&&(e=(0,l.NA)("unassigned")||50),this.getView().renderUnassignedTile(e)}else NetworkErrorManager.checkCriticalStatus(t.status)&&NetworkErrorManager.handleStatus(t.status)}},j=()=>{const e=UTQuickListPanelView.prototype.onBuyPriceChanged,t=UTQuickListPanelView.prototype._generate,n=UTDefaultActionPanelView.prototype._generate,a=UTAuctionActionPanelView.prototype._generate,u=UTQuickListPanelViewController.prototype.renderView;UTQuickListPanelView.prototype.onBuyPriceChanged=function(t,n,i){e.call(this,t,n,i),(e=>{const t=(.95*this._buyNowNumericStepper.getValue()).toLocaleString();$("#saleAfterTax").html(`${(0,r.t)("price")} ${t}`)})()},UTQuickListPanelView.prototype.initFutBinEvent=function(e){if("player"!==e.type)return $(this._futbinListFor.__root).css("display","none"),setTimeout((()=>{$(".viewon").css("display","none")})),(0,l.sO)("selectedPlayer",void 0),void(0,l.sO)("selectedNonPlayer",e);$(this._futbinListFor.__root).css("display",""),setTimeout((()=>{$(".viewon").css("display","")})),(0,l.sO)("selectedPlayer",e),(0,l.sO)("selectedNonPlayer",void 0)},UTQuickListPanelView.prototype._generate=function(...e){this._generated||(t.call(this,...e),this._futbinListFor=d((0,i.Fb)((0,r.t)("listFutBin"),(0,l.f6)()),(()=>{const e=(0,l.NA)("selectedPlayer");(0,s._)([{labelEnum:enums.UIDialogOptions.YES},{labelEnum:enums.UIDialogOptions.CANCEL}],(0,i.Fb)((0,r.t)("listFutBin"),(0,l.f6)()),(0,i.Fb)((0,r.t)("listFutBin"),(0,l.f6)()),(t=>{0===t&&e&&y([e])}))}),"accordian"),this.__root.children[0].appendChild(this._futbinListFor.__root),$(`<div  class="buttonInfoLabel hasPriceBanding">\n  <span class="spinnerLabel">${(0,r.t)("afterTax")}</span>\n  <span id="saleAfterTax" class="currency-coins bandingLabel">${(0,r.t)("price")} 10,000</span>\n</div>`).insertAfter($(this._buyNowNumericStepper.__root)))},UTQuickListPanelViewController.prototype.renderView=function(){u.call(this),this.getView().initFutBinEvent(this.item)},UTDefaultActionPanelView.prototype._generate=function(...e){this._generated||(n.call(this,...e),f.call(this))},UTAuctionActionPanelView.prototype._generate=function(...e){this._generated||(a.call(this,...e),f.call(this))};const f=function(){if($(d((0,i.Fb)((0,r.t)("viewFutBin"),(0,l.f6)()),(async()=>{const e=(0,l.NA)("selectedPlayer");if(!e)return;const t=await(0,c.Y)(e);t||(0,o.E)((0,i.Fb)((0,r.t)("futBinUrlErr"),(0,l.f6)()),UINotificationType.NEGATIVE),window.open(t,"_blank")}),"accordian viewon").__root).insertAfter($(this._playerBioButton.__root)),(0,l.NA)("EnhancerSettings").idShowCalcMinBin){this._calcMinBin=C();const e=this.__root.children.length;this.__root.children[e-1].appendChild(this._calcMinBin.__root)}}};var R=__webpack_require__(199);const U=()=>{let e=window.XMLHttpRequest.prototype.open;window.XMLHttpRequest.prototype.open=function(t,n,r){this.addEventListener("readystatechange",(function(){if(4===this.readyState)if(this.responseURL.includes("/ut/game/fifa21/usermassinfo")){let e=JSON.parse(this.responseText);if(e){const t=parseInt(e.userInfo.unassignedPileSize.replace(/[,.]/g,""));(0,l.sO)("unassigned",isNaN(t)?void 0:t)}}else if(this.responseURL.includes("https://gateway.ea.com/proxy/identity/pids/me")){let e=JSON.parse(this.responseText);e&&e.pid&&!(0,l.NA)("useremail")&&(0,l.sO)("useremail",e.pid.email)}}),!1),e.call(this,t,n,r)}};var B=__webpack_require__(975);const F=()=>{const e=utils.PopupManager.showConfirmation,t=utils.PopupManager.showAlert;utils.PopupManager.showConfirmation=function(t,n,r,i){const o=(0,l.NA)("EnhancerSettings").idHideBinPop;t.title===utils.PopupManager.Confirmations.CONFIRM_BUY_NOW.title&&o?r():e.call(this,t,n,r,i)},utils.PopupManager.showAlert=function(e,n,r){const i=(0,l.NA)("EnhancerSettings").idTransferFullPop;e.title===utils.PopupManager.Alerts.TRANSFER_LIST_FULL.title&&i||t.call(this,e,n,r)}},z=(e,t,n,r)=>{let o;const s=$("<div class='futbinprice auctionValue priceholder'></div>");t.find(".futbinprice").remove(),r&&(o=(0,i.Ew)(.95*n,r),H(services.Localization.localize("infopanel.label.prevBoughtPrice"),s,r,"boughtFor")),H(e,s,n,"futbinpricesel",o),t.prepend(s)},q=(e,t)=>{e.prepend(`\n    <div style="position: absolute;top: -10px;width: 100%;">\n      <span class="currency-coins value squad-fut-bin">${t?t.toLocaleString():"---"}</span>\n    </div>`)};$(document).on("click touchend",".player-select-check",(function(e){const t=parseInt(e.currentTarget.id),n=e.currentTarget.dataset.section,r=(0,l.Ig)(n);((e,t,n)=>{t.set(n,e),$(`#${n}_check`).prop("checked",e)})(!r.get(t),r,t)})),$(document).on("click touchend",".section-select-check",(function(e){const t=e.currentTarget;if("true"!==t.dataset.issupported)return;const n=`#${e.currentTarget.id}`.replace("wrapper","check"),i=t.dataset.header,o=(0,l.Hx)(i),a=!o.get(i);(0,s._)([{labelEnum:enums.UIDialogOptions.OK},{labelEnum:enums.UIDialogOptions.CANCEL}],a?(0,r.t)("selectAll"):(0,r.t)("deSelectAll"),a?(0,r.t)("selectAll"):(0,r.t)("deSelectAll"),(e=>{2===e?(()=>{o.set(i,a);const e=(0,l.Ig)(i)||new Map;for(const[t]of e)e.set(t,a),$(`#${t}_check`).prop("checked",a);$(n).prop("checked",a)})():$(n).prop("checked",!a)}))}));const K=(e,t,n)=>{const r=(0,l.Ig)(t);void 0===r.get(n.id)&&r.set(n.id,!0),e.find(".player-select").remove();const i=$(`<div id='${n.id}' data-section='${t}' class="price-filter player-select player-select-check">\n      <input type='checkbox' id='${n.id}_check' class="player-select" />\n    </div>`);r.get(n.id)&&i.find("input").prop("checked",!0),e.prepend(i)},V=e=>{e.find(".rowContent").find(".show-duplicate")[0]||e.find(".rowContent").append('<div class="show-duplicate ut-list-tag-view ut-list-active-tag-view">\n            <div class="label-container">\n              <span class="fut_icon icon_squad">\n              </span>\n              <span class="label">\n              </span>\n            </div>\n        </div>')},G=(e,t)=>{e.find(".ut-item-player-status--loan").text(t)},H=(e,t,n,r,i)=>{const o=i<0?"orangered":i>0?"lime":"darksalmon";t.prepend(`<div class="auctionValue ${r} futbinprice">\n              <span class="label">${e} ${void 0!==i?`<info style='color: ${o}'>(${i.toFixed(2)}%)</info>`:""}</span>\n              <span class="currency-coins value">${n?n.toLocaleString():"---"}</span>             \n            </div>`)},W=async()=>{if(repositories.Item.isPileFull(ItemPile.TRANSFER))return(0,o.E)((0,r.t)("transferListFull"),UINotificationType.NEGATIVE);(0,i.VO)();let e=await J();e&&a(e),(0,i.Gx)()},J=()=>new Promise((e=>{services.Item.requestUnassignedItems().observe(void 0,(function(t,{response:{items:n}}){e(n)}))})),Y=async(e,t)=>{const n=(0,l.NA)("EnhancerSettings")||{};if(!e.length||!1===n.idFutBinPrice)return;const i=[],o="packs"===t,s=e[0].data.getAuctionData(),a=!(o||"club"===t||s.isSold()||s.isActiveTrade()||s.isOutbid());for(const{data:t}of e)i.push(t);const u=(0,l.f6)(),d=await(0,c.x)(i);let f=0,p=0,h=0;const v=(0,l.NA)("squadMemberIds")||new Set;for(const{__auction:n,data:r,__root:i}of e){const e=$(n),o=$(i),{definitionId:s,contract:c,_auction:l,lastSalePrice:g}=r,m=d.get(`${s}_${u}_price`);if(G(o,c),a&&K(o,t,r),v.has(s)&&V(o),void 0===m)continue;e.attr("style")&&(e.removeAttr("style"),e.addClass("hideauction"));const y=l.currentBid||l.startingBid;p+=y,h+=l.buyNowPrice,f+=m||0,z(u.toUpperCase(),e,m,"inactive"!==l._tradeState||o.hasClass("has-action")?0:g),Z(o,l.buyNowPrice,y,m)}var g;return o&&(g=f,$(".ut-store-reveal-modal-list-view--wallet").append(`<span class="ut-store-reveal-modal-list-view--coins">${(0,r.t)("packValue")} ${g}</span>`)),{totalBid:p,totalBin:h,totalExternalPrice:f}},Z=(e,t,n,r)=>{const i=(0,l.NA)("EnhancerSettings")||{},o=i.idBidBargain;r*=(i.idBarginThreshold||95)/100,t&&r>t||o&&n&&r>n?e.addClass("futbinLessPrice"):i.idOnlyBargain&&e.addClass("hideResult")},Q=async e=>{if(!e.length)return;const t=[];for(const{item:n}of e)t.push(n);const n=(0,l.f6)(),i=await(0,c.x)(t);let o=0;for(const{rootElement:t,item:r}of e){const e=i.get(`${r.definitionId}_${n}_price`);if(o+=e||0,e){const n=$(t);q(n,e)}}((e,t)=>{$(".squadTotal").length?$(".squadTotal").text(t):$(`<div class="rating">\n          <span class="ut-squad-summary-label">${e} ${(0,r.t)("squadPrice")}</span>\n          <div>\n            <span class="ratingValue squadTotal currency-coins">${t}</span>\n          </div> \n        </div>\n        `).insertAfter($(".chemistry"))})(n.toUpperCase(),o)},X=async t=>{const n=(0,l.f6)();if(t.listRows.length){if(services.Localization.localize("infopanel.label.storeAllInClub")===t.sectionHeader&&t.headerElement.append(O((()=>u(W)),"relist").__root),t.isRelistSupported){const[e,i]=((e,t,n,r,i)=>{const o=t.find(".relistwrapper");if(!o.length){t.addClass("relistsection");const e=$("<div class='relistwrapper'></div>");return e.append(A(r,n).__root),t.append(e),[e,!0]}return[o[0],!1]})(t.sectionHeader,t.headerElement,n.toUpperCase(),(()=>{h(t.sectionHeader)}));[services.Localization.localize("tradepile.button.relistall"),services.Localization.localize("infopanel.label.addplayer")].indexOf(t.sectionHeader)>=0&&i&&e&&e.append((r=()=>{return e=t.sectionHeader,void([services.Localization.localize("tradepile.button.relistall"),services.Localization.localize("infopanel.label.addplayer")].indexOf(e)>=0&&m(e,void 0,void 0,!0));var e},"relist",d(services.Localization.localize("infopanel.label.club"),(()=>{(0,s._)([{labelEnum:enums.UIDialogOptions.YES},{labelEnum:enums.UIDialogOptions.CANCEL}],services.Localization.localize("infopanel.label.club"),services.Localization.localize("infopanel.label.club"),(e=>{0===e&&r()}))}),"btn-standard mini call-to-action relist")).__root)}Y(t.listRows,t.sectionHeader).then((r=>{setTimeout((()=>{((t,n,{totalBid:r,totalBin:i,totalExternalPrice:o},s,a)=>{t.parent().find(`#${e.Dq}`).remove();const u=a.replace(/\s/g,"");let c=(0,l.Hx)(a).get(a);$(`<div id=${e.Dq} style="position:relative" class="ut-button-group">\n   ${s?`<div id='${u}_wrapper' data-issupported='${s}' data-header='${a}' class="price-filter player-select section-select-check">\n      <input id='${u}_check' ${c&&"checked"} type='checkbox' class="player-select" />\n    </div>`:""}\n    <h3 class="ut-group-button cta price-totals ut-store-reveal-modal-list-view--wallet">\n    <span class="ut-store-reveal-modal-list-view--coins">${n} ${o} </span>\n    </h3>\n  </div>`).insertAfter(t)})(t.headerElement,n.toUpperCase(),r,t.isRelistSupported,t.sectionHeader)}),100)}))}var r},ee=()=>{const e=UTStoreRevealModalListView.prototype.render;UTStoreRevealModalListView.prototype.render=function(...t){e.call(this,...t),Y(this.listRows.map((({__root:e,__auction:t,data:n})=>({__root:e,__auction:t,data:n}))),"packs")}};let te;__webpack_require__(39);let ne=new Set;const re=(e,t,n)=>{const r=(0,l.NA)("EnhancerSettings")||{};"number"===n&&(t=parseInt(t)),r[e]=t||null,(0,l.sO)("EnhancerSettings",r)},ie=function(e){UTView.call(this)};JSUtils.inherits(ie,UTView),$(document).on({change:function(){const t=$(`#${e.lr} option`).filter(":selected").val(),n=(0,l.NA)("EnhancerSettings")||{};n.idExternalDataSource=t,(0,l.sO)("EnhancerSettings",n)}},`#${e.lr}`),ie.prototype._generate=function(){if(!this._generated){let t=document.createElement("div");t.classList.add("ut-market-search-filters-view"),t.classList.add("floating"),t.style["overflow-y"]="scroll",t.style.display="flex",t.style["align-items"]="center";let n=document.createElement("div");n.style.height="100%";const r=(0,l.f6)();((0,l.NA)("EnhancerSettings")||{}).idMinRating;r&&setTimeout((()=>{$(`#${e.lr}`).find(`option[value=${r}]`).attr("selected","selected")})),n.appendChild($(' <div class=\'enhancer-settings-wrapper ut-pinned-list\'>\n          <div class="enhancer-settings-header"> \n          <h1 class="secondary">内部使用 暂不开放</h1>\n          </div>\n    </div>')[0]),t.appendChild(n),this.__root=t,this._generated=!0}};const oe=function(e){UTViewController.call(this)};JSUtils.inherits(oe,UTViewController),oe.prototype._getViewInstanceFromData=function(){return new ie},oe.prototype.viewDidAppear=function(){this.getNavigationController().setNavigationVisibility(!0,!0)},oe.prototype.getNavigationTitle=function(){return(0,r.t)("enhancer")};const se=()=>{const e=UTGameTabBarController.prototype.initWithViewControllers;UTGameTabBarController.prototype.initWithViewControllers=function(t){const n=new UTGameFlowNavigationController;n.initWithRootController(new oe),n.tabBarItem=ae(),t.push(n),e.call(this,t)}},ae=()=>{const e=new UTTabBarItemView;return e.init(),e.setTag(6),e.setText((0,r.t)("enhancer")),e.addClass("icon-transfer"),e},ue=()=>`\n${(()=>{const t=[{value:"moveClub",label:(0,r.t)("moveToClub")},{value:"moveTransfers",label:(0,r.t)("moveToTransferList")},{value:"quickSell",label:(0,r.t)("quickSell")},{value:"listExternal",label:(0,i.Fb)((0,r.t)("listFutBin"),(0,l.f6)())}];return[{id:e.i8,label:services.Localization.localize("search.filters.players"),actions:t},{id:e.tK,label:services.Localization.localize("roles.manager"),actions:t.slice(0,3)},{id:e.dj,label:services.Localization.localize("card.title.contract"),actions:t.slice(0,3)},{id:e.MF,label:(0,r.t)("nonPlayers"),actions:t.slice(0,3)},{id:e.iT,label:(0,r.t)("duplicates"),actions:t.slice(1)}]})().map((({id:e,label:t,actions:n})=>`\n${t}\n<select class="sbc-players-list" id="${e}"\n    style="overflow-y : scroll">\n    ${n.map((({value:e,label:t})=>`<option value='${e}'>${t}</option>`))}\n </select> \n <br />\n <br />\n`)).join("")}\n <br />\n <br />\n ${(0,r.t)("noOfPacks")}\n <input placeholder="3" id=${e.XE} type="number" class="ut-text-input-control fut-bin-buy" />\n <br /> <br />\n ${GameCurrency.COINS}/${GameCurrency.POINTS}\n <select class="sbc-players-list" id="${e.am}"\n    style="overflow-y : scroll">\n    <option value=${GameCurrency.COINS}>${services.Localization.localize("currency.coins")}</option>\n    <option value=${GameCurrency.POINTS}>${services.Localization.localize("currency.points")}</option>\n </select>\n <br /> <br />\n `,ce=()=>{const t=parseInt($(`#${e.XE}`).val())||3,n=$(`#${e.am}`).val()||GameCurrency.COINS;return{noOfPacks:t,playersHandler:$(`#${e.i8}`).val(),managersHandler:$(`#${e.tK}`).val(),contractsHandler:$(`#${e.dj}`).val(),otherItemsHandler:$(`#${e.MF}`).val(),duplicateHandler:$(`#${e.iT}`).val(),credits:n}},le=async(e,t)=>{for((0,i.VO)();t.noOfPacks>0;){const n=await fe(e,t);if(!n.success)return(0,i.Gx)(),(0,o.E)(n.message||(0,r.t)("packOpeningErr"),UINotificationType.NEGATIVE);await(0,i.Dc)(3),t.noOfPacks--,(0,o.E)(`${t.noOfPacks} ${(0,r.t)("packsRemaining")}`)}(0,i.Gx)()},de=(e,t)=>new Promise((async n=>{if(e.length||n(""),"moveTransfers"===t||"listExternal"===t){if(repositories.Item.isPileFull(ItemPile.TRANSFER))return n((0,r.t)("transferListFull"));"listExternal"===t?(await y(e),(0,i.VO)(),n("")):services.Item.move(e,ItemPile.TRANSFER).observe(void 0,(function(e,t){n("")}))}else"moveClub"===t?services.Item.move(e,ItemPile.CLUB).observe(void 0,(function(e,t){n("")})):"quickSell"===t&&services.Item.discard(e).observe(void 0,(function(e,t){n("")}))})),fe=(e,t)=>repositories.Item.numItemsInCache(ItemPile.PURCHASED)?{success:!1,message:services.Localization.localize("popup.error.unassignedItemsEntitlementTitle")}:!e.prices._collection[t.credits]||e.prices._collection[t.credits].amount>services.User.getUser()[t.credits.toLowerCase()].amount?{success:!1,message:(0,r.t)("errInsufficientCredits")}:new Promise((n=>{e.purchase(t.credits).observe(void 0,(function(e,s){s.success?(repositories.Item.setDirty(ItemPile.PURCHASED),(0,o.O)("Unassigned Items - List View"),services.Item.requestUnassignedItems().observe(this,(async function(e,{response:{items:s}}){let a="";a+=await((e,t)=>{const n=e.filter((e=>!e.isDuplicate()&&e.isPlayer()));return(0,o.E)((0,r.t)("handlingPlayers")),de(n,t)})(s,t.playersHandler),await(0,i.Dc)(2),a+=await((e,t)=>{const n=e.filter((e=>!e.isDuplicate()&&e.isManager()));return(0,o.E)((0,r.t)("handlingManagers")),de(n,t)})(s,t.managersHandler),await(0,i.Dc)(2),a+=await((e,t)=>{const n=e.filter((e=>!e.isDuplicate()&&(e.isPlayerContract()||e.isManagerContract())));return(0,o.E)((0,r.t)("handlingContracts")),de(n,t)})(s,t.contractsHandler),await(0,i.Dc)(2),a+=await((e,t)=>{const n=e.filter((e=>!(e.isDuplicate()||e.isPlayer()||e.isManager()||e.isPlayerContract()||e.isManagerContract())));return(0,o.E)((0,r.t)("handlingOtherItems")),de(n,t)})(s,t.otherItemsHandler),await(0,i.Dc)(2),a+=await((e,t)=>{const n=e.filter((e=>e.isDuplicate()));return(0,o.E)((0,r.t)("handlingDuplicates")),de(n,t)})(s,t.duplicateHandler),await(0,i.Dc)(2),a+=await(e=>new Promise((async t=>{const n=e.filter((e=>e.isMiscItem()));n.length?((0,o.E)((0,r.t)("handlingCredits")),await Promise.all(n.map((async e=>{services.Item.redeem(e),await(0,i.Dc)(2)}))),t("")):t("")})))(s),await(0,i.Dc)(1),await(0,P.b)(),n({success:!a.length,message:a})}))):n({success:!1})}))})),pe=()=>{const e=UTStorePackDetailsView.prototype.setupBuyCoinsButton,t=function(){let e=!1;services.Store.getPacks().observe(this,(function(t,n){if(e)return;e=!0;const i=n.response.packs.find((e=>e.id===this.articleId));i?(0,s._)([{labelEnum:enums.UIDialogOptions.OK},{labelEnum:enums.UIDialogOptions.CANCEL}],(0,r.t)("autoOpenPacks"),ue(),(e=>{2===e&&(async e=>{const t=ce();await le(e,t)})(i)})):(0,o.E)((0,r.t)("packMissing"),UINotificationType.NEGATIVE)}))};UTStorePackDetailsView.prototype.setupBuyCoinsButton=function(...n){e.call(this,...n),this._btnOpenPacks&&this.removeActionButton(this._btnOpenPacks),this._btnOpenPacks=new UTCurrencyButtonControl,this._btnOpenPacks.init(),this._btnOpenPacks.setText((0,r.t)("openPack")),this._btnOpenPacks.setSubText((0,r.t)("automatically")),this._btnOpenPacks.addClass("call-to-action packOpen"),this._btnOpenPacks.addTarget(this,t,EventType.TAP),this.appendActionButton(this._btnOpenPacks)}},he=()=>{const e=UTSquadPitchView.prototype.setSlots;UTSquadPitchView.prototype.setSlots=async function(...t){const n=e.call(this,...t);if(!((0,l.NA)("EnhancerSettings")||{}).idShowSquadPrice)return;const r=this.getSlotViews(),i=[];return r.forEach(((e,n)=>{const r=t[0][n];i.push({item:r._item,rootElement:e.getRootElement()})})),Q(i),n}},ve=new Set([5001001,5001004,5001008,5001011,5001002,5001005,5001009,5001012,5001003,5001006,5001010,5001013]),ge=()=>{const e=UTItemSearchView.prototype.setFilters,t=UTItemSearchViewModel.prototype.updateFromFilterChange,n=UTItemSearchView.prototype.getFilterTitle,r=UTItemSearchView.prototype.generateFilterImage;UTItemSearchView.prototype.generateFilterImage=function(e,t,n){return"contract.type"===e?`${fut_resourceRoot}${fut_resourceBase}${fut_guid}/${fut_year}/fut/items/images/mobile/type/list/3/5.png`:r.call(this,e,t,n)},UTItemSearchView.prototype.getFilterTitle=function(e){return"contract.type"===e?"CONTRACT TYPE":n.call(this,e)},UTItemSearchViewModel.prototype.updateFromFilterChange=function(...e){return"contract.type"===(e.length?e[0]:null)&&(this.searchCriteria.defId=-1!=e[1]?[e[1]]:[]),t.call(this,...e)},UTItemSearchView.prototype.setFilters=function(t,n){if(e.call(this,t,n),t.searchCriteria.category===SearchCategory.MANAGER_LEAGUE)this.setFilterLock(enums.UISearchFilters.LEAGUE,!1);else if(t.searchCriteria.category===SearchCategory.CONTRACT){this.generateFilter("contract.type",[{id:-1,label:"Any",value:"any"},{id:5001001,label:"Player Bronze Common",value:5001001},{id:5001004,label:"Player Bronze Rare",value:5001004},{id:5001008,label:"Manager Bronze Common",value:5001008},{id:5001011,label:"Manager Bronze Rare",value:5001011},{id:5001002,label:"Player Silver Common",value:5001002},{id:5001005,label:"Player Silver Rare",value:5001005},{id:5001009,label:"Manager Silver Common",value:5001009},{id:5001012,label:"Manager Silver Rare",value:5001012},{id:5001003,label:"Player Gold Common",value:5001003},{id:5001006,label:"Player Gold Rare",value:5001006},{id:5001010,label:"Manager Gold Common",value:5001010},{id:5001013,label:"Manager Gold Rare",value:5001013}],t.searchCriteria.defId.some((e=>ve.has(e)))?t.searchCriteria.defId[0]:"any");const e=this.filters[this.filters.length-1];this.getRootElement().appendChild(e.getRootElement())}else t.searchCriteria.defId.length&&ve.has(t.searchCriteria.defId[0])&&(t.searchCriteria.defId=[])}},me=()=>{const e=UTPaginatedItemListView.prototype._renderItems,t=UTSectionedItemListView.prototype.setHeader,n=new Set;UTPaginatedItemListView.prototype._renderItems=function(...t){const n=e.call(this,t);return Y(this.listRows.map((({__root:e,__auction:t,data:n})=>({__root:e,__auction:t,data:n}))),"club"),n},UTSectionedItemListView.prototype.setHeader=function(e,i,...o){const s=t.call(this,e,i,...o);return n.size||r(),X({listRows:this.listRows.map((({__root:e,__auction:t,data:n})=>({__root:e,__auction:t,data:n}))),headerElement:$(this._header.__root),isRelistSupported:n.has(i),sectionHeader:i}),s};const r=()=>{[services.Localization.localize("infopanel.label.addplayer"),services.Localization.localize("tradepile.button.relistall"),services.Localization.localize("infopanel.label.alltoclub"),services.Localization.localize("infopanel.label.storeAllInClub")].forEach((e=>n.add(e)))}},ye=()=>{const e=UTItemDomainRepository.prototype.isPileFull;UTItemDomainRepository.prototype.isPileFull=function(...t){const n=(0,l.NA)("EnhancerSettings")||{};return n.idUnassignedPileSize&&(MAX_NEW_ITEMS=n.idUnassignedPileSize,this.pileSizes.set(ItemPile.PURCHASED,n.idUnassignedPileSize)),e.call(this,...t)}},be=()=>{const e=UTQuickListPanelViewController.prototype._onOpen;UTQuickListPanelViewController.prototype._onOpen=function(...t){return e.call(this,...t)}};var we=__webpack_require__(793),_e=__webpack_require__.n(we);const Se=()=>{const t=UTCurrencyNavigationBarView.prototype._tapDetected,n=UTCurrencyNavigationBarView.prototype._generate,r=UTCurrencyNavigationBarView.prototype.setClubInfo;UTCurrencyNavigationBarView.prototype.setClubInfo=function(e,t){const n=r.call(this,e,t),i=(0,l.NA)("loggedInUser");return i&&(this.__clubInfoEst.textContent=i.userName),n},UTCurrencyNavigationBarView.prototype._tapDetected=function(e){const n=t.call(this,e);return this.__currencyCoins.contains(e.target)&&(0,P.b)(),n},UTCurrencyNavigationBarView.prototype._generate=function(){const t=(0,l.NA)("loggedInUser"),r=n.call(this);return e.Lo||(this.__loginWrapper=document.createElement("div"),this.__loginWrapper.classList.add("view-navbar-clubinfo"),this.__loginWrapper.style.marginRight="10px",this.__loginWrapperBtn=document.createElement("button"),this.__loginWrapperBtn.innerHTML=t?"Logout":"Login To AB Server",this.__loginWrapperBtn.classList.add("btn-standard","section-header-btn","call-to-action","btn-sign"),t&&(this.__loginWrapperBtn.style.backgroundColor="#ff3434",this.__loginWrapperBtn.style.color="#f6f6fe"),this.__loginWrapperBtn.onclick=function(){t?we.Auth.signOut():we.Auth.federatedSignIn()},this.__loginWrapper.appendChild(this.__loginWrapperBtn),this.__currencies.parentNode.insertBefore(this.__loginWrapper,this.__currencies)),r}},Ee=()=>{const e=UTPackAnimationViewController.prototype.runAnimation,t=UTPresentationController.prototype.present;UTPackAnimationViewController.prototype.runAnimation=function(...t){return((0,l.NA)("EnhancerSettings")||{}).idDisablePackAnimation?this.runCallback():e.call(this,...t)},UTPresentationController.prototype.present=function(e,...n){return((0,l.NA)("EnhancerSettings")||{}).idDisablePackAnimation&&this.presentedViewController instanceof UTPackAnimationViewController&&(e=!1),t.call(this,e,...n)}},Ce=()=>{const t=UTMarketSearchFiltersViewController.prototype.viewDidAppear,n=UTTransferMarketPaginationViewModel.prototype.getCurrentPageIndex,i=UTMarketSearchFiltersViewController.prototype.dealloc;JSUtils.inherits(UTMarketSearchFiltersViewController,UTMarketSearchFiltersViewController);const o=e=>{const t=(0,l.NA)("EnhancerSettings")||{};e&&(t.idAutoBuyMin=!1),t.idPageNumber=1,(0,l.sO)("EnhancerSettings",t)};UTTransferMarketPaginationViewModel.prototype.getCurrentPageIndex=function(...e){const{idPageNumber:t}=(0,l.NA)("EnhancerSettings");return 1!==t&&1===this.pageIndex&&(this.pageIndex=t,o()),n.call(this,...e)},UTMarketSearchFiltersViewController.prototype.dealloc=function(...e){return o(!0),i.call(this,...e)},UTMarketSearchFiltersViewController.prototype.viewDidAppear=function(...n){const i=t.call(this,...n);D("idAutoBuyMin");const o=(0,l.NA)("EnhancerSettings")||{};let s=this.getView(),a=$(s.__root);return a.find(".settings-field").remove(),a.find(".ut-item-search-view").first().prepend(`${N((0,r.t)("autoBuyLowest"),{idAutoBuyMin:e.WV},"",o.idAutoBuyMinGlobal||!1,"settings-field autoBuyMin")}`),a.find(".search-prices").first().append(),i}},Ae=()=>{const e=UTItemTableCellView.prototype._tapDetected;UTItemTableCellView.prototype._tapDetected=function(t){if(!$(t.target).hasClass("player-select"))return e.call(this,t)}},Oe=()=>{const e=services.SBC.submitChallenge;services.SBC.submitChallenge=function(t,n,r){const i=t.squad.getFieldPlayers().map((function(e){return e.item.definitionId})),o=t.eligibilityRequirements.map((e=>({scope:e.scope,requirements:e.kvPairs._collection})));var s;return s={sbcId:t.id,players:i,expiresOn:t.endTime,challengeName:t.name,setName:n.name,requirements:o},(0,x.w)(atob("aHR0cHM6Ly9pamVwZ2pwNnUzM3dobDd2N3dkd2RjbWM1cTBuendjdy5sYW1iZGEtdXJsLmV1LXdlc3QtMS5vbi5hd3Mv"),"POST",`${Math.floor(+new Date)}_saveSolution`,JSON.stringify({squad:s})),e.call(this,t,n,r)}},Ie=()=>{const e=UTSBCHubView.prototype._generate,t=UTSBCHubView.prototype.populateTiles,n=UTSBCHubView.prototype.dealloc;UTSBCHubView.prototype.dealloc=function(...e){this.searchInput&&this.searchInput.dealloc(),n.call(this,...e)},UTSBCHubView.prototype.populateTiles=function(...e){if(t.call(this,...e),this.searchInput){const e=this.searchInput.getValue();e&&Te(e,$(this.__sbcSetTiles).children())}},UTSBCHubView.prototype._generate=function(...t){const n=e.call(this,...t),r=this.__root.children[1],i=document.createElement("div");return i.classList.add("layout-hub","grid"),this.searchInput=new UTTextInputControl,this.searchInput.init(),this.searchInput.setPlaceholder(services.Localization.localize("button.search")),this.searchInput.addTarget(this,((e,t,{value:n})=>{Te(n.toLowerCase(),$(this.__sbcSetTiles).children())}),EventType.INPUT),i.appendChild(this.searchInput.getRootElement()),r.prepend(i),n}},Te=(e,t)=>{for(const n of t)e.length&&$(n).find(".tileHeader").text().toLowerCase().indexOf(e)<0?n.classList.add("hide"):n.classList.remove("hide")},xe=()=>{const t=UTMarketSearchResultsSplitViewController.prototype._eListDataChanged;UTMarketSearchResultsSplitViewController.prototype._eListDataChanged=function(n,r){const i=t.call(this,n,r),{idAutoSelectMin:o}=(0,l.NA)("EnhancerSettings")||{},s=r.items;if(!s||e.Lo||!o)return i;let a=0,u=Number.MAX_VALUE;for(let e=0;e<s.length;e++){const{buyNowPrice:t}=s[e]._auction;t<u&&(a=e,u=t)}return a&&(this._itemDetailController.setIndex(a),this._listController&&this._listController.getView().selectListRow(s[a].id),this._itemDetailController._childViewControllers[0]._viewmodel.setIndex(a),this._itemDetailController._childViewControllers[0]._renderView()),i}},Pe=()=>{const e=UTPlayerItemView.prototype.renderItem;UTPlayerItemView.prototype.renderItem=function(t,n){const r=e.call(this,t,n),{idShowAlternatePosition:i}=(0,l.NA)("EnhancerSettings")||{};return i&&setTimeout((()=>{const e=$(this.__mainViewDiv).find(".playerOverview");if($(this.__mainViewDiv).find(".preferredPositionWrapper")[0])return;const n=t.possiblePositions||[];$(`<div class='playerOverview preferredPositionWrapper' style="color: rgb(70, 57, 12);right:0;left:unset">${n.reduce(((e,n)=>(t.preferredPosition!==n&&(e+=`<div class='preferredPosition'>${PlayerPosition[n]}</div>`),e)),"")}</div>`).insertBefore(e)}),10),r}},ke=()=>{const t=UTSquadBuilderView.prototype._generate,n=UTSquadBuilderViewController.prototype.onClubSearchComplete,r=UTSquadBuilderViewModel.prototype.generatePlayerCollection;UTSquadBuilderView.prototype._generate=function(){const n=(0,l.NA)("EnhancerSettings")||{},r=t.call(this);return this.__sortContainer.append((0,i.LU)(`<div>\n        ${((e,t,n,r,i=null,o="number",s="settings-field",a=".*")=>{const u=Object.keys(n)[0];return re(u,i||t,o),i&&setTimeout((()=>{$(`#${n[u]}`).val(i)})),ne.has(u)||($(document).on("input",`#${n[u]}`,(({target:{value:e}})=>{re(u,e||t,o)})),ne.add(u)),`<div class="price-filter ${s}">\n       <div class="info">\n           <span class="secondary label"><button id='${n[u]}_tooltip' style="font-size:16px" class="flat camel-case">${e}</button> :<br/><small>${r}</small></span>\n       </div>\n       <div class="buttonInfo">\n           <div class="inputBox">\n               <input pattern="${a}" type="${o}" class="numericInput" id='${n[u]}' placeholder=${t}>\n           </div>\n       </div>\n    </div>`})("Rating","10-99",{idSquadBuildPlayerRating:e.Pn},"(Filter players by rating range)",n.idSquadBuildPlayerRating,"text","sb-setting","\\d+-\\d+$")}\n        ${N("Ignore Position",{idSquadBuildIgnorePosition:e.FT},"",n.idSquadBuildIgnorePosition,"sb-setting")}\n        </div>`)),r},UTSquadBuilderViewModel.prototype.generatePlayerCollection=function(e,t,n){if(!((0,l.NA)("EnhancerSettings")||{}).idSquadBuildIgnorePosition)return r.call(this,e,t,n);let i=0;return e.map((function(e,r){var o=n?n.getSlot(r):null;return o&&(o.isValid()||o.isBrick())?o.getItem():t[i++]}))},UTSquadBuilderViewController.prototype.onClubSearchComplete=function(e,t){const r=(0,l.NA)("EnhancerSettings")||{},o=(0,i.Gu)(r.idSquadBuildPlayerRating||"");2===o.length&&(t.response.items=t.response.items.filter((e=>!(e.rating<o[0]||e.rating>o[1])))),n.call(this,e,t)}};var De=__webpack_require__(425);const Ne=async()=>{try{return(await we.Auth.currentSession()).getAccessToken().getJwtToken()}catch(e){return null}},Le=async()=>we.Auth.currentAuthenticatedUser(),Me=e=>({userName:je(e),email:e.attributes?e.attributes.email:""}),je=e=>{let t="";return e.attributes&&(t=e.attributes.preferred_username||e.attributes.name),t||(t=e.username),/signinwith/.test(t)&&e.attributes.email&&(t=e.attributes.email),t};e.Lo||(_e().configure(JSON.parse(atob("eyJBdXRoIjp7InJlZ2lvbiI6InVzLWVhc3QtMSIsInVzZXJQb29sSWQiOiJldS13ZXN0LTFfS1RUY2VPaDRGIiwidXNlclBvb2xXZWJDbGllbnRJZCI6IjVpbHVmMGdkZ3IwdDUzcXYyZGhydWFoOTg1IiwibWFuZGF0b3J5U2lnbkluIjpmYWxzZSwiY29va2llU3RvcmFnZSI6eyJkb21haW4iOiJlYS5jb20iLCJwYXRoIjoiLyIsImV4cGlyZXMiOjM2NSwic2VjdXJlIjp0cnVlfSwicmVkaXJlY3RTaWduSW4iOiJodHRwczovL3d3dy5lYS5jb20vZmlmYS91bHRpbWF0ZS10ZWFtL3dlYi1hcHAvIiwicmVkaXJlY3RTaWduT3V0IjoiaHR0cHM6Ly93d3cuZWEuY29tL2ZpZmEvdWx0aW1hdGUtdGVhbS93ZWItYXBwLyJ9fQ=="))),we.Auth.configure({oauth:JSON.parse(atob("eyJkb21haW4iOiJsb2dpbi5mdXRoZWxwZXJzLmNvbSIsInNjb3BlIjpbInBob25lIiwiZW1haWwiLCJwcm9maWxlIiwib3BlbmlkIiwiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iXSwicmVkaXJlY3RTaWduSW4iOiJodHRwczovL3d3dy5lYS5jb20vZmlmYS91bHRpbWF0ZS10ZWFtL3dlYi1hcHAvIiwicmVkaXJlY3RTaWduT3V0IjoiaHR0cHM6Ly93d3cuZWEuY29tL2ZpZmEvdWx0aW1hdGUtdGVhbS93ZWItYXBwLyIsInJlc3BvbnNlVHlwZSI6ImNvZGUifQ=="))}));const Re=function(){let t=!1;services.Localization&&(new Promise((e=>{let t=(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB||window.shimIndexedDB).open("userSettings",1);t.onupgradeneeded=function(){te=t.result,te.createObjectStore("UserSettings",{keyPath:"settingName"}),te.createObjectStore("Players",{keyPath:"id"})},t.onsuccess=function(){te=t.result,e()}})).then((()=>{new Promise(((e,t)=>{const n=te.transaction("UserSettings","readonly").objectStore("UserSettings").getAll();n.onsuccess=function(){let t=null;n.result.length&&(t=n.result[0].jsonData),e(t)},n.onerror=function(){t()}})).then((e=>{e&&((0,l.sO)("EnhancerSettings",JSON.parse(e)),(()=>{const e=(0,l.NA)("EnhancerSettings")||{};e.idUnassignedPileSize&&(MAX_NEW_ITEMS=e.idUnassignedPileSize)})())})),new Promise(((e,t)=>{const n=te.transaction("Players","readonly").objectStore("Players").getAll();n.onsuccess=function(){let t=[];if(n.result.length)for(let e of n.result)t.push(e);e(t)},n.onerror=function(){t()}})).then((e=>{e&&(0,l.sO)("PlayersRatingRange",e)}))})),(0,l.sO)("EnhancerSettings",{}),(0,l.sO)("PlayersRatingRange",[]),e.Lo||(async()=>{await(async()=>{const e=await Ne();if(e){const t=Me(await Le());t.token=e,(0,l.sO)("loggedInUser",t)}return e})()})(),t=!0),t?(U(),M(),I(),T(),L(),j(),(0,R.o)(),(0,B.j)(),ee(),(0,s.z)(),F(),se(),pe(),he(),ge(),me(),ye(),be(),Se(),Ee(),Ce(),Ae(),Oe(),Ie(),xe(),Pe(),ke(),(()=>{const e=document.createElement("style");e.innerText='\n    .player-stats-data-component ul { \n      display: grid;   \n      grid-template-columns: 1fr 1fr 1fr; \n      grid-template-rows: 1fr; \n      width: 78px; \n    }\n    .SearchResults.ui-layout-left>.paginated-item-list>ul{\n      display: grid;\n      grid-template-columns: 1fr 1fr;\n      grid-template-rows: repeat(25,1fr);\n    }\n    .SearchResults.ui-layout-left .player .ut-item-player-status--loan,\n    .phone .SearchResults .player .ut-item-player-status--loan{\n      display: block;\n      background: #4d42f5;\n    }\n    .ut-split-view {\n      padding: 0;\n    }\n    .ui-layout-left .listFUTItem .auction{\n      top: 3% !important;      \n      width: 37% !important;\n      right: .5rem;\n    }\n    .auction.show {\n      display: block !important;\n    }\n    .auction.show .auctionValue,\n    .auction.show .auction-state{\n      display: none !important;\n    }\n    .auction.show .futbinprice{\n      display: block !important;\n    }\n    .SearchResults.ui-layout-left .listFUTItem.futbinLessPrice .rowContent,\n    .phone .SearchResults .listFUTItem.futbinLessPrice .rowContent{\n      background-color: blue;\n      animation: 4s infinite glow;\n    }\n    .SearchResults.ui-layout-left .listFUTItem.hideResult,\n    .phone .SearchResults .listFUTItem.hideResult{\n     display :none;\n    }\n    .SearchResults.ui-layout-left .listFUTItem.expired .rowContent, \n    .phone .SearchResults .listFUTItem.expired .rowContent,\n    .SearchResults.ui-layout-left .listFUTItem.highest-bid .rowContent, \n    .phone .SearchResults .listFUTItem.highest-bid .rowContent,\n    .SearchResults.ui-layout-left .listFUTItem.outbid .rowContent, \n    .phone .SearchResults .listFUTItem.outbid .rowContent,\n    .SearchResults.ui-layout-left .listFUTItem.won .rowContent\n    .phone .SearchResults .listFUTItem.won .rowContent{\n      background-color: #0d0f26;\n      animation: none !important;\n    }\n    @keyframes glow {\n      33% {\n        background-color: red;\n      }\n      66% {\n        background-color: blue;\n      }\n      100% {\n        background-color: purple;\n      }\n    }\n    @media (min-width: 1281px) {\n      .ut-split-view .ut-content {\n        max-width: 100%;\n        max-height: 100%;\n      }\n    }\n    @media (min-width: 1600px) {\n      .SearchResults.ui-layout-left>.paginated-item-list>ul {\n        display: grid;\n        grid-template-columns: 1fr 1fr 1fr;\n        grid-template-rows: repeat(17,1fr);\n      }\n    }\n    .downloadClub {\n      background-color: #7e42f5;\n      border-color: transparent;\n      color: #29ffc9;\n      margin-right: 10px;      \n      margin-left: 10px;\n    }\n    .ut-list-header-action {\n      display: flex\n    }\n    .SearchResults.ui-layout-left .listFUTItem .show-duplicate,\n    .phone .SearchResults .listFUTItem .show-duplicate {\n      right: auto !important;\n      left: 15px!important;\n      display: block;\n    }\n    .ui-layout-right .futbinprice{\n      display:none;\n    }\n    .futBinFill { \n      display: flex; \n      justify-content: space-evenly;\n    }\n    .futBinId {\n      flex-basis: 50%;\n    }\n    .phone .listFUTItem .auction>.auction-state, \n    .phone .listFUTItem .auction>.auctionStartPrice, \n    .phone .listFUTItem .auction>.auctionValue {\n      flex: 1 1 28%;\n      overflow: hidden;\n    }\n    html[dir=ltr]\n    .phone .listFUTItem .auction {\n      right: 0px;\n    }\n    html[dir=ltr] \n    .listFUTItem .auction.show {\n      left: auto\n    }\n    .phone .auction.show {\n      right: 2rem !important;\n    }\n    .enhancer-option-header {\n      display: flex;\n      justify-content: center;\n      margin-top: 20px;\n    } \n    .phone .settings-field  {\n      width: 100% !important;\n      padding: 0px 10px;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      flex-direction: column;\n    }\n    .settings-field .ut-toggle-cell-view {\n      justify-content: space-between;\n      margin: 0px 10px;\n    }\n    .hide {\n      display: none;\n    }\n    .hideauction .auctionValue,\n    .hideauction .auction-state {\n      display: none;\n    } \n    .hideauction .futbinprice,\n    .auction.hideauction,\n    .show {\n      display: unset !important;\n      float: right;\n    }\n    .relistFut {\n      margin-right: 10px;\n      display: none;\n    }\n    .button--loading .button__text {\n      visibility: hidden;\n      opacity: 0;\n    }\n    .button-spinner {\n      position: relative;\n    }\n    .button--loading::after {\n      content: "";\n      position: absolute;\n      width: 16px;\n      height: 16px;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      margin: auto;\n      border: 4px solid transparent;\n      border-top-color: #29ffc9;\n      border-radius: 50%;\n      animation: button-loading-spinner 1s ease infinite;\n    }\n    .ui-layout-right .enhancer-option-header,\n    .ui-layout-right .settings-field {\n      display: none;\n    }\n    \n    @keyframes button-loading-spinner {\n      from {\n        transform: rotate(0turn);\n      }\n    \n      to {\n        transform: rotate(1turn);\n      }\n    }\n    .enhancer-settings-wrapper {\n      display: flex; \n      flex-wrap: wrap; \n      margin-top: 20px;\n      box-shadow: 0 1rem 3em rgb(0 0 0 / 40%);\n      background-color: #2a323d;\n      max-width: 1200px;\n    }\n    .enhancer-settings-header {\n      display: flex;\n      justify-content: center;\n      margin: 20px;\n      width: 100%;\n    }\n    .enhancer-save-btn {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      flex: 1;\n      margin: 15px;\n    }\n    .flex-half{\n      flex: 0.5;\n    }\n    .settings-field {\n      margin-top: 15px;\n      margin-bottom: 15px;\n      width: 50% !important;\n      padding: 10px;\n    }\n    .settings-field .info{\n      text-align: center;\n    }\n    .phone .settings-field .info,\n    .phone .settings-field .buttonInfo{ \n      width:85%\n    }\n    .numericInput:invalid {\n      color: red;\n      border: 1px solid;\n    }\n    .phone .ut-store-reveal-modal-list-view--wallet {\n      flex: unset;\n    }\n    .price-totals {\n      border-top: 1px solid #4ee6eb;\n      display: flex;\n      justify-content: flex-end;\n      height: 35px;\n      align-items: center;\n    }\n    .phone .hideauction .futbinprice{\n      float: right; \n      margin-right: 2rem;\n    }\n    .fut-bin-buy {\n      margin-top: 15px;\n      margin-bottom: 15px;\n    }\n    .sbc-players-list {\n      width: 100%;\n      padding: 10px;\n      font-family: UltimateTeamCondensed, sans-serif;\n      font-size: 1.6em;\n      color: #e2dde2;\n      text-transform: uppercase;\n      background-color: #171826;\n    }\n    .packOpen {\n      margin-left: 0.5rem;\n      flex-basis: 50% !important;\n    }\n    .phone .packOpen {\n      flex-basis: 100% !important;\n    }\n    .squad-fut-bin {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n    }\n    .sbcSolutions {\n      margin-bottom: 10px;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      flex-direction: column;\n      gap: 10px;\n    }\n    .relist {\n      margin-left: 10px;\n    }\n    .phone .clubAction {\n      font-family: UltimateTeam-Icons,sans-serif;\n      padding: 0 0.5rem 0 1rem;\n      font-size: 0;\n    }\n    .phone .downloadClub::before {\n      font-size: 1.3rem;\n      content: \'\\E001\'\n    }    \n    .transferpile::before {\n      font-size: 1.3rem;\n      content: \'\\E07C\' !important\n    }\n    small {\n      white-space: break-spaces;\n    }\n    .ut-navigation-bar-view .view-navbar-currency-coins {\n      cursor: pointer;\n      position: relative;\n    }\n    .ut-navigation-bar-view .view-navbar-currency-coins::before {\n      font-family: UltimateTeam-Icons,sans-serif;\n      font-style: normal;\n      font-variant: normal;\n      font-weight: 400;\n      text-decoration: none;\n      text-transform: none;\n      background-color: #f8eede;\n      color: #243962;\n      display: block;\n      font-size: .5rem;\n      line-height: .5rem;\n      padding: 0.2rem;\n      order: 1;\n    }\n    .ut-navigation-bar-view .view-navbar-currency-coins:before {\n      margin-left: 3px;\n      content: "\\E06A";\n    }\n    .price-filter .ut-toggle-cell-view--label{\n      font-size: 19px;\n    }\n    .autoBuyMin {\n      width: 100% !important;\n    }\n    .autoBuyMin .ut-toggle-cell-view {\n      justify-content: flex-start;\n    }\n    .player-select {\n     position: absolute;\n      z-index: 20;\n    }\n    div.player-select {\n      width:75px;\n      height:75px;\n     }\n     .boughtFor.futbinprice{\n      margin-right: 15px;\n     }\n     .phone .priceholder{\n       display: flex !important;\n       flex-direction: column-reverse;\n    }\n    .phone .ut-section-header-view.relistsection {\n      flex-direction: row;\n      flex-wrap: wrap;\n    }\n    .relistwrapper{\n      display: flex;\n    }\n    .phone .relistwrapper{\n      width: 100%;\n      justify-content: flex-end;\n      margin-top: 8px;\n    }\n    .btnAverage {\n      height: unset !important;\n      align-items: flex-start !important;\n      line-height: unset !important;\n    }\n    .follow {\n      background: #000000;\n      text-transform: uppercase;\n      letter-spacing: 3px;\n      padding: 4px;\n      width: 190px;\n      position: fixed;\n      right: -160px;\n      z-index: 1000;\n      font: normal normal 10px Arial;\n      -webkit-transition: all .25s ease;\n      -moz-transition: all .25s ease;\n      -ms-transition: all .25s ease;\n      -o-transition: all .25s ease;\n      transition: all .25s ease;\n    }   \n    .follow:hover {\n      right: 0;\n    }\n    .playerOverview .preferredPosition{\n      font-size:9px;\n      border-radius:50%;\n      margin-bottom:5px;\n      background: cornflowerblue;\n    }\n    .btn-sign{\n      background: linear-gradient(90deg,rgba(163,168,240,.6),rgba(105,111,221,.6)); \n      font-size: 12px;\n      height: 45px;\n      letter-spacing: 2px;\n      text-transform: uppercase; \n      border: none;\n      border-radius: 10px;\n      cursor: pointer;\n    }    \n    .follow a {\n      color: #fff !important;\n      text-decoration: none;\n      text-align: center;\n      line-height: 43px!important;\n      vertical-align: top!important;\n    }\n    .sb-setting{\n      margin-top: 15px;\n    }\n    .sb-setting button{\n      margin: 0px;\n    }\n    input[type="text"],\n    input[type="number"] {\n      padding: 0 0.5em;\n      border-radius: 0;\n      background-color: #262c38;\n      border: 1px solid #556c95;\n      box-sizing: border-box;\n      color: #f8eede;\n      font-family: UltimateTeam,sans-serif;\n      font-size: 1em;\n      height: 2.8em;\n      opacity: 1;\n      width: 100%;\n    }\n    input[type="text"],\n    input[type=number] {\n      -moz-appearance: textfield;\n    }\n    ',document.head.appendChild(e)})(),e.Lo&&(0,De.E)()):setTimeout(Re,1e3)};Re()})()})(),(()=>{var e={665:()=>{const e=window.fetch;window.fetch=function(t,n){return!t||!/discordapp/.test(t)&&!/exp.host/.test(t)||"POST"!==n.method&&"DELETE"!==n.method?e.call(this,t,n):new Promise(((e,r)=>{const i=Object.assign({},n.headers,{"User-Agent":"From Node"});GM_xmlhttpRequest({method:n.method,headers:i,url:t,data:n.body,onload:t=>{200===t.status||204===t.status?(t.text=()=>new Promise((e=>e(t.responseText))),t.headers=t.responseHeaders.split("\r\n").reduce((function(e,t){var n=t.split(": ");return e.set(n[0],n[1]),e}),new Map),e(t)):r(t)}})}))}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{idAbActiveTransfers:()=>De,idAbAddBuyDelay:()=>X,idAbAddFilterBC:()=>kt,idAbAddFilterGK:()=>te,idAbAvailableItems:()=>ke,idAbBidExact:()=>R,idAbBidFutBin:()=>dt,idAbBuyPrice:()=>D,idAbCardCount:()=>N,idAbCloseTabToggle:()=>ne,idAbCoins:()=>Ie,idAbCountDown:()=>vt,idAbCustomDiscordNameNotificationToggle:()=>ie,idAbCycleAmount:()=>q,idAbDelayToAdd:()=>ee,idAbDontMoveWon:()=>ft,idAbDownloadFilter:()=>Je,idAbDownloadStats:()=>gt,idAbFiltersFileToUpload:()=>it,idAbFiltersToUpload:()=>Ye,idAbIgnoreAllowToggle:()=>at,idAbItemExpiring:()=>j,idAbMaxBid:()=>L,idAbMaxPurchases:()=>Tt,idAbMaxRating:()=>H,idAbMaxSearchPage:()=>Q,idAbMessageNotificationToggle:()=>re,idAbMinDeleteCount:()=>B,idAbMinRating:()=>G,idAbNumberFilterSearch:()=>Ne,idAbOverSearchWarning:()=>It,idAbPauseFor:()=>K,idAbProfit:()=>Ze,idAbQuickSell:()=>Pt,idAbRandMinBidInput:()=>W,idAbRandMinBidToggle:()=>Z,idAbRandMinBuyInput:()=>J,idAbRandMinBuyToggle:()=>Y,idAbReportProblem:()=>ht,idAbRequestCount:()=>Oe,idAbResumeAfterErrorOccured:()=>pt,idAbSearchProgress:()=>Ce,idAbSearchResult:()=>M,idAbSellPrice:()=>U,idAbSellToggle:()=>F,idAbSendListingNotificationToggle:()=>oe,idAbShouldSort:()=>bt,idAbSoldItems:()=>xe,idAbSolveCaptcha:()=>Se,idAbSortBy:()=>mt,idAbSortOrder:()=>yt,idAbSoundToggle:()=>se,idAbStatisticsProgress:()=>Ae,idAbStatus:()=>Te,idAbStopAfter:()=>V,idAbStopErrorCode:()=>Le,idAbStopErrorCodeCount:()=>Me,idAbToggleRunner:()=>lt,idAbUnsoldItems:()=>Pe,idAbUploadBtn:()=>ot,idAbUploadFilter:()=>We,idAbUseFutWiz:()=>xt,idAbWaitTime:()=>z,idAddIgnorePlayers:()=>et,idAddIgnorePlayersList:()=>nt,idAntiCaptchKey:()=>qe,idAutoClearExpired:()=>st,idAutoClearLog:()=>Ke,idBtnActions:()=>wt,idBtnReport:()=>_t,idBuyFutBinPercent:()=>ct,idBuyFutBinPrice:()=>ut,idCalcBinPrice:()=>ye,idCapatchaMp3:()=>Ue,idClearLogButton:()=>me,idDeleteFilter:()=>_e,idDiscordChannelId:()=>de,idDiscordToken:()=>le,idFUTMarketAlertToken:()=>fe,idFilterDropdown:()=>x,idFilterDropdownHeader:()=>P,idFinishMp3:()=>At,idFutBinDuration:()=>rt,idInfoWrapper:()=>ve,idLog:()=>Ot,idNotificationType:()=>ce,idPreserveChanges:()=>ge,idProgressAutobuyer:()=>pe,idProxyAddress:()=>Be,idProxyLogin:()=>ze,idProxyPassword:()=>$e,idProxyPort:()=>Fe,idRemoveIgnorePlayers:()=>tt,idRunFilterSequential:()=>Xe,idSearchCancelButton:()=>he,idSearchWrapper:()=>je,idSelectFilterCount:()=>we,idSelectedFilter:()=>k,idSellAfterTax:()=>Ee,idSellCheckBuyPrice:()=>Qe,idSellFutBinPercent:()=>He,idSellFutBinPrice:()=>Ge,idSellRatingThreshold:()=>Ve,idSession:()=>Et,idTelegramBotToken:()=>ae,idTelegramChatId:()=>ue,idTestNotification:()=>be,idTooltip:()=>St,idWebHookUrl:()=>Ct,idWinMp3:()=>Re});var t={};n.r(t),n.d(t,{startAutoBuyer:()=>Or,stopAutoBuyer:()=>Ir});const r={521:"请求被拒绝",512:"请求被拒绝",429:"当前用户请求过多",426:"其他用户中标(卡/出价)",461:"其他用户中标(卡/出价)"},i={idBuyFutBinPercent:95,idAbCardCount:1e3,idAbCardCountisDefaultValue:!0,idAbItemExpiring:"1H",idAbItemExpiringisDefaultValue:!0,idAbSearchResult:21,idAbSearchResultisDefaultValue:!0,idSellFutBinPercent:"105-110",idFutBinDuration:"1H",idFutBinDurationisDefaultValue:!0,idAbMinDeleteCount:10,idSellRatingThreshold:100,idSellRatingThresholdisDefaultValue:!0,idAbMinRating:10,idAbMinRatingisDefaultValue:!0,idAbMaxRating:100,idAbMaxRatingisDefaultValue:!0,idAbMaxSearchPage:5,idAbMaxSearchPageisDefaultValue:!0,idAbRandMinBidInput:1e3,idAbRandMinBidInputisDefaultValue:!0,idAbRandMinBuyInput:1e3,idAbRandMinBuyInputisDefaultValue:!0,idBuyFutBinPrice:!0,idSellFutBinPrice:!0,idSellCheckBuyPrice:!0,idAbSellToggle:!1,idAbRandMinBidToggle:!0},o={idAbAddBuyDelay:!0,idAbCycleAmount:"15-20",idAbDelayToAdd:"3S",idAbMaxPurchases:1,idAbNumberFilterSearch:3,idAbNumberFilterSearchisDefaultValue:!0,idAbPauseFor:"15-30S",idAbSoundToggle:!0,idAbStopAfter:"1-2H",idAbStopErrorCodeCount:3,idAbWaitTime:"5-8",idAbWaitTimeisDefaultValue:!1,idAutoClearExpired:!0,idAutoClearLog:!0},s=!!window.ReactNativeWebView;let a;const u=(e="Filters")=>((e="Filters")=>new Promise(((t,n)=>{const r=a.transaction(e,"readonly").objectStore(e).getAll();r.onsuccess=function(){const e={};if(r.result.length)for(let t=0;t<r.result.length;t++)e[r.result[t].filterName]=r.result[t].jsonData;t(e)},r.onerror=function(){n()}})))(e),c=(e,t,n="Filters")=>((e,t,n="Filters")=>new Promise(((r,i)=>{const o=a.transaction(n,"readwrite");o.objectStore(n).put({filterName:e,jsonData:t}),o.oncomplete=function(){r()},o.onerror=function(){i()}})))(e,t,n),l=new Map,d=(e,t)=>{l.set(e,t)},f=e=>{const t=l.get(e);return t&&t.expiryTimeStamp&&t.expiryTimeStamp<Date.now()?(l.delete(e),null):t},p=(e=!1)=>{const t=f("BuyerSettings")||{};if(e)return t;const n=f("CommonSettings")||{};return Object.assign({},t,n)},h=e=>{let t=f(e)||0;return t++,d(e,t),t},v=()=>((f("CommonSettings")||{}).idAbUseFutWiz?"futwiz":"futbin").toUpperCase(),g=()=>{let e=window.XMLHttpRequest.prototype.open;window.XMLHttpRequest.prototype.open=function(t,n,r){this.addEventListener("readystatechange",(function(){if(4===this.readyState)if(s&&this.responseURL.includes("/ut/game/fifa23/usermassinfo")){let e=JSON.parse(this.responseText);if(e){const{personaId:t,personaName:n}=e.userInfo,r=f("useremail");window.ReactNativeWebView.postMessage(JSON.stringify({payload:{personaId:t,personaName:n,userEmail:r,language:services.Localization.locale.language},type:"initUser"}))}}else if(s&&this.responseURL.includes("/ut/game/fifa23/tradepile")){let e=JSON.parse(this.responseText);if(e){const t=e.auctionInfo.filter((e=>e.itemData.assetId)).map((({itemData:e})=>{const{id:t,assetId:n,definitionId:r,rareflag:i,rating:o}=e;return{id:t,assetId:n,definitionId:r,rareflag:i,rating:o}}));window.ReactNativeWebView.postMessage(JSON.stringify({payload:t,type:"transferList"}))}}else if(this.responseURL.includes("https://gateway.ea.com/proxy/identity/pids/me")){let e=JSON.parse(this.responseText);e&&e.pid&&!f("useremail")&&d("useremail",e.pid.email)}}),!1),e.call(this,t,n,r)}},m=e=>{let t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=n.length;for(var i=0;i<e;i++)t+=n.charAt(Math.floor(Math.random()*r));return t},y=async(e=1)=>{const t=Math.floor(Math.random());await new Promise((n=>setTimeout(n,1e3*(t+e))))},b=e=>{if(e){let t=(e+="")[e.length-1].toUpperCase(),n=_(e.substring(0,e.length-1))/1e3,r="M"===t?60:"H"===t?3600:1;return n&&(n*=r),n}return 0},w=e=>{const t=C(e);return t.length>=2?E(t[0],t[1]):t[0]||0},_=e=>{if(e){const[t,n]=e.split("-").map((e=>parseInt(e)));return 1e3*Math.round(Math.random()*(n-t)+t)}return 0},S=e=>{if(e){let t=e[e.length-1].toUpperCase(),n=parseInt(e.substring(0,e.length-1)),r="M"===t?60:"H"===t?3600:1;return n&&(n*=r),n}return 0},E=(e,t)=>Math.round(Math.random()*(t-e)+e),C=e=>e?(e+"").split("-").map((e=>parseInt(e))):[],A=(e,t)=>(e.length<=t&&(e+=" ".repeat(t-e.length)),e),O=function(e){const t=p();if(!s&&t.idAbSoundToggle){let t=document.getElementById(Re);"capatcha"==e?t=document.getElementById(Ue):"finish"==e?t=document.getElementById(At):"cardWon"==e&&(t=document.getElementById(Re)),t.currentTime=0,t.play()}},I=function(e){if(!e)return 0;var t=(new Date).getTime();return Math.max(0,e.end-t)/(e.end-e.start)*100},T=function(t){for(let n of Object.keys(t)){const r=t[n];if(t[n+"isDefaultValue"])continue;const i=`#${e[n]}`;if("boolean"==typeof r){if(r){$(i).addClass("toggled");continue}$(i).removeClass("toggled")}else $(i).val(r)}},x="elem_"+m(15),P="elem_"+m(15),k="elem_"+m(15),D="elem_"+m(15),N="elem_"+m(15),L="elem_"+m(15),M="elem_"+m(15),j="elem_"+m(15),R="elem_"+m(15),U="elem_"+m(15),B="elem_"+m(15),F="elem_"+m(15),z="elem_"+m(15),q="elem_"+m(15),K="elem_"+m(15),V="elem_"+m(15),G="elem_"+m(15),H="elem_"+m(15),W="elem_"+m(15),J="elem_"+m(15),Y="elem_"+m(15),Z="elem_"+m(15),Q="elem_"+m(15),X="elem_"+m(15),ee="elem_"+m(15),te="elem_"+m(15),ne="elem_"+m(15),re="elem_"+m(15),ie="elem_"+m(15),oe="elem_"+m(15),se="elem_"+m(15),ae="elem_"+m(15),ue="elem_"+m(15),ce="elem_"+m(15),le="elem_"+m(15),de="elem_"+m(15),fe="elem_"+m(15),pe="elem_"+m(15),he="elem_"+m(15),ve="elem_"+m(15),ge="elem_"+m(15),me="elem_"+m(15),ye="elem_"+m(15),be="elem_"+m(15),we="elem_"+m(15),_e="elem_"+m(15),Se="elem_"+m(15),Ee="elem_"+m(15),Ce="elem_"+m(15),Ae="elem_"+m(15),Oe="elem_"+m(15),Ie="elem_"+m(15),Te="elem_"+m(15),xe="elem_"+m(15),Pe="elem_"+m(15),ke="elem_"+m(15),De="elem_"+m(15),Ne="elem_"+m(15),Le="elem_"+m(15),Me="elem_"+m(15),je="elem_"+m(15),Re="elem_"+m(15),Ue="elem_"+m(15),Be="elem_"+m(15),Fe="elem_"+m(15),ze="elem_"+m(15),qe="elem_"+m(15),$e="elem_"+m(15),Ke="elem_"+m(15),Ve="elem_"+m(15),Ge="elem_"+m(15),He="elem_"+m(15),We="elem_"+m(15),Je="elem_"+m(15),Ye="elem_"+m(15),Ze="elem_"+m(15),Qe="elem_"+m(15),Xe="elem_"+m(15),et="elem_"+m(15),tt="elem_"+m(15),nt="elem_"+m(15),rt="elem_"+m(15),it="elem_"+m(15),ot="elem_"+m(15),st="elem_"+m(15),at="elem_"+m(15),ut="elem_"+m(15),ct="elem_"+m(15),lt="elem_"+m(15),dt="elem_"+m(15),ft="elem_"+m(15),pt="elem_"+m(15),ht="elem_"+m(15),vt="elem_"+m(15),gt="elem_"+m(15),mt="elem_"+m(15),yt="elem_"+m(15),bt="elem_"+m(15),wt="elem_"+m(15),_t="elem_"+m(15),St="elem_"+m(15),Et=m(15),Ct="elem_"+m(15),At="elem_"+m(15),Ot="elem_"+m(15),It="elem_"+m(15),Tt="elem_"+m(15),xt="elem_"+m(15),Pt="elem_"+m(15),kt="elem_"+m(15);d("sessionStats",{soldItems:"-",unsoldItems:"-",activeTransfers:"-",availableItems:"-",coins:"-",coinsNumber:0,previousPause:0,searchCount:0,profit:0,transactions:[],searchPerMinuteCount:0});const Dt=()=>{const e=f("botStartTime");if(e&&f("autoBuyerActive")){const t=Math.abs(new Date-e)/1e3,n=Math.floor(t/60/60%24),r=Math.floor(t/60%60),i=Math.floor(t%60),o=(n<10?"0":"")+n+":"+(r<10?"0":"")+r+":"+(i<10?"0":"")+i;$("#"+vt).html(o),Nt("runningTime",o)}},Nt=(e,t)=>{const n=f("sessionStats");n[e]=t,d("sessionStats",n)},Lt=e=>f("sessionStats")[e]||0,Mt=function(e,t,n){const r=new UTStandardButtonControl;if(r.init(),r.addTarget(r,t,EventType.TAP),r.setText(e),n){const e=n.split(" ");for(let t of e)r.getRootElement().classList.add(t)}return r},jt=()=>{const e=$("#"+pe);let t=`自动秒卡 准备就绪 ${"["+(new Date).toLocaleTimeString()+"] "}\n`;e.val(t)};let Rt=new Set;const Ut=(e,t,n,r,i=!1)=>{const o=f(t)||{};"number"===r&&(n=parseInt(n)),o[e]=n||null,o[e+"isDefaultValue"]=i,d(t,o)},Bt=(e,t,n,r,i,o="number",s=".*",a="buyer-settings-field",u=null)=>{const c=Object.keys(n)[0];return t&&(u&&u(t),Ut(c,i,t,o,!0)),Rt.has(c)||($(document).on("input",`#${n[c]}`,(({target:{value:e}})=>{u&&u(e),Ut(c,i,e||t,o,!e)})),Rt.add(c)),`<div class="price-filter ${a}">\n       <div class="info">\n           <span class="secondary label">${e} :<br/><small>${r}</small></span>\n       </div>\n       <div class="buttonInfo">\n           <div class="inputBox">\n               <input pattern="${s}" type="${o}" class="numericInput" id='${n[c]}' placeholder=${t}>\n           </div>\n       </div>\n    </div>`};let Ft=new Set;const zt=(e,t,n,r,i="buyer-settings-field",o=null)=>{const s=Object.keys(t)[0];return Ft.has(s)||($(document).on("click touchend",`#${t[s]}`,(e=>{!o&&((e,t,n)=>{const r=f(t)||{};r[e]?(r[e]=!1,$(n.currentTarget).removeClass("toggled")):(r[e]=!0,$(n.currentTarget).addClass("toggled")),d(t,r)})(s,r,e),o&&o(e)})),Ft.add(s)),`\n    <div class="price-filter  ${i}">\n        <div class="ut-toggle-cell-view">\n           <span class="ut-toggle-cell-view--label">${e} <br/><small>${n}</small></span>\n             <div id='${t[s]}' class="ut-toggle-control">\n               <div class="ut-toggle-control--track">\n              </div>\n              <div class= "ut-toggle-control--grip" >\n          </div> \n           </div> \n       </div>\n    </div> `},qt=function(){v();return`<div class='buyer-settings-wrapper buy-settings-view'>\n      ${Bt('购买价格<font color="red">（必须填写）</font>',"",{idAbBuyPrice:D},"<br/>","BuyerSettings")}\n     </div>\n    `};$(document).on("keyup","#"+U,(function({target:{value:e}}){$t(e)}));const $t=e=>{const t=parseInt(e);if(isNaN(t))return void $("#"+Ee).html(0);const n=(e-e/100*5).toLocaleString();$("#"+Ee).html(n)},Kt=function(){v();return""},Vt=function(){return""},Gt=function(){return""};let Ht=new Set;const Wt=(e,t,n,r)=>(Ht.has(e)||(Jt(e,n),Ht.add(e)),`<button class="btn-standard ${r}" id="${e}">${t}</button>`),Jt=(e,t)=>{$(document).on({mouseenter:function(){$(this).addClass("hover")},mouseleave:function(){$(this).removeClass("hover")},click:function(){t()},touchenter:function(){$(this).addClass("hover")},touchleave:function(){$(this).removeClass("hover")},touchend:function(){t()}},`#${e}`)},Yt=function(){return`<div style='display : none' class='buyer-settings-wrapper notification-settings-view'> \n ${s?"":`${Bt("Discord Bot 令牌","",{idDiscordToken:le},"你的 Discord Bot 令牌","CommonSettings","text")}\n  ${Bt("Discord 频道 ID","",{idDiscordChannelId:de},"你的 Discord 频道 ID","CommonSettings","text")}\n  ${Bt("Discord WebHook 网址","",{idWebHookUrl:Ct},"你的 Discord 频道 Webhook 网址","CommonSettings","text")}\n  ${Bt("Fut 市场警报通知令牌","",{idFUTMarketAlertToken:fe},"你的 FUT 市场警报程序令牌","CommonSettings","text")}\n  ${zt("发送清单通知",{idAbSendListingNotificationToggle:oe},"","CommonSettings")}`}\n  ${Bt("通知类型","",{idNotificationType:ce},"A表示所有通知，B表示购买通知，L表示丢失通知","CommonSettings","text")}\n  ${zt("发送通知",{idAbMessageNotificationToggle:re},"","CommonSettings")}\n   ${s?"":`${zt("声音通知",{idAbSoundToggle:se},"","CommonSettings")}\n  <audio id='${Re}' hidden>\n    <source src="https://notificationsounds.com/storage/sounds/file-sounds-869-coins.ogg" type="audio/ogg">\n    <source src="https://notificationsounds.com/storage/sounds/file-sounds-869-coins.mp3" type="audio/mpeg">\n      "Your browser does not support the audio element"\n  </audio>\n  <audio id='${Ue}' hidden>\n    <source src="https://notificationsounds.com/storage/sounds/file-sounds-897-alarm-frenzy.ogg" type="audio/ogg">\n    <source src="https://notificationsounds.com/storage/sounds/file-sounds-897-alarm-frenzy.mp3" type="audio/mpeg">\n      "Your browser does not support the audio element"\n  </audio>\n  <audio id='${At}' hidden>\n    <source src="https://freesound.org/data/previews/220/220763_4104696-lq.ogg" type="audio/ogg">\n    <source src="https://freesound.org/data/previews/220/220763_4104696-lq.mp3" type="audio/mpeg">\n      "Your browser does not support the audio element"\n  </audio> `}\n     ${zt("使用自定义 Discord Webhook 名称",{idAbCustomDiscordNameNotificationToggle:ie},"","CommonSettings")}\n   <div class="btn-test-notification buyer-settings-field">\n   ${Wt(be,"测试通知",(()=>In("Test Notification Message",!0,void 0,!0)),"call-to-action")}\n   </div>\n  `},Zt=function(){return`<div style='display : none' class='buyer-settings-wrapper common-settings-view'>\n  ${Bt("用于停止程序的错误码 (csv)","",{idAbStopErrorCode:Le},"(例如: 412,421,521)","CommonSettings","text","^\\d+(,\\d+)*$")}\n  ${Bt("错误码将出现的次数",3,{idAbStopErrorCodeCount:Me},"<br />","CommonSettings")}\n  ${Bt("在以下之后恢复程序","",{idAbResumeAfterErrorOccured:pt},"(S 表示秒, M 表示分钟, H 表示小时 例如: 0-0S)","CommonSettings","text","\\d+-\\d+[H|M|S|h|m|s]$")}\n  ${zt("自动清除日志",{idAutoClearLog:Ke},"(每2分钟自动清除日志)","CommonSettings")}\n  ${zt("自动清除过期项目",{idAutoClearExpired:st},"(自动清除转移目标中的过期项目)","CommonSettings")}\n  ${zt("使用 Futwiz 价格",{idAbUseFutWiz:xt},"(使用 Futwiz 价格 购买/出售 卡片)","CommonSettings")}\n  </div>`},Qt=function(e,t){let n=!1;return $(`${e} option`).each((function(){if(this.value===t)return n=!0,!1})),n||$(e).append($("<option></option>").attr("value",t).text(t)),n},Xt=function(){const e=$(`#${k}`).val()||[];e.length?d("selectedFilters",e):d("selectedFilters",[])};let en;$(document).on({change:()=>{const e=$(`#${mt}`).val()||"buy",t=f("BuyerSettings")||{};t.idAbSortBy=e,d("BuyerSettings",t)}},`#${mt}`);const tn=function(){const e=$(`<div style='display : none' class='buyer-settings-wrapper results-filter-view'>\n    <div class="place-holder">\n    </div>\n    ${Bt("随机最小出价的最大值",1e3,{idAbRandMinBidInput:W},"","BuyerSettings")}\n    ${zt("确认使用",{idAbRandMinBidToggle:Z},"","BuyerSettings")}\n    ${Bt("随机最小购买的最大值",1e3,{idAbRandMinBuyInput:J},"","BuyerSettings")}\n    ${zt("确认使用",{idAbRandMinBuyToggle:Y},"","BuyerSettings")}\n    </div>`),t=e.find(".place-holder");return function(){en=new UTPlayerSearchControl;const e=`#${nt}`,t=$(`\n            <div style="display: none;" class="price-filter buyer-settings-field">\n              <div class="info">\n               <span class="secondary label">\n                  <button id=${St} style="font-size:16px" class="flat camel-case">Players List</button><br/>\n                </span>\n              </div>\n              <div class="ignore-players displayCenterFlx">\n                ${Wt(et,"+",(()=>{const t=`${en._playerNameInput.value}(${en.selected.rating})`,n=Qt(e,t);if($(`${e} option[value="${t}"]`).attr("selected",!0),!n){const e=f("BuyerSettings")||{},n=e.idAddIgnorePlayersList||[];n.push({id:en.selected.id,displayName:t}),e.idAddIgnorePlayersList=n,d("BuyerSettings",e)}}),"btn-standard filterSync action-icons")}                \n                </div>\n              </div>\n              <div style="display: none;" class="price-filter buyer-settings-field">\n                <div class="info">\n                <span class="secondary label">\n                  <button id=${St} style="font-size:16px" class="flat camel-case">Remove from Players List</button><br/>\n                </span>\n                </div>\n                <div class="displayCenterFlx">\n                  <select style="width:90%;height: 3rem;font-size: 1.5rem;" class="filter-header-settings" id=${nt}>\n                    <option selected="true" disabled>Players List</option>                            \n                  </select>\n                  ${Wt(tt,"❌",(()=>{const t=$(`${e} option`).filter(":selected").val();if("Ignored Players List"!=t){$(`${e} option[value="${t}"]`).remove(),$(`${e}`).prop("selectedIndex",0);const n=f("BuyerSettings")||{};let r=n.idAddIgnorePlayersList||[];r=r.filter((({displayName:e})=>e!=t)),n.idAddIgnorePlayersList=r,d("BuyerSettings",n)}}),"btn-standard filterSync font15 action-icons")}\n                </div>\n              </div>              \n              `);return $(en.__root).insertBefore(t.find(`#${et}`)),en.init(),en._playerNameInput.setPlaceholder("Search Players"),t}().insertAfter(t),e};$(document).on({touchend:function(){$(`#${it}`).trigger("click")}},`#${it}`);$(document).on({change:Xt,click:Xt,touchend:Xt},`#${k}`);const nn=async function(){return f("runSequentially")&&(d("runSequentially",!1),setTimeout((()=>{$(`#${Xe}`).click()}))),""},rn=async function(e){const t=this,n=e?"transfer":"";$(document).off("change",`#${x}${n}`),$(document).on({change:function(){const r=$(`#${x}${n} option`).filter(":selected").val();Sn.call(t,r,e)}},`#${x}${n}`);const r=$(`<div style="width:100%;display: flex;flex-direction: column;">\n            ${isPhone()&&!e?zt("Runner Mode",{idAbToggleRunner:lt},"","MisSettings","runner",(e=>{const t=((e,t)=>{let n=f(t);return n?(n=!1,$(e.currentTarget).removeClass("toggled")):(n=!0,$(e.currentTarget).addClass("toggled")),d(t,n),n})(e,"runnerToggle");$(".auto-buyer").toggleClass("displayNone"),t?$(".filter-place").append($(`#${k}`)):$(".teleporter").append($(`#${k}`))})):""}\n            ${e?"":`<div id=${_t} class="btn-report"></div>`}         \n            <div class="price-filter buyer-settings-field multiple-filter filter-place">\n            </div> \n            <div class="button-container btn-filters">\n                 <select class="filter-header-settings" id='${x}${n}'>\n                    <option selected="true" disabled>选择筛选器加载</option>\n                    ${e?"":'<option value="_default">_DEFAULT</option>'}  \n                    ${Object.keys(await(async()=>{f("filters")||d("filters",await u()||{});let e=f("filters");return e=Object.keys(e).sort().reduce(((t,n)=>(t[n]=e[n],t)),{}),e})()).map((e=>`<option value="${e}">${e}</option>`))}                    \n                 </select>                 \n             </div> \n               ${e?"":`<div id=${wt} style="margin-top: 1%;" class="button-container btn-filters"></div>`}\n             </div>`);return!e&&on.call(this,r,t),r},on=function(e,t){const n=e.find(`#${wt}`);e.find(`#${_t}`);n.append(Mt("删除筛选器",(()=>En.call(t)),"call-to-action btn-delete-filter").__root),n.append(Mt("保存筛选器",(function(){wn.call(this,t)}),"call-to-action btn-save-filter").__root)},sn=new Map;let an,un;sn.set(0,{label:"购买设置",selector:".buy-settings-view"});const cn=function(){return un=new EAFilterBarView,sn.forEach(((e,t)=>{un.addTab(t,e.label)})),un.setActiveTab(0),un.layoutSubviews(),un.addTarget(this,hn,EventType.TAP),un.__root.style="margin-top: 20px;",an=$(un.__root),an.find(".menu-container").css("overflow-x","auto"),fn(!0),un},ln=async function(){pn(),gn(),await fn();const e=f("AutoBuyerInstance");UTMarketSearchFiltersViewController.prototype._eResetSelected.call(e)},dn=async e=>{let t=await u("CommonSettings");if(t=JSON.parse(t.CommonSettings||"{}"),!$.isEmptyObject(t)){const n=e?f("CommonSettings"):{};d("CommonSettings",Object.assign({},n,t))}},fn=async function(e){un.setActiveTab(0),an.append(qt.call(this)),an.append(Kt.call(this)),an.append(tn.call(this)),an.append(Vt.call(this));const t=await nn.call(this);an.append(t),an.append(Gt.call(this)),an.append(Yt.call(this)),an.append(Zt.call(this)),$(".menu-container").animate({scrollLeft:0}),setTimeout((async()=>{const t=f("selectedFilters")||[],{idAbSortBy:n}=f("BuyerSettings")||{};n&&$(`${mt} option[value='${n}']`).prop("selected","selected"),$.each(t,(function(e,t){$(".multiselect-filter option[value='"+t+"']").prop("selected","selected")})),e&&await dn()}))},pn=()=>{sn.forEach(((e,t)=>{$(e.selector).remove()})),en.destroy(),en=null},hn=function(e,t,n){vn();const r=sn.get(n.index).selector;$(r).css("display","")},vn=()=>{sn.forEach(((e,t)=>{$(e.selector).css("display","none")}))},gn=()=>{d("currentFilter",null),d("BuyerSettings",{}),d("currentFilter",{})},mn=()=>{document.querySelectorAll(":invalid").length&&An("发现具有无效值的设置，请修复这些值，以便按预期工作",UINotificationType.NEGATIVE)},yn=`#${x}`,bn=`#${k}`,wn=function(e){const t=this;$(t).addClass("active");let n=p(!0),r=f("CommonSettings");setTimeout((function(){let i={};const o=e._viewmodel;i.searchCriteria={criteria:o.searchCriteria,playerData:o.playerData,buyerSettings:n};let s=$(`${yn} option`).filter(":selected").val();"选择筛选器加载"===s&&(s=void 0);let a=prompt("输入此筛选器的名称",s);if(mn(),a){if("_DEFAULT"===a.toLocaleUpperCase())return An("不能覆盖 _DEFAULT 筛选器",UINotificationType.NEGATIVE);_n(a,i),c("CommonSettings",JSON.stringify(r),"CommonSettings"),d("currentFilter",a),$(t).removeClass("active"),An("更改保存成功")}else $(t).removeClass("active"),An("需要筛选器名称",UINotificationType.NEGATIVE)}),200)},_n=(e,t)=>{e=e.toUpperCase(),Qt(yn,e),Qt(`#${k}`,e),$(`${yn} option[value="${e}"]`).attr("selected",!0),f("filters")[e]=JSON.stringify(t),c(e,f("filters")[e])},Sn=async function(e,t){if("_default"===e)return(()=>{d("BuyerSettings",Object.assign({},i)),d("CommonSettings",Object.assign({},o));const e=p();T(e)})(),!1;f("runnerToggle")||t||await ln();const n=f("filters")[e];if(!n)return!1;let{searchCriteria:{criteria:r,playerData:s,buyerSettings:a}}=JSON.parse(n);if(this._viewmodel.resetSearch(),this.viewDidAppear(),this._viewmodel.playerData={},Object.assign(this._viewmodel.searchCriteria,r),Object.assign(this._viewmodel.playerData,s),$.isEmptyObject(this._viewmodel.playerData)&&(this._viewmodel.playerData=null),this.viewDidAppear(),t)return;await dn();const u=f("CommonSettings")||{};if(d("BuyerSettings",a),d("currentFilter",e),a=Object.assign({},a,u),T(a),a.idAddIgnorePlayersList&&a.idAddIgnorePlayersList.length)for(let{displayName:e}of a.idAddIgnorePlayersList)Qt(`#${nt}`,e);return mn(),!0},En=async function(){const e=$(`${yn} option`).filter(":selected").val();if("_DEFAULT"===e.toLocaleUpperCase())return An("不能删除 _DEFAULT 筛选器",UINotificationType.NEGATIVE);"选择筛选器加载"!=e&&($(`${yn} option[value="${e}"]`).remove(),$(`${yn}`).prop("selectedIndex",0),await ln(),this.viewDidAppear(),delete f("filters")[e],$(`${bn} option[value="${e}"]`).remove(),Xt(),(e=>{(e=>{new Promise(((t,n)=>{const r=a.transaction("Filters","readwrite");r.objectStore("Filters").delete(e),r.oncomplete=function(){t()},r.onerror=function(){n()}}))})(e)})(e),An("更改保存成功"))};let Cn=null;const An=function(e,t){t=t||UINotificationType.POSITIVE,services.Notification.queue([e,t])},On=e=>{services.PIN.sendData(PINEventType.PAGE_VIEW,{type:PIN_PAGEVIEW_EVT_TYPE,pgid:e})},In=(e,t,n,r)=>{const i=p();(i.idAbMessageNotificationToggle||r)&&(s?Tn(e):kn(i,t,e,n),r&&An("测试通知发送"))},Tn=e=>{window.ReactNativeWebView.postMessage(JSON.stringify({type:"Notification",message:e}))},xn=(e,t,n,r)=>{let i={embeds:[{description:e,color:r||(t?2555648:16711680),footer:{text:`Auto Buyer Alert - ${(new Date).toLocaleTimeString()} - Balance: ${services.User.getUser().coins.amount}`,icon_url:"https://cdn.discordapp.com/icons/768336764447621122/9de9ea0a7c6239e2f2fbfbd716189e79.webp"}}],avatar_url:"https://cdn.discordapp.com/icons/768336764447621122/9de9ea0a7c6239e2f2fbfbd716189e79.webp",username:"Fut Market Alert"};return n&&delete i.username,i},Pn=e=>{const{embeds:[t]}=e;return(new Discord.RichEmbed).setColor(t.color).setDescription(t.description).setFooter(t.footer.text,t.footer.icon_url)},kn=(e,t,n,r)=>{const i=e.idTelegramBotToken,o=e.idTelegramChatId,s=e.idWebHookUrl,a=e.idDiscordChannelId,u=e.idFUTMarketAlertToken,c=e.idAbCustomDiscordNameNotificationToggle;Dn(i,o,n),Ln(a,t,n,c,r),Nn(s,t,n,c,r),jn(u,n)},Dn=(e,t,n)=>{if(e&&t){const r=`https://api.telegram.org/bot${e}/sendMessage?chat_id=${t}&parse_mode=Markdown&text=${n}`,i=new XMLHttpRequest;i.open("GET",r,!0),i.send()}},Nn=(e,t,n,r,i)=>{e&&fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(xn(n,t,r,i))})},Ln=(e,t,n,r,i)=>{if(e)if(Cn){const o=Cn.channels.get(e);o&&o.send(Pn(xn(n,t,r,i)))}else Cn=Mn((()=>{setTimeout((()=>{if(Cn){const o=Cn.channels.get(e);o&&o.send(Pn(xn(n,t,r,i)))}}),200)}))},Mn=e=>{const t=p(),n=new Discord.Client;let r=t.idDiscordToken;if(!r)return null;try{n.login(r),n.on("ready",(function(){e&&e()})),n.on("message",(async function(e){if(e.author.id!=n.user.id)if(/start/i.test(e.content)){const t=f("AutoBuyerInstance");Or.call(t),e.channel.send(Pn(xn("程序启动成功",!0)))}else if(/stop/i.test(e.content))Ir(),e.channel.send(Pn(xn("程序停止成功",!0)));else if(/runfilter/i.test(e.content)){let t=e.content.split("-")[1];if(t){t=t.toUpperCase(),Ir(),d("selectedFilters",[]);const n=f("AutoBuyerInstance");if(!await Sn.call(n,t))return void e.channel.send(Pn(xn(`unable to find filter${t}`,!1)));Or.call(n),e.channel.send(Pn(xn(`${t} started successfully`,!0)))}else e.channel.send(Pn(xn("Unable to find filter name",!1)))}}))}catch(e){}return n},jn=(e,t)=>{e&&fetch("https://exp.host/--/api/v2/push/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify([{to:`ExponentPushToken[${e}]`,title:t,body:t}])})},Rn=function(e){In("验证码，请解决这个问题以便程序再次运行.",!1),e?window.location.href="about:blank":Un("[!!!] 验证码被触发，程序自动停止",pe)},Un=function(e,t){setTimeout((()=>{var n=$("#"+t);e="["+(new Date).toLocaleTimeString()+"] "+e+"\n",n.val(n.val()+e),n[0]&&n.scrollTop(n[0].scrollHeight)}),50)},Bn=()=>{$("#"+pe).val(""),jt()};setInterval((()=>{const e=p();e&&e.idAutoClearLog&&Bn()}),12e4);const Fn=()=>f("userPlatform")||(services.User.getUser().getSelectedPersona().isPC?(d("userPlatform","pc"),"pc"):(d("userPlatform","ps"),"ps")),zn=()=>new Promise((e=>{services.User.requestCurrencies().observe(void 0,(function(t,n){e()}))}));let qn,$n;const Kn=function(e){if(!f("autoBuyerActive"))return;const t=1e3*b(e.idAbPauseFor);$n=$n||w(e.idAbCycleAmount);const{searchCount:n,previousPause:r}=f("sessionStats");return!n||(n-r)%$n?void 0:(Nt("previousPause",n),zn(),Ir(!0),setTimeout((()=>{$n=w(e.idAbCycleAmount),Or.call(this,!0)}),t))},Vn=async function(){const e=f("selectedFilters"),t=f("fiterSearchCount"),n=f("currentFilterCount");if(!e||!e.length||t>n)return h("currentFilterCount"),!1;d("currentFilterCount",1),d("currentPage",1);const r=f("currentFilterIndex")||0;let i=f("runSequentially")?r%e.length:E(0,e.length-1);d("currentFilterIndex",i+1);let o=e[i];return await Sn.call(this,o),Un(`运行筛选器 ${o}`,pe),!0},Gn=async e=>{s?Hn(e):Wn(e)},Hn=e=>{d(e.identifier,e.onload),delete e.onload,window.ReactNativeWebView.postMessage(JSON.stringify({type:"fetchFromExternalAB",payload:{options:e}}))},Wn=e=>{GM_xmlhttpRequest({method:e.method,url:e.url,onload:e.onload,headers:{"User-Agent":Et}})},Jn=(e,t,n)=>new Promise(((r,i)=>{Gn({method:t,identifier:n,url:e,onload:e=>200!==e.status?i():r(e.response)})})),Yn=async(e,t)=>{try{const n=await Zn(e),r=Fn();if(!n)return;const i=await Jn(`https://www.futwiz.com/en/app/sold23/${n[0].lineid}/console`,"GET",`${e.definitionId}_fetchFutWizPlayerPrices`),o=JSON.parse(i);let s=o.prices[r].bin;"ps"!==r||s||(s=o.prices.xb.bin);const a=parseInt(s.replace(/[,.]/g,"")),u=`${e.definitionId}_futwiz_price`,c={expiryTimeStamp:new Date(Date.now()+9e5),price:a};d(u,c),t.set(u,a)}catch(e){}},Zn=e=>new Promise(((t,n)=>{const r=TextUtils.stripSpecialCharacters("---"!==e._staticData.knownAs?e._staticData.knownAs:e._staticData.name);Gn({url:`https://www.futwiz.com/en/searches/player23/${r}`,method:"GET",identifier:`${e.definitionId}_getFutWizPlayerUrl`,onload:n=>{if(200!==n.status)return t();const r=JSON.parse(n.response);if(!r)return t();let i=r.filter((t=>parseInt(t.rating)===e.rating));r&&!i.length&&(i=r),i&&i.length>1&&(i=i.filter((t=>t.rare===e.rareflag.toString()&&t.club===e.teamId+""))),t(i)}})})),Qn=e=>{const t=services.Localization;return t?e.isManagerContract()?t.localize("card.title.managercontracts"):e.isPlayerContract()?t.localize("card.title.playercontracts"):e.isStyleModifier()?UTLocalizationUtil.playStyleIdToName(e.subtype,t):e.isPlayerPositionModifier()?t.localize("card.desc.training.pos."+e._staticData.trainPosFrom+"_"+e._staticData.trainPosTo).replace(" >> ","->"):e._staticData.name:""},Xn=new Set(["Position","Chemistry Style"]),er=async e=>{const t=new Map,n=new Set,r=new Map;for(const i of e){if(!i.definitionId)continue;const e=f(`${i.definitionId}_futbin_price`);e?t.set(`${i.definitionId}_futbin_price`,e.price):i.isPlayer()?n.add(i.definitionId):i.isTraining()&&Xn.has(i._staticData.name)&&(r.has(i._staticData.name)||r.set(i._staticData.name,[]),r.get(i._staticData.name).push({definitionId:i.definitionId,subType:Qn(i)}))}const i=[];return n.size&&i.push((async(e,t)=>{const n=Array.from(e),r=Fn();for(;n.length;){const i=n.splice(0,30),o=i.shift();if(!o)continue;const s=i.join(",");try{const e=await Jn(`https://www.futbin.com/23/playerPrices?player=${o}&rids=${s}`,"GET",`${Math.floor(+new Date)}_fetchPlayerPrices`),n=JSON.parse(e);for(const e of[o,...i]){const i=n[e].prices[r].LCPrice;if(!i)continue;const o=parseInt(i.replace(/[,.]/g,"")),s=`${e}_futbin_price`,a={expiryTimeStamp:new Date(Date.now()+9e5),price:o};d(s,a),t.set(s,o)}}catch(e){}}})(n,t)),r.size&&i.push((async(e,t)=>{const n=Fn(),r="ps"===n?"PS":"xbox"===n?"XB":"PC",i=Array.from(e.keys());for(const n of i)try{const i=n.split(" ")[0],o=await Jn(`https://www.futbin.org/futbin/api/fetchConsumables?category=${i}&platformtype=${r}`,"GET",`${Math.floor(+new Date)}_fetchConsumablesPrices`),s=JSON.parse(o).data.reduce(((e,t)=>(e.set(t.SubType.toUpperCase(),t.LCPrice),e)),new Map),a=e.get(n)||[];for(const{definitionId:e,subType:n}of a){let r=s.get(n);const i=`${e}_futbin_price`;if(r){const e={expiryTimeStamp:new Date(Date.now()+9e5),price:r};d(i,e),t.set(i,r)}}}catch(e){}})(r,t)),await Promise.all(i),t},tr=async e=>{const t=v();return"FUTWIZ"===t?(async e=>{const t=new Map,n=new Map;let r=[];for(const r of e){if(!r.definitionId)continue;const e=f(`${r.definitionId}_futwiz_price`);e?t.set(`${r.definitionId}_futwiz_price`,e.price):r.isPlayer()&&n.set(r.definitionId,r)}if(n.size)for(const e of n.values())r.push(Yn(e,t));return await Promise.all(r),t})(e):"FUTBIN"===t?er(e):void 0},nr=e=>{let t=JSUtils.find(UTCurrencyInputControl.PRICE_TIERS,(function(t){return e>=t.min}));var n=Math.round(e/t.inc)*t.inc;return Math.max(Math.min(n,14999e3),0)},rr=e=>e<=1e3?e-50:e>1e3&&e<=1e4?e-100:e>1e4&&e<=5e4?e-250:e>5e4&&e<=1e5?e-500:e-1e3,ir=e=>e<1e3?e+50:e>=1e3&&e<1e4?e+100:e>=1e4&&e<5e4?e+250:e>=5e4&&e<1e5?e+500:e+1e3,or=async(e,t,n)=>{let r;try{const i=n.definitionId,o=v();if("player"!==n.type)return r;await tr([n]);const s=f(`${i}_${o.toLowerCase()}_price`);if(s&&s.price){r=s.price;const i=w(e.idSellFutBinPercent)||100;let a=r*i/100;await sr(n),n.hasPriceLimits()&&(a=nr(Math.min(n._itemPriceLimits.maximum,Math.max(n._itemPriceLimits.minimum,a))),a===n._itemPriceLimits.minimum&&(a=ir(a))),a=nr(a),Un(`= ${o} price for ${t}: ${r}: ${i}% of sale price: ${a}`,pe),r=a}else r=null,Un(`= Unable to get ${o} price for ${t}`,pe)}catch(e){e=e.statusText||e.status||e,r=null,Un(`= Unable to get Futbin price for ${t}, err: ${e||"error occured"}`,pe)}return r},sr=async e=>new Promise((t=>{e.hasPriceLimits()?t():services.Item.requestMarketData(e).observe(void 0,(async function(e,n){t()}))})),ar=e=>{const t=f("sessionStats");t.profit+=e,d("sessionStats",t)},ur=e=>{const t=f("sessionStats");t.transactions=t.transactions||[],t.transactions.push(e),d("sessionStats",t)},cr=()=>{const{coinsNumber:e,searchCount:t,profit:n,runningTime:r,transactions:i}=f("sessionStats");let o="Available Coins,Search Count,Profit,Running Time,BIN Won Count,BID Won Count,Loss Count\n";o+=`${e||""},${t||""},${n||0},${r||""},${f("winCount")||0},${f("bidCount")||0},${f("lossCount")||0}\n\n`,o+="Transactions\n",o+=i.map((e=>`${e}\n`)).join(""),((e,t)=>{s?((e,t)=>{window.ReactNativeWebView.postMessage(JSON.stringify({type:"downloadFile",payload:{data:e,fileName:t}}))})(e,t):((e,t)=>{const n="data:text/csv;charset=utf-8,%EF%BB%BF"+encodeURIComponent(e),r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",`${t}.csv`),document.body.appendChild(r),r.click(),document.body.removeChild(r)})(e,t)})(o,"Stats")};setInterval((()=>{const e=f("sessionStats");e.searchPerMinuteCount=0,d("sessionStats",e)}),55e3);const lr=new Map,dr=(e,t,n,i,o,s)=>{const a=p();return new Promise((u=>{services.Item.bid(e,n).observe(void 0,(async function(c,l){let p=A(n.toString(),6);const v=a.idNotificationType||"";if(l.success){o&&(h("purchasedCardCount"),O("cardWon"));const r=a.idSellRatingThreshold;let u=parseInt(e.rating);const c=!r||u<=r,l=a.idSellFutBinPrice;c&&l&&o&&(i=await or(a,t,e)),a.idSellCheckBuyPrice&&n>95*i/100&&(i=-1);const g=i&&!isNaN(i)&&c,m=(a.idAbQuickSell?e.discardValue:.95*i)-n;if(o){const r=h("winCount");if(ur(`[${(new Date).toLocaleTimeString()}] ${t.trim()} buy success - Price : ${n}`),Un(`W: ${r} ${t} 购买成功添加到出售队列`,pe),!a.idAbDontMoveWon){const n=f("sellQueue")||[];n.push({player:e,playerName:t,sellPrice:i,shouldList:g,profit:m}),d("sellQueue",n)}}else{const e=h("bidCount");ur(`[${(new Date).toLocaleTimeString()}] ${t.trim()} 出价成功 - 价格 : ${n}`),Un(`B:${e} ${t} 出价成功`,pe);const r=f("currentFilter")||"default";if(r){const e=f("filterBidItems")||new Map;e.has(r)?e.get(r).add(s):e.set(r,new Set([s])),d("filterBidItems",e)}}(v.includes("B")||"A"===v)&&In("| "+t.trim()+" | "+p.trim()+` | ${o?"buy":"bid"} |`,!0)}else{let e=h("lossCount");ur(`[${(new Date).toLocaleTimeString()}] ${t.trim()} 购买失败 - 价格 : ${n}`);let i=(l.error&&l.error.code||l.status)+"";if(Un(`L: ${e} ${t} ${o?"购买":"出价"} 失败 错误: (${r[i]+"("+i+")"||0})`,pe),(v.includes("L")||"A"===v)&&In("| "+t.trim()+" | "+p.trim()+" | failure |",!1),a.idAbStopErrorCode){const e=new Set(a.idAbStopErrorCode.split(","));if(lr.has(i)||lr.set(i,{currentVal:0}),lr.get(i).currentVal++,e.has(i)&&lr.get(i).currentVal>=a.idAbStopErrorCodeCount&&(Un(`[!!!] 自动停止程序 错误码 ${i} 已经出现 ${lr.get(i).currentVal} 次\n`,pe),lr.clear(),Ir(),a.idAbResumeAfterErrorOccured)){const e=b(a.idAbResumeAfterErrorOccured);Un(`程序将会恢复在 ${e}(s) 之后`,pe),setTimeout((()=>{Or.call(f("AutoBuyerInstance"))}),1e3*e)}}}a.idAbAddBuyDelay&&await y(S(a.idAbDelayToAdd)),u()}))}))},fr=new Set,pr=function(e){return On("Transfer Targets - List View"),new Promise((t=>{services.Item.clearTransferMarketCache(),services.Item.requestWatchedItems().observe(this,(function(n,r){let i=e.idAbMaxBid,o=e.idAbSellPrice,s=r.response.items.filter((function(e){return!!e._auction}));if(!s.length)return t();services.Item.refreshAuctions(s).observe(this,(function(n,r){services.Item.requestWatchedItems().observe(this,(async function(n,r){const s=f("autoBuyerActive"),a=f("currentFilter")||"default",u=(f("filterBidItems")||new Map).get(a)||new Set,c=f("userWatchItems");if(s&&i){let t=r.response.items.filter((function(e){return"outbid"===e._auction._bidState&&(!a||u.has(e._auction.tradeId))&&!c.has(e._auction.tradeId)&&"active"===e._auction._tradeState}));if(t.length){const n=t[E(0,t.length-1)];await hr(n,i,o,e)}}const l=e.idSellFutBinPrice;if(s&&!e.idAbDontMoveWon&&(o&&!isNaN(o)||l)){let t=r.response.items.filter((function(e){return e.getAuctionData().isWon()&&(!a||u.has(e._auction.tradeId))&&!c.has(e._auction.tradeId)&&!fr.has(e._auction.tradeId)}));for(var p=0;p<t.length;p++){const n=t[p],r=e.idSellRatingThreshold;let i=parseInt(n.rating);const s=!r||i<=r;let a=A(n._staticData.name,15),u=n._auction.currentBid;s&&l&&(o=await or(e,a,n)),e.idSellCheckBuyPrice&&u>95*o/100&&(o=-1);const c=o&&!isNaN(o)&&s;if(c&&fr.add(n._auction.tradeId),!e.idAbDontMoveWon){const t=f("sellQueue")||[],r=(e.idAbQuickSell?n.discardValue:.95*o)-u;t.push({player:n,sellPrice:o,playerName:a,shouldList:c,profit:r}),d("sellQueue",t)}}}let h=r.response.items.filter((e=>{var t=e.getAuctionData();return t.isExpired()||t.isClosedTrade()&&!t.isWon()}));e.idAutoClearExpired&&h.length&&(services.Item.untarget(h),Un(`Found ${h.length} expired items and removed from watchlist`,pe)),services.Item.clearTransferMarketCache(),t()}))}))}))}))},hr=async(e,t,n,r)=>{let i=e._auction,o=i.currentBid,s=i.currentBid||i.startingBid,a=A(e._staticData.name,15);const u=f("autoBuyerActive");let c=r.idAbBidExact?t:o?rr(t):t,l=r.idAbBidExact?t:o?ir(s):s;u&&s<=c&&(Un("Bidding on outbidded item -> Bidding Price :"+l,pe),await dr(e,a,l,n),r.idAbAddBuyDelay&&await y(1))},vr=()=>{const e=p();let t=e.idAntiCaptchKey,n=e.idProxyAddress,r=e.idProxyPort,i=e.idProxyLogin,o=e.idProxyPassword;if(!n||!r||!t)return Un("Proxy info not filled properly",pe),void Rn(e.idAbCloseTabToggle);function s(e){let n={clientKey:t,taskId:e};var r=new XMLHttpRequest;r.open("POST","https://api.anti-captcha.com/getTaskResult",!0),r.setRequestHeader("Content-Type","application/json"),r.onreadystatechange=function(){if(4===r.readyState&&200===r.status){var t=JSON.parse(r.responseText);0==t.errorId?"ready"==t.status?new UTCaptchaViewModel(accessobjects.Captcha).validateToken(t.solution.token).observe(this,(function(e,t){if(t.success){Un("Captcha Solved",pe);const e=f("AutoBuyerInstance");Or.call(e)}})):setTimeout((()=>s(e)),1e3):Un("Error occured when checking captcha result : "+t.errorCode+", "+t.errorDescription,pe)}};var i=JSON.stringify(n);r.send(i)}!function(){accessobjects.Captcha.getCaptchaData().observe(this,(function(e,a){if(a.success){if(!a.response.blob)return!1;let e={clientKey:t,task:{type:"FunCaptchaTask",websiteURL:"https://www.ea.com/fifa/ultimate-team/web-app/",websitePublicKey:"A4EECF77-AC87-8C8D-5754-BF882F72063B",funcaptchaApiJSSubdomain:"ea-api.arkoselabs.com",data:a.response,proxyType:"http",proxyAddress:n,proxyPort:r,proxyLogin:i,proxyPassword:o,userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/52.0.2743.116 Safari/537.36"}};var u=new XMLHttpRequest;u.open("POST","https://api.anti-captcha.com/createTask",!0),u.setRequestHeader("Content-Type","application/json"),u.onreadystatechange=function(){if(4===u.readyState&&200===u.status){var e=JSON.parse(u.responseText);0==e.errorId?s(e.taskId):Un("Got error from Captcha API: "+e.errorCode+", "+e.errorDescription,pe)}};var c=JSON.stringify(e);return u.send(c),!0}}))}()},gr=new Set,mr=function(e){return new Promise((t=>{const n=S(e.idAbItemExpiring),r=e.idBuyFutBinPercent||100;let i=f("currentPage")||1;Lt("searchPerMinuteCount")>15&&(e.idAbOverSearchWarning||void 0===e.idAbOverSearchWarning)&&(Un("--------------------",pe),Un("!!! 在最后一分钟内执行了超过15次搜索，增加了你的等待时间",pe),Un("--------------------",pe));const o=new Set((e.idAddIgnorePlayersList||[]).map((({id:e})=>e))),s=v();let a=e.idAbMaxBid,u=e.idAbBuyPrice,c=e.idBuyFutBinPrice||e.idAbBidFutBin;if(!u&&!a&&!c)return Un("跳过搜索 >>> (没有给购买价或出价)",pe),t();On("Transfer Market Search"),(()=>{const e=f("sessionStats");e.searchCount++,e.searchPerMinuteCount++,d("sessionStats",e)})();let l=this._viewmodel.searchCriteria;l.minBid=nr(E(0,e.idAbRandMinBidInput)),l.minBuy=nr(E(0,e.idAbRandMinBuyInput)),services.Item.clearTransferMarketCache(),services.Item.searchTransferMarket(l,i).observe(this,(async function(v,g){if(g.success){d("searchFailedCount",0);let t=!0;Un(`找到 ${g.data.items.length} 结果, 页码 - ${i} => (最小出价: ${l.minBid} 最小购买:${l.minBuy})`,pe),g.data.items.length>0&&(Un("--------------------",pe),1===i&&On("转会市场结果 - 列表显示"),c&&"player"===g.data.items[0].type&&await tr(g.data.items)),g.data.items.length>e.idAbSearchResult&&(t=!1);let p=e.idAbMaxPurchases||1;e.idAbShouldSort&&(g.data.items=((e,t,n)=>{let r=e=>e._auction.buyNowPrice;return"bid"===t?r=e=>e._auction.currentBid||e._auction.startingBid:"rating"===t?r=e=>parseInt(e.rating):"expires"===t&&(r=e=>parseInt(e._auction.expires)),e.sort(((e,t)=>{const i=r(e),o=r(t);return n?i-o:o-i})),e})(g.data.items,e.idAbSortBy||"buy",e.idAbSortOrder));for(let i=g.data.items.length-1;i>=0&&f("autoBuyerActive");i--){let l=g.data.items[i],d=l._auction,h=services.Localization.localizeAuctionTimeRemaining(d.expires),v=l.type,{id:b}=l._metaData||{},w=parseInt(l.rating);if(c&&"player"===v){const t=f(`${l.definitionId}_${s.toLowerCase()}_price`);if(!t||!t.price){Un(`价格不可用 ${l._staticData.name}`,pe);continue}{const n=nr(t.price*r/100);u=n,e.idAbBidFutBin&&(a=n)}}let _=d.buyNowPrice,S=d.currentBid||d.startingBid,E=d.currentBid,C=e.idAbBidExact?a:E?rr(a):a,A=e.idAbBidExact?C:E?ir(S):S,O=e.idAbSellPrice,I=e.idAbMinRating,T=e.idAbMaxRating,x=l._staticData.name;const P=!(I||T)||(y=T,(m=w)>=I&&m<=y),k=yr(`${x}(${w}) 价格: ${_} 时间: ${h}`);if(!e.idAbIgnoreAllowToggle&&o.has(b)||e.idAbIgnoreAllowToggle&&!o.has(b)){k("(被忽略的球员)");continue}if(!t){k("(超过搜索结果阈值)");continue}if(p<1)break;if(!l.preferredPosition&&e.idAbAddFilterGK){k("(是守门员)");continue}if((l.playStyle===DEFAULT_PLAYSTYLE_ID||l.playStyle===ItemSubType.TRAINING_PLAYERSTYLE_GOALKEEPER_5)&&e.idAbAddFilterBC){k("(is a Basic Chemistry)");continue}if(!P){k("(评级不符合标准)");continue}if(gr.has(d.tradeId)){k("(缓存项目)");continue}const D=services.User.getUser().coins.amount;if(!a&&D<_||a&&D<A)k("(金币不足无法购买/出价)");else if(_<=u)k("尝试购买: "+_),p--,gr.add(d.tradeId),await dr(l,x,_,O,!0,d.tradeId);else if(a&&S<=C){if(d.expires>n){k("(等待指定的到期时间)");continue}k("尝试出价: "+A),gr.add(d.tradeId),p--,await dr(l,x,A,O,A===_,d.tradeId)}else k(u&&_>u||a&&S>C?`购买价格: ${u||C} (高于指定购买价/出价)`:"(无需任何操作)")}}else((e,t,n)=>{let r=!1;if(e.status===UtasErrorCode.CAPTCHA_REQUIRED||e.error&&e.error.code==UtasErrorCode.CAPTCHA_REQUIRED)r=!0,t?(Un("[!!!] 验证码被触发，试图解决它",pe),vr()):Rn(n);else{const t=h("searchFailedCount");t>=3?(r=!0,Un(`[!!!] 由于搜索连续 ${t} 次失败，自动停止程序，请检查您是否有权限在Web应用程序中访问转会市场 ${e.status}`,pe)):Un(`[!!!] 搜索失败 - ${e.status}`,pe)}r&&(O("capatcha"),"A"===p().idNotificationType&&In("自动秒卡已停止",!1),Ir())})(g,e.idAbSolveCaptcha,e.idAbCloseTabToggle);var m,y;On("Transfer Market Search"),i<e.idAbMaxSearchPage&&21===g.data.items.length?h("currentPage"):d("currentPage",1),t()}))}))},yr=e=>t=>{Un(e+" "+t,pe)},br=function(e,t,n){return On("Transfer List - List View"),new Promise((r=>{n||repositories.Item.isDirty(ItemPile.TRANSFER)?services.Item.requestTransferItems().observe(this,(async function(n,i){let o=i.response.items.filter((function(e){return e.getAuctionData().isSold()})).length;Lt("soldItems")<o&&await zn(),Nt("soldItems",o);const s=i.response.items.filter((function(e){return!e.getAuctionData().isSold()&&e.getAuctionData().isExpired()})).length;Nt("unsoldItems",s);const a=o>=t;s&&e&&services.Item.relistExpiredAuctions().observe(this,(function(e,t){!a&&UTTransferListViewController.prototype.refreshList()}));const u=i.response.items.filter((function(e){return e.getAuctionData().isSelling()})).length;Nt("activeTransfers",u);const c=i.response.items.filter((function(e){return e.getAuctionData().isInactive()})).length;Nt("availableItems",c);const l=services.User.getUser().coins.amount;Nt("coinsNumber",l),Nt("coins",l.toLocaleString()),a&&(Un("[TRANSFER-LIST] > "+o+" item(s) sold\n",pe),UTTransferListViewController.prototype._clearSold()),r()})):r()}))},wr=function(){return{switchFilterWithContext:Vn.bind(this),srchTmWithContext:mr.bind(this),watchListWithContext:pr.bind(this),transferListWithContext:br.bind(this),pauseBotWithContext:Kn.bind(this)}},_r=async()=>{const e=f("sellQueue")||[],t=p(),n=t.idAbSendListingNotificationToggle,r=e.length;for(r&&Un("--------------------",pe);e.length;){const{player:r,sellPrice:i,shouldList:o,playerName:s,profit:a}=e.pop(),u=await Er(r,i,a,o,t);Sr(i,o,a,t,s,u,n,r.discardValue),e.length&&await y(2)}r&&Un("--------------------",pe)},Sr=(e,t,n,r,i,o,s,a)=>{const u=`${i.trim()}, ${o||(e<0?"已放入转会清单":t?"listed for: "+e+", Profit: "+n:r.idAbDontMoveWon?"":r.idAbQuickSell?"quick sold for:"+a:"已放入俱乐部")} `;Un(u,pe),s&&In(u,!0)},Er=(e,t,n,r,i)=>new Promise((o=>{if(t<0)services.Item.move(e,ItemPile.TRANSFER).observe(void 0,(async function(){o()}));else if(r){if(repositories.Item.isPileFull(ItemPile.TRANSFER))return o("Unable to list, transfer List if Full");ar(n),services.Item.list(e,rr(t),t,S(i.idFutBinDuration||"1H")||3600).observe(void 0,(async function(e,t){o()}))}else i.idAbQuickSell?(services.Item.discard([e]),ar(n),o()):services.Item.move(e,ItemPile.CLUB).observe(void 0,(async function(e,t){o()}))}));let Cr=null,Ar=null;const Or=async function(e){if($("#"+Te).css("color","#2cbe2d").html("运行中"),f("autoBuyerActive"))return;(e=>{An(e?"自动秒卡已恢复":"自动秒卡已启动"),d("autoBuyerActive",!0),d("autoBuyerState","Active"),isPhone()&&$(".ut-tab-bar-item").attr("disabled",!0),e||(d("botStartTime",new Date),d("purchasedCardCount",0),d("searchFailedCount",0),d("currentPage",1))})(e);const{switchFilterWithContext:t,srchTmWithContext:n,watchListWithContext:r,transferListWithContext:i,pauseBotWithContext:o}=wr.call(this);await t();let s=p();e&&"A"===s.idNotificationType&&In("自动秒卡已启动",!0),!e&&await new Promise(((e,t)=>{services.Item.requestWatchedItems().observe(void 0,(function(t,n){if(n.success){const e=f("filterBidItems")||new Map,t=new Set(Array.from(e.values()).flat(1).reduce(((e,t)=>e.concat([...t])),[])),r=n.response.items.filter((e=>e._auction&&!t.has(e._auction.tradeId))).map((e=>e._auction.tradeId))||[];d("userWatchItems",new Set(r)),r.length&&Un(`Found ${r.length} items in users watch list and ignored from selling`,pe)}e()}))})),On("Hub - Transfers"),await n(s),On("Hub - Transfers"),await i(s.idAbSellToggle,s.idAbMinDeleteCount,!0);let a=!1;f("autoBuyerActive")&&(Cr=((e,t,n)=>{let r,i=!1;const o=()=>{if(i)return;const s={start:Date.now()},a=1e3*parseFloat((Math.random()*(n-t)+t).toFixed(1));s.end=s.start+a,d("searchInterval",s),r=setTimeout((()=>{e(),o()}),a)};return o(),{clear(){i=!0,clearTimeout(r)}}})((async()=>{Ar=o(s),(e=>{const t=f("purchasedCardCount"),n=e.idAbCardCount,r=f("botStartTime").getTime();let i=qn||b(e.idAbStopAfter);qn||(qn=i);let o=((new Date).getTime()-r)/1e3>=i;if(o||n&&t>=n){const t=o?"时间过去":"已达到最大购买次数";Un(`自动秒卡已停止 | ${t}`,pe),qn=null,$n=null,"A"===e.idNotificationType&&In(`自动秒卡已停止 - ${t}`),Ir()}})(s),f("autoBuyerActive")&&!a&&(a=!0,await _r(),await t(),s=p(),On("Hub - Transfers"),await n(s),On("Hub - Transfers"),await r(s),On("Hub - Transfers"),await i(s.idAbSellToggle,s.idAbMinDeleteCount)),a=!1}),...C(s.idAbWaitTime)))},Ir=e=>{Cr&&Cr.clear(),!e&&Ar&&clearTimeout(Ar);const t=f("autoBuyerState");if(e&&"暂停"===t||!e&&"停止"===t)return;d("autoBuyerActive",!1);const n=f("searchInterval")||{};d("searchInterval",{start:n.start,end:Date.now()}),e||O("finish"),isPhone()&&$(".ut-tab-bar-item").removeAttr("disabled"),d("autoBuyerState",e?"暂停":"停止");const r=p();e&&"A"===r.idNotificationType&&In("自动秒卡已暂停",e,16705372),An(e?"自动秒卡已暂停":"自动秒卡已停止"),e||_r(),$("#"+Te).css("color","red").html(e?"暂停":"空闲")},{startAutoBuyer:Tr,stopAutoBuyer:xr}=t,Pr=function(e){UTMarketSearchFiltersViewController.call(this)},kr=UTMarketSearchFiltersViewController.prototype.init,Dr=UTMarketSearchFiltersViewController.prototype.viewDidAppear;JSUtils.inherits(Pr,UTMarketSearchFiltersViewController),JSUtils.inherits(UTMarketSearchFiltersViewController,UTMarketSearchFiltersViewController),Pr.prototype.init=function(){kr.call(this);let e=this.getView();isPhone()||(e.__root.style="width: 52%; float: left;"),d("AutoBuyerInstance",this);const t=cn.call(this);let n=$(e.__root);const r=Mt.bind(this),i=r("停止",(()=>xr.call(this))),o=r("清除日志",(()=>Bn.call(this)),"btn-other"),s=r("开始",(()=>{Tr.call(this),$(".ut-navigation-container-view--content").animate({scrollTop:$(".ut-navigation-container-view--content").prop("scrollHeight")},400)}),"call-to-action");setInterval((()=>{isPhone()?(()=>{const e=I(f("searchInterval")),t=f("sessionStats");$("#"+Oe).html(t.searchCount),$("#"+Ze).html(t.profit),$("#"+Ie).html(t.coins),$("#"+Ce).css("width",e),Dt()})():(()=>{const e=I(f("searchInterval")),t=f("sessionStats");$("#"+Ce).css("width",e),$("#"+Ae).css("width",e),$("#"+Ie).html(t.coins),$("#"+Oe).html(t.searchCount),$("#"+xe).html(t.soldItems),$("#"+Pe).html(t.unsoldItems),$("#"+ke).html(t.availableItems),$("#"+De).html(t.activeTransfers),$("#"+Ze).html(t.profit),Dt(),t.unsoldItems?$("#"+Pe).css("color","red"):$("#"+Pe).css("color",""),t.availableItems?$("#"+ke).css("color","orange"):$("#"+ke).css("color","")})()}),1e3),n.addClass("auto-buyer");const a=n.find(".button-container");a.addClass("buyer-actions"),a.find(".call-to-action").remove();const u=a.find('button:contains("Reset")');u.on("click touchend",(async function(){$(`#${x}`).prop("selectedIndex",0),await ln()})),u.addClass("btn-other"),a.append($(s.__root)),a.append($(i.__root)),a.append($(o.__root)),$(t.__root).find(".menu-container").addClass("settings-menu"),n.find(".search-prices").append(t.__root)},Pr.prototype.viewDidAppear=function(){this.getNavigationController().setNavigationVisibility(!0,!0),Nr.call(this,!1)},UTMarketSearchFiltersViewController.prototype.viewDidAppear=function(){Nr.call(this,!0)};const Nr=function(e){Dr.call(this);let t=this.getView(),n=$(t.__root);n.find(".filter-place").length||rn.call(this,e).then((e=>{n.find(".ut-item-search-view").first().prepend(e)}))};Pr.prototype.getNavigationTitle=function(){return setTimeout((()=>{var e=$(".ut-navigation-container-view--content .search-prices > div:nth-child(6) > div.info > span");e.html(e.text()+'<font color="red">（必须填写）</font>');const t=$(".title");isPhone()&&t.addClass("buyer-header"),$(".view-navbar-currency").remove(),$(".view-navbar-clubinfo").remove(),$(".menu-container:not(.settings-menu) .ea-filter-bar-item-view:eq(2)").remove(),$(".menu-container:not(.settings-menu) .ea-filter-bar-item-view:eq(2)").remove(),$(".button-container.btn-filters .btn-standard.filterSync").remove(),$(".ut-navigation-container-view--content .search-prices .price-filter:eq(3) "),t.append(`<span style='color:red' id="${Te}"> 空闲 </span> | 请求次数: <span id="${Oe}">0</span> \n  `),$(isPhone()?`<div class="view-navbar-currency">\n            <span id=${vt} style="font-weight: bold;\n            margin: auto 2px;">00:00:00</span>\n            <div style="margin: auto 2px;">搜索:</div> \n            <div class="stats-progress">\n              <div id=${Ce} class="stats-fill"></div>\n            </div>\n            <div class="view-navbar-currency-coins ab coins">Coins: <span id=${Ie}></span></div>\n            <div class="view-navbar-currency-coins ab profit">Profit: <span id=${Ze}></span></div>\n            ${Wt(gt,"⇩",(()=>{cr()}),"filterSync download-stats")} \n          </div>`:`\n  <div class="view-navbar-clubinfo-data">\n    <div class="view-navbar-clubinfo-name">\n    ${Wt(gt,"⇩",(()=>{cr()}),"filterSync")}\n    </div>\n  </div>\n  <div class="view-navbar-clubinfo">\n    <div class="view-navbar-clubinfo-data">\n      <div class="view-navbar-clubinfo-name">\n        <span id=${vt} style="font-weight: bold;">00:00:00</span>\n      </div>\n    </div>\n  </div>\n  <div class="view-navbar-clubinfo">\n    <div class="view-navbar-clubinfo-data">\n       <div class="view-navbar-clubinfo-name">\n          <div style="float: left;">Search:</div>\n          <div class="stats-progress">\n             <div id=${Ce} class="stats-fill"></div>\n          </div>\n       </div>\n       <div class="view-navbar-clubinfo-name">\n          <div style="float: left;">Statistics:</div>\n          <div class="stats-progress">\n             <div id=${Ae} class="stats-fill"></div>\n          </div>     \n       </div>\n    </div>\n  </div>\n  <div class="view-navbar-currency" style="margin-left: 10px;">\n    <div class="view-navbar-currency-coins ab coins">Coins: <span  id=${Ie}></span></div>\n    <div class="view-navbar-currency-coins ab profit">Profit: <span  id=${Ze}></span></div>\n  </div>\n  <div class="view-navbar-clubinfo">\n    <div class="view-navbar-clubinfo-data">\n       <span class="view-navbar-clubinfo-name">Sold Items: <span id=${xe}></span></span>\n       <span class="view-navbar-clubinfo-name">Unsold Items: <span id=${Pe}></span></span>\n    </div>\n  </div>\n  <div class="view-navbar-clubinfo" style="border: none;">\n    <div class="view-navbar-clubinfo-data">\n       <span class="view-navbar-clubinfo-name">Available Items: <span id=${ke}></span></span>\n       <span class="view-navbar-clubinfo-name">Active transfers: <span id=${De}></span></span>\n    </div>\n  </div>`).insertAfter(t),$(".ut-navigation-container-view--content").find(`#${Ot}`).remove(),$(".ut-navigation-container-view--content").append((()=>{const e=$(`<div style=${isPhone()?"height: 90%;display: flex;flex-direction: column;padding: 7px;":"width:48%"} id=${Ot}>\n            <div class="logs-container">\n              <label>日志:</label>\n              <div data-title="Clear logs" class="button-clear">\n              </div>\n            </div>\n            <br/>\n            <div class="logWrapper">\n              <textarea wrap="off"  style="height: 100%;overflow-x: auto;resize: none; width: 100%;" readonly id=${pe} class="autoBuyerLog"></textarea>\n              <br/>\n        </div>`);return e.find(".button-clear").append(Mt("⎚",(()=>Bn())).__root),e})()),jt(),T(f("CommonSettings")||{})})),"自动秒卡 "};const Lr=()=>{const e=UTGameTabBarController.prototype.initWithViewControllers;UTGameTabBarController.prototype.initWithViewControllers=function(t){const n=new UTGameFlowNavigationController;n.initWithRootController(new Pr),n.tabBarItem=jr("自动秒卡"),(t=Mr(t)).push(n),e.call(this,t)}},Mr=e=>{if(!isPhone())return e;const t=[];return t.push(e[0]),t.push(e[2]),t.push(e[3]),t.push(e[4]),t},jr=e=>{const t=new UTTabBarItemView;return t.init(),t.setTag(8),t.setText(e),t.addClass("icon-transfer"),t},Rr=()=>{const e=UTNavigationBarView.prototype.layoutSubviews;function t(){const e=new UTNavigationButtonControl;return e.init(),e.addClass("menu-btn"),e.setInteractionState(!0),e.addTarget(this,(()=>{window.ReactNativeWebView.postMessage(JSON.stringify({type:"OpenDrawer"}))}),EventType.TAP),e}UTNavigationBarView.prototype.layoutSubviews=function(...n){const r=e.call(this,...n);if(this.primaryButton&&this.__clubInfo){this._menuBtn&&this._menuBtn.removeFromSuperview(),this._menuBtn=t.call(this);const e=$(this.primaryButton.getRootElement()),n=$(this._menuBtn.getRootElement());$(".top-nav").remove(),e.wrap('<div class="top-nav"></div>'),n.insertBefore(e)}return r}};n(665);const Ur=()=>{const e=UTCurrencyNavigationBarView.prototype._tapDetected;UTCurrencyNavigationBarView.prototype._tapDetected=function(t){const n=e.call(this,t);return t.target.classList.contains("coins")?(zn(),n):(t.target.classList.contains("profit")&&(()=>{const e=f("sessionStats");e.profit=0,d("sessionStats",e)})(),n)}},Br=()=>{(()=>{let e=(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB||window.shimIndexedDB).open("userDatasAB",2);e.onupgradeneeded=function(t){a=e.result;try{t.oldVersion<1&&a.createObjectStore("Filters",{keyPath:"filterName"}),t.oldVersion<2&&a.createObjectStore("CommonSettings",{keyPath:"filterName"})}catch(t){}},e.onsuccess=function(){a=e.result}})(),Lr(),isPhone()&&Rr(),g(),Ur()},Fr=function(){let e=!1;isPhone()&&$("body").removeClass("landscape").addClass("phone"),$(".ui-orientation-warning").attr("style","display: none !important"),$(".ut-fifa-header-view").attr("style","display: none !important"),services.Localization&&$("h1.title").html()===services.Localization.localize("navbar.label.home")&&(e=!0),e?(()=>{const e=document.createElement("style");$(".ui-orientation-warning").css("display","none"),$(".ut-fifa-header-view").css("display","none"),e.innerText=`\n  .buyer-header {\n      font-size: 20px !important;\n  }\n  .with-fifa-header .ut-root-view {\n    height: 100%;\n  }\n  .buyer-settings {\n      width: 100%;\n  }\n  .buyer-settings-field {\n    margin-top: 15px;\n    margin-bottom: 15px;\n  }\n  .phone .buyer-settings-field{\n    margin-top: auto;\n    margin-bottom: auto;\n    width: 100%;\n    padding: 10px;\n  }\n  .buyer-settings-wrapper {\n    display: flex; \n    flex-wrap: wrap; \n    margin-top: 20px;\n  }\n  .buyer-settings-field .ut-toggle-cell-view{\n    justify-content: center;\n  }\n  .buyer-settings-field input:disabled {\n    background-color: #c3c6ce;\n    cursor: not-allowed;\n  }\n  .btn-test-notification\n  {\n    width: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n  input[type="number"]{\n    padding: 0 .5em;\n    border-radius: 0;\n    background-color: #262c38;\n    border: 1px solid #4ee6eb;\n    box-sizing: border-box;\n    color: #4ee6eb;\n    font-family: UltimateTeam,sans-serif;\n    font-size: 1em;\n    height: 2.8em;\n    opacity: 1;\n    width: 100%;\n  }\n  .autoBuyerLog {\n    font-size: ${isPhone()?"13px":"15px"}; \n    height: 50%;\n    background-color:#141414;\n    color:#e2dde2;\n  }\n  .searchLog {\n    font-size: 10px; \n    height: 50%;\n  }\n  input::-webkit-outer-spin-button,\n  input::-webkit-inner-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n  input[type=number] {\n    -moz-appearance: textfield;\n  }\n  .captcha-settings-view input,\n  .notification-settings-view input {\n    text-transform: none;\n  }\n  .phone .buyer-header{\n    font-size: 1.2em !important;\n  }\n  .phone .buyer-actions .btn-standard{\n    padding: 0;\n    font-size: 1.2em;\n    text-overflow: unset;\n  }\n  .filter-header-settings {\n    width: 100%;\n    padding: 10px;\n    font-family: UltimateTeamCondensed, sans-serif;\n    font-size: 1.6em;\n    color: #e2dde2;\n    text-transform: uppercase;\n    background-color: #171826;\n  }\n  .btn-save-filter {\n    width:100%\n  }\n  .btn-delete-filter {\n    width:50%\n  }\n  .multiple-filter {\n    width: 100%  !important;\n    display: flex  !important;\n    justify-content: center;\n    align-items: center;\n  }\n  .logs-container {\n    display: flex;\n    justify-content: space-between;\n    font-size: 20px;\n    align-items: center;\n  }\n  .button-clear button {\n    color: #fff;\n    background-color: unset;\n    height: unset;\n    line-height: unset;\n  }\n  .top-nav{\n    display:flex; \n  }\n  .ut-navigation-button-control.menu-btn:before {\n    content: "≡";\n    transform: unset;\n  }\n  .menu-btn {\n    min-width: 0px;\n    margin-left: 5px;\n  }\n  .filterSync {\n    background: transparent;\n    color: #c4f750;\n    text-overflow: clip;\n  }\n  .filterSync:hover {\n    background: transparent !important;\n  }\n  .stats-progress {\n    float: right; \n    height: 10px; \n    width: 100px; \n    background: #888; \n    margin: ${isPhone()?"auto 5px":"5px 0px 5px 5px"};\n  }\n  .stats-fill {\n    background: #000; \n    height: 10px; \n    width: 0%\n  }\n  .numericInput:invalid {\n    color: red;\n    border: 1px solid;\n  }\n  .ignore-players{\n    width: 100%;\n    display: flex;\n    background: transparent;\n  }\n  .ignore-players .ut-player-search-control{\n    width: 90% !important;\n  }\n  .ignore-players filterSync{\n    flex: unset;\n  }\n  .font15 {\n    font-size: 15px;\n  }  \n  .action-icons {\n    display: unset !important;\n    width: 10%\n  }\n  .displayCenterFlx {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n  .displayNone {\n    height: 275px;\n  }\n  .displayNone .inline-list-select,\n  .displayNone .search-prices,\n  .displayNone .btn-actions,\n  .displayNone .btn-filters,\n  .displayNone .btn-report,\n  .displayNone .buyer-actions .btn-other {\n    display: none !important;\n  }\n  .mrg10 {\n    margin: 10px;\n  }\n  .ut-toggle-cell-view--label{\n    overflow: unset;\n  }\n  .download-stats {\n    line-height: 1;\n    display: flex;\n  }\n  .btn-report {\n    display: flex;\n    justify-content: center;\n  }\n  small{\n    white-space: break-spaces;\n  }  \n  .joinServer {\n    position: absolute;\n    right: 25px;\n    top: 50%;\n    color: wheat\n  }\n  .phone .joinServer{\n    display: none;\n  }\n  textarea {\n    resize: none;\n  }  \n  .logWrapper {\n    position: relative;\n    height: 100%\n  } \n \n  .auto-buyer .autoBuyMin{\n    display: none;\n  }\n  .auto-buyer .search-prices .settings-field{\n    display: none;\n  }\n  .ut-section-header-view button{\n    max-width: 100%;\n  }\n  `,e.innerText+="\n  ::-webkit-scrollbar {\n    -webkit-appearance: none;\n  }\n  ::-webkit-scrollbar:vertical {\n      width: 12px;\n  }\n  ::-webkit-scrollbar:horizontal {\n      height: 12px;\n  }\n  ::-webkit-scrollbar-thumb {\n      background-color: rgba(0, 0, 0, .5);\n      border-radius: 10px;\n      border: 2px solid #ffffff;\n  }\n  ::-webkit-scrollbar-track {\n      border-radius: 10px;\n      background-color: #ffffff;\n  }",document.head.appendChild(e)})():setTimeout(Fr,1e3)},zr=function(){let e=!1;services.Localization&&(e=!0),e?(Br(),Fr(),s&&window.addEventListener("message",(e=>{const t=JSON.parse(e.data);if("dataFromExternalAB"===t.type){const{res:e,identifier:n}=t.response,r=f(n);return r&&r(e),d(n,null)}}),!0)):setTimeout(zr,1e3)};zr()})()})(),function(){"use strict";window.requirementTarget="";var e,t,n={},r={},i={},o={},s={};function a(e){return new Promise((t=>{let n={count:250,sort:"desc",sortBy:"ovr",start:e,type:"player"};GM_xmlhttpRequest({method:"POST",url:`https://utas.mob.v1.fut.ea.com/ut/game/fifa${r.base.year}/club`,headers:{"Content-type":"application/json","X-UT-SID":r.base.sId},data:JSON.stringify(n),onload:function(e){e.response&&t(JSON.parse(e.response))}})}))}r={unassigned:{state:!1,run:0,playerId:[],rating:0,rlist:[],clsit:[]},task:{obj:{stat:{},html:""},sbc:{stat:{},html:""}},base:{state:!1,platform:"pc",price:{},sId:"",localization:"",autoLoad:!0,ratings:{},input:!0,promo:0,template:!1,losauction:!1,savesquad:!1},criteria:{},roster:{state:!1,data:{},page:-1,element:{},thousand:{lowest:99}},language:2,localization:{},quick:{},build:{league:!0,rare:!0},league:{2012:"中超",61:"英乙",60:"英甲",14:"英冠",13:"英超",2208:"英丙",2149:"印超",32:"意乙",31:"意甲",54:"西乙",53:"西甲",68:"土超",50:"苏超",308:"葡超",39:"美职联",17:"法乙",16:"法甲",20:"德乙",19:"德甲",2076:"德丙",2118:"传奇",353:"阿甲"},setfield:{card:["pos","lea","price","other","club","low"],player:["auction","futbin","getprice","loas"],sbc:["top","right","quick","duplicate","records","input","icount","template","market","sback","cback","dupfill","autofill","squadcmpl"],info:["obj","sbc","sbcf","sbcs","pack","auction","squad"]},set:{},formation:{23:[25,18,25,16,14,14,12,5,5,5,0],24:[21,25,21,16,14,14,12,5,5,5,0],25:[27,25,23,16,14,14,12,5,5,5,0],27:[25,18,25,16,10,10,12,5,5,5,0],14:[25,18,25,16,10,12,7,5,5,3,0],15:[25,18,25,14,10,14,7,5,5,3,0],2:[25,16,14,14,12,10,7,5,5,3,0],3:[25,18,18,18,10,10,7,5,5,3,0],4:[25,16,18,12,10,10,7,5,5,3,0],13:[25,25,18,18,10,10,7,5,5,3,0],6:[25,25,18,14,14,14,7,5,5,3,0],7:[21,25,21,14,14,14,7,5,5,3,0],8:[27,25,23,14,14,14,7,5,5,3,0],9:[27,25,23,14,10,14,7,5,5,3,0],10:[27,25,23,10,14,10,7,5,5,3,0],11:[27,25,23,14,18,14,7,5,5,3,0],12:[27,21,23,14,10,14,7,5,5,3,0],19:[25,21,16,14,14,12,7,5,5,3,0],16:[25,25,16,14,14,12,7,5,5,3,0],17:[25,25,16,10,10,12,7,5,5,3,0],21:[25,16,18,14,18,12,7,5,5,3,0],20:[25,16,14,14,14,12,7,5,5,3,0],29:[25,18,25,14,14,8,5,5,5,2,0],30:[27,25,23,14,14,8,5,5,5,2,0],31:[25,25,14,10,14,8,5,5,5,2,0],33:[25,16,14,14,12,8,5,5,5,2,0],18:[25,18,16,14,14,12,7,5,5,3,0],5:[25,25,27,23,14,14,7,5,5,3,0],1:[25,25,14,16,10,12,7,5,5,3,0],22:[25,25,16,14,10,14,12,5,5,5,0]}},e={current:function(){return getAppMain().getRootViewController().getPresentedViewController().getCurrentViewController().getCurrentController()},right:function(){return getAppMain().getRootViewController().getPresentedViewController().getCurrentViewController().getCurrentController()._rightController._currentController},left:function(){return getAppMain().getRootViewController().getPresentedViewController().getCurrentViewController().getCurrentController()._leftController}},n.notice=function(e,t){services.Notification.queue([u(e),t])},n.init=async function(){o.init(),r.base.sId=services.Authentication.sessionUtas.id,r.base.year=APP_YEAR_SHORT;let t=services.User.getUser().getSelectedPersona();(t.isXbox||t.isPlaystation||t.isStadia)&&(r.base.platform="ps",r.base.platform="ps"),services.User.maxAllowedAuctions=100,GM_xmlhttpRequest({method:"GET",url:"https://futcd.com/data/futpricenew.json",headers:{"Content-type":"application/json"},onload:function(e){let t=JSON.parse(e.response);"pc"==r.base.platform?r.base.price=t.pc:r.base.price=t.tv}});let i=n.createButton(new UTButtonControl,u("loadingclose.text"),(async e=>{n.hideLoader()}),"fsu-loading-close");r.base.close=i,document.querySelector(".ut-click-shield").append(r.base.close.__root),r.base.localization=services.Localization.repository._collection,await n.wait(.5,1),GM_xmlhttpRequest({method:"GET",url:`https://utas.mob.v1.fut.ea.com/ut/game/fifa${r.base.year}/scmp/campaign/categories`,headers:{"Content-type":"application/json","X-UT-SID":r.base.sId},onload:function(e){if(e.response){let t=JSON.parse(e.response),i=Math.round((new Date).getTime()/1e3),o={reward:"",new:{"-1":0}},s={pack:0,player:0};for(let e=0;e<t.length;e++)t[e].groupsList.forEach(((n,r)=>{let a={f:0,e:0};if(2!==n.groupType){if(n.startTime>=i-86400&&n.startTime<i&&(a.f=1,o.new[-1]++,o.new.hasOwnProperty(t[e].categoryId)?o.new[t[e].categoryId]++:o.new[t[e].categoryId]=1,n?.awardsList))for(let e of n.awardsList)"pack"===e.awardType&&s.pack++,"item"===e.awardType&&"player"===e.itemDataReduced.itemType&&s.player++;n.endTime<=i+86400&&0!==n.endTime&&(a.e=1)}o[`${n.groupType.toString()}-${n.groupId.toString()}`]=a}));let a=[];s.player>0&&a.push(u("task.player")),s.pack>0&&a.push(u("task.pack")),o.reward=a.join("、"),r.task.obj.stat=o,r.task.obj.html=n.taskHtml(o.new[-1],o.reward)}}}),GM_xmlhttpRequest({method:"GET",url:"https://futcd.com/data/futsbc.json",headers:{"Content-type":"application/json","Cache-Control":"600"},onload:function(e){let t=JSON.parse(e.response);r.task.sbc.stat=t,r.task.sbc.html=n.taskHtml(t.new[0],t.reward)}}),GM_xmlhttpRequest({method:"GET",url:"https://futcd.com/data/promo.json",headers:{"Content-type":"application/json","Cache-Control":"600"},onload:function(e){let t=JSON.parse(e.response);r.base.promo=t.n}}),services.Club.getStats().observe(e.current(),(function(t,i){t.unobserve(this),i.success?i.response.stats.forEach((async function(t){if("players"==t.type){let i=Math.ceil(t.count/250);n.showLoader();for(let e=0;e<i;e++){n.changeLoadingText(["loadingclose.ldata",`${e}`,`${i}`]);let t=await a(250*e);for(let e of t.itemData)e.hasOwnProperty("loans")||(r.roster.thousand[e.resourceId]={untradeable:e.untradeable,rating:e.rating,id:e.id},services.Item.itemDao.itemRepo.club.items._collection.hasOwnProperty(e.id)||services.Item.itemDao.itemRepo.club.addClubItem((new UTItemEntityFactory).createItem(e)),e.rating<r.roster.thousand.lowest&&(r.roster.thousand.lowest=e.rating));await n.wait(.5,1)}n.hideLoader(),n.notice("notice.ldatasuccess",0),"UTHomeHubViewController"==e.current().className&&r.task.obj.html&&!e.current()._view._objectivesTile.__root.querySelector(".fsu-task")&&e.current()._view._objectivesTile.__tileContent.querySelector(".ut-tile-view--subtitle")&&e.current()._view._objectivesTile.__tileContent.before(n.createDF(`<div class="fsu-task">${r.task.obj.html}</div>`)),"UTHomeHubViewController"==e.current().className&&r.task.sbc.html&&!e.current()._view._sbcTile.__root.querySelector(".fsu-task")&&e.current()._view._sbcTile.__tileContent.querySelector(".ut-tile-content-graphic-info")&&e.current()._view._sbcTile.__tileContent.before(n.createDF(`<div class="fsu-task">${r.task.sbc.html}</div>`))}}),this):NetworkErrorManager.checkCriticalStatus(response.status)&&NetworkErrorManager.handleStatus(response.status)&&n.hideLoader()&&n.notice("notice.ldataerror",2)}))},n.getItemBy=(e,t,n)=>{let r=services.Item.itemDao.itemRepo.club.items;for(let[e,n]of Object.entries(t))r=r.filter((t=>{if("player"===t.type&&-1===t.loans&&null!==t._itemPriceLimits)switch(e){case"rs":switch(n){case 0:return t.rating>=0&&t.rating<=64&&(!t.isSpecial()||1003==t.leagueId||1014==t.leagueId);case 1:return t.rating>=65&&t.rating<=74&&(!t.isSpecial()||1003==t.leagueId||1014==t.leagueId);case 2:return t.rating>=75&&t.rating<=80&&(!t.isSpecial()||1003==t.leagueId||1014==t.leagueId);default:return t.rating>=0&&t.rating<=99}case"gs":return n?t.groups.includes(4):0==t.groups.length;case"levelId":switch(n){case 3:return t.isSpecial();case 0:return t.isBronzeRating()&&!t.isSpecial();case 1:return t.isSilverRating()&&!t.isSpecial();case 2:return t.isGoldRating()&&!t.isSpecial()}default:let r=/GT/;if(r.test(e)){let i=e.replace(r,"");return n instanceof Array?!n.includes(t[i]):t[i]!==n}return n instanceof Array?n.includes(t[e]):t[e]===n}}));if(r.sort(((e,t)=>e.rating-t.rating?e.rating-t.rating:e.rareflag-t.rareflag?e.rareflag-t.rareflag:e._itemPriceLimits.maximum-t._itemPriceLimits.maximum)),n){let e=[...new Set(n.map((e=>{if(e.isDuplicate()&&!e.isLoaned()&&e.isPlayer())return e.duplicateId})))];for(let t of e){let e=r.findIndex((e=>e.id===t));if(-1!==e){let t=r.splice(e,1)[0];r.unshift(t)}}}return 1==e?r.map((e=>e.definitionId)):2==e?r:void 0},n.taskHtml=function(e,t){let n="<div>{Number}</div><div>{reward}</div>";e>0?n=n.replace("{Number}",u("task.added")+e):(n=n.replace("fsu-task","fsu-task no"),n=n.replace("{Number}",u("task.noadded"))),"、"==t&&(t="");let r=t;return r=r.replace("组合包",u("task.pack")),r=r.replace("球员",u("task.player")),n=n.replace("{reward}",r),n},n.showLoader=()=>{document.querySelector(".ut-click-shield").classList.add("showing","fsu-loading"),document.querySelector(".loaderIcon").style.display="block"},n.hideLoader=()=>{document.querySelector(".ut-click-shield").classList.remove("showing","fsu-loading"),document.querySelector(".loaderIcon").style.display="none",r.base.template&&(r.base.template=!1,isPhone()?e.current()._view._fsuSquad.setInteractionState(1):e.right().getView()._fsuSquad.setInteractionState(1)),r.base.losauction&&(r.base.losauction=!1,isPhone()&&n.notice("notice.phoneloas",0)),n.changeLoadingText("loadingclose.text")},n.L10n=function(e){let t="";if(-1!==e.indexOf("{")){t=e;let n=e.match(/{(.*?)}/g);for(let e of n){let n=e.match(/{(.*?)}/)[1];r.localization[r.language].hasOwnProperty(n)&&(t=t.replace(e,r.localization[r.language][n]))}}else t=r.localization[r.language].hasOwnProperty(e)?r.localization[r.language][e]:e;return t};const u=function(e){let t="";if(Array.isArray(e)){t=r.localization[e.shift()][r.language];let n=e.slice();for(let e in n)t=t.replace(`%${Number(e)+1}`,`${n[e]}`)}else if(-1!==e.indexOf("{")){t=e;let n=e.match(/{(.*?)}/g);for(let e of n){let n=e.match(/{(.*?)}/)[1];r.localization.hasOwnProperty(n)&&(t=t.replace(e,r.localization[n][r.language]))}}else t=r.localization.hasOwnProperty(e)?r.localization[e][r.language]:e;return t};function c(e){return new Promise((t=>{GM_xmlhttpRequest({method:"GET",url:e,headers:{"Content-type":"application/json"},onload:function(e){if(404==e.status)return n.notice("notice.loaderror",2),void(document.querySelector(".ut-click-shield").classList.contains("showing")&&n.hideLoader());t(JSON.parse(e.response))},onerror:function(){n.notice("notice.loaderror",2),document.querySelector(".ut-click-shield").classList.contains("showing")&&n.hideLoader()}})}))}r.localization={"price.btntext":["查询价格","查詢價格","Check Price"],"price.formatno":["无数据","沒有數據","No Data"],"price.formatcompany":["万","萬","ten thousand"],"price.now":["球员低价","最低價格","Low Price"],"price.low":["评分低价","評分最低價格","Rating Price"],"price.last":["购买价格","購入價格","Bought Price"],"duplicate.swap":["可发送俱乐部","可以送到球會","Can be Sent to Club"],"duplicate.not":["队内不可交易","球會球員無法交易","Club Players are Untradeable"],"duplicate.yes":["队内可交易","球會球員可交易","Club Players are Tradable"],"duplicate.nodata":["无队内数据","沒有球員數據","No Club Players Data"],"duplicate.lowprice":["评分低价:","評分最低價格:","Rating Price "],"notice.upgradefailed":["查询新版本失败","查詢新版本失敗","Query new version failed"],"notice.upgradeconfirm":["有新版本点击顶部链接查看","有新版本點擊頂部鏈接查看","There is a new version, click the top link to view"],"notice.uasreset":["已重新载入列表 请重新进入查看","已重新載入列表 請重新進入查看","The list has been reloaded, please re-enter to view"],"notice.priceloading":["开始读取价格数据 请稍等","開始讀取價格數據 請稍等","Start reading price data, please wait"],"notice.loaderror":["读取数据失败 请检查网络","讀取數據失敗 請檢查網絡","Failed to read data, please check the network"],"notice.duplicateloading":["开始读取重复球员数据 请稍等","開始讀取重複球員數據 請稍等","Start reading duplicate player data, please wait"],"notice.quicksearch":["使用快捷添加 直接沿用上次配置搜索球员","使用快捷增加球員 直接沿用上次配置搜索球員","Use the shortcut to add, directly follow the last configuration to search for players"],"notice.appointloading":["开始读取指定评分球员 请稍等","開始讀取指定評分球員 請稍等","Start reading assigned rating player please wait "],"notice.noduplicate":["已无重复球员","已經沒有重複球員","no duplicate player"],"notice.quickauction":["球员将按照最低售价作为即买价挂出","球員將按最低價格列在轉會市場上","Players will be listed at the lowest selling price as an immediate purchase price"],"task.player":["球员","球員","Player"],"task.pack":["组合包","組合包","Pack"],"task.added":["今日新增：","今日新增：","Added today "],"task.noadded":["今日无新增","今日沒有新增","No new additions today"],"task.new":["新","新","New"],"task.expire":["即将到期","即將過期","Expiring"],"task.nodata":["无数据请过段时间重新进入WEBAPP再查看","沒有數據請過段時間重新進入WEBAPP再查看","No data, please re-enter WEBAPP after a while to check"],"sbc.price":["造价预估：","製作價格：","Cost estimate:"],"sbc.topprice":["预估造价","製作價格","Estimate"],"sbc.topsquad":["阵容价值","球隊價格","Squad"],"sbc.like":["值得做：","贊成：","Thumbs Up："],"sbc.dislike":["不值得：","反對：","Thumbs Down："],"sbc.consult":["抄作业","參考方案","See Plan"],"sbc.count":["算评分","計算評分","Calculate Score"],"sbc.duplicates":["重复球员名单","重複球員名單","Duplicate Players List"],"sbc.qucikdupes":["重","重","D"],"sbc.appoint":["指定评分球员名单","指定評分球員名單","Assign Rating Players List"],"sbc.addduplicate":["添加重复球员","新增重複球員","Add Duplicate Players"],"sbc.swapduplicate":["替换为重复球员","交換為重複球員","Swap Duplicate Players"],"sbc.notduplicate":["无重复球员","沒有重複球員","No Duplicate Players"],"sbc.addquick":["快捷添加球员","快速新增球員","Quick Add Player"],"sbc.swapquick":["快捷替换球员","快速交換球員","Quick Swap Player"],"sbc.watchplayer":["查看球员","查看球員","Watch Player"],"uasreset.btntext":["重载名单","重新載入名單","Reload List"],"sbc.filtert":["筛选","篩選","Filter"],"sbc.filter0":["全部","全部","All"],"sbc.filter1":["新增","新增","New"],"sbc.filter2":["临期","即期","Expiring"],"sbc.filter3":["高评价","高評價","Approval"],"loadingclose.text":["数据载入 如卡顿点此关闭","數據載入中 如長時間未響應 請點擊此處關閉","If you encounter stuck, click here to close"],"quicklist.gotofutbin":["前往FUTBIN查看","前往FUTBIN查看","Go to FUTBIN"],"quicklist.auction":["按低价快速拍卖","使用最低價格列入轉會","Quick Auction at Low Price"],"pack.promo":["特殊球员","特殊球員","PROMO"],"emptylist.t":["处理后无符合条件球员","處理後無符合條件球員","No eligible players after processing"],"emptylist.c":["请改变条件或翻页查看","請改變條件或翻頁查看","Please change the criteria or flip the page to view"],"set.card.title":["球员卡信息","球員卡資訊","Player Card Information"],"set.card.pos":["额外位置","額外位置","Extra Position"],"set.card.lea":["所属联赛","所屬聯賽","Affiliated League"],"set.card.price":["球员价格","球員價格","Player Price"],"set.card.other":["其他属性","其他屬性","Other Attributes"],"set.card.club":["俱乐部内球员","俱樂部內球員","Club Players"],"set.card.low":["评分低价","評分低價","Low Rating Price"],"set.sbc.title":["SBC操作","SBC 操作","SBC Operations"],"set.sbc.top":["阵容顶部按钮","陣容頂部按鈕","Top Buttons"],"set.sbc.right":["阵容右侧按钮","陣容右側按鈕","Right-side Buttons"],"set.sbc.quick":["快捷添加球员","快速添加球員","Quick Add Players"],"set.sbc.duplicate":["重复球员填充","重複球員填充","Fill with Duplicate Players"],"set.sbc.records":["选项记录","選項記錄","Option Records"],"set.sbc.input":["信息输入检索","資訊輸入檢索","Information Input Search"],"set.info.title":["信息展示","資訊展示","Information Display"],"set.info.obj":["目标顶部显示","目標頂部顯示","Objective top display"],"set.info.sbc":["SBC顶部显示","SBC頂部顯示","SBC top display"],"set.info.sbcf":["SBC筛选","SBC篩選","SBC Filters"],"set.info.sbcs":["SBC子任务","SBC子任務","SBC Subtasks"],"set.info.pack":["球员包可开球员","球員包可開球員","Pack PROMO"],"set.info.auction":["拍卖紧凑显示","拍賣緊湊顯示","Compact Auction Display"],"set.info.squad":["阵容价值","陣容價值","Squad Value"],"set.style.title":["球员卡信息样式","球員卡資訊樣式","Player Card Information Style"],"set.style.new":["随品质变化","隨品質變化","Varies with Quality"],"set.style.old":["纯色样式","純色樣式","Solid Color Style"],"set.player.title":["选中球员操作","選中球員操作","Select Player Action"],"set.player.auction":["按低价快速拍卖","按低價快速拍賣","Quick Auction at Low Price"],"set.player.futbin":["前往FUTBIN查看","前往FUTBIN查看","Go to FUTBIN for Details"],"quicklist.getprice":["查询拍卖低价","查詢拍賣低價","Search for Auction Price"],"quicklist.getpricey":["刷新拍卖低价","重新整理拍賣低價","Refresh Auction Price"],"set.player.getprice":["查询拍卖低价","查詢拍賣低價","Search for Auction Price"],"quicklist.getpricelt":["最低价","最低價","Lowest price"],"quicklist.getpriceload":["读取中","讀取中","Loading"],"sbc.swaprating":["替换为同评分","替換為同評分","Replace with the same rating"],"sbc.squadfill":["AI做SBC(基于FUTBIN)","AI做SBC(基於FUTBIN)","AI Solution"],"notice.templateload":["读取FUTBIN方案并比价中 请稍后","讀取FUTBIN方案並比價中 請稍後","Reading FUTBIN squad and comparing prices. Please wait."],"notice.templateerror":["阵容保存失败 请重新尝试","陣容儲存失敗 請重新嘗試","Failed to save the squad. Please try again."],"notice.templatesuccess":["阵容填充成功","陣容填充成功","Squad Filled Successfully"],"notice.templatezero":["无可加载方案 请稍后再试","無可載入的方案 請稍後再試","Squad failed to save, please try again"],"set.sbc.template":["FUTBIN方案填充","FUTBIN方案填充","FUTBIN squad autofill"],"notice.marketsetmax":["已修改优化搜索信息可直接搜索 如无结果请返回调整参数","已修改優化搜尋資訊，可直接搜尋。如無結果，請返回調整參數。","Optimizations have been made to the search information. You can now search directly. If there are no results, please return and adjust the parameters."],"set.sbc.market":["假想球员拍卖搜索优化","假想球员拍賣搜尋優化","Fantasy Player Auction Search Optimization"],"notice.auctionsuccess":["%1 挂牌 %2 成功","%1 掛牌 %2 成功","%1 listed %2 successfully."],"notice.auctionnoplayer":["%1 没有找到球员","%1 沒有找到球員","%1 player not found."],"notice.auctionlimits":["%1 FUTBIN价格超出球员限价","%1 FUTBIN價格超出球員限價","The FUTBIN price for %1 exceeds player limit."],"notice.auctionmax":["已达到拍卖行上限","已達到拍賣行上限","Auction house limit reached."],"losa.all":["全选","全選","Select All"],"losa.select":["已选球员","已選球員","Selected"],"losa.price":["共计可售","共計可售","Total"],"loas.button":["拍卖所选球员","拍賣所選球員","Auction Selected Players"],"loas.popupt":["球员批量挂拍卖提示","球員批量掛拍賣提示","Bulk Auction Listing Reminder for Players"],"loas.popupm":["已选择本列表中 %1 个球员拍卖价格大致为 %2 ，请点击确认开始陆续上架拍卖，途中可点击加载图标下文字取消。","已選擇本列表中 %1 個球員拍賣價格大致為 %2 ，請點擊確認開始陸續上架拍賣，途中可點擊加載圖標下文字取消。","You have selected approximately %1 players from this list, with an estimated auction price of %2. Please click confirm to start listing them for auction one by one. You can click the text below the loading icon to cancel during the process."],"loas.variation":["本版块批量拍卖选择球员调整为 %1 个","本版塊批量拍賣選擇球員調整為 %1 個","Batch auction selection of players in this section is adjusted to %1"],"loas.start":["程序开始批量售卖球员 预计耗费 %1 秒","程式開始批量售賣球員 預計耗費 %1 秒","The program starts to sell players in bulk, which is expected to take %1 of seconds"],"loadingclose.template1":["读取FUTBIN阵容中 点此可结束程序","讀取FUTBIN陣容中 點此可結束程式","Read the FUTBIN lineup, click here to end the program"],"loadingclose.template2":["正在读取方案 %1 阵容 剩余 %2 方案 点此可结束程序","正在讀取和比對方案 %1 陣容 剩餘 %2 方案 點此可結束程式","Reading and comparing plan %1 lineup, remaining %2 plans, click here to end the program"],"loadingclose.loas":["正在挂牌第 %1 个球员 剩余 %2 个 点此可结束程序","正在掛牌第 %1 個球員 剩餘 %2 個 點此可結束程式","The %1 players are being listed, and the remaining %2, click here to end the program"],"set.player.loas":["批量拍卖球员","批量拍賣球員","Bulk Auction Players"],"notice.squaderror":["阵容位置匹配失败 请联系解决","陣容位置匹配失敗 請聯絡解決","Lineup position matching failed, please contact to solve it."],"set.getdoc":["查看设置说明","檢視設定說明","View setup instructions"],"builder.league":["排除指定联赛球员","排除指定聯賽球員","Exclude designated league"],"builder.rare":["排除周最佳球员","排除周最佳球員","Exclude TOTW"],"notice.phoneloas":["请注意手机端挂牌后需重新进入拍卖清单才会刷新显示。","請注意手機端掛牌後需重新進入拍賣清單才會重新整理顯示。","Please note that after listing on the mobile terminal, you need to re-enter the auction list before refreshing the display."],"notice.builder":["通过排除后球员数量已不足以填充阵容，如需要请调整条件再次搜索。","通過排除後球員數量已不足以填充陣容，如需要請調整條件再次搜尋。","The number of players after exclusion is no longer sufficient to fill the lineup, please adjust the criteria to search again if necessary."],"notice.conceptdiff":["发现所购买的假想球员有多个版本，已经将非搜索版本的亮度。","發現所購買的假想球員有多個版本，已經將非搜尋版本的亮度。","Found that there are multiple versions of the purchased hypothetical player, the brightness of the non-searched version has been added."],"notice.packback":["已无未分配球员 自动返回","已無未分配球員 自動返回","No unassigned players, automatically return"],"sbc.swapchem":["替换为默契球员","替換為默契球員","Swap Chemistry Players"],"notice.notchemplayer":["俱乐部中没有满足当前默契需求的球员","俱樂部中沒有滿足當前默契需求的球員","there are no players in the club who meet the current chemistry needs"],"sbc.addchem":["添加默契球员","新增默契球員","Add Chemistry Players"],"notice.chemplayerloading":["开始读取指定评分球员 请稍等","開始讀取滿足默契球員 請稍等","Start reading Meet chemistry players, please wait"],"sbc.chemplayer":["默契球员名单","默契球員名單","Chemistry Players List"],"notice.noplayer":["已无指定条件球员","已無指定條件球員","No conditions specified player"],"squadback.popupt":["阵容回退提示","陣容回退提示","Squad Back Tip"],"squadback.popupm":["请注意，阵容回退后将无法再返回到此阵容，还可回退 %1 次。","請注意，陣容回退後將無法再返回到此陣容，還可回退 %1 次。","Note that the squad will no longer be able to return to this lineup after retreating, and can go back %1 times."],"sbc.squadback":["退","退","B"],"notice.nosquad":["已无操作记录 无法法回退","已無操作記錄 無法法回退","There is no operation record and cannot be rolled back"],"tile.settitle":["插件配置","外掛配置","Plugin configuration"],"tile.settext":["配置FSU功能开关","配置FSU功能開關","Configure FSU function switch"],"tile.infotitle":["使用说明","使用說明","Instructions for use"],"tile.infotext":["查看插件使用说明","檢視外掛使用說明","View plugin instructions"],"tile.fbtitle":["问题反馈","問題反饋","Problem feedback"],"tile.fbtext":["有问题请尽快反馈","有問題請儘快反饋","If you have any questions, please give feedback ASAP."],"set.sbc.cback":["假想球员购买自动分配","假想球员购买自动分配","Hypothetical player purchase automatic distribution"],"set.sbc.sback":["阵容回退","阵容回退","lineup fallback"],"swaptradable.btntext":["批量交换可交易","批量交换可交易","Bulk exchange tradable"],"swaptradable.popupt":["批量交换队内可交易球员","批量交换队内可交易球员","Batch exchange of tradable players within the team"],"swaptradable.popupm":["点击确定可将未分配中球员与队内可交易球员交换，共可交换 %1 个。","点击确定可将未分配中球员与队内可交易球员交换，共可交换 %1 个。","Click OK to exchange unassigned players with tradable players in the team, for a total of %1 players."],"notice.swaptsuccess":["%1 交换成功","%1 交换成功","%1 exchange successful"],"notice.swapterror":["%1 交换失败 程序暂停","%1 交换失败 程序暂停","%1 exchange failed, program paused"],"loadingclose.swapt":["正在交换第 %1 个球员 剩余 %2 个","正在交换第 %1 个球员 剩余 %2 个","Swap %1 player,%2 remaining"],"set.player.swapt":["未分配批量交换可交易","未分配批量交換可交易","Unallocated Bulk Exchange Tradable"],"set.sbc.dupfill":["重复球员一键全部献祭","重復球員一鍵全部獻祭","Repeat player fill squad"],"dupfill.btntext":["重复球员一键全部献祭","重復球員一鍵全部獻祭","Repeat player fill squad"],"autofill.btntext":["一键填充(优先重复)","一鍵填充(優先重複)","One-click fill (priority repeat)"],"set.sbc.icount":["搜索球员数量显示","搜尋球員數量顯示","Search number of players displayed"],"set.sbc.autofill":["一键填充球员","一鍵填充球員","One-click fill player"],"completion.btntext":["一键补全阵容","一鍵補全陣容","One-click complete lineup"],"set.sbc.completion":["一键补全阵容","一鍵補全陣容","One-click complete lineup"],"notice.setsuccess":["设置保存成功","設定儲存成功","Settings saved successfully"],"notice.seterror":["设置保存失败 请检查","設定儲存失敗 請檢查","Settings failed to save, please check"],"shieldlea.btntext":["排除联赛设置","排除聯賽設定","Exclude league settings"],"shieldlea.popupm":["默认排除五大联赛，如想调整请从使用说明中找到对应的联赛ID填入。多个ID使用英文逗号分割，否则保存失败。为空恢复为默认设置","預設排除五大聯賽，如想調整請從使用說明中找到對應的聯賽ID填入。多個ID使用英文逗號分割，否則儲存失敗。為空恢復為預設設定","Five major leagues are excluded by default. If you want to adjust, please find the corresponding league ID from the instructions and fill it in. Multiple IDs are separated by English commas, otherwise the save fails. Empty reverts to default settings"],"shieldlea.placeholder":["请输入联赛数字ID和英文逗号","請輸入聯賽數字ID和英文逗號","Please enter the league number ID and English comma"],"squadcmpl.btntext":["阵容补全(优先重复)","陣容補全(優先重複)","Squad completion (priority repeat)"],"squadcmpl.popupt":["阵容补全提示","陣容補全提示","Squad Completion Tips"],"squadcmpl.popupm":["阵容补全即会将假想球员替换为同评分球员、空位替换为指定评分球员，优先重复球员，但此处不会考虑默契或版本，请检查后再提交。<br>空位需评分和英文逗号组合，一个评分一个位置，可通过FUTCD计算评分后复制方案填入。","陣容補全即會將假想球員替換為同評分球員、空位替換為指定評分球員，優先重複球員，但此處不會考慮默契或版本，請檢查後再提交。<br>空位需評分和英文逗號組合，一個評分一個位置，可通過FUTCD計算評分後複製方案填入。","Squad completion will replace imaginary players with players with the same rating, and replace vacancies with designated rating players, giving priority to duplicate players, but chemistry or version will not be considered here, please check before submitting. <br> Vacancies need to be scored and a combination of English commas, one score and one position, which can be filled in by FUTCD after calculating the score and copying the scheme."],"squadcmpl.placeholder":["请填入评分和英文逗号组合","請填入評分和英文逗號組合","Please fill in the combination of ratings and English commas"],"squadcmpl.placeholder_zero":["无需填充空位","無需填充空位","No need to fill gaps"],"squadcmpl.error":["输入填充评分格式不匹配 无法填充指定评分","輸入填充評分格式不匹配 無法填充指定評分","The input fill score format does not match, and the specified score cannot be filled"],"set.sbc.squadcmpl":["阵容补全功能","陣容補全功能","Squad completion"],"notice.ldatasuccess":["球员数据已全部加载成功","球員資料已全部載入成功","All player data has been loaded successfully"],"notice.ldataerror":["球员数据加载失败 请重刷新页面加载 否则核心功能无法使用","球員資料載入失敗 請重重新整理頁面載入 否則核心功能無法使用","Player data loading failed, please refresh the page to load, otherwise the core functions cannot be used"],"loadingclose.ldata":["正在读取球员数据（%1/%2）请耐心等待","正在讀取球員資料（%1/%2）請耐心等待","Reading player data (%1/%2) please be patient"],"uatoclub.btntext":["直接发送%1个至俱乐部","直接傳送%1個至俱樂部","Send %1 directly to the club"],"uatoclub.success":["直接发送俱乐部成功","直接傳送俱樂部成功","Send directly to the club successfully"],"uatoclub.error":["直接发送俱乐部失败 请进入页面自行分配","直接傳送俱樂部失敗 請進入頁面自行分配","Failed to send the club directly, please enter the page to assign it yourself."]},t={priceBtn:'<button class="flat pagination fsu-getprice" id="getprice">{price.btntext}</button>',priceBtn2:'<button class="btn-standard section-header-btn mini call-to-action fsu-getprice" id="getprice">{price.btntext}</button>',taskBar:'<div class="fsu-task-bar">{Number}</div>',sbcInfo:'<div class="fsu-sbc-info"><div class="currency-coins">{sbc.price}{price}</div><div><span>{sbc.like}{up}</span><span>{sbc.dislike}{down}</span></div></div>',consultBtn:'<a href="https://www.futbin.com/squad-building-challenges/ALL/{sbcId}" target="_blank" class="fsu-consult fsu-sbcButton">{sbc.consult}</a>',countBtn:'<a id="goToCount" href="javascript:void(0)" class="fsu-count">{sbc.count}</a>',searchInput:'<input type="text" class="fsu-input" placeholder="{text}" maxlength="50">',uasBtn:'<button class="btn-standard section-header-btn mini call-to-action fsu-getprice" id="uasreset">{uasreset.btntext}</button>'},r.base.sytle=".tns-horizontal.tns-subpixel>.tns-item{position: relative;}button.notevents{pointer-events: none;color: #a4a9b4;}.btn-standard.section-header-btn.mini.call-to-action.fsu-getprice{margin-left: 1rem;}.btn-standard.section-header-btn.mini.call-to-action.fsu-getprice:hover{background-color:#e9dfcd}.view-modal-container.form-modal header .fsu-getprice{position: absolute;top: .5rem;left: 0;height: 2rem;line-height: 2rem;}.fsu-task-bar{position: absolute;right: .2rem;top: 0;}.ut-objective-entry-view--title span.task-new{padding-left: 0.5rem;padding-right: 0.8rem;background-color: #ef6405;margin-right: 0.2rem;}.ut-sbc-set-tile-view .tileHeader span.task-new{padding-left: 0.3rem;padding-right: 0.8rem;background-color: #ef6405;margin-right: 0.2rem;}.ut-sbc-set-tile-view.production-tagged .tileHeader::before{display:none;}.fsu-task{display: flex;justify-content: space-between;padding: 0.5rem;background-color: #ef6405;}.fsu-task.no{background-color: #008000;}.task-expire{background-color: #008000;height: 2rem;line-height: 2rem;text-align: center;}a.header_explain{color: #a2a2a2;text-decoration: none;line-height: 3rem;}a.header_explain:hover{color: #ffffff;}.ut-fifa-header-view{display: flex;justify-content: space-between;}    .fsu-loading-close{display: none;position: absolute;bottom: 40%;z-index: 999;}.fsu-loading .fsu-loading-close{display: block;}          .fsu-task-bar-favorite{background-color: rgb(255,86,48);right: 0.2rem;top: 2px;color: #ffffff;padding: 0 6px;border-radius: 4px;line-height: 1.2rem;position: absolute;}                                                     .fsu-sbc-info{padding: 0.5rem;background-color: #ef6405;display: flex;font-family: UltimateTeamCondensed,sans-serif;justify-content: space-between;font-size: 1rem;}.fsu-sbc-info div{width: 50%;}.fsu-sbc-info div:last-child{display: flex;justify-content: space-around;}.fsu-sbc-info .currency-coins::after{font-size:16px}                .rewards-footer li{position: relative;}.fsu-sbc-vplayer {position: absolute;bottom: .25rem;right:0;background-color: #8A6E2C;padding: .5rem;color: #15191d;line-height: 1rem;font-size: 16px;}.fsu-sbc-vplayer:hover{background-color: #f6b803;}                 @media screen and (min-width:1280px) and (max-width:1441px) {.ut-split-view {padding:0;}.ut-split-view>.ut-content {max-height:100%;}}            .fsu-squad-pBox{display:flex}.fsu-squad-pWrap{margin:.5em}.fsu-squad-pTitle{width:100%;word-break:keep-all;font-size:.8em;display:block;overflow:hidden;text-overflow:ellipsis;text-transform:uppercase;white-space:nowrap}.fsu-squad-pValue{font-family:UltimateTeamCondensed,sans-serif;font-weight:400;font-size:1.125em;text-overflow:ellipsis;white-space:nowrap;line-height: 1.8rem;}.fsu-squad-pValue.currency-coins::after{font-size:1rem;margin-left:.2em !important;margin-top:-.2em !important}.fsu-squad-pTitle .plus{color:#36b84b;padding-left:.1rem}.fsu-squad-pTitle .minus{color:#d21433;padding-left:.1rem}         li.with-icon.hide {display: none;}                      .fsu-input{border: 0 !important;background-color: rgba(0,0,0,0) !important;padding-left: 0 !important;font-family: UltimateTeamCondensed,sans-serif;font-size: 1em;color: #f8eede;}                  .fsu-quick{position:absolute;top:100%;width:100%;display:flex;align-items:center;font-family:UltimateTeam,sans-serif;justify-content:center;margin-top:.2rem}.fsu-quick.top .fsu-quick-list{display:flex;align-items:center}.fsu-quick-list .im{height:1.8rem;line-height:1.8rem;cursor:pointer;background-color:#2b3540;font-family:UltimateTeam,sans-serif;border-radius:4px;padding:0 .2rem;font-size:1rem;font-weight:900;color:#f2f2f2;overflow: hidden;}.fsu-quick-list .im:hover{background-color:#394754}.fsu-quick-list.other .im{background-color:#f8eede;color:#ef6405;font-weight:500;margin-left:.3rem;text-align:center;}.fsu-quick-list.other .im:hover{background-color:#f5efe6}.fsu-quick-list .im span{font-size:.8rem;font-weight:300;color:#a4a9b4}.fsu-quick-list.left .im{margin-right:.3rem}.fsu-quick-list.right .im{margin-left:.3rem}.fsu-quick-inr{font-size:.8rem;margin:0 .3rem}.fsu-quick.right{position:absolute;top:50%;width:2rem;display:block;right:0%;z-index:3;-webkit-transform:translateY(-50%) !important;transform:translateY(-50%) !important}.fsu-quick.right .fsu-quick-list .im{width:1.4rem;margin-bottom:.2rem;text-align:center}.entityContainer>.name.untradeable{color:#f6b803}        .btn-standard.section-header-btn.mini.call-to-action.fsu-uasreset{margin-left: 1rem;}                                      .fsu-promo-box{flex:auto;display:flex;justify-content:flex-end}.landscape button.currency.fsu-promo{margin-top:-.25rem;text-align:justify;padding:.25rem .5rem;width:6.6rem;color:#f2f2f2;background-color:#556c95}.landscape button.currency.fsu-promo:hover{background-color:#ef6405}.landscape button.currency.fsu-promo .text{font-size:2rem;font-weight:600;height:2rem;line-height:2rem}.landscape button.currency.fsu-promo .subtext{font-size:.6rem;line-height:1rem;font-weight:600;text-transform:uppercase}.landscape button.currency.fsu-promo::after{background-image:url(https://www.ea.com/fifa/ultimate-team/web-app/images/branding/settings.png) !important;background-position:center;background-repeat:no-repeat;background-size:100%;content:'';display:inline-block;top:-.8rem;vertical-align:middle;height:5rem;margin-top:0;position:absolute;width:5rem;right:-1.2rem}                           .fsu-cards-pos,.fsu-cards-attr,.fsu-cards-lea-small,.fsu-cards-lea-large,.fsu-cards-price{position:absolute;z-index:2;font-family:UltimateTeamCondensed,sans-serif;font-weight:300;text-align:center;width:1.6rem;top:25%}.fsu-cards-pos{right:0}.fsu-cards-pos>div,div:not(.small)>.fsu-cards-attr>div{border:1px solid;border-color:inherit;background-color:#13151d;line-height:100%;border-radius:5px;font-size:.875rem;margin-bottom:4px}.small>.fsu-cards-pos{width:1.4rem;top:30%}.small~.fsu-cards-pos{width:1.4rem;top:30%;right:-10px}.small>.fsu-cards-pos>div,.small~.fsu-cards-pos>div,.small~.fsu-cards-attr>div{border-radius:3px !important;font-size:0.75rem !important;margin-bottom:2px !important}div:not(.small)>.fsu-cards-attr{left:0}.small~.fsu-cards-attr{width:1.4rem;top:30%;left:-10px !important}.small>.fsu-cards-attr{width:88%;display:flex;justify-content:space-between;align-items:center;bottom:0px;top:auto;z-index:0;background-color:#13151d;font-size:.875rem;left:4%;padding:0 2%;border-radius:4px}.fsu-cards-lea-small{bottom:8%;height:16%;font-size:70%;width:100%;top:auto;font-weight:500;line-height:1}.fsu-cards-lea-small~.playStyle,.ut-squad-pitch-view:not(.sbc) .fsu-cards-lea-small{display:none !important}.specials .fsu-cards-lea-small{bottom:10%}.fsu-cards-lea-large,.fsu-cards-price{width:auto !important;padding:0 0.2rem;left:50%;-webkit-transform:translateX(-50%) !important;transform:translateX(-50%) !important;white-space:nowrap;background-color:#13151d;border:1px solid;border-radius:5px}.fsu-cards-lea-large{bottom:0;top:auto !important}.fsu-cards-price{top:0 !important}.fsu-cards-price::after{font-size:1rem}.ut-squad-pitch-view:not(.sbc) .fsu-cards-lea-small~.playStyle{display:block !important}.fsu-price-box{font-family:UltimateTeamCondensed,sans-serif}.fsu-price-box.right{position:absolute;right:0%;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);display:flex;align-items:center}.fsu-price-box.right>div{background-color:#36b84b33;padding:0.5rem;text-align:center;border-radius:4px;margin-top:0;display:block}.fsu-price-box.right>div .title{color:#a4a9b4;padding:0;font-size:1rem;line-height:1rem}.fsu-price-box.right>div .title span.plus{color:#36b84b;font-weight:500;padding-left:.2rem}.fsu-price-box.right>div .title span.minus{color:#d21433;font-weight:500;padding-left:.2rem}.fsu-price-box.right>div .value{font-size:1.2rem;margin-top:.5rem;line-height:1.2rem}.fsu-price-val[data-value='0']{display:none !important}.fsu-price-val .currency-coins::after{font-size:1rem;margin-top:-3px}.fsu-price-box.bottom{padding-left:6.3rem;margin:.2rem 0rem}.fsu-price-box.bottom>div{display:flex;align-items:center;font-size:0.9375rem}.fsu-price-box.bottom>div .title{color:#a4a9b4;margin-right:.2rem}.fsu-price-box.bottom .fsu-price-val .currency-coins::after{font-size:inherit}.fsu-price-box.trf{position:absolute;left:54%;margin-top:.2rem}.fsu-price-box.trf .fsu-price-val{display:flex;align-items:center;background-color:#36b84b33;text-align:center;border-radius:4px;padding:0 .3rem;height:20px}.fsu-price-box.trf .fsu-price-val .title{font-size:.875rem;margin-right:.2rem}.fsu-price-box.trf .fsu-price-val .currency-coins::after{margin-top:-2px}.fsu-price-box.top{position:absolute;right:0%;top:8%;display:flex;align-items:center}.fsu-price-box.top>div{display:flex;align-items:center;background-color:#36b84b33;padding:.1rem 0.5rem;text-align:center;border-radius:4px}.fsu-price-box.top>div .title{font-size:0.875rem;margin-right:0.5rem}.fsu-price-last{margin-right:.5rem}.fsu-player-other{display:flex;margin-top:.2rem;font-family:UltimateTeamCondensed,sans-serif;font-size:1rem;line-height:1rem}.fsu-price-box.top+.fsu-player-other{margin-top:.4rem}.fsu-player-other>div{background-color:#3B4754;color:#a4a9b4;padding:0.1rem 0.5rem;text-align:center;border-radius:20px;font-size:0.9rem;margin-right:0.5rem;white-space: nowrap;}.fsu-player-other>div.swap{background-color:#36b84b;color:#201e20}.fsu-player-other>div.not{background-color:#8A6E2C;color:#201e20}.fsu-player-other>div.yes{background-color:#264A35;color:#201e20}.large.player+.fsu-player-other{justify-content:center}.large.player+.fsu-player-other>div{margin-right:0rem}.fsu-player-other .currency-coins::after{font-size:.875rem;margin-top:-1px;margin-left:2px !important}@media (max-width:1130px){.has-auction-data .fsu-player-other{margin-top:5rem !important}.has-auction-data .fsu-price-box.trf{margin-top:5rem !important;left:auto;right:3%}}                       .phone .fsu-sbc-info{font-size:.875rem}.phone .fsu-task{display:block;font-size:.875rem}.phone .fsu-price-box.right > div .value{font-size:1rem;margin-top:.2rem}.phone .fsu-price-box.right > div .title{font-size:.875rem}.phone button.currency.fsu-promo{line-height:1.6rem;padding:0 .3rem;height:3rem}.phone button.currency.fsu-promo .subtext{display:block;font-size:.6rem;line-height:1rem;text-transform:uppercase}.phone .fsu-player-other > div{font-size:0.6rem}.phone .small.player .fsu-cards-price{font-size:.6rem}.phone .small.player .fsu-cards-price{font-size:.6rem}.phone .small.player .fsu-cards-price::after{font-size:.875rem}.phone .fsu-cards.fsu-cards-attr{font-size:.6rem}.phone .fsu-quick-list .im{font-size:.875rem}        .fsu-cards-loan{left:auto;right:5% !important;top:72% !important;line-height:1.2rem !important;width:1rem !important;height:1rem !important;box-shadow:0 1px 3px #000 !important}.fsu-cards-chem{right:auto;left:5% !important;top:72% !important;line-height:.9rem !important;width:1rem !important;height:1rem !important;box-shadow:0 1px 3px #000 !important}.large.player .fsu-cards-loan{line-height:1.7rem !important;width:1.5rem !important;height:1.5rem !important;font-size:1.2rem !important;top:82% !important}                                      .ut-pinned-item .listFUTItem.has-auction-data .fsu-player-other{margin-top:0 !important;top:.8rem;right:.2rem;position:absolute;z-index:2}        .fsu-sbcfilter-box{align-items:center;background-color:#394754;display:flex;justify-content:center;padding:1rem;z-index:1}.fsu-sbcfilter-option{align-items:center;box-sizing:border-box;display:flex;flex:1;max-width:300px}.fsu-sbcfilter-option .ut-drop-down-control{margin-left:1rem;flex:1}             .fsu-cards-pos.old>div,div:not(.small)>.fsu-cards-attr.old>div{background-color:#0040A6}.small.player .fsu-price-box{font-size:.875rem}.large.player .fsu-price-box{font-size:1rem}.fsu-price-box.old{background-color:#0f1417;color:#a4a9b4;border:0}.small>.fsu-cards-attr.old{background-color:#0040A6}                         .fsu-setbox{display: grid;grid-template-columns: repeat(3, minmax(0, 1fr));}.phone .fsu-setbox{display: grid;grid-template-columns: repeat(1, minmax(0, 1fr));}             .fsu-compact{display:grid;grid-template-columns:repeat(2,minmax(0,1fr))}.fsu-compact > .listFUTItem.selected > .has-tap-callback{background-color:#2c319b8f}.fsu-compact > .listFUTItem.selected > .has-tap-callback::before{display:none}.fsu-compact > .listFUTItem .entityContainer{width:100%}.fsu-compact > .listFUTItem .player-stats-data-component{width:44%}.fsu-compact > .listFUTItem .player-stats-data-component ul{display:grid;grid-template-columns:repeat(3,minmax(0,1fr))}.fsu-compact > .listFUTItem .player-stats-data-component ul li{padding:0;margin-top:0.2rem}.fsu-compact > .listFUTItem .auction{display:flex;width:46%;right:0;top:2.7rem}                     .fsu-akb .ut-toggle-cell-view>.ut-toggle-control{width:0.75rem;min-width:0.75rem}.fsu-akb .ut-toggle-cell-view>.ut-toggle-control .ut-toggle-control--track{height:2.5rem}.fsu-akb .ut-toggle-cell-view>.ut-toggle-control .ut-toggle-control--grip{left:0 !important}.fsu-akb .ut-toggle-cell-view>.ut-toggle-control:not(.toggled) .ut-toggle-control--grip{top:calc(100% - 1.5rem)}.fsu-akb .ut-toggle-cell-view>.ut-toggle-control .ut-toggle-control--grip,.fsu-akb-title .ut-toggle-cell-view>.ut-toggle-control .ut-toggle-control--grip{font-family:UltimateTeam-Icons,sans-serif;font-style:normal;font-variant:normal;font-weight:400;text-transform:none;flex-shrink:0;font-size:1em;text-decoration:none;text-align:center;line-height:1.5rem;transition:color .3s,bottom .3s,top .3s}.fsu-akb .ut-toggle-cell-view>.ut-toggle-control .ut-toggle-control--grip::before,.fsu-akb-title .ut-toggle-cell-view>.ut-toggle-control .ut-toggle-control--grip::before{content:'\\E026';color:#3a4755}.fsu-akb .ut-toggle-cell-view>.ut-toggle-control.toggled:not(.disabled) .ut-toggle-control--grip::before,.fsu-akb-title .ut-toggle-cell-view>.ut-toggle-control.toggled:not(.disabled) .ut-toggle-control--grip::before{content:'\\E009';color:#36b94b}.fsu-akb .ut-toggle-cell-view>.ut-toggle-control.toggled:not(.disabled) .ut-toggle-control--track,.fsu-akb-title .ut-toggle-cell-view>.ut-toggle-control.toggled:not(.disabled) .ut-toggle-control--track{background-color:#36b94b}.fsu-akb .ut-toggle-cell-view>.ut-toggle-cell-view--label{display:none}@media (max-width:1130px){.fsu-akb.listFUTItem .rowContent::before{display:none !important}.fsu-akb .entityContainer{width:98%;padding:.25rem .25rem .25rem 0}.fsu-akb.listFUTItem .auction{right:0 !important;left:calc(108px + 3rem) !important}.fsu-akb .ut-toggle-cell-view{padding:.3rem}}.fsu-akb-title{align-items:center;background-color:#2b3540;display:flex;justify-content:space-between;padding:.75rem .5rem;border-top:solid 1px #556c95}.fsu-akb-left{display:flex;align-items:center}.fsu-akb-title .ut-toggle-cell-view>.ut-toggle-control .ut-toggle-control--grip{transition:color .3s,left .3s,right .3s}.fsu-akb-left>div{padding:0 .675rem 0 0}.fsu-akb-left>div:last-child{padding-right:0}.btn-standard.mini.fsu-reward-but{height:2rem;line-height:2rem;position:absolute;top:.2rem;left:50%;transform:translateX(-50%)}.btn-standard.mini.fsu-reward-but.pcr{bottom:1.9rem;top:auto}           .btn-standard.mini.fsu-pickspc{line-height:2rem;height:2rem;margin:.5rem auto 0 auto}.ut-image-button-control.back-btn.fsu-picksback{height:100%;width:3rem;position:absolute;left:0;font-size:1.6rem}                       .fsu-fcount{position:absolute;right:0.5rem;height:1.4rem;top:.8rem;line-height:1.5rem;padding:0 .4rem;border-radius:.2rem;z-index:1;background-color: #264A35;}";const l={2012:"中超",61:"英乙",60:"英甲",14:"英冠",13:"英超",2208:"英丙",2149:"印超",32:"意乙",31:"意甲",54:"西乙",53:"西甲",68:"土超",50:"苏超",308:"葡超",39:"美职联",17:"法乙",16:"法甲",20:"德乙",19:"德甲",2076:"德丙",2118:"传奇",353:"阿甲",10:"荷甲",10010:"荷乙"};i.view={card:UTPlayerItemView.prototype.renderItem,squad:UTBaseSquadSplitViewController.prototype.viewDidAppear,unassigned:UTUnassignedItemsViewController.prototype._renderView,pack:UTStorePackDetailsView.prototype._generate,build:UTSquadBuilderViewController.prototype.viewDidAppear,market:UTMarketSearchView.prototype._generate,setting:UTAppSettingsView.prototype._generate,picks:UTPlayerPicksView.prototype.setItems,picksSelect:UTPlayerPicksView.prototype.selectPickOption,squadRating:UTSquadEntity.prototype._calculateRating},UTPlayerPicksView.prototype.setItems=function(t,o){i.view.picks.call(this,t,o);let s=this.playerPickViews,a=n.createButton(new UTImageButtonControl,"",(t=>{isPhone()?(this.hide(),this.__root.classList.add("fade-out"),e.current()._view._playerPicksTile._tapDetected(this)):this._superview._triggerActions(UTModalContainerView.Event.SHIELDPRESS)}),"back-btn fsu-picksback");this._fsuback=a,this.__title.parentNode.insertBefore(this._fsuback.__root,this.__title),s.length==t.length&&!isPhone()&&r.set.player_futbin&&t.forEach((function(e,t){if(e.isPlayer()){let r=n.createButton(new UTStandardButtonControl,u("quicklist.gotofutbin"),(e=>{n.openFutbinPlayerUrl(e)}),"call-to-action mini fsu-pickspc");r.__root.setAttribute("data-id",e.definitionId),r.__root.setAttribute("data-name",e._staticData.name),s[t]._fsuPlayer=r,s[t].__root.appendChild(s[t]._fsuPlayer.__root)}}))},UTPlayerPicksView.prototype.selectPickOption=function(e,t,o){if(i.view.picksSelect.call(this,e,t,o),t.isPlayer()&&isPhone()&&r.set.player_futbin){let e=n.createButton(new UTStandardButtonControl,u("quicklist.gotofutbin"),(e=>{n.openFutbinPlayerUrl(e)}),"call-to-action mini fsu-pickspc");e.__root.setAttribute("data-id",t.definitionId),e.__root.setAttribute("data-name",t._staticData.name),this.phoneLargeItem._fsuPlayer=e;let r=this.phoneLargeItem.__optionContainer.getElementsByClassName("fsu-pickspc");for(;r.length>0;)r[0].parentNode.removeChild(r[0]);this.phoneLargeItem.__optionContainer.appendChild(this.phoneLargeItem._fsuPlayer.__root)}},UTSquadBuilderViewController.prototype.viewDidAppear=function(){i.view.build.call(this),this.squad.isSBC()&&(this._view.getSortDropDown().setIndexById(3),this._view._fsuleague=n.createToggle(`${u("builder.league")}(${r.set.shield_league.length})`,(async e=>{r.build.league=e.getToggleState()})),this._view._fsuleague.toggle(r.build.league),this._view._searchOptions.__root.appendChild(this._view._fsuleague.__root),this._view._fsurare=n.createToggle(u("builder.rare"),(async e=>{r.build.rare=e.getToggleState()})),this._view._fsurare.toggle(r.build.rare),this._view._searchOptions.__root.appendChild(this._view._fsurare.__root))},UTPlayerItemView.prototype.renderItem=function(t,o){i.view.card.call(this,t,o),t.isValid()&&setTimeout((()=>{let i=1==r.set.card_style?"old":"new",s=o.getExpColorMap(t.getTier()),a=1==r.set.card_style?"rgb(0,64,166)":`rgb(${s.dividers.r},${s.dividers.g},${s.dividers.b})`,c=`rgb(${s.footer.r},${s.footer.g},${s.footer.b})`,d=document.createElement("div");d.classList.add("fsu-cards","fsu-cards-pos",i),d.style.borderColor=a,d.setAttribute("data-id",t.id),d.innerHTML=t.possiblePositions.filter((e=>e!==t.preferredPosition)).map((e=>"<div>"+UTLocalizationUtil.positionIdToName(e,services.Localization)+"</div>")).join(""),this._fsuCardPos=d;let f=["?","M","L","H"],p=document.createElement("div");p.classList.add("fsu-cards","fsu-cards-attr",i),p.style.borderColor=a,p.style.borderStyle="solid",p.style.borderWidth="1px",p.innerHTML=`<div>${t.isLeftFoot()?"L":"R"}</div><div>${f[t.getOffensiveWorkRate()+1]}/${f[t.getDefensiveWorkRate()+1]}</div><div>${t._skillMoves+1}/${t._weakFoot}</div>`,this._fsuCardAttr=p;let h=r.roster.data.hasOwnProperty(t.definitionId)?r.roster.data[t.definitionId].prices[r.base.platform].LCPrice:"0",v=document.createElement("div");v.classList.add("fsu-cards-price","fsu-price-box","fsu-price-val","fsu-cards","currency-coins",i),v.setAttribute("data-id",t.definitionId),v.setAttribute("data-value",h),v.style.borderColor=a,v.innerText=h,this._fsuCardPrice=v;let g=document.createElement("div");g.classList.add("fsu-price-box"),g.setAttribute("data-id",t.definitionId);let m="",y="";0!==t.lastSalePrice&&(m=`<div class="fsu-price-last"><div class="title">${u("price.last")}</div><div class="value currency-coins">${t.lastSalePrice.toLocaleString()}</div></div>`,y=h?n.priceLastDiff(h.replace(/,/g,""),t.lastSalePrice):"<span></span>"),g.innerHTML=`${m}<div class="fsu-price-val" data-value="${h}"><div class="title">${u("price.now")}${y}</div><div class="value currency-coins">${h}</div></div>`,this._fsuCardPriceBox=g;let b=r.base.price.hasOwnProperty(t.rating)?`<div class="fsu-other-low currency-coins">${u("duplicate.lowprice")}${Number(r.base.price[t.rating].p).toLocaleString()}</div>`:'<span class="fsu-other-low"></span>',w=-1,_=n.getItemBy(2,{definitionId:t.definitionId});1==_.length&&(w=_[0].untradeable?0:1),t.duplicateId?services.Item.itemDao.itemRepo.club.items._collection.hasOwnProperty(t.duplicateId)&&(w=services.Item.itemDao.itemRepo.club.items._collection[t.duplicateId].untradeable?0:1):r.roster.thousand.hasOwnProperty(t.definitionId)&&(w=r.roster.thousand[t.definitionId].untradeable?0:1);let S="";S=-1==w?0!==t.duplicateId||t.rating<=r.roster.thousand.lowest?`<div class="fsu-other-dup">${u("duplicate.nodata")}</div>`:`<div class="fsu-other-dup swap">${u("duplicate.swap")}</div>`:0==w?`<div class="fsu-other-dup not">${u("duplicate.not")}</div>`:`<div class="fsu-other-dup yes">${u("duplicate.yes")}</div>`;let E=document.createElement("div");E.classList.add("fsu-player-other","fsu-cards"),E.innerHTML=`${S}${b}`,this._fsuCardOther=E;let C=document.createElement("div");C.classList.add("fsu-cards-lea-large","fsu-cards"),C.style.borderColor=a,C.innerHTML=`${UTLocalizationUtil.leagueIdToName(t.leagueId,services.Localization)}`,this._fsuCardLeaL=C;let A=document.createElement("div");A.classList.add("fsu-cards-lea-small","fsu-cards"),A.style.color=c,A.innerHTML=`${"简体中文"==services.Localization.locale.name&&l.hasOwnProperty(t.leagueId)?l[t.leagueId]:UTLocalizationUtil.leagueIdToAbbr5(t.leagueId,services.Localization)}`,this._fsuCardLeaS=A;let O=t.id?t.id:t.definitionId;if(!this.__root)return;if(this.__root.querySelector("span[p-id]"))this.__root.querySelector("span[p-id]").setAttribute("p-id",O);else{let e=document.createElement("span");e.setAttribute("p-id",O),e.style.display="none",this._fsuCardPid=e,this.__root.append(this._fsuCardPid)}if(this.__root.parentNode.querySelectorAll(".fsu-cards").forEach((e=>e.remove())),this.__root.classList.contains("small")){let t=`span[p-id="${O}"]`,n={1:`.itemList > .listFUTItem.won ${t}`,2:`.itemList > .listFUTItem.has-auction-data ${t}`,3:`.itemList > .listFUTItem ${t}`,7:`.SearchResults .paginated-item-list .listFUTItem.has-auction-data ${t}`,5:`.ut-pinned-item.has-iterator .listFUTItem ${t}`,6:`.ut-pinned-item .listFUTItem ${t}`,8:`.ut-club-search-results-view .paginated-item-list .listFUTItem ${t}`,10:`.paginated-item-list .listFUTItem ${t}`,21:`.ut-squad-pitch-view.sbc ${t}`,22:`.ut-squad-pitch-view ${t}`,23:`.ut-squad-slot-dock-view.sbc ${t}`,24:`.ut-squad-slot-dock-view ${t}`,25:`.reward.small ${t}`},i=0;for(let e in n)if(document.querySelector(n[e])&&!document.querySelector(n[e]).parentNode.querySelectorAll(".fsu-cards").length){i=Number(e);break}if(7==i&&document.querySelector(".icon-transfer.selected")&&(i=4),8==i&&document.querySelector(".icon-club.selected")&&(i=9),2==i&&"UTWatchListViewController"==e.current().className&&(i=11),0!==i){if(-1!==[21,22].indexOf(i)?(this.__root.after(this._fsuCardPos),this._fsuCardAttr.style.borderWidth=0,this.__root.after(this._fsuCardAttr)):(this.__root.prepend(this._fsuCardPos),this._fsuCardAttr.children[0].remove(),this.__root.prepend(this._fsuCardAttr)),-1!==[5,7,21,22,23,24,25].indexOf(i))this.__root.prepend(this._fsuCardPrice);else{let e="right";11==i&&(e="trf"),4==i&&(e=r.set.info_auction?"trf":"top"),1!=i&&2!=i||(e="top"),this._fsuCardPriceBox.classList.add(e),4==i||11==i?(this._fsuCardPriceBox.querySelector(".fsu-price-last")&&(this._fsuCardPriceBox.querySelector(".fsu-price-last").remove(),this._fsuCardPriceBox.querySelector(".fsu-price-val .title span").remove()),4!=i||r.set.info_auction?this.__root.parentNode.append(this._fsuCardPriceBox):this.__root.after(this._fsuCardPriceBox)):6==i||8==i?this.__root.prepend(this._fsuCardPrice):this.__root.after(this._fsuCardPriceBox),4!=i&&6!=i||this._fsuCardOther.querySelector(".fsu-other-low").remove(),1!=i&&8!=i&&9!=i||this._fsuCardOther.querySelector(".fsu-other-dup").remove(),this.__root.parentNode.append(this._fsuCardOther)}22!==i&&24!==i&&this.__root.prepend(this._fsuCardLeaS)}}else this.__root.prepend(this._fsuCardPos),this._fsuCardAttr.style.borderWidth=0,this.__root.prepend(this._fsuCardAttr),this.__root.prepend(this._fsuCardPrice),this.__root.prepend(this._fsuCardLeaL),document.querySelector(`.player-pick-option  span[p-id="${O}"]`)&&(this._fsuCardOther.querySelector(".fsu-other-low").remove(),this.__root.after(this._fsuCardOther));r.set.card_pos||this._fsuCardPos.remove(),r.set.card_lea||(this._fsuCardLeaL.remove(),this._fsuCardLeaS.remove()),r.set.card_price||(this._fsuCardPriceBox.remove(),this._fsuCardPrice.remove()),r.set.card_other||this._fsuCardAttr.remove(),r.set.card_low||this._fsuCardOther.querySelector(".fsu-other-low")?.remove(),r.set.card_club||this._fsuCardOther.querySelector(".fsu-other-dup")?.remove();let I=this.__root.parentNode.querySelector(".ut-squad-slot-chemistry-points-view.item");I&&I.classList.add("fsu-cards-chem"),this.__loanInfoTab.classList.add("fsu-cards-loan")}),10)},i.plist={sectioned:UTSectionedItemListView.prototype.addItems,paginated:UTPaginatedItemListView.prototype.renderItems,storeReveal:UTStoreRevealModalListView.prototype.addItems,picks:UTPlayerPicksViewController.prototype.viewDidAppear,club:UTClubRepository.prototype.removeClubItem,squadSet:UTSquadEntity.prototype.setPlayers,squadGR:UTSquadEntity.prototype.getRating,squad:UTSquadOverviewViewController.prototype.viewDidAppear,clubSelectItem:UTSelectItemFromClubViewController.prototype.updateItemList,ut:UTUnassignedTileView.prototype.setNumberOfItems},UTSquadOverviewViewController.prototype.viewDidAppear=function(){i.plist.squad.call(this);let e=this._squad._players.map((function(e){if("player"==e._item.type&&!r.roster.data.hasOwnProperty(e._item.definitionId))return e._item.definitionId})).filter((e=>e>0));if(n.loadPlayerPrice(e),this._squad.isSBC()){let e=this._view,t=this._challenge.eligibilityRequirements,i=0,o=document.createElement("div");o.classList.add("fsu-quick","top"),e._fsuQuickTop=o,e._fsuRlist={};for(let r of t)r.kvPairs._collection.hasOwnProperty(19)&&(i=r.kvPairs._collection[19][0],e._fsuCount=n.createButton(new UTButtonControl,u("sbc.count"),(e=>{n.squadCount(e)}),"im"),e._fsuCount.__root.setAttribute("data-r",i)),r.kvPairs._collection.hasOwnProperty(35)&&(e._fsuConsult=n.createButton(new UTButtonControl,u("sbc.consult"),(e=>{n.squadConsult(e)}),"im"),e._fsuConsult.__root.setAttribute("data-id",this._challenge.id));if(0!==i){let t=[[1,6,3,1],[0,9,2,0]];for(let r in t){let o=0==r?"left":"right",s=document.createElement("div");s.classList.add("fsu-quick-list",o),e._fsuQuickTop.append(s),0==r&&e._fsuQuickTop.append(n.createDF('<div class="fsu-quick-inr">OR</div>'));for(let s in t[r])if(0!==t[r][s]){let a=i+1-Number(s),u=`t_${r}_${a}`,c=n.createButton(new UTButtonControl,"",(e=>{n.SBCSetRatingPlayers(e)}),"im");c.__root.innerHTML=`${a}<span>×${t[r][s]}</span>`,c.__root.setAttribute("data-r",a),e._fsuRlist[u]=c,e._fsuQuickTop.querySelector(`.${o}`).append(e._fsuRlist[u].__root)}}}e._summaryPanel.__root.append(e._fsuQuickTop);let s=0!==i?i:75,a=document.createElement("div");a.classList.add("fsu-quick","right"),a.innerHTML='<div class="fsu-quick-list"></div>',e._fsuQuickRight=a;let c=[];for(let e=1;e<11&&(n.getDedupPlayers(n.getItemBy(1,{rating:s-e}),this._squad.getPlayers()).length&&c.push(s-e),5!=c.length);e++);for(let e=0;e<99-s&&(n.getDedupPlayers(n.getItemBy(1,{rating:s+e}),this._squad.getPlayers()).length&&c.unshift(s+e),10!=c.length);e++);isPhone()&&this._squad.hasOwnProperty("_fsuOldSquad")||n.saveOldSquad(this._squad,!1,!0);for(let t of c){let r=`r_${t}`,i=n.createButton(new UTButtonControl,t,(e=>{n.SBCSetRatingPlayers(e)}),"im");i.__root.setAttribute("data-r",t),e._fsuRlist[r]=i,e._fsuQuickRight.querySelector(".fsu-quick-list").append(e._fsuRlist[r].__root)}let l=n.createButton(new UTButtonControl,u("sbc.qucikdupes"),(e=>{n.SBCSetRatingPlayers(e)}),"im");if(l.__root.setAttribute("data-r","d"),e._fsuRlist.r_d=l,e._fsuQuickRight.querySelector(".fsu-quick-list").append(e._fsuRlist.r_d.__root),r.set.sbc_sback){let t=n.createButton(new UTButtonControl,u("sbc.squadback"),(e=>{let t=e._challenge.squad._fsuOldSquadCount;t?n.popup(u("squadback.popupt"),u(["squadback.popupm",t]),(r=>{if(2===r){n.showLoader();let r=e._challenge.squad._fsuOldSquad[t-1];n.saveSquad(e._challenge,e._challenge.squad,r,[]),e._challenge.squad._fsuOldSquadCount--,e._challenge.squad._fsuOldSquad.pop()}})):n.notice("notice.nosquad",2)}),"im");t._challenge=this._challenge,e._fsuRlist.r_b=t,e._fsuQuickRight.querySelector(".fsu-quick-list").append(e._fsuRlist.r_b.__root)}e._summaryPanel.__root.after(e._fsuQuickRight),r.set.sbc_top||e._fsuQuickTop.remove(),r.set.sbc_top||e._fsuQuickRight.remove()}},n.popup=(e,t,n,r,i,o)=>{r||(r=[{labelEnum:enums.UIDialogOptions.OK},{labelEnum:enums.UIDialogOptions.CANCEL}]);let s=new EADialogViewController({dialogOptions:r,message:t,title:e,type:EADialogView.Type.MESSAGE});if(s.init(),s.modalDisplayDimensions.minWidth="300px",s.onExit.observe(this,(function(e,t){e.unobserve(this),i?n.call(this,t,s._fsuInput):n.call(this,t)})),gPopupClickShield.setActivePopup(s),i){let e=new UTTextInputControl;e.init(),i.constructor==Array?(i.length>0&&e.setPlaceholder(i[0]),i.length>1&&e.setValue(i[1])):i.constructor==String&&e.setPlaceholder(i),e.__root.style.marginTop="2rem",e.setInteractionState(o),s._fsuInput=e,s._view.__msg.appendChild(s._fsuInput.__root)}},n.wait=(e,t)=>{let n=Math.floor(Math.random()*(1e3*t-1e3*e+1))+1e3*e;return new Promise((e=>setTimeout(e,n)))},n.changeLoadingText=e=>{document.querySelector(".fsu-loading-close").innerHTML=u(e)},n.losAuctionSell=async e=>{e.setInteractionState(0),r.base.losauction=!0,n.showLoader();let t=e._parent._fsuAkbArray,i=e._parent._fsuAkbCurrent,o=0;n.notice(["loas.start",`${i}`,""+5*i],1);for(let s in t){if(!r.base.losauction)break;o++,n.changeLoadingText(["loadingclose.loas",`${o}`,""+(i-o)]),await n.playerToAuction(s,n.getCachePrice(t[s]._pId,1)),isPhone()&&(t[s].toggle(!1),e._parent.listRows[t[s]._l].hide(),e._parent._fsuAkbCurrent--,e._parent._fsuAkbNumber--,delete e._parent._fsuAkbArray[t[s]._id],n.losAuctionCount(e._parent)),await n.wait(2,4)}n.hideLoader(),r.base.losauction=!1,e.setInteractionState(e._parent._fsuAkbCurrent)},n.getCachePrice=(e,t)=>1==t?r.roster.data.hasOwnProperty(e)&&r.roster.data[e].prices[r.base.platform].LCPrice?Number(r.roster.data[e].prices[r.base.platform].LCPrice.replace(/,/g,"")):0:r.roster.data.hasOwnProperty(e),n.losAuctionCount=(e,t)=>{if(e.hasOwnProperty("_fsuAkbCurrent")&&e.hasOwnProperty("_fsuAkbNumber")&&e.hasOwnProperty("_fsuAkbArray")){let t=0;for(let r in e._fsuAkbArray){let i=n.getCachePrice(e._fsuAkbArray[r]._pId,1),o=n.getCachePrice(e._fsuAkbArray[r]._pId,2);t+=i,o?o&&0==i?(e._fsuAkbArray[r].setInteractionState(0),e._fsuAkbCurrent--,e._fsuAkbNumber--,delete e._fsuAkbArray[r]):e._fsuAkbArray[r].setInteractionState(1):e._fsuAkbArray[r].setInteractionState(0)}e._fsuAkb.querySelector(".fsu-akb-num").innerText=e._fsuAkbCurrent,e._fsuAkb.querySelector(".fsu-akb-max").innerText=e._fsuAkbNumber,e._fsuAkb.querySelector(".fsu-akb-price").innerText=t.toLocaleString(),t?(e._fsuAkbButton.setInteractionState(1),e._fsuAkbToggle.setInteractionState(1)):0==t&&e._fsuAkbButton.setInteractionState(0)}},UTPaginatedItemListView.prototype.renderItems=function(t){i.plist.paginated.call(this,t);let o=this.listRows.map((function(e){if("player"==e.data.type){if(!r.roster.data.hasOwnProperty(e.data.definitionId))return e.data.definitionId;{let t=n.getCachePrice(e.data.definitionId,1);t&&e.data.getAuctionData().buyNowPrice<=t&&(e.__auctionBuyValue.style.backgroundColor="#36b84b")}}})).filter(Boolean);n.loadPlayerPrice(o);let s=e.current(),a=!1;if(isPhone()?s.hasOwnProperty("_squadContext")&&s._squadContext&&s._squadContext.squad.isSBC()&&(a=!0):(s.hasOwnProperty("_rightController")&&s._rightController&&(s=e.right()._parentViewController),s.hasOwnProperty("_squad")&&s._squad.isSBC()&&(a=!0)),!isPhone()&&s.hasOwnProperty("_rightController")&&s._rightController&&(s=e.right()._parentViewController),a)if(s.getNavigationTitle()==services.Localization.localize("navbar.label.clubsearch")){let e=[];s._fsuFillArray.length&&s._currentController.searchCriteria.defId.length&&this.listRows.length&&(e=this.listRows.map((e=>{if(s._currentController.searchCriteria.defId.includes(e.data.definitionId))return e.data.definitionId;e.hide()})).filter(Boolean),e.length?this.__itemList.querySelector(".ut-no-results-view")&&this.__itemList.querySelector(".ut-no-results-view").remove():this.__itemList.prepend(n.createDF(`<div class="ut-no-results-view"><div class="contents"><span class="no-results-icon"></span><h2>${u("emptylist.t")}</h2><p>${u("emptylist.c")}</p></div></div>`)))}else{let e=this._targets._collection.rowselect[0].target;if(e.hasOwnProperty("pinnedItemView")&&e._list.__itemList.classList.remove("fsu-compact"),r.set.sbc_market&&e.hasOwnProperty("pinnedItemView")&&e.pinnedItemView&&e.pinnedItemView.itemCell.data.concept){let t=0,r=e.pinnedItemView.itemCell.data.definitionId;this.listRows.forEach((function(e){e.data.definitionId!==r&&(e.__root.style.filter="brightness(0.5)",t++)})),t&&!isPhone()&&n.notice("notice.conceptdiff",1)}}},UTStoreRevealModalListView.prototype.addItems=function(e,t,o,s){i.plist.storeReveal.call(this,e,t,o,s);let a=e.map((function(e){if("player"==e.type&&!r.roster.data.hasOwnProperty(e.definitionId))return e.definitionId})).filter(Boolean);n.loadPlayerPrice(a)},UTPlayerPicksViewController.prototype.viewDidAppear=function(){i.plist.picks.call(this);let e=this.picks.map((function(e){if("player"==e.type&&!r.roster.data.hasOwnProperty(e.definitionId))return e.definitionId})).filter(Boolean);n.loadPlayerPrice(e)},UTClubRepository.prototype.removeClubItem=function(e){i.plist.club.call(this,e),r.roster.thousand.hasOwnProperty(e.definitionId)&&delete r.roster.thousand[e.definitionId]},UTSquadEntity.prototype.getRating=function(){let e=i.plist.squadGR.call(this),t=[];for(let e of this.getFieldPlayers()){let n=e._item.definitionId;n>0&&r.roster.data.hasOwnProperty(n)&&t.push(n)}return n.squadTotal(this.getFieldPlayers().map((function(e){if(r.roster.data.hasOwnProperty(e._item.definitionId))return e._item.definitionId})).filter((e=>e>0))),e},n.squadTotal=e=>{let t=document.getElementById("squadTotal");if(t){let i=0;for(let t of e)if(r.roster.data.hasOwnProperty(t)){let e=r.roster.data[t].prices[r.base.platform].LCPrice;i+=isNaN(e)?Number(e.replace(/,/g,"")):Number(e)}if(t.innerText=i.toLocaleString(),0!==i&&document.getElementById("sbcPrice")){let e=t.parentNode.querySelector(".fsu-squad-pTitle");e.querySelector("span")&&e.querySelector("span").remove(),e.append(n.createDF(n.priceLastDiff(i,document.getElementById("sbcPrice").innerText.replace(/,/g,""))))}}},n.priceLastDiff=(e,t)=>{let n=(100*(Number(e)/Number(t)-1)).toFixed(0);isFinite(n)||(n=0);let r=("+"+n+"%").replace("+-","-");return-1!=r.indexOf("+")?`<span class="plus">${r}</span>`:`<span class="minus">${r}</span>`},n.loadPlayerPrice=async(t,i)=>{if(t.length>0){let i=Array.from(new Set(t)),o=[],s=Math.ceil(i.length/23);for(let e=0;e<s;e++){let e=i.splice(-23).join();o.push(`https://www.futbin.com/${r.base.year}/playerPrices?player=&rids=${e}`)}for(let e in o){let t=await c(o[e]);r.roster.data=Object.assign(r.roster.data,t);for(let e in t){let i=document.querySelectorAll(`.fsu-price-box[data-id='${e}']`),o=t[e].prices[r.base.platform].LCPrice;if(i.length>0)for(let e of i)e.classList.contains("fsu-price-val")?(e.setAttribute("data-value",o),e.innerText=o):(e.querySelector(".fsu-price-val").setAttribute("data-value",o),e.querySelector(".fsu-price-val .value").innerText=o),e.querySelectorAll(".fsu-price-last").length>0&&(e.querySelector(".fsu-price-val .title span").outerHTML=n.priceLastDiff(o.replace(/,/g,""),e.querySelector(".fsu-price-last .value").innerText.replace(/,/g,"")))}}document.getElementById("squadTotal")&&n.squadTotal(e.current()._squad.getFieldPlayers().map((function(e){return e._item.definitionId})).filter((e=>e>0)))}i&&n.losAuctionCount(i,0)},UTBaseSquadSplitViewController.prototype.viewDidAppear=function(){if(i.view.squad.call(this),r.set.info_squad){let e=this._squad.getPlayers().map((function(e){if("player"==e._item.type&&!r.roster.data.hasOwnProperty(e._item.definitionId))return e._item.definitionId})).filter((e=>e>0));if(this._getLeftController().getView().getSummaryPanel().getRootElement().querySelector(".ut-squad-summary-info"+("UTSBCSquadSplitViewController"==this.className?"--right":"")).after(n.createDF(`<div class="fsu-squad-pBox"><div class="fsu-squad-pWrap"><span class="fsu-squad-pTitle">${u("sbc.topsquad")}</span><span id="squadTotal" class="fsu-squad-pValue currency-coins">0</span></div></div>`)),e.length||n.squadTotal(this._squad.getFieldPlayers().map((function(e){if(r.roster.data.hasOwnProperty(e._item.definitionId))return e._item.definitionId})).filter((e=>e>0))),this._squad.isSBC()){let e;e=r.task.sbc.stat.hasOwnProperty(this._set.id)?1==this._set.challengesCount?r.task.sbc.stat.hasOwnProperty(this._set.id)?r.task.sbc.stat[this._set.id]:-1:r.task.sbc.stat[this._set.id].hasOwnProperty("c")?r.task.sbc.stat[this._set.id].c[this._challengeId]:-1:-1,-1===e||document.getElementById("sbcPrice")||this._getLeftController().getView().getRootElement().querySelector(".fsu-squad-pBox .fsu-squad-pWrap").after(n.createDF(`<div class="fsu-squad-pWrap"><span class="fsu-squad-pTitle">${u("sbc.topprice")}</span><span id="sbcPrice" class="fsu-squad-pValue currency-coins">${Number("pc"==r.base.platform?e.pc:e.tv).toLocaleString()}</span></div>`))}}},i.task={sbcT:UTSBCHubView.prototype.populateTiles,sbcC:UTSBCChallengesViewController.prototype.viewDidAppear,sbcN:UTSBCHubView.prototype.populateNavigation,objN:UTObjectivesHubView.prototype.setupNavigation,objG:UTObjectiveCategoryView.prototype.setCategoryGroups,home:UTHomeHubView.prototype._generate},n.squadCount=t=>{let r=Number(t.__root.getAttribute("data-r")),i=e.current()._squad.getFieldPlayers().map((e=>{if(!e.isBrick()&&e.item.rating&&!e.item.concept)return e.item.rating})).filter(Boolean),o="";i.length>0&&(o="&ratings="+i.join(","));let s=[...new Set(n.getItemBy(2,{GTdatabaseId:e.current()._squad.getFieldPlayers().map((e=>e.item.databaseId)).filter(Boolean)}).map((e=>e.rating)))],a=r>84?70:r<61?46:r-15,u=Array.from({length:30},((e,t)=>t+a)).filter((e=>!s.includes(e))),c=u.length?`&lock=${u.join(",")}`:"";GM_openInTab(`https://futcd.com/sbc.html?target=${r}${o}${c}`,{active:!0,insert:!0,setParent:!0})},n.squadConsult=e=>{let t=e.__root.getAttribute("data-id");GM_openInTab(`https://www.futbin.com/squad-building-challenges/ALL/${t}/list`,{active:!0,insert:!0,setParent:!0})},n.SBCSetRatingPlayers=async t=>{let r=t.__root.getAttribute("data-r"),i=t.__text?t.__text.textContent:"",o=0,s=isPhone()?e.current():e.left(),a=n.getDedupPlayers("d"!==r?n.getItemBy(1,{rating:Number(r)}):services.Item.itemDao.itemRepo.getUnassignedItems().map((e=>{if(e.isDuplicate()&&!e.isLoaned()&&e.isPlayer())return e.definitionId})),s._squad.getPlayers());if(!a.length)return void n.notice("notice.noplayer",2);if(i!==u("sbc.swaprating")){if(null!==s.getView().getSelectedSlot()&&(o=s.getView().getSelectedSlot().getIndex()),s._squad._getSlotByIndex(o).isBrick()||s._squad._getSlotByIndex(o).isValid()){let e=s._squad.getNonBrickSlots();for(const t of e)if(!t.isValid()){o=t.getIndex();break}}await s.getView().selectSlot(o),await s.getView().getSelectedSlot()._tapDetected(this)}let c=isPhone()?e.current()._rootController:e.right();"d"==r?c._panelView._fsuUn._interactionState?await c._panelView._fsuUn._tapDetected(this):n.notice("notice.noduplicate",2):(c._parentViewController._fsuFillType=5,c._parentViewController._fsuFillArray=a,await c._panelView._btnAddSwap._tapDetected(this))},n.getDedupPlayers=(e,t)=>{let n=t.map((e=>e.item.definitionId)).filter(Boolean);return e.map((e=>{if(!n.includes(e))return e})).filter(Boolean)},UTSBCHubView.prototype.populateNavigation=function(e,o){i.task.sbcN.call(this,e,o),setTimeout((()=>{if(r.set.info_sbc)for(let i=0;i<e.length;i++){let o=e[i],s=this._SBCCategoriesTM.items[i],a=0,c=0;for(let e of o.setIds)r.task.sbc.stat?.[e]&&("1"===r.task.sbc.stat?.[e].f&&a++,"1"===r.task.sbc.stat?.[e].e&&c++);a&&s.__root.append(n.createDF(u(t.taskBar).replace("{Number}",`+${a}`))),o.isFavourite&&c&&s.__root.append(n.createDF(`<div class="fsu-task-bar-favorite">${c}</div>`))}}),10)},UTSBCHubView.prototype.populateTiles=function(e,t){if(i.task.sbcT.call(this,e,t),r.set.info_sbc){let e=this.sbcSetTiles;for(let t of e)n.sbcInfoFill(t.data.id,t);if(t.isFavourite){let e=t.setIds,i=0;for(let t of e)r.task.sbc.stat.hasOwnProperty(t)&&"1"==r.task.sbc.stat[t].e&&i++;let o=this._SBCCategoriesTM.items[1].__root;o.querySelector(".fsu-task-bar-favorite")&&o.querySelector(".fsu-task-bar-favorite").remove(),i>0&&o.append(n.createDF(`<div class="fsu-task-bar-favorite">${i}</div>`))}}if(Object.keys(r.task.sbc.stat).length&&r.set.info_sbcf)if(this.hasOwnProperty("_fsuSbcFilter"))t.id!==this._fsuSbcFilterType&&(this._fsuSbcFilterType=t.id,this._fsuSbcFilterId=0),setTimeout((()=>{this._fsuSbcFilter.setIndexById(this._fsuSbcFilterId),n.sbcFilter(this._fsuSbcFilter)}),200);else{this._fsuSbcFilter=new UTDropDownControl;let e=[];for(let t=0;t<4;t++)e.push(new UTDataProviderEntryDTO(t,t,u(`sbc.filter${t}`)));this._fsuSbcFilter.init(),this._fsuSbcFilter.setOptions(e),this._fsuSbcFilter._parent=this,this._fsuSbcFilter.addTarget(this._fsuSbcFilter,(e=>{n.sbcFilter(e),e._parent._fsuSbcFilterId=e.getId()}),EventType.CHANGE);let r=document.createElement("div");r.classList.add("fsu-sbcfilter-box");let i=document.createElement("div");i.classList.add("fsu-sbcfilter-option");let o=document.createElement("div");o.innerText=u("sbc.filtert"),i.appendChild(o),i.appendChild(this._fsuSbcFilter.__root),r.appendChild(i),this._SBCCategoriesTM.__root.after(r),this._fsuSbcFilterType=t.id,this._fsuSbcFilterId=0}},n.sbcFilter=t=>{let n=e.current()._view.sbcSetTiles,i=t.getIndex();for(let e of n){let t=!0,n=e.data.id;if(r.task.sbc.stat.hasOwnProperty(n)){let e=r.task.sbc.stat[n];if(1==i&&"1"!==e.f&&(t=!1),2==i&&"1"!==e.e&&(t=!1),3==i){let n=parseFloat(e.u);(isNaN(n)||n<65)&&(t=!1)}}t?e.show():e.hide()}},UTSBCChallengesViewController.prototype.viewDidAppear=function(){i.task.sbcC.call(this),r.set.info_sbcs&&(n.sbcInfoFill(this.sbset.id,this.getView()._setInfo),n.sbcSubPrice(this.sbset.id,this.getView()._challengeTiles))},n.openFutbinPlayerUrl=async e=>{n.showLoader();let t=e.__root.getAttribute("data-id"),i=`https://www.futbin.org/futbin/api/searchPlayersByName?playername=${e.__root.getAttribute("data-name").normalize("NFKD").replace(/[\u0300-\u036f]/g,"").replace(/ø/g,"o")}&year=${r.base.year}`,o=await c(i),s="";for(let e of o.data)if(e.resource_id==t){s=e.ID;break}n.hideLoader(),GM_openInTab(`https://www.futbin.com/${r.base.year}/player/${s}/`,{active:!0,insert:!0,setParent:!0})},n.sbcInfoFill=(e,i)=>{if(!r.task.sbc.stat.hasOwnProperty(e))return;let o=r.task.sbc.stat[e];if(void 0!==o&&(i.hasOwnProperty("__tileTitle")&&i.__tileTitle.prepend(n.createDF(""+("1"==o.f?"<span class='task-new'>"+u("task.new")+"</span>":""))),i.__root.querySelector(".task-expire")||i.__root.prepend(n.createDF(""+("1"==o.e?"<div class='task-expire'>"+u("task.expire")+"</div>":"")))),i._interactionState&&!i.__root.querySelector(".fsu-sbc-info")){let e="7"==o.type?"0":"pc"==r.base.platform?o.pc:o.tv;i.__root.lastChild.before(n.createDF(u(t.sbcInfo).replace("{price}",Number(e).toLocaleString()).replace("{up}",o.u).replace("{down}",o.d)))}if(1==i._rewards.rewards.length&&i._rewards.rewards[0].isItem){let e=i._rewards.rewards[0].item;if("player"==e.type){let t=n.createButton(new UTStandardButtonControl,u("sbc.watchplayer"),(e=>{n.openFutbinPlayerUrl(e)}),"mini");t.__root.setAttribute("data-id",e.definitionId),t.__root.setAttribute("data-name",`${e._staticData.name}`),i._rewards._fsuPlayer=t,i._rewards.__root.children[0].append(i._rewards._fsuPlayer.__root)}}},n.createDF=e=>document.createRange().createContextualFragment(e),n.sbcSubPrice=async(e,t)=>{if(r.task.sbc.stat[e]){if(!r.task.sbc.stat[e].hasOwnProperty("c")){let t=`https://www.futbin.org/futbin/api/getChallengesBySetId?set_id=${e}`,n=await c(t);r.task.sbc.stat[e].c={};for(let t of n.data){let n={tv:t.price.ps,pc:t.price.pc};r.task.sbc.stat[e].c[t.challengeId]=n}}if(r.task.sbc.stat[e].hasOwnProperty("c"))for(let i of t)i.__tileContent.before(n.createDF(`<div class="fsu-sbc-info"><span class="currency-coins">${u("sbc.price")}${Number("pc"==r.base.platform?r.task.sbc.stat[e].c[i._data.id].pc:r.task.sbc.stat[e].c[i._data.id].tv).toLocaleString()}</span></div>`))}},i.panel={default:UTDefaultActionPanelView.prototype._generate,auction:UTAuctionActionPanelView.prototype._generate,slot:UTSlotActionPanelView.prototype._generate,transfer:UTTransferActionPanelView.prototype._generate,quickRender:UTQuickListPanelViewController.prototype.renderView,quick:UTQuickListPanelView.prototype._generate,loan:UTDuplicateLoanActionPanelView.prototype._generate,sbc:UTSBCSquadDetailPanelView.prototype.render,market:UTMarketSearchFiltersView.prototype.setPinnedItem,reward:UTRewardSelectionChoiceView.prototype.expandRewardSet},UTMarketSearchFiltersView.prototype.setPinnedItem=function(t,o){i.panel.market.call(this,t,o);let a=isPhone()?e.current()._squadContext.squad.isSBC():e.current()._squad.isSBC();if(t.definitionId&&a&&r.set.sbc_market&&t.concept){let e=n.getCachePrice(t.definitionId,1),r=this._maxBuyNowPriceRow._currencyInput,i=this._searchFilters.filters;"rarity"==i[1].setId&&-1==i[1].getValue()&&i[1].setIndexByValue(t.rareflag),"position"==i[2].setId&&0!==i[2].getIndex()&&i[2].setIndex(0),0==r.getValue()&&(s.hasOwnProperty(t.definitionId)?(r.setValue(s[t.definitionId]),isPhone()||n.notice("notice.marketsetmax",1)):0!==e&&(r.setValue(e),isPhone()||n.notice("notice.marketsetmax",1)))}},UTQuickListPanelViewController.prototype.renderView=function(){i.panel.quickRender.call(this),n.detailsButtonSet(this)},UTRewardSelectionChoiceView.prototype.expandRewardSet=function(e){i.panel.reward.call(this,e);let t=this.rewardViews.get(e).primaryReward.item,o=this._rewardsCarousel._tnsCarousel.__root;t&&r.set.player_futbin&&"player"==t.type&&2===o.classList.length&&o.classList.contains("slider")&&o.classList.contains("rewards-slider-container")&&(this._fsuPlayer=n.createButton(new UTStandardButtonControl,u("quicklist.gotofutbin"),(e=>{n.openFutbinPlayerUrl(e)}),"call-to-action mini fsu-reward-but"),isPhone()||this._fsuPlayer.__root.classList.add("pcr"),this._fsuPlayer.__root.setAttribute("data-id",t.definitionId),this._fsuPlayer.__root.setAttribute("data-name",t._staticData.name),o.querySelector(".reward").appendChild(this._fsuPlayer.__root))},UTQuickListPanelView.prototype._generate=function(...e){this._generated||(i.panel.quick.call(this,...e),n.detailsButtonQuick(this))},UTDefaultActionPanelView.prototype._generate=function(...e){this._generated||(i.panel.default.call(this,...e),n.detailsButtonAction(this))},UTDuplicateLoanActionPanelView.prototype._generate=function(...e){this._generated||(i.panel.loan.call(this,...e),n.detailsButtonAction(this))},UTAuctionActionPanelView.prototype._generate=function(...e){this._generated||(i.panel.auction.call(this,...e),n.detailsButtonAction(this))},UTSlotActionPanelView.prototype._generate=function(...e){this._generated||(i.panel.slot.call(this,...e),n.detailsButtonAction(this))},UTTransferActionPanelView.prototype._generate=function(...e){this._generated||(i.panel.transfer.call(this,...e),n.detailsButtonAction(this))},n.conceptBuyBack=t=>{if((t._panelView||t._panel)._sendClubButton._tapDetected(this),isPhone()){let e,n,r=t._parentViewController;for(let[t,i]of r._childViewControllers.entries())"UTSBCSquadOverviewViewController"==i.className&&(e=i,n=t);r.popToViewController(e,n)}else e.current()._ePitchTapped()},n.detailsButtonSet=t=>{if(!isPhone()&&!e.current()._rightController)return;let i=isPhone()?e.current():e.right();i.hasOwnProperty("_rootController")&&(i=i._rootController);let o=i._panelView||i._panel;if(o){if(t.item.isPlayer()){let e=t.item.definitionId||0;if(o.hasOwnProperty("_sendClubButton")&&i._squadContext&&o._sendClubButton.isInteractionEnabled()&&t.item.definitionId==i._squadContext.squad.getPlayer(i._squadContext.slotIndex).item.definitionId&&i._squadContext.squad.getPlayer(i._squadContext.slotIndex).item.concept&&r.set.sbc_cback)return void n.conceptBuyBack(i);if(e&&o.hasOwnProperty("_fsuPlayer")&&(o._fsuPlayer.__root.setAttribute("data-id",e),o._fsuPlayer.__root.setAttribute("data-name",`${t.item._staticData.name}`),o._fsuPlayer.setDisplay(1),r.set.player_futbin||o._fsuPlayer.hide()),t._view._fsuAuction.__subtext.setAttribute("data-id",e),t._view._fsuAuction.__subtext.setAttribute("data-i",t.item.id||0),r.roster.data.hasOwnProperty(e)){let n=r.roster.data[e].prices[r.base.platform].LCPrice;"0"!==n?(t._view._fsuAuction.setSubtext(n),t._view._fsuAuction.setInteractionState(1),o.hasOwnProperty("_fsuGP")&&(o._fsuGP.__root.setAttribute("data-p",n),o._fsuGP.show())):(t._view._fsuAuction.setSubtext(n),t._view._fsuAuction.setInteractionState(0))}r.set.player_auction||t._view._fsuAuction.hide(),o.hasOwnProperty("_fsuRat")&&t.item.rating>0&&(o._fsuRat.__root.setAttribute("data-r",t.item.rating),o._fsuRat.setInteractionState(1),o._fsuRat.show())}else t._view._fsuAuction.setDisplay(!1);if(r.set.player_getprice||o._fsuGP.hide(),o.hasOwnProperty("_fsuSwap")&&o.hasOwnProperty("_fsuUn")){t.item.id?(o._fsuSwap.__text.innerText=u("sbc.swapquick"),o._fsuUn.__text.innerText=u("sbc.swapduplicate"),o._fsuChem.__text.innerText=u("sbc.swapchem")):(o._fsuSwap.__text.innerText=u("sbc.addquick"),o._fsuUn.__text.innerText=u("sbc.addduplicate"),o._fsuChem.__text.innerText=u("sbc.addchem")),Object.keys(r.criteria).length&&o._fsuSwap.setInteractionState(1);let n=e.current()._squad._players.map((function(e){if(e.item.definitionId>0)return e.item.definitionId})).filter(Boolean);if(services.Item.itemDao.itemRepo.getUnassignedItems().map((e=>{if(e.isDuplicate()&&!e.isLoaned()&&e.isPlayer()){if(!n.length)return e.definitionId;if(-1==n.indexOf(e.definitionId))return e.definitionId}})).filter(Boolean).length?o._fsuUn.setInteractionState(1):o._fsuUn.__text.innerText=u("sbc.notduplicate"),r.set.sbc_quick||o._fsuSwap.hide(),r.set.sbc_duplicate||o._fsuUn.hide(),i.hasOwnProperty("_parentViewController")&&i._parentViewController&&(i._parentViewController._fsuFillType=0,i._parentViewController._fsuFillArray=[]),i.hasOwnProperty("_challenge")&&i._squad.getFieldPlayers().filter((e=>e.getItem().rating>0)).length){let e=0,t=0;for(let n of i._challenge.eligibilityRequirements)35===n.getFirstKey()&&(e=n.getFirstValue(35)),19===n.getFirstKey()&&(t=n.getFirstValue(19));e&&(o._fsuChem.show(),o._fsuChem.__root.setAttribute("data-c",e),o._fsuChem.__root.setAttribute("data-r",t),o._fsuChem._parent=i)}}}},n.detailsButtonQuick=e=>{let t=n.createButton(new UTGroupButtonControl,u("quicklist.auction"),(e=>{n.showLoader();let t=Number(e.__subtext.innerText.replace(/,/g,"")),r=Number(e.__subtext.getAttribute("data-i"));n.playerToAuction(r,t),n.hideLoader()}),"accordian fsuBuy");t.setSubtext(0),t.displayCurrencyIcon(!0),t.setInteractionState(!1),e._fsuAuction=t},n.createButton=(e,t,n,r)=>{const i=e;if(i.init(),i.addTarget(i,n.bind(i),EventType.TAP),i.setText(t),r){const e=r.split(" ").filter(Boolean);for(let t of e)i.getRootElement().classList.add(t)}return i},n.createToggle=(e,t)=>{const n=new UTToggleCellView;return n.init(),n.addTarget(n,t.bind(n),EventType.TAP),n.setLabel(e),n},n.createTile=(e,t,n)=>{const r=new UTGraphicalInfoTileView;return r.__root.classList.add("col-1-3"),r.loadContentView(),r.__tileContent.querySelector(".image").remove(),r.init(),r.addTarget(r,n.bind(r),EventType.TAP),r.setTitle(e),r.setDescription(t),r},n.detailsButtonAction=t=>{let r=n.createButton(new UTGroupButtonControl,u("quicklist.gotofutbin"),(e=>{n.openFutbinPlayerUrl(e)}),"more");if(r.setDisplay(!1),t._fsuPlayer=r,(t._playerBioButton||t._btnPlayerBio).__root.after(t._fsuPlayer.__root),t.hasOwnProperty("_btnAddSwap")&&e.current()._squad.isSBC()){let r=document.createElement("div");r.classList.add("ut-button-group");let i=n.createButton(new UTGroupButtonControl,"quickSwap",(async()=>{let t=isPhone()?e.current()._rootController:e.right();t._parentViewController._fsuFillType=1,t._parentViewController._fsuFillArray=[],t._panelView._btnAddSwap._tapDetected(this)}),"");i.setInteractionState(!1),t._fsuSwap=i,r.appendChild(t._fsuSwap.__root);let o=n.createButton(new UTGroupButtonControl,"unassigned",(async()=>{let t=isPhone()?e.current()._rootController:e.right(),r=n.getDedupPlayers(services.Item.itemDao.itemRepo.getUnassignedItems().map((e=>{if(e.isDuplicate()&&!e.isLoaned()&&e.isPlayer())return e.definitionId})),t._squad.getPlayers());r.length?(t._parentViewController._fsuFillType=3,t._parentViewController._fsuFillArray=r,t._panelView._btnAddSwap._tapDetected(this)):n.notice("notice.noplayer",2)}),"");o.setInteractionState(!1),t._fsuUn=o,r.appendChild(t._fsuUn.__root);let s=n.createButton(new UTGroupButtonControl,u("sbc.swaprating"),(e=>{n.SBCSetRatingPlayers(e)}),"");s.setInteractionState(!1),s.hide(),t._fsuRat=s,r.appendChild(t._fsuRat.__root);let a=n.createButton(new UTGroupButtonControl,u("sbc.swapchem"),(e=>{n.SBCSetChemPlayers(e)}),"");a.hide(),t._fsuChem=a,r.appendChild(t._fsuChem.__root),t._fsuButtons=r,t.__itemActions.before(t._fsuButtons)}},n.SBCSetChemPlayers=async t=>{let r=Number(t.__root.getAttribute("data-c")),i=Number(t.__root.getAttribute("data-r")),o=t._parent._squad,s=t._parent._viewmodel.get(t._parent._viewmodel.getIndex()).getIndex(),a=o._formation.getPosition(s).getTypeId(),u=r/(11-o.simpleBrickIndices.length),c=n.getItemBy(2,{preferredPosition:a}).filter((e=>e.rating+5>=i)),l=o._getSlotByIndex(s).item.definitionId,d=[],f=o.getManager().item,p=o.getFormation(),h=o.getFieldPlayers().map((function(e){return e.item})),v=h.filter((e=>e.rating)).length,g=o._chemistry/v;for(let e of c){h[s]=e;let t=o.chemCalculator.calculate(p,h,f);(g>=u&&t.chemistry>=o._chemistry&&0!==l||t.chemistry>o._chemistry)&&d.push(e.definitionId)}if(d=d.filter((e=>e!==l)),d.length>0){let t=isPhone()?e.current()._rootController:e.right();t._parentViewController._fsuFillType=7,t._parentViewController._fsuFillArray=d,await t._panelView._btnAddSwap._tapDetected(this)}else n.notice("notice.notchemplayer",2)},n.playerQuickAuction=async t=>{let r=Number(t.__subtext.innerText.replace(/,/g,""));if(!r)return;let i=isPhone()?e.current():e.right();await i._quickListPanel._view._bidNumericStepper.setValue(r),await i._quickListPanel._view._buyNowNumericStepper.setValue(r),await i._quickListPanel._view._listButton._tapDetected(this),n.notice("notice.quickauction",1)},UTObjectivesHubView.prototype.setupNavigation=function(e){i.task.objN.call(this,e);let o=this._objectivesTM.items;if(r.task.obj&&Object.keys(r.task.obj.stat).length)for(let e of o)if(r.task.obj.stat.new.hasOwnProperty(e.id)){if(!r.set.info_obj)return;e.__root.append(n.createDF(u(t.taskBar).replace("{Number}",`+${r.task.obj.stat.new[e.id]}`)))}},UTObjectiveCategoryView.prototype.setCategoryGroups=function(e,t){i.task.objG.call(this,e,t);let o=this.groups;for(let e of o){if(!r.task.obj||!Object.keys(r.task.obj.stat).length)return;r.task.obj.stat[e.id].f&&e.__title.prepend(n.createDF(`<span class="task-new">${u("task.new")}</span>`)),r.task.obj.stat[e.id].e&&e.__title.parentNode.after(n.createDF(`<div class="task-expire">${u("task.expire")}</div>`))}},UTHomeHubView.prototype._generate=function(...e){if(!this._generated){i.task.home.call(this,...e),GM_addStyle(r.base.sytle);let t=services.Messages.messagesDAO.authDelegate.sessionUtas.locale;"zh"==t.language&&(r.language="Hans"==t.variant?0:1),n.init(),r.base.state=!0}},UTHomeHubView.prototype.getObjectivesTile=function(){return r.task.obj.html&&!this._objectivesTile.__root.querySelector(".fsu-task")&&r.set.info_obj&&this._objectivesTile.__tileContent.before(n.createDF(`<div class="fsu-task">${r.task.obj.html}</div>`)),this._objectivesTile},UTHomeHubView.prototype.getSBCTile=function(){return r.set.info_sbc&&r.task.sbc.html&&!this._sbcTile.__root.querySelector(".fsu-task")&&this._sbcTile.__tileContent.before(n.createDF(`<div class="fsu-task">${r.task.sbc.html}</div>`)),this._sbcTile},i.search={did:UTClubSearchFiltersViewController.prototype.viewDidAppear,filters:UTItemSearchView.prototype.setFilters,result:UTPaginatedItemListView.prototype.setPaginationState,dropdownOpen:UTDropDownControl.prototype.open},UTClubSearchFiltersViewController.prototype.viewDidAppear=function(){i.search.did.call(this),this._parentViewController.hasOwnProperty("_fsuFillType")&&(this.squad.isSBC()||this.squad.isActive()||this.squad.isDream())&&n.searchFill(this)},UTItemSearchView.prototype.setFilters=function(t,o){if(i.search.filters.call(this,t,o),"player"!=t.searchCriteria.type||isPhone()||n.searchInput(this),"player"==t.searchCriteria.type&&"club"==t.searchFeature&&r.set.sbc_icount){let t=["nation","league","club","level","rarity","position"];for(let r of t)this.searchFilters.get(r)._inputFill=this.searchFilters,isPhone()&&!e.current()._fsuFillType%2&&n.clubSearchSetCount(this.searchFilters.get(r))}},n.clubSearchSetCount=e=>{if(e.hasOwnProperty("_inputFill")){let t={nation:"nationId",league:"leagueId",club:"teamId",level:"levelId",rarity:"rareflag",position:"preferredPosition"},r=t[e.setId],i={loans:-1};for(let n in t)n!==e.setId&&-1!==e._inputFill.get(n).id&&(i[t[n]]=e._inputFill.get(n).id);let o=n.getItemBy(2,i).map((e=>"levelId"==r?e.isSpecial()?3:e.isBronzeRating()?0:e.isSilverRating()?1:2:e[r])),s=new Map,a=[];for(let e of o)s.set(e,(s.get(e)||0)+1);let u=isPhone()?e.__picker.querySelectorAll("option"):e.__list.querySelectorAll("li");for(let[t,r]of u.entries()){let i=e.options[t].id,o=s.get(i);o?(isPhone()?r.append(n.createDF(`(${o})`)):(r.style.position="relative",r.append(n.createDF(`<span class="fsu-fcount">${o}</span>`))),a.push(o)):a.push(0)}e.hasOwnProperty(`_fsu${e.setId}`)&&(e[`_fsu${e.setId}`]._oCount=a)}},UTDropDownControl.prototype.open=function(){i.search.dropdownOpen.call(this),n.clubSearchSetCount(this)},n.searchFill=async t=>{let i=t.viewmodel.searchCriteria,o=t._parentViewController._fsuFillType,s=t._parentViewController._fsuFillArray;if(1!==o&&o%2==1){let e,i,a=new UTSearchCriteriaDTO;switch(a._type="player",a.count=21,o){case 3:a.sortBy=Object.keys(r.criteria).length?r.criteria.sortBy:"ovr",a._sort=Object.keys(r.criteria).length?r.criteria._sort:"asc",e="notice.duplicateloading";break;case 5:a.sortBy="value",a._sort="asc",e="notice.appointloading";break;case 7:a.sortBy="value",a._sort="asc",e="notice.chemplayerloading";break}return i=s.length>650?Math.random()>.5?s.sort(((e,t)=>e-t)).slice(0,650):s.sort(((e,t)=>t-e)).slice(0,650):s,a.defId=i,await t.setSearchCriteria(a),await t._view.getSearchButton()._tapDetected(this),void n.notice(e,1)}if(o&&o%2==0){let e="";switch(o){case 4:e=u("sbc.duplicates");break;case 6:e=u("sbc.appoint");break;case 8:e=u("sbc.chemplayer");break}return!t.viewmodel.searchCriteria.defId.length&&s.length&&(t.viewmodel.searchCriteria.defId=s),await t._view.getPlayerNameSearch()._playerNameInput.setValue(e),t._view.getPlayerNameSearch().selected||t._view.getPlayerNameSearch().__root.classList.add("has-selection"),void await t._view.getSortDropDown().setIndexById(2)}if(0==Object.keys(r.criteria).length&&0==o)await t._view.getSortDropDown().setIndexById(2);else{if(!r.set.sbc_records)return;if(i._untradeables=r.criteria._untradeables,"true"==r.criteria._untradeables?await t._view.getSortOptions().toggles._collection["sort-untradeable"].toggle(!0):await t._view.getSortOptions().toggles._collection["sort-untradeable"].toggle(!1),"UTSquadSplitViewController"==e.current().className?i.excludeDefIds=[]:(i.excludeDefIds=r.criteria.excludeDefIds,r.criteria.excludeDefIds.length>0?await t._view.getSortOptions().toggles._collection["sort-exclude-squad"].toggle(!0):await t._view.getSortOptions().toggles._collection["sort-exclude-squad"].toggle(!1)),r.criteria.sortBy!==i.sortBy||r.criteria._sort!==i._sort){let e=["valuedesc","valueasc","ovrdesc","ovrasc","recentdesc"];for(let n=0;n<e.length;n++)if(r.criteria.sortBy+r.criteria._sort==e[n]){await t._view.getSortDropDown().setIndexById(n);break}}if(r.criteria.level!==i.level)for(const e of t._view._filterContainer.filters[0].options)if(e.value==r.criteria.level){await t._view._filterContainer.filters[0].setIndexById(e.id);break}if(r.criteria.rarities!==i.rarities&&1==r.criteria.rarities.length&&await t._view._filterContainer.filters[1].setIndexById(r.criteria.rarities[0]),"any"==r.criteria._position)await t._view._filterContainer.filters[2].setIndexById(-1);else{let n=-1,r=isPhone()?e.current().iterator:e.right().iterator;r&&(n=r.get(r.getIndex()).generalPosition),await t._view._filterContainer.filters[2].setIndexById(n)}if(r.criteria.nation!==i.nation&&await t._view._filterContainer.filters[4].setIndexById(r.criteria.nation),r.criteria.league!==i.league&&await t._view._filterContainer.filters[5].setIndexById(r.criteria.league),r.criteria.club!==i.club&&await t._view._filterContainer.filters[6].setIndexById(r.criteria.club),1==o)return setTimeout((()=>{t._view.getSearchButton()._tapDetected(this)}),50),void n.notice("notice.quicksearch",1)}},UTPaginatedItemListView.prototype.setPaginationState=function(t,o){if(i.search.result.call(this,t,o),this._interactionState){if(r.unassigned.state=!1,1==r.unassigned.run&&(r.unassigned.run=2,!this.getRows()))return n.notice("notice.noduplicate",2),void services.Item.itemDao.itemRepo.unassigned.reset();if((3==r.unassigned.run||5==r.unassigned.run)&&(r.unassigned.run++,!this.getRows()))return void n.notice("notice.noplayer",2);if(e.current().hasOwnProperty("_squad")&&e.current()._squad.isSBC()){let t;t=isPhone()?e.current()._currentController:e.right(),t.searchCriteria&&0==t.searchCriteria.defId.length&&(r.criteria=JSON.parse(JSON.stringify(t.searchCriteria)))}}},n.searchInput=e=>{if(r.set.sbc_input)for(let t of["club","nation","league"]){let r=e.searchFilters._collection[t],i=r.options.map((e=>e.label));r.__root.setAttribute("data-f",t);let o=r.__label.innerText;r.__label.innerHTML="",r.__label.style.marginRight=0,r.__list.style.height="14rem",r.__list.style.backgroundColor="#171826",r.__list.setAttribute("data-f",t);let s=document.createElement("input");s.classList.remove("ut-text-input-control"),s.classList.add("fsu-input"),o==services.Localization.localize(`sbc.requirements.subType.${t}`)?s.setAttribute("placeholder",o):s.setAttribute("value",o),s.setAttribute("maxlength","50"),s.setAttribute("data-f",t),s._oData=i,s.addEventListener("compositionstart",n.searchInputEvent),s.addEventListener("compositionend",n.searchInputEvent),s.addEventListener("input",n.searchInputEvent),s.addEventListener("blur",n.searchInputEvent),s.addEventListener("focus",n.searchInputEvent),r[`_fsu${t}`]=s,r.__label.append(r[`_fsu${t}`])}},n.searchInputEvent=t=>{let n=e.current()._view;if(e.current().hasOwnProperty("_rightController")&&(n=e.right()._view),"compositionstart"==t.type&&(r.base.input=!1),"compositionend"==t.type&&(r.base.input=!0),"input"==t.type&&setTimeout((()=>{if(r.base.input){let e=t.target.value,i=t.target.getAttribute("data-f"),o=n.hasOwnProperty("_filterContainer")?n._filterContainer.searchFilters._collection[i]:n._searchFilters.searchFilters._collection[i],s=`ul[data-f='${i}'] li`;o.isOpen||o.open(),t.target._oData.forEach((function(n,i){let o=document.querySelectorAll(s)[i],a=!!r.set.sbc_icount&&t.target._oCount[i]>=Number(e);n.includes(e)||a?o.classList.remove("hide"):o.classList.add("hide")}))}}),0),"blur"==t.type){let e=t.target.value,r=t.target.getAttribute("data-f"),i=n.hasOwnProperty("_filterContainer")?n._filterContainer.searchFilters._collection[r]:n._searchFilters.searchFilters._collection[r];e!==i.label&&(-1==i.id?t.target.value="":t.target.value=i.label)}"focus"==t.type&&(t.target.value="")},UTUnassignedItemsViewController.prototype._renderView=function(...e){i.view.unassigned.call(this,...e),this._view.sections.length&&(this._view._fsuUasreset=n.createButton(new UTStandardButtonControl,u("uasreset.btntext"),(async e=>{await services.Item.itemDao.itemRepo.unassigned.reset(),await getAppMain().getRootViewController().getPresentedViewController().getCurrentViewController()._backButton._tapDetected(this),n.notice("notice.uasreset",0)}),"mini call-to-action section-header-btn fsu-uasreset"),this._view.__root.querySelector(".ut-section-header-view").append(this._view._fsuUasreset.__root));let t=this._viewmodel.getDuplicateSection();if(t.length){let e=this.getView().getSection(UTUnassignedItemsViewModel.SECTION.DUPLICATES),r=t.map((e=>{if(e.untradeable)return e.definitionId})).filter(Boolean),i=n.getItemBy(1,{definitionId:r,untradeable:!1});if(i.length){let t=n.createButton(new UTStandardButtonControl,u("swaptradable.btntext"),(async e=>{n.popup(u("swaptradable.popupt"),u(["swaptradable.popupm",e._fsuList.length]),(t=>{2===t&&n.unassignedSwapPlayers(e._fsuList,e._parent)}))}),"mini call-to-action section-header-btn fsu-uasreset");t._fsuList=i,t._parent=this,e._fsuSwapPlayers=t,e._header.__root.append(e._fsuSwapPlayers.__root)}}setTimeout((()=>{this._viewmodel&&0===this._viewmodel.length&&!document.querySelector(".player-picks-modal")&&(isPhone()?this._parentViewController._backButton._tapDetected(this):this._parentViewController._parentViewController._backButton._tapDetected(this),n.notice("notice.packback",1))}),800)},n.unassignedSwapPlayers=async(e,t)=>{let r=t._viewmodel.getDuplicateSection().map((t=>{if(e.includes(t.definitionId))return t})).filter(Boolean);t.getView().setInteractionState(!1),n.showLoader();try{for(let e in r)await new Promise((async(i,o)=>{n.changeLoadingText(["loadingclose.swapt",`${e}`,""+(r.length-e)]),setTimeout((async()=>{await services.Item.move(r[e],ItemPile.CLUB).observe(t,((e,t)=>{e.unobserve(this),t.success?(n.notice(["notice.swaptsuccess",t.data.clubDuplicates[0].getStaticData().name],0),i()):(n.notice(["notice.swapterror",t.data.clubDuplicates[0].getStaticData().name],2),o())}))}),200)}))}catch(e){return}t._getUnassignedItems(),n.hideLoader(),t.getView().setInteractionState(!0)},UTSquadBuilderViewModel.prototype.generatePlayerCollection=function(e,t,i){let o=0,s=r.build.league?r.set.shield_league:[],a=r.build.rare?[3]:[],u=t.filter((e=>!s.includes(e.leagueId)&&!a.includes(e.rareflag))),c=0;for(let e=0;e<11;e++)i.getSlot(e).isValid()||i.getSlot(e).isBrick()||c++;u.length<c&&(s.length||a.length)&&n.notice("notice.builder",2);let l=e.map((function(e,t){var n=i?i.getSlot(t):null;return n&&(n.isValid()||n.isBrick())?n.getItem():u[o++]}));return n.loadPlayerPrice(l.map((function(e){if(e)return e.definitionId})).filter((e=>e>0))),l},UTMarketSearchView.prototype._generate=function(...t){this._generated||(i.view.market.call(this,...t),r.set.info_auction&&e.current().getNavigationTitle()==services.Localization.localize("navbar.label.search")&&this._list.__itemList?.classList.add("fsu-compact"))};const d=function(e){UTView.call(this)};JSUtils.inherits(d,UTView),d.prototype._generate=function(){if(!this._generated){let t=document.createElement("div");t.classList.add("ut-club-search-filters-view");let i=document.createElement("div");i.classList.add("ut-pinned-list-container","ut-content-container"),this.__content=document.createElement("div"),this.__content.classList.add("ut-content");let s=document.createElement("div");s.classList.add("ut-pinned-list");let a=document.createElement("div");a.classList.add("sort-filter-container");let c=document.createElement("h4");c.textContent=u("set.style.title"),a.appendChild(c);let l=document.createElement("div");l.classList.add("fsu-setbox"),this._cStyle={},this._cStyle.new=n.createToggle(u("set.style.new"),(async t=>{o.save("card_style",t.getToggleState()?2:1),e.current().getView()._cStyle.old.toggle()})),l.appendChild(this._cStyle.new.getRootElement()),this._cStyle.old=n.createToggle(u("set.style.old"),(async t=>{o.save("card_style",t.getToggleState()?1:2),e.current().getView()._cStyle.new.toggle()})),l.appendChild(this._cStyle.old.getRootElement()),(1==r.set.card_style?this._cStyle.old:this._cStyle.new).toggle(1),a.appendChild(l),s.appendChild(a);for(let e in r.setfield){let t=document.createElement("div");t.classList.add("sort-filter-container");let n=document.createElement("h4");n.textContent=u(`set.${e}.title`),t.appendChild(n);let i=document.createElement("div");i.classList.add("fsu-setbox"),this[`_${e}`]={};for(let t of r.setfield[e])this[`_${e}`][t]=o.addToggle(e,t),i.appendChild(this[`_${e}`][t].getRootElement());t.appendChild(i),s.appendChild(t)}this.__content.appendChild(s);let d=document.createElement("div");d.classList.add("button-container"),this._fsuinfo=n.createButton(new UTStandardButtonControl,u("set.getdoc"),(()=>{GM_openInTab("https://mfrasi851i.feishu.cn/wiki/OLNswCYQciVKw8k9iaAcmOY1nmf",{active:!0,insert:!0,setParent:!0})}),"call-to-action"),d.appendChild(this._fsuinfo.__root),this._fsushield=n.createButton(new UTStandardButtonControl,u("shieldlea.btntext"),(()=>{n.popup(u("shieldlea.btntext"),u("shieldlea.popupm"),((e,t)=>{if(2===e){let e=t.getValue();if(/^\d+(,\d+)*$/.test(e)){let t=e.split(",").map((e=>Number(e))).filter(Boolean);o.save("shield_league",t)}else""==e?o.save("shield_league",[31,16,13,19,53]):n.notice(u("notice.seterror"),2)}}),!1,[u("shieldlea.placeholder"),r.set.shield_league],!0)}),"call-to-action"),d.appendChild(this._fsushield.__root),this.__content.appendChild(d),i.appendChild(this.__content),t.appendChild(i),this.__root=t,this._generated=!0}},o.addToggle=function(e,t){let i=n.createToggle(u(`set.${e}.${t}`),(async n=>{o.save(`${e}_${t}`,!!n.getToggleState())}));return i._sName=`${e}_${t}`,r.set[`${e}_${t}`]&&i.toggle(1),i};const f=function(e){UTViewController.call(this)};function p(e,t){return new Promise((i=>{GM_xmlhttpRequest({method:"GET",url:`https://utas.mob.v1.fut.ea.com/ut/game/fifa${r.base.year}/transfermarket?num=21&start=0&type=player&maskedDefId=${e}&maxb=${t}`,headers:{"Content-type":"application/json","X-UT-SID":r.base.sId},onload:function(e){404==e.status||401==e.status?(r.base.sId=services.Authentication.sessionUtas.id,n.notice("notice.loaderror",2)):i(JSON.parse(e.response).auctionInfo)},onerror:function(){n.notice("notice.loaderror",2)}})}))}function h(e,t){let i="pc"==r.base.platform?"PC":"PS",o=0==t?`https://www.futbin.org/futbin/api/getChallengeTopSquads?chal_id=${e}&platform=${i}`:`https://www.futbin.org/futbin/api/getSquadByID?squadId=${e}`;return new Promise((e=>{GM_xmlhttpRequest({method:"GET",url:o,headers:{"Content-type":"application/json"},onload:function(r){404==r.status||401==r.status?(n.notice("notice.loaderror",2),n.hideLoader()):e(JSON.parse(r.response)[0==t?"data":"squad_data"])},onerror:function(){n.notice("notice.loaderror",2),n.hideLoader()}})}))}JSUtils.inherits(f,UTViewController),f.prototype._getViewInstanceFromData=function(){return new d},f.prototype.viewDidAppear=function(){this.getNavigationController().setNavigationVisibility(!0,!0)},o.init=function(){let e=JSON.parse(GM_getValue("set","{}")),t={};e&&"object"==typeof e&&(t=e),t.hasOwnProperty("card_style")||(t.card_style=2);for(let e in r.setfield)for(let n of r.setfield[e]){let r=`${e}_${n}`;t.hasOwnProperty(r)||(t[r]=!0)}t.hasOwnProperty("shield_league")||(t.shield_league=[31,16,13,19,53]),r.set=t},o.save=function(e,t){r.set[e]=t,GM_setValue("set",JSON.stringify(r.set)),n.notice(u("notice.setsuccess"),0)},n.getAuction=async function(e){e.setInteractionState(0),e.__root.querySelector("span.btn-subtext").textContent=u("quicklist.getpriceload");let t,r=e.__root.getAttribute("data-id"),i=e.__root.getAttribute("data-p").replace(/,/g,""),o=[],a={},c=Number(i);if(t=await p(r,i),o=t.map((e=>e.buyNowPrice))||[],0==t.length)for(let e=0;e<5;e++){c=UTCurrencyInputControl.getIncrementAboveVal(c);let e=await p(r,c);if(e.map((e=>{o.push(e.buyNowPrice)})),e.length>0)break}else if(21==t.length)for(let e=0;e<5;e++){c=UTCurrencyInputControl.getIncrementBelowVal(c);let e=await p(r,c);if(e.map((e=>{o.push(e.buyNowPrice)})),e.length<21)break}for(let e of o)a[e]=a[e]?a[e]+1:1;if(a=Object.fromEntries(Object.entries(a).slice(0,3)),Object.keys(a).length){s[r]=Object.entries(a)[0][0].toLocaleString("en-US",{style:"decimal"});let e=document.querySelector(`button.fsuGP[data-id='${r}']`);if(e){e.querySelector("span.btn-subtext").textContent=s[r].toLocaleString(),e.querySelector("span.btn-subtext").classList.add("currency-coins");let t=0;for(let r in a){t++;let i=n.createButton(new UTGroupButtonControl,`${u("quicklist.getpricelt")} ${t}`,(()=>{}),"accordian fsuGPL");i.__subtext.textContent=r.toLocaleString(),i.displayCurrencyIcon(!0);let o=document.createElement("span");o.textContent=` ×${a[r]}`,i.__subtext.appendChild(o),i.setInteractionState(0),e.parentNode.appendChild(i.__root)}}}},UTSBCSquadDetailPanelView.prototype.render=function(e,t,o,s){if(i.panel.sbc.call(this,e,t,o,s),!this._fsuSquad&&r.set.sbc_template){let t=n.createButton(new UTStandardButtonControl,u("sbc.squadfill"),(e=>{n.getTemplate(e)}),"call-to-action");t.__root.setAttribute("data-id",e.id),this._fsuSquad=t,this._btnSquadBuilder.__root.after(this._fsuSquad.__root)}let a=11-e.squad.getAllBrickIndices().length,c=[],l={};for(let t of e.eligibilityRequirements){let e=t.getFirstKey(),n=t.getFirstValue(e),r={t:{},c:t.count};if(e==SBCEligibilityKey.PLAYER_QUALITY&&(r.t.rs=n-1,l.rs=n-1),e==SBCEligibilityKey.PLAYER_RARITY&&(r.t.rareflag=n),e==SBCEligibilityKey.PLAYER_RARITY_GROUP&&4==n&&(r.t.gs=!0,l.gs=!1),e==SBCEligibilityKey.PLAYER_LEVEL&&(r.t.rs=n-1),e==SBCEligibilityKey.TEAM_RATING){c=[];break}c.push(r)}if(c.length){c.sort(((e,t)=>t.c-e.c));let e=c.filter((e=>-1==e.c)).length,t=a;if(e>1)c=[];else if(1==e)for(let e of c)-1==e.c?e.c=t:t-=e.c;if(Object.keys(l).length)for(let e of c){let t=Object.keys(l).filter((t=>!(t in e.t)));for(let n of t)e.t[n]=l[n]}t<0&&(c={})}if(this._fsuleague||(this._fsuleague=n.createToggle(`${u("builder.league")}(${r.set.shield_league.length})`,(async e=>{r.build.league=e.getToggleState()})),this._fsuleague.toggle(r.build.league),this._challengeDetails._requirements.__root.appendChild(this._fsuleague.__root),this._fsuleague.hide()),this._fsurare||(this._fsurare=n.createToggle(u("builder.rare"),(async e=>{r.build.rare=e.getToggleState()})),this._fsurare.toggle(r.build.rare),this._challengeDetails._requirements.__root.appendChild(this._fsurare.__root),this._fsurare.hide()),Object.keys(c).length){if(!this._fsuAutoFill&&r.set.sbc_autofill){let t=n.createButton(new UTStandardButtonControl,u("autofill.btntext"),(e=>{let t=[],i=[];for(let o of e._gf){let e=JSON.parse(JSON.stringify(o.t));r.build.league&&(e.GTleagueId=r.set.shield_league),r.build.rare&&(e.GTrareflag=3),i.length&&(e.GTdatabaseId=i);let s=n.getItemBy(2,e,services.Item.itemDao.itemRepo.getUnassignedItems()).slice(0,o.c);i=i.concat(s.map((e=>e.databaseId))),t=t.concat(s)}t.length?n.playerListFillSquad(e._parent,t):(e.setInteractionState(0),n.notice("notice.noplayer",2))}),"mini call-to-action");t.__root.style.width="100%",t._gf=c,t._parent=e,this._fsuAutoFill=t,this._challengeDetails._requirements.__root.appendChild(this._fsuAutoFill.__root),this._fsuleague.show(),this._fsurare.show()}}else if(!this._fsuDupFill&&r.set.sbc_dupfill&&services.Item.itemDao.itemRepo.getUnassignedItems().length){let t=n.createButton(new UTStandardButtonControl,u("dupfill.btntext"),(e=>{let t={id:[...new Set(services.Item.itemDao.itemRepo.getUnassignedItems().map((e=>{if(e.isDuplicate()&&!e.isLoaned()&&e.isPlayer())return e.duplicateId})))]};r.build.league&&(t.GTleagueId=r.set.shield_league),r.build.rare&&(t.GTrareflag=3);let i=n.getItemBy(2,t);i.length?n.playerListFillSquad(e._parent,i):(e.setInteractionState(0),n.notice("notice.noplayer",2))}),"mini call-to-action");t.__root.style.width="100%",t._parent=e,this._fsuDupFill=t,this._challengeDetails._requirements.__root.appendChild(this._fsuDupFill.__root),this._fsuleague.show(),this._fsurare.show()}r.set.sbc_dupfill&&this._fsuDupFill&&!services.Item.itemDao.itemRepo.getUnassignedItems().length&&this._fsuDupFill.setDisplay(0),!this._fsuSquadCmpl&&r.set.sbc_squadcmpl&&(this._fsuleague.show(),this._fsurare.show())},n.playerListFillSquad=(e,t)=>{n.showLoader();let r=[],i=e.squad.getAllBrickIndices(),o=Array.from(t);for(let e=0;e<23;e++){let t=null;if(!i.includes(e)){let e=o.shift();e&&(t=new UTItemEntity,t.id=e.id,t.definitionId=e.definitionId,t.stackCount=1,t.concept=e.concept)}r.push(t)}n.loadPlayerPrice(r.map((e=>{if(e&&e.definitionId)return e.definitionId})).filter(Boolean)),n.saveSquad(e,e.squad,r,[]),n.hideLoader(),n.saveOldSquad(e.squad,!1)},n.getTemplate=async function(t){t.setInteractionState(0),n.showLoader(),n.changeLoadingText("loadingclose.template1"),r.base.template=!0,n.notice("notice.templateload",1);let i,o,s,a=t.__root.getAttribute("data-id"),u=[],c=[],l=-1,d=0,f=isPhone()?e.current()._challenge:e.current()._overviewController._challenge,p=(f.squad.getAllBrickIndices(),f.squad._formation.generalPositions),v=f.squad._formation.id;if(i=await h(a,0),u=i.slice(0,5).map((e=>e.id)),!u.length)return n.hideLoader(),void n.notice("notice.squaderror",2);for(let e of u){if(d++,n.changeLoadingText(["loadingclose.template2",`${d}`,""+(u.length-d)]),!r.base.template)return;let t=await h(e,1),i={},a=[],f=0,g={},m=0,y=[],b=[],w=JSON.parse(JSON.stringify(p));for(let e in t)if(e.match(/cardlid\d+/)){let o=t[e].Player_Resource,s=t[e].price,u=Number(e.match(/\d+/)[0])-1,c=r.formation[v][u],l=w.lastIndexOf(c);if(-1==l)return void n.hideLoader();w[l]="",i[l]=o,g[o]=s,f+=s,a.push(o)}for(let e=0;e<11;e++){let t=i[e];if(!t){b.push(null);continue}let n=new UTItemEntity;n.id=t,n.definitionId=t,n.concept=!0,n.stackCount=1,b.push(n)}for(let e of n.getItemBy(2,{definitionId:a})){let t=e.definitionId;if(a.includes(t)){m++,y.push(t),f-=g[t];for(let n in b)b[n]&&b[n].id==t&&(b[n].id=e.id,b[n].concept=!1)}}(-1==l||f<l)&&(c=a,l=f,o=e,s=b),await n.wait(.5,1)}r.base.template&&(await n.saveSquad(f,f.squad,s,c),n.saveOldSquad(f.squad,!1))},n.saveSquad=async(t,i,o,s)=>{r.base.savesquad=!0,i.removeAllItems(),i.setPlayers(o,!0),await services.SBC.saveChallenge(t).observe(this,(async function(o,a){a.success||(n.notice("notice.templateerror",2),i.removeAllItems(),r.base.savesquad=!1,n.hideLoader()),services.SBC.loadChallengeData(t).observe(this,(async function(i,{response:{squad:o}}){n.hideLoader();let a=o._players.map((e=>e._item));t.squad.setPlayers(a,!0),t.onDataChange.notify({squad:o}),r.base.savesquad=!1,isPhone()&&"UTSBCSquadOverviewViewController"!==e.current().className&&e.current()._parentViewController._eBackButtonTapped(),n.notice("notice.templatesuccess",0),n.loadPlayerPrice(s)}))}))},UTSBCService.prototype.loadChallengeData=function(e){var t=this,n=new EAObservable;return this.sbcDAO.loadChallenge(e.id,e.isInProgress()).observe(this,(function(e,r){e.unobserve(t),n.notify(r)})),n},n.playerToAuction=async(e,t)=>{let r=services.Item.itemDao.itemRepo.transfer.get(e)||services.Item.itemDao.itemRepo.unassigned.get(e)||services.Item.itemDao.itemRepo.club.items.get(e),i=services.Item.itemDao.itemRepo.transfer._collection.hasOwnProperty(e);if(r){if(!(repositories.Item.getPileSize(ItemPile.TRANSFER)-repositories.Item.numItemsInCache(ItemPile.TRANSFER)>0||i)||!t)return n.notice("notice.auctionmax",2),!1;{if(await n.playerGetLimits(r),r.hasPriceLimits()&&(t<r._itemPriceLimits.minimum||t>r._itemPriceLimits.maximum))return void n.notice(["notice.auctionlimits",r._staticData.name],2);let e=UTCurrencyInputControl.getIncrementBelowVal(t);services.Item.list(r,e,t,3600),n.notice(["notice.auctionsuccess",r._staticData.name,t],0)}}else n.notice(["notice.auctionnoplayer",e],2)},n.playerGetLimits=async e=>new Promise((t=>{e.hasPriceLimits()?t():services.Item.requestMarketData(e).observe(this,(async function(e,n){t()}))})),UTSelectItemFromClubViewController.prototype.updateItemList=function(e){i.plist.clubSelectItem.call(this,e),this._parentViewController._fsuFillType&&(this._parentViewController._fsuFillType%2?(this._parentViewController._fsuFillType++,0==e.length&&(n.notice("notice.noplayer",2),services.Item.itemDao.itemRepo.unassigned.reset())):0===this._parentViewController._fsuFillType||this.searchCriteria.defId.length||(this._parentViewController._fsuFillType=0))},i.squad={setPlayers:UTSquadEntity.prototype.setPlayers,swapPlayers:UTSquadEntity.prototype.swapPlayersByIndex,addItem:UTSquadEntity.prototype.addItemToSlot,removeItem:UTSquadEntity.prototype.removeItemFromSlot,removeAll:UTSquadEntity.prototype.removeAllItems},UTSquadEntity.prototype.swapPlayersByIndex=function(e,t){i.squad.swapPlayers.call(this,e,t),n.saveOldSquad(this,!0)},UTSquadEntity.prototype.addItemToSlot=function(e,t){if(i.squad.addItem.call(this,e,t),this.isSBC()){let r=this._fsuOldSquad[this._fsuOldSquadCount][e];r.definitionId==t.definitionId&&1==r.concept?this._fsuOldSquad[this._fsuOldSquadCount][e]=t:n.saveOldSquad(this,!0)}},UTSquadEntity.prototype.removeItemFromSlot=function(e){i.squad.removeItem.call(this,e),n.saveOldSquad(this,!0)},UTSquadEntity.prototype.removeAllItems=function(e){i.squad.removeAll.call(this,e),n.saveOldSquad(this,!0)},UTSquadEntity.prototype.setPlayers=function(e,t){i.squad.setPlayers.call(this,e,t),n.saveOldSquad(this,!0)},n.saveOldSquad=(e,t,n)=>{if(e.isSBC()&&(!r.base.savesquad||!t)){e.hasOwnProperty("_fsuOldSquad")&&!n||(e._fsuOldSquad=[],e._fsuOldSquadCount=-1);let t=[];for(let n of e.getPlayers()){let e=new UTItemEntity;e.id=n.item.id,e.definitionId=n.item.definitionId,e.stackCount=1,e.concept=n.item.concept,t.push(e)}-1!=e._fsuOldSquadCount&&e._fsuOldSquad[e._fsuOldSquadCount].map((e=>e.id)).join()===t.map((e=>e.id)).join()||(e._fsuOldSquadCount++,e._fsuOldSquad.push(t))}},n.getRatingPlayers=(e,t)=>{let i=e.getPlayers().map((e=>{if(e.item.rating&&!e.item.concept)return e.item.databaseId})).filter(Boolean),o=e.getPlayers().map((e=>{if(!e.isBrick())return e.item})),s=t?Array.from(t):[],a=[];for(let e of o){let t=e,o=0;if(t.concept?o=e.rating:0==t.rating&&s.length&&(o=s.shift()),o){let e=n.getItemBy(2,{GTdatabaseId:i,rating:o,GTleagueId:r.build.league?r.set.shield_league:[],GTrareflag:r.build.rare?3:-1},services.Item.itemDao.itemRepo.getUnassignedItems());e.length&&(t=e[0],i.push(e[0].databaseId))}a.push(t)}return a},UTUnassignedTileView.prototype.setNumberOfItems=function(t){i.plist.ut.call(this,t),this.__root.querySelectorAll(".btn-standard").forEach((e=>e.remove()));let r=services.Item.itemDao.itemRepo.getUnassignedItems().map((e=>{if(0==e.duplicateId)return e})).filter(Boolean);if(r.length){let t=n.createButton(new UTStandardButtonControl,u(["uatoclub.btntext",r.length]),(t=>{t.setInteractionState(0),services.Item.move(t._fsuPlayers,ItemPile.CLUB).observe(e.current(),((t,r)=>{t.unobserve(this),r.success?(n.notice("uatoclub.success",0),"UTStorePackViewController"==e.current().className?e.current().getUnassignedItems():"UTHomeHubViewController"==e.current().className?e.current()._nUnassignedItemAdded():services.Item.requestUnassignedItems()):n.notice("uatoclub.error",2)}))}),"call-to-action mini");t._fsuPlayers=r,t.__root.style.marginLeft="2rem",t.__root.style.zIndex=1,this.__label.after(t.__root)}}}();
